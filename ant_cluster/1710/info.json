{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "667967f3a72b097153bbd1d6878cb84d", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "091edf1e835c8ad67984fa7aa95d9b34", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/junit/BatchTest.java", "commitBeforeChange": "f45adb64fe4845bc5e44cea075b39180fbb453a0", "commitAfterChange": "4d402cce79451553a323aa999676782e425000a0", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 6, "signatureBeforeChange": "     private String[] getFilenames()", "signatureAfterChange": "     private String[] getFilenames()", "diff": ["-        final int size = this.filesets.size();", "-        for (int j = 0; j < size; j++) {", "-            FileSet fs = (FileSet) filesets.elementAt(j);", "-            DirectoryScanner ds = fs.getDirectoryScanner(project);", "-            ds.scan();", "-            String[] f = ds.getIncludedFiles();", "-            for (int k = 0; k < f.length; k++) {", "-                String pathname = f[k];", "+\tIterator iter = resources.iterator();", "+\twhile (iter.hasNext()) {", "+\t    Resource r = (Resource) iter.next();", "+\t    if (r.isExists()) {", "+\t\tString pathname = r.getName();", "-            }", "+\t    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "531f14730160ca248fa20b243bcf7cc2", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/ReplaceRegExp.java", "commitBeforeChange": "7171341fc60cfd4d7cd4f92bda0778bf98c17094", "commitAfterChange": "1bae2089f57cca232ec1e2d96473391c6ad1385b", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 14, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-        if (file != null && filesets.size() > 0) {", "+        if (file != null && resources != null) {", "-                                     + \"and filesets at the same time.\");", "+                                     + \"and resource collections at the same \"", "+                                     + \"time.\");", "-        int sz = filesets.size();", "-", "-        for (int i = 0; i < sz; i++) {", "-            FileSet fs = (FileSet) (filesets.elementAt(i));", "-            DirectoryScanner ds = fs.getDirectoryScanner(getProject());", "-", "-            String[] files = ds.getIncludedFiles();", "-", "-            for (int j = 0; j < files.length; j++) {", "-                File f = new File(fs.getDir(getProject()), files[j]);", "+        if (resources != null) {", "+            for (Iterator i = resources.iterator(); i.hasNext(); ) {", "+                FileProvider fp =", "+                    (FileProvider) ((Resource) i.next()).as(FileProvider.class);", "+                File f = fp.getFile();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a1c9f100f554d6e46af971317e332bd2", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "c51cce56b802399a1712e67544a3224da62b7c49", "commitAfterChange": "36e5ac64fd1e76c49877ce8bb5596589a2c55ddf", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 16, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-                && filesets.isEmpty()) {", "+                && resources.size() == 0) {", "-                    throw new BuildException(\"Source file or fileset, \"", "+                    throw new BuildException(\"Source file or resource \"", "+                                             + \"collection, \"", "-            // deal with the filesets", "-            for (int i = 0; i < filesets.size(); i++) {", "-                FileSet fs = (FileSet) filesets.elementAt(i);", "-                DirectoryScanner ds = fs.getDirectoryScanner(getProject());", "-                File srcDir = fs.getDir(getProject());", "-", "-                String[] srcFiles = ds.getIncludedFiles();", "-", "-                // Make a transaction for each file", "-                for (int j = 0; j < srcFiles.length; j++) {", "-                    Transaction t = createTransaction();", "-                    t.setSrc(new File(srcDir, srcFiles[j]));", "-                }", "+            // deal with the resources", "+            Iterator iter = resources.iterator();", "+            while (iter.hasNext()) {", "+                Resource r = (Resource) iter.next();", "+                // Make a transaction for each resource", "+                Transaction t = createTransaction();", "+                t.setSrcResource(r);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ae4e90d21fe4a929ceb79d51e0dfde82", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/email/EmailTask.java", "commitBeforeChange": "3af551b1bbd21e0ff6d8bb1453dac216ce89e9da", "commitAfterChange": "7c2876282a38e560ee26eb15cf136629dc672c2e", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 29, "signatureBeforeChange": "     public void execute()", "signatureAfterChange": "     public void execute()", "diff": ["-        Vector savedFiles = (Vector) files.clone();", "+", "-            Enumeration e = filesets.elements();", "+            Vector files = new Vector();", "+            if (attachments != null) {", "+                Iterator iter = attachments.iterator();", "-            while (e.hasMoreElements()) {", "-                FileSet fs = (FileSet) e.nextElement();", "-", "-                DirectoryScanner ds = fs.getDirectoryScanner(getProject());", "-                String[] includedFiles = ds.getIncludedFiles();", "-                File baseDir = ds.getBasedir();", "-", "-                for (int j = 0; j < includedFiles.length; ++j) {", "-                    files.addElement(new File(baseDir, includedFiles[j]));", "+                while (iter.hasNext()) {", "+                    FileResource fr = (FileResource) iter.next();", "+                    files.addElement(fr.getFile());", "-            files = savedFiles;"]}]}