{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "02af73d770fa5eda39e75148835fa6c2", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6d9dc1b788ec3bb59d0b935816b9e55c", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/sandbox/filterreaders/src/main/org/apache/tools/ant/taskdefs/LoadProperties.java", "commitBeforeChange": "07f926d903581d863a35f5ab34929cd53a26023c", "commitAfterChange": "4e222b97c6be55124832d53c6478a2688df9e308", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "     public final void execute() throws BuildException", "signatureAfterChange": "     public final void execute() throws BuildException", "diff": ["-            int index = 0;", "-", "-                while (index != -1) {", "-                    int oldIndex = index;", "-                    index = text.indexOf(\"\\n\", oldIndex);", "-                    if (index != -1) {", "-                        String line = text.substring(oldIndex, index);", "-                        if (line.endsWith(\"\\r\")) {", "-                            line = line.substring(0, line.length() - 1);", "-                        }", "-                        int equalIndex = line.indexOf(\"=\");", "-                        int spaceIndex = line.indexOf(\" \");", "-                        int sepIndex = -1;", "-", "-                        if (equalIndex != -1 || spaceIndex != -1) {", "-                            if (equalIndex == -1) {", "-                                sepIndex = spaceIndex;", "-                            } else if (spaceIndex == -1) {", "-                                sepIndex = equalIndex;", "-                            } else {", "-                                sepIndex = Math.min(spaceIndex, equalIndex);", "-                            }", "-                        }", "-", "-                        if (sepIndex != -1) {", "-                            String key = line.substring(0, sepIndex);", "-                            String value = line.substring(sepIndex + 1);", "-                            if (value != null && value.trim().length() > 0) {", "-                                project.setNewProperty(key, value);", "-                            }", "-                        }", "-", "-                        ++index;", "+                StringInputStream sis = new StringInputStream(text);", "+                Properties props = new Properties();", "+                props.load(sis);", "+                Enumeration e = props.keys();", "+                while (e.hasMoreElements()) {", "+                    String key = (String) e.nextElement();", "+                    String value = props.getProperty(key);", "+                    if (key != null && value != null", "+                            && value.trim().length() > 0) {", "+                        project.setNewProperty(key, value);", "+                sis.close();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "beeda2f6f42ef3590a0ad2e2f7a8df2d", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/TraXLiaison.java", "commitBeforeChange": "8f70bc2a919459c49c1977d91551f43819063954", "commitAfterChange": "1e8307708de490453db28c89f777eb4a9c08767b", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 17, "signatureBeforeChange": "      private void logError(TransformerException e, String type)", "signatureAfterChange": "      private void logError(TransformerException e, String type)", "diff": ["-", "-    private void logError(TransformerException e, String type) {", "-        if (logger == null) {", "-            return;", "-", "-        StringBuffer msg = new StringBuffer();", "-        if (e.getLocator() != null) {", "-            if (e.getLocator().getSystemId() != null) {", "-                String url = e.getLocator().getSystemId();", "-                if (url.startsWith(\"file:///\")) {", "-                  url = url.substring(8);", "-                }", "-                msg.append(url);", "-            } else {", "-                msg.append(\"Unknown file\");", "-            }", "-            if (e.getLocator().getLineNumber() != -1) {", "-                msg.append(\":\" + e.getLocator().getLineNumber());", "-                if (e.getLocator().getColumnNumber() != -1) {", "-                    msg.append(\":\" + e.getLocator().getColumnNumber());", "-                }", "-        msg.append(\": \" + type + \"! \");", "-        msg.append(e.getMessage());", "-        if (e.getCause() != null) {", "-            msg.append(\" Cause: \" + e.getCause());", "-        }", "-        logger.log(msg.toString());", "+", "+    private void logError(TransformerException e, String type) {", "+        if (logger == null) {", "+            return;", "+        }", "+", "+        StringBuffer msg = new StringBuffer();", "+        SourceLocator locator = e.getLocator();", "+        if (locator != null) {", "+            String systemid = locator.getSystemId();", "+            if (systemid != null) {", "+                String url = systemid;", "+                if (url.startsWith(\"file:///\")) {", "+                    url = url.substring(8);", "+                }", "+                msg.append(url);", "+            } else {", "+                msg.append(\"Unknown file\");", "+            }", "+            int line = locator.getLineNumber();", "+            if (line != -1) {", "+                msg.append(\":\" + line);", "+                int column = locator.getColumnNumber();", "+                if (column != -1) {", "+                    msg.append(\":\" + column);", "+                }", "+            }", "+        }", "+        msg.append(\": \" + type + \"! \");", "+        msg.append(e.getMessage());", "+        if (e.getCause() != null) {", "+            msg.append(\" Cause: \" + e.getCause());", "+        }", "+", "+        logger.log(msg.toString());", "+    }"]}]}