{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "aa48ed57d4ba85d5feb2dfb71c7954b1", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "062b9b2783327264468ca0f367ae86ec", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "b04ea4a4a37fda61874f9da193ccef4095afa2e8", "commitAfterChange": "672481d0aed938db880c9691736877e74cde875c", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 23, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-        // Load the driver using the ", "-                log( \"Loading \" + driver + \" using AntClassLoader with classpath \" + classpath, ", "-                     Project.MSG_VERBOSE );", "-", "-                loader = new AntClassLoader(project, classpath);", "+                // check first that it is not already loaded otherwise", "+                // consecutive runs seems to end into an OutOfMemoryError", "+                // or it fails when there is a native library to load", "+                // several times.", "+                // this is far from being perfect but should work in most cases.", "+                synchronized (loaderMap){", "+                    if (caching){", "+                        loader = (AntClassLoader)loaderMap.get(driver);", "+                    }", "+                    if (loader == null){", "+                        log( \"Loading \" + driver + \" using AntClassLoader with classpath \" + classpath,", "+                             Project.MSG_VERBOSE );", "+                        loader = new AntClassLoader(project, classpath);", "+                        if (caching){", "+                            loaderMap.put(driver, loader);", "+                        }", "+                    } else {", "+                        log(\"Loading \" + driver + \" using a cached AntClassLoader.\",", "+                                Project.MSG_VERBOSE);", "+                    }", "+                }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f51aafe4ffa7511290be7ae6a118fc59", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/LoadFile.java", "commitBeforeChange": "f19f07d6e4c72f241057ecfc32d80be21201bbf7", "commitAfterChange": "ca91f8cb7e4f2bfe1a191dea6126a32649af9565", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "     public final void execute()         throws BuildException", "signatureAfterChange": "     public final void execute()         throws BuildException", "diff": ["-            ChainReaderHelper crh = new ChainReaderHelper();", "-            crh.setBufferSize(size);", "-            crh.setPrimaryReader(instream);", "-            crh.setFilterChains(filterChains);", "-            crh.setProject(project);", "-            instream = crh.getAssembledReader();", "-", "-            String text = crh.readFully(instream);", "+            String text = \"\";", "+            if (size != 0) {", "+                ChainReaderHelper crh = new ChainReaderHelper();", "+                crh.setBufferSize(size);", "+                crh.setPrimaryReader(instream);", "+                crh.setFilterChains(filterChains);", "+                crh.setProject(project);", "+                instream = crh.getAssembledReader();", "+    ", "+                text = crh.readFully(instream);", "+            }", "-                project.setNewProperty(property, text);", "-                log(\"loaded \" + text.length() + \" characters\",", "-                    Project.MSG_VERBOSE);", "-                log(property + \" := \" + text, Project.MSG_DEBUG);", "+                if (text.length() > 0) {", "+                    project.setNewProperty(property, text);", "+                    log(\"loaded \" + text.length() + \" characters\",", "+                        Project.MSG_VERBOSE);", "+                    log(property + \" := \" + text, Project.MSG_DEBUG);", "+                }"]}]}