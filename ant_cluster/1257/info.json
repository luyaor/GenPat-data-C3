{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "244bcce248dd3485752aa2a81484705c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7475a6c1ed16935ca297b8999af050bb", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Move.java", "commitBeforeChange": "7627a966ee4283bebb43ff4f0b6eeb84236a6019", "commitAfterChange": "c0649769e0063616ae46a2e58a57203bb42a7f8e", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "     protected boolean renameFile(File sourceFile, File destFile, boolean filtering,                                  boolean overwrite) throws IOException, BuildException", "signatureAfterChange": "     protected boolean renameFile(File sourceFile, File destFile, boolean filtering,                                  boolean overwrite) throws IOException, BuildException", "diff": ["-        // ensure that parent dir of dest file exists!", "+        // identical logic lives in FileUtils.rename():", "-        } else if (destFile.isFile() && !getFileUtils().fileNameEquals(sourceFile, destFile)", "-                && !destFile.delete()) {", "-            throw new BuildException(\"Unable to remove existing file \" + destFile);", "+        } else if (destFile.isFile()) {", "+            sourceFile = getFileUtils().normalize(sourceFile.getAbsolutePath()).getCanonicalFile();", "+            destFile = getFileUtils().normalize(destFile.getAbsolutePath());", "+            if (destFile.equals(sourceFile)) {", "+                //no point in renaming a file to its own canonical version...", "+                return true;", "+            }", "+            if (!(sourceFile.equals(destFile.getCanonicalFile()) || destFile.delete())) {", "+                throw new BuildException(\"Unable to remove existing file \" + destFile);", "+            }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "de7df56da8e186276fa4beb8fbe55d17", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Move.java", "commitBeforeChange": "c717727548e7807ced7eeff05871f414a6f57413", "commitAfterChange": "3a896be7fdf1beb063702928ae89b4f7cbe106c2", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "     protected boolean renameFile(File sourceFile, File destFile,                                  boolean filtering, boolean overwrite)         throws IOException, BuildException", "signatureAfterChange": "     protected boolean renameFile(File sourceFile, File destFile, boolean filtering,                                  boolean overwrite) throws IOException, BuildException", "diff": ["-    protected boolean renameFile(File sourceFile, File destFile,", "-                                 boolean filtering, boolean overwrite)", "-        throws IOException, BuildException {", "-", "+    protected boolean renameFile(File sourceFile, File destFile, boolean filtering,", "+                                 boolean overwrite) throws IOException, BuildException {", "-            && !(filtering || destFile.isDirectory())) {", "+                && !(filtering || destFile.isDirectory())) {", "-            if (destFile.isFile() && !destFile.equals(sourceFile)", "-                && !destFile.delete()) {", "-                throw new BuildException(\"Unable to remove existing \"", "-                                         + \"file \" + destFile);", "+            if (destFile.isFile() && !getFileUtils().fileNameEquals(sourceFile, destFile)", "+                    && !destFile.delete()) {", "+                throw new BuildException(\"Unable to remove existing \" + \"file \" + destFile);"]}]}