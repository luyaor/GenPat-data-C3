{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "8fbd18964a4d9034935133f2ca6f8415", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1568240c901f72d39bf5723a4cfa3b64", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Zip.java", "commitBeforeChange": "113e9e7644f4bb181f776946ddf6c8343df4b1a5", "commitAfterChange": "a50ad9fae4c1995aa1c5a8ed077c5025b371f647", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 21, "signatureBeforeChange": "     protected void addFiles(Vector filesets, ZipOutputStream zOut)         throws IOException", "signatureAfterChange": "     protected void addFiles(Vector filesets, ZipOutputStream zOut)         throws IOException", "diff": ["-            PrefixedFileSet fs = (PrefixedFileSet) filesets.elementAt(i);", "+            FileSet fs = (FileSet) filesets.elementAt(i);", "-            String prefix = fs.getPrefix();", "+            String prefix = \"\";", "+            String fullpath = \"\";", "+            if (fs instanceof PrefixedFileSet) {", "+                PrefixedFileSet pfs = (PrefixedFileSet) fs;", "+                prefix = pfs.getPrefix();", "+                fullpath = pfs.getFullpath();", "+            }", "+            ", "-            String fullpath = fs.getFullpath();", "-\t\t\t}", "+            }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "edca4da6e71682a312b9a5544c946479", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Zip.java", "commitBeforeChange": "51e2cc543512d445e415bc5b7c2a42f98ddf8446", "commitAfterChange": "8e955e3a2e84e093d19f8053f610c479a3f27478", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": "     protected void addFiles(Vector v, ZipOutputStream zOut, String prefix)         throws IOException", "signatureAfterChange": "     protected void addFiles(Vector filesets, ZipOutputStream zOut)         throws IOException", "diff": ["-     */", "-    protected void addFiles(Vector v, ZipOutputStream zOut, String prefix)", "-        throws IOException {", "-        for (int i=0; i<v.size(); i++) {", "-            FileSet fs = (FileSet) v.elementAt(i);", "-            DirectoryScanner ds = fs.getDirectoryScanner(project);", "-            addFiles(ds, zOut, prefix);", "-        }", "-    }", "+    protected void addFiles(Vector filesets, ZipOutputStream zOut)", "+        // Add each fileset in the Vector.", "+        for (int i = 0; i<filesets.size(); i++) {", "+            PrefixedFileSet fs = (PrefixedFileSet) filesets.elementAt(i);", "+            String fullpath = fs.getFullpath();", "+            // Need to manually add either fullpath's parent directory, or ", "+            // the prefix directory, to the archive. ", "+            } else if (fullpath.length() > 0) {", "+                addParentDirs(null, fullpath, zOut, \"\");", "+\t\t\t}", "+            // Add the fileset.", "+            addFiles(ds, zOut, prefix, fullpath);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ff9349b86f91d0cb3386f32faecbdf81", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Zip.java", "commitBeforeChange": "8a40113487a0c8110a46d034d954bdd073f0a1c2", "commitAfterChange": "34f1e4e99194055534eb0cf61bc0b9c74c79e4b0", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": "     protected void addFiles(Vector filesets, ZipOutputStream zOut)         throws IOException", "signatureAfterChange": "     protected void addFiles(Vector filesets, ZipOutputStream zOut)         throws IOException", "diff": ["-            ZipFileSet fs = (ZipFileSet) filesets.elementAt(i);", "+            FileSet fs = (FileSet) filesets.elementAt(i);", "-            String prefix = fs.getPrefix();", "+", "+            String prefix = \"\";", "+            String fullpath = \"\";", "+            if (fs instanceof ZipFileSet) {", "+                ZipFileSet zfs = (ZipFileSet) fs;", "+                prefix = zfs.getPrefix();", "+                fullpath = zfs.getFullpath();", "+            }", "+            ", "-            String fullpath = fs.getFullpath();", "+", "-            if (fs.getSrc() != null) {", "-              addZipEntries(fs, ds, zOut, prefix);", "-             } else {", "-               // Add the fileset.", "-                 addFiles(ds, zOut, prefix, fullpath);", "-             }", "+            if (fs instanceof ZipFileSet", "+                && ((ZipFileSet) fs).getSrc() != null) {", "+                addZipEntries((ZipFileSet) fs, ds, zOut, prefix);", "+            } else {", "+                // Add the fileset.", "+                addFiles(ds, zOut, prefix, fullpath);", "+            }"]}]}