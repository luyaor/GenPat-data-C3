{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0eae005271f054a7101e2f4663a1d0a8", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "04c2946adb893cb89e5de071a7de5b4b", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/PropertyFile.java", "commitBeforeChange": "62f2142b3431002933bf1281d244c164ed962890", "commitAfterChange": "6cbeee38fa5502baa5d75036ad2c0418cf808d56", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 17, "signatureBeforeChange": "          protected void executeOn(Properties props) throws BuildException", "signatureAfterChange": "          protected void executeOn(Properties props) throws BuildException", "diff": ["-            // m_type may be null because it wasn't set", "+            // type may be null because it wasn't set", "+            String oldValue = (String)props.get(key);", "-                if (m_type == Type.INTEGER_TYPE)", "+                if (type == Type.INTEGER_TYPE)", "-                    executeInteger((String)props.get(m_key));", "+                    executeInteger(oldValue);", "-                else if (m_type == Type.DATE_TYPE)", "+                else if (type == Type.DATE_TYPE)", "-                    executeDate((String)props.get(m_key));", "+                    executeDate(oldValue);", "-                else if (m_type == Type.STRING_TYPE)", "+                else if (type == Type.STRING_TYPE)", "-                    executeString((String)props.get(m_key));", "+                    executeString(oldValue);", "-                    throw new BuildException(\"Unknown operation type: \"+m_type+\"\");", "+                    throw new BuildException(\"Unknown operation type: \"+type+\"\");", "+            ", "+            if (value == null) {", "+                value = \"\";", "+            }", "+            ", "-            props.put(m_key, m_value);", "-", "+            props.put(key, value);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "092118b36feb625cdf3a47accf38b60f", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/antidote/org/apache/tools/ant/gui/modules/TargetMonitor.java", "commitBeforeChange": "ffa6e24ba429847c04da9162971b6203151a7ce1", "commitAfterChange": "1056b715f84a4c3b17b7fcdecbaef6eaeb566ea7", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "         public boolean eventPosted(EventObject event)", "signatureAfterChange": "         public boolean eventPosted(EventObject event)", "diff": ["+            ACSElement[] selected = e.getSelectedElements();", "-            ProjectProxy p =  getContext().getProject();", "-            if(p != null) {", "-                ElementTreeSelectionModel selections = ", "-                    p.getTreeSelectionModel();", "-                ACSTargetElement[] targets = selections.getSelectedTargets();", "-                if(targets != null && targets.length > 0) {", "-                    StringBuffer buf = new StringBuffer();", "-                    for(int i = 0; i < targets.length; i++) {", "-                        buf.append(targets[i].getName());", "-                        if(i < targets.length - 1) {", "+            if(selected != null && selected.length > 0) {", "+                StringBuffer buf = new StringBuffer();", "+", "+                for(int i = 0; i < selected.length; i++) {", "+                    if(selected[i] instanceof ACSTargetElement) {", "+                        if(buf.length() > 0) {", "+                        buf.append(((ACSTargetElement)selected[i]).getName());", "+                }", "+", "+                if(buf.length() > 0) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "78e700230877d381f8c936f634de42af", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/XSLTProcess.java", "commitBeforeChange": "990243c7851b0c2bc6c5f21a3b61deed0af7712e", "commitAfterChange": "6dbabcb7764ee56eeb2e0806486f4f9f76c40356", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 19, "signatureBeforeChange": "     private void process(File baseDir, String xmlFile, File destDir,                          File stylesheet)         throws BuildException", "signatureAfterChange": "     private void process(File baseDir, String xmlFile, File destDir,                          File stylesheet)         throws BuildException", "diff": ["-        String fileExt = targetExtension;", "-            int dotPos = xmlFile.lastIndexOf('.');", "-            if (dotPos > 0) {", "-                outFile = new File(destDir,", "-                    xmlFile.substring(0, xmlFile.lastIndexOf('.')) + fileExt);", "+            FileNameMapper mapper = null;", "+            if (mapperElement != null) {", "+                mapper = mapperElement.getImplementation();", "-                outFile = new File(destDir, xmlFile + fileExt);", "+                mapper = new StyleMapper();", "+", "+            String[] outFileName = mapper.mapFileName(xmlFile);", "+            if (outFileName == null || outFileName.length == 0) {", "+                log(\"Skipping \" + inFile + \" it cannot get mapped to output.\",", "+                    Project.MSG_VERBOSE);", "+                return;", "+            } else if (outFileName == null || outFileName.length > 1) {", "+                log(\"Skipping \" + inFile + \" its mapping is ambiguos.\",", "+                    Project.MSG_VERBOSE);", "+                return;", "+            }", "+", "+            outFile = new File(destDir, outFileName[0]);", "+"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e9d7cc3a7d977da4978397abfbb88816", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Move.java", "commitBeforeChange": "12f1e22e1fcc43be641c3f557ce282e97bfbc06a", "commitAfterChange": "84bfc9dabe08de4ecafaa47de7b125fc4ce8724e", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 7, "signatureBeforeChange": "     protected boolean renameFile(File sourceFile, File destFile,                                  boolean filtering, boolean overwrite)         throws IOException, BuildException", "signatureAfterChange": "     protected boolean renameFile(File sourceFile, File destFile,                                  boolean filtering, boolean overwrite)         throws IOException, BuildException", "diff": ["-                // not using getParentFile method to stay 1.1 compatibility", "-                String parentPath = destFile.getParent();", "-                if (parentPath != null) {", "-                    File parent = new File(parentPath);", "-                    if (!parent.exists()) {", "-                        parent.mkdirs();", "-                    }", "+                File parent = destFile.getParentFile();", "+                if (parent != null && !parent.exists()) {", "+                    parent.mkdirs();", "-                if (destFile.exists() && destFile.isFile()) {", "-                    if (!destFile.delete()) {", "+                if (destFile.exists()) {", "+                    if (sourceFile.isDirectory()) {", "+                     throw new BuildException(", "+                        new StringBuffer(\"Cannot replace \").append(", "+                        ((destFile.isFile()) ? \"file \" : \"directory \")).append(", "+                        destFile).append(\" with directory \").append(", "+                        sourceFile).toString());", "+                    } else if (destFile.isFile() && !destFile.delete()) {"]}]}