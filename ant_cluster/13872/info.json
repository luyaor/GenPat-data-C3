{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "aa5a4644026fcbdee74150ec086c90e5", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "37a0a1a6f2fd521330e80752cba105ec", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Manifest.java", "commitBeforeChange": "8ceff1b470d117265bbe4dd7d982e448c213bb4f", "commitAfterChange": "c35619ac8a554bebec2008a08b8084993b3837f1", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": "         public String addAttributeAndCheck(Attribute attribute) throws ManifestException", "signatureAfterChange": "         public String addAttributeAndCheck(Attribute attribute) throws ManifestException", "diff": ["-            else if (attributes.containsKey(attribute.getName().toLowerCase())) {", "-                throw new ManifestException(\"The attribute \\\"\" + attribute.getName() + \"\\\" may not \" + ", "-                                            \"occur more than once in the same section\");", "-            }", "-                attributes.put(attribute.getName().toLowerCase(), attribute);", "+                // classpath attributes go into a vector", "+                String attributeName = attribute.getName().toLowerCase();", "+                if (attributeName.equals(ATTRIBUTE_CLASSPATH)) {", "+                    Vector classpathAttrs = (Vector)attributes.get(attributeName);", "+                    if (classpathAttrs == null) {", "+                        classpathAttrs = new Vector();", "+                        attributes.put(attributeName, classpathAttrs);", "+                    }", "+                    classpathAttrs.addElement(attribute);", "+                }", "+                else if (attributes.containsKey(attributeName)) {", "+                    throw new ManifestException(\"The attribute \\\"\" + attribute.getName() + \"\\\" may not \" + ", "+                                                \"occur more than once in the same section\");", "+                }", "+                else {", "+                    attributes.put(attributeName, attribute);", "+                }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b80843946a200fd3d3c6b8db638f0a52", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Manifest.java", "commitBeforeChange": "7e7fa2f905e691ba00568bc670cc80060c224fd4", "commitAfterChange": "590936af269c77bda5fb410fd81e19958062efe6", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": "                  public void addAttribute(Attribute attribute) throws IOException", "signatureAfterChange": "         public String addAttribute(Attribute attribute) throws ManifestException", "diff": ["-        public void addAttribute(Attribute attribute) throws IOException {", "-            if (attributes.containsKey(attribute.getName().toLowerCase())) {", "-                throw new IOException(\"The attribute \\\"\" + attribute.getName() + \"\\\" may not occur more than\" +", "-                                      \" once in the same section\");", "+         */", "+        public String addAttribute(Attribute attribute) throws ManifestException {", "+            if (attribute.getName().equalsIgnoreCase(ATTRIBUTE_NAME)) {", "+                warnings.addElement(\"\\\"\" + ATTRIBUTE_NAME + \"\\\" attributes should not occur in the \" +", "+                                    \"main section and must be the first element in all \" + ", "+                                    \"other sections: \\\"\" +attribute.getName() + \": \" + attribute.getValue() + \"\\\"\");  ", "+                return attribute.getValue();", "-            attributes.put(attribute.getName().toLowerCase(), attribute);", "+            ", "+            if (attribute.getName().toLowerCase().startsWith(ATTRIBUTE_FROM.toLowerCase())) {", "+                warnings.addElement(\"Manifest attributes should not start with \\\"\" +", "+                                    ATTRIBUTE_FROM + \"\\\" in \\\"\" +attribute.getName() + \": \" + attribute.getValue() + \"\\\"\");  ", "+            }", "+            else if (attributes.containsKey(attribute.getName().toLowerCase())) {", "+                throw new ManifestException(\"The attribute \\\"\" + attribute.getName() + \"\\\" may not \" + ", "+                                            \"occur more than once in the same section\");", "+            }", "+            else {", "+                attributes.put(attribute.getName().toLowerCase(), attribute);", "+            }", "+            return null;"]}]}