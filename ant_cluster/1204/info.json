{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4c690fd46f7fbca5e5419d2952f9f11a", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3ea8b64e0d8d1294d4930ad9291e71fb", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/main/org/apache/tools/ant/taskdefs/optional/perforce/P4Counter.java", "commitBeforeChange": "0380eac20a5d2f2fef36091bc8a51135eb916c27", "commitAfterChange": "0db510656aabc378951525537403492f9b684e81", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "      public void execute()         throws TaskException", "signatureAfterChange": "      public void execute()         throws TaskException", "diff": ["+        validate();", "-        if( ( counter == null ) || counter.length() == 0 )", "-        {", "-            throw new TaskException( \"No counter specified to retrieve\" );", "-        }", "-", "-        if( shouldSetValue && shouldSetProperty )", "-        {", "-            throw new TaskException( \"Cannot both set the value of the property and retrieve the value of the property.\" );", "-        }", "-", "-        String command = \"counter \" + P4CmdOpts + \" \" + counter;", "-        if( !shouldSetProperty )", "+        String command = \"counter \" + m_p4CmdOpts + \" \" + m_counter;", "+        if( !shouldSetProperty() )", "-        if( shouldSetValue )", "+        if( m_shouldSetValue )", "-            command += \" \" + value;", "+            command += \" \" + m_value;", "-        if( shouldSetProperty )", "+        execP4Command( command, null );", "+    }", "-            final Project myProj = getProject();", "-", "-            P4Handler handler =", "-                new P4HandlerAdapter()", "-                {", "-                    public void process( String line )", "-                    {", "-                        getLogger().debug( \"P4Counter retrieved line \\\"\" + line + \"\\\"\" );", "-                        try", "-                        {", "-                            value = Integer.parseInt( line );", "-                            setProperty( property, \"\" + value );", "-                        }", "-                        catch( NumberFormatException nfe )", "-                        {", "-                            throw new TaskException( \"Perforce error. Could not retrieve counter value.\" );", "-                        }", "-                    }", "-                };", "-", "-            execP4Command( command, handler );", "-            execP4Command( command, new SimpleP4OutputHandler( this ) );"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4319a79e32cddd79a419aab1f1f4bd6a", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/perforce/P4Counter.java", "commitBeforeChange": "4e4e5054b4660bce6d1929c67d07a27ddb47d17d", "commitAfterChange": "405db5ebc65b2d89985d03b4882ca6c6c18b8375", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 3, "signatureBeforeChange": "      public void execute() throws BuildException", "signatureAfterChange": "      public void execute() throws BuildException", "diff": ["+", "-        String command = \"-s counter \" + P4CmdOpts + \" \" + counter;", "+        if(shouldSetValue && shouldSetProperty) {", "+            throw new BuildException(\"Cannot both set the value of the property and retrieve the value of the property.\");", "+        }", "+", "+        String command = \"counter \" + P4CmdOpts + \" \" + counter;", "+        if(!shouldSetProperty) {", "+            // NOTE kirk@radik.com 04-April-2001 -- If you put in the -s, you", "+            // have to start running through regular expressions here. Much easier", "+            // to just not include the scripting information than to try to add it", "+            // and strip it later.", "+            command = \"-s \" + command;", "+        }", "-        execP4Command(command, new SimpleP4OutputHandler(this));", "+        if(shouldSetProperty) {", "+            final Project myProj = project;", "+", "+            P4Handler handler = new P4HandlerAdapter() {", "+                public void process(String line) {", "+                    log(\"P4Counter retrieved line \\\"\"+ line + \"\\\"\", Project.MSG_VERBOSE);", "+                    try {", "+                        value = Integer.parseInt(line);", "+                        myProj.setProperty(property, \"\"+value);", "+                    } catch (NumberFormatException nfe) {", "+                        throw new BuildException(\"Perforce error. Could not retrieve counter value.\");", "+                    }", "+                }", "+            };", "+", "+            execP4Command(command, handler);", "+        } else {", "+            execP4Command(command, new SimpleP4OutputHandler(this));", "+        }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c3cbe5e97b504977a475648c0179ff87", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/todo/org/apache/tools/ant/taskdefs/optional/perforce/P4Counter.java", "commitBeforeChange": "0380eac20a5d2f2fef36091bc8a51135eb916c27", "commitAfterChange": "0db510656aabc378951525537403492f9b684e81", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "      public void execute()         throws TaskException", "signatureAfterChange": "      public void execute()         throws TaskException", "diff": ["+        validate();", "-        if( ( counter == null ) || counter.length() == 0 )", "-        {", "-            throw new TaskException( \"No counter specified to retrieve\" );", "-        }", "-", "-        if( shouldSetValue && shouldSetProperty )", "-        {", "-            throw new TaskException( \"Cannot both set the value of the property and retrieve the value of the property.\" );", "-        }", "-", "-        String command = \"counter \" + P4CmdOpts + \" \" + counter;", "-        if( !shouldSetProperty )", "+        String command = \"counter \" + m_p4CmdOpts + \" \" + m_counter;", "+        if( !shouldSetProperty() )", "-        if( shouldSetValue )", "+        if( m_shouldSetValue )", "-            command += \" \" + value;", "+            command += \" \" + m_value;", "-        if( shouldSetProperty )", "+        execP4Command( command, null );", "+    }", "-            final Project myProj = getProject();", "-", "-            P4Handler handler =", "-                new P4HandlerAdapter()", "-                {", "-                    public void process( String line )", "-                    {", "-                        getLogger().debug( \"P4Counter retrieved line \\\"\" + line + \"\\\"\" );", "-                        try", "-                        {", "-                            value = Integer.parseInt( line );", "-                            setProperty( property, \"\" + value );", "-                        }", "-                        catch( NumberFormatException nfe )", "-                        {", "-                            throw new TaskException( \"Perforce error. Could not retrieve counter value.\" );", "-                        }", "-                    }", "-                };", "-", "-            execP4Command( command, handler );", "-            execP4Command( command, new SimpleP4OutputHandler( this ) );"]}]}