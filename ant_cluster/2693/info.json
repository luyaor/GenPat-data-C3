{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ca08720a0c9fa78ae7b7cdb96e3262d3", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "16c1010117f16b19e9b7d6e36eb42bab", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/todo/org/apache/tools/todo/types/PathUtil.java", "commitBeforeChange": "62562693ac733d0697b5a522972f36ea5570225c", "commitAfterChange": "a816a71d9e2587a83890f499dd2cabb7c6e02889", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "     public static String formatPath( final Path path, final TaskContext context )         throws TaskException", "signatureAfterChange": "     public static String formatPath( final File[] path )", "diff": ["-    public static String formatPath( final Path path, final TaskContext context )", "+    public static String formatPath( final File[] path )", "+    {", "+        // empty path return empty string", "+        if( path.length == 0 )", "+        {", "+            return \"\";", "+        }", "+", "+        // path containing one or more elements", "+        final StringBuffer result = new StringBuffer( path[ 0 ].toString() );", "+        for( int i = 1; i < path.length; i++ )", "+        {", "+            result.append( File.pathSeparatorChar );", "+            result.append( path[ i ].getAbsolutePath() );", "+        }", "+", "+        return result.toString();", "+    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "70a638af231dd348ec0c6e9d7f0abcfa", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/rmic/KaffeRmic.java", "commitBeforeChange": "cb74dbba3be10b8558e4274aa223f54b519d7e30", "commitAfterChange": "0f25392ad69b81d390942ecba933aa5cbcbba5fe", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "       public boolean execute() throws BuildException", "signatureAfterChange": "       public boolean execute() throws BuildException", "diff": ["-            throw new BuildException(\"Cannot use Kaffe rmic, as it is not \"", "-                                     + \"available.  Neither \"", "-                                     + RMIC_CLASSNAME", "-                                     + \" nor \"", "-                                     + OLD_RMIC_CLASSNAME", "-                                     + \" have been found.  \"", "-                                     + \"A common solution is to \"", "-                                     + \"set the environment variable \"", "-                                     + \"JAVA_HOME or CLASSPATH.\",", "+            StringBuffer buf = new StringBuffer(\"Cannot use Kaffe rmic, as it\"", "+                                                + \" is not available.  None\"", "+                                                + \" of \");", "+            for (int i = 0; i < RMIC_CLASSNAMES.length; i++) {", "+                if (i != 0) {", "+                    buf.append(\", \");", "+                }", "+                ", "+                buf.append(RMIC_CLASSNAMES[i]);", "+            }", "+            buf.append(\" have been found. A common solution is to set the\"", "+                       + \" environment variable JAVA_HOME or CLASSPATH.\");", "+            throw new BuildException(buf.toString(),", "-        if (c.getName().equals(RMIC_CLASSNAME)) {", "+        if (!c.getName().equals(RMIC_CLASSNAMES[RMIC_CLASSNAMES.length - 1])) {", "+            // only supported since Kaffe 1.1.2"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8e7a53a91f8cb00b9a03e5d219889923", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Copy.java", "commitBeforeChange": "2a713cc02adc21aa5bd5189c8a2718631e6f6a88", "commitAfterChange": "99067d060752e5a89c24d99c17b6eb7231f96380", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 30, "signatureBeforeChange": "     protected void doFileOperations()", "signatureAfterChange": "     protected void doFileOperations()", "diff": ["-                String toFile = (String) fileCopyMap.get(fromFile);", "+                String[] toFiles = (String[]) fileCopyMap.get(fromFile);", "-                if (fromFile.equals(toFile)) {", "-                    log(\"Skipping self-copy of \" + fromFile, verbosity);", "-                    continue;", "-                }", "+                for (int i = 0; i < toFiles.length; i++) {", "+                    String toFile = toFiles[i];", "-                try {", "-                    log(\"Copying \" + fromFile + \" to \" + toFile, verbosity);", "+                    if (fromFile.equals(toFile)) {", "+                        log(\"Skipping self-copy of \" + fromFile, verbosity);", "+                        continue;", "+                    }", "-                    FilterSetCollection executionFilters =", "-                        new FilterSetCollection();", "-                    if (filtering) {", "-                        executionFilters", "-                            .addFilterSet(getProject().getGlobalFilterSet());", "+                    try {", "+                        log(\"Copying \" + fromFile + \" to \" + toFile, verbosity);", "+", "+                        FilterSetCollection executionFilters =", "+                            new FilterSetCollection();", "+                        if (filtering) {", "+                            executionFilters", "+                                .addFilterSet(getProject().getGlobalFilterSet());", "+                        }", "+                        for (Enumeration filterEnum = filterSets.elements();", "+                            filterEnum.hasMoreElements();) {", "+                            executionFilters", "+                                .addFilterSet((FilterSet) filterEnum.nextElement());", "+                        }", "+                        fileUtils.copyFile(fromFile, toFile, executionFilters,", "+                                           filterChains, forceOverwrite,", "+                                           preserveLastModified, inputEncoding,", "+                                           outputEncoding, getProject());", "+                    } catch (IOException ioe) {", "+                        String msg = \"Failed to copy \" + fromFile + \" to \" + toFile", "+                            + \" due to \" + ioe.getMessage();", "+                        File targetFile = new File(toFile);", "+                        if (targetFile.exists() && !targetFile.delete()) {", "+                            msg += \" and I couldn't delete the corrupt \" + toFile;", "+                        }", "+                        throw new BuildException(msg, ioe, getLocation());", "-                    for (Enumeration filterEnum = filterSets.elements();", "-                         filterEnum.hasMoreElements();) {", "-                        executionFilters", "-                            .addFilterSet((FilterSet) filterEnum.nextElement());", "-                    }", "-                    fileUtils.copyFile(fromFile, toFile, executionFilters,", "-                                       filterChains, forceOverwrite,", "-                                       preserveLastModified, inputEncoding,", "-                                       outputEncoding, getProject());", "-                } catch (IOException ioe) {", "-                    String msg = \"Failed to copy \" + fromFile + \" to \" + toFile", "-                        + \" due to \" + ioe.getMessage();", "-                    File targetFile = new File(toFile);", "-                    if (targetFile.exists() && !targetFile.delete()) {", "-                        msg += \" and I couldn't delete the corrupt \" + toFile;", "-                    }", "-                    throw new BuildException(msg, ioe, getLocation());", "-            int count = 0;", "+            int createCount = 0;", "-                File d = new File((String) e.nextElement());", "-                if (!d.exists()) {", "-                    if (!d.mkdirs()) {", "-                        log(\"Unable to create directory \"", "-                            + d.getAbsolutePath(), Project.MSG_ERR);", "-                    } else {", "-                        count++;", "+                String[] dirs = (String[]) e.nextElement();", "+                for (int i = 0; i < dirs.length; i++) {", "+                    File d = new File(dirs[i]);", "+                    if (!d.exists()) {", "+                        if (!d.mkdirs()) {", "+                            log(\"Unable to create directory \"", "+                                + d.getAbsolutePath(), Project.MSG_ERR);", "+                        } else {", "+                            createCount++;", "+                        }", "-", "-            if (count > 0) {", "-                log(\"Copied \" + count + \" empty director\"", "-                    + (count == 1 ? \"y\" : \"ies\")", "-                    + \" to \" + destDir.getAbsolutePath());", "+            if (createCount > 0) {", "+                log(\"Copied \" + dirCopyMap.size()", "+                    + \" empty director\"", "+                    + (dirCopyMap.size() == 1 ? \"y\" : \"ies\")", "+                    + \" to \" + createCount", "+                    + \" empty director\"", "+                    + (createCount == 1 ? \"y\" : \"ies\") + \" under \"", "+                    + destDir.getAbsolutePath());"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c054777b2264f73cc094c250325e6e09", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/types/Commandline.java", "commitBeforeChange": "29cf33f78f16638f62f3471816c1879e0a8190f2", "commitAfterChange": "6d7c130971fb273119d770033fc4ea42f899349f", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 12, "signatureBeforeChange": "     public String[] getArguments()", "signatureAfterChange": "     public String[] getArguments()", "diff": ["-        final String [] result;", "-        result = new String[definition.size()];", "-        definition.copyInto(result);", "-        return result;", "+        Vector result = new Vector(definition.size()*2);", "+        for (int i=0; i<definition.size(); i++) {", "+            Argument arg = (Argument) definition.elementAt(i);", "+            String[] s = arg.getParts();", "+            for (int j=0; j<s.length; j++) {", "+                result.addElement(s[j]);", "+            }", "+        }", "+        ", "+        String [] res = new String[result.size()];", "+        result.copyInto(res);", "+        return res;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d611b4fe6b00ae403ba1f74c60b1df40", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/types/PatternSet.java", "commitBeforeChange": "55ed11a225d2a2c7d2cc28a6b07d425a79d3b91a", "commitAfterChange": "c2e92b31856632faa104d9d1a93c7e1480aa8b92", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": "  \tpublic String toString()", "signatureAfterChange": "  \tpublic String toString()", "diff": ["-\tpublic String toString()", "-\t{", "-\t    StringBuffer buf = new StringBuffer();", "-\t    buf.append( name );", "-\t    if ((ifCond != null) || (unlessCond != null))", "-\t    {", "+\tpublic String toString() {", "+\t    StringBuffer buf = new StringBuffer(name);", "+\t    if ((ifCond != null) || (unlessCond != null)) {", "-\t\tif (ifCond != null)", "-\t\t{", "+\t\tif (ifCond != null) {", "-\t\tif (unlessCond != null)", "-\t\t{", "+\t\tif (unlessCond != null) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e39b74d9c673b51a89bd4a48feae5cdc", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/Project.java", "commitBeforeChange": "5e2008922a1fe38ae7867c07cfd049e247e95f1e", "commitAfterChange": "c672e8778ed4d0f929d9bb413532a4b2e421fa16", "methodNumberBeforeChange": 79, "methodNumberAfterChange": 81, "signatureBeforeChange": "     public final Vector topoSort(String root, Hashtable targets)         throws BuildException", "signatureAfterChange": "     public final Vector topoSort(String[] root, Hashtable targets)         throws BuildException", "diff": ["+     */", "+    public final Vector topoSort(String[] root, Hashtable targets)", "+        throws BuildException {", "-        // We first run a DFS based sort using the root as the starting node.", "-        // This creates the minimum sequence of Targets to the root node.", "+        // We first run a DFS based sort using each root as a starting node.", "+        // This creates the minimum sequence of Targets to the root node(s).", "-        tsort(root, targets, state, visiting, ret);", "-        log(\"Build sequence for target `\" + root + \"' is \" + ret, MSG_VERBOSE);", "+        for (int i = 0; i < root.length; i++) {", "+            tsort(root[i], targets, state, visiting, ret);", "+        }", "+        StringBuffer buf = new StringBuffer(\"Build sequence for target(s)\");", "+", "+        for (int j = 0; j < root.length; j++) {", "+            buf.append((j == 0) ? \" `\" : \", `\").append(root[j]).append('\\'');", "+        }", "+        buf.append(\" is \" + ret);", "+        log(buf.toString(), MSG_VERBOSE);", "+"]}]}