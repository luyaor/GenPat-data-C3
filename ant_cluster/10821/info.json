{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "8fedf8330a933c3b5d4bcd686b09c5f0", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "45c695ef7f6480fe0e3ab66880629fca", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/LoadProperties.java", "commitBeforeChange": "531e66cb1e7a5c8c495d724a0dc52ab65a77faf7", "commitAfterChange": "b6298168c94332a367ae3b8be896d4b30583ec2c", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 7, "signatureBeforeChange": "     public final void execute() throws BuildException", "signatureAfterChange": "     public final void execute() throws BuildException", "diff": ["-        if (srcFile == null) {", "-            throw new BuildException(\"Source file not defined.\");", "+        if (srcFile == null && resource == null) {", "+            throw new BuildException(", "+                \"One of \\\"srcfile\\\" or \\\"resource\\\" is required.\");", "-        if (!srcFile.exists()) {", "-            throw new BuildException(\"Source file does not exist.\");", "-        }", "-", "-        if (!srcFile.isFile()) {", "-            throw new BuildException(\"Source file is not a file.\");", "-        }", "-", "-        FileInputStream fis = null;", "+", "+        if (srcFile != null ) {", "+            if (!srcFile.exists()) {", "+                throw new BuildException(\"Source file does not exist.\");", "+            }", "+", "+            if (!srcFile.isFile()) {", "+                throw new BuildException(\"Source file is not a file.\");", "+            }", "+", "+            try {", "+                bis = new BufferedInputStream(new FileInputStream(srcFile));", "+            } catch (IOException eyeOhEx) {", "+                throw new BuildException(eyeOhEx);", "+            }", "+        } else {", "+            ClassLoader cL = (classpath != null)", "+                ? getProject().createClassLoader(classpath)", "+                : LoadProperties.class.getClassLoader();", "+", "+            InputStream is = (cL == null)", "+                ? ClassLoader.getSystemResourceAsStream(resource)", "+                : cL.getResourceAsStream(resource);", "+", "+            if (is != null) {", "+                bis = new BufferedInputStream(is);", "+            } else { // do it like Property", "+                log(\"Unable to find resource \" + resource, Project.MSG_WARN);", "+                return;", "+            }", "+        }", "+", "-            final long len = srcFile.length();", "-", "-            //open up the file", "-            fis = new FileInputStream(srcFile);", "-            bis = new BufferedInputStream(fis);", "-                if (fis != null) {", "-                    fis.close();", "+                if (bis != null) {", "+                    bis.close();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d77067e3b164b413eb428e0de9b422b2", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/LoadProperties.java", "commitBeforeChange": "224e2140ef1be18480aa565dc462ba34b09d65d1", "commitAfterChange": "861a4490644853d4b9bff9b0d0b871d7e88b0784", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "     public final void execute() throws BuildException", "signatureAfterChange": "     public final void execute() throws BuildException", "diff": ["-        if (srcFile == null && resource == null) {", "-            throw new BuildException(", "-                \"One of \\\"srcfile\\\" or \\\"resource\\\" is required.\");", "+        if (src == null) {", "+            throw new BuildException(\"A source resource is required.\");", "+        }", "+        if (!src.isExists()) {", "+            if (src instanceof JavaResource) {", "+                // dreaded backwards compatibility", "+                log(\"Unable to find resource \" + src, Project.MSG_WARN);", "+                return;", "+            }", "+            throw new BuildException(\"Source resource does not exist: \" + src);", "-", "-        if (srcFile != null) {", "-            if (!srcFile.exists()) {", "-                throw new BuildException(\"Source file does not exist :\"+srcFile);", "-            }", "-", "-            if (!srcFile.isFile()) {", "-                throw new BuildException(\"Source file is not a file :\"+srcFile);", "-            }", "-", "-            try {", "-                bis = new BufferedInputStream(new FileInputStream(srcFile));", "-            } catch (IOException eyeOhEx) {", "-                throw new BuildException(eyeOhEx);", "-            }", "-        } else {", "-            ClassLoader cL = (classpath != null)", "-                ? getProject().createClassLoader(classpath)", "-                : LoadProperties.class.getClassLoader();", "-", "-            InputStream is = (cL == null)", "-                ? ClassLoader.getSystemResourceAsStream(resource)", "-                : cL.getResourceAsStream(resource);", "-", "-            if (is != null) {", "-                bis = new BufferedInputStream(is);", "-            } else { // do it like Property", "-                log(\"Unable to find resource \" + resource, Project.MSG_WARN);", "-                return;", "-            }", "-        }", "-", "+            bis = new BufferedInputStream(src.getInputStream());", "-        } catch (final BuildException be) {", "-            throw be;", "-            try {", "-                if (bis != null) {", "-                    bis.close();", "-                }", "-            } catch (IOException ioex) {", "-                //ignore", "-            }", "-            try {", "-                if (tis != null) {", "-                    tis.close();", "-                }", "-            } catch (IOException ioex) {", "-                //ignore", "-            }", "+            FileUtils.close(bis);", "+            FileUtils.close(tis);"]}]}