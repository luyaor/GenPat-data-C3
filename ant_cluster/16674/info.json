{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e744d636b41b655131f3f10b776bbdef", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5ee5dff8b43288a07f8b6eb5426fdbf4", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/util/FileUtils.java", "commitBeforeChange": "be6e9c4ce20319bc8449466a5db9d2dff4d7f258", "commitAfterChange": "76122e84beafa3437b38cade58467fca9598f1df", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": "     public static final String readFully(Reader rdr, int bufferSize)         throws IOException", "signatureAfterChange": "     public static final String readFully(Reader rdr, int bufferSize)         throws IOException", "diff": ["-        String text = null;", "-            if (bufferLength != -1) {", "-                if (textBuffer == null) {", "-                    textBuffer = new StringBuffer(", "-                                                  new String(buffer, 0, bufferLength));", "-                } else {", "-                    textBuffer.append(new String(buffer, 0, bufferLength));", "-                }", "+            if (bufferLength > 0) {", "+                textBuffer = (textBuffer == null) ? new StringBuffer() : textBuffer;", "+                textBuffer.append(new String(buffer, 0, bufferLength));", "-        if (textBuffer != null) {", "-            text = textBuffer.toString();", "-        }", "-        return text;", "+        return (textBuffer == null) ? null : textBuffer.toString();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f0ac824620e2436be6f1c223f1ae3f87", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/sandbox/filterreaders/src/main/org/apache/tools/ant/filters/util/ChainReaderHelper.java", "commitBeforeChange": "64a4e9eb2dcf6ea87a0033f6082421e028d9024a", "commitAfterChange": "43e62b81ff4d8554b4a548d26e0f907318ed6f1d", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 6, "signatureBeforeChange": "     public final String readFully(Reader rdr)         throws IOException", "signatureAfterChange": "     public final String readFully(Reader rdr)         throws IOException", "diff": ["-", "-        final char[] buffer = new char[bufferSize];", "-        int bufferLength = 0;", "-        String text = null;", "-        StringBuffer textBuffer = null;", "-        while (bufferLength != -1) {", "-            bufferLength = rdr.read(buffer);", "-            if (bufferLength != -1) {", "-                if (textBuffer == null) {", "-                    textBuffer = new StringBuffer(", "-                                    new String(buffer, 0, bufferLength));", "-                } else {", "-                    textBuffer.append(new String(buffer, 0, bufferLength));", "-                }", "-            }", "-        }", "-        if (textBuffer != null) {", "-            text = textBuffer.toString();", "-        }", "-        return text;", "+        return FileUtils.readFully(rdr, bufferSize);"]}]}