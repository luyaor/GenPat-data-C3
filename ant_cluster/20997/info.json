{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bb8881a9b6a78c2910c62b13ffe12bcb", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "50d97e9ffde0057a4194f57911256c77", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/tar/TarEntry.java", "commitBeforeChange": "c75a494bd88e6e148918337dfb68d08013d973eb", "commitAfterChange": "54166cfaf09c222a4fc9bb2abd7719c6d452921e", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "     public TarEntry(File file)", "signatureAfterChange": "     public TarEntry(File file)", "diff": ["-        String fileName = file.getPath();", "-        String osname = System.getProperty(\"os.name\").toLowerCase(Locale.US);", "-", "-        if (osname != null) {", "-", "-            // Strip off drive letters!", "-            // REVIEW Would a better check be \"(File.separator == '\\')\"?", "-", "-            if (osname.startsWith(\"windows\")) {", "-                if (fileName.length() > 2) {", "-                    char ch1 = fileName.charAt(0);", "-                    char ch2 = fileName.charAt(1);", "-", "-                    if (ch2 == ':'", "-                            && ((ch1 >= 'a' && ch1 <= 'z')", "-                                || (ch1 >= 'A' && ch1 <= 'Z'))) {", "-                        fileName = fileName.substring(2);", "-                    }", "-                }", "-            } else if (osname.indexOf(\"netware\") > -1) {", "-                int colon = fileName.indexOf(':');", "-                if (colon != -1) {", "-                    fileName = fileName.substring(colon + 1);", "-                }", "-            }", "-        }", "-", "-        fileName = fileName.replace(File.separatorChar, '/');", "-", "-        // No absolute pathnames", "-        // Windows (and Posix?) paths can start with \"\\\\NetworkDrive\\\",", "-        // so we loop on starting /'s.", "-        while (fileName.startsWith(\"/\")) {", "-            fileName = fileName.substring(1);", "-        }", "-", "+        String fileName = normalizeFileName(file.getPath());", "-            if (this.name.charAt(this.name.length() - 1) != '/') {", "+            int nameLength = name.length();", "+            if (nameLength == 0 || name.charAt(nameLength - 1) != '/') {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b7b70a74abac10f92fd424ae9ec3771f", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/java/org/apache/aut/tar/TarEntry.java", "commitBeforeChange": "d03eda1c3aaa0eacdacd83236bf21a9b9d81cd62", "commitAfterChange": "b6ed0b49348d6e8f820f4e5590bd71782c111976", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": "     public TarEntry( final File file )", "signatureAfterChange": "     public TarEntry( final File file )", "diff": ["-        final String osname = System.getProperty( \"os.name\" );", "-        if( osname != null )", "+        // Strip off drive letters!", "+        if( Os.isFamily( Os.OS_FAMILY_WINDOWS) )", "-            // Strip off drive letters!", "-            // REVIEW Would a better check be \"(File.separator == '\\')\"?", "-            final String win32Prefix = \"Windows\";", "-            final String prefix = osname.substring( 0, win32Prefix.length() );", "-", "-            if( prefix.equalsIgnoreCase( win32Prefix ) )", "+            if( name.length() > 2 )", "-                if( name.length() > 2 )", "-                {", "-                    final char ch1 = name.charAt( 0 );", "-                    final char ch2 = name.charAt( 1 );", "+                final char ch1 = name.charAt( 0 );", "+                final char ch2 = name.charAt( 1 );", "-                    if( ch2 == ':' &&", "-                        ( ( ch1 >= 'a' && ch1 <= 'z' ) ||", "-                        ( ch1 >= 'A' && ch1 <= 'Z' ) ) )", "-                    {", "-                        name = name.substring( 2 );", "-                    }", "+                if( ch2 == ':' &&", "+                    ( ( ch1 >= 'a' && ch1 <= 'z' ) ||", "+                    ( ch1 >= 'A' && ch1 <= 'Z' ) ) )", "+                {", "+                    name = name.substring( 2 );", "-            else if( osname.toLowerCase().indexOf( \"netware\" ) > -1 )", "+        }", "+        else if( Os.isFamily( Os.OS_FAMILY_NETWARE) )", "+        {", "+            final int colon = name.indexOf( ':' );", "+            if( colon != -1 )", "-                final int colon = name.indexOf( ':' );", "-                if( colon != -1 )", "-                {", "-                    name = name.substring( colon + 1 );", "-                }", "+                name = name.substring( colon + 1 );"]}]}