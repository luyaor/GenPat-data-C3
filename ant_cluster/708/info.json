{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bcbc794018f251aec223e09baa6a95d1", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "437bc0b78e0a07cf62d436dd4589c56f", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Length.java", "commitBeforeChange": "c3018eaa64e6319dd6a03e2bf46e3c1c965b4fd6", "commitAfterChange": "6bd9a3ed7834da429c8281f1febe3ff5d43ff0d3", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 13, "signatureBeforeChange": "      private void handleFilesets(Handler h)", "signatureAfterChange": "      private static long getLength(String s, boolean t)", "diff": ["-    private void handleFilesets(Handler h) {", "-        HashSet included = new HashSet(filesets.size());", "-        for (int i = 0; i < filesets.size(); i++) {", "-            FileSet fs = (FileSet) (filesets.get(i));", "-                    //clone the Resource and alter path", "-                    if (basedir != null) {", "-                        r = (Resource) (r.clone());", "-                        r.setName(FileUtils.getFileUtils().resolveFile(", "-                            basedir, r.getName()).getAbsolutePath());", "-                    }", "-                    if (included.add(r.getName())) {", "-                        h.handle(r);", "-                    }", "-        included.clear();", "-        included = null;", "+", "+    private static long getLength(String s, boolean t) {", "+        return (t ? s.trim() : s).length();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "49b5e7d120f78160d4fd13a8833c4db1", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/util/ContainerMapper.java", "commitBeforeChange": "3375d671acfa1fceb3325dc54fda5484b9e19208", "commitAfterChange": "2ead66e52c56fbc1a59789187ddba634ebe4ae2d", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 3, "signatureBeforeChange": "     public String[] mapFileName(String sourceFileName)", "signatureAfterChange": "     public synchronized List getMappers()", "diff": ["+     */", "+    public synchronized List getMappers() {", "+        return Collections.unmodifiableList(mappers);", "+    }", "-     */", "-    public String[] mapFileName(String sourceFileName) {", "-        List ret = new ArrayList();", "-        if (chained) {", "-            List inputs = new ArrayList();", "-            ret.add(sourceFileName);", "-            for (int i = 0; i < mappers.size(); ++i) {", "-                inputs = ret;", "-                ret = new ArrayList();", "-                FileNameMapper mapper = (FileNameMapper) mappers.get(i);", "-                for (Iterator it = inputs.iterator(); it.hasNext();) {", "-                    String[] mapped = mapper.mapFileName(", "-                        (String) it.next());", "-                    if (mapped != null) {", "-                        for (int m = 0; m < mapped.length; ++m) {", "-                            ret.add(mapped[m]);", "-                        }", "-                    }", "-                }", "-                if (ret.size() == 0) {", "-                    return null;", "-                }", "-            }", "-        } else {", "-            for (int i = 0; i < mappers.size(); ++i) {", "-                FileNameMapper mapper = (FileNameMapper) mappers.get(i);", "-                String[] mapped = mapper.mapFileName(sourceFileName);", "-                if (mapped != null) {", "-                    for (int m = 0; m < mapped.length; ++m) {", "-                        ret.add(mapped[m]);", "-                    }", "-                }", "-            }", "-            if (ret.size() == 0) {", "-                return null;", "-            }", "-        }", "-        return (String[]) ret.toArray(new String[ret.size()]);", "-    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bec1cc28dc00aba1e8809e8fe14ec0da", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/zip/ZipEncodingHelper.java", "commitBeforeChange": "cbd20a77eba224b21654251583971e054729f006", "commitAfterChange": "752d64fa43db2172327771ba4d36bee3f2d3b49a", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 3, "signatureBeforeChange": "     static final byte[] encodeName(String name, String encoding)", "signatureAfterChange": "     static void appendSurrogate(ByteBuffer bb, char c)", "diff": ["-    static final byte[] encodeName(String name, String encoding) {", "+    static void appendSurrogate(ByteBuffer bb, char c) {", "+", "+        bb.put((byte) '%');", "+        bb.put((byte) 'U');", "+", "+        bb.put(HEX_DIGITS[(c >> 12)&0x0f]);", "+        bb.put(HEX_DIGITS[(c >> 8)&0x0f]);", "+        bb.put(HEX_DIGITS[(c >> 4)&0x0f]);", "+        bb.put(HEX_DIGITS[c & 0x0f]);", "+    }", "-            return name.getBytes();", "-", "-        Charset cs = Charset.forName(encoding);", "-        CharsetEncoder enc = cs.newEncoder();", "-", "-        enc.onMalformedInput(CodingErrorAction.REPORT);", "-        enc.onUnmappableCharacter(CodingErrorAction.REPORT);", "-", "-        CharBuffer cb = CharBuffer.wrap(name);", "-        ByteBuffer out = ByteBuffer.allocate(name.length()", "-                                             + (name.length() + 1) / 2);", "-", "-        while (cb.remaining() > 0) {", "-            CoderResult res = enc.encode(cb, out,true);", "-", "-            if (res.isUnmappable() || res.isMalformed()) {", "-", "-                // write the unmappable characters in utf-16", "-                // pseudo-URL encoding style to ByteBuffer.", "-                if (res.length() * 6 > out.remaining()) {", "-                    out = growBuffer(out,out.position() + res.length() * 6);", "-                }", "-", "-                for (int i=0; i<res.length(); ++i) {", "-                    out.put((byte) '%');", "-                    out.put((byte) 'U');", "-", "-                    char c = cb.get();", "-", "-                    out.put(HEX_DIGITS[(c >> 12)&0x0f]);", "-                    out.put(HEX_DIGITS[(c >> 8)&0x0f]);", "-                    out.put(HEX_DIGITS[(c >> 4)&0x0f]);", "-                    out.put(HEX_DIGITS[c & 0x0f]);", "-                }", "-", "-            } else if (res.isOverflow()) {", "-", "-                out = growBuffer(out, 0);", "-", "-            } else if (res.isUnderflow()) {", "-", "-                enc.flush(out);", "-                break;", "-", "-            }", "-        }", "-", "-        byte [] ret = new byte[out.position()];", "-        out.rewind();", "-        out.get(ret);", "-", "-        return ret;", "-    }"]}]}