{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9cd215b694f6cdf7bc3137985b31f74e", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "549d05f890498f8a03fa37b61e5ab4e4", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/java/org/apache/antlib/cvslib/Cvs.java", "commitBeforeChange": "728071cface97ce745985d079d5bcb11e4b827ad", "commitAfterChange": "ea65444fd347db19864de97fcaff382a18b56cd6", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 12, "signatureBeforeChange": "      private Environment buildEnvironment()", "signatureAfterChange": "      private EnvironmentData buildEnvironment()", "diff": ["-    private Environment buildEnvironment()", "+    private EnvironmentData buildEnvironment()", "-        final Environment env = new Environment();", "+        final EnvironmentData env = new EnvironmentData();", "-            final Environment.Variable var = new Environment.Variable();", "+            final EnvironmentData.Variable var = new EnvironmentData.Variable();", "-            final Environment.Variable var = new Environment.Variable();", "+            final EnvironmentData.Variable var = new EnvironmentData.Variable();", "-            final Environment.Variable var = new Environment.Variable();", "+            final EnvironmentData.Variable var = new EnvironmentData.Variable();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "776cbc8c926cda0a676da7be20f69c88", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Cvs.java", "commitBeforeChange": "2720eb209524a8fe87d6122726d9fb1048ce204b", "commitAfterChange": "f7fdd6f367071bd1c9ea39ccbdc71554f40cc8f2", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "       public void execute() throws BuildException", "signatureAfterChange": "       public void execute() throws BuildException", "diff": ["+        Environment env = new Environment();", "+", "+        if(port>0){", "+            Environment.Variable var = new Environment.Variable();", "+            var.setKey(\"CVS_CLIENT_PORT\");", "+            var.setValue(String.valueOf(port));", "+            env.addVariable(var);", "+        }", "+", "+        if(passFile!=null){", "+            Environment.Variable var = new Environment.Variable();", "+            var.setKey(\"CVS_PASSFILE\");", "+            var.setValue(String.valueOf(passFile));", "+            env.addVariable(var);", "+        }", "+", "+        exe.setEnvironment(env.getVariables());"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a1bb8967ef83e3125b1fc1d5f3b5e31e", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/java/org/apache/myrmidon/framework/exec/launchers/ExecUtil.java", "commitBeforeChange": "cac267a813e6bb6433f2e4dbceecd89353e8dd8f", "commitAfterChange": "cd862006479feb201e2230eb3b37dc4f5740ef35", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "      protected static String[] toNativeEnvironment( final Properties environment )         throws ExecException", "signatureAfterChange": "      protected static String[] toNativeEnvironment( final Properties environment )         throws ExecException", "diff": ["+        {", "+        }", "-            return Environment.toNativeFormat( environment );", "+            final ArrayList newEnvironment = new ArrayList();", "+", "+            final Iterator keys = environment.keySet().iterator();", "+            while( keys.hasNext() )", "+            {", "+                final String key = (String)keys.next();", "+                final String value = environment.getProperty( key );", "+                newEnvironment.add( key + '=' + value );", "+            }", "+", "+            return (String[])newEnvironment.toArray( new String[ newEnvironment.size() ] );"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fd81b20e833688dfd2f581deefba873e", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/todo/org/apache/tools/todo/types/SysProperties.java", "commitBeforeChange": "7513ab1efa12321b3e2014764bfb23d16b425caf", "commitAfterChange": "299ea801bc1031e308bfe07a22e51edd1b972872", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "      private String[] toNativeFormat( final Properties environment )", "signatureAfterChange": "     public static String[] getJavaVariables( final Map environment )", "diff": ["-    private String[] toNativeFormat( final Properties environment )", "+     */", "+    public static String[] getJavaVariables( final Map environment )", "-        final ArrayList newEnvironment = new ArrayList();", "+        final ArrayList vars = new ArrayList();", "-            final String value = environment.getProperty( key );", "-            newEnvironment.add( key + '=' + value );", "+            final Object value = environment.get( key );", "+            vars.add( \"-D\" + key + '=' + value );", "-        return (String[])newEnvironment.toArray( new String[ newEnvironment.size() ] );", "+        return (String[])vars.toArray( new String[ vars.size() ] );"]}]}