{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "74e9704188282dca5f84b98a5529b0bc", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "39a50813cc808a9f90f2a27f08f4349c", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/util/ResourceUtils.java", "commitBeforeChange": "50558dd274c428071d86fbc78ce5431ebb88935c", "commitAfterChange": "a4c986354481641bc4b9811854fefaf2fec7f86a", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 5, "signatureBeforeChange": "     public static ResourceCollection selectOutOfDateSources(ProjectComponent logTo,                                                             ResourceCollection source,                                                             FileNameMapper mapper,                                                             ResourceFactory targets,                                                             final long granularity)", "signatureAfterChange": "     public static ResourceCollection selectSources(ProjectComponent logTo,                                                    ResourceCollection source,                                                    FileNameMapper mapper,                                                    ResourceFactory targets,                                                    ResourceSelectorProvider selector)", "diff": ["+     */", "+    public static ResourceCollection selectSources(ProjectComponent logTo,", "+                                                   ResourceCollection source,", "+                                                   FileNameMapper mapper,", "+                                                   ResourceFactory targets,", "+                                                   ResourceSelectorProvider selector) {", "-        logFuture(logTo, source, granularity);", "-            r.add(new ResourceSelector() {", "-                public boolean isSelected(Resource target) {", "-                    /* Extra I/O, probably wasted:", "-                    if (target.isDirectory()) {", "-                        return false;", "-                    }", "-                     */", "-                    return SelectorUtils.isOutOfDate(sr, target, granularity);", "-                }", "-            });", "+            r.add(selector.getTargetSelectorForSource(sr));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3dae20ce7ffed8f37ce52f52ea8a9acb", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/util/ResourceUtils.java", "commitBeforeChange": "48c3492303350febdfc637a4c4a2e681f15f1867", "commitAfterChange": "cafa34ca0878175f8c8ab1bf7fcfaba70c2b1368", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 2, "signatureBeforeChange": "     public static ResourceCollection selectOutOfDateSources(ProjectComponent logTo,                                                             ResourceCollection source,                                                             FileNameMapper mapper,                                                             ResourceFactory targets,                                                             long granularity)", "signatureAfterChange": "     public static ResourceCollection selectOutOfDateSources(ProjectComponent logTo,                                                             ResourceCollection source,                                                             FileNameMapper mapper,                                                             ResourceFactory targets,                                                             final long granularity)", "diff": ["-                                                            long granularity) {", "+                                                            final long granularity) {", "-            Resource sr = (Resource) iter.next();", "+            final Resource sr = (Resource) iter.next();", "-            r.add(new And(new ResourceSelector[] {Type.FILE, new Or(", "-                new ResourceSelector[] {NOT_EXISTS, new Outdated(sr, granularity)})}));", "+            r.add(new ResourceSelector() {", "+                public boolean isSelected(Resource target) {", "+                    /* Extra I/O, probably wasted:", "+                    if (target.isDirectory()) {", "+                        return false;", "+                    }", "+                     */", "+                    return SelectorUtils.isOutOfDate(sr, target, granularity);", "+                }", "+            });"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "87d7d7f8aa60b499d90f56596eaff4e2", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/util/ResourceUtils.java", "commitBeforeChange": "127199510da5c3579a0814f19a2635e95bbca901", "commitAfterChange": "e05733aa9b6666651f4aa455e3ce0dc0158951b2", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "     public static Resource[] selectOutOfDateSources(ProjectComponent logTo,                                                     Resource[] source,                                                     FileNameMapper mapper,                                                     ResourceFactory targets)", "signatureAfterChange": "     public static Resource[] selectOutOfDateSources(ProjectComponent logTo,                                                     Resource[] source,                                                     FileNameMapper mapper,                                                     ResourceFactory targets)", "diff": ["-        long now = (new java.util.Date()).getTime();", "+        return selectOutOfDateSources(logTo, source, mapper, targets,", "+                                      FileUtils.newFileUtils()", "+                                      .getFileTimestampGranularity());", "+    }", "-        /*", "-          If we're on Windows, we have to munge the time up to 2 secs to", "-          be able to check file modification times.", "-          (Windows has a max resolution of two secs for modification times)", "-          Actually this is a feature of the FAT file system, NTFS does", "-          not have it, so if we could reliably passively test for an NTFS", "-          file systems we could turn this off...", "-        */", "-        if (Os.isFamily(\"windows\")) {", "-            now += 2000;", "-        }", "-                    } else if (!atarget.isDirectory() && atarget.getLastModified()", "-                               < source[counter].getLastModified()) {"]}]}