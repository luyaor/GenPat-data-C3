{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9df5bf9046e8f5a963feccbe6294cf52", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "551591ef127f89404735b1b9be0a42f7", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Tar.java", "commitBeforeChange": "ea7cd6fbfe578780eb6dea64860f5de243a15d8c", "commitAfterChange": "7f4859f077ee1b0e9383099fcfb6169b847a64c7", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "      protected void tarFile(File file, TarOutputStream tOut, String vPath)         throws IOException", "signatureAfterChange": "      protected void tarFile(File file, TarOutputStream tOut, String vPath)         throws IOException", "diff": ["-        TarEntry te = new TarEntry(vPath);", "-        te.setSize(file.length());", "-        te.setModTime(file.lastModified());", "-        tOut.putNextEntry(te);", "-", "-        byte[] buffer = new byte[8 * 1024];", "-        int count = 0;", "-        do {", "-            tOut.write(buffer, 0, count);", "-            count = fIn.read(buffer, 0, buffer.length);", "-        } while (count != -1);", "-        ", "-        tOut.closeEntry();        ", "-        ", "-        fIn.close();", "+        try {", "+            TarEntry te = new TarEntry(vPath);", "+            te.setSize(file.length());", "+            te.setModTime(file.lastModified());", "+            tOut.putNextEntry(te);", "+            ", "+            byte[] buffer = new byte[8 * 1024];", "+            int count = 0;", "+            do {", "+                tOut.write(buffer, 0, count);", "+                count = fIn.read(buffer, 0, buffer.length);", "+            } while (count != -1);", "+            ", "+            tOut.closeEntry();        ", "+        } finally {", "+            fIn.close();", "+        }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "aa984600b7838e3411cbda647819e6b7", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Tar.java", "commitBeforeChange": "82377345488d92a4bd5f65ae312611b4c7ae5cf0", "commitAfterChange": "d6e5c9e8163a8375db602c97c73e83d01ab85146", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "      protected void tarFile(File file, TarOutputStream tOut, String vPath,                            TarFileSet tarFileSet)         throws IOException", "signatureAfterChange": "      protected void tarFile(File file, TarOutputStream tOut, String vPath,                            TarFileSet tarFileSet)         throws IOException", "diff": ["-        FileInputStream fIn = new FileInputStream(file);", "-", "+        FileInputStream fIn = null;", "+        if (file.isDirectory() && vPath.length() != 0 ", "+                && vPath.charAt(vPath.length() - 1) != '/')", "+            vPath = vPath + \"/\";", "-            te.setSize(file.length());", "+                te.setSize(file.length());", "-            }", "+            } ", "-            byte[] buffer = new byte[8 * 1024];", "-            int count = 0;", "-            do {", "-                tOut.write(buffer, 0, count);", "-                count = fIn.read(buffer, 0, buffer.length);", "-            } while (count != -1);", "+            if (!file.isDirectory()) {", "+                fIn = new FileInputStream(file);", "+", "+                byte[] buffer = new byte[8 * 1024];", "+                int count = 0;", "+                do {", "+                    tOut.write(buffer, 0, count);", "+                    count = fIn.read(buffer, 0, buffer.length);", "+                } while (count != -1);", "+            }", "-            fIn.close();", "+            if (fIn != null)", "+                fIn.close();"]}]}