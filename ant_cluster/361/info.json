{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "10db7c5ee19d79c8c333aad60fcca52a", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0569ffecc8c85138dfe4fbe655f70974", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Move.java", "commitBeforeChange": "dd59f330e28468c67b69a1d4e352f4e5bafcb27f", "commitAfterChange": "a5a1cf23953be08f91c28840a830e295eb7b171c", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     protected void validateAttributes() throws BuildException", "diff": ["-     */", "-    public void execute() throws BuildException {", "+    // inherit doc", "+    protected void validateAttributes() throws BuildException {", "-            if (destFile != null && destDir != null) {", "-                throw new BuildException(\"Only one of tofile and todir \"", "-                                         + \"may be set.\");", "+            if ((destFile != null && destDir != null)", "+                || (destFile == null && destDir == null)){", "+                throw new BuildException(\"One and only one of tofile and todir \"", "+                                         + \"must be set.\");", "+            destFile = (destFile == null)", "+                ? new File(destDir, file.getName()) : destFile;", "+            destDir = (destDir == null)", "+                ? fileUtils.getParentFile(destFile) : destDir;", "-            if (destFile == null && destDir == null) {", "-                throw new BuildException(\"One of tofile or todir must be set.\");", "-            }", "-", "-            destFile = (destFile != null)", "-                ? destFile : new File(destDir, file.getName());", "-", "-            try {", "-                boolean renamed = false;", "-                log(\"Moving directory \" + file", "-                    + \" to \" + destFile, Project.MSG_INFO);", "-                try {", "-                    renamed =", "-                        renameFile(file, destFile, filtering, forceOverwrite);", "-                } catch (IOException eyeOhEx) {", "-                    throw new BuildException(eyeOhEx.getMessage());", "-                }", "-                if (!renamed) {", "-                    StringBuffer buf = new StringBuffer(", "-                        \"Failed to move directory \").append(", "-                        file.getAbsolutePath());", "-", "-                    if ((getFilterChains() != null && getFilterChains().size() > 0)", "-                        || (getFilterSets() != null && getFilterSets().size() > 0)", "-                        || filtering) {", "-                        buf.append(", "-                            \"; use a fileset to move directories with filtering\");", "-                    }", "-                    throw new BuildException(buf.append('.').toString());", "-                }", "-            } catch (BuildException e) {", "-                if (!failonerror) {", "-                    log(\"Warning: \" + e.getMessage(), Project.MSG_ERR);", "-                } else {", "-                    throw e;", "-                }", "-            }", "+            completeDirMap.put(file, destFile);", "+            file = null;", "-            super.execute();", "+            super.validateAttributes();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "120243f6ee551ec9223b7125cf554097", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/testcases/org/apache/tools/ant/taskdefs/optional/net/FTPTest.java", "commitBeforeChange": "53e10e20aac4b698e94c9b2ab2881c9ece495d13", "commitAfterChange": "24f9da26b52d675f4b7c2ab79167a04647e243ee", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 26, "signatureBeforeChange": "      private void compareFiles(FTP.FTPDirectoryScanner ds, String[] expectedFiles,                               String[] expectedDirectories)", "signatureAfterChange": "      private void compareFiles(DirectoryScanner ds, String[] expectedFiles,                               String[] expectedDirectories)", "diff": ["-    private void compareFiles(FTP.FTPDirectoryScanner ds, String[] expectedFiles,", "+    private void compareFiles(DirectoryScanner ds, String[] expectedFiles,", "-        TreeSet files = new TreeSet();", "-            files.add(includedFiles[counter].replace(File.separatorChar, '/'));", "+            includedFiles[counter] = includedFiles[counter].replace(File.separatorChar, '/');", "-        TreeSet directories = new TreeSet();", "+        Arrays.sort(includedFiles);", "-            directories.add(includedDirectories[counter]", "-                            .replace(File.separatorChar, '/'));", "+            includedDirectories[counter] = includedDirectories[counter]", "+                            .replace(File.separatorChar, '/');", "-", "-        String currentfile;", "-        Iterator i = files.iterator();", "-        int counter = 0;", "-        while (i.hasNext()) {", "-            currentfile = (String) i.next();", "-            assertEquals(expectedFiles[counter], currentfile);", "-            counter++;", "+        Arrays.sort(includedDirectories);", "+        for (int counter=0; counter < includedFiles.length; counter++) {", "+            assertEquals(expectedFiles[counter], includedFiles[counter]);", "-        String currentdirectory;", "-        Iterator dirit = directories.iterator();", "-        counter = 0;", "-        while (dirit.hasNext()) {", "-            currentdirectory = (String) dirit.next();", "-            assertEquals(expectedDirectories[counter], currentdirectory);", "+        for (int counter=0; counter < includedDirectories.length; counter++) {", "+            assertEquals(expectedDirectories[counter], includedDirectories[counter]);"]}]}