{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "83aa988fb35372463ad3c42225efe880", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "219a1ef08ca0874f20378c69a887277d", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java", "commitBeforeChange": "33d19ef67e2eb18cdf696c337f158ae725f92f21", "commitAfterChange": "b14e61f604f088f5522e8caa9c396da71e7b775e", "methodNumberBeforeChange": 57, "methodNumberAfterChange": 57, "signatureBeforeChange": "     protected int transferFiles(FTPClient ftp, FileSet fs)          throws IOException, BuildException", "signatureAfterChange": "     protected int transferFiles(FTPClient ftp, FileSet fs)          throws IOException, BuildException", "diff": ["-", "-            for (int i = 0; i < dsfiles.length; i++) {", "-                switch (action) {", "-                    case SEND_FILES:", "-                        sendFile(ftp, dir, dsfiles[i]);", "-                        break;", "-                    case GET_FILES:", "-                        getFile(ftp, dir, dsfiles[i]);", "-                        break;", "-                    case DEL_FILES:", "-                        delFile(ftp, dsfiles[i]);", "-                        break;", "-                    case LIST_FILES:", "-                        listFile(ftp, bw, dsfiles[i]);", "-                        break;", "-                    case CHMOD:", "-                        doSiteCommand(ftp, \"chmod \" + chmod + \" \" + resolveFile(dsfiles[i]));", "-                        transferred++;", "-                        break;", "-                    case RM_DIR:", "-                        rmDir(ftp, dsfiles[i]);", "-                        break;", "-                    default:", "-                        throw new BuildException(\"unknown ftp action \" + action);", "+            if (action == RM_DIR) {", "+                // to remove directories, start by the end of the list", "+                // the trunk does not let itself be removed before the leaves", "+                for (int i = dsfiles.length - 1; i >= 0; i--) {", "+                    rmDir(ftp, dsfiles[i]);", "+                }", "+            }   else {", "+                for (int i = 0; i < dsfiles.length; i++) {", "+                    switch (action) {", "+                        case SEND_FILES:", "+                            sendFile(ftp, dir, dsfiles[i]);", "+                            break;", "+                        case GET_FILES:", "+                            getFile(ftp, dir, dsfiles[i]);", "+                            break;", "+                        case DEL_FILES:", "+                            delFile(ftp, dsfiles[i]);", "+                            break;", "+                        case LIST_FILES:", "+                            listFile(ftp, bw, dsfiles[i]);", "+                            break;", "+                        case CHMOD:", "+                            doSiteCommand(ftp, \"chmod \" + chmod + \" \" + resolveFile(dsfiles[i]));", "+                            transferred++;", "+                            break;", "+                        default:", "+                            throw new BuildException(\"unknown ftp action \" + action);", "+                    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6596500dd990d72c0ddf66d1f5a39820", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Rmic.java", "commitBeforeChange": "818ddcf1837e09566976e01e2b718b1995f6e5f2", "commitAfterChange": "f31845f71d137a7891e010f0c8d2b8db6e81a8c6", "methodNumberBeforeChange": 46, "methodNumberAfterChange": 47, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-                log(\"RMI Compiling \" + fileCount + \" class\" + (fileCount > 1 ? \"es\" : \"\") + \" to \"", "-                        + outputDir, Project.MSG_INFO);", "+                log(\"RMI Compiling \" + fileCount + \" class\"", "+                    + (fileCount > 1 ? \"es\" : \"\") + \" to \"", "+                    + outputDir, Project.MSG_INFO);", "+", "+                if (listFiles) {", "+                    for (int i = 0; i < fileCount; i++) {", "+                        log(compileList.get(i).toString());", "+                    }", "+                }", "+"]}]}