{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "50d08f146f33b3c49a215fdef620602b", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "02d08523bcee643a1df9534d0ca53d62", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/script/ScriptDef.java", "commitBeforeChange": "af007ba13234afc51a113ee612e6abad4642cad1", "commitAfterChange": "81b65c0eaa7fff0b658e28269907a36c3a83fc6b", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "     public Object createNestedElement(String elementName)", "signatureAfterChange": "     public Object createNestedElement(String elementName)", "diff": ["-            Class instanceClass = null;", "-            try {", "-                instanceClass = Class.forName(classname, true, loader);", "-            } catch (Throwable e) {", "-                // try normal method", "-                try {", "-                    instanceClass = Class.forName(classname);", "-                } catch (Throwable e2) {", "-                    throw new BuildException(\"scriptdef: Unable to load \"", "-                        + \"class \" + classname + \" for nested element <\"", "-                        + elementName + \">\", e2);", "-                }", "+            try", "+            {", "+                instance = ClasspathUtils.newInstance(classname, loader);", "+            } catch (BuildException e) {", "+                instance = ClasspathUtils.newInstance(classname, ScriptDef.class.getClassLoader());", "-            try {", "-                instance = instanceClass.newInstance();", "-            } catch (Throwable e) {", "-                throw new BuildException(\"scriptdef: Unable to create \"", "-                    + \"element of class \" + classname + \" for nested \"", "-                    + \"element <\" + elementName + \">\", e);", "-            }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "58dd4038ba309ca30e1f83885d2dca6e", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/util/ClasspathUtils.java", "commitBeforeChange": "af007ba13234afc51a113ee612e6abad4642cad1", "commitAfterChange": "81b65c0eaa7fff0b658e28269907a36c3a83fc6b", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 7, "signatureBeforeChange": "     public static Object newInstance(         String className,         ClassLoader userDefinedLoader)", "signatureAfterChange": "     public static Object newInstance(         String className,         ClassLoader userDefinedLoader,         Class expectedType)", "diff": ["+     */", "+    public static Object newInstance(", "-        ClassLoader userDefinedLoader) {", "+        ClassLoader userDefinedLoader,", "+        Class expectedType) {", "-            Class clazz = userDefinedLoader.loadClass(className);", "+            Class clazz = Class.forName(className, true, userDefinedLoader); ", "+            if (!expectedType.isInstance(o))", "+            {", "+                throw new BuildException(", "+                    \"Class of unexpected Type: \" ", "+                        + className", "+                        + \" expected :\" ", "+                        + expectedType);", "+            }", "-                \"Class \"", "-                    + className", "-                    + \" not found by the specific classLoader.\",", "+                \"Class not found: \"", "+                    + className,", "+        } catch (LinkageError e) {", "+            throw new BuildException(", "+                \"Class \"", "+                    + className", "+                    + \" could not be loaded because of an invalid dependency.\", ", "+                e);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e1dbbf4d618df6928cc09de35d6a2651", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/sandbox/filterreaders/src/main/org/apache/tools/ant/util/ChainReaderHelper.java", "commitBeforeChange": "de1a987f23e027a486e6b07ddc8ab2edecd7dd3a", "commitAfterChange": "e22b34c5772d1052e1be2fdb97ebd3ed79f71b3b", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "     public final String processStream()         throws BuildException, IOException", "signatureAfterChange": "     public final String processStream()         throws BuildException, IOException", "diff": ["+                final Path classpath = filter.getClasspath();", "+                final Project project = filter.getProject();", "-                        final Class clazz = Class.forName(className);", "+                        Class clazz = null;", "+                        if (classpath == null) {", "+                            clazz = Class.forName(className);", "+                        } else {", "+                            System.out.println(project + \" \" + classpath);", "+                            AntClassLoader al = new AntClassLoader(project,", "+                                                                   classpath);", "+                            clazz = al.loadClass(className);", "+                            AntClassLoader.initializeClass(clazz);", "+                        }", "+                            if (!FilterReader.class.isAssignableFrom(clazz)) {", "+                                throw new BuildException(className +", "+                                    \" does not extend java.io.FilterReader\");", "+                            }"]}]}