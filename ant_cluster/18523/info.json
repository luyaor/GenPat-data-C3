{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a7606aea4b0c110cbec216a3cf38f91a", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0bfa0667c6c6bdb294f3e1a476b0de0f", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/helper/ProjectHelper2.java", "commitBeforeChange": "aeee70243a354c5951ec655556f8a1530e7713eb", "commitAfterChange": "ca5799fd8c1780abcc25f63745faf95bd2cdb06a", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 19, "signatureBeforeChange": "         public void onStartElement(String uri, String tag, String qname,                                    Attributes attrs,                                    AntXMLContext context)             throws SAXParseException", "signatureAfterChange": "         public void onStartElement(String uri, String tag, String qname,                                    Attributes attrs,                                    AntXMLContext context)             throws SAXParseException", "diff": ["-                String key = attrs.getQName(i);", "+                String key = attrs.getLocalName(i);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2581a02a0d2eb2d22b1bd1907dabb832", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/ssh/AbstractSshMessage.java", "commitBeforeChange": "db261bb4de9cd85c8b10068e45b91faed50dfba5", "commitAfterChange": "a5ec1501c919f54d9becf781db44e2e529676fd5", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "      protected void waitForAck(InputStream in) throws IOException", "signatureAfterChange": "     protected void waitForAck(InputStream in)          throws IOException, BuildException", "diff": ["-    protected void waitForAck(InputStream in) throws IOException {", "-        int b = 0;", "-        do {", "-            b = in.read();", "-        } while (b > 0);", "+     */", "+    protected void waitForAck(InputStream in) ", "+        throws IOException, BuildException {", "+        int b = in.read();", "+", "+        // b may be 0 for success,", "+        //          1 for error,", "+        //          2 for fatal error,", "+", "+        if (b == -1) {", "+            // didn't receive any response", "+            throw new BuildException(\"No response from server\");", "+        } else if (b != 0) {", "+            StringBuffer sb = new StringBuffer();", "+", "+            int c = in.read();", "+            while (c > 0 && c != '\\n') {", "+                sb.append((char) c);", "+                c = in.read();", "+            }", "+            ", "+            if (b == 1) {", "+                throw new BuildException(\"server indicated an error: \"", "+                                         + sb.toString());", "+            } else if (b == 2) {", "+                throw new BuildException(\"server indicated a fatal error: \"", "+                                         + sb.toString());", "+            } else {", "+                throw new BuildException(\"unknown response, code \" + b", "+                                         + \" message: \" + sb.toString());", "+            }", "+        }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "577a895b5bc252c0c2e5b5ef2ef24fd2", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/helper/ProjectHelper2.java", "commitBeforeChange": "aeee70243a354c5951ec655556f8a1530e7713eb", "commitAfterChange": "ca5799fd8c1780abcc25f63745faf95bd2cdb06a", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 25, "signatureBeforeChange": "         public void onStartElement(String uri, String tag, String qname,                                    Attributes attrs,                                    AntXMLContext context)             throws SAXParseException", "signatureAfterChange": "         public void onStartElement(String uri, String tag, String qname,                                    Attributes attrs,                                    AntXMLContext context)             throws SAXParseException", "diff": ["-", "+            task.setQName(qname);", "-                wrapper.setAttribute(attrs.getQName(i),", "-                        attrs.getValue(i));", "+                String name = attrs.getLocalName(i);", "+                String value = attrs.getValue(i);", "+                // PR: Hack for ant-type value", "+                //  an ant-type is a component name which can", "+                // be namespaced, need to extract the name", "+                // and convert from qualifed name to uri/name", "+                if (name.equals(\"ant-type\")) {", "+                    int index = value.indexOf(\":\");", "+                    if (index != -1) {", "+                        String prefix = value.substring(0, index);", "+                        String mappedUri = context.getPrefixMapping(prefix);", "+                        if (mappedUri == null) {", "+                            throw new BuildException(", "+                                \"Unable to find XML NS prefix \" + prefix);", "+                        }", "+                        value = ProjectHelper.genComponentName(", "+                            mappedUri, value.substring(index + 1));", "+                    }", "+                }", "+                wrapper.setAttribute(name, value);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9f9e48d768e14fa1ce4f7b5935d4830f", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/util/VectorSet.java", "commitBeforeChange": "326b38f70193a95c9ef8371a727747fe0a5fecb5", "commitAfterChange": "075882d3d196001359ee4ee26ac5238fca484981", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "     public synchronized boolean addAll(int index, Collection<? extends E> c)", "signatureAfterChange": "     public synchronized boolean addAll(int index, Collection<? extends E> c)", "diff": ["-        boolean changed = false;", "+        LinkedList toAdd = new LinkedList();", "-            if (!set.contains(e)) {", "-                doAdd(index++, e);", "-                changed = true;", "+            if (set.add(e)) {", "+                toAdd.add(e);", "-        return changed;", "+        if (toAdd.isEmpty()) {", "+            return false;", "+        }", "+        int count = size();", "+        ensureCapacity(count + toAdd.size());", "+        if (index != count) {", "+            System.arraycopy(elementData, index, elementData, index + toAdd.size(),", "+                             count - index);", "+        }", "+        for (Object o : toAdd) {", "+            elementData[index++] = o;", "+        }", "+        elementCount += toAdd.size();", "+        return true;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e131cccd1ce7d7d2371254aa553a2e75", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/helper/ProjectHelper2.java", "commitBeforeChange": "aeee70243a354c5951ec655556f8a1530e7713eb", "commitAfterChange": "ca5799fd8c1780abcc25f63745faf95bd2cdb06a", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 21, "signatureBeforeChange": "         public void onStartElement(String uri, String tag, String qname,                                    Attributes attrs,                                    AntXMLContext context)             throws SAXParseException", "signatureAfterChange": "         public void onStartElement(String uri, String tag, String qname,                                    Attributes attrs,                                    AntXMLContext context)             throws SAXParseException", "diff": ["-                String key = attrs.getQName(i);", "+                String key = attrs.getLocalName(i);"]}]}