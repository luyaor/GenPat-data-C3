{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "759015dd089d3e9f7bd4de9ae8adba79", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c56474ac06a3aac4073b6d9b4a411d7b", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/junit/XMLJUnitResultFormatter.java", "commitBeforeChange": "10c41029aeaba31241f1a85f9b02591b357e20b6", "commitAfterChange": "818cb969adef1df0f5918ba62f80f62502d5e53e", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 4, "signatureBeforeChange": "     public void endTestSuite(JUnitTest suite)", "signatureAfterChange": "     public void endTestSuite(JUnitTest suite) throws BuildException", "diff": ["-    public void endTestSuite(JUnitTest suite) {", "-        out.println(\"<?xml version=\\\"1.0\\\"?>\");", "-        out.print(\"<testsuite name=\\\"\");", "-        out.print(suite.getName());", "-        out.print(\"\\\" tests=\\\"\");", "-        out.print(suite.runCount());", "-        out.print(\"\\\" failures=\\\"\");", "-        out.print(suite.failureCount());", "-        out.print(\"\\\" errors=\\\"\");", "-        out.print(suite.errorCount());", "-        out.print(\"\\\" time=\\\"\");", "-        out.print(nf.format(suite.getRunTime()/1000.0));", "-        out.println(\" sec\\\">\");", "-        out.print(results.toString());", "-        out.println(\"</testsuite>\");", "-        out.flush();", "-        out.close();", "+     */", "+    public void endTestSuite(JUnitTest suite) throws BuildException {", "+        rootElement.setAttribute(\"tests\", \"\"+suite.runCount());", "+        rootElement.setAttribute(\"failures\", \"\"+suite.failureCount());", "+        rootElement.setAttribute(\"errors\", \"\"+suite.errorCount());", "+        rootElement.setAttribute(\"time\", ", "+                                 nf.format(suite.getRunTime()/1000.0)+\" sec\");", "+        if (out != null) {", "+            Writer wri = null;", "+            try {", "+                wri = new OutputStreamWriter(out);", "+                wri.write(\"<?xml version=\\\"1.0\\\"?>\\n\");", "+                write(rootElement, wri, 0);", "+                wri.flush();", "+            } catch(IOException exc) {", "+                throw new BuildException(\"Unable to write log file\", exc);", "+            } finally {", "+                if (wri != null) {", "+                    try {", "+                        wri.close();", "+                    } catch (IOException e) {}", "+                }", "+            }", "+        }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ced8d889528ad3f9a919174275521460", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/junit/SummaryJUnitResultFormatter.java", "commitBeforeChange": "10c41029aeaba31241f1a85f9b02591b357e20b6", "commitAfterChange": "818cb969adef1df0f5918ba62f80f62502d5e53e", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 7, "signatureBeforeChange": "     public void endTestSuite(JUnitTest suite)", "signatureAfterChange": "     public void endTestSuite(JUnitTest suite) throws BuildException", "diff": ["-    public void endTestSuite(JUnitTest suite) {", "-        System.out.print(\"Tests run: \");", "-        System.out.print(suite.runCount());", "-        System.out.print(\", Failures: \");", "-        System.out.print(suite.failureCount());", "-        System.out.print(\", Errors: \");", "-        System.out.print(suite.errorCount());", "-        System.out.print(\", Time ellapsed: \");", "-        System.out.print(nf.format(suite.getRunTime()/1000.0));", "-        System.out.println(\" sec\");", "+    public void endTestSuite(JUnitTest suite) throws BuildException {", "+        StringBuffer sb = new StringBuffer(\"Tests run: \");", "+        sb.append(suite.runCount());", "+        sb.append(\", Failures: \");", "+        sb.append(suite.failureCount());", "+        sb.append(\", Errors: \");", "+        sb.append(suite.errorCount());", "+        sb.append(\", Time elapsed: \");", "+        sb.append(nf.format(suite.getRunTime()/1000.0));", "+        sb.append(\" sec\");", "+        sb.append(System.getProperty(\"line.separator\"));", "+        try {", "+            out.write(sb.toString().getBytes());", "+            out.flush();", "+        } catch (IOException ioex) {", "+            throw new BuildException(\"Unable to write summary output\", ioex);", "+        } finally {", "+            try {", "+                out.close();", "+            } catch (IOException e) {}", "+        }"]}]}