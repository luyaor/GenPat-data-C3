{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9c43e3f73995530fc8ba8b824ac7d6cf", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e399fc277fbe7b88c30709223d554855", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/testcases/org/apache/myrmidon/components/AbstractComponentTest.java", "commitBeforeChange": "50fb7f5643cba98640e7d4ce2b00736e9d42cbab", "commitAfterChange": "6ff9bf50ad2e4fcda69911d207c8dfe93e7b4e0b", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "     protected final ServiceManager getServiceManager()", "signatureAfterChange": "     protected final ServiceManager getServiceManager() throws Exception", "diff": ["-    protected final ServiceManager getServiceManager()", "+    protected final ServiceManager getServiceManager() throws Exception", "-        return m_serviceManager;", "-    }", "+        if( m_serviceManager == null )", "+        {", "+            Logger logger = getLogger();", "+            // Create the components", "+            m_serviceManager = new DefaultServiceManager();", "+            List components = new ArrayList();", "+", "+            Object component = new DefaultMasterConverter();", "+            m_serviceManager.put( Converter.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultConverterRegistry();", "+            m_serviceManager.put( ConverterRegistry.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultTypeManager();", "+            m_serviceManager.put( TypeManager.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultConfigurer();", "+            m_serviceManager.put( Configurer.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultDeployer();", "+            m_serviceManager.put( Deployer.ROLE, component );", "+            components.add( component );", "+", "+            final DefaultClassLoaderManager classLoaderMgr = new DefaultClassLoaderManager();", "+            classLoaderMgr.setBaseClassLoader( getClass().getClassLoader() );", "+            m_serviceManager.put( ClassLoaderManager.ROLE, classLoaderMgr );", "+            components.add( classLoaderMgr );", "+", "+            component = new DefaultExtensionManager();", "+            m_serviceManager.put( ExtensionManager.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultRoleManager();", "+            m_serviceManager.put( RoleManager.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultPropertyResolver();", "+            m_serviceManager.put( PropertyResolver.ROLE, component );", "+            components.add( component );", "+", "+            // Log enable the components", "+            for( Iterator iterator = components.iterator(); iterator.hasNext(); )", "+            {", "+                Object obj = iterator.next();", "+                if( obj instanceof LogEnabled )", "+                {", "+                    final LogEnabled logEnabled = (LogEnabled)obj;", "+                    logEnabled.enableLogging( logger );", "+                }", "+            }", "+", "+            // Compose the components", "+            for( Iterator iterator = components.iterator(); iterator.hasNext(); )", "+            {", "+                Object obj = iterator.next();", "+                if( obj instanceof Serviceable )", "+                {", "+                    final Serviceable serviceable = (Serviceable)obj;", "+                    serviceable.service( m_serviceManager );", "+                }", "+            }", "+        }", "+        return m_serviceManager;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ed806e43331ecab89c100e2f7bfc6e68", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/test/org/apache/myrmidon/components/AbstractComponentTest.java", "commitBeforeChange": "50fb7f5643cba98640e7d4ce2b00736e9d42cbab", "commitAfterChange": "6ff9bf50ad2e4fcda69911d207c8dfe93e7b4e0b", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "     protected final ServiceManager getServiceManager()", "signatureAfterChange": "     protected final ServiceManager getServiceManager() throws Exception", "diff": ["-    protected final ServiceManager getServiceManager()", "+    protected final ServiceManager getServiceManager() throws Exception", "-        return m_serviceManager;", "-    }", "+        if( m_serviceManager == null )", "+        {", "+            Logger logger = getLogger();", "+            // Create the components", "+            m_serviceManager = new DefaultServiceManager();", "+            List components = new ArrayList();", "+", "+            Object component = new DefaultMasterConverter();", "+            m_serviceManager.put( Converter.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultConverterRegistry();", "+            m_serviceManager.put( ConverterRegistry.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultTypeManager();", "+            m_serviceManager.put( TypeManager.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultConfigurer();", "+            m_serviceManager.put( Configurer.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultDeployer();", "+            m_serviceManager.put( Deployer.ROLE, component );", "+            components.add( component );", "+", "+            final DefaultClassLoaderManager classLoaderMgr = new DefaultClassLoaderManager();", "+            classLoaderMgr.setBaseClassLoader( getClass().getClassLoader() );", "+            m_serviceManager.put( ClassLoaderManager.ROLE, classLoaderMgr );", "+            components.add( classLoaderMgr );", "+", "+            component = new DefaultExtensionManager();", "+            m_serviceManager.put( ExtensionManager.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultRoleManager();", "+            m_serviceManager.put( RoleManager.ROLE, component );", "+            components.add( component );", "+", "+            component = new DefaultPropertyResolver();", "+            m_serviceManager.put( PropertyResolver.ROLE, component );", "+            components.add( component );", "+", "+            // Log enable the components", "+            for( Iterator iterator = components.iterator(); iterator.hasNext(); )", "+            {", "+                Object obj = iterator.next();", "+                if( obj instanceof LogEnabled )", "+                {", "+                    final LogEnabled logEnabled = (LogEnabled)obj;", "+                    logEnabled.enableLogging( logger );", "+                }", "+            }", "+", "+            // Compose the components", "+            for( Iterator iterator = components.iterator(); iterator.hasNext(); )", "+            {", "+                Object obj = iterator.next();", "+                if( obj instanceof Serviceable )", "+                {", "+                    final Serviceable serviceable = (Serviceable)obj;", "+                    serviceable.service( m_serviceManager );", "+                }", "+            }", "+        }", "+        return m_serviceManager;"]}]}