{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "22b96c6585c602bf05fb46e39a1eb215", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "075e9fe4743350bb77d6d6852db856be", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/main/org/apache/tools/ant/taskdefs/manifest/Manifest.java", "commitBeforeChange": "0595affdf0cc45086d9055cf1e3cfb4e50bc2d76", "commitAfterChange": "78a7fbf3d909ad842f9e6f3e193a1017eb2f9cbb", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 4, "signatureBeforeChange": "     public Manifest( Reader r )         throws ManifestException, TaskException, IOException", "signatureAfterChange": "      public String[] getSectionNames( final Manifest other )", "diff": ["-     */", "-    public Manifest( Reader r )", "-        throws ManifestException, TaskException, IOException", "-        BufferedReader reader = new BufferedReader( r );", "-        // This should be the manifest version", "-        String nextSectionName = m_mainSection.read( reader );", "-        String readManifestVersion = m_mainSection.getAttributeValue( Attributes.Name.MANIFEST_VERSION.toString() );", "-        if( readManifestVersion != null )", "-        {", "-            m_manifestVersion = readManifestVersion;", "-            m_mainSection.removeAttribute( Attributes.Name.MANIFEST_VERSION.toString() );", "-        }", "-", "-        String line = null;", "-        while( ( line = reader.readLine() ) != null )", "-        {", "-            if( line.length() == 0 )", "-            {", "-                continue;", "-            }", "-", "-            Section section = new Section();", "-            if( nextSectionName == null )", "-            {", "-                Attribute sectionName = ManifestUtil.buildAttribute( line );", "-                if( !sectionName.getName().equalsIgnoreCase( ATTRIBUTE_NAME ) )", "-                {", "-                    throw new ManifestException( \"Manifest sections should start with a \\\"\" + ATTRIBUTE_NAME +", "-                                                 \"\\\" attribute and not \\\"\" + sectionName.getName() + \"\\\"\" );", "-                }", "-                nextSectionName = sectionName.getValue();", "-            }", "-            else", "-            {", "-                // we have already started reading this section", "-                // this line is the first attribute. set it and then let the normal", "-                // read handle the rest", "-                Attribute firstAttribute = ManifestUtil.buildAttribute( line );", "-                section.addAttributeAndCheck( firstAttribute );", "-            }", "-", "-            section.setName( nextSectionName );", "-            nextSectionName = section.read( reader );", "-            addSection( section );", "-        }", "-    }", "+    public String[] getSectionNames( final Manifest other )", "+        final Set keys = other.m_sections.keySet();", "+        return (String[])keys.toArray( new String[ keys.size() ] );"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "df1a52e8ade467b78705d20f2bcd254e", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/todo/org/apache/tools/ant/taskdefs/manifest/Manifest.java", "commitBeforeChange": "0595affdf0cc45086d9055cf1e3cfb4e50bc2d76", "commitAfterChange": "78a7fbf3d909ad842f9e6f3e193a1017eb2f9cbb", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 4, "signatureBeforeChange": "     public Manifest( Reader r )         throws ManifestException, TaskException, IOException", "signatureAfterChange": "      public String[] getSectionNames( final Manifest other )", "diff": ["-     */", "-    public Manifest( Reader r )", "-        throws ManifestException, TaskException, IOException", "-        BufferedReader reader = new BufferedReader( r );", "-        // This should be the manifest version", "-        String nextSectionName = m_mainSection.read( reader );", "-        String readManifestVersion = m_mainSection.getAttributeValue( Attributes.Name.MANIFEST_VERSION.toString() );", "-        if( readManifestVersion != null )", "-        {", "-            m_manifestVersion = readManifestVersion;", "-            m_mainSection.removeAttribute( Attributes.Name.MANIFEST_VERSION.toString() );", "-        }", "-", "-        String line = null;", "-        while( ( line = reader.readLine() ) != null )", "-        {", "-            if( line.length() == 0 )", "-            {", "-                continue;", "-            }", "-", "-            Section section = new Section();", "-            if( nextSectionName == null )", "-            {", "-                Attribute sectionName = ManifestUtil.buildAttribute( line );", "-                if( !sectionName.getName().equalsIgnoreCase( ATTRIBUTE_NAME ) )", "-                {", "-                    throw new ManifestException( \"Manifest sections should start with a \\\"\" + ATTRIBUTE_NAME +", "-                                                 \"\\\" attribute and not \\\"\" + sectionName.getName() + \"\\\"\" );", "-                }", "-                nextSectionName = sectionName.getValue();", "-            }", "-            else", "-            {", "-                // we have already started reading this section", "-                // this line is the first attribute. set it and then let the normal", "-                // read handle the rest", "-                Attribute firstAttribute = ManifestUtil.buildAttribute( line );", "-                section.addAttributeAndCheck( firstAttribute );", "-            }", "-", "-            section.setName( nextSectionName );", "-            nextSectionName = section.read( reader );", "-            addSection( section );", "-        }", "-    }", "+    public String[] getSectionNames( final Manifest other )", "+        final Set keys = other.m_sections.keySet();", "+        return (String[])keys.toArray( new String[ keys.size() ] );"]}]}