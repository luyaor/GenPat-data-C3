{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a50938128e4e91365dfc088d219a771b", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5d558bda10d3f30ebb80380af3894f6a", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Delete.java", "commitBeforeChange": "c17ffac927d4a3188516ea4b04d4dffa144f3a1d", "commitAfterChange": "746290bbea7d8062bfd117c8ef9a401e578be8c7", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 16, "signatureBeforeChange": "      protected void removeFiles(File d, String[] files)", "signatureAfterChange": "      protected void removeFiles(File d, String[] files, String[] dirs)", "diff": ["-    protected void removeFiles(File d, String[] files) {", "+    protected void removeFiles(File d, String[] files, String[] dirs) {", "-                if (!quiet && !f.delete()) {", "+                if (!f.delete() && !quiet) {", "+", "+        if (dirs.length > 0 && includeEmpty) {", "+            int dirCount = 0;", "+            for (int j=0; j<dirs.length; j++) {", "+                File dir = new File(d, dirs[j]);", "+                String[] dirFiles = dir.list();", "+                if (dirFiles == null || dirFiles.length == 0) {", "+                    log(\"Deleting \" + dir.getAbsolutePath(), verbosity);", "+                    if (!dir.delete() && !quiet) {", "+                        throw new BuildException(\"Unable to delete directory \" + dir.getAbsolutePath());", "+                    } else {", "+                        dirCount++;", "+                    }", "+                }", "+            }", "+", "+            if (dirCount > 0) {", "+                log(\"Deleted \" + dirCount + \" director\" + ", "+                    (dirCount==1 ? \"y\" : \"ies\") + ", "+                    \" from \" + d.getAbsolutePath());", "+            }", "+        }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "94dc14c4610b9155ca3518445ef9351d", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Available.java", "commitBeforeChange": "3f37290d4ae3797033fd3dc89cada6b329753eff", "commitAfterChange": "cad841b38aec395f91809031598a293237bc8665", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": "      private boolean checkFile()", "signatureAfterChange": "      private boolean checkFile()", "diff": ["-                log(\"Searching \" + paths[i], Project.MSG_VERBOSE);", "-                if(new File(paths[i], file.getName()).isFile()) {", "-                    return true;", "+                log(\"Searching \" + paths[i], Project.MSG_DEBUG);", "+                File filename = new File(paths[i]);", "+                if (type != null) {", "+                    if (type.equalsIgnoreCase(\"dir\")) {", "+                        String dir = filename.getParent();", "+                        if(dir != null) {", "+                            int index = dir.lastIndexOf(File.separator);", "+                            String dirname = dir.substring(index + 1);", "+                            if(dirname.equals(file.getName())) {", "+                                log(\"Found directory: \" + dir, Project.MSG_VERBOSE);", "+                                return true;", "+                            }", "+                        }", "+                    } else if (type.equalsIgnoreCase(\"file\")) {", "+                        if(filename.isFile()) {", "+                            if(filename.getName().equals(file.getName())) {", "+                                log(\"Found file: \" + filename, Project.MSG_VERBOSE);", "+                                return true;", "+                            }", "+                        }", "+                    }", "+                } else if(filename.isFile()) {", "+                    if(filename.getName().equals(file.getName())) {", "+                        log(\"Found file: \" + filename, Project.MSG_VERBOSE);", "+                        return true;", "+                    }"]}]}