{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "8c2e5786487efc0c409c0b25b92843ed", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "82dcffa6f04f4e1bc5bb626dfe11967a", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/java/org/apache/ant/launcher/AntLoader.java", "commitBeforeChange": "58f8db35ee5db94294191fc2599cb02a8086b881", "commitAfterChange": "8c97911720b40557d78672245bc2e7f724917297", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 0, "signatureBeforeChange": "     public final static void main( final String[] args )          throws Exception", "signatureAfterChange": "     public final static void main( final String[] args )          throws Exception", "diff": ["-    { ", "-        final URL archive = new URL( \"file:lib/myrmidon.jar\" );", "-        c_classLoader = new AntLoader( new URL[] { archive } );", "-        ", "+    {        ", "+            //actually try to discover the install directory based on where", "+            // the ant.jar is", "+            final File installDirectory = findInstallDir();", "+            System.setProperty( \"ant.home\", installDirectory.toString() );", "+", "+            //setup classloader appropriately for myrmidon jar", "+            final File archive = ", "+                new File( installDirectory, \"lib\" + File.separator + \"myrmidon.jar\" );", "+            final AntClassLoader classLoader = ", "+                new AntClassLoader( new URL[] { archive.toURL() } );", "+", "-            final Class clazz = c_classLoader.loadClass( \"org.apache.ant.Main\" );", "+            final Class clazz = classLoader.loadClass( \"org.apache.ant.Main\" );", "+        catch( final InvocationTargetException ite ) ", "+        {", "+            System.err.println( \"Error: \" + ite.getTargetException().getMessage() );", "+            ite.getTargetException().printStackTrace();", "+        }", "+            System.err.println( \"Error: \" + throwable.getMessage() );"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "da147cac5a0fa202e73b24934cead7d5", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/java/org/apache/myrmidon/launcher/Main.java", "commitBeforeChange": "3946d3183e482916114f5b5126d23cd6bf1c9da3", "commitAfterChange": "25c4d95cd51429feee002187eba3dc0acfbb4d3e", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "     public static final void main( final String[] args )         throws Exception", "signatureAfterChange": "     public static final void main( final String[] args )         throws Exception", "diff": ["-            //setup classloader appropriately for myrmidon jar", "-            final File libDir = new File( installDirectory, \"lib\" );", "-            final URL[] libUrls = buildURLList( libDir );", "-            final URLClassLoader libClassLoader = new URLClassLoader( libUrls );", "-", "-            final File containerLibDir = new File( installDirectory, \"bin\" + File.separator + \"lib\" );", "-            final URL[] containerLibUrls = buildURLList( containerLibDir );", "+            final URLClassLoader sharedClassLoader = createSharedClassLoader( installDirectory );", "-                new URLClassLoader( containerLibUrls, libClassLoader );", "+                createContainerClassLoader( installDirectory, sharedClassLoader );", "-            //load class and retrieve appropriate main method.", "-            final Class clazz = classLoader.loadClass( \"org.apache.myrmidon.frontends.CLIMain\" );", "-            final Method method = clazz.getMethod( \"main\", new Class[]{args.getClass()} );", "-", "-            Thread.currentThread().setContextClassLoader( classLoader );", "-", "-            //kick the tires and light the fires....", "-            method.invoke( null, new Object[]{args} );", "+            execMainClass( classLoader, args );"]}]}