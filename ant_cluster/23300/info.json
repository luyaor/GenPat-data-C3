{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9de6cee0d8f359e1a211a87b97ea4fb9", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "26830a6f4d37acfa8221621998e2ac05", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Tar.java", "commitBeforeChange": "8bad90e21d3773187cf7923150160965e2393d7a", "commitAfterChange": "8fa296bb51a8598af096eddbae69d1886c7b1ea7", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "      protected void tarFile(File file, TarOutputStream tOut, String vPath,                            TarFileSet tarFileSet)         throws IOException", "signatureAfterChange": "      protected void tarFile(File file, TarOutputStream tOut, String vPath,                            TarFileSet tarFileSet)         throws IOException", "diff": ["-        // don't add \"\" to the archive", "-        if (vPath.length() <= 0) {", "-            return;", "+        String fullpath = tarFileSet.getFullpath();", "+        if (fullpath.length() > 0) {", "+            vPath = fullpath;", "+        } else {", "+            // don't add \"\" to the archive", "+            if (vPath.length() <= 0) {", "+                return;", "+            }", "+        ", "+            if (file.isDirectory() && !vPath.endsWith(\"/\")) {", "+                vPath += \"/\";", "+            }", "+        ", "+            String prefix = tarFileSet.getPrefix();", "+            // '/' is appended for compatibility with the zip task.", "+            if (prefix.length() > 0 && !prefix.endsWith(\"/\")) {", "+                prefix = prefix + \"/\";", "+            }", "+            vPath = prefix + vPath;", "-        if (file.isDirectory() && !vPath.endsWith(\"/\")) {", "-            vPath += \"/\";", "+        if (vPath.startsWith(\"/\") && !tarFileSet.getPreserveLeadingSlashes()) {", "+            int l = vPath.length();", "+            if (l <= 1) {", "+                // we would end up adding \"\" to the archive", "+                return;", "+            } ", "+            vPath = vPath.substring(1, l);", "-            String prefix = tarFileSet.getPrefix();", "-            // '/' is appended for compatibility with the zip task.", "-            if(prefix.length() > 0 && !prefix.endsWith(\"/\")) {", "-                prefix = prefix + \"/\";", "-            }", "-", "-            TarEntry te = new TarEntry(prefix + vPath);", "+            TarEntry te = new TarEntry(vPath);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "51c440dc7af1646578f337033d8d1673", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/cvslib/CvsTagDiff.java", "commitBeforeChange": "b5c4bdbec2f8a8c26b6466a588ba64d0f375152e", "commitAfterChange": "c19671d815432f4a9b18a3d7986d611f6f6ca57e", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "signatureAfterChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "diff": ["+            //CVS 1.11", "+            //CVS 1.11.9", "+            // File module/filename is new; cvstag_2003_11_03_2  revision 1.1", "-", "+            //CVS 1.11.9", "+            // File testantoine/antoine.bat is removed; TESTANTOINE_1 revision 1.1.1.1", "+            //", "-            int headerLength = FILE_STRING.length() + mypackage.length() + 1;", "+            String toBeRemoved = FILE_STRING + mypackage + \"/\";", "+            int headerLength = toBeRemoved.length();", "-                    line = line.substring(headerLength);", "+                    if (line.startsWith(toBeRemoved)) {", "+                        line = line.substring(headerLength);", "+                    } else {", "+                        line = line.substring(FILE_STRING.length());", "+                    }", "-//CVS 1.11", "-//File apps/websphere/lib/something.jar is new; current revision 1.2", "-//CVS 1.11.9", "-//File apps/websphere/lib/something.jar is new; cvstag_2003_11_03_2 revision 1.2", "-                        entry = new CvsTagEntry(filename);", "+                        String rev = null;", "+                        int indexrev = -1;", "+                        if ((indexrev = line.indexOf(REVISION, index)) != -1) {", "+                            rev = line.substring(indexrev + REVISION.length());", "+                        }", "+                        entry = new CvsTagEntry(filename, null, rev);"]}]}