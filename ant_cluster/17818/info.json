{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "d694026e81b747b5a51390af624d56ab", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5b58d2e0f56301f50741d68c2000718b", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "cc911f59921cda9a230eebd58c4ab6d9e292d5e9", "commitAfterChange": "693d7c89066c2913bd08ca5cefb022de793f118e", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 21, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-        if (srcFile == null && sqlCommand.length() == 0) { ", "+        if (srcFile == null && sqlCommand.length()==0 && filesets.isEmpty()) { ", "-                throw new BuildException(\"Source file, transactions or sql statement must be set!\", location);", "+                throw new BuildException(\"Source file or fileset, transactions or sql statement must be set!\", location);", "-        } else {", "+        } else { ", "+            // deal with the filesets", "+            for (int i=0; i<filesets.size(); i++) {", "+                FileSet fs = (FileSet) filesets.elementAt(i);", "+                DirectoryScanner ds = fs.getDirectoryScanner(project);", "+                File srcDir = fs.getDir(project);", "+", "+                String[] srcFiles = ds.getIncludedFiles();", "+", "+                // Make a transaction for each file", "+                for ( int j=0 ; j<srcFiles.length ; j++ ) {", "+                    Transaction t = createTransaction();", "+                    t.setSrc(new File(srcDir, srcFiles[j]));", "+                }", "+            }", "+"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "94820cf143bc6ed596114c4be525d330", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "6e72d89be84e4a3b021e1d59f14a97d2f4959adc", "commitAfterChange": "82372e064bb10559e8845e30f0dd1d1cefdf1811", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-            if (srcFile == null && sqlCommand.length() == 0", "-                && resources.size() == 0) {", "+            if (srcFile == null && sqlCommand.length() == 0 && resources == null) {", "-            // deal with the resources", "-            Iterator iter = resources.iterator();", "-            while (iter.hasNext()) {", "-                Resource r = (Resource) iter.next();", "-                // Make a transaction for each resource", "-                Transaction t = createTransaction();", "-                t.setSrcResource(r);", "+            if (resources != null) {", "+                // deal with the resources", "+                Iterator iter = resources.iterator();", "+                while (iter.hasNext()) {", "+                    Resource r = (Resource) iter.next();", "+                    // Make a transaction for each resource", "+                    Transaction t = createTransaction();", "+                    t.setSrcResource(r);", "+                }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9b16c736f6fb3ead65727d1bbe0dd598", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Touch.java", "commitBeforeChange": "636efd4eb0a49b85b020aa22982f32e8958db9c0", "commitAfterChange": "5086d936941d88eb84fbe326c8982bff92887237", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 7, "signatureBeforeChange": "     protected void touch() throws BuildException", "signatureAfterChange": "     protected void touch() throws BuildException", "diff": ["-        if (file != null) {", "-            if (!file.exists()) {", "-                log(\"Creating \" + file, Project.MSG_INFO);", "-                try {", "-                    fileUtils.createNewFile(file);", "-                } catch (IOException ioe) {", "-                    throw new BuildException(\"Could not create \" + file, ioe,", "-                                             getLocation());", "-                }", "-            }", "-        }", "-", "-        if (millis >= 0 && JavaEnvUtils.isJavaVersion(JavaEnvUtils.JAVA_1_1)) {", "-            log(\"modification time of files cannot be set in JDK 1.1\",", "-                Project.MSG_WARN);", "-            return;", "-        }", "+        // deal with the filelists", "+        for (int i = 0; i < filelists.size(); i++) {", "+            FileList fl = (FileList) filelists.elementAt(i);", "+            File fromDir = fl.getDir(getProject());", "+", "+            String[] srcFiles = fl.getFiles(getProject());", "+", "+            for (int j = 0; j < srcFiles.length; j++) {", "+                touch(new File(fromDir, srcFiles[j]));", "+            }", "+        }", "+"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a1c9f100f554d6e46af971317e332bd2", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "c51cce56b802399a1712e67544a3224da62b7c49", "commitAfterChange": "36e5ac64fd1e76c49877ce8bb5596589a2c55ddf", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 16, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-                && filesets.isEmpty()) {", "+                && resources.size() == 0) {", "-                    throw new BuildException(\"Source file or fileset, \"", "+                    throw new BuildException(\"Source file or resource \"", "+                                             + \"collection, \"", "-            // deal with the filesets", "-            for (int i = 0; i < filesets.size(); i++) {", "-                FileSet fs = (FileSet) filesets.elementAt(i);", "-                DirectoryScanner ds = fs.getDirectoryScanner(getProject());", "-                File srcDir = fs.getDir(getProject());", "-", "-                String[] srcFiles = ds.getIncludedFiles();", "-", "-                // Make a transaction for each file", "-                for (int j = 0; j < srcFiles.length; j++) {", "-                    Transaction t = createTransaction();", "-                    t.setSrc(new File(srcDir, srcFiles[j]));", "-                }", "+            // deal with the resources", "+            Iterator iter = resources.iterator();", "+            while (iter.hasNext()) {", "+                Resource r = (Resource) iter.next();", "+                // Make a transaction for each resource", "+                Transaction t = createTransaction();", "+                t.setSrcResource(r);"]}]}