{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "021738d18efb3478caa60fe531b908b0", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "05d2de9cbac8bee32b47c6696467d039", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/bzip2/CBZip2OutputStream.java", "commitBeforeChange": "3477bbf6474cdd2b70b12eb638e64415a4f1c2ec", "commitAfterChange": "134d95afef9b42cf08f2eccb077b97525ac38034", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 38, "signatureBeforeChange": "      private void randomiseBlock()", "signatureAfterChange": "      private void randomiseBlock()", "diff": ["-        int i;", "+        final boolean[] inUse = this.data.inUse;", "+        final byte[] block    = this.data.block;", "+        final int last        = this.last;", "+", "+        for (int i = 256; --i >= 0;)", "+            inUse[i] = false;", "+", "-        for (i = 0; i < 256; i++) {", "-            inUse[i] = false;", "-        }", "-", "-        for (i = 0; i <= last; i++) {", "+        for (int i = 0, j = 1; i <= last; i = j, j++) {", "-                rNToGo = (char) rNums[rTPos];", "-                rTPos++;", "-                if (rTPos == 512) {", "+                rNToGo = (char) BZip2Constants.rNums[rTPos];", "+                if (++rTPos == 512) {", "+", "-            block[i + 1] ^= ((rNToGo == 1) ? 1 : 0);", "+            block[j] ^= ((rNToGo == 1) ? 1 : 0);", "+", "-            block[i + 1] &= 0xFF;", "-", "-            inUse[block[i + 1]] = true;", "-        }", "-    }", "+            inUse[block[j] & 0xff] = true;", "+        this.blockRandomised = true;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d442d0f1099792e8b6eed9bcd984f480", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/bzip2/CBZip2OutputStream.java", "commitBeforeChange": "228fb9839c21a0a853598e114faca72c8e9340e7", "commitAfterChange": "9922008d657c72235c402343fd88847b044014ad", "methodNumberBeforeChange": 29, "methodNumberAfterChange": 39, "signatureBeforeChange": "      private void randomiseBlock()", "signatureAfterChange": "      private void randomiseBlock()", "diff": ["-    private void randomiseBlock() {", "-        int i;", "-        int rNToGo = 0;", "-        int rTPos  = 0;", "-        for (i = 0; i < 256; i++) {", "-            inUse[i] = false;", "-        }", "-", "-        for (i = 0; i <= last; i++) {", "-            if (rNToGo == 0) {", "-                rNToGo = (char) rNums[rTPos];", "-                rTPos++;", "-                if (rTPos == 512) {", "-                    rTPos = 0;", "-                }", "-            }", "-            rNToGo--;", "-            block[i + 1] ^= ((rNToGo == 1) ? 1 : 0);", "-            // handle 16 bit signed numbers", "-            block[i + 1] &= 0xFF;", "-", "-            inUse[block[i + 1]] = true;", "+", "+    private void randomiseBlock() {", "+        final boolean[] inUse = this.data.inUse;", "+        final byte[] block = this.data.block;", "+        final int lastShadow = this.last;", "+", "+        for (int i = 256; --i >= 0;)", "+            inUse[i] = false;", "+", "+        int rNToGo = 0;", "+        int rTPos = 0;", "+        for (int i = 0, j = 1; i <= lastShadow; i = j, j++) {", "+            if (rNToGo == 0) {", "+                rNToGo = (char) BZip2Constants.rNums[rTPos];", "+                if (++rTPos == 512) {", "+                    rTPos = 0;", "+                }", "+            }", "+", "+            rNToGo--;", "+            block[j] ^= ((rNToGo == 1) ? 1 : 0);", "+", "+            // handle 16 bit signed numbers", "+            inUse[block[j] & 0xff] = true;", "+        }", "+", "+        this.blockRandomised = true;"]}]}