{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f991ff048fe39e83467b377da18967e0", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0569ffecc8c85138dfe4fbe655f70974", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Move.java", "commitBeforeChange": "dd59f330e28468c67b69a1d4e352f4e5bafcb27f", "commitAfterChange": "a5a1cf23953be08f91c28840a830e295eb7b171c", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     protected void validateAttributes() throws BuildException", "diff": ["-     */", "-    public void execute() throws BuildException {", "+    // inherit doc", "+    protected void validateAttributes() throws BuildException {", "-            if (destFile != null && destDir != null) {", "-                throw new BuildException(\"Only one of tofile and todir \"", "-                                         + \"may be set.\");", "+            if ((destFile != null && destDir != null)", "+                || (destFile == null && destDir == null)){", "+                throw new BuildException(\"One and only one of tofile and todir \"", "+                                         + \"must be set.\");", "+            destFile = (destFile == null)", "+                ? new File(destDir, file.getName()) : destFile;", "+            destDir = (destDir == null)", "+                ? fileUtils.getParentFile(destFile) : destDir;", "-            if (destFile == null && destDir == null) {", "-                throw new BuildException(\"One of tofile or todir must be set.\");", "-            }", "-", "-            destFile = (destFile != null)", "-                ? destFile : new File(destDir, file.getName());", "-", "-            try {", "-                boolean renamed = false;", "-                log(\"Moving directory \" + file", "-                    + \" to \" + destFile, Project.MSG_INFO);", "-                try {", "-                    renamed =", "-                        renameFile(file, destFile, filtering, forceOverwrite);", "-                } catch (IOException eyeOhEx) {", "-                    throw new BuildException(eyeOhEx.getMessage());", "-                }", "-                if (!renamed) {", "-                    StringBuffer buf = new StringBuffer(", "-                        \"Failed to move directory \").append(", "-                        file.getAbsolutePath());", "-", "-                    if ((getFilterChains() != null && getFilterChains().size() > 0)", "-                        || (getFilterSets() != null && getFilterSets().size() > 0)", "-                        || filtering) {", "-                        buf.append(", "-                            \"; use a fileset to move directories with filtering\");", "-                    }", "-                    throw new BuildException(buf.append('.').toString());", "-                }", "-            } catch (BuildException e) {", "-                if (!failonerror) {", "-                    log(\"Warning: \" + e.getMessage(), Project.MSG_ERR);", "-                } else {", "-                    throw e;", "-                }", "-            }", "+            completeDirMap.put(file, destFile);", "+            file = null;", "-            super.execute();", "+            super.validateAttributes();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "40ed9603b5f2bc3456a65e3ffb3aeadf", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/XSLTProcess.java", "commitBeforeChange": "b8de4702c99eb699fc8f1ef6e85c2d6655bb3092", "commitAfterChange": "8854bf786818398c0e519f02de94efda5ba569ed", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "      public void execute() throws BuildException", "signatureAfterChange": "      public void execute() throws BuildException", "diff": ["+        if (xslFile == null) {", "+            throw new BuildException(\"no stylesheet specified\", location);", "+        }", "+", "-        long styleSheetLastModified = 0;", "-        if (xslFile != null) {", "-            try {", "-                File file = project.resolveFile(xslFile, project.getBaseDir());", "-", "-                if (!file.exists()) {", "-                    file = project.resolveFile(xslFile, baseDir);", "-                    /*", "-                     * shouldn't throw out deprectaion warnings before we know,", "-                     * the wrong version has been used.", "-                     */", "-                    if (file.exists()) {", "-                        log(\"DEPRECATED - the style attribute should be relative to the project\\'s\");", "-                        log(\"             basedir, not the tasks\\'s basedir.\");", "-                    }", "-                }", "-                ", "-                // Create a new XSL processor with the specified stylesheet", "-                styleSheetLastModified = file.lastModified();", "-                log( \"Loading stylesheet \" + file, Project.MSG_INFO);", "-                liaison.setStylesheet( file.toString() );", "-                for(Enumeration e = params.elements();e.hasMoreElements();) {", "-                    Param p = (Param)e.nextElement();", "-                    liaison.addParam( p.getName(), p.getExpression() );", "-                }", "-            } catch (Exception ex) {", "-                log(\"Failed to read stylesheet \" + xslFile, Project.MSG_INFO);", "-                throw new BuildException(ex);", "+        File stylesheet = project.resolveFile(xslFile, project.getBaseDir());", "+        if (!stylesheet.exists()) {", "+            stylesheet = project.resolveFile(xslFile, baseDir);", "+            /*", "+             * shouldn't throw out deprecation warnings before we know,", "+             * the wrong version has been used.", "+             */", "+            if (stylesheet.exists()) {", "+                log(\"DEPRECATED - the style attribute should be relative to the project\\'s\");", "+                log(\"             basedir, not the tasks\\'s basedir.\");", "-            process(inFile, outFile, styleSheetLastModified);", "+            process(inFile, outFile, stylesheet);", "-            process( baseDir, list[i], destDir, styleSheetLastModified );", "+            process( baseDir, list[i], destDir, stylesheet );", "-                process( baseDir, list[i], destDir, styleSheetLastModified );", "+                process( baseDir, list[i], destDir, stylesheet );"]}]}