{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "695f439010e346ccf27a794f2e016f1a", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4046acfbde7da8490033b7e5d18dc993", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/War.java", "commitBeforeChange": "689c463eda7b1f0d4064d9f028582ee95ff9ecda", "commitAfterChange": "c91cce227b53c499d2a61694f6ba14e2e5ba5930", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "     protected void zipFile(File file, ZipOutputStream zOut, String vPath,                            int mode)         throws IOException", "signatureAfterChange": "     protected void zipFile(File file, ZipOutputStream zOut, String vPath,                            int mode)         throws IOException", "diff": ["-        if (vPath.equalsIgnoreCase(\"WEB-INF/web.xml\"))  {", "-            if (deploymentDescriptor == null", "-                || !FILE_UTILS.fileNameEquals(deploymentDescriptor, file)", "-                || descriptorAdded) {", "-                log(\"Warning: selected \" + archiveType", "-                    + \" files include a WEB-INF/web.xml which will be ignored \"", "-                    + \"(please use webxml attribute to \"", "-                    + archiveType + \" task)\", Project.MSG_WARN);", "+        String vPathLowerCase = vPath.toLowerCase(Locale.ENGLISH);", "+        //by default, we add the file.", "+        boolean addFile = true;", "+        if (XML_DESCRIPTOR_PATH.equals(vPathLowerCase)) {", "+            //a web.xml file was found. See if it is a duplicate or not", "+            if (addedWebXmlFile != null) {", "+                //a second web.xml file, so skip it", "+                addFile = false;", "+                //check to see if we warn or not", "+                if (!FILE_UTILS.fileNameEquals(addedWebXmlFile, file)) {", "+                    log(\"Warning: selected \" + archiveType", "+                            +\" files include a second \" +XML_DESCRIPTOR_PATH", "+                            + \" which will be ignored.\\n\"", "+                            + \"The duplicate entry is at \" +file +'\\n'", "+                            + \"The file that will be used is \"", "+                            + addedWebXmlFile,", "+                            Project.MSG_WARN);", "+                }", "-                super.zipFile(file, zOut, vPath, mode);", "+                //no added file, yet", "+                addedWebXmlFile=file;", "+                //there is no web.xml file, so add it", "+                addFile = true;", "+                //and remember that we did", "+                deploymentDescriptor = file;", "-        } else {", "+        }", "+        if (addFile) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f88e09b8b2ed5976fa3b95eface7321b", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/ejb/WeblogicDeploymentTool.java", "commitBeforeChange": "fca57f83a2f6e6194cf2e223068f7f3bb714a676", "commitAfterChange": "8a21be498479cb838b88fc0f77547e82ed1c5334", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 20, "signatureBeforeChange": "     private void buildWeblogicJar(File sourceJar, File destJar)", "signatureAfterChange": "     private void buildWeblogicJar(File sourceJar, File destJar, String publicId)", "diff": ["-    private void buildWeblogicJar(File sourceJar, File destJar) {", "+    private void buildWeblogicJar(File sourceJar, File destJar, String publicId) {", "+        ", "+        String ejbcClassName = ejbcClass;", "-            javaTask.setClassname(\"weblogic.ejbc\");", "+            if (ejbcClassName == null) {", "+                // try to determine it from publicId", "+                if (PUBLICID_EJB11.equals(publicId)) {", "+                    ejbcClassName = COMPILER_EJB11;", "+                }", "+                else if (PUBLICID_EJB20.equals(publicId)) {", "+                    ejbcClassName = COMPILER_EJB20;", "+                }", "+                else {", "+                    log(\"Unrecognized publicId \" + publicId + \" - using EJB 1.1 compiler\", Project.MSG_WARN);", "+                    ejbcClassName = COMPILER_EJB11;", "+                }", "+            }", "+                 ", "+            javaTask.setClassname(ejbcClassName);", "-            log(\"Calling weblogic.ejbc for \" + sourceJar.toString(),", "+            log(\"Calling \" + ejbcClassName + \" for \" + sourceJar.toString(),", "-            String msg = \"Exception while calling ejbc. Details: \" + e.toString();", "+            String msg = \"Exception while calling \" + ejbcClassName + \". Details: \" + e.toString();"]}]}