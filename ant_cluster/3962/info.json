{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "80285f80b9bc262bba36c4b7dfe7bec6", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5b58d2e0f56301f50741d68c2000718b", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "cc911f59921cda9a230eebd58c4ab6d9e292d5e9", "commitAfterChange": "693d7c89066c2913bd08ca5cefb022de793f118e", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 21, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-        if (srcFile == null && sqlCommand.length() == 0) { ", "+        if (srcFile == null && sqlCommand.length()==0 && filesets.isEmpty()) { ", "-                throw new BuildException(\"Source file, transactions or sql statement must be set!\", location);", "+                throw new BuildException(\"Source file or fileset, transactions or sql statement must be set!\", location);", "-        } else {", "+        } else { ", "+            // deal with the filesets", "+            for (int i=0; i<filesets.size(); i++) {", "+                FileSet fs = (FileSet) filesets.elementAt(i);", "+                DirectoryScanner ds = fs.getDirectoryScanner(project);", "+                File srcDir = fs.getDir(project);", "+", "+                String[] srcFiles = ds.getIncludedFiles();", "+", "+                // Make a transaction for each file", "+                for ( int j=0 ; j<srcFiles.length ; j++ ) {", "+                    Transaction t = createTransaction();", "+                    t.setSrc(new File(srcDir, srcFiles[j]));", "+                }", "+            }", "+"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "65ff8fc5e98bdc97621cc2f192237b73", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Delete.java", "commitBeforeChange": "5f7fbe8b732d8ad675be2e58acf2fde106b484b5", "commitAfterChange": "ebac9845309a1af1c1814faa758cdd310f9f3bd9", "methodNumberBeforeChange": 43, "methodNumberAfterChange": 44, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["+                DirectoryScanner ds = fs.getDirectoryScanner();", "-                    filesetDirs.add(new ReverseDirs(getProject(), fsDir, fs", "-                            .getDirectoryScanner().getIncludedDirectories()));", "+                    filesetDirs.add(new ReverseDirs(getProject(), fsDir,", "+                                                    ds", "+                                                    .getIncludedDirectories()));", "+                }", "+", "+                if (removeNotFollowedSymlinks) {", "+                    String[] n = ds.getNotFollowedSymlinks();", "+                    if (n.length > 0) {", "+                        String[] links = new String[n.length];", "+                        System.arraycopy(n, 0, links, 0, n.length);", "+                        Arrays.sort(links, ReverseDirs.REVERSE);", "+                        for (int l = 0; l < links.length; l++) {", "+                            try {", "+                                SYMLINK_UTILS", "+                                    .deleteSymbolicLink(new File(links[l]),", "+                                                        this);", "+                            } catch (java.io.IOException ex) {", "+                                handle(ex);", "+                            }", "+                        }", "+                    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9b16c736f6fb3ead65727d1bbe0dd598", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Touch.java", "commitBeforeChange": "636efd4eb0a49b85b020aa22982f32e8958db9c0", "commitAfterChange": "5086d936941d88eb84fbe326c8982bff92887237", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 7, "signatureBeforeChange": "     protected void touch() throws BuildException", "signatureAfterChange": "     protected void touch() throws BuildException", "diff": ["-        if (file != null) {", "-            if (!file.exists()) {", "-                log(\"Creating \" + file, Project.MSG_INFO);", "-                try {", "-                    fileUtils.createNewFile(file);", "-                } catch (IOException ioe) {", "-                    throw new BuildException(\"Could not create \" + file, ioe,", "-                                             getLocation());", "-                }", "-            }", "-        }", "-", "-        if (millis >= 0 && JavaEnvUtils.isJavaVersion(JavaEnvUtils.JAVA_1_1)) {", "-            log(\"modification time of files cannot be set in JDK 1.1\",", "-                Project.MSG_WARN);", "-            return;", "-        }", "+        // deal with the filelists", "+        for (int i = 0; i < filelists.size(); i++) {", "+            FileList fl = (FileList) filelists.elementAt(i);", "+            File fromDir = fl.getDir(getProject());", "+", "+            String[] srcFiles = fl.getFiles(getProject());", "+", "+            for (int j = 0; j < srcFiles.length; j++) {", "+                touch(new File(fromDir, srcFiles[j]));", "+            }", "+        }", "+"]}]}