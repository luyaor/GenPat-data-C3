{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "13621347e3d35cd09afc9241ef5eef19", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4e9b52d952d319de48db1d2100b53c67", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/condition/Os.java", "commitBeforeChange": "db20074a24385567131acd6a6fd226e4ce64ec6b", "commitAfterChange": "9d42c87a1a496e8cf4a93458d94c239d83fc84af", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "     public static boolean isOs(String family, String name, String arch,                                String version)", "signatureAfterChange": "     public static boolean isOs(String family, String name, String arch,                                String version)", "diff": ["-                if (family.equals(\"windows\")) {", "-                    isFamily = OS_NAME.indexOf(\"windows\") > -1;", "-                } else if (family.equals(\"os/2\")) {", "-                    isFamily = OS_NAME.indexOf(\"os/2\") > -1;", "-                } else if (family.equals(\"netware\")) {", "-                    isFamily = OS_NAME.indexOf(\"netware\") > -1;", "-                } else if (family.equals(\"dos\")) {", "-                    isFamily = PATH_SEP.equals(\";\") && !isFamily(\"netware\");", "-                } else if (family.equals(\"mac\")) {", "-                    isFamily = OS_NAME.indexOf(\"mac\") > -1;", "-                } else if (family.equals(\"tandem\")) {", "-                    isFamily = OS_NAME.indexOf(\"nonstop_kernel\") > -1;", "-                } else if (family.equals(\"unix\")) {", "-                    isFamily = PATH_SEP.equals(\":\")", "-                        && !isFamily(\"openvms\")", "-                        && (!isFamily(\"mac\") || OS_NAME.endsWith(\"x\"));", "-                } else if (family.equals(\"win9x\")) {", "-                    isFamily = isFamily(\"windows\")", "-                        && (OS_NAME.indexOf(\"95\") >= 0", "+", "+                //windows probing logic relies on the word 'windows' in", "+                //the OS", "+                boolean isWindows = OS_NAME.indexOf(FAMILY_WINDOWS) > -1;", "+                boolean is9x = false;", "+                boolean isNT = false;", "+                if(isWindows) {", "+                    //there are only four 9x platforms that we look for", "+                    is9x = (OS_NAME.indexOf(\"95\") >= 0", "+                            //wince isn't really 9x, but crippled enough to", "+                            //be a muchness. Ant doesnt run on CE, anyway.", "-                } else if (family.equals(\"z/os\")) {", "-                    isFamily = OS_NAME.indexOf(\"z/os\") > -1", "+                    isNT = !is9x;", "+                }", "+                if (family.equals(FAMILY_WINDOWS)) {", "+                    isFamily = isWindows;", "+                } else if (family.equals(FAMILY_9X)) {", "+                    isFamily = isWindows && is9x;", "+                } else if (family.equals(FAMILY_NT)) {", "+                    isFamily = isWindows && isNT;", "+                } else if (family.equals(FAMILY_OS2)) {", "+                    isFamily = OS_NAME.indexOf(FAMILY_OS2) > -1;", "+                } else if (family.equals(FAMILY_NETWARE)) {", "+                    isFamily = OS_NAME.indexOf(FAMILY_NETWARE) > -1;", "+                } else if (family.equals(FAMILY_DOS)) {", "+                    isFamily = PATH_SEP.equals(\";\") && !isFamily(FAMILY_NETWARE);", "+                } else if (family.equals(FAMILY_MAC)) {", "+                    isFamily = OS_NAME.indexOf(FAMILY_MAC) > -1;", "+                } else if (family.equals(FAMILY_TANDEM)) {", "+                    isFamily = OS_NAME.indexOf(\"nonstop_kernel\") > -1;", "+                } else if (family.equals(FAMILY_UNIX)) {", "+                    isFamily = PATH_SEP.equals(\":\")", "+                        && !isFamily(FAMILY_VMS)", "+                        && (!isFamily(FAMILY_MAC) || OS_NAME.endsWith(\"x\"));", "+                } else if (family.equals(FAMILY_ZOS)) {", "+                    isFamily = OS_NAME.indexOf(FAMILY_ZOS) > -1", "-                } else if (family.equals(\"os/400\")) {", "-                    isFamily = OS_NAME.indexOf(\"os/400\") > -1;", "-                } else if (family.equals(\"openvms\")) {", "-                    isFamily = OS_NAME.indexOf(\"openvms\") > -1;", "+                } else if (family.equals(FAMILY_OS400)) {", "+                    isFamily = OS_NAME.indexOf(FAMILY_OS400) > -1;", "+                } else if (family.equals(FAMILY_VMS)) {", "+                    isFamily = OS_NAME.indexOf(FAMILY_VMS) > -1;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5b0f485e0d63445b85470dc40c107d24", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/cvslib/CvsTagDiff.java", "commitBeforeChange": "3d6430630c7bb0f04f827ac9294306636754b9bc", "commitAfterChange": "62fa7c44feec38b3abc173b2436e3fe4c4e2c8cd", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "signatureAfterChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "diff": ["-                line = line.substring(headerLength);", "+                if (line.length() > headerLength) {", "+                    line = line.substring(headerLength);", "-                if ((index = line.indexOf(FILE_IS_NEW)) != -1) {", "-                    // it is a new file", "-                    // set the revision but not the prevrevision", "-                    String filename = line.substring(0, index);", "-                    String rev = line.substring(index + FILE_IS_NEW.length());", "+                    if ((index = line.indexOf(FILE_IS_NEW)) != -1) {", "+                        // it is a new file", "+                        // set the revision but not the prevrevision", "+                        String filename = line.substring(0, index);", "+                        String rev = line.substring(index + FILE_IS_NEW.length());", "-                    entries.addElement(entry = new CvsTagEntry(filename, rev));", "-                    log(entry.toString(), Project.MSG_VERBOSE);", "-                } else if ((index = line.indexOf(FILE_HAS_CHANGED)) != -1) {", "-                    // it is a modified file", "-                    // set the revision and the prevrevision", "-                    String filename = line.substring(0, index);", "-                    int revSeparator = line.indexOf(\" to \", index);", "-                    String prevRevision =", "-                        line.substring(index + FILE_HAS_CHANGED.length(),", "-                                       revSeparator);", "-                     // 4 is \" to \" length", "-                    String revision = line.substring(revSeparator + 4);", "+                        entries.addElement(entry = new CvsTagEntry(filename, rev));", "+                        log(entry.toString(), Project.MSG_VERBOSE);", "+                    } else if ((index = line.indexOf(FILE_HAS_CHANGED)) != -1) {", "+                        // it is a modified file", "+                        // set the revision and the prevrevision", "+                        String filename = line.substring(0, index);", "+                        int revSeparator = line.indexOf(\" to \", index);", "+                        String prevRevision =", "+                            line.substring(index + FILE_HAS_CHANGED.length(),", "+                                revSeparator);", "+                        // 4 is \" to \" length", "+                        String revision = line.substring(revSeparator + 4);", "-                    entries.addElement(entry = new CvsTagEntry(filename,", "-                                                               revision,", "-                                                               prevRevision));", "-                    log(entry.toString(), Project.MSG_VERBOSE);", "-                } else if ((index = line.indexOf(FILE_WAS_REMOVED)) != -1) {", "-                    // it is a removed file", "-                    String filename = line.substring(0, index);", "+                        entries.addElement(entry = new CvsTagEntry(filename,", "+                            revision,", "+                            prevRevision));", "+                        log(entry.toString(), Project.MSG_VERBOSE);", "+                    } else if ((index = line.indexOf(FILE_WAS_REMOVED)) != -1) {", "+                        // it is a removed file", "+                        String filename = line.substring(0, index);", "-                    entries.addElement(entry = new CvsTagEntry(filename));", "-                    log(entry.toString(), Project.MSG_VERBOSE);", "+                        entries.addElement(entry = new CvsTagEntry(filename));", "+                        log(entry.toString(), Project.MSG_VERBOSE);", "+                    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e8542db75dcc04c8dff79d47c1ec8902", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/cvslib/CvsTagDiff.java", "commitBeforeChange": "98c94f2ed3cb2c8a28812d56f60afdeb69574c72", "commitAfterChange": "cde826c2b0d226773ff00407365ac581b3e7c9e0", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "signatureAfterChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "diff": ["-            int index;", "-            CvsTagEntry entry = null;", "-                    index = line.indexOf(FILE_IS_NEW);", "-                    if (index  != -1) {", "-                        // it is a new file", "-                        // set the revision but not the prevrevision", "-                        String filename = line.substring(0, index);", "-                        String rev = null;", "-                        int indexrev = line.indexOf(REVISION, index);", "-                        if (indexrev != -1) {", "-                            rev = line.substring(indexrev + REVISION.length());", "-                        }", "-                        entry = new CvsTagEntry(filename, rev);", "-                        entries.addElement(entry);", "-                        log(entry.toString(), Project.MSG_VERBOSE);", "-                    } else if ((index = line.indexOf(FILE_HAS_CHANGED)) != -1) {", "-                        // it is a modified file", "-                        // set the revision and the prevrevision", "-                        String filename = line.substring(0, index);", "-                        int revSeparator = line.indexOf(\" to \", index);", "-                        String prevRevision =", "-                            line.substring(index + FILE_HAS_CHANGED.length(),", "-                                revSeparator);", "-                        String revision = line.substring(revSeparator + TO_STRING.length());", "-                        entry = new CvsTagEntry(filename,", "-                            revision,", "-                            prevRevision);", "-                        entries.addElement(entry);", "-                        log(entry.toString(), Project.MSG_VERBOSE);", "-                    } else if ((index = line.indexOf(FILE_WAS_REMOVED)) != -1) {", "-                        // it is a removed file", "-                        String filename = line.substring(0, index);", "-                        String rev = null;", "-                        int indexrev = line.indexOf(REVISION, index);", "-                        if (indexrev != -1) {", "-                            rev = line.substring(indexrev + REVISION.length());", "-                        }", "-                        entry = new CvsTagEntry(filename, null, rev);", "-                        entries.addElement(entry);", "-                        log(entry.toString(), Project.MSG_VERBOSE);", "-                    }", "+                    // use || in a perl like fashion", "+                    boolean processed", "+                        =  doFileIsNew(entries, line)", "+                        || doFileHasChanged(entries, line)", "+                        || doFileWasRemoved(entries, line);"]}]}