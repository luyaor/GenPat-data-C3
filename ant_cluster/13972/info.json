{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "d58e6f16770a8669237496e1925c9575", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c57656fbc49a6e7d42579287d248af00", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java", "commitBeforeChange": "536a84c211f50992fedce887f3120414eec39068", "commitAfterChange": "d0cb590844449882c124f78aa671ef8750c75ea9", "methodNumberBeforeChange": 74, "methodNumberAfterChange": 76, "signatureBeforeChange": "     protected int transferFiles(FTPClient ftp, FileSet fs)          throws IOException, BuildException", "signatureAfterChange": "     protected int transferFiles(final FTPClient ftp, FileSet fs)          throws IOException, BuildException", "diff": ["-    protected int transferFiles(FTPClient ftp, FileSet fs)", "+    protected int transferFiles(final FTPClient ftp, FileSet fs)", "+            RetryHandler h = new RetryHandler(this.retriesAllowed, this);", "-                    rmDir(ftp, dsfiles[i]);", "+                    final String dsfile = dsfiles[i];", "+                    executeRetryable(h, new Retryable() {", "+                        public void execute() throws IOException {", "+                            rmDir(ftp, dsfile);", "+                        }", "+                    }, dsfile);", "+                final BufferedWriter fbw = bw;", "+                final String fdir = dir;", "-                    switch (action) {", "-                        case SEND_FILES:", "-                            sendFile(ftp, dir, dsfiles[i]);", "-                            break;", "-                        case GET_FILES:", "-                            getFile(ftp, dir, dsfiles[i]);", "-                            break;", "-                        case DEL_FILES:", "-                            delFile(ftp, dsfiles[i]);", "-                            break;", "-                        case LIST_FILES:", "-                            listFile(ftp, bw, dsfiles[i]);", "-                            break;", "-                        case CHMOD:", "-                            doSiteCommand(ftp, \"chmod \" + chmod + \" \" + resolveFile(dsfiles[i]));", "-                            transferred++;", "-                            break;", "-                        default:", "-                            throw new BuildException(\"unknown ftp action \" + action);", "-                    }", "+                    final String dsfile = dsfiles[i];", "+                    executeRetryable(h, new Retryable() {", "+                        public void execute() throws IOException {", "+                            switch (action) {", "+                                case SEND_FILES:", "+                                    sendFile(ftp, fdir, dsfile);", "+                                    break;", "+                                case GET_FILES:", "+                                    getFile(ftp, fdir, dsfile);", "+                                    break;", "+                                case DEL_FILES:", "+                                    delFile(ftp, dsfile);", "+                                    break;", "+                                case LIST_FILES:", "+                                    listFile(ftp, fbw, dsfile);", "+                                    break;", "+                                case CHMOD:", "+                                    doSiteCommand(ftp, \"chmod \" + chmod + \" \" + resolveFile(dsfile));", "+                                    transferred++;", "+                                    break;", "+                                default:", "+                                    throw new BuildException(\"unknown ftp action \" + action);", "+                            }", "+                        }", "+                    }, dsfile);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "db196a7e0835480362dc60c0a42c214d", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/optional/net/FTP.java", "commitBeforeChange": "2a816a5361ec39c8693a6a4bbac559ffe5948c6e", "commitAfterChange": "f2d32ac66d804c5dfeb14adcfa0ab31ff8f648e8", "methodNumberBeforeChange": 93, "methodNumberAfterChange": 95, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["+            ", "+            // If an initial command was configured then send it.", "+            // Some FTP servers offer different modes of operation,", "+            // E.G. switching between a UNIX file system mode and", "+            // a legacy file system.", "+            if (this.initialSiteCommand != null) {", "+                RetryHandler h = new RetryHandler(this.retriesAllowed, this);", "+                final FTPClient lftp = ftp;", "+                executeRetryable(h, new Retryable() {", "+                    public void execute() throws IOException {", "+                        doSiteCommand(lftp, FTP.this.initialSiteCommand);", "+                    }", "+                }, \"initial site command: \"+ this.initialSiteCommand);", "+            }", "+", "-                doSiteCommand(ftp, \"umask \" + umask);", "+                RetryHandler h = new RetryHandler(this.retriesAllowed, this);", "+                final FTPClient lftp = ftp;", "+                executeRetryable(h, new Retryable() {", "+                    public void execute() throws IOException {", "+                        doSiteCommand(lftp, \"umask \" + umask);", "+                    }", "+                }, \"umask \" + umask);", "+            } else if (action == SITE_CMD) {", "+                    RetryHandler h = new RetryHandler(this.retriesAllowed, this);", "+                    final FTPClient lftp = ftp;", "+                    executeRetryable(h, new Retryable() {", "+                        public void execute() throws IOException {", "+                            doSiteCommand(lftp, FTP.this.siteCommand);", "+                        }", "+                    }, \"Site Command: \" + this.siteCommand);"]}]}