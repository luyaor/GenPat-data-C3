{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4b05d4d98c9e901dde0e360a5f735285", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "794248a3423ad45a591e31d6f4e01708", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Zip.java", "commitBeforeChange": "6309813d01620379a35da64c12c4de488efedc2d", "commitAfterChange": "4ab1950bd8ba0bf2335e09b07852d74e1b016f5a", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 15, "signatureBeforeChange": "      public void execute() throws BuildException", "signatureAfterChange": "      public void execute() throws BuildException", "diff": ["-        if (baseDir == null && filesets.size() == 0 && \"zip\".equals(archiveType)) {", "+        if (baseDir == null && filesets.size() == 0", "+                && groupfilesets.size() == 0 && \"zip\".equals(archiveType)) {", "+            }", "+        }", "+", "+        // Add the files found in groupfileset to fileset", "+        for (int i=0; i<groupfilesets.size(); i++) {", "+", "+            log(\"Processing groupfileset \", Project.MSG_VERBOSE);", "+            FileSet fs = (FileSet) groupfilesets.elementAt(i);", "+            FileScanner scanner = fs.getDirectoryScanner(project);", "+            String[] files = scanner.getIncludedFiles();", "+            File basedir = scanner.getBasedir();", "+            for (int j=0; j<files.length; j++) {", "+", "+                log(\"Adding file \" + files[j] + \" to fileset\", Project.MSG_VERBOSE);", "+                ZipFileSet zf = new ZipFileSet();", "+                zf.setSrc(new File(basedir, files[j]));", "+                filesets.add(zf);", "-                ", "+", "-        } catch (Throwable t) {", "-            String msg = \"Problem creating \" + archiveType + \": \" + t.getMessage();", "+        } catch (IOException ioe) {", "+            String msg = \"Problem creating \" + archiveType + \": \" + ioe.getMessage();", "-            throw new BuildException(msg, t, location);", "+            throw new BuildException(msg, ioe, location);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c159470149c881081b9fbdb100630838", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Zip.java", "commitBeforeChange": "7fb467a74ddff0c39412e3dd1e789edd15341e99", "commitAfterChange": "bca3e675c3bb2dedb5b3f0bae20a816f12187e32", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "      public void execute() throws BuildException", "signatureAfterChange": "      public void execute() throws BuildException", "diff": ["-        if (baseDir == null && filesets.size() == 0 && \"zip\".equals(archiveType))", "+        if (baseDir == null && filesets.size() == 0 && ", "+            locFileSets.size() == 0 && \"zip\".equals(archiveType)) {", "-                                      \"one fileset must be given!\" );", "+                                      \"one fileset or prefixedfileset must be given!\" );", "+        }", "+            boolean success = false;", "+ ", "+                success = true;", "-                zOut.close ();", "+                // Close the output stream.", "+                try {", "+                    if (zOut != null)", "+                        zOut.close ();", "+                } catch(IOException ex) {", "+                    // If we're in this finally clause because of an exception, we don't ", "+                    // really care if there's an exception when closing the stream. E.g. if it", "+                    // throws \"ZIP file must have at least one entry\", because an exception happened", "+                    // before we added any files, then we must swallow this exception. Otherwise,", "+                    // the error that's reported will be the close() error, which is not the real ", "+                    // cause of the problem.", "+                    if (success)", "+                        throw ex;", "+                }"]}]}