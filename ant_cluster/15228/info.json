{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "516258f33bac40d017dbd49d2be9462c", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "87a00cc9cbdbbbb26554d45e03ae2203", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "37ed344b385cde54ee62f2e66d347cb243dd6708", "commitAfterChange": "33107ab10098823c23924741100a6c3faf9fd267", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 20, "signatureBeforeChange": "     protected void execSQL(String sql) throws SQLException", "signatureAfterChange": "     protected void execSQL(String sql) throws SQLException", "diff": ["-        if (!statement.execute(sql)) {", "-            log(statement.getUpdateCount()+\" rows affected\", ", "-                Project.MSG_VERBOSE);", "+        try {  ", "+            totalSql++;", "+            if (!statement.execute(sql)) {", "+                log(statement.getUpdateCount()+\" rows affected\", ", "+                    Project.MSG_VERBOSE);", "+            }", "+            ", "+            if (print) {", "+                printResults();", "+            }", "+            ", "+            SQLWarning warning = conn.getWarnings();", "+            while(warning!=null){", "+                log(warning + \" sql warning\", Project.MSG_VERBOSE);", "+                warning=warning.getNextWarning();", "+            }", "+            conn.clearWarnings();", "+            goodSql++;", "-", "-        if (print) {", "-            printResults();", "+        catch (SQLException e) {", "+            log(\"Failed to execute: \" + sql, Project.MSG_ERR);", "+            if (!onError.equals(\"continue\")) throw e;", "+            log(e.toString(), Project.MSG_ERR);", "-", "-        SQLWarning warning = conn.getWarnings();", "-        while(warning!=null){", "-            log(warning + \" sql warning\", Project.MSG_VERBOSE);", "-            warning=warning.getNextWarning();", "-        }", "-        conn.clearWarnings();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c244f0a84ceeb03bd1b06d0a3cfd1cfe", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "7b6a46d13193059c7ea056ad646fe5620e2bb79d", "commitAfterChange": "740ed5fbfbb7f59db596062f9e853fba40a65722", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": "     protected void execSQL(String sql, PrintStream out) throws SQLException", "signatureAfterChange": "     protected void execSQL(String sql, PrintStream out) throws SQLException", "diff": ["-            if (!statement.execute(sql)) {", "-                log(statement.getUpdateCount() + \" rows affected\",", "-                    Project.MSG_VERBOSE);", "-            } else {", "-                if (print) {", "-                    printResults(out);", "+", "+            boolean ret;", "+            int updateCount = 0, updateCountTotal = 0;", "+            ResultSet resultSet = null;", "+", "+            ret = statement.execute(sql);", "+            updateCount = statement.getUpdateCount();", "+            resultSet = statement.getResultSet();", "+            do", "+            {", "+                if (!ret)", "+                {", "+                    if (updateCount != -1)", "+                    {", "+                        updateCountTotal += updateCount;", "+                    }", "+                else", "+                {", "+                    if (print)", "+                    {", "+                        printResults(out);", "+                    }", "+                }", "+                ret = statement.getMoreResults();", "+                updateCount = statement.getUpdateCount();", "+                resultSet = statement.getResultSet();", "+            } while ((resultSet != null) || (updateCount != -1));", "+", "+            log(updateCountTotal + \" rows affected\",", "+                Project.MSG_VERBOSE);", "+", "+            if (print)", "+            {", "+                StringBuffer line = new StringBuffer();", "+                line.append(updateCountTotal + \" rows affected\");", "+                out.println(line);"]}]}