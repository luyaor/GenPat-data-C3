{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "aac832642513dc1a51e783e0a9d69769", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3128069be65bb7fe01b28551e7a123a8", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/AntClassLoader.java", "commitBeforeChange": "cbef49e344857a1cf7c35737b67d3c732f901710", "commitAfterChange": "b839a3ed0f3a0ad050579c33f2ede3e8b8542fea", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": "     private InputStream getResourceStream(File file, String resourceName)", "signatureAfterChange": "     private InputStream getResourceStream(File file, String resourceName)", "diff": ["-                ZipFile zipFile = null;", "-                try {", "+                // is the zip file in the cache", "+                ZipFile zipFile = (ZipFile)zipFiles.get(file);", "+                if (zipFile == null) {", "-        ", "-                    ZipEntry entry = zipFile.getEntry(resourceName);", "-                    if (entry != null) {", "-                        // we need to read the entry out of the zip file into", "-                        // a baos and then ", "-                        ByteArrayOutputStream baos = new ByteArrayOutputStream();", "-                        byte[] buffer = new byte[BUFFER_SIZE];", "-                        int bytesRead;", "-                        InputStream stream = zipFile.getInputStream(entry);", "-                        while ((bytesRead = stream.read(buffer, 0, BUFFER_SIZE)) != -1) {", "-                            baos.write(buffer, 0, bytesRead);", "-                        }", "-                        return new ByteArrayInputStream(baos.toByteArray());   ", "-                    }", "+                    zipFiles.put(file, zipFile);                    ", "-                finally {", "-                    if (zipFile != null) {", "-                        zipFile.close();", "-                    }", "+                ZipEntry entry = zipFile.getEntry(resourceName);", "+                if (entry != null) {", "+                    return zipFile.getInputStream(entry);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d6ea9850bae0a5f5b5bc9f48d3d2bd18", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/AntClassLoader.java", "commitBeforeChange": "12f19c932133ae8e0eaae97b14eb718262cb0843", "commitAfterChange": "8b613e7fb2924211824146110e777f7cdc5a120f", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "      private InputStream getResourceStream(File file, String resourceName)", "signatureAfterChange": "     private InputStream getResourceStream(File file, String resourceName)", "diff": ["+     */", "-                ZipFile zipFile = new ZipFile(file);", "+                ZipFile zipFile = null;", "+                try {", "+                    zipFile = new ZipFile(file);", "-                ZipEntry entry = zipFile.getEntry(resourceName);", "-                if (entry != null) {", "-                    return zipFile.getInputStream(entry);", "+                    ZipEntry entry = zipFile.getEntry(resourceName);", "+                    if (entry != null) {", "+                        // we need to read the entry out of the zip file into", "+                        // a baos and then ", "+                        ByteArrayOutputStream baos = new ByteArrayOutputStream();", "+                        byte[] buffer = new byte[BUFFER_SIZE];", "+                        int bytesRead;", "+                        InputStream stream = zipFile.getInputStream(entry);", "+                        while ((bytesRead = stream.read(buffer, 0, BUFFER_SIZE)) != -1) {", "+                            baos.write(buffer, 0, bytesRead);", "+                        }", "+                        return new ByteArrayInputStream(baos.toByteArray());   ", "+                    }", "+                }", "+                finally {", "+                    if (zipFile != null) {", "+                        zipFile.close();", "+                    }"]}]}