{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "97bef4356a59846d5191a5366e60ef32", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8c59f16514473b80c8969b118721e792", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/FixCRLF.java", "commitBeforeChange": "0bf139178affc6edbd26010b96cd727bd1396c84", "commitAfterChange": "722f6306c7ce1bcfed6c1baacb939978cd48fc6b", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 12, "signatureBeforeChange": "      private void processFile(String file) throws BuildException", "signatureAfterChange": "       private void processFile(String file) throws BuildException", "diff": ["-                                     ", "+", "-                if (!destFile.delete()) {", "-                    throw new BuildException(\"Unable to delete \" + destFile);", "+                // Compare the destination with the temp file", "+                System.out.println(\"destFile exists\");", "+                if ( ! filesEqual(destFile, tmpFile)) {", "+                    System.out.println(\"destFile exists: files not equal\");", "+                    log(destFile + \" is being written\", Project.MSG_VERBOSE);", "+                    if (!destFile.delete()) {", "+                        throw new BuildException(\"Unable to delete \"", "+                                                 + destFile);", "+                    }", "+                    if (!tmpFile.renameTo(destFile)) {", "+                        throw new BuildException(", "+                                \"Failed to transform \" + srcFile", "+                                + \" to \" + destFile", "+                                + \". Couldn't rename temporary file: \"", "+                                + tmpFile);", "+                    }", "+", "+                } else { // destination is equal to temp file", "+                    System.out.println(\"destFile exists: files equal\");", "+                    log(destFile +", "+                        \" is not written, as the contents are identical\",", "+                        Project.MSG_VERBOSE);", "+                    if (!tmpFile.delete()) {", "+                        throw new BuildException(\"Unable to delete \"", "+                                                 + destFile);", "+                    }", "+                }", "+            } else { // destFile does not exist - write the temp file", "+                System.out.println(\"destFile does not exist\");", "+                if (!tmpFile.renameTo(destFile)) {", "+                    throw new BuildException(", "+                            \"Failed to transform \" + srcFile", "+                            + \" to \" + destFile", "+                            + \". Couldn't rename temporary file: \"", "+                            + tmpFile);", "-                                     ", "-            if (!tmpFile.renameTo(destFile)) {", "-                throw new BuildException(\"Failed to transform \" + srcFile", "-                                         + \" to \" + destFile", "-                                         + \". Couldn't rename temporary file: \" + tmpFile);", "-            } else {", "-                tmpFile = null;", "-            }", "+", "+            tmpFile = null;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b93bb8cb80f1fd1bc869905f3df5ce4f", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/SQLExec.java", "commitBeforeChange": "d5b535aa9a9f69dcd2d0cada46e88e7f3295c084", "commitAfterChange": "f8e71b50339d8fc15bdf6813eaa91d24096817a7", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-                    throw new BuildException(\"Source file or resource \"", "-                                             + \"collection, \"", "+                    throw new BuildException(\"Source file or resource collection, \"", "-            if (srcFile != null && !srcFile.exists()) {", "-                throw new BuildException(\"Source file does not exist!\", getLocation());", "+            if (srcFile != null && !srcFile.isFile()) {", "+                throw new BuildException(\"Source file \" + srcFile", "+                        + \" is not a file!\", getLocation());", "-                        log(\"Opening PrintStream to output file \" + output,", "-                            Project.MSG_VERBOSE);", "-                        out = new PrintStream(", "-                                  new BufferedOutputStream(", "-                                      new FileOutputStream(output", "-                                                           .getAbsolutePath(),", "-                                                           append)));", "+                        log(\"Opening PrintStream to output file \" + output, Project.MSG_VERBOSE);", "+                        out = new PrintStream(new BufferedOutputStream(", "+                                new FileOutputStream(output.getAbsolutePath(), append)));", "-                    if (out != null && out != System.out) {", "-                        out.close();", "-                    }", "+                    FileUtils.close(out);", "+                } catch (SQLException ex) {", "+                    // ignore", "+                }", "+                try {", "-            log(goodSql + \" of \" + totalSql", "-                + \" SQL statements executed successfully\");", "+            log(goodSql + \" of \" + totalSql + \" SQL statements executed successfully\");"]}]}