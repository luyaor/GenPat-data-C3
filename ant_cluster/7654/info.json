{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "edc3934429f1a4b9c2c4a7e4defcb4c7", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9124a99f6daa7e32980f908d84be154e", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Redirector.java", "commitBeforeChange": "8b0f5b8c9ba88b3b80dba55661f1417ab6cacf04", "commitAfterChange": "8f4a67608a919e16059f3a74cf08a940d4a2f085", "methodNumberBeforeChange": 27, "methodNumberAfterChange": 27, "signatureBeforeChange": "     public synchronized void createStreams()", "signatureAfterChange": "     public synchronized void createStreams()", "diff": ["-        if (out != null && out.length > 0) {", "-            String logHead = new StringBuffer(\"Output \").append(", "-                ((append) ? \"appended\" : \"redirected\")).append(", "-                \" to \").toString();", "-            outputStream = foldFiles(out, logHead, Project.MSG_VERBOSE);", "-        }", "-        if (outputProperty != null) {", "-            if (baos == null) {", "-                baos = new PropertyOutputStream(outputProperty);", "-                managingTask.log(\"Output redirected to property: \"", "-                    + outputProperty, Project.MSG_VERBOSE);", "-            }", "-            //shield it from being closed by a filtering StreamPumper", "-            OutputStream keepAliveOutput = new KeepAliveOutputStream(baos);", "-            outputStream = (outputStream == null) ? keepAliveOutput", "-                : new TeeOutputStream(outputStream, keepAliveOutput);", "-        } else {", "-            baos = null;", "-        }", "-", "-        if (error != null && error.length > 0) {", "-            String logHead = new StringBuffer(\"Error \").append(", "-                ((append) ? \"appended\" : \"redirected\")).append(", "-                \" to \").toString();", "-            errorStream = foldFiles(error, logHead, Project.MSG_VERBOSE);", "-        } else if (!(logError || outputStream == null)) {", "-            long funnelTimeout = 0L;", "-            OutputStreamFunneler funneler", "-                = new OutputStreamFunneler(outputStream, funnelTimeout);", "-            try {", "-                outputStream = funneler.getFunnelInstance();", "-                errorStream = funneler.getFunnelInstance();", "-            } catch (IOException eyeOhEx) {", "-                throw new BuildException(", "-                    \"error splitting output/error streams\", eyeOhEx);", "-            }", "-        }", "-        if (errorProperty != null) {", "-            if (errorBaos == null) {", "-                errorBaos = new PropertyOutputStream(errorProperty);", "-                managingTask.log(\"Error redirected to property: \" + errorProperty,", "-                    Project.MSG_VERBOSE);", "-            }", "-            //shield it from being closed by a filtering StreamPumper", "-            OutputStream keepAliveError = new KeepAliveOutputStream(errorBaos);", "-            errorStream = (error == null || error.length == 0) ? keepAliveError", "-                : new TeeOutputStream(errorStream, keepAliveError);", "-        } else {", "-            errorBaos = null;", "-        }", "+        outStreams();", "+        errorStreams();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "db40de043e822fea8401e475517bef3c", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Redirector.java", "commitBeforeChange": "84c200de202726a539fb0434fd8032971d195a42", "commitAfterChange": "4b2db7c0ca20a020c53badab81ca6a48ccd64d59", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 24, "signatureBeforeChange": "     public synchronized void createStreams()", "signatureAfterChange": "     public synchronized void createStreams()", "diff": ["-        if ((out == null || out.length == 0) && outputProperty == null) {", "-            outputStream = new LogOutputStream(managingTask, Project.MSG_INFO);", "+        if (out != null && out.length > 0) {", "+            String logHead = new StringBuffer(\"Output \").append(", "+                ((append) ? \"appended\" : \"redirected\")).append(", "+                \" to \").toString();", "+            outputStream = foldFiles(out, logHead, Project.MSG_VERBOSE);", "+        }", "+        if (outputProperty != null) {", "+            if (baos == null) {", "+                baos = new PropertyOutputStream(outputProperty);", "+                managingTask.log(\"Output redirected to property: \"", "+                    + outputProperty, Project.MSG_VERBOSE);", "+            }", "+            //shield it from being closed by a filtering StreamPumper", "+            OutputStream keepAliveOutput = new KeepAliveOutputStream(baos);", "+            outputStream = (outputStream == null) ? keepAliveOutput", "+                : new TeeOutputStream(outputStream, keepAliveOutput);", "-            if (out != null && out.length > 0) {", "-                String logHead = new StringBuffer(\"Output \").append(", "-                    ((append) ? \"appended\" : \"redirected\")).append(", "-                    \" to \").toString();", "-                outputStream = foldFiles(out, logHead, Project.MSG_VERBOSE);", "-            }", "-", "-            if (outputProperty != null) {", "-                if (baos == null) {", "-                    baos = new PropertyOutputStream(outputProperty);", "-                    managingTask.log(\"Output redirected to property: \"", "-                        + outputProperty, Project.MSG_VERBOSE);", "-                }", "-                //shield it from being closed by a filtering StreamPumper", "-                OutputStream keepAliveOutput = new KeepAliveOutputStream(baos);", "-                if (outputStream == null) {", "-                    outputStream = keepAliveOutput;", "-                } else {", "-                    outputStream", "-                        = new TeeOutputStream(outputStream, keepAliveOutput);", "-                }", "-            } else {", "-                baos = null;", "-            }", "-", "-            errorStream = outputStream;", "+            baos = null;", "-", "-        } else if (logError || errorStream == null) {", "-            errorStream = new LogOutputStream(managingTask, Project.MSG_WARN);", "-        } else { //must be errorStream == outputStream", "+        } else if (!(logError || outputStream == null)) {", "-", "-", "+        if (alwaysLog || outputStream == null) {", "+            OutputStream outputLog", "+                = new LogOutputStream(managingTask, Project.MSG_INFO);", "+            outputStream = (outputStream == null)", "+                ? outputLog : new TeeOutputStream(outputLog, outputStream);", "+        }", "+        if (alwaysLog || errorStream == null) {", "+            OutputStream errorLog", "+                = new LogOutputStream(managingTask, Project.MSG_WARN);", "+            errorStream = (errorStream == null)", "+                ? errorLog : new TeeOutputStream(errorLog, errorStream);", "+        }"]}]}