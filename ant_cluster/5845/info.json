{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f76ff3c84c143506eded45199757a8b9", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "052dfb226bdac829f38d65fb40d8af68", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/java/org/apache/aut/vfs/provider/AbstractFileObject.java", "commitBeforeChange": "f382fa32eec7260111db0d67ae9c90dee2d6de0b", "commitAfterChange": "dfa0c6e159416ba22df942ba98e496d99d53d07f", "methodNumberBeforeChange": 24, "methodNumberAfterChange": 25, "signatureBeforeChange": "     public void delete() throws FileSystemException", "signatureAfterChange": "     public void delete( final FileSelector selector ) throws FileSystemException", "diff": ["-    public void delete() throws FileSystemException", "+    public void delete( final FileSelector selector ) throws FileSystemException", "-        // Recursively delete this file and all its children", "-        List queue = new ArrayList();", "-        Set expanded = new HashSet();", "-        queue.add( this );", "+        // Locate all the files to delete", "+        ArrayList files = new ArrayList();", "+        findFiles( selector, true, files );", "-        // Recursively delete each file", "-        // TODO - recover from errors", "-        while( queue.size() > 0 )", "+        // Delete 'em", "+        final int count = files.size();", "+        for( int i = 0; i < count; i++ )", "-            AbstractFileObject file = (AbstractFileObject)queue.get( 0 );", "+            final AbstractFileObject file = (AbstractFileObject)files.get( i );", "-            if( file.m_type == null )", "+            // If the file is a folder, make sure all its children have been deleted", "+            if( file.m_type == FileType.FOLDER && file.getChildren().length != 0 )", "-                // Shouldn't happen", "-                queue.remove( 0 );", "+                // Skip", "+                continue;", "-            else if( file.m_type == FileType.FILE )", "-            {", "-                // Delete the file", "-                file.deleteSelf();", "-                queue.remove( 0 );", "-            }", "-            else if( expanded.contains( file ) )", "-            {", "-                // Have already deleted all the children of this folder -", "-                // delete it", "-                file.deleteSelf();", "-                queue.remove( 0 );", "-            }", "-            else", "-            {", "-                // Delete the folder's children", "-                FileObject[] children = file.getChildren();", "-                for( int i = 0; i < children.length; i++ )", "-                {", "-                    FileObject child = children[ i ];", "-                    queue.add( 0, child );", "-                }", "-                expanded.add( file );", "-            }", "-        }", "-        // Update parent's child list", "-        notifyParent();", "+            // Delete the file", "+            file.deleteSelf();", "+        }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "686b313ca4fe91ac717c86b51f2f397f", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/Java.java", "commitBeforeChange": "d72589dc05c30c8cdf1537247dae3a2d52fc7db9", "commitAfterChange": "83fd4e64cd4d70c94cbe03d2a3d91d11b3556511", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "     public void execute() throws BuildException", "signatureAfterChange": "     public void execute() throws BuildException", "diff": ["-        ", "+        executeJava();", "+    }", "-            run(b.toString());"]}]}