{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f29353c02112763a5ff15a314965de0b", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5b0f485e0d63445b85470dc40c107d24", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/cvslib/CvsTagDiff.java", "commitBeforeChange": "3d6430630c7bb0f04f827ac9294306636754b9bc", "commitAfterChange": "62fa7c44feec38b3abc173b2436e3fe4c4e2c8cd", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "signatureAfterChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "diff": ["-                line = line.substring(headerLength);", "+                if (line.length() > headerLength) {", "+                    line = line.substring(headerLength);", "-                if ((index = line.indexOf(FILE_IS_NEW)) != -1) {", "-                    // it is a new file", "-                    // set the revision but not the prevrevision", "-                    String filename = line.substring(0, index);", "-                    String rev = line.substring(index + FILE_IS_NEW.length());", "+                    if ((index = line.indexOf(FILE_IS_NEW)) != -1) {", "+                        // it is a new file", "+                        // set the revision but not the prevrevision", "+                        String filename = line.substring(0, index);", "+                        String rev = line.substring(index + FILE_IS_NEW.length());", "-                    entries.addElement(entry = new CvsTagEntry(filename, rev));", "-                    log(entry.toString(), Project.MSG_VERBOSE);", "-                } else if ((index = line.indexOf(FILE_HAS_CHANGED)) != -1) {", "-                    // it is a modified file", "-                    // set the revision and the prevrevision", "-                    String filename = line.substring(0, index);", "-                    int revSeparator = line.indexOf(\" to \", index);", "-                    String prevRevision =", "-                        line.substring(index + FILE_HAS_CHANGED.length(),", "-                                       revSeparator);", "-                     // 4 is \" to \" length", "-                    String revision = line.substring(revSeparator + 4);", "+                        entries.addElement(entry = new CvsTagEntry(filename, rev));", "+                        log(entry.toString(), Project.MSG_VERBOSE);", "+                    } else if ((index = line.indexOf(FILE_HAS_CHANGED)) != -1) {", "+                        // it is a modified file", "+                        // set the revision and the prevrevision", "+                        String filename = line.substring(0, index);", "+                        int revSeparator = line.indexOf(\" to \", index);", "+                        String prevRevision =", "+                            line.substring(index + FILE_HAS_CHANGED.length(),", "+                                revSeparator);", "+                        // 4 is \" to \" length", "+                        String revision = line.substring(revSeparator + 4);", "-                    entries.addElement(entry = new CvsTagEntry(filename,", "-                                                               revision,", "-                                                               prevRevision));", "-                    log(entry.toString(), Project.MSG_VERBOSE);", "-                } else if ((index = line.indexOf(FILE_WAS_REMOVED)) != -1) {", "-                    // it is a removed file", "-                    String filename = line.substring(0, index);", "+                        entries.addElement(entry = new CvsTagEntry(filename,", "+                            revision,", "+                            prevRevision));", "+                        log(entry.toString(), Project.MSG_VERBOSE);", "+                    } else if ((index = line.indexOf(FILE_WAS_REMOVED)) != -1) {", "+                        // it is a removed file", "+                        String filename = line.substring(0, index);", "-                    entries.addElement(entry = new CvsTagEntry(filename));", "-                    log(entry.toString(), Project.MSG_VERBOSE);", "+                        entries.addElement(entry = new CvsTagEntry(filename));", "+                        log(entry.toString(), Project.MSG_VERBOSE);", "+                    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e8542db75dcc04c8dff79d47c1ec8902", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "src/main/org/apache/tools/ant/taskdefs/cvslib/CvsTagDiff.java", "commitBeforeChange": "98c94f2ed3cb2c8a28812d56f60afdeb69574c72", "commitAfterChange": "cde826c2b0d226773ff00407365ac581b3e7c9e0", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "signatureAfterChange": "     private CvsTagEntry[] parseRDiff(File tmpFile) throws BuildException", "diff": ["-            int index;", "-            CvsTagEntry entry = null;", "-                    index = line.indexOf(FILE_IS_NEW);", "-                    if (index  != -1) {", "-                        // it is a new file", "-                        // set the revision but not the prevrevision", "-                        String filename = line.substring(0, index);", "-                        String rev = null;", "-                        int indexrev = line.indexOf(REVISION, index);", "-                        if (indexrev != -1) {", "-                            rev = line.substring(indexrev + REVISION.length());", "-                        }", "-                        entry = new CvsTagEntry(filename, rev);", "-                        entries.addElement(entry);", "-                        log(entry.toString(), Project.MSG_VERBOSE);", "-                    } else if ((index = line.indexOf(FILE_HAS_CHANGED)) != -1) {", "-                        // it is a modified file", "-                        // set the revision and the prevrevision", "-                        String filename = line.substring(0, index);", "-                        int revSeparator = line.indexOf(\" to \", index);", "-                        String prevRevision =", "-                            line.substring(index + FILE_HAS_CHANGED.length(),", "-                                revSeparator);", "-                        String revision = line.substring(revSeparator + TO_STRING.length());", "-                        entry = new CvsTagEntry(filename,", "-                            revision,", "-                            prevRevision);", "-                        entries.addElement(entry);", "-                        log(entry.toString(), Project.MSG_VERBOSE);", "-                    } else if ((index = line.indexOf(FILE_WAS_REMOVED)) != -1) {", "-                        // it is a removed file", "-                        String filename = line.substring(0, index);", "-                        String rev = null;", "-                        int indexrev = line.indexOf(REVISION, index);", "-                        if (indexrev != -1) {", "-                            rev = line.substring(indexrev + REVISION.length());", "-                        }", "-                        entry = new CvsTagEntry(filename, null, rev);", "-                        entries.addElement(entry);", "-                        log(entry.toString(), Project.MSG_VERBOSE);", "-                    }", "+                    // use || in a perl like fashion", "+                    boolean processed", "+                        =  doFileIsNew(entries, line)", "+                        || doFileHasChanged(entries, line)", "+                        || doFileWasRemoved(entries, line);"]}]}