{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e7697ace63924cc131bfb4f9415c487b", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2532beef53c902d9d3bc8ea3f62200ed", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/todo/org/apache/tools/ant/taskdefs/exec/Execute.java", "commitBeforeChange": "d4ccd6348eb3f4605a09c25795d86d5ac52a3d27", "commitAfterChange": "9d030eb76b5e1039c7995b294d3366796bc1a9d6", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 12, "signatureBeforeChange": "     public int execute()         throws IOException, TaskException", "signatureAfterChange": "     public int execute()         throws IOException, TaskException", "diff": ["-", "+            final DefaultExecManager manager =", "+                new DefaultExecManager( getAntHomeDirectory() );", "+", "-", "-            final CommandLauncher launcher = getLauncher();", "-            final Process process = launcher.exec( metaData );", "-", "-            try", "-            {", "-                m_streamHandler.setProcessInputStream( process.getOutputStream() );", "-                m_streamHandler.setProcessOutputStream( process.getInputStream() );", "-                m_streamHandler.setProcessErrorStream( process.getErrorStream() );", "-            }", "-            catch( final IOException ioe )", "-            {", "-                process.destroy();", "-                throw ioe;", "-            }", "-", "-            m_streamHandler.start();", "-", "-            // add the process to the list of those to destroy if the VM exits", "-            //", "-            c_processDestroyer.add( process );", "-", "-            if( m_watchdog != null )", "-            {", "-                m_watchdog.start( process );", "-            }", "-            try", "-            {", "-                process.waitFor();", "-            }", "-            catch( final InterruptedException ie )", "-            {", "-                //shu\\ould never happen", "-            }", "-", "-            // remove the process to the list of those to destroy if the VM exits", "-            //", "-            c_processDestroyer.remove( process );", "-", "-            if( m_watchdog != null )", "-            {", "-                m_watchdog.stop();", "-            }", "-            m_streamHandler.stop();", "-            if( m_watchdog != null )", "-            {", "-                m_watchdog.checkException();", "-            }", "-            return process.exitValue();", "+            return manager.execute( metaData, null, m_output, m_error, m_timeout );", "-    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2665671105b16da586618405ec045702", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/main/org/apache/tools/ant/taskdefs/exec/Execute.java", "commitBeforeChange": "d4ccd6348eb3f4605a09c25795d86d5ac52a3d27", "commitAfterChange": "9d030eb76b5e1039c7995b294d3366796bc1a9d6", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 12, "signatureBeforeChange": "     public int execute()         throws IOException, TaskException", "signatureAfterChange": "     public int execute()         throws IOException, TaskException", "diff": ["-", "+            final DefaultExecManager manager =", "+                new DefaultExecManager( getAntHomeDirectory() );", "+", "-", "-            final CommandLauncher launcher = getLauncher();", "-            final Process process = launcher.exec( metaData );", "-", "-            try", "-            {", "-                m_streamHandler.setProcessInputStream( process.getOutputStream() );", "-                m_streamHandler.setProcessOutputStream( process.getInputStream() );", "-                m_streamHandler.setProcessErrorStream( process.getErrorStream() );", "-            }", "-            catch( final IOException ioe )", "-            {", "-                process.destroy();", "-                throw ioe;", "-            }", "-", "-            m_streamHandler.start();", "-", "-            // add the process to the list of those to destroy if the VM exits", "-            //", "-            c_processDestroyer.add( process );", "-", "-            if( m_watchdog != null )", "-            {", "-                m_watchdog.start( process );", "-            }", "-            try", "-            {", "-                process.waitFor();", "-            }", "-            catch( final InterruptedException ie )", "-            {", "-                //shu\\ould never happen", "-            }", "-", "-            // remove the process to the list of those to destroy if the VM exits", "-            //", "-            c_processDestroyer.remove( process );", "-", "-            if( m_watchdog != null )", "-            {", "-                m_watchdog.stop();", "-            }", "-            m_streamHandler.stop();", "-            if( m_watchdog != null )", "-            {", "-                m_watchdog.checkException();", "-            }", "-            return process.exitValue();", "+            return manager.execute( metaData, null, m_output, m_error, m_timeout );", "-    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7f8b9f6d0ea07fa9c9f1f5cf9e906fc0", "repository": "https://git-wip-us.apache.org/repos/asf/ant.git", "fileName": "proposal/myrmidon/src/java/org/apache/myrmidon/framework/exec/impl/DefaultExecManager.java", "commitBeforeChange": "2b4f4a5945fb02365d506881aae29c48e99e3f4c", "commitAfterChange": "f2e2178170c8f908c5eec6232f6c4c91f98c0b73", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "     public int execute( final ExecMetaData metaData,                         final InputStream input,                         final OutputStream output,                         final OutputStream error,                         final long timeout )         throws IOException, ExecException", "signatureAfterChange": "     public int execute( final ExecMetaData execMetaData,                         final ExecOutputHandler handler,                         long timeout )         throws IOException, ExecException", "diff": ["+    public int execute( final ExecMetaData execMetaData,", "+                        final ExecOutputHandler handler,", "+                        long timeout )", "+        throws IOException, ExecException /*TimeoutException*/", "+    {", "+        final LogOutputStream output = new LogOutputStream( handler, false );", "+        final LogOutputStream error = new LogOutputStream( handler, true );", "+        return execute( execMetaData, null, output, error, timeout );", "+    }"]}]}