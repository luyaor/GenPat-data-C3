{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "cf0175a424b0b1020f45d96b40fb8060", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "98879da0cb549b6e8d4cea4817424e2a", "repository": "https://github.com/checkstyle/checkstyle.git", "fileName": "src/checkstyle/com/puppycrawl/tools/checkstyle/PropertyCacheFile.java", "commitBeforeChange": "0e8b48e1435688a11a1b756c2690f365164e0dda", "commitAfterChange": "ec1e3e834918a32d63025d60175189b3437769d7", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "     PropertyCacheFile(String aFileName)", "signatureAfterChange": "     PropertyCacheFile(Configuration aCurrentConfig)", "diff": ["-    PropertyCacheFile(String aFileName)", "+    PropertyCacheFile(Configuration aCurrentConfig)", "-        if (aFileName != null) {", "+        final String fileName = aCurrentConfig.getCacheFile();", "+        if (fileName != null) {", "-                mDetails.load(new FileInputStream(aFileName));", "+                mDetails.load(new FileInputStream(fileName));", "+                String cachedConfigHash = mDetails.getProperty(CONFIG_HASH_KEY);", "+                String currentConfigHash = getConfigHashCode(aCurrentConfig);", "+                if (cachedConfigHash == null ||", "+                    !cachedConfigHash.equals(currentConfigHash))", "+                {", "+                    // Detected configuration change - clear cache", "+                    mDetails.clear();", "+                    mDetails.put(CONFIG_HASH_KEY, currentConfigHash);", "+                }", "-        mDetailsFile = (setInActive) ? null : aFileName;", "+        mDetailsFile = (setInActive) ? null : fileName;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e10eac9bb483fd5773928f1b201d2a9c", "repository": "https://github.com/checkstyle/checkstyle.git", "fileName": "src/main/java/com/puppycrawl/tools/checkstyle/PropertyCacheFile.java", "commitBeforeChange": "58219b9bd31c8f7fbc4f4bba0eeb811851f276b3", "commitAfterChange": "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "     PropertyCacheFile(Configuration aCurrentConfig, String aFileName)", "signatureAfterChange": "     PropertyCacheFile(Configuration currentConfig, String fileName)", "diff": ["-    PropertyCacheFile(Configuration aCurrentConfig, String aFileName)", "+    PropertyCacheFile(Configuration currentConfig, String fileName)", "-        if (aFileName != null) {", "+        if (fileName != null) {", "-            final String currentConfigHash = getConfigHashCode(aCurrentConfig);", "+            final String currentConfigHash = getConfigHashCode(currentConfig);", "-                inStream = new FileInputStream(aFileName);", "-                mDetails.load(inStream);", "+                inStream = new FileInputStream(fileName);", "+                details.load(inStream);", "-                    mDetails.getProperty(CONFIG_HASH_KEY);", "+                    details.getProperty(CONFIG_HASH_KEY);", "-                    mDetails.clear();", "-                    mDetails.put(CONFIG_HASH_KEY, currentConfigHash);", "+                    details.clear();", "+                    details.put(CONFIG_HASH_KEY, currentConfigHash);", "-                mDetails.put(CONFIG_HASH_KEY, currentConfigHash);", "+                details.put(CONFIG_HASH_KEY, currentConfigHash);", "-        mDetailsFile = (setInActive) ? null : aFileName;", "+        detailsFile = (setInActive) ? null : fileName;"]}]}