{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6cd81260a56e082676d50ed3a8bd7a96", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1dadd0d9dc809977f513faeede3c79e3", "repository": "https://github.com/checkstyle/checkstyle.git", "fileName": "src/main/java/com/puppycrawl/tools/checkstyle/Main.java", "commitBeforeChange": "d6272b70eb5ad61fd8ab34091e970c50b1f67386", "commitAfterChange": "1a2c318e22a0b2b22ccc76019217c0892fe2d59b", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 4, "signatureBeforeChange": "     private static void processCommandLine(CommandLine line)             throws CheckstyleException, UnsupportedEncodingException", "signatureAfterChange": "     private static CliOptions convertCliToPojo(CommandLine cmdLine)", "diff": ["+     */", "+    private static CliOptions convertCliToPojo(CommandLine cmdLine)", "+    {", "+        final CliOptions conf = new CliOptions();", "+        conf.format = cmdLine.getOptionValue(\"f\");", "+        if (conf.format == null) {", "+            conf.format = \"plain\";", "+        }", "+        conf.outputLocation = cmdLine.getOptionValue(\"o\");", "+        conf.configLocation = cmdLine.getOptionValue(\"c\");", "+        conf.propertiesLocation = cmdLine.getOptionValue(\"p\");", "+        conf.files = getFilesToProcess(cmdLine.getArgs());", "+        return conf;", "+    }", "-    private static void processCommandLine(CommandLine line)", "-            throws CheckstyleException, UnsupportedEncodingException", "-        // show version and exit", "-        if (line.hasOption(\"v\")) {", "-            System.out.println(\"Checkstyle version: \"", "-                    + Main.class.getPackage().getImplementationVersion());", "-            return;", "-        }", "-", "-        // ensure a configuration file is specified", "-        if (!line.hasOption(\"c\")) {", "-            System.out.println(\"Must specify a config XML file.\");", "-            return;", "-        }", "-", "-                line.hasOption(\"p\")", "-                        ? loadProperties(new File(line.getOptionValue(\"p\")))", "-        final String configFormat = line.getOptionValue(\"c\");", "-        final Configuration config = loadConfig(configFormat, props);", "-        // setup the output stream", "-        OutputStream out = null;", "-        boolean closeOut = false;", "-        if (line.hasOption(\"o\")) {", "-            final String fname = line.getOptionValue(\"o\");", "-            try {", "-                out = new FileOutputStream(fname);", "-                closeOut = true;", "-            }", "-            catch (final FileNotFoundException e) {", "-                throw new CheckstyleException(String.format(", "-                        \"Could not find file '%s': %s \", fname, e.getMessage()));", "-            }", "-        }", "-        else {", "-            out = System.out;", "-            closeOut = false;", "-        }", "-        final String format = line.hasOption(\"f\") ? line.getOptionValue(\"f\") : \"plain\";", "-        final AuditListener listener = createListener(format, out, closeOut);", "-        final List<File> files = getFilesToProcess(line.getArgs());", "-        if (files.isEmpty()) {", "-            throw new CheckstyleException(\"Must specify files to process, found 0.\");", "-        }", "-        final Checker checker = createChecker(config, listener);", "-        final int errorCounter = checker.process(files);", "-        checker.destroy();", "-        if (errorCounter != 0) {", "-            throw new CheckstyleException(String.format(", "-                    \"Checkstyle ends with %d errors.\", errorCounter));", "-        }", "-    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3a18d1a5ddcc477dfc67069dfb54e9db", "repository": "https://github.com/checkstyle/checkstyle.git", "fileName": "src/main/java/com/puppycrawl/tools/checkstyle/Main.java", "commitBeforeChange": "e380ac8df92c051d843d380d5e8a6fe90af9df9d", "commitAfterChange": "ab2f93f9bf61816d84154e636d32c81c05854e24", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 0, "signatureBeforeChange": "     public static void main(String[] args) throws UnsupportedEncodingException", "signatureAfterChange": "     public static void main(String[] args) throws UnsupportedEncodingException", "diff": ["-        // parse the parameters", "-        final CommandLineParser clp = new PosixParser();", "-        CommandLine line = null;", "+        boolean parseResult = false;", "-            line = clp.parse(OPTS, args);", "+            processCommandLine(parseCli(args));", "+            parseResult = true;", "-            usage();", "+            System.err.println(\"Could not parse parameters: \" + e.getMessage());", "+            e.printStackTrace();", "-        assert line != null;", "+        catch (final Exception e) {", "+            System.err.println(\"Could not execute Checkstyle: \" + e.getMessage());", "+            e.printStackTrace();", "+        }", "+        finally {", "+            if (!parseResult) {", "+                usage();", "+            }", "+            // provide proper exit code based on results.", "+            System.exit(parseResult ? 0 : 1);", "+        }", "+    }", "-            System.exit(0);", "-            line.hasOption(\"p\")", "-                ? loadProperties(new File(line.getOptionValue(\"p\")))", "-                : System.getProperties();", "-", "-        // ensure a config file is specified", "-        if (!line.hasOption(\"c\")) {", "-            System.out.println(\"Must specify a config XML file.\");", "-            usage();", "-        }", "-", "-        final Configuration config = loadConfig(line, props);", "-                System.out.println(\"Could not find file: '\" + fname + \"'\");", "-                System.exit(1);", "-        final AuditListener listener = createListener(line, out, closeOut);", "-        final List<File> files = getFilesToProcess(line);", "-        final Checker c = createChecker(config, listener);", "-        final int numErrs = c.process(files);", "-        c.destroy();", "-        System.exit(numErrs);"]}]}