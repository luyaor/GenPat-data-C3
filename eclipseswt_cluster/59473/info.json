{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bea5f0aed86babff716dc9cd039e6601", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3b4734920f6668a1b074d3b168ab0115", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/common/org/eclipse/swt/browser/Mozilla.java", "commitBeforeChange": "d8955edbe9f5c9464b222d0331748137a5a534b7", "commitAfterChange": "b533c1ac7667bcd66286ef15cde6bafc62a4cf97", "methodNumberBeforeChange": 117, "methodNumberAfterChange": 117, "signatureBeforeChange": "  @Override public boolean execute (String script)", "signatureAfterChange": "  @Override public boolean execute (String script)", "diff": ["-\tif (!IsPre_1_9) {", "+\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR1_9)) {", "-\t\tboolean isXULRunner190x = false;", "-\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIScriptSecurityManager.NS_ISCRIPTSECURITYMANAGER_24_IID, result);", "-\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\tresult[0] = 0;", "-\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIScriptSecurityManager.NS_ISCRIPTSECURITYMANAGER_10_IID, result);", "-\t\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\t\tresult[0] = 0;", "-\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIScriptSecurityManager.NS_ISCRIPTSECURITYMANAGER_191_IID, result);", "-\t\t\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIScriptSecurityManager.NS_ISCRIPTSECURITYMANAGER_IID, result);", "-\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-\t\t\t\t\t\tisXULRunner190x = true;", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "+\t\trc = serviceManager.GetServiceByContractID (aContractID, IIDStore.GetIID (nsIScriptSecurityManager.class), result);", "-\t\t\t\trc = webBrowser.QueryInterface (nsIInterfaceRequestor.NS_IINTERFACEREQUESTOR_IID, result);", "+\t\t\t\trc = webBrowser.QueryInterface (IIDStore.GetIID (nsIInterfaceRequestor.class), result);", "-\t\t\t\trc = interfaceRequestor.GetInterface (XPCOM.NS_ISCRIPTGLOBALOBJECT_24_IID, result);", "-\t\t\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\trc = interfaceRequestor.GetInterface (XPCOM.NS_ISCRIPTGLOBALOBJECT_10_IID, result);", "-\t\t\t\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\trc = interfaceRequestor.GetInterface (XPCOM.NS_ISCRIPTGLOBALOBJECT_1_9_2_IID, result);", "-\t\t\t\t\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\trc = interfaceRequestor.GetInterface (XPCOM.NS_ISCRIPTGLOBALOBJECT_1_9_IID, result);", "-\t\t\t\t\t\t}", "-\t\t\t\t\t}", "-\t\t\t\t}", "+\t\t\t\trc = interfaceRequestor.GetInterface (IIDStore.GetIID (nsIScriptGlobalObject.class), result);", "-\t\t\t\t\tif (IsPre_24) {", "-\t\t\t\t\t\trc = (int/*64*/)XPCOM.nsIScriptGlobalObject_EnsureScriptEnvironment (scriptGlobalObject, 2); /* nsIProgrammingLanguage.JAVASCRIPT */", "-\t\t\t\t\t} else {", "+\t\t\t\t\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR24)) { /* >= 24.x */", "+\t\t\t\t\t} else {", "+\t\t\t\t\t\trc = (int/*64*/)XPCOM.nsIScriptGlobalObject_EnsureScriptEnvironment (scriptGlobalObject, 2); /* nsIProgrammingLanguage.JAVASCRIPT */", "-\t\t\t\t\t\tif (IsPre_24) {", "-\t\t\t\t\t\t\tscriptContext = XPCOM.nsIScriptGlobalObject_GetScriptContext (scriptGlobalObject, 2); /* nsIProgrammingLanguage.JAVASCRIPT */", "-\t\t\t\t\t\t} else {", "+\t\t\t\t\t\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR24)) { /* >= 24.x */", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\tscriptContext = XPCOM.nsIScriptGlobalObject_GetScriptContext (scriptGlobalObject, 2); /* nsIProgrammingLanguage.JAVASCRIPT */", "-\t\t\t\t\t\t\trc = supports.QueryInterface (XPCOM.NS_ISCRIPTCONTEXT_24_IID, result);", "-\t\t\t\t\t\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\t\trc = supports.QueryInterface (XPCOM.NS_ISCRIPTCONTEXT_10_IID, result);", "-\t\t\t\t\t\t\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\t\t\trc = supports.QueryInterface (XPCOM.NS_ISCRIPTCONTEXT_1_9_2_IID, result);", "-\t\t\t\t\t\t\t\t\tif (!(rc == XPCOM.NS_OK && result[0] != 0)) {", "-\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\t\t\t\trc = supports.QueryInterface (XPCOM.NS_ISCRIPTCONTEXT_1_9_IID, result);", "-\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t}", "-", "+\t\t\t\t\t\t\trc = supports.QueryInterface (IIDStore.GetIID (nsIScriptContext.class), result);", "-\t\t\t\t\t\t\t\tif (IsPre_24) {", "-\t\t\t\t\t\t\t\t\tjsContext = XPCOM.nsIScriptContext_GetNativeContext (scriptContext);", "-\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR24)) { /* >= 24.x */", "+\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\tjsContext = XPCOM.nsIScriptContext_GetNativeContext (scriptContext);", "-\t\t\t\t\t\t\t\t\tif (IsPre_24) {", "-\t\t\t\t\t\t\t\t\t\tglobalJSObject = XPCOM.JS_GetGlobalObject (jsLibPath, jsContext);", "-\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR24)) { /* >= 24.x */", "+\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\tglobalJSObject = XPCOM.JS_GetGlobalObject (jsLibPath, jsContext);", "-\t\t\t\t\t\t\t\t\t\tif (IsPre_24) {", "-\t\t\t\t\t\t\t\t\t\t\taContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_CONTEXTSTACK_CONTRACTID, true);", "-\t\t\t\t\t\t\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIJSContextStack.NS_IJSCONTEXTSTACK_IID, result);", "-\t\t\t\t\t\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-\t\t\t\t\t\t\t\t\t\t\t\tnsIJSContextStack stack = new nsIJSContextStack (result[0]);", "-\t\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Push (jsContext);", "-\t\t\t\t\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "-\t\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\t\t\t\tboolean success;", "-\t\t\t\t\t\t\t\t\t\t\t\t\tif (isXULRunner190x) {", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess = XPCOM.JS_EvaluateUCScriptForPrincipals (jsLibPath, jsContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, result) != 0;", "-\t\t\t\t\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess = XPCOM.JS_EvaluateUCScriptForPrincipals191 (jsLibPath, jsContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, 0) != 0;", "-\t\t\t\t\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Pop (result);", "-\t\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "-\t\t\t\t\t\t\t\t\t\t\t\t\tnew nsISupports (scriptGlobalObject).Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t\treturn success;", "-\t\t\t\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR24)) { /* >= 24.x */", "+\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\t/* 1.9.x - 10.x */", "+\t\t\t\t\t\t\t\t\t\taContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_CONTEXTSTACK_CONTRACTID, true);", "+\t\t\t\t\t\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, IIDStore.GetIID (nsIJSContextStack.class), result);", "+\t\t\t\t\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "+\t\t\t\t\t\t\t\t\t\t\tnsIJSContextStack stack = new nsIJSContextStack (result[0]);", "+\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "+\t\t\t\t\t\t\t\t\t\t\trc = stack.Push (jsContext);", "+\t\t\t\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "+\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\t\t\tboolean success;", "+\t\t\t\t\t\t\t\t\t\t\t\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR1_9, true)) {", "+\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess = XPCOM.JS_EvaluateUCScriptForPrincipals (jsLibPath, jsContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, result) != 0;", "+\t\t\t\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess = XPCOM.JS_EvaluateUCScriptForPrincipals191 (jsLibPath, jsContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, 0) != 0;", "+\t\t\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "+\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Pop (result);", "+\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "+\t\t\t\t\t\t\t\t\t\t\t\tnew nsISupports (scriptGlobalObject).Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\treturn success;", "+\t\t\t\t\t\t\t\t\t\t\t}", "-\tint rc = webBrowser.QueryInterface (nsIWebNavigation.NS_IWEBNAVIGATION_24_IID, result);", "-\tif (rc != XPCOM.NS_OK) {", "-\t\trc = webBrowser.QueryInterface (nsIWebNavigation.NS_IWEBNAVIGATION_IID, result);", "-\t}", "+\tint rc = webBrowser.QueryInterface (IIDStore.GetIID (nsIWebNavigation.class), result);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2dca84c250ef211039c5f677cc100ea8", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/common/org/eclipse/swt/browser/Mozilla.java", "commitBeforeChange": "c0e8b19693a09635ee2e2549501800c6e492284d", "commitAfterChange": "a44261ef7ad91b3d8ffc177d976044172a616213", "methodNumberBeforeChange": 96, "methodNumberAfterChange": 96, "signatureBeforeChange": "  public boolean execute (String script)", "signatureAfterChange": "  public boolean execute (String script)", "diff": ["-\t\t\t\t\t\tint /*long*/ globalJSObject = XPCOM.nsIScriptGlobalObject_GetScriptGlobal (scriptGlobalObject, 2); /* nsIProgrammingLanguage.JAVASCRIPT */", "-\t\t\t\t\t\tif (scriptContext != 0 && globalJSObject != 0) {", "+\t\t\t\t\t\tif (scriptContext != 0) {", "-\t\t\t\t\t\t\t\t\t\taContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_CONTEXTSTACK_CONTRACTID, true);", "-\t\t\t\t\t\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIJSContextStack.NS_IJSCONTEXTSTACK_IID, result);", "-\t\t\t\t\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-\t\t\t\t\t\t\t\t\t\t\tnsIJSContextStack stack = new nsIJSContextStack (result[0]);", "-\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\t\t\t\t\trc = stack.Push (nativeContext);", "-\t\t\t\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "-\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\t\t\tboolean success = XPCOM.JS_EvaluateUCScriptForPrincipals (pathBytes_JSEvaluateUCScriptForPrincipals, nativeContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, result) != 0;", "+\t\t\t\t\t\t\t\t\t\tint /*long*/ globalJSObject = XPCOM.JS_GetGlobalObject (pathBytes_JSEvaluateUCScriptForPrincipals, nativeContext);", "+\t\t\t\t\t\t\t\t\t\tif (globalJSObject != 0) {", "+\t\t\t\t\t\t\t\t\t\t\taContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_CONTEXTSTACK_CONTRACTID, true);", "+\t\t\t\t\t\t\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIJSContextStack.NS_IJSCONTEXTSTACK_IID, result);", "+\t\t\t\t\t\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "+\t\t\t\t\t\t\t\t\t\t\t\tnsIJSContextStack stack = new nsIJSContextStack (result[0]);", "-\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Pop (result);", "-\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "-\t\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\treturn success;", "+\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Push (nativeContext);", "+\t\t\t\t\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "+\t\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\t\t\t\tboolean success = XPCOM.JS_EvaluateUCScriptForPrincipals (pathBytes_JSEvaluateUCScriptForPrincipals, nativeContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, result) != 0;", "+\t\t\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "+\t\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Pop (result);", "+\t\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "+\t\t\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t\treturn success;", "+\t\t\t\t\t\t\t\t\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dd56425702ebc9614fb0af858c664461", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/common/org/eclipse/swt/browser/Mozilla.java", "commitBeforeChange": "157722548e682439771f1d4f20d885a665802b74", "commitAfterChange": "0f03747d68de6662ba2bf9fd3af2d701bd2c1427", "methodNumberBeforeChange": 117, "methodNumberAfterChange": 117, "signatureBeforeChange": "  public boolean execute (String script)", "signatureAfterChange": "  public boolean execute (String script)", "diff": ["+\t\t\t\t\t\t\t\t\tlong /*int*/ principals = 0;", "-\t\t\t\t\t\t\t\t\t\tlong /*int*/ principals = result[0];", "+\t\t\t\t\t\t\t\t\t\tprincipals = result[0];", "-", "-\t\t\t\t\t\t\t\t\t\tbyte[] jsLibPath = getJSLibPathBytes ();", "-\t\t\t\t\t\t\t\t\t\tlong /*int*/ globalJSObject = XPCOM.JS_GetGlobalObject (jsLibPath, nativeContext);", "-\t\t\t\t\t\t\t\t\t\tif (globalJSObject != 0) {", "-\t\t\t\t\t\t\t\t\t\t\taContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_CONTEXTSTACK_CONTRACTID, true);", "-\t\t\t\t\t\t\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIJSContextStack.NS_IJSCONTEXTSTACK_IID, result);", "-\t\t\t\t\t\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-\t\t\t\t\t\t\t\t\t\t\t\tnsIJSContextStack stack = new nsIJSContextStack (result[0]);", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\tbyte[] jsLibPath = getJSLibPathBytes ();", "+\t\t\t\t\t\t\t\t\tlong /*int*/ globalJSObject = XPCOM.JS_GetGlobalObject (jsLibPath, nativeContext);", "+\t\t\t\t\t\t\t\t\tif (globalJSObject != 0) {", "+\t\t\t\t\t\t\t\t\t\taContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_CONTEXTSTACK_CONTRACTID, true);", "+\t\t\t\t\t\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIJSContextStack.NS_IJSCONTEXTSTACK_IID, result);", "+\t\t\t\t\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "+\t\t\t\t\t\t\t\t\t\t\tnsIJSContextStack stack = new nsIJSContextStack (result[0]);", "+\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "+\t\t\t\t\t\t\t\t\t\t\trc = stack.Push (nativeContext);", "+\t\t\t\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "+\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\t\t\tboolean success = XPCOM.JS_EvaluateUCScriptForPrincipals (jsLibPath, nativeContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, isXULRunner190x ? result : null) != 0;", "-\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Push (nativeContext);", "-\t\t\t\t\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "-\t\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\t\t\t\tboolean success = XPCOM.JS_EvaluateUCScriptForPrincipals (jsLibPath, nativeContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, isXULRunner190x ? result : null) != 0;", "-\t\t\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Pop (result);", "-\t\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "-\t\t\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t\treturn success;", "-\t\t\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Pop (result);", "+\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "+\t\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\treturn success;", "-\t\t\t\t\t\t\t", "-//\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-////\t\t\t\t\tnew nsISupports (result[0]).Release ();", "-//\t\t\t\t\t\tresult[0] = 0;", "-//", "-//\t\t\t\t\t\tnsEmbedString scriptString = new nsEmbedString(script);", "-//\t\t\t\t\t\tbyte[] urlbytes = MozillaDelegate.wcsToMbcs (null, getUrl (), true);", "-//", "-//\t\t\t\t\t\tboolean aIsUndefined [] = new boolean /*long*/[1];", "-//\t\t\t\t\t\tboolean success = XPCOM.nsIScriptContext_EvaluateStringWithValue (scriptContext, scriptString.getAddress(), 0, principal.getAddress(), urlbytes, 0, 150, result, aIsUndefined) == XPCOM.NS_OK;", "-//\t\t\t\t\t\t", "-//\t\t\t\t\t\tSystem.out.println(\"script executed \" + success);", "-//\t\t\t\t\t\t// should principals be Release()d too?", "-//\t\t\t\t\t\tprincipal.Release ();", "-//\t\t\t\t\t\tserviceManager.Release ();", "-//\t\t\t\t\t\treturn success;", "-//\t\t\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "59d6048a2025139f2c4a767eb830b583", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/common/org/eclipse/swt/browser/Mozilla.java", "commitBeforeChange": "a1d6e8a9f1641432384d0052540811bff2f7cabd", "commitAfterChange": "089765c48162c4c25a5c8d99d0ac366ef636fc6a", "methodNumberBeforeChange": 117, "methodNumberAfterChange": 117, "signatureBeforeChange": "  public boolean execute (String script)", "signatureAfterChange": "  public boolean execute (String script)", "diff": ["-\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIScriptSecurityManager.NS_ISCRIPTSECURITYMANAGER_17_IID, result);", "+\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIScriptSecurityManager.NS_ISCRIPTSECURITYMANAGER_24_IID, result);", "-\t\t\t\trc = interfaceRequestor.GetInterface (XPCOM.NS_ISCRIPTGLOBALOBJECT_17_IID, result);", "+\t\t\t\trc = interfaceRequestor.GetInterface (XPCOM.NS_ISCRIPTGLOBALOBJECT_24_IID, result);", "-\t\t\t\t\tif (IsPre_17) {", "+\t\t\t\t\tif (IsPre_24) {", "-\t\t\t\t\t\trc = (int/*64*/)XPCOM.nsIScriptGlobalObject17_EnsureScriptEnvironment (scriptGlobalObject);", "+\t\t\t\t\t\trc = (int/*64*/)XPCOM.nsIScriptGlobalObject24_EnsureScriptEnvironment (scriptGlobalObject);", "-\t\t\t\t\t\tif (IsPre_17) {", "+\t\t\t\t\t\tif (IsPre_24) {", "-\t\t\t\t\t\t\tscriptContext = XPCOM.nsIScriptGlobalObject17_GetScriptContext (scriptGlobalObject);", "+\t\t\t\t\t\t\tscriptContext = XPCOM.nsIScriptGlobalObject24_GetScriptContext (scriptGlobalObject);", "-\t\t\t\t\t\tnew nsISupports (scriptGlobalObject).Release ();", "-\t\t\t\t\t\t\trc = supports.QueryInterface (XPCOM.NS_ISCRIPTCONTEXT_17_IID, result);", "+\t\t\t\t\t\t\trc = supports.QueryInterface (XPCOM.NS_ISCRIPTCONTEXT_24_IID, result);", "-\t\t\t\t\t\t\t\tif (IsPre_17) {", "+\t\t\t\t\t\t\t\tif (IsPre_24) {", "-\t\t\t\t\t\t\t\t\tjsContext = XPCOM.nsIScriptContext17_GetNativeContext (scriptContext);", "+\t\t\t\t\t\t\t\t\tjsContext = XPCOM.nsIScriptContext24_GetNativeContext (scriptContext);", "-\t\t\t\t\t\t\t\t\tlong /*int*/ globalJSObject = XPCOM.JS_GetGlobalObject (jsLibPath, jsContext);", "+\t\t\t\t\t\t\t\t\tlong /*int*/ globalJSObject;", "+\t\t\t\t\t\t\t\t\tif (IsPre_24) {", "+\t\t\t\t\t\t\t\t\t\tglobalJSObject = XPCOM.JS_GetGlobalObject (jsLibPath, jsContext);", "+\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\tglobalJSObject = XPCOM.nsIScriptGlobalObject24_GetGlobalJSObject (scriptGlobalObject);", "+\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\t\taContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_CONTEXTSTACK_CONTRACTID, true);", "-\t\t\t\t\t\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIJSContextStack.NS_IJSCONTEXTSTACK_IID, result);", "-\t\t\t\t\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-\t\t\t\t\t\t\t\t\t\t\tnsIJSContextStack stack = new nsIJSContextStack (result[0]);", "-\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "-\t\t\t\t\t\t\t\t\t\t\trc = stack.Push (jsContext);", "-\t\t\t\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "-\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\t\t\tboolean success = XPCOM.JS_EvaluateUCScriptForPrincipals (jsLibPath, jsContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, isXULRunner190x ? result : null) != 0;", "+\t\t\t\t\t\t\t\t\t\tif (IsPre_24) {", "+\t\t\t\t\t\t\t\t\t\t\taContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_CONTEXTSTACK_CONTRACTID, true);", "+\t\t\t\t\t\t\t\t\t\t\trc = serviceManager.GetServiceByContractID (aContractID, nsIJSContextStack.NS_IJSCONTEXTSTACK_IID, result);", "+\t\t\t\t\t\t\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "+\t\t\t\t\t\t\t\t\t\t\t\tnsIJSContextStack stack = new nsIJSContextStack (result[0]);", "-\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Pop (result);", "-\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "-\t\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "-\t\t\t\t\t\t\t\t\t\t\t\treturn success;", "+\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Push (jsContext);", "+\t\t\t\t\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "+\t\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\t\t\t\tboolean success = XPCOM.JS_EvaluateUCScriptForPrincipals (jsLibPath, jsContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, !isXULRunner190x ? result : null) != 0;", "+\t\t\t\t\t\t\t\t\t\t\t\t\tresult[0] = 0;", "+\t\t\t\t\t\t\t\t\t\t\t\t\trc = stack.Pop (result);", "+\t\t\t\t\t\t\t\t\t\t\t\t\tstack.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "+\t\t\t\t\t\t\t\t\t\t\t\t\tnew nsISupports (scriptGlobalObject).Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "+\t\t\t\t\t\t\t\t\t\t\t\t\treturn success;", "+\t\t\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\t\tboolean success = XPCOM.JS_EvaluateUCScriptForPrincipals24 (jsLibPath, jsContext, globalJSObject, principals, scriptChars, length, urlbytes, 0, result) != 0;", "+\t\t\t\t\t\t\t\t\t\t\tnew nsISupports (scriptGlobalObject).Release ();", "+\t\t\t\t\t\t\t\t\t\t\t// should principals be Release()d too?", "+\t\t\t\t\t\t\t\t\t\t\tprincipal.Release ();", "+\t\t\t\t\t\t\t\t\t\t\tserviceManager.Release ();", "+\t\t\t\t\t\t\t\t\t\t\treturn success;", "+\t\t\t\t\tnew nsISupports (scriptGlobalObject).Release ();", "-\tint rc = webBrowser.QueryInterface (nsIWebNavigation.NS_IWEBNAVIGATION_IID, result);", "+\tint rc = webBrowser.QueryInterface (nsIWebNavigation.NS_IWEBNAVIGATION_24_IID, result);", "+\tif (rc != XPCOM.NS_OK) {", "+\t\trc = webBrowser.QueryInterface (nsIWebNavigation.NS_IWEBNAVIGATION_IID, result);", "+\t}"]}], "num": 59473}