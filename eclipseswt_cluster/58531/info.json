{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "cc09eb4e22adebc5c707261defd3ce3c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c6e869a0c69faf896ece23d23e1e0fdd", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "0ec16a191637037ae868aa23c8c55cf2d8a64f40", "commitAfterChange": "d78a1f304fc5886faf978adcf843b66da4334afd", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 22, "signatureBeforeChange": " public TreeItem[] getSelection ()", "signatureAfterChange": " public TreeItem[] getSelection ()", "diff": ["-\tTreeItem[] answer;", "-\t\t/*", "-\t\t * Multi-selection case", "-\t\t */", "-\t\tselSize = 0;", "-\t\tselIndices = new int[items.length];", "-\t\tint selection = OS.gtk_tree_view_get_selection(handle);", "-\t\tOS.gtk_tree_selection_selected_foreach(selection, getDisplay().selectionIterProc, handle);", "-\t\tanswer = new TreeItem[selSize];", "-\t\tfor (int i=0; i<selSize; i++) answer[i] = items[selIndices[i]];", "+\t\tDisplay display = getDisplay ();", "+\t\tdisplay.treeSelectionLength  = 0;", "+\t\tdisplay.treeSelection = new int [items.length];", "+\t\tint selection = OS.gtk_tree_view_get_selection (handle);", "+\t\tOS.gtk_tree_selection_selected_foreach (selection, display.treeSelectionProc, handle);", "+\t\tTreeItem [] result = new TreeItem [display.treeSelectionLength];", "+\t\tfor (int i=0; i<result.length; i++) result [i] = items [display.treeSelection [i]];", "+\t\treturn result;", "-\t\t/*", "-\t\t * Single-selection case", "-\t\t */", "-\t\tint iter = OS.g_malloc(OS.GtkTreeIter_sizeof());", "-\t\tint selection = OS.gtk_tree_view_get_selection(handle);", "-\t\tboolean hasSelection = OS.gtk_tree_selection_get_selected(selection, null, iter);", "+\t\tint iter = OS.g_malloc (OS.GtkTreeIter_sizeof ());", "+\t\tint selection = OS.gtk_tree_view_get_selection (handle);", "+\t\tboolean hasSelection = OS.gtk_tree_selection_get_selected (selection, null, iter);", "+\t\tTreeItem [] result;", "-\t\t\tint[] index = new int[1];", "-\t\t\tOS.gtk_tree_model_get(modelHandle, iter, 4, index, -1);", "-\t\t\tanswer = new TreeItem[1];", "-\t\t\tanswer[0] = items[index[0]];", "+\t\t\tint [] index = new int [1];", "+\t\t\tOS.gtk_tree_model_get (modelHandle, iter, 4, index, -1);", "+\t\t\tresult = new TreeItem []{items [index [0]]};", "-\t\t\tanswer = new TreeItem[0];", "+\t\t\tresult = new TreeItem [0];", "-\t\tOS.g_free(iter);", "+\t\tOS.g_free (iter);", "+\t\treturn result;", "-\treturn answer;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8ced54e55bbf701de24af4929b8259b3", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "08ed4d34906d3cb004511badd9a3286f04d40b7a", "commitAfterChange": "3587c6fb9068182d41169c6c886f0d5faa0219e6", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 18, "signatureBeforeChange": " public TreeItem[] getSelection ()", "signatureAfterChange": " public TreeItem[] getSelection ()", "diff": ["-\tint selection = OS.GTK_CLIST_SELECTION (handle);", "-\tif (selection == 0) return new TreeItem [0];", "-\tint length = OS.g_list_length (selection);", "-\tTreeItem [] result = new TreeItem [length];", "-\tfor (int i=0; i<length; i++) {", "-\t\tint node = OS.g_list_nth_data (selection, i);", "-\t\tint index = OS.gtk_ctree_node_get_row_data (handle, node) - 1;", "-\t\tresult [i] = items [index];", "+\tTreeItem[] answer;", "+\tif ((style & SWT.MULTI) != 0) {", "+\t\t/*", "+\t\t * Multi-selection case", "+\t\t */", "+\t\tselSize = 0;", "+\t\tselIndices = new int[items.length];", "+\t\tint selection = OS.gtk_tree_view_get_selection(handle);", "+\t\tOS.gtk_tree_selection_selected_foreach(selection, getDisplay().selectionIterProc, handle);", "+\t\tanswer = new TreeItem[selSize];", "+\t\tfor (int i=0; i<selSize; i++) answer[i] = items[selIndices[i]];", "+\t} else {", "+\t\t/*", "+\t\t * Single-selection case", "+\t\t */", "+\t\tint iter = OS.g_malloc(OS.GtkTreeIter_sizeof());", "+\t\tint selection = OS.gtk_tree_view_get_selection(handle);", "+\t\tboolean hasSelection = OS.gtk_tree_selection_get_selected(selection, null, iter);", "+\t\tif (hasSelection) {", "+\t\t\tint[] index = new int[1];", "+\t\t\tOS.gtk_tree_model_get(modelHandle, iter, 4, index, -1);", "+\t\t\tanswer = new TreeItem[1];", "+\t\t\tanswer[0] = items[index[0]];", "+\t\t} else {", "+\t\t\tanswer = new TreeItem[0];", "+\t\t}", "+\t\tOS.g_free(iter);", "-\treturn result;", "+\treturn answer;"]}], "num": 58531}