{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3126dce54ffadfb6883c7095c5f2e7d7", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "522d9e97274e68f81e3394e72d446272", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "examples/org.eclipse.swt.examples/org/eclipse/swt/examples/fileviewer/FileViewer.java", "commitBeforeChange": "d4c7da99373f8f0ef2ecf3082d69b8331929a5f1", "commitAfterChange": "e7fb43dbb2484659429530f9cab714cb6e3de9f3", "methodNumberBeforeChange": 56, "methodNumberAfterChange": 56, "signatureBeforeChange": "\r \tvoid handleDeferredRefresh()", "signatureAfterChange": "\r \tvoid handleDeferredRefresh()", "diff": ["-\t\t\r", "-\t\t// Does not refresh very intelligently at the moment.\r", "+\r", "+\t\tshell.setCursor(IconCache.stockCursors[IconCache.cursorWait]);\r", "-\t\tworkerUpdate(currentDirectory, true);\r", "-\r", "-\t\tfinal File[] roots = getRoots();\r", "+\t\tboolean refreshTable = false;\r", "+\t\tif (files != null) {\r", "+\t\t\tfor (int i = 0; i < files.length; ++i) {\r", "+\t\t\t\tfinal File file = files[i];\r", "+\t\t\t\tif (file.equals(currentDirectory)) {\r", "+\t\t\t\t\trefreshTable = true;\r", "+\t\t\t\t\tbreak;\r", "+\t\t\t\t}\r", "+\t\t\t\tFile parentFile = file.getParentFile();\r", "+\t\t\t\tif ((parentFile != null) && (parentFile.equals(currentDirectory))) {\r", "+\t\t\t\t\trefreshTable = true;\r", "+\t\t\t\t\tbreak;\r", "+\t\t\t\t}\r", "+\t\t\t}\r", "+\t\t} else refreshTable = true;\r", "+\t\tif (refreshTable) workerUpdate(currentDirectory, true);\r", "-\t\tcombo.removeAll();\r", "-\t\tcombo.setData(COMBODATA_ROOTS, roots);\r", "-\t\tfor (int i = 0; i < roots.length; ++i) {\r", "-\t\t\tfinal File file = roots[i];\r", "-\t\t\tcombo.add(file.getPath());\r", "+\t\tfinal File[] roots = getRoots();\r", "+\r", "+\t\tif (files == null) {\r", "+\t\t\tboolean refreshCombo = false;\r", "+\t\t\tfinal File[] comboRoots = (File[]) combo.getData(COMBODATA_ROOTS);\r", "+\t\t\r", "+\t\t\tif ((comboRoots != null) && (comboRoots.length == roots.length)) {\r", "+\t\t\t\tfor (int i = 0; i < roots.length; ++i) {\r", "+\t\t\t\t\tif (! roots[i].equals(comboRoots[i])) {\r", "+\t\t\t\t\t\trefreshCombo = true;\r", "+\t\t\t\t\t\tbreak;\r", "+\t\t\t\t\t}\r", "+\t\t\t\t}\r", "+\t\t\t} else refreshCombo = true;\r", "+\r", "+\t\t\tif (refreshCombo) {\r", "+\t\t\t\tcombo.removeAll();\r", "+\t\t\t\tcombo.setData(COMBODATA_ROOTS, roots);\r", "+\t\t\t\tfor (int i = 0; i < roots.length; ++i) {\r", "+\t\t\t\t\tfinal File file = roots[i];\r", "+\t\t\t\t\tcombo.add(file.getPath());\r", "+\t\t\t\t}\r", "+\t\t\t}\r", "-\t\ttree.removeAll();\r", "-\t\tfor (int i = 0; i < roots.length; ++i) {\r", "-\t\t\tfinal File file = roots[i];\r", "-\t\t\tTreeItem item = new TreeItem(tree, SWT.NULL);\r", "-\t\t\ttreeInitVolume(item, file);\r", "-\r", "-\t\t\t// add a placeholder child item so we get the \"expand\" button\r", "-\t\t\tTreeItem placeholderItem = new TreeItem(item, SWT.NULL);\r", "-\t\t}\r", "+\t\ttreeRefresh(roots);\r", "+\r", "+\t\tshell.setCursor(IconCache.stockCursors[IconCache.cursorDefault]);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7d396ec9bc729f10b01c3d36dd3d7c16", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "examples/org.eclipse.swt.examples/src/org/eclipse/swt/examples/fileviewer/FileViewer.java", "commitBeforeChange": "d4c7da99373f8f0ef2ecf3082d69b8331929a5f1", "commitAfterChange": "e7fb43dbb2484659429530f9cab714cb6e3de9f3", "methodNumberBeforeChange": 56, "methodNumberAfterChange": 56, "signatureBeforeChange": "\r \tvoid handleDeferredRefresh()", "signatureAfterChange": "\r \tvoid handleDeferredRefresh()", "diff": ["-\t\t\r", "-\t\t// Does not refresh very intelligently at the moment.\r", "+\r", "+\t\tshell.setCursor(IconCache.stockCursors[IconCache.cursorWait]);\r", "-\t\tworkerUpdate(currentDirectory, true);\r", "-\r", "-\t\tfinal File[] roots = getRoots();\r", "+\t\tboolean refreshTable = false;\r", "+\t\tif (files != null) {\r", "+\t\t\tfor (int i = 0; i < files.length; ++i) {\r", "+\t\t\t\tfinal File file = files[i];\r", "+\t\t\t\tif (file.equals(currentDirectory)) {\r", "+\t\t\t\t\trefreshTable = true;\r", "+\t\t\t\t\tbreak;\r", "+\t\t\t\t}\r", "+\t\t\t\tFile parentFile = file.getParentFile();\r", "+\t\t\t\tif ((parentFile != null) && (parentFile.equals(currentDirectory))) {\r", "+\t\t\t\t\trefreshTable = true;\r", "+\t\t\t\t\tbreak;\r", "+\t\t\t\t}\r", "+\t\t\t}\r", "+\t\t} else refreshTable = true;\r", "+\t\tif (refreshTable) workerUpdate(currentDirectory, true);\r", "-\t\tcombo.removeAll();\r", "-\t\tcombo.setData(COMBODATA_ROOTS, roots);\r", "-\t\tfor (int i = 0; i < roots.length; ++i) {\r", "-\t\t\tfinal File file = roots[i];\r", "-\t\t\tcombo.add(file.getPath());\r", "+\t\tfinal File[] roots = getRoots();\r", "+\r", "+\t\tif (files == null) {\r", "+\t\t\tboolean refreshCombo = false;\r", "+\t\t\tfinal File[] comboRoots = (File[]) combo.getData(COMBODATA_ROOTS);\r", "+\t\t\r", "+\t\t\tif ((comboRoots != null) && (comboRoots.length == roots.length)) {\r", "+\t\t\t\tfor (int i = 0; i < roots.length; ++i) {\r", "+\t\t\t\t\tif (! roots[i].equals(comboRoots[i])) {\r", "+\t\t\t\t\t\trefreshCombo = true;\r", "+\t\t\t\t\t\tbreak;\r", "+\t\t\t\t\t}\r", "+\t\t\t\t}\r", "+\t\t\t} else refreshCombo = true;\r", "+\r", "+\t\t\tif (refreshCombo) {\r", "+\t\t\t\tcombo.removeAll();\r", "+\t\t\t\tcombo.setData(COMBODATA_ROOTS, roots);\r", "+\t\t\t\tfor (int i = 0; i < roots.length; ++i) {\r", "+\t\t\t\t\tfinal File file = roots[i];\r", "+\t\t\t\t\tcombo.add(file.getPath());\r", "+\t\t\t\t}\r", "+\t\t\t}\r", "-\t\ttree.removeAll();\r", "-\t\tfor (int i = 0; i < roots.length; ++i) {\r", "-\t\t\tfinal File file = roots[i];\r", "-\t\t\tTreeItem item = new TreeItem(tree, SWT.NULL);\r", "-\t\t\ttreeInitVolume(item, file);\r", "-\r", "-\t\t\t// add a placeholder child item so we get the \"expand\" button\r", "-\t\t\tTreeItem placeholderItem = new TreeItem(item, SWT.NULL);\r", "-\t\t}\r", "+\t\ttreeRefresh(roots);\r", "+\r", "+\t\tshell.setCursor(IconCache.stockCursors[IconCache.cursorDefault]);\r"]}], "num": 34367}