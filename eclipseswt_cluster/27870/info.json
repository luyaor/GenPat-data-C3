{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4f33887f2fa78711e1194e2d3447266f", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ba9c4a3d3a97eaafd1beee1697beb408", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Cursor.java", "commitBeforeChange": "8e8948c2d9f563b5d8efb9026007786b0ad7da0e", "commitAfterChange": "aa900beeb02e75776dbdc9bb334fed8230dde2aa", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public Cursor(Device device, ImageData source, ImageData mask, int hotspotX, int hotspotY)", "signatureAfterChange": " public Cursor(Device device, ImageData source, ImageData mask, int hotspotX, int hotspotY)", "diff": ["-\t\tfor (int x= 0; x < width; x++) {", "-\t\t\tint bit= 1 >> x;", "-\t\t\tif (source.getPixel(x, y) != 0) d |= bit;", "-\t\t\tif (mask.getPixel(x, y) != 0) m |= bit;", "+\t\tfor (int x = 0; x < width; x++) {", "+\t\t\tint bit = 1 << (width - 1 - x);", "+\t\t\tif (source.getPixel(x, y) == 0) {", "+\t\t\t\tm |= bit;", "+\t\t\t\tif (mask.getPixel(x, y) == 0) d |= bit;", "+\t\t\t} else if (mask.getPixel(x, y) != 0) {", "+\t\t\t\td |= bit;", "+\t\t\t}", "+\t\t}", "+\t\tsrcData[y] = d;", "+\t\tmaskData[y] = m;", "+\t}", "+\tcursor.hotSpot_h = (short)Math.min(16, hotspotX);", "+\tcursor.hotSpot_v = (short)Math.min(16, hotspotY);", "+\thandle = OS.NewPtr(org.eclipse.swt.internal.carbon.Cursor.sizeof);", "+\tif (handle == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\tOS.memcpy(handle, cursor, org.eclipse.swt.internal.carbon.Cursor.sizeof);", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d977c6cd4a405cabd609879789997a93", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Cursor.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public Cursor (Device device, ImageData source, ImageData mask, int hotspotX, int hotspotY)", "signatureAfterChange": " public Cursor(Device device, ImageData source, ImageData mask, int hotspotX, int hotspotY)", "diff": ["-public Cursor (Device device, ImageData source, ImageData mask, int hotspotX, int hotspotY) {", "+public Cursor(Device device, ImageData source, ImageData mask, int hotspotX, int hotspotY) {", "-\t\t\tSWT.error(SWT.ERROR_INVALID_ARGUMENT);", "+\t\t\tSWT.error(SWT.ERROR_NULL_ARGUMENT);", "-\t/* Check depths */", "+\t/* Check color depths */", "-\t", "-\tint w= Math.min(16, source.width);", "-\tint h= Math.min(16, source.height);", "-\t", "-\tshort[] data= new short[16];", "-\tshort[] msk= new short[16];", "-\t", "-\tfor (int y= 0; y < h; y++) {", "-\t\tshort d= 0;", "-\t\tshort m= 0;", "-\t\tfor (int x= 0; x < w; x++) {", "+\t/* Create the cursor */", "+\torg.eclipse.swt.internal.carbon.Cursor cursor = new org.eclipse.swt.internal.carbon.Cursor();", "+\tint width = Math.min(16, source.width);", "+\tint height = Math.min(16, source.height);", "+\tshort[] srcData = cursor.data;", "+\tshort[] maskData = cursor.mask;", "+\tfor (int y= 0; y < height; y++) {", "+\t\tshort d = 0, m = 0;", "+\t\tfor (int x= 0; x < width; x++) {", "-\t\t\tif (source.getPixel(x, y) != 0)", "-\t\t\t\td |= bit;", "-\t\t\tif (mask.getPixel(x, y) != 0)", "-\t\t\t\tm |= bit;", "+\t\t\tif (source.getPixel(x, y) != 0) d |= bit;", "+\t\t\tif (mask.getPixel(x, y) != 0) m |= bit;", "-\t\tdata[y]= d;", "-\t\tmsk[y]= m;", "+\t\tsrcData[y] = d;", "+\t\tmaskData[y] = m;", "-\t", "-\tOS.NewCursor((short) hotspotX, (short)hotspotY, data, msk);", "+\tcursor.hotSpot_h = (short)Math.min(16, hotspotX);", "+\tcursor.hotSpot_v = (short)Math.min(16, hotspotY);", "+\thandle = OS.NewPtr(org.eclipse.swt.internal.carbon.Cursor.sizeof);", "-\tfDispose= true;", "+\tOS.memcpy(handle, cursor, org.eclipse.swt.internal.carbon.Cursor.sizeof);"]}], "num": 27870}