{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "7ce35cae81916b92eace1f066da07168", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b640187341afc917fa28dbc3cc38e515", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/ToolItem.java", "commitBeforeChange": "bb045509675c2afe0f07935034dfcf375f595698", "commitAfterChange": "f2e9a18a9a581b2d4b51ec1577f8df59fd8a28a2", "methodNumberBeforeChange": 31, "methodNumberAfterChange": 31, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": " public void setText (String string)", "diff": ["-\tint hHeap = OS.GetProcessHeap ();", "-\tTCHAR buffer = new TCHAR (parent.getCodePage (), string, true);", "-\tint byteCount = buffer.length () * TCHAR.sizeof;", "-\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "-\tOS.MoveMemory (pszText, buffer, byteCount); ", "-\tinfo.pszText = pszText;", "-\tif (string.length () != 0) info.fsStyle |= OS.BTNS_SHOWTEXT;", "+\tint hHeap = OS.GetProcessHeap (), pszText = 0;", "+\tif (string.length () != 0) {", "+\t\tinfo.fsStyle |= OS.BTNS_SHOWTEXT;", "+\t\tTCHAR buffer = new TCHAR (parent.getCodePage (), string, true);", "+\t\tint byteCount = buffer.length () * TCHAR.sizeof;", "+\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "+\t\tOS.MoveMemory (pszText, buffer, byteCount); ", "+\t\tinfo.pszText = pszText;", "+\t}", "-\tOS.HeapFree (hHeap, 0, pszText);", "+\tif (pszText != 0) OS.HeapFree (hHeap, 0, pszText);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e523ce1de6b84f75085a9ecf2c56fb3f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "000abc9c2895f20e56890595fdc9553919907596", "commitAfterChange": "dac30c018d5cf7c70486c933b24c16540aaa8795", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": "\r \r public void setText (String string)", "signatureAfterChange": "\r \r public void setText (String string)", "diff": ["-\t/* Use the character encoding for the default locale */\r", "-\tTCHAR buffer = new TCHAR (0, string, true);\r", "-\tint byteCount = buffer.length () * TCHAR.sizeof;\r", "-\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);\r", "-\tOS.MoveMemory (pszText, buffer, byteCount);\t\r", "+\tint pszText;\r", "-\tif (OS.IsPPC && parent.hwndCB != 0) {\r", "+\tif ((OS.IsPPC || OS.IsSP) && parent.hwndCB != 0) {\r", "+\t\t/* Use the character encoding for the default locale */\r", "+\t\tTCHAR buffer = new TCHAR (0, string, true);\r", "+\t\tint byteCount = buffer.length () * TCHAR.sizeof;\r", "+\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);\r", "+\t\tOS.MoveMemory (pszText, buffer, byteCount);\t\r", "+\t\t/* Use the character encoding for the default locale */\r", "+\t\tTCHAR buffer = new TCHAR (0, string, true);\r", "+\t\tint byteCount = buffer.length () * TCHAR.sizeof;\r", "+\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);\r", "+\t\tOS.MoveMemory (pszText, buffer, byteCount);\t\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fd65e6994567694e590b1e97e2e19761", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/ToolItem.java", "commitBeforeChange": "71391fc1dc9d75effb13782c0dee4de011e77da2", "commitAfterChange": "2b14d767020ed3598cdf53c0df27bc3b8bd1ea64", "methodNumberBeforeChange": 33, "methodNumberAfterChange": 34, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": " public void setText (String string)", "diff": ["-\tlong /*int*/ hwnd = parent.handle;", "-\tTBBUTTONINFO info = new TBBUTTONINFO ();", "-\tinfo.cbSize = TBBUTTONINFO.sizeof;", "-\tinfo.dwMask = OS.TBIF_TEXT | OS.TBIF_STYLE;", "-\tinfo.fsStyle = (byte) (widgetStyle () | OS.BTNS_AUTOSIZE);", "-\tlong /*int*/ hHeap = OS.GetProcessHeap (), pszText = 0;", "-\tif (string.length () != 0) {", "-\t\tinfo.fsStyle |= OS.BTNS_SHOWTEXT;", "-\t\tTCHAR buffer = new TCHAR (parent.getCodePage (), string, true);", "-\t\tint byteCount = buffer.length () * TCHAR.sizeof;", "-\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "-\t\tOS.MoveMemory (pszText, buffer, byteCount); ", "-\t\tinfo.pszText = pszText;", "-\t}", "-\tOS.SendMessage (hwnd, OS.TB_SETBUTTONINFO, id, info);", "-\tif (pszText != 0) OS.HeapFree (hHeap, 0, pszText);", "+\t_setText (string);", "+\tlong /*int*/ hwnd = parent.handle;"]}], "num": 39742}