{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "884ac73f0f94607ddff8a11bf0e811b8", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bf235eb348e23bf9798a4b6c18c86311", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "5828e618d89f52d302bbc1b001ae51d18c45a2b5", "commitAfterChange": "43c4ce59c798a81fc47668e77a2fe8939fcf3cc8", "methodNumberBeforeChange": 112, "methodNumberAfterChange": 113, "signatureBeforeChange": "  String toolTipText (NMTTDISPINFO hdr)", "signatureAfterChange": "  String toolTipText (NMTTDISPINFO hdr)", "diff": ["-\t\tint count = OS.SendMessage (hwndHeader, OS.HDM_GETITEMCOUNT, 0, 0);", "+\t\tint count = OS.SendMessage(hwndHeader, OS.HDM_GETITEMCOUNT, 0, 0);", "+\t\t}", "+\t\treturn super.toolTipText (hdr);", "+\t}", "+\tif (itemToolTipHandle == hdr.hwndFrom && hwndHeader != 0) {", "+\t\tint pos = OS.GetMessagePos ();", "+\t\tPOINT pt = new POINT();", "+\t\tpt.x = (short) (pos & 0xFFFF);", "+\t\tpt.y = (short) (pos >> 16);", "+\t\tOS.ScreenToClient (handle, pt);", "+\t\tTVHITTESTINFO lpht = new TVHITTESTINFO ();", "+\t\tlpht.x = pt.x;", "+\t\tlpht.y = pt.y;", "+\t\tOS.SendMessage (handle, OS.TVM_HITTEST, 0, lpht);", "+\t\tif (lpht.hItem != 0) {", "+\t\t\tint hDC = OS.GetDC (handle);", "+\t\t\tint oldFont = 0, newFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "+\t\t\tif (newFont != 0) oldFont = OS.SelectObject (hDC, newFont);", "+\t\t\tRECT rect = new RECT ();", "+\t\t\tOS.GetClientRect (hwndParent, rect);", "+\t\t\tOS.MapWindowPoints (hwndParent, handle, rect, 2);", "+\t\t\tTreeItem item = _getItem (lpht.hItem);", "+\t\t\tString text = null;", "+\t\t\tint index = 0, count = Math.max (1, OS.SendMessage (hwndHeader, OS.HDM_GETITEMCOUNT, 0, 0));", "+\t\t\tint [] order = new int [count];", "+\t\t\tOS.SendMessage (hwndHeader, OS.HDM_GETORDERARRAY, count, order);", "+\t\t\twhile (index < count) {", "+\t\t\t\tint hFont = item.cellFont != null ? item.cellFont [order [index]] : -1;", "+\t\t\t\tif (hFont == -1) hFont = item.font;", "+\t\t\t\tif (hFont != -1) hFont = OS.SelectObject (hDC, hFont);", "+\t\t\t\tRECT cellRect = item.getBounds (order [index], true, false, true, false, true, hDC);", "+\t\t\t\tif (hFont != -1) OS.SelectObject (hDC, hFont);", "+\t\t\t\tif (cellRect.left > rect.right) break;", "+\t\t\t\tcellRect.right = Math.min (cellRect.right, rect.right);", "+\t\t\t\tif (OS.PtInRect (cellRect, pt)) {", "+\t\t\t\t\tRECT textRect = item.getBounds (order [index], true, false, false, false, false, hDC);", "+\t\t\t\t\tif (textRect.right > cellRect.right) {", "+\t\t\t\t\t\tif (order [index] == 0) {", "+\t\t\t\t\t\t\ttext = item.text;", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\tString[] strings = item.strings;", "+\t\t\t\t\t\t\tif (strings != null) text = strings [order [index]];", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t\tindex++;", "+\t\t\t}", "+\t\t\tif (newFont != 0) OS.SelectObject (hDC, oldFont);", "+\t\t\tOS.ReleaseDC (handle, hDC);", "+\t\t\tif (text != null) return text;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d0d03bb47d1b05e7c542fdabeb907253", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "5828e618d89f52d302bbc1b001ae51d18c45a2b5", "commitAfterChange": "43c4ce59c798a81fc47668e77a2fe8939fcf3cc8", "methodNumberBeforeChange": 132, "methodNumberAfterChange": 134, "signatureBeforeChange": "  LRESULT WM_NOTIFY (int wParam, int lParam)", "signatureAfterChange": "  LRESULT WM_NOTIFY (int wParam, int lParam)", "diff": ["-\tif (hwndHeader != 0 && hdr.hwndFrom == hwndHeader) {", "+\tif (hdr.hwndFrom == itemToolTipHandle && hwndHeader != 0) {", "+\t\tif (!OS.IsWinCE) {", "+\t\t\tswitch (hdr.code) {", "+\t\t\t\tcase OS.TTN_SHOW: {", "+\t\t\t\t\tint pos = OS.GetMessagePos ();", "+\t\t\t\t\tPOINT pt = new POINT();", "+\t\t\t\t\tpt.x = (short) (pos & 0xFFFF);", "+\t\t\t\t\tpt.y = (short) (pos >> 16);", "+\t\t\t\t\tOS.ScreenToClient (handle, pt);", "+\t\t\t\t\tTVHITTESTINFO lpht = new TVHITTESTINFO ();", "+\t\t\t\t\tlpht.x = pt.x;", "+\t\t\t\t\tlpht.y = pt.y;", "+\t\t\t\t\tOS.SendMessage (handle, OS.TVM_HITTEST, 0, lpht);", "+\t\t\t\t\tif (lpht.hItem != 0) {", "+\t\t\t\t\t\tint hDC = OS.GetDC (handle);", "+\t\t\t\t\t\tint oldFont = 0, newFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "+\t\t\t\t\t\tif (newFont != 0) oldFont = OS.SelectObject (hDC, newFont);", "+\t\t\t\t\t\tLRESULT result = null;", "+\t\t\t\t\t\tRECT rect = new RECT ();", "+\t\t\t\t\t\tOS.GetClientRect (hwndParent, rect);", "+\t\t\t\t\t\tOS.MapWindowPoints (hwndParent, handle, rect, 2);", "+\t\t\t\t\t\tTreeItem item = _getItem (lpht.hItem);", "+\t\t\t\t\t\tint index = 0, count = Math.max (1, OS.SendMessage (hwndHeader, OS.HDM_GETITEMCOUNT, 0, 0));", "+\t\t\t\t\t\tint [] order = new int [count];", "+\t\t\t\t\t\tOS.SendMessage (hwndHeader, OS.HDM_GETORDERARRAY, count, order);", "+\t\t\t\t\t\twhile (index < count) {", "+\t\t\t\t\t\t\tint hFont = item.cellFont != null ? item.cellFont [order [index]] : -1;", "+\t\t\t\t\t\t\tif (hFont == -1) hFont = item.font;", "+\t\t\t\t\t\t\tif (hFont != -1) hFont = OS.SelectObject (hDC, hFont);", "+\t\t\t\t\t\t\tRECT cellRect = item.getBounds (order [index], true, false, true, false, true, hDC);", "+\t\t\t\t\t\t\tif (hFont != -1) OS.SelectObject (hDC, hFont);", "+\t\t\t\t\t\t\tif (cellRect.left > rect.right) break;", "+\t\t\t\t\t\t\tcellRect.right = Math.min (cellRect.right, rect.right);", "+\t\t\t\t\t\t\tif (OS.PtInRect (cellRect, pt)) {", "+\t\t\t\t\t\t\t\tRECT textRect = item.getBounds (order [index], true, false, false, false, false, hDC);", "+\t\t\t\t\t\t\t\tif (textRect.right > cellRect.right) {", "+\t\t\t\t\t\t\t\t\tOS.MapWindowPoints (handle, 0, textRect, 2);", "+\t\t\t\t\t\t\t\t\tint flags = OS.SWP_NOACTIVATE | OS.SWP_NOSIZE | OS.SWP_NOZORDER;", "+\t\t\t\t\t\t\t\t\tSetWindowPos (itemToolTipHandle, 0, textRect.left, textRect.top, 0, 0, flags);", "+\t\t\t\t\t\t\t\t\tresult = LRESULT.ONE;", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tbreak;", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\tindex++;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tif (newFont != 0) OS.SelectObject (hDC, oldFont);", "+\t\t\t\t\t\tOS.ReleaseDC (handle, hDC);", "+\t\t\t\t\t\tif (result != null) return result;", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t}", "+\t\t}", "+\t}", "+\tif (hdr.hwndFrom == hwndHeader) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "889a534856d63f2d3efa3fa1cb174375", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/TableColumn.java", "commitBeforeChange": "db5070f4a4104c5e47a8cd2bdd5b5f06b11fcd6f", "commitAfterChange": "ed00985c99474f1ccbc7dee6f3b569d40159cdfc", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": " public void pack ()", "signatureAfterChange": " public void pack ()", "diff": ["-\tif (OS.COMCTL32_MAJOR >= 6 && OS.IsAppThemed ()) {", "-\t\theaderWidth += Table.HEADER_EXTRA;", "-\t}", "+\tif (OS.COMCTL32_MAJOR >= 6 && OS.IsAppThemed ()) headerWidth += Table.HEADER_EXTRA;", "-\tOS.SendMessage (hwnd, OS.LVM_SETCOLUMNWIDTH, index, OS.LVSCW_AUTOSIZE);", "-\tint columnWidth = OS.SendMessage (hwnd, OS.LVM_GETCOLUMNWIDTH, index, 0);", "-\tif (index == 0) {", "-\t\t/*", "-\t\t* Bug in Windows.  When LVM_SETCOLUMNWIDTH is used with LVSCW_AUTOSIZE", "-\t\t* where each item has I_IMAGECALLBACK but there are no images in the", "-\t\t* table, the size computed by LVM_SETCOLUMNWIDTH is too small for the", "-\t\t* first column, causing long items to be clipped with '...'.  The fix", "-\t\t* is to increase the column width by a small amount.", "-\t\t*/", "-\t\tif (parent.imageList == null) columnWidth += 2;", "-\t\t/*", "-\t\t* Bug in Windows.  When LVM_SETCOLUMNWIDTH is used with LVSCW_AUTOSIZE", "-\t\t* for a table with a state image list, the column is width does not", "-\t\t* include space for the state icon.  The fix is to increase the column", "-\t\t* width by the width of the image list.", "-\t\t*/", "-\t\tif ((parent.style & SWT.CHECK) != 0) {", "-\t\t\tint hStateList = OS.SendMessage (hwnd, OS.LVM_GETIMAGELIST, OS.LVSIL_STATE, 0);", "-\t\t\tif (hStateList != 0) {", "-\t\t\t\tint [] cx = new int [1], cy = new int [1];", "-\t\t\t\tOS.ImageList_GetIconSize (hStateList, cx, cy);", "-\t\t\t\tcolumnWidth += cx [0];", "+\tint columnWidth = 0;", "+\tif (parent.hooks (SWT.MeasureItem)) {", "+\t\tRECT headerRect = new RECT ();", "+\t\tint hwndHeader = OS.SendMessage (hwnd, OS.LVM_GETHEADER, 0, 0);", "+\t\tOS.SendMessage (hwndHeader, OS.HDM_GETITEMRECT, index, headerRect);", "+\t\tint hDC = OS.GetDC (hwnd);", "+\t\tint oldFont = 0, newFont = OS.SendMessage (hwnd, OS.WM_GETFONT, 0, 0);", "+\t\tif (newFont != 0) oldFont = OS.SelectObject (hDC, newFont);", "+\t\tint count = OS.SendMessage (hwnd, OS.LVM_GETITEMCOUNT, 0, 0);", "+\t\tfor (int i=0; i<count; i++) {", "+\t\t\tTableItem item = parent.items [i];", "+\t\t\tif (item != null) {", "+\t\t\t\tint hFont = item.cellFont != null ? item.cellFont [index] : -1;", "+\t\t\t\tif (hFont == -1) hFont = item.font;", "+\t\t\t\tif (hFont != -1) hFont = OS.SelectObject (hDC, hFont);", "+\t\t\t\tRECT itemRect = item.getBounds (i, index, true, true, false, false, hDC);", "+\t\t\t\tif (hFont != -1) OS.SelectObject (hDC, hFont);", "+\t\t\t\tint nSavedDC = OS.SaveDC (hDC);", "+\t\t\t\tGCData data = new GCData ();", "+\t\t\t\tdata.device = display;", "+\t\t\t\tdata.hFont = hFont;", "+\t\t\t\tGC gc = GC.win32_new (hDC, data);", "+\t\t\t\tEvent event = new Event ();", "+\t\t\t\tevent.item = item;", "+\t\t\t\tevent.gc = gc;", "+\t\t\t\tevent.index = index;", "+\t\t\t\tevent.x = itemRect.left;", "+\t\t\t\tevent.y = itemRect.top;", "+\t\t\t\tevent.width = itemRect.right - itemRect.left;", "+\t\t\t\tevent.height = itemRect.bottom - itemRect.top;", "+\t\t\t\tparent.sendEvent (SWT.MeasureItem, event);", "+\t\t\t\tif (!parent.ignoreItemHeight) {", "+\t\t\t\t\tif (event.height > parent.getItemHeight ()) {", "+\t\t\t\t\t\tparent.setItemHeight (event.height);", "+\t\t\t\t\t}", "+\t\t\t\t\tparent.ignoreItemHeight = true;", "+\t\t\t\t}", "+\t\t\t\tevent.gc = null;", "+\t\t\t\tgc.dispose ();", "+\t\t\t\tOS.RestoreDC (hDC, nSavedDC);", "+\t\t\t\tif (isDisposed () || parent.isDisposed ()) break;", "+\t\t\t\tcolumnWidth = Math.max (columnWidth, event.x + event.width - headerRect.left);", "+\t\t\t}", "+\t\t}", "+\t\tif (newFont != 0) OS.SelectObject (hDC, oldFont);", "+\t\tOS.ReleaseDC (hwnd, hDC);", "+\t\tOS.SendMessage (hwnd, OS.LVM_SETCOLUMNWIDTH, index, columnWidth);", "+\t} else {", "+\t\tOS.SendMessage (hwnd, OS.LVM_SETCOLUMNWIDTH, index, OS.LVSCW_AUTOSIZE);", "+\t\tcolumnWidth = OS.SendMessage (hwnd, OS.LVM_GETCOLUMNWIDTH, index, 0);", "+\t\tif (index == 0) {", "+\t\t\t/*", "+\t\t\t* Bug in Windows.  When LVM_SETCOLUMNWIDTH is used with LVSCW_AUTOSIZE", "+\t\t\t* where each item has I_IMAGECALLBACK but there are no images in the", "+\t\t\t* table, the size computed by LVM_SETCOLUMNWIDTH is too small for the", "+\t\t\t* first column, causing long items to be clipped with '...'.  The fix", "+\t\t\t* is to increase the column width by a small amount.", "+\t\t\t*/", "+\t\t\tif (parent.imageList == null) columnWidth += 2;", "+\t\t\t/*", "+\t\t\t* Bug in Windows.  When LVM_SETCOLUMNWIDTH is used with LVSCW_AUTOSIZE", "+\t\t\t* for a table with a state image list, the column is width does not", "+\t\t\t* include space for the state icon.  The fix is to increase the column", "+\t\t\t* width by the width of the image list.", "+\t\t\t*/", "+\t\t\tif ((parent.style & SWT.CHECK) != 0) {", "+\t\t\t\tint hStateList = OS.SendMessage (hwnd, OS.LVM_GETIMAGELIST, OS.LVSIL_STATE, 0);", "+\t\t\t\tif (hStateList != 0) {", "+\t\t\t\t\tint [] cx = new int [1], cy = new int [1];", "+\t\t\t\t\tOS.ImageList_GetIconSize (hStateList, cx, cy);", "+\t\t\t\t\tcolumnWidth += cx [0];", "+\t\t\t\t}"]}], "num": 29004}