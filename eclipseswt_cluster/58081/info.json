{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "209e87ba6f9b07ff2532672985fca27d", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4ea4b505f447b2fbd5b5de5b58be2c4b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Decorations.java", "commitBeforeChange": "c2a3df1a5f68cf5dd9c3452b58c3950b7c421126", "commitAfterChange": "902e291c104c5166815bee0e35015c1683bd8a50", "methodNumberBeforeChange": 45, "methodNumberAfterChange": 46, "signatureBeforeChange": "  void setImages (Image image, Image [] images)", "signatureAfterChange": "  void setImages (Image image, Image [] images)", "diff": ["-\tint smallWidth = 0x7FFFFFFF, largeWidth = 0x7FFFFFFF;", "-\t\tRectangle rect = image.getBounds ();", "-\t\tsmallWidth = Math.abs (rect.width - OS.GetSystemMetrics (OS.SM_CXSMICON));", "-\t\tsmallIcon = image;", "-\t\tlargeWidth = Math.abs (rect.width - OS.GetSystemMetrics (OS.SM_CXICON)); ", "-\t\tlargeIcon = image;", "-\t}", "-\tif (images != null) {", "-\t\tfor (int i = 0; i < images.length; i++) {", "-\t\t\tRectangle rect = images [i].getBounds ();", "-\t\t\tint value = Math.abs (rect.width - OS.GetSystemMetrics (OS.SM_CXSMICON));", "-\t\t\tif (value < smallWidth) {", "-\t\t\t\tsmallWidth = value;", "-\t\t\t\tsmallIcon = images [i];", "+\t\tsmallIcon = largeIcon = image;", "+\t} else {", "+\t\tif (images != null && images.length > 0) {", "+\t\t\tint depth = display.getIconDepth ();", "+\t\t\tImageData [] datas = null;", "+\t\t\tif (images.length > 1) {", "+\t\t\t\tImage [] bestImages = new Image [images.length];", "+\t\t\t\tSystem.arraycopy (images, 0, bestImages, 0, images.length);", "+\t\t\t\tdatas = new ImageData [images.length];", "+\t\t\t\tfor (int i=0; i<datas.length; i++) {", "+\t\t\t\t\tdatas [i] = images [i].getImageData ();", "+\t\t\t\t}", "+\t\t\t\timages = bestImages;", "+\t\t\t\tsort (images, datas, OS.GetSystemMetrics (OS.SM_CXSMICON), OS.GetSystemMetrics (OS.SM_CYSMICON), depth);", "-\t\t\tvalue = Math.abs (rect.width - OS.GetSystemMetrics (OS.SM_CXICON));", "-\t\t\tif (value < largeWidth) {", "-\t\t\t\tlargeWidth = value;", "-\t\t\t\tlargeIcon = images [i];", "+\t\t\tsmallIcon = images [0];", "+\t\t\tif (images.length > 1) {", "+\t\t\t\tsort (images, datas, OS.GetSystemMetrics (OS.SM_CXICON), OS.GetSystemMetrics (OS.SM_CYICON), depth);", "+\t\t\tlargeIcon = images [0];"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0405c1dd9b0e71fe31fdb7843fb1e643", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "e5acbe6c16a694c7f3c29cf4f69a551bf55b4776", "commitAfterChange": "0a7e0762eb6a91569487ff333d468559f2ea1861", "methodNumberBeforeChange": 93, "methodNumberAfterChange": 94, "signatureBeforeChange": "\r \r void setBounds (int x, int y, int width, int height, int flags)", "signatureAfterChange": "\r \r void setBounds (int x, int y, int width, int height, int flags)", "diff": ["-\tint count = parent.getChildrenCount ();\r", "-\tif (parent.hdwp == 0) {\r", "-\t\tif (count > 1) {\r", "-\t\t\tint bits = OS.GetWindowLong (handle, OS.GWL_STYLE);\r", "-\t\t\tif ((bits & OS.WS_CLIPSIBLINGS) == 0) flags |= OS.SWP_NOCOPYBITS;\r", "-\t\t}\r", "+\tif (parent.lpwp == null) {\r", "+\t\t/*\r", "+\t\t* This code is intentionally commented.  All widgets that\r", "+\t\t* are created by SWT have WS_CLIPSIBLINGS to ensure that\r", "+\t\t* application code does not draw outside of the control.\r", "+\t\t*/\r", "+//\t\tint count = parent.getChildrenCount ();\r", "+//\t\tif (count > 1) {\r", "+//\t\t\tint bits = OS.GetWindowLong (handle, OS.GWL_STYLE);\r", "+//\t\t\tif ((bits & OS.WS_CLIPSIBLINGS) == 0) flags |= OS.SWP_NOCOPYBITS;\r", "+//\t\t}\r", "-\tint hdwp = OS.DeferWindowPos (parent.hdwp, handle, 0, x, y, width, height, flags);\r", "-\tif (hdwp == 0) {\r", "-\t\tint oldHdwp = parent.hdwp;\r", "-\t\tparent.hdwp = 0;\r", "-\t\tOS.EndDeferWindowPos (oldHdwp);\r", "-\t\tif (count > 1) hdwp = OS.BeginDeferWindowPos (count);\r", "+\tforceResize ();\r", "+\tWINDOWPOS [] lpwp = parent.lpwp;\r", "+\tint index = 0;\r", "+\twhile (index < lpwp.length) {\r", "+\t\tif (lpwp [index] == null) break;\r", "+\t\tindex ++;\r", "-\tparent.hdwp = hdwp;\r", "+\tif (index == lpwp.length) {\r", "+\t\tWINDOWPOS [] newLpwp = new WINDOWPOS [lpwp.length + 4];\r", "+\t\tSystem.arraycopy (lpwp, 0, newLpwp, 0, lpwp.length);\r", "+\t\tparent.lpwp = lpwp = newLpwp;\r", "+\t}\r", "+\tWINDOWPOS wp = new WINDOWPOS ();\r", "+\twp.hwnd = handle;\r", "+\twp.x = x;\r", "+\twp.y = y;\r", "+\twp.cx = width;\r", "+\twp.cy = height;\r", "+\twp.flags = flags;\r", "+\tlpwp [index] = wp;\r"]}], "num": 58081}