{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3a106a2da3713c1aad752a6b5c1c4be6", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "77bbd59aabae22652e000db8ac4dad6a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "5544ce1d748561f71c4f1d1997c431f82e5c4c86", "commitAfterChange": "24e0049851c0d0a09cb9f25e5892d112e2936fed", "methodNumberBeforeChange": 273, "methodNumberAfterChange": 271, "signatureBeforeChange": " void showBidiCaret()", "signatureAfterChange": " void setCaretLocation()", "diff": ["- */", "-void showBidiCaret() {", "-\tint line = content.getLineAtOffset(caretOffset);", "-\tint lineOffset = content.getOffsetAtLine(line);", "-\tint offsetInLine = caretOffset - lineOffset;", "-\tString lineText = content.getLine(line);", "-\tint xAtOffset = 0;", "-\tboolean scrolled = false;\t\t", "-\tGC gc = getGC();", "-\tStyledTextBidi bidi = getStyledTextBidi(lineText, lineOffset, gc);", "-\t// getXAtOffset, inlined for better performance", "-\txAtOffset = getBidiTextPosition(lineText, offsetInLine, bidi) + leftMargin;", "-\tif (offsetInLine > lineText.length()) {", "-\t\t// offset is not on the line. return an x location one character ", "-\t\t// after the line to indicate the line delimiter.", "-\t\txAtOffset += lineEndSpaceWidth;", "-\t}", "-\txAtOffset -= horizontalScrollOffset;", "-\t//", "-\tscrolled = showLocation(xAtOffset, line);", "-\tif (scrolled == false) {", "-\t\tsetBidiCaretLocation(bidi);", "-\t}", "-\tgc.dispose();", "-}", "+\tint lineIndex = getCaretLine();", "+\tString line = content.getLine(lineIndex);", "+\tint lineOffset = content.getOffsetAtLine(lineIndex);", "+\tint offsetInLine = caretOffset - lineOffset;", "+\tint newCaretX = getXAtOffset(line, lineIndex, offsetInLine);", "+\tsetCaretLocation(newCaretX, lineIndex, getCaretDirection());"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "88251c117095052edb965f0f77434e98", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "ce2f35c3f6b1d0b5778f68f011b1d8668d3c5c72", "commitAfterChange": "00bee382096a1807d86474fed7c933116a37eeb8", "methodNumberBeforeChange": 64, "methodNumberAfterChange": 75, "signatureBeforeChange": "\r void doMouseLocationChange(int x, int y, boolean select)", "signatureAfterChange": "\r void doMouseLocationChange(int x, int y, boolean select)", "diff": ["-\tint line = (y + verticalScrollOffset) / getLineHeight();\r", "+\tif (isBidi()) {\r", "+\t\tdoBidiMouseLocationChange(x, y, select);\r", "+\t\treturn;\r", "+\t}\r", "+\tint line = (y + verticalScrollOffset) / lineHeight;\r", "-\t\tint offsetInLine = -1;\r", "-\t\tint newCaretOffset;\r", "+\t\tint offsetInLine = getCaretOffsetAtX(lineText, lineOffset, x);\r", "+\t\tint newCaretOffset = lineOffset + offsetInLine;\r", "-\t\tif (select && selectionAnchor == lineOffset && line < lineCount - 1) {\r", "-\t\t\tGC gc = new GC(this);\t\t\r", "-\t\t\tint lineLength = lineText.length();\r", "-\t\t\t// represent the line break as one additional white space\r", "-\t\t\t// if the selection mouse event occurs beyond the line end\r", "-\t\t\tif (x + horizontalScrollOffset > textWidth(lineText, line, lineLength, gc)) {\r", "-\t\t\t\tline++;\r", "-\t\t\t\toffsetInLine = 0;\r", "-\t\t\t\tlineOffset = content.getOffsetAtLine(line);\r", "-\t\t\t}\r", "-\t\t\tgc.dispose();\r", "-\t\t}\r", "-\t\tif (offsetInLine == -1) {\r", "-\t\t\toffsetInLine = getOffsetAtX(lineText, lineOffset, x);\r", "-\t\t}\r", "-\t\tnewCaretOffset = lineOffset + offsetInLine;\r", "-\t\t\tshowCaret();\r", "+\t\t\tsetCaretLocation();\r"]}], "num": 54248}