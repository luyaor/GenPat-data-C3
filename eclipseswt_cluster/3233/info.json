{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "104a7876a3c53610c2ec702ae83a0703", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3ef94e23559b50d72daed465d26ea654", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "8848a0fd117061e467d06956f0abd85274a9ca0b", "commitAfterChange": "9da2fac94d15a6c7551e1557116a24207f321bd6", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 23, "signatureBeforeChange": "\r public MenuItem getItem (int index)", "signatureAfterChange": "\r public MenuItem getItem (int index)", "diff": ["-\tif (OS.IsPPC && hwndCB != 0) {\r", "-\t\tTBBUTTON lpButton = new TBBUTTON ();\r", "-\t\tint result = OS.SendMessage (hwndCB, OS.TB_GETBUTTON, index, lpButton);\r", "-\t\tif (result == 0) error (SWT.ERROR_CANNOT_GET_ITEM);\r", "-\t\tid = lpButton.idCommand;\r", "+\tif ((OS.IsPPC || OS.IsSP) && hwndCB != 0) {\r", "+\t\tif (OS.IsPPC) {\r", "+\t\t\tTBBUTTON lpButton = new TBBUTTON ();\r", "+\t\t\tint result = OS.SendMessage (hwndCB, OS.TB_GETBUTTON, index, lpButton);\r", "+\t\t\tif (result == 0) error (SWT.ERROR_CANNOT_GET_ITEM);\r", "+\t\t\tid = lpButton.idCommand;\r", "+\t\t}\r", "+\t\tif (OS.IsSP) {\r", "+\t\t\tif (!(0 <= index && index <= 1)) error (SWT.ERROR_CANNOT_GET_ITEM);\r", "+\t\t\tid = index == 0 ? id0 : id1;\r", "+\t\t}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1c4e42dd2cbd2433784602d69c332a4b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "b0693a12063ab35c44f34d89fd60d2e89368a94f", "commitAfterChange": "e9fff9da841962ff350a910fb52f584e5996a4f4", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "\r \r void createItem (MenuItem item, int index)", "signatureAfterChange": "\r \r void createItem (MenuItem item, int index)", "diff": ["-\t\tint flags = OS.MF_BYPOSITION;\r", "-\t\tif ((style & SWT.SEPARATOR) != 0) flags |= OS.MF_SEPARATOR;\r", "-\t\tsuccess = OS.InsertMenu (handle, index, flags, item.id, null); \r", "+\t\tint uFlags = OS.MF_BYPOSITION;\r", "+\t\tTCHAR lpNewItem = null;\r", "+\t\tif ((item.style & SWT.SEPARATOR) != 0) {\r", "+\t\t\tuFlags |= OS.MF_SEPARATOR;\r", "+\t\t} else {\r", "+\t\t\tlpNewItem = new TCHAR (0, \"\", true);\r", "+\t\t}\r", "+\t\tsuccess = OS.InsertMenu (handle, index, uFlags, item.id, lpNewItem);\r", "+\t\tif (success) {\r", "+\t\t\tMENUITEMINFO info = new MENUITEMINFO ();\r", "+\t\t\tinfo.cbSize = MENUITEMINFO.sizeof;\r", "+\t\t\tinfo.fMask = OS.MIIM_DATA;\r", "+\t\t\tinfo.dwItemData = item.id;\r", "+\t\t\tsuccess = OS.SetMenuItemInfo (handle, index, true, info);\r", "+\t\t}\r", "-\t\tinfo.fMask = OS.MIIM_ID | OS.MIIM_TYPE;\r", "-\t\tinfo.wID = item.id;\r", "+\t\tinfo.fMask = OS.MIIM_ID | OS.MIIM_TYPE | OS.MIIM_DATA;\r", "+\t\tinfo.wID = info.dwItemData = item.id;\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f80322d5a63922cecba7bf3b2f1f3daf", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "3d1071088ced6ed6e9f01c8d7208fa00cb52a57a", "commitAfterChange": "a9f618df2b93f8cb19629621c0313294fe974299", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 22, "signatureBeforeChange": "\r public MenuItem getItem (int index)", "signatureAfterChange": "\r public MenuItem getItem (int index)", "diff": ["-\tMENUITEMINFO info = new MENUITEMINFO ();\r", "-\tinfo.cbSize = MENUITEMINFO.sizeof;\r", "-\tinfo.fMask = OS.MIIM_DATA;\r", "-\tif (!OS.GetMenuItemInfo (handle, index, true, info)) {\r", "-\t\terror (SWT.ERROR_INVALID_RANGE);\r", "+\tint id = 0;\r", "+\tif (OS.IsPPC && hwndCB != 0) {\r", "+\t\tTBBUTTON lpButton = new TBBUTTON ();\r", "+\t\tint result = OS.SendMessage (hwndCB, OS.TB_GETBUTTON, index, lpButton);\r", "+\t\tif (result == 0) error (SWT.ERROR_CANNOT_GET_ITEM);\r", "+\t\tid = lpButton.idCommand;\r", "+\t} else {\r", "+\t\tMENUITEMINFO info = new MENUITEMINFO ();\r", "+\t\tinfo.cbSize = MENUITEMINFO.sizeof;\r", "+\t\tinfo.fMask = OS.MIIM_DATA;\r", "+\t\tif (!OS.GetMenuItemInfo (handle, index, true, info)) {\r", "+\t\t\terror (SWT.ERROR_INVALID_RANGE);\r", "+\t\t}\r", "+\t\tid = info.dwItemData;\r", "-\treturn parent.findMenuItem (info.dwItemData);\r", "+\treturn parent.findMenuItem (id);\r"]}], "num": 3233}