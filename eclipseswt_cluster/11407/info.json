{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "331ed246e9e1978acf745b4df4c0940c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e09e1304c6f9dd5e3b916f70c395da79", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "33b8da45cf5af610631c1a731109d8a5e601ac2c", "commitAfterChange": "14fbe017d1e3dc78020213280156fbd51d492d0a", "methodNumberBeforeChange": 300, "methodNumberAfterChange": 300, "signatureBeforeChange": "\r public void showSelection()", "signatureAfterChange": "\r public void showSelection()", "diff": ["-\tshowOffset(selection.x);\r", "-\tshowOffset(selection.y);\r", "+\tboolean selectionFits;\r", "+\tint startOffset, startLine, startX, endOffset, endLine, endX, offsetInLine;\r", "+\r", "+\t// is selection from right-to-left?\r", "+\tboolean rightToLeft = caretOffset == selection.x;\r", "+\r", "+\tif (rightToLeft) {\r", "+\t\tstartOffset = selection.y;\r", "+\t\tendOffset = selection.x;\r", "+\t} else {\r", "+\t\tstartOffset = selection.x;\r", "+\t\tendOffset = selection.y;\r", "+\t}\r", "+\t\r", "+\t// calculate the logical start and end values for the selection\r", "+\tstartLine = content.getLineAtOffset(startOffset);\r", "+\toffsetInLine = startOffset - content.getOffsetAtLine(startLine);\r", "+\tstartX = getXAtOffset(content.getLine(startLine), startLine, offsetInLine);\t\r", "+\tendLine  = content.getLineAtOffset(endOffset);\r", "+\toffsetInLine = endOffset - content.getOffsetAtLine(endLine);\r", "+\tendX = getXAtOffset(content.getLine(endLine), endLine, offsetInLine);\t\r", "+\r", "+\t// can the selection be fully displayed within the widget's visible width?\r", "+\tint w = getClientArea().width;\r", "+\tif (rightToLeft) {\r", "+\t\tselectionFits = startX - endX <= w;\r", "+\t} else {\r", "+\t\tselectionFits = endX - startX <= w;\r", "+\t}\r", "+\t\r", "+\tif (selectionFits) {\r", "+\t\t// show as much of the selection as possible by first showing\r", "+\t\t// the start of the selection\r", "+\t\tshowLocation(startX, startLine);\r", "+\t\t// endX value could change if showing startX caused a scroll to occur\r", "+\t\tendX = getXAtOffset(content.getLine(endLine), endLine, offsetInLine);\t\r", "+\t\tshowLocation(endX, endLine);\r", "+\t} else {\r", "+\t\t// just show the end of the selection since the selection start \r", "+\t\t// will not be visible\r", "+\t\tshowLocation(endX, endLine);\r", "+\t}\t \r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f6e0449e3e76ca120936d800eff1983a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "635a9e5d0a5f495ec272194dbb750eddc745876f", "commitAfterChange": "e83d77b7ddccf5500d06ea30a64ce0d090ac4b10", "methodNumberBeforeChange": 438, "methodNumberAfterChange": 306, "signatureBeforeChange": " public void showSelection()", "signatureAfterChange": " public void showSelection()", "diff": ["-\tboolean selectionFits;", "-\tint startOffset, startLine, startX, endOffset, endLine, endX, offsetInLine;", "-", "-", "+\tint startOffset, endOffset;", "+\tPoint startPos = getPointAtOffset(startOffset);\t", "+\tPoint endPos = getPointAtOffset(endOffset);\t", "+\t//TODO endPos.y should be the bottom of the line not the top", "-\t// calculate the logical start and end values for the selection", "-\tstartLine = content.getLineAtOffset(startOffset);", "-\toffsetInLine = startOffset - content.getOffsetAtLine(startLine);", "-\tstartX = getXAtOffset(content.getLine(startLine), startLine, offsetInLine);\t", "-\tendLine  = content.getLineAtOffset(endOffset);", "-\toffsetInLine = endOffset - content.getOffsetAtLine(endLine);", "-\tendX = getXAtOffset(content.getLine(endLine), endLine, offsetInLine);\t", "-", "-\tif (rightToLeft) {", "-\t\tselectionFits = startX - endX <= w;", "-\t} else {", "-\t\tselectionFits = endX - startX <= w;", "-\t}", "-\t", "+\tboolean selectionFits = rightToLeft ? startPos.x - endPos.x <= w : endPos.x - startPos.x <= w;", "-\t\tshowLocation(startX, startLine);", "-\t\t// endX value could change if showing startX caused a scroll to occur", "-\t\tendX = getXAtOffset(content.getLine(endLine), endLine, offsetInLine);\t", "-\t\tshowLocation(endX, endLine);", "+\t\tif (showLocation(startPos)) {", "+\t\t\t// endX value could change if showing startX caused a scroll to occur", "+\t\t\tendPos = getPointAtOffset(endOffset);\t", "+\t\t}", "+\t\tshowLocation(endPos);", "-\t\tshowLocation(endX, endLine);", "-\t}\t ", "-}", "+\t\tshowLocation(endPos);", "+\t}"]}], "num": 11407}