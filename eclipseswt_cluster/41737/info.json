{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ac907dde998bb10166e1cc1691d3dae3", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "28bc11beaa89b83ec4fef561285ffab5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "436c8edf0dcf146a81b51fba0c092a0b987bdc41", "commitAfterChange": "bed34e92206b958b6f5bad5e5819bdb30bd17013", "methodNumberBeforeChange": 47, "methodNumberAfterChange": 47, "signatureBeforeChange": " public void setItems (String [] items)", "signatureAfterChange": " public void setItems (String [] items)", "diff": ["-\tif (items.length==0) {", "-\t\t_removeAll();", "-\t\treturn;", "-\t}", "-\tint new_glist = 0;", "-\tfor (int i=0; i<items.length; i++) {", "-\t\tString string = items [i];", "-\t\t// FIXME leaked strings and glist", "-\t\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);", "-\t\tbyte [] buffer = Converter.wcsToMbcs (null, string, true);", "-\t\tint data = OS.g_malloc (buffer.length);", "-\t\tOS.memmove (data, buffer, buffer.length);", "-\t\tnew_glist = OS.g_list_append (new_glist, data);", "-\t}", "-\tOS.gtk_combo_set_popdown_strings (handle, new_glist);", "-\tif (glist != 0) {", "-\t\tint count = OS.g_list_length (glist);", "-\t\tfor (int i=0; i<count; i++) {", "-\t\t\tint data = OS.g_list_nth_data (glist, i);", "-\t\t\tif (data != 0) OS.g_free (data);", "+\tGtkCombo combo = new GtkCombo ();", "+\tOS.memmove (combo, handle, GtkCombo.sizeof);", "+\tif (items.length == 0) {", "+\t\tOS.gtk_list_clear_items (combo.list, 0, -1);", "+\t\t//LEAK", "+\t\tglist = 0;", "+\t} else {", "+\t\tint new_glist = 0;", "+\t\tfor (int i=0; i<items.length; i++) {", "+\t\t\tString string = items [i];", "+\t\t\t// FIXME leaked strings and glist", "+\t\t\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);", "+\t\t\tbyte [] buffer = Converter.wcsToMbcs (null, string, true);", "+\t\t\tint data = OS.g_malloc (buffer.length);", "+\t\t\tOS.memmove (data, buffer, buffer.length);", "+\t\t\tnew_glist = OS.g_list_append (new_glist, data);", "-\t\tOS.g_list_free (glist);", "+\t\tOS.gtk_signal_handler_block_by_data (combo.entry, SWT.Modify);", "+\t\tOS.gtk_signal_handler_block_by_data (combo.list, SWT.Selection);", "+\t\tOS.gtk_combo_set_popdown_strings (handle, new_glist);", "+\t\tOS.gtk_signal_handler_unblock_by_data (combo.entry, SWT.Modify);", "+\t\tOS.gtk_signal_handler_unblock_by_data (combo.list, SWT.Selection);", "+\t\tif (glist != 0) {", "+\t\t\tint count = OS.g_list_length (glist);", "+\t\t\tfor (int i=0; i<count; i++) {", "+\t\t\t\tint data = OS.g_list_nth_data (glist, i);", "+\t\t\t\tif (data != 0) OS.g_free (data);", "+\t\t\t}", "+\t\t\tOS.g_list_free (glist);", "+\t\t}", "+\t\tglist = new_glist;", "-\tglist = new_glist;", "+\tOS.gtk_signal_handler_block_by_data (combo.entry, SWT.Modify);", "+\tOS.gtk_editable_delete_text (combo.entry, 0, -1);", "+\tOS.gtk_signal_handler_unblock_by_data (combo.entry, SWT.Modify);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4c842a4585df91cca2b9deed6d45189f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk1x/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "436c8edf0dcf146a81b51fba0c092a0b987bdc41", "commitAfterChange": "bed34e92206b958b6f5bad5e5819bdb30bd17013", "methodNumberBeforeChange": 47, "methodNumberAfterChange": 47, "signatureBeforeChange": " public void setItems (String [] items)", "signatureAfterChange": " public void setItems (String [] items)", "diff": ["-\tif (items.length==0) {", "-\t\t_removeAll();", "-\t\treturn;", "-\t}", "-\tint new_glist = 0;", "-\tfor (int i=0; i<items.length; i++) {", "-\t\tString string = items [i];", "-\t\t// FIXME leaked strings and glist", "-\t\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);", "-\t\tbyte [] buffer = Converter.wcsToMbcs (null, string, true);", "-\t\tint data = OS.g_malloc (buffer.length);", "-\t\tOS.memmove (data, buffer, buffer.length);", "-\t\tnew_glist = OS.g_list_append (new_glist, data);", "-\t}", "-\tOS.gtk_combo_set_popdown_strings (handle, new_glist);", "-\tif (glist != 0) {", "-\t\tint count = OS.g_list_length (glist);", "-\t\tfor (int i=0; i<count; i++) {", "-\t\t\tint data = OS.g_list_nth_data (glist, i);", "-\t\t\tif (data != 0) OS.g_free (data);", "+\tGtkCombo combo = new GtkCombo ();", "+\tOS.memmove (combo, handle, GtkCombo.sizeof);", "+\tif (items.length == 0) {", "+\t\tOS.gtk_list_clear_items (combo.list, 0, -1);", "+\t\t//LEAK", "+\t\tglist = 0;", "+\t} else {", "+\t\tint new_glist = 0;", "+\t\tfor (int i=0; i<items.length; i++) {", "+\t\t\tString string = items [i];", "+\t\t\t// FIXME leaked strings and glist", "+\t\t\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);", "+\t\t\tbyte [] buffer = Converter.wcsToMbcs (null, string, true);", "+\t\t\tint data = OS.g_malloc (buffer.length);", "+\t\t\tOS.memmove (data, buffer, buffer.length);", "+\t\t\tnew_glist = OS.g_list_append (new_glist, data);", "-\t\tOS.g_list_free (glist);", "+\t\tOS.gtk_signal_handler_block_by_data (combo.entry, SWT.Modify);", "+\t\tOS.gtk_signal_handler_block_by_data (combo.list, SWT.Selection);", "+\t\tOS.gtk_combo_set_popdown_strings (handle, new_glist);", "+\t\tOS.gtk_signal_handler_unblock_by_data (combo.entry, SWT.Modify);", "+\t\tOS.gtk_signal_handler_unblock_by_data (combo.list, SWT.Selection);", "+\t\tif (glist != 0) {", "+\t\t\tint count = OS.g_list_length (glist);", "+\t\t\tfor (int i=0; i<count; i++) {", "+\t\t\t\tint data = OS.g_list_nth_data (glist, i);", "+\t\t\t\tif (data != 0) OS.g_free (data);", "+\t\t\t}", "+\t\t\tOS.g_list_free (glist);", "+\t\t}", "+\t\tglist = new_glist;", "-\tglist = new_glist;", "+\tOS.gtk_signal_handler_block_by_data (combo.entry, SWT.Modify);", "+\tOS.gtk_editable_delete_text (combo.entry, 0, -1);", "+\tOS.gtk_signal_handler_unblock_by_data (combo.entry, SWT.Modify);"]}], "num": 41737}