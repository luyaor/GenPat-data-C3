{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3f4f6cadaf953679a409a378f3594691", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "184fd94262bbdd8099b4397aa8a7240b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/List.java", "commitBeforeChange": "fa3d675595b33a2b5291d7bf5d7294efc90c66b4", "commitAfterChange": "85fb5f95e7007b054d710666a8df54731f3daa88", "methodNumberBeforeChange": 59, "methodNumberAfterChange": 59, "signatureBeforeChange": " public void showSelection ()", "signatureAfterChange": " public void showSelection ()", "diff": ["+", "+\tOS.gtk_widget_realize (handle);", "+", "+\t/*", "+\t * Reverting the code for bug 459072. With gtk_tree_view_scroll_to_cell, there are some pending gtk events.", "+\t * the scroll does not happen immediately. We still need to perform gtk_tree_view_scroll_to_point to complete", "+\t * all the pending events and update top index.", "+\t */", "+\tGdkRectangle visibleRect = new GdkRectangle ();", "+\tOS.gtk_tree_view_get_visible_rect (handle, visibleRect);", "+\tGdkRectangle cellRect = new GdkRectangle ();", "+\tOS.gtk_tree_view_get_cell_area (handle, path, 0, cellRect);", "+\tint[] tx = new int[1], ty = new int[1];", "+\tOS.gtk_tree_view_convert_bin_window_to_tree_coords(handle, cellRect.x, cellRect.y, tx, ty);", "+\tif (ty[0] < visibleRect.y ) {", "+\t\tOS.gtk_tree_view_scroll_to_point (handle, -1, ty[0]);", "+\t} else {", "+\t\tint height = Math.min (visibleRect.height, cellRect.height);", "+\t\tif (ty[0] + height > visibleRect.y + visibleRect.height) {", "+\t\t\tty[0] += cellRect.height - visibleRect.height;", "+\t\t\tOS.gtk_tree_view_scroll_to_point (handle, -1, ty[0]);", "+\t\t}", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "be16f5cbf1711697cc2180a2decf4f66", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/ToolTip.java", "commitBeforeChange": "5891215fadbf806d934924c675de30dc5a83a2a8", "commitAfterChange": "0edb021ec11c3131c9e0956019436816e5cdae7a", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": "  int gtk_size_allocate (int widget, int allocation)", "signatureAfterChange": "  int gtk_size_allocate (int widget, int allocation)", "diff": ["-\tif (x == -1 || y == -1) {", "-\t\tint [] x = new int [1], y = new int [1];", "-\t\tOS.gdk_window_get_pointer (0, x, y, null);", "-\t\tOS.gtk_window_move (widget, x [0], y [0]);", "-\t} else {", "-\t\tOS.gtk_window_move (widget, x, y);", "+\tint x = this.x;", "+\tint y = this.y;", "+\tif (item != null) {", "+\t\tOS.gtk_widget_realize (item.handle);", "+\t\tint /*long*/ window = OS.GTK_WIDGET_WINDOW (item.handle);", "+\t\tint [] px = new int [1], py = new int [1];", "+\t\tOS.gdk_window_get_origin (window, px, py);", "+\t\tx = px [0];", "+\t\ty = py [0];", "+\tif (x == -1 || y == -1) {", "+\t\tint [] px = new int [1], py = new int [1];", "+\t\tOS.gdk_window_get_pointer (0, px, py, null);", "+\t\tx = px [0];", "+\t\ty = py [0];", "+\t}", "+\tint /*long*/ screen = OS.gdk_screen_get_default ();", "+\tOS.gtk_widget_realize (widget);", "+\tint monitorNumber = OS.gdk_screen_get_monitor_at_window (screen, OS.GTK_WIDGET_WINDOW (widget));", "+\tGdkRectangle dest = new GdkRectangle ();", "+\tOS.gdk_screen_get_monitor_geometry (screen, monitorNumber, dest);", "+\tint w = OS.GTK_WIDGET_WIDTH (widget);", "+\tint h = OS.GTK_WIDGET_HEIGHT (widget);", "+\tif (dest.height < y + h) y -= h;", "+\tif (dest.width < x + w) x -= w;", "+\tOS.gtk_window_move (widget, x, y);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4cf44e3f65e47fa8d998f727b82d3827", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Shell.java", "commitBeforeChange": "30cc1f100cb16f55356e6eee7439e0283aa2b1d1", "commitAfterChange": "0db78e43799ad4a5901b28b92c3818dc972cf80c", "methodNumberBeforeChange": 77, "methodNumberAfterChange": 77, "signatureBeforeChange": "  int sizeAllocateProc (int handle, int arg0, int user_data)", "signatureAfterChange": "  int sizeAllocateProc (int handle, int arg0, int user_data)", "diff": ["+\tint offset = 16;", "-\tOS.gtk_window_move (handle, x [0], y [0] + 16);", "+\ty [0] += offset;", "+\tint /*long*/ screen = OS.gdk_screen_get_default ();", "+\tif (screen != 0) {", "+\t\tint monitorNumber = OS.gdk_screen_get_monitor_at_point (screen, x[0], y[0]);", "+\t\tGdkRectangle dest = new GdkRectangle ();", "+\t\tOS.gdk_screen_get_monitor_geometry (screen, monitorNumber, dest);", "+\t\tint width = OS.GTK_WIDGET_WIDTH (handle);", "+\t\tint height = OS.GTK_WIDGET_HEIGHT (handle);", "+\t\tif ((x[0] + width) > (dest.x + dest.width)) {", "+\t\t\tx [0] = (dest.x + dest.width) - width;", "+\t\t}", "+\t\tif ((y[0] + height - offset) > (dest.y + dest.height)) {", "+\t\t\ty[0] = (dest.y + dest.height) - height;", "+\t\t}", "+\t} ", "+\tOS.gtk_window_move (handle, x [0], y [0]);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3b5aed2cada1b5a4180d952e8360fe79", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/carbon/org/eclipse/swt/dnd/TreeDragUnderEffect.java", "commitBeforeChange": "bd8d9571ea050e4c23edda8436d67a1ef053b218", "commitAfterChange": "4894c17964a7684074639c1b3befc4d7c320b687", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 5, "signatureBeforeChange": " void setDragUnderEffect(int effect, TreeItem item)", "signatureAfterChange": " void show(int effect, int x, int y)", "diff": ["-void setDragUnderEffect(int effect, TreeItem item) {", "+}", "+void show(int effect, int x, int y) {", "+\teffect = checkEffect(effect);", "+\tTreeItem item = (TreeItem)getItem(x, y);", "-\t\tscrollIndex = null;", "+\t\tscrollItem = null;", "-\t\tif (item != null && item.equals(scrollIndex)  && scrollBeginTime != 0) {", "+\t\tif (item != null && item.equals(scrollItem)  && scrollBeginTime != 0) {", "-\t\t\t\tscroll(item);", "+\t\t\t\tRectangle area = tree.getClientArea();", "+\t\t\t\tint headerHeight = tree.getHeaderHeight();", "+\t\t\t\tint itemHeight= tree.getItemHeight();", "+\t\t\t\tPoint pt = new Point(x, y);", "+\t\t\t\tpt = tree.getDisplay().map(null, tree, pt);", "+\t\t\t\tTreeItem nextItem = null;", "+\t\t\t\tif (pt.y < area.y + headerHeight + 2 * itemHeight) {", "+\t\t\t\t\tnextItem = previousItem(item);", "+\t\t\t\t}", "+\t\t\t\tif (pt.y > area.y + area.height - 2 * itemHeight) {", "+\t\t\t\t\tnextItem = nextItem(item);", "+\t\t\t\t}", "+\t\t\t\tif (nextItem != null) tree.showItem(nextItem);", "-\t\t\t\tscrollIndex = null;", "+\t\t\t\tscrollItem = null;", "-\t\t\tscrollIndex = item;", "+\t\t\tscrollItem = item;"]}], "num": 40029}