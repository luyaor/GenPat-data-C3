{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "581c4d27fd14688113a917148aa8bf6c", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bdf3674d99a28b5e57249d9b361a53b0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "98f31492caf99e1c73e8107a75d65654daaee107", "commitAfterChange": "09221f4246ffb04bd30a4f2f5459d4e658664039", "methodNumberBeforeChange": 38, "methodNumberAfterChange": 38, "signatureBeforeChange": " public TreeItem [] getSelection ()", "signatureAfterChange": " public TreeItem [] getSelection ()", "diff": ["-//\tint [] count = new int [1];", "-//\tif (OS.GetDataBrowserItemCount (handle, OS.kDataBrowserNoItem, true, OS.kDataBrowserItemIsSelected, count) != OS.noErr) {", "-//\t\terror (SWT.ERROR_CANNOT_GET_COUNT);", "-//\t}", "-//\tTreeItem [] result = new TreeItem [count[0]];", "-//\tif (count[0] > 0) {", "-//\t\tint ptr = OS.NewHandle (0);", "-//\t\tif (count[0] == 1) {", "-//\t\t\tif (OS.GetDataBrowserItems (handle, OS.kDataBrowserNoItem, true, OS.kDataBrowserItemIsSelected, ptr) != OS.noErr) {", "-//\t\t\t\terror (SWT.ERROR_CANNOT_GET_SELECTION);", "-//\t\t\t}", "-//\t\t\tOS.HLock (ptr);", "-//\t\t\tint [] id = new int [1];", "-//\t\t\tOS.memmove (id, ptr, 4);", "-//\t\t\tOS.memmove (id, id [0], 4);", "-//\t\t\tresult [0] = _getItem (id [0], true);", "-//\t\t\tOS.HUnlock (ptr);", "-//\t\t} else {", "-//\t\t\tgetSelection (result, OS.kDataBrowserNoItem, ptr, 0);", "-//\t\t}", "-//\t\tOS.DisposeHandle (ptr);", "-//\t}", "-//\treturn result;", "-\treturn new TreeItem[0];", "+\tNSOutlineView widget = (NSOutlineView)view;", "+\tif (widget.numberOfSelectedRows() == 0) {", "+\t\treturn new TreeItem [0];", "+\t}", "+\tNSIndexSet selection = widget.selectedRowIndexes();", "+\tint count = selection.count();", "+\tint [] indexBuffer = new int [count];", "+\tselection.getIndexes(indexBuffer, count, 0);", "+\tTreeItem [] result = new TreeItem  [count];", "+\tfor (int i=0; i<count; i++) {", "+\t\tid item = widget.itemAtRow(indexBuffer [i]);", "+\t\tint jniRef = OS.objc_msgSend(item.id, OS.sel_tag);", "+\t\tif (jniRef != -1 && jniRef != 0) {", "+\t\t\t//TODO virtual", "+\t\t\tresult[i] = (TreeItem)OS.JNIGetObject(jniRef);", "+\t\t}", "+\t}", "+\treturn result;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2d6629c9982fea6b4a34cdb021c95dcb", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Printing/carbon/org/eclipse/swt/printing/Printer.java", "commitBeforeChange": "8b58c269ee653fc8374b5b45a0e6d529e6a1ef82", "commitAfterChange": "f697c2f3c6cb12d162d7452013f38ec22841b4b0", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": " public static PrinterData[] getPrinterList()", "signatureAfterChange": " public static PrinterData[] getPrinterList()", "diff": ["-\tPrinterData printerList[] = new PrinterData[0];", "-\treturn printerList;", "+\tint[] printSession = new int[1];", "+\tOS.PMCreateSession(printSession);", "+\tif (printSession[0] != 0) {", "+\t\tint[] printerList = new int[1], currentIndex = new int[1], currentPrinter = new int[1];", "+\t\tOS.PMSessionCreatePrinterList(printSession[0], printerList, currentIndex, currentPrinter);", "+\t\tint count = OS.CFArrayGetCount(printerList[0]);", "+\t\tPrinterData[] result = new PrinterData[count];", "+\t\tfor (int i=0; i<count; i++) {", "+\t\t\tString name = getString(OS.CFArrayGetValueAtIndex(printerList[0], i));", "+\t\t\tPrinterData data = result[i] = new PrinterData(DRIVER, name);", "+\t\t}", "+\t\tOS.CFRelease(printerList[0]);", "+\t\tOS.PMRelease(printSession[0]);", "+\t\treturn result;", "+\t}", "+\treturn new PrinterData[0];"]}], "num": 22595}