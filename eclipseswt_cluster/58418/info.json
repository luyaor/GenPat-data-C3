{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "34b8d7b40705404684b169b7800af68b", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f5a071390f907ff85877d5cb9183a03d", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/emulated/treetable/org/eclipse/swt/widgets/Tree2.java", "commitBeforeChange": "977d5e0f203ec4ef6c7d327c6fb00fb7e3a9fea1", "commitAfterChange": "d90c1dac39bb5b1c9da1307d0ac9b1f40b093e4c", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 21, "signatureBeforeChange": " void doMouseDown(Event event)", "signatureAfterChange": " void doMouseDown(Event event)", "diff": ["+\tif ((event.stateMask & SWT.SHIFT) == 0) anchorItem = null;", "+", "-\t\t\t} else {", "-\t\t\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == 0) {", "-\t\t\t\t\tselectItem(selectedItem, false);", "-\t\t\t\t\tsetFocusItem(selectedItem, true);", "-\t\t\t\t\tEvent newEvent = new Event();", "-\t\t\t\t\tnewEvent.item = selectedItem;", "-\t\t\t\t\tsendEvent(SWT.Selection, newEvent);", "-\t\t\t\t\tredrawItem(selectedItem.availableIndex);", "-\t\t\t\t}", "+\t\t\t\treturn;", "-\t\t} else {\t/* item is selected */", "-\t\t\tif (event.button == 1) {", "-\t\t\t\t/* fire a selection event, though the selection did not change */", "-\t\t\t\tEvent newEvent = new Event();", "-\t\t\t\tnewEvent.item = selectedItem;", "-\t\t\t\tsendEvent(SWT.Selection, newEvent);", "-\t\t\t}", "-\t\t}", "-\t} else {\t/* SWT.MULTI */", "-\t\tif (!selectedItem.selected) {", "-\t\t\tif (event.button == 1) {", "-\t\t\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == SWT.SHIFT) {", "-\t\t\t\t\t// TODO do shift-select", "-\t\t\t\t} else {", "-\t\t\t\t\tselectItem(selectedItem, (event.stateMask & SWT.CTRL) != 0);", "-\t\t\t\t\tsetFocusItem(selectedItem, true);", "-\t\t\t\t\tEvent newEvent = new Event();", "-\t\t\t\t\tnewEvent.item = selectedItem;", "-\t\t\t\t\tsendEvent(SWT.Selection, newEvent);", "-\t\t\t\t\tredrawItem(selectedItem.availableIndex);", "-\t\t\t\t}", "-\t\t\t} else {\t/* button 3 */", "-\t\t\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == 0) {", "-\t\t\t\t\tselectItem(selectedItem, false);", "-\t\t\t\t\tsetFocusItem(selectedItem, true);", "-\t\t\t\t\tEvent newEvent = new Event();", "-\t\t\t\t\tnewEvent.item = selectedItem;", "-\t\t\t\t\tsendEvent(SWT.Selection, newEvent);", "-\t\t\t\t\tredrawItem(selectedItem.availableIndex);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t} else {\t/* item is selected */", "-\t\t\tif (event.button != 1) return;", "-\t\t\tif ((event.stateMask & SWT.CTRL) != 0) {", "-\t\t\t\tremoveSelectedItem(getSelectionIndex(selectedItem));", "+\t\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == 0) {", "+\t\t\t\tselectItem(selectedItem, false);", "-\t\t\t\tredrawItem(selectedItem.availableIndex);", "-\t\t\t} else {", "-\t\t\t\tif ((event.stateMask & SWT.SHIFT) != 0) {", "-\t\t\t\t\t// TODO study this", "-\t\t\t\t} else {", "-\t\t\t\t\tselectItem(selectedItem, false);", "-\t\t\t\t\tsetFocusItem(selectedItem, true);", "-\t\t\t\t\tEvent newEvent = new Event();", "-\t\t\t\t\tnewEvent.item = selectedItem;", "-\t\t\t\t\tsendEvent(SWT.Selection, newEvent);", "-\t\t\t\t\tredrawItem(selectedItem.availableIndex);", "-\t\t\t\t}", "+\t\t\t\tredrawItem(selectedItem.availableIndex);", "+\t\t\t\treturn;", "-\t}\t\t", "+\t\t/* item is selected */", "+\t\tif (event.button == 1) {", "+\t\t\t/* fire a selection event, though the selection did not change */", "+\t\t\tEvent newEvent = new Event();", "+\t\t\tnewEvent.item = selectedItem;", "+\t\t\tsendEvent(SWT.Selection, newEvent);", "+\t\t\treturn;", "+\t\t}", "+\t}", "+\t/* SWT.MULTI */", "+\tif (!selectedItem.selected) {", "+\t\tif (event.button == 1) {", "+\t\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == SWT.SHIFT) {", "+\t\t\t\tif (anchorItem == null) anchorItem = focusItem;", "+\t\t\t\tint anchorIndex = anchorItem.availableIndex;", "+\t\t\t\tint selectIndex = selectedItem.availableIndex;", "+\t\t\t\tTreeItem2[] newSelection = new TreeItem2 [Math.abs(anchorIndex - selectIndex) + 1];", "+\t\t\t\tint step = anchorIndex < selectIndex ? 1 : -1;", "+\t\t\t\tint writeIndex = 0;", "+\t\t\t\tfor (int i = anchorIndex; i != selectIndex; i += step) {", "+\t\t\t\t\tnewSelection[writeIndex++] = availableItems[i];", "+\t\t\t\t}", "+\t\t\t\tnewSelection[writeIndex] = availableItems[selectIndex];", "+\t\t\t\tsetSelection(newSelection);", "+\t\t\t\tsetFocusItem(selectedItem, true);", "+\t\t\t\tEvent newEvent = new Event();", "+\t\t\t\tnewEvent.item = selectedItem;", "+\t\t\t\tsendEvent(SWT.Selection, newEvent);", "+\t\t\t\tredrawItems(Math.min(anchorIndex, selectIndex), Math.max(anchorIndex, selectIndex));", "+\t\t\t\treturn;", "+\t\t\t}", "+\t\t\tselectItem(selectedItem, (event.stateMask & SWT.CTRL) != 0);", "+\t\t\tsetFocusItem(selectedItem, true);", "+\t\t\tEvent newEvent = new Event();", "+\t\t\tnewEvent.item = selectedItem;", "+\t\t\tsendEvent(SWT.Selection, newEvent);", "+\t\t\tredrawItem(selectedItem.availableIndex);", "+\t\t\treturn;", "+\t\t}", "+\t\t/* button 3 */", "+\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == 0) {", "+\t\t\tselectItem(selectedItem, false);", "+\t\t\tsetFocusItem(selectedItem, true);", "+\t\t\tEvent newEvent = new Event();", "+\t\t\tnewEvent.item = selectedItem;", "+\t\t\tsendEvent(SWT.Selection, newEvent);", "+\t\t\tredrawItem(selectedItem.availableIndex);", "+\t\t\treturn;", "+\t\t}", "+\t}", "+\t/* item is selected */", "+\tif (event.button != 1) return;", "+\tif ((event.stateMask & SWT.CTRL) != 0) {", "+\t\tremoveSelectedItem(getSelectionIndex(selectedItem));", "+\t\tsetFocusItem(selectedItem, true);", "+\t\tredrawItem(selectedItem.availableIndex);", "+\t\tEvent newEvent = new Event();", "+\t\tnewEvent.item = selectedItem;", "+\t\tsendEvent(SWT.Selection, newEvent);", "+\t\treturn;", "+\t}", "+\tif ((event.stateMask & SWT.SHIFT) != 0) {", "+\t\tif (anchorItem == null) anchorItem = focusItem;", "+\t\tint anchorIndex = anchorItem.availableIndex;", "+\t\tint selectIndex = selectedItem.availableIndex;", "+\t\tTreeItem2[] newSelection = new TreeItem2 [Math.abs(anchorIndex - selectIndex) + 1];", "+\t\tint step = anchorIndex < selectIndex ? 1 : -1;", "+\t\tint writeIndex = 0;", "+\t\tfor (int i = anchorIndex; i != selectIndex; i += step) {", "+\t\t\tnewSelection[writeIndex++] = availableItems[i];", "+\t\t}", "+\t\tnewSelection[writeIndex] = availableItems[selectIndex];", "+\t\tsetSelection(newSelection);", "+\t\tsetFocusItem(selectedItem, true);", "+\t\tEvent newEvent = new Event();", "+\t\tnewEvent.item = selectedItem;", "+\t\tsendEvent(SWT.Selection, newEvent);", "+\t\tredrawItems(Math.min(anchorIndex, selectIndex), Math.max(anchorIndex, selectIndex));", "+\t\treturn;", "+\t}", "+\tselectItem(selectedItem, false);", "+\tsetFocusItem(selectedItem, true);", "+\tEvent newEvent = new Event();", "+\tnewEvent.item = selectedItem;", "+\tsendEvent(SWT.Selection, newEvent);", "+\tredrawItem(selectedItem.availableIndex);", "+\treturn;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6455b4706f6816a79bdbd777757df3d4", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/emulated/treetable/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "ed6471c0ec0d0ee0c1436d2bdeadc8ba513ab4fd", "commitAfterChange": "034d8fba7f4ca7576ddaeee539a2fb56ee664327", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 69, "signatureBeforeChange": " void columnMouseDown(Event event)", "signatureAfterChange": " void onMouseDown (Event event)", "diff": ["- */", "-void columnMouseDown(Event event) {", "-\tint itemHeight = getItemHeight();", "-\tint itemIndex;", "-\tTableItem hitItem;", "-\tTableColumn hitColumn = getColumnAtX (event.x);", "-", "-\tif (isFocusControl () == false) {", "-\t\tforceFocus ();", "-\t}", "-\tif (hitColumn != null) {", "-\t\titemIndex = (event.y - getHeaderHeight()) / itemHeight + getTopIndex();", "-\t\thitItem = (TableItem) getVisibleItem(itemIndex);", "-\t\tif (hitItem != null) {", "-\t\t\tif (hitItem.isSelectionHit(event.x) == true) {", "-\t\t\t\tdoMouseSelect(hitItem, itemIndex, event.stateMask, event.button);", "-\t\t\t}", "-\t\t\telse ", "-\t\t\tif (hitItem.isCheckHit(new Point(event.x, event.y)) == true) {", "-\t\t\t\t// only react to button one clicks. fixes bug 6770", "-\t\t\t\tif (event.button != 1) {", "-\t\t\t\t\treturn;", "-\t\t\t\t}", "-\t\t\t\tdoCheckItem(hitItem);", "-\t\t\t}", "-\t\t}", "-\t}", "-}", "+}", "+void onMouseDown (Event event) {", "+\tif (!isFocusControl ()) setFocus ();", "+\tint index = (event.y - getHeaderHeight ()) / itemHeight + topIndex;", "+\tif (!(0 <= index && index < items.length)) return;\t/* not on an available item */", "+\tTableItem selectedItem = items [index];", "+\t", "+\t/* if click was in checkbox */", "+\tif ((style & SWT.CHECK) != 0 && selectedItem.getCheckboxBounds ().contains (event.x, event.y)) {", "+\t\tif (event.button != 1) return;", "+\t\tselectedItem.setChecked (!selectedItem.checked);", "+\t\tEvent newEvent = new Event ();", "+\t\tnewEvent.item = selectedItem;", "+\t\tnewEvent.detail = SWT.CHECK;", "+\t\tpostEvent (SWT.Selection, newEvent);", "+\t\treturn;", "+\t}", "+\t", "+\tif (!selectedItem.getHitBounds ().contains (event.x, event.y)) return;", "+\t", "+\tif ((event.stateMask & SWT.SHIFT) == 0 && event.keyCode != SWT.SHIFT) anchorItem = null;", "+", "+\tif ((style & SWT.SINGLE) != 0) {", "+\t\tif (!selectedItem.isSelected ()) {", "+\t\t\tif (event.button == 1) {", "+\t\t\t\tselectItem (selectedItem, false);", "+\t\t\t\tsetFocusItem (selectedItem, true);", "+\t\t\t\tredrawItem (selectedItem.index, true);", "+\t\t\t\tEvent newEvent = new Event ();", "+\t\t\t\tnewEvent.item = selectedItem;", "+\t\t\t\tpostEvent (SWT.Selection, newEvent);", "+\t\t\t\treturn;", "+\t\t\t}", "+\t\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == 0) {", "+\t\t\t\tselectItem (selectedItem, false);", "+\t\t\t\tsetFocusItem (selectedItem, true);", "+\t\t\t\tredrawItem (selectedItem.index, true);", "+\t\t\t\tEvent newEvent = new Event ();", "+\t\t\t\tnewEvent.item = selectedItem;", "+\t\t\t\tpostEvent (SWT.Selection, newEvent);", "+\t\t\t\treturn;", "+\t\t\t}", "+\t\t}", "+\t\t/* item is selected */", "+\t\tif (event.button == 1) {", "+\t\t\t/* fire a selection event, though the selection did not change */", "+\t\t\tEvent newEvent = new Event ();", "+\t\t\tnewEvent.item = selectedItem;", "+\t\t\tpostEvent (SWT.Selection, newEvent);", "+\t\t\treturn;", "+\t\t}", "+\t}", "+\t/* SWT.MULTI */", "+\tif (!selectedItem.isSelected ()) {", "+\t\tif (event.button == 1) {", "+\t\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == SWT.SHIFT) {", "+\t\t\t\tif (anchorItem == null) anchorItem = focusItem;", "+\t\t\t\tint anchorIndex = anchorItem.index;", "+\t\t\t\tint selectIndex = selectedItem.index;", "+\t\t\t\tTableItem[] newSelection = new TableItem [Math.abs (anchorIndex - selectIndex) + 1];", "+\t\t\t\tint step = anchorIndex < selectIndex ? 1 : -1;", "+\t\t\t\tint writeIndex = 0;", "+\t\t\t\tfor (int i = anchorIndex; i != selectIndex; i += step) {", "+\t\t\t\t\tnewSelection [writeIndex++] = items [i];", "+\t\t\t\t}", "+\t\t\t\tnewSelection [writeIndex] = items [selectIndex];", "+\t\t\t\tsetSelection (newSelection);", "+\t\t\t\tsetFocusItem (selectedItem, true);", "+\t\t\t\tredrawItems (", "+\t\t\t\t\tMath.min (anchorIndex, selectIndex),", "+\t\t\t\t\tMath.max (anchorIndex, selectIndex),", "+\t\t\t\t\ttrue);", "+\t\t\t\tEvent newEvent = new Event ();", "+\t\t\t\tnewEvent.item = selectedItem;", "+\t\t\t\tpostEvent (SWT.Selection, newEvent);", "+\t\t\t\treturn;", "+\t\t\t}", "+\t\t\tselectItem (selectedItem, (event.stateMask & SWT.CTRL) != 0);", "+\t\t\tsetFocusItem (selectedItem, true);", "+\t\t\tredrawItem (selectedItem.index, true);", "+\t\t\tEvent newEvent = new Event ();", "+\t\t\tnewEvent.item = selectedItem;", "+\t\t\tpostEvent (SWT.Selection, newEvent);", "+\t\t\treturn;", "+\t\t}", "+\t\t/* button 3 */", "+\t\tif ((event.stateMask & (SWT.CTRL | SWT.SHIFT)) == 0) {", "+\t\t\tselectItem (selectedItem, false);", "+\t\t\tsetFocusItem (selectedItem, true);", "+\t\t\tredrawItem (selectedItem.index, true);", "+\t\t\tEvent newEvent = new Event ();", "+\t\t\tnewEvent.item = selectedItem;", "+\t\t\tpostEvent (SWT.Selection, newEvent);", "+\t\t\treturn;", "+\t\t}", "+\t}", "+\t/* item is selected */", "+\tif ((event.stateMask & SWT.CTRL) != 0) {", "+\t\tremoveSelectedItem (getSelectionIndex (selectedItem));", "+\t\tsetFocusItem (selectedItem, true);", "+\t\tredrawItem (selectedItem.index, true);", "+\t\tEvent newEvent = new Event ();", "+\t\tnewEvent.item = selectedItem;", "+\t\tpostEvent (SWT.Selection, newEvent);", "+\t\treturn;", "+\tif ((event.stateMask & SWT.SHIFT) != 0) {", "+\t\tif (anchorItem == null) anchorItem = focusItem;", "+\t\tint anchorIndex = anchorItem.index;", "+\t\tint selectIndex = selectedItem.index;", "+\t\tTableItem[] newSelection = new TableItem [Math.abs (anchorIndex - selectIndex) + 1];", "+\t\tint step = anchorIndex < selectIndex ? 1 : -1;", "+\t\tint writeIndex = 0;", "+\t\tfor (int i = anchorIndex; i != selectIndex; i += step) {", "+\t\t\tnewSelection [writeIndex++] = items [i];", "+\t\t}", "+\t\tnewSelection [writeIndex] = items [selectIndex];", "+\t\tsetSelection (newSelection);", "+\t\tsetFocusItem (selectedItem, true);", "+\t\tredrawItems (", "+\t\t\tMath.min (anchorIndex, selectIndex),", "+\t\t\tMath.max (anchorIndex, selectIndex),", "+\t\t\ttrue);", "+\t\tEvent newEvent = new Event ();", "+\t\tnewEvent.item = selectedItem;", "+\t\tpostEvent (SWT.Selection, newEvent);", "+\t\treturn;", "+\t}", "+\tselectItem (selectedItem, false);", "+\tsetFocusItem (selectedItem, true);", "+\tredrawItem (selectedItem.index, true);", "+\tEvent newEvent = new Event ();", "+\tnewEvent.item = selectedItem;", "+\tpostEvent (SWT.Selection, newEvent);"]}], "num": 58418}