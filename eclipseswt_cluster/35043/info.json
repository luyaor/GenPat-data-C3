{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "62d05fec6fe89105de5b232f1282d4e7", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "16e3dd90c7485ad8f3006aecdb3e3440", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "46122b3930811494ac5f7b01c7dfcc2d7b0f32a3", "commitAfterChange": "4bd006be41519b55bc5ecd853136f9118e70859b", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": " public int internal_new_GC (GCData data)", "signatureAfterChange": " public int internal_new_GC (GCData data)", "diff": ["-\t\t", "-\t\tif (imageRep.hasAlpha()) {", "-\t\t\tint bpr = width * 4;", "-\t\t\trep = (NSBitmapImageRep)new NSBitmapImageRep().alloc();", "-\t\t\tint /*long*/ bitmapData = imageRep.bitmapData();", "-\t\t\tif (data.bitmapDataAddress != 0) OS.free(data.bitmapDataAddress);", "-\t\t\tdata.bitmapDataAddress = OS.malloc(C.PTR_SIZEOF);", "-\t\t\tOS.memmove(data.bitmapDataAddress, new int /*long*/[] {bitmapData}, C.PTR_SIZEOF);", "-\t\t\trep = rep.initWithBitmapDataPlanes(data.bitmapDataAddress, width, height, 8, 3, false, false, OS.NSDeviceRGBColorSpace, OS.NSAlphaFirstBitmapFormat , bpr, 32);", "-\t\t\thandle.removeRepresentation(imageRep);", "-//\t\t\timageRep.release();", "-\t\t\thandle.addRepresentation(rep);", "-\t\t\timageRep = rep;", "-\t\t}", "+", "+\t\t// Can't perform transforms on image reps with alpha.", "+\t\timageRep.setAlpha(false);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bd9735adf86f9725433f3b6c6bca2002", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "baec48b9bf0042e322500cba32f1b9bdac3cbfa0", "commitAfterChange": "f427c1590631b66d91e74b5c591fc671d07e2ff7", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": " public int internal_new_GC (GCData data)", "signatureAfterChange": " public int internal_new_GC (GCData data)", "diff": ["-\t", "-\thandle.lockFocus();\t", "-//\tNSGraphicsContext context = NSGraphicsContext.graphicsContextWithBitmapImageRep(new NSBitmapImageRep(handle.bestRepresentationForDevice(null).id));", "-//\tNSGraphicsContext.setCurrentContext(context);", "-\tNSGraphicsContext context = NSGraphicsContext.currentContext();", "+\tNSGraphicsContext.currentContext().saveGraphicsState();", "+\tNSBitmapImageRep rep = imageRep;", "+\tif (imageRep.hasAlpha()) {", "+\t\tint bpr = width * 4;", "+\t\trep = (NSBitmapImageRep)new NSBitmapImageRep().alloc();", "+\t\tint bitmapData = imageRep.bitmapData();", "+\t\tif (data.bitmapDataAddress != 0) OS.free(data.bitmapDataAddress);", "+\t\tdata.bitmapDataAddress = OS.malloc(4);", "+\t\tOS.memmove(data.bitmapDataAddress, new int[] {bitmapData}, 4);", "+\t\trep = rep.initWithBitmapDataPlanes_pixelsWide_pixelsHigh_bitsPerSample_samplesPerPixel_hasAlpha_isPlanar_colorSpaceName_bitmapFormat_bytesPerRow_bitsPerPixel_(", "+\t\t\t\tdata.bitmapDataAddress, width, height, 8, 3, false, false, new NSString(OS.NSDeviceRGBColorSpace()), OS.NSAlphaFirstBitmapFormat , bpr, 32);", "+\t\trep.autorelease();", "+\t}", "+\tNSGraphicsContext context = NSGraphicsContext.graphicsContextWithBitmapImageRep(rep);", "+\tNSGraphicsContext.currentContext().restoreGraphicsState();"]}], "num": 35043}