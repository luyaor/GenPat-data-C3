{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2e4fd1c1c8d88fcb3db1c26cfc6cdb23", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a74d560a218b8f5e35952665f87d3793", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Widget.java", "commitBeforeChange": "ca8e949258373f625fdcfbe9471eef04547d94a6", "commitAfterChange": "124d04b09d8a7b6f07bff234cf4e5188eb61e9cb", "methodNumberBeforeChange": 115, "methodNumberAfterChange": 115, "signatureBeforeChange": "  boolean setKeyState (Event event, int type, int theEvent)", "signatureAfterChange": "  boolean setKeyState (Event event, int type, int theEvent)", "diff": ["-\t\t\t\tevent.keyCode = result & 0x7f;", "+\t\t\t\tif (result <= 0x7f) {", "+\t\t\t\t\tevent.keyCode = result & 0x7f;", "+\t\t\t\t} else {", "+\t\t\t\t\tshort keyScript = (short) OS.GetScriptManagerVariable ((short) OS.smKeyScript);", "+\t\t\t\t\tshort regionCode = (short) OS.GetScriptManagerVariable ((short) OS.smRegionCode);", "+\t\t\t\t\tint [] encoding = new int [1];", "+\t\t\t\t\tif (OS.UpgradeScriptInfoToTextEncoding (keyScript, (short) OS.kTextLanguageDontCare, regionCode, null, encoding) == OS.paramErr) {", "+\t\t\t\t\t\tif (OS.UpgradeScriptInfoToTextEncoding (keyScript, (short) OS.kTextLanguageDontCare, (short) OS.kTextRegionDontCare, null, encoding) == OS.paramErr) {", "+\t\t\t\t\t\t\tencoding [0] = OS.kTextEncodingMacRoman;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t\tint [] encodingInfo = new int [1];", "+\t\t\t\t\tOS.CreateTextToUnicodeInfoByEncoding (encoding [0], encodingInfo);", "+\t\t\t\t\tif (encodingInfo [0] != 0) {", "+\t\t\t\t\t\tchar [] chars = new char [1];", "+\t\t\t\t\t\tint [] nchars = new int [1];", "+\t\t\t\t\t\tbyte [] buffer = new byte [2];", "+\t\t\t\t\t\tbuffer [0] = 1;", "+\t\t\t\t\t\tbuffer [1] = (byte) (result & 0xFF);", "+\t\t\t\t\t\tOS.ConvertFromPStringToUnicode (encodingInfo [0], buffer, chars.length * 2, nchars, chars);", "+\t\t\t\t\t\tOS.DisposeTextToUnicodeInfo (encodingInfo);", "+\t\t\t\t\t\tevent.keyCode = chars [0];", "+\t\t\t\t\t}", "+\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fdb1b2f974b5a80d22cbd16e36b619fa", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 44, "methodNumberAfterChange": 43, "signatureBeforeChange": " void init(Drawable drawable, GCData data, int xGC)", "signatureAfterChange": "  void init(Drawable drawable, GCData data, int context)", "diff": ["-void init(Drawable drawable, GCData data, int xGC) {", "-\t/* AW", "-\tint xDisplay = data.display;", "-\tint foreground = data.foreground;", "-\tif (foreground != -1) OS.XSetForeground (xDisplay, xGC, foreground);", "-\tint background = data.background;", "-\tif (background != -1) OS.XSetBackground (xDisplay, xGC, background);", "-\t*/", "+", "+void init(Drawable drawable, GCData data, int context) {", "+\tint colorspace = data.device.colorspace;", "+\tOS.CGContextSetStrokeColorSpace(context, colorspace);", "+\tOS.CGContextSetFillColorSpace(context, colorspace);", "+\tfloat[] foreground = data.foreground;", "+\tif (foreground != null) OS.CGContextSetStrokeColor(context, foreground);", "+\tfloat[] background = data.background;", "+\tif (background != null) OS.CGContextSetFillColor(context, background);", "+", "+\tint[] buffer = new int[1];", "+\tOS.ATSUCreateTextLayout(buffer);", "+\tif (buffer[0] == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\tdata.layout = buffer[0];", "+\tOS.ATSUCreateStyle(buffer);", "+\tif (buffer[0] == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\tdata.style = buffer[0];", "+\t", "+\tint ptr = OS.NewPtr(4);", "+\tbuffer[0] = context;", "+\tOS.memcpy(ptr, buffer, 4);", "+\tint[] tags = new int[]{OS.kATSUCGContextTag};", "+\tint[] sizes = new int[]{4};", "+\tint[] values = new int[]{ptr};", "+\tOS.ATSUSetLayoutControls(data.layout, tags.length, tags, sizes, values);", "+\tOS.DisposePtr(ptr);", "+", "-\t\tif (image.transparentPixel != -1) image.destroyMask();", "+//\t\tif (image.transparentPixel != -1) image.destroyMask();", "-\tif (xGC == 0)", "-\t\tSWT.error(SWT.ERROR_GRAPHIC_DISPOSED);", "-\thandle = xGC;", "+\thandle = context;", "+", "+\tFont font = data.font;", "+\tif (font != null) setFont(font);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "adfeeee7d388953ed9ddde55bae4deb1", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "b3b16e2d1a28cc5345a35ffc5640da0aa00ecbca", "commitAfterChange": "f6694a5b53e9911af4412c46c62de19b738b4421", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "  void computeRuns()", "signatureAfterChange": "  void computeRuns()", "diff": ["+\t\tif (ascent != -1) {", "+\t\t\tOS.ATSUGetLayoutControl(layout, OS.kATSULineAscentTag, 4, buffer, null);", "+\t\t\tint ptr = OS.NewPtr(4);", "+\t\t\tbuffer[0] = OS.Long2Fix(Math.max(ascent, OS.Fix2Long(buffer[0])));", "+\t\t\tOS.memcpy(ptr, buffer, 4);", "+\t\t\tint[] tags = new int[]{OS.kATSULineAscentTag};", "+\t\t\tint[] sizes = new int[]{4};", "+\t\t\tint[] values = new int[]{ptr};", "+\t\t\tOS.ATSUSetLineControls(layout, 0, tags.length, tags, sizes, values);", "+\t\t\tOS.DisposePtr(ptr);", "+\t\t}", "+\t\tif (descent != -1) {", "+\t\t\tOS.ATSUGetLayoutControl(layout, OS.kATSULineDescentTag, 4, buffer, null);", "+\t\t\tint ptr = OS.NewPtr(4);", "+\t\t\tbuffer[0] = OS.Long2Fix(Math.max(descent, OS.Fix2Long(buffer[0])));", "+\t\t\tOS.memcpy(ptr, buffer, 4);", "+\t\t\tint[] tags = new int[]{OS.kATSULineDescentTag};", "+\t\t\tint[] sizes = new int[]{4};", "+\t\t\tint[] values = new int[]{ptr};", "+\t\t\tOS.ATSUSetLineControls(layout, 0, tags.length, tags, sizes, values);", "+\t\t\tOS.DisposePtr(ptr);", "+\t\t}"]}], "num": 7516}