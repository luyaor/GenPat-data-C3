{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "7ec9bf510bb4956bab2076100c4f8fbd", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ab7d297c5c2745dd539a6b2575cf769e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "89c7bd58cc0f196b206506434a742780b967e190", "commitAfterChange": "bd91d6fde8acd820d94d5b8688df3f086edb9944", "methodNumberBeforeChange": 39, "methodNumberAfterChange": 39, "signatureBeforeChange": " @Override public void setImage (Image image)", "signatureAfterChange": " @Override public void setImage (Image image)", "diff": ["-\tif (!OS.GTK_IS_IMAGE_MENU_ITEM (handle)) return;", "-\t\tlong /*int*/ imageHandle = OS.gtk_image_new_from_pixbuf (pixbuf);", "-\t\tOS.gtk_image_menu_item_set_image (handle, imageHandle);", "+\t\tif (OS.GTK3) {", "+\t\t\tif (!OS.GTK_IS_MENU_ITEM (handle)) return;", "+\t\t\tif (OS.SWT_PADDED_MENU_ITEMS && imageHandle != 0) {", "+\t\t\t\tOS.gtk_image_set_from_pixbuf(imageHandle, pixbuf);", "+\t\t\t} else {", "+\t\t\t\tif (imageHandle == 0 && boxHandle != 0) {", "+\t\t\t\t\timageHandle = OS.gtk_image_new_from_pixbuf (pixbuf);", "+\t\t\t\t\tOS.gtk_container_add (boxHandle, imageHandle);", "+\t\t\t\t\tOS.gtk_box_reorder_child (boxHandle, imageHandle, 0);", "+\t\t\t\t} else {", "+\t\t\t\t\tOS.gtk_image_set_from_pixbuf(imageHandle, pixbuf);", "+\t\t\t\t}", "+\t\t\t\tif (boxHandle == 0) error (SWT.ERROR_NO_HANDLES);", "+\t\t\t}", "+\t\t} else {", "+\t\t\tif (!OS.GTK_IS_IMAGE_MENU_ITEM (handle)) return;", "+\t\t\timageHandle = OS.gtk_image_new_from_pixbuf (pixbuf);", "+\t\t\tOS.gtk_image_menu_item_set_image (handle, imageHandle);", "+\t\t\t}", "+\t\tif (imageHandle == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\tOS.gtk_image_menu_item_set_image (handle, 0);", "+\t\tif (OS.GTK3) {", "+\t\t\tif (imageHandle != 0 && boxHandle != 0) {", "+\t\t\t\tif (OS.SWT_PADDED_MENU_ITEMS) {", "+\t\t\t\t\tOS.gtk_container_remove(boxHandle, imageHandle);", "+\t\t\t\t\timageHandle = OS.gtk_image_new ();", "+\t\t\t\t\tif (imageHandle == 0) error (SWT.ERROR_NO_HANDLES);", "+\t\t\t\t\tOS.gtk_image_set_pixel_size (imageHandle, 16);", "+\t\t\t\t\tOS.gtk_container_add (boxHandle, imageHandle);", "+\t\t\t\t\tOS.gtk_widget_show (imageHandle);", "+\t\t\t\t} else {", "+\t\t\t\t\tOS.gtk_container_remove(boxHandle, imageHandle);", "+\t\t\t\t\timageHandle = 0;", "+\t\t\t\t}", "+\t\t\t}", "+\t\t} else {", "+\t\t\tif (!OS.GTK_IS_IMAGE_MENU_ITEM (handle)) return;", "+\t\t\tOS.gtk_image_menu_item_set_image (handle, 0);", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c752bb4d555b28b0f17a687750cbbd70", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "3d1071088ced6ed6e9f01c8d7208fa00cb52a57a", "commitAfterChange": "a9f618df2b93f8cb19629621c0313294fe974299", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "\r \r void createHandle ()", "signatureAfterChange": "\r \r void createHandle ()", "diff": ["-\t\t/*\r", "-\t\t* Note in WinCE PPC.  CreateMenu cannot insert items of type \r", "-\t\t* separator.  The workaround is to always use CreatePopupMenu.\r", "-\t\t*/\r", "-\t\thandle = OS.IsPPC ? OS.CreatePopupMenu () : OS.CreateMenu();\r", "+\t\tif (OS.IsPPC) {\r", "+\t\t\tint hwndShell = parent.handle;\r", "+\t\t\tSHMENUBARINFO mbi = new SHMENUBARINFO ();\r", "+\t\t\tmbi.cbSize = mbi.sizeof;\r", "+\t\t\tmbi.hwndParent = hwndShell;\r", "+\t\t\tmbi.dwFlags = OS.SHCMBF_HIDDEN;\r", "+\t\t\tmbi.nToolBarId = ID_PPCBAR;\r", "+\t\t\tmbi.hInstRes = OS.GetLibraryHandle ();\r", "+\t\t\tboolean success = OS.SHCreateMenuBar (mbi);\r", "+\t\t\thwndCB = mbi.hwndMB;\r", "+\t\t\tif (!success) error (SWT.ERROR_NO_HANDLES);\r", "+\t\t\t/* Remove the item from the resource file */\r", "+\t\t\tOS.SendMessage (hwndCB, OS.TB_DELETEBUTTON, 0, 0);\r", "+\t\t\treturn;\r", "+\t\t}\r", "+\t\thandle = OS.CreateMenu ();\r", "+\t\tif (handle == 0) error (SWT.ERROR_NO_HANDLES);\r", "+\t\tif (OS.IsHPC) {\r", "+\t\t\tint hwndShell = parent.handle;\r", "+\t\t\thwndCB = OS.CommandBar_Create (OS.GetModuleHandle (null), hwndShell, 1);\r", "+\t\t\tif (hwndCB == 0) error (SWT.ERROR_NO_HANDLES);\r", "+\t\t\tOS.CommandBar_Show (hwndCB, false);\r", "+\t\t\tOS.CommandBar_InsertMenubarEx (hwndCB, 0, handle, 0);\r", "+\t\t\t/*\r", "+\t\t\t* The command bar hosts the 'close' button when the window does not\r", "+\t\t\t* have a caption.\r", "+\t\t\t*/\r", "+\t\t\tif ((parent.style & SWT.CLOSE) != 0 && (parent.style & SWT.TITLE) == 0) {\r", "+\t\t\t\tOS.CommandBar_AddAdornments (hwndCB, 0, 0);\r", "+\t\t\t}\r", "+\t\t}\r", "+\t\tif (handle == 0) error (SWT.ERROR_NO_HANDLES);\r", "-\tif (handle == 0) error (SWT.ERROR_NO_HANDLES);\r"]}], "num": 31583}