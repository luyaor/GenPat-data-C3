{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "5d1139efe21f769c00252dadc868cfce", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e0e4fffe648cfe07cf5aae05a4e14068", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "c1d061ac0465366604624bdd8c1657d13f6ebb95", "commitAfterChange": "03cfb284627777881e08280991a82f2cacd918bd", "methodNumberBeforeChange": 99, "methodNumberAfterChange": 99, "signatureBeforeChange": "  public void setRedraw (boolean redraw)", "signatureAfterChange": "  public void setRedraw (boolean redraw)", "diff": ["+\t* Feature in Windows.  When WM_SETREDRAW is used to", "+\t* turn off redraw, the scroll bars are updated when", "+\t* items are added and removed.  The fix is to call", "+\t* the default window proc to stop all drawing.", "+\t* ", "-\tif (redraw && drawCount == 1) {", "-\t\tint count = OS.SendMessage (handle, OS.TVM_GETCOUNT, 0, 0);", "-\t\tif (count == 0) {", "-\t\t\tTVINSERTSTRUCT tvInsert = new TVINSERTSTRUCT ();", "-\t\t\ttvInsert.hInsertAfter = OS.TVI_FIRST;", "-\t\t\thItem = OS.SendMessage (handle, OS.TVM_INSERTITEM, 0, tvInsert);", "+\tif (redraw) {", "+\t\tif (drawCount == 1) {", "+\t\t\tint count = OS.SendMessage (handle, OS.TVM_GETCOUNT, 0, 0);", "+\t\t\tif (count == 0) {", "+\t\t\t\tTVINSERTSTRUCT tvInsert = new TVINSERTSTRUCT ();", "+\t\t\t\ttvInsert.hInsertAfter = OS.TVI_FIRST;", "+\t\t\t\thItem = OS.SendMessage (handle, OS.TVM_INSERTITEM, 0, tvInsert);", "+\t\t\t}", "+\t\t\tOS.DefWindowProc (handle, OS.WM_SETREDRAW, 1, 0);", "-\t/*", "-\t* Feature in Windows.  When WM_SETREDRAW is used to", "-\t* turn off redraw, the scroll bars are updated when", "-\t* items are added and removed.  The fix is to call", "-\t* the default window proc to stop all drawing.", "-\t*/", "-//\tif (redraw) {", "-//\t\tif (drawCount == 0) OS.DefWindowProc (handle, OS.WM_SETREDRAW, 1, 0);", "-//\t} else {", "-//\t\tif (drawCount == 1) OS.DefWindowProc (handle, OS.WM_SETREDRAW, 0, 0);", "-//\t}", "+\tif (!redraw) {", "+\t\tif (drawCount == 1) OS.DefWindowProc (handle, OS.WM_SETREDRAW, 0, 0);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "57bd58f26443f27367abc67a035c64e1", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "376095fdf66c1b831ad5252eeda210931946760b", "commitAfterChange": "b74e378548c2324a9fbc6521b49afe2fd9218337", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 5, "signatureBeforeChange": "  boolean fixScroll (int hItem)", "signatureAfterChange": "  boolean checkScroll (int hItem)", "diff": ["+boolean checkScroll (int hItem) {", "+\t* Feature in Windows.  If redraw is turned off using WM_SETREDRAW ", "+\t* a tree item that is not a child the first root is selected or", "+\t* scrolled using TVM_SELECTITEM or TVM_ENSUREVISIBLE, then scrolling", "+\t* does not occur.  The fix is to detect this case, and make sure", "+\t* that redraw is temporarly enabled.", "+\tif (drawCount == 0) return false;", "+\tint hRoot = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_ROOT, 0);", "+\tint hParent = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_PARENT, hItem);", "+\twhile (hParent != hRoot && hParent != 0) {", "+\t\thParent = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_PARENT, hParent);", "+\t}", "+\treturn hParent == 0;", "-", "-boolean fixScroll (int hItem) {", "-\t/*", "-\t* Feature in Windows.  If WM_SETREDRAW is false and the hItem", "-\t* is not a child of TVGN_ROOT, then TVM_SELECTITEM for the hItem", "-\t* does not work. The fix is to detect this case, and make sure", "-\t* WM_SETREDRAW is enabled for the TVM_SELECTITEM call.", "-\t*/", "-\tif (hItem != 0 && drawCount != 0) {", "-\t\tint hRoot = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_ROOT, 0);", "-\t\tint hParent = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_PARENT, hItem);", "-\t\twhile (hParent != hRoot && hParent != 0) {", "-\t\t\thParent = OS.SendMessage (handle, OS.TVM_GETNEXTITEM, OS.TVGN_PARENT, hParent);", "-\t\t}", "-\t\treturn hParent == 0;", "-\t}", "-\treturn false;"]}], "num": 2278}