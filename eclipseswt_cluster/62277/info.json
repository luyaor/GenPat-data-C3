{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "218e03e38bcb2303e8d69d71a27c3f2d", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b266ebed2ab97d07ef08d48be8ab5eff", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "bf221f66369037ceea33728d5ed71d69549dd596", "commitAfterChange": "73be0ec89889e2c1322c1bfa09d83f81f689ab7f", "methodNumberBeforeChange": 82, "methodNumberAfterChange": 83, "signatureBeforeChange": " void doPageStart()", "signatureAfterChange": " void doPageStart()", "diff": ["-\tint topCaretOffset = content.getOffsetAtLine(topIndex);", "-\tif (caretOffset > topCaretOffset) {", "-\t\tcaretOffset = topCaretOffset;", "+\tint topOffset;", "+\tif (wordWrap) {", "+\t\tint y, lineIndex;", "+\t\tif (topIndexY > 0) {", "+\t\t\tlineIndex = topIndex - 1;", "+\t\t\ty = renderer.getLineHeight(lineIndex) - topIndexY;", "+\t\t} else {", "+\t\t\tlineIndex = topIndex;", "+\t\t\ty = -topIndexY;", "+\t\t}", "+\t\tTextLayout layout = renderer.getTextLayout(lineIndex);", "+\t\tint index = 0;", "+\t\tint lineCount = layout.getLineCount();", "+\t\twhile (index < lineCount) {", "+\t\t\tRectangle bounds = layout.getLineBounds(index);", "+\t\t\tif (y <= bounds.y) break;", "+\t\t\tindex++;", "+\t\t}", "+\t\tif (index == lineCount) {", "+\t\t\ttopOffset = content.getOffsetAtLine(lineIndex + 1);", "+\t\t} else {", "+\t\t\ttopOffset = content.getOffsetAtLine(lineIndex) + layout.getLineOffsets()[index];", "+\t\t}", "+\t\trenderer.disposeTextLayout(layout);\t\t", "+\t} else {", "+\t\ttopOffset = content.getOffsetAtLine(topIndex);", "+\t}", "+\tif (caretOffset > topOffset) {", "+\t\tcaretOffset = topOffset;", "+\t\tcaretAlignment = OFFSET_LEADING;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f3bc45969eff71ef86e96ea8c6cdb4a7", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "bf221f66369037ceea33728d5ed71d69549dd596", "commitAfterChange": "73be0ec89889e2c1322c1bfa09d83f81f689ab7f", "methodNumberBeforeChange": 81, "methodNumberAfterChange": 82, "signatureBeforeChange": " void doPageEnd()", "signatureAfterChange": " void doPageEnd()", "diff": ["-\t\tint line = getBottomIndex();", "-\t\tint bottomCaretOffset = content.getOffsetAtLine(line) + content.getLine(line).length();", "-\t\tif (caretOffset < bottomCaretOffset) {", "-\t\t\tcaretOffset = bottomCaretOffset;", "+\t\tint bottomOffset;", "+\t\tif (wordWrap) {", "+\t\t\tint lineIndex = getPartialBottomIndex();", "+\t\t\tTextLayout layout = renderer.getTextLayout(lineIndex);", "+\t\t\tint y = (clientAreaHeight - bottomMargin) - getLinePixel(lineIndex);", "+\t\t\tint index = layout.getLineCount() - 1;", "+\t\t\twhile (index >= 0) {", "+\t\t\t\tRectangle bounds = layout.getLineBounds(index);", "+\t\t\t\tif (y >= bounds.y + bounds.height) break;", "+\t\t\t\tindex--;", "+\t\t\t}", "+\t\t\tif (index == -1 && lineIndex > 0) {", "+\t\t\t\tbottomOffset = content.getOffsetAtLine(lineIndex - 1) + content.getLine(lineIndex - 1).length();", "+\t\t\t} else {", "+\t\t\t\tbottomOffset = content.getOffsetAtLine(lineIndex) + Math.max(0, layout.getLineOffsets()[index + 1] - 1);", "+\t\t\t}", "+\t\t\trenderer.disposeTextLayout(layout);", "+\t\t} else {", "+\t\t\tint lineIndex = getBottomIndex();", "+\t\t\tbottomOffset = content.getOffsetAtLine(lineIndex) + content.getLine(lineIndex).length();", "+\t\t}", "+\t\tif (caretOffset < bottomOffset) {", "+\t\t\tcaretOffset = bottomOffset;", "+\t\t\tcaretAlignment = OFFSET_LEADING;"]}], "num": 62277}