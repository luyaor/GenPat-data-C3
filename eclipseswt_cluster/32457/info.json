{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "28cdb9ce1f1ff2237bd1135a5b44cb5c", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "47537fd60427dbb73d1d351643a59bcf", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/gtk/org/eclipse/swt/dnd/TextTransfer.java", "commitBeforeChange": "41379afd447e143f3a057620b8db69d0717b2e63", "commitAfterChange": "26a56a1cbfe587585a35a9712abb11e853344060", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public void javaToNative (Object object, TransferData transferData)", "signatureAfterChange": " public void javaToNative (Object object, TransferData transferData)", "diff": ["-\tbyte[] buffer = Converter.wcsToMbcs (null, string, true);", "+\tbyte[] utf8 = Converter.wcsToMbcs (null, string, true);", "-\t\tboolean result = OS.gdk_utf8_to_compound_text(buffer, encoding, format, ctext, length);", "+\t\tboolean result = OS.gdk_utf8_to_compound_text(utf8, encoding, format, ctext, length);", "-\tif (transferData.type == UTF8_STRING_ID ||", "-\t\ttransferData.type == STRING_ID) {", "-\t\tint /*long*/ pValue = OS.g_malloc(buffer.length);", "+\tif (transferData.type == UTF8_STRING_ID) {", "+\t\tint /*long*/ pValue = OS.g_malloc(utf8.length);", "-\t\tOS.memmove(pValue, buffer, buffer.length);", "-\t\ttransferData.type = transferData.type;", "+\t\tOS.memmove(pValue, utf8, utf8.length);", "+\t\ttransferData.type = UTF8_STRING_ID;", "-\t\ttransferData.length = buffer.length - 1;", "+\t\ttransferData.length = utf8.length - 1;", "+\t\ttransferData.result = 1;", "+\t}", "+\tif (transferData.type == STRING_ID) {", "+\t\tint /*long*/ string_target = OS.gdk_utf8_to_string_target(utf8);", "+\t\tif (string_target ==  0) return;", "+\t\ttransferData.type = STRING_ID;", "+\t\ttransferData.format = 8;", "+\t\ttransferData.length = OS.strlen(string_target);", "+\t\ttransferData.pValue = string_target;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6ad594bf60c14c82d6777c7b2d40bc03", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/motif/org/eclipse/swt/dnd/TextTransfer.java", "commitBeforeChange": "33f2a3b50a61626d5964cb87570beb2c3096fcc1", "commitAfterChange": "40ae2a746cec0132025185d602a721edfecbbfea", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public void javaToNative (Object object, TransferData transferData)", "signatureAfterChange": " public void javaToNative (Object object, TransferData transferData)", "diff": ["-\tbyte [] buffer = Converter.wcsToMbcs (null, (String)object, true);\r", "-\tsuper.javaToNative(buffer, transferData);\r", "+\tbyte[] buffer = Converter.wcsToMbcs (null, (String)object, true);\r", "+\tif (transferData.type == TYPEID1) { // COMPOUND_TEXT\r", "+\t\tDisplay display = Display.getCurrent();\r", "+\t\tif (display == null) {\r", "+\t\t\ttransferData.result = 0;\r", "+\t\t\treturn;\r", "+\t\t}\r", "+\t\tint xDisplay = display.xDisplay;\r", "+\t\tint pBuffer = OS.XtMalloc(buffer.length);\r", "+\t\tOS.memmove(pBuffer, buffer, buffer.length);\r", "+\t\tint list = OS.XtMalloc(4);\r", "+\t\tOS.memmove(list, new int[] {pBuffer}, 4);\r", "+\t\tXTextProperty text_prop_return = new XTextProperty();\r", "+\t\tint result = OS.XmbTextListToTextProperty (xDisplay, list, 1, OS.XCompoundTextStyle, text_prop_return);\r", "+\t\tOS.XtFree(pBuffer);\r", "+\t\tOS.XtFree(list);\r", "+\t\tif (result != 0){\r", "+\t\t\ttransferData.result = 0;\r", "+\t\t} else {\t\r", "+\t\t\ttransferData.format = text_prop_return.format;\r", "+\t\t\ttransferData.length = text_prop_return.nitems;\r", "+\t\t\ttransferData.pValue = text_prop_return.value;\r", "+\t\t\ttransferData.type = text_prop_return.encoding;\r", "+\t\t\ttransferData.result = 1;\r", "+\t\t}\r", "+\t} else {\r", "+\t\tsuper.javaToNative(buffer, transferData);\r", "+\t}\r"]}], "num": 32457}