{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "35d71372378def048e6985a4f5d62aa0", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0831907e4f2e666aeb294dc1d36d7bad", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "df118cfee649740c3cfc2ab13c4b8610502d4d4e", "commitAfterChange": "49ca7a603b8ba36618c52950618a40e222d8f456", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "  void createItem (MenuItem item, int index)", "signatureAfterChange": "  void createItem (MenuItem item, int index)", "diff": ["-\tint attributes = 0;", "-\tif ((item.style & SWT.SEPARATOR) != 0) attributes = OS.kMenuItemAttrSeparator;", "-\tint result = OS.InsertMenuItemTextWithCFString (handle, 0, (short) index, attributes, item.id);", "-\tif (result != OS.noErr) {", "+\tboolean success = false;", "+\t/*", "+\tif (OS.IsWinCE) {", "+\t\tint flags = OS.MF_BYPOSITION;", "+\t\tif ((style & SWT.SEPARATOR) != 0) flags |= OS.MF_SEPARATOR;", "+\t\tsuccess = OS.InsertMenu (handle, index, flags, item.id, null); ", "+\t} else {", "+\t\tint hHeap = OS.GetProcessHeap ();", "+\t\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, TCHAR.sizeof);", "+\t\tMENUITEMINFO info = new MENUITEMINFO ();", "+\t\tinfo.cbSize = MENUITEMINFO.sizeof;", "+\t\tinfo.fMask = OS.MIIM_ID | OS.MIIM_TYPE;", "+\t\tinfo.wID = item.id;", "+\t\tinfo.fType = item.widgetStyle ();", "+\t\tinfo.dwTypeData = pszText;", "+\t\tsuccess = OS.InsertMenuItem (handle, index, true, info);", "+\t\tif (pszText != 0) OS.HeapFree (hHeap, 0, pszText);", "+\t}", "+\t*/", "+\t", "+\t/*", "+\tif ((style & SWT.SEPARATOR) != 0) return OS.MFT_SEPARATOR;", "+\tif ((style & SWT.RADIO) != 0) return OS.MFT_RADIOCHECK;", "+\treturn OS.MFT_STRING;", "+\t*/", "+\t", "+\tint attributes= 0;", "+\tif ((item.style & SWT.SEPARATOR) != 0) ", "+\t\tattributes= OS.kMenuItemAttrSeparator;", "+\tif (OS.InsertMenuItemTextWithCFString(handle, 0, (short) index, attributes, item.id) == OS.noErr)", "+\t\tsuccess= true;", "+\t", "+\tif (!success) {", "-\tif ((style & SWT.BAR) != 0) {", "-\t\tDisplay display = getDisplay ();", "-\t\tshort menuID = display.nextMenuId ();", "-\t\tint outMenuRef [] = new int [1];", "-\t\tif (OS.CreateNewMenu (menuID, 0, outMenuRef) != OS.noErr) {", "-\t\t\terror (SWT.ERROR_NO_HANDLES);", "-\t\t}", "-\t\tOS.SetMenuItemHierarchicalMenu (handle, (short) (index + 1), outMenuRef [0]);", "-\t}", "+\t/* AW\t", "+\tredraw ();", "+\t*/"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d3284e062b043c3c3eb61841dfeb89c9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "374a9aef6d3cdbe23142c7622f439f5425ecaa80", "commitAfterChange": "ed307d3f65dabf3aa5aefbc1cbd79da8679af838", "methodNumberBeforeChange": 43, "methodNumberAfterChange": 39, "signatureBeforeChange": " protected void init ()", "signatureAfterChange": " protected void init ()", "diff": ["-\t\t", "-\t/*", "-\t * in recent builds (> 20021023) new Displays are created on shutdown", "-\t * after the 'main' Display has been disposed.", "-\t * This is OK, however the Mac port does not yet release all refHandlers", "-\t * on the first dispose, and if the same procs are reinstalled for another", "-\t * Display the install fails.", "-\t */", "-\tif (fgInitCount > 0)", "-\t\tSystem.err.println(\"Warning: Display.init called more than once\");", "-\tfgInitCount++;", "-\t\t", "+\t\t\t\t", "-\tfTooltipWindowProc= createCallback(\"handleTooltipWindowCallback\", 3);", "-\t", "-\tfControlProc= createCallback(\"handleControlProc\", 3);", "-\t", "-\t//fUserPaneDrawProc= createCallback(\"handleUserPaneDraw\", 2);", "+\tfUserPaneDrawProc= createCallback(\"handleUserPaneDraw\", 2);", "-\t", "+\tfUserPaneTrackingProc= createCallback(\"handleUserPaneTracking\", 3);", "-\t", "-\t\t// has clicked in the menu bar", "+\t\t// clicked in the menu bar", "-\t", "-\tint[] refHandler= new int[1];", "-\tif (OS.InstallEventHandler(OS.GetApplicationEventTarget(), fApplicationProc, mask.length / 2, mask, 0, refHandler) != OS.noErr)", "+\tif (OS.InstallEventHandler(OS.GetApplicationEventTarget(), fApplicationProc, mask, 0) != OS.kNoErr)", "-\tfApplicationRefHandler= refHandler[0];", "-\t\tOS.kEventClassKeyboard, OS.kEventRawKeyModifiersChanged,", "-\tif (OS.InstallEventHandler(OS.GetUserFocusEventTarget(), textInputProc, mask.length / 2, mask, 0, refHandler) != OS.noErr)", "+\tif (OS.InstallEventHandler(OS.GetUserFocusEventTarget(), textInputProc, mask, 0) != OS.kNoErr)", "-\tfFocusRefHandler= refHandler[0];", "-\tCOLOR_INFO_FOREGROUND = \t\tColor.carbon_new(this, 0x000000, true);", "-\tfHoverThemeFont= (short) OS.kThemeSmallSystemFont;", "+\tfHoverThemeFont= OS.kThemeSmallSystemFont;"]}], "num": 36477}