{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "11dc5556c8a5ab0153abed14c12d1213", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a7f4f3b970eea90e93dfbd59c4ed375b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "74c0e792b346f85e2b9067f710416658485a9a3b", "commitAfterChange": "e188a1e4ca35b8a449353a5ac187e7a405693faf", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 12, "signatureBeforeChange": " public Rectangle getBounds()", "signatureAfterChange": " public Rectangle getBounds()", "diff": ["-\tcomputeRuns();", "-\tNSRect rect = layoutManager.usedRectForTextContainer(textContainer);", "-\tif (wrapWidth != -1) rect.width = wrapWidth;", "-\tif (text.length() == 0) {", "-\t\tFont font = this.font != null ? this.font : device.systemFont;", "-\t\tNSFont nsFont = font.handle;", "-\t\trect.height = Math.max(rect.height, layoutManager.defaultLineHeightForFont(nsFont));", "+\tNSAutoreleasePool pool = null;", "+\tif (!NSThread.isMainThread()) pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tcomputeRuns();", "+\t\tNSRect rect = layoutManager.usedRectForTextContainer(textContainer);", "+\t\tif (wrapWidth != -1) rect.width = wrapWidth;", "+\t\tif (text.length() == 0) {", "+\t\t\tFont font = this.font != null ? this.font : device.systemFont;", "+\t\t\tNSFont nsFont = font.handle;", "+\t\t\trect.height = Math.max(rect.height, layoutManager.defaultLineHeightForFont(nsFont));", "+\t\t}", "+\t\trect.height = Math.max(rect.height, ascent + descent);", "+\t\treturn new Rectangle(0, 0, (int)rect.width, (int)rect.height);", "+\t} finally {", "+\t\tif (pool != null) pool.release();", "-\trect.height = Math.max(rect.height, ascent + descent);", "-\treturn new Rectangle(0, 0, (int)rect.width, (int)rect.height);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc288fbe38ed82b5f67f14bd0a822b0e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "74c0e792b346f85e2b9067f710416658485a9a3b", "commitAfterChange": "e188a1e4ca35b8a449353a5ac187e7a405693faf", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " public FontData[] getFontData()", "signatureAfterChange": " public FontData[] getFontData()", "diff": ["-\tNSString family = handle.familyName();", "-\tString name = family.getString();", "-\tNSString str = handle.fontName();", "-\tString nsName = str.getString();", "-\tint style = SWT.NORMAL;", "-\tif (nsName.indexOf(\"Italic\") != -1) style |= SWT.ITALIC;", "-\tif (nsName.indexOf(\"Bold\") != -1) style |= SWT.BOLD;", "-\tPoint dpi = device.dpi, screenDPI = device.getScreenDPI();", "-\tFontData data = new FontData(name, (float)/*64*/handle.pointSize() * screenDPI.y / dpi.y, style);", "-\tdata.nsName = nsName;", "-\treturn new FontData[]{data};", "+\tNSAutoreleasePool pool = null;", "+\tif (!NSThread.isMainThread()) pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tNSString family = handle.familyName();", "+\t\tString name = family.getString();", "+\t\tNSString str = handle.fontName();", "+\t\tString nsName = str.getString();", "+\t\tint style = SWT.NORMAL;", "+\t\tif (nsName.indexOf(\"Italic\") != -1) style |= SWT.ITALIC;", "+\t\tif (nsName.indexOf(\"Bold\") != -1) style |= SWT.BOLD;", "+\t\tPoint dpi = device.dpi, screenDPI = device.getScreenDPI();", "+\t\tFontData data = new FontData(name, (float)/*64*/handle.pointSize() * screenDPI.y / dpi.y, style);", "+\t\tdata.nsName = nsName;", "+\t\treturn new FontData[]{data};", "+\t} finally {", "+\t\tif (pool != null) pool.release();", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "60ad7fb1b506308124f814dfe06cd82e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Printing/cocoa/org/eclipse/swt/printing/Printer.java", "commitBeforeChange": "36e21f6aba5204fa5195a71658979a8b334d36bf", "commitAfterChange": "77b4feca7776d7a102f6b78d108d292827dbe92c", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 16, "signatureBeforeChange": " public boolean startPage()", "signatureAfterChange": " public boolean startPage()", "diff": ["-\tNSSize paperSize = printInfo.paperSize();", "-\tNSRect rect = new NSRect();", "-\trect.width = paperSize.width;", "-\trect.height = paperSize.height;", "-\tview.beginPageInRect(rect, new NSPoint());", "-\tNSRect imageBounds = printInfo.imageablePageBounds();", "-\tNSBezierPath.bezierPathWithRect(imageBounds).setClip();", "-\tNSAffineTransform transform = NSAffineTransform.transform();", "-\ttransform.translateXBy(imageBounds.x, imageBounds.y);", "-\tPoint dpi = getDPI (), screenDPI = getIndependentDPI();", "-\ttransform.scaleXBy(screenDPI.x / (float)dpi.x, screenDPI.y / (float)dpi.y);", "-\ttransform.concat();", "-\treturn true;", "+\tNSAutoreleasePool pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tNSSize paperSize = printInfo.paperSize();", "+\t\tNSRect rect = new NSRect();", "+\t\trect.width = paperSize.width;", "+\t\trect.height = paperSize.height;", "+\t\tview.beginPageInRect(rect, new NSPoint());", "+\t\tNSRect imageBounds = printInfo.imageablePageBounds();", "+\t\tNSBezierPath.bezierPathWithRect(imageBounds).setClip();", "+\t\tNSAffineTransform transform = NSAffineTransform.transform();", "+\t\ttransform.translateXBy(imageBounds.x, imageBounds.y);", "+\t\tPoint dpi = getDPI (), screenDPI = getIndependentDPI();", "+\t\ttransform.scaleXBy(screenDPI.x / (float)dpi.x, screenDPI.y / (float)dpi.y);", "+\t\ttransform.concat();", "+\t\treturn true;", "+\t} finally {", "+\t\tpool.release();", "+\t}"]}], "num": 36197}