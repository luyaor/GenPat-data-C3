{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "695257aab4c15cc6c57d99023850736e", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "97a4492af46ee63fbf93f16f024a6510", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Program/cocoa/org/eclipse/swt/program/Program.java", "commitBeforeChange": "2703b6b4917ee70e34e69f6beabdf6e17c0e648e", "commitAfterChange": "0e0eae7504b067875076ee5d9af4693ac4a9b250", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " public ImageData getImageData ()", "signatureAfterChange": " public ImageData getImageData ()", "diff": ["-\t\t\t\tNSBitmapImageRep imageRep = null;", "-\t\t\t\tNSImageRep rep = nsImage.bestRepresentationForDevice(null);", "-\t\t\t\tif (rep.isKindOfClass(OS.class_NSBitmapImageRep)) { ", "-\t\t\t\t\timageRep = new NSBitmapImageRep(rep.id);", "-\t\t\t\t}", "-\t\t\t\tif (imageRep != null) {", "-\t\t\t\t\tint width = (int)/*64*/imageRep.pixelsWide();", "-\t\t\t\t\tint height = (int)/*64*/imageRep.pixelsHigh();", "-\t\t\t\t\tint bpr = (int)/*64*/imageRep.bytesPerRow();", "-\t\t\t\t\tint bpp = (int)/*64*/imageRep.bitsPerPixel();", "-\t\t\t\t\tint dataSize = height * bpr;", "-\t\t\t\t\tbyte[] srcData = new byte[dataSize];", "-\t\t\t\t\tOS.memmove(srcData, imageRep.bitmapData(), dataSize);", "-\t\t\t\t\t//TODO: Image representation wrong???", "-\t\t\t\t\tPaletteData palette = new PaletteData(0xFF000000, 0xFF0000, 0xFF00);", "-\t\t\t\t\tImageData data = new ImageData(width, height, bpp, palette, 4, srcData);", "-\t\t\t\t\tdata.bytesPerLine = bpr;", "-\t\t\t\t\tdata.alphaData = new byte[width * height];", "-\t\t\t\t\tfor (int i = 3, o = 0; i < srcData.length; i+= 4, o++) {", "-\t\t\t\t\t\tdata.alphaData[o] = srcData[i];", "-\t\t\t\t\t}", "-\t\t\t\t\treturn data;", "-\t\t\t\t}", "+\t\t\t\tnsImage.retain();", "+\t\t\t\tImage image = Image.cocoa_new(Display.getCurrent(), SWT.BITMAP, nsImage);", "+\t\t\t\tImageData imageData = image.getImageData();", "+\t\t\t\timage.dispose();", "+\t\t\t\treturn imageData;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b7ff013ebaddb288444d2ff4a5fd3d2e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "2982bc39340de13b30271bea27a026386e5a773b", "commitAfterChange": "952e49f3e3f7d09515610ff5a655e3ee04d6b569", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": "  int[] createImage (String name)", "signatureAfterChange": "  Image createImage (String name)", "diff": ["-int /*long*/[] createImage (String name) {", "+Image createImage (String name) {", "-\tint /*long*/[] pixmap_return = new int /*long*/[1];", "-\tint /*long*/[] mask_return = new int /*long*/[1];", "-\tOS.gdk_pixbuf_render_pixmap_and_mask (pixbuf, pixmap_return, mask_return, 128);", "+\tint width = OS.gdk_pixbuf_get_width (pixbuf);", "+\tint height = OS.gdk_pixbuf_get_height (pixbuf);", "+\tint stride = OS.gdk_pixbuf_get_rowstride (pixbuf);", "+\tboolean hasAlpha = OS.gdk_pixbuf_get_has_alpha (pixbuf);", "+\tint /*long*/ pixels = OS.gdk_pixbuf_get_pixels (pixbuf);", "+\tbyte [] data = new byte [stride * height];", "+\tOS.memmove (data, pixels, data.length);", "-\treturn new int /*long*/[] {pixmap_return [0], mask_return [0]};", "+\tImageData imageData = null;", "+\tif (hasAlpha) {", "+\t\tPaletteData palette = new PaletteData (0xFF000000, 0xFF0000, 0xFF00);", "+\t\timageData = new ImageData (width, height, 32, palette);", "+\t\tbyte [] alpha = new byte [stride * height];", "+\t\tfor (int y=0; y<height; y++) {", "+\t\t\tfor (int x=0; x<width; x++) {", "+\t\t\t\talpha [y*height+x] = data [y*stride+x*4+3];", "+\t\t\t\tdata [y*stride+x*4+3] = 0;", "+\t\t\t}", "+\t\t}", "+\t\timageData.setAlphas (0, 0, width * height, alpha, 0);", "+\t} else {", "+\t\tPaletteData palette = new PaletteData (0xFF0000, 0xFF00, 0xFF);", "+\t\timageData = new ImageData (width, height, 24, palette);", "+\t}", "+\timageData.data = data;", "+\timageData.bytesPerLine = stride;", "+\treturn new Image (this, imageData);"]}], "num": 24166}