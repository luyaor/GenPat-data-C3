{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "1c47f1fe8e6d4d1600845b797f2aaf22", "detectedBy": ["DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "be893bcab435e20fb2b7963c4344ec2e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "13163ffb801b68fe75798ba09db22dc411fc60ae", "commitAfterChange": "e9cef2704b8fbeb607e5cdb6bad1b13dc87829dd", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 23, "signatureBeforeChange": " public void setAccelerator (int accelerator)", "signatureAfterChange": " public void setAccelerator (int accelerator)", "diff": ["-\t", "+\tshort [] outIndex = new short [1];", "+\tif (OS.GetIndMenuItemWithCommandID (parent.handle, id, 1, null, outIndex) != OS.kNoErr) {", "+\t\treturn;", "+\t}", "+\tboolean update = (this.accelerator == 0 && accelerator != 0) || (this.accelerator != 0 && accelerator == 0);", "-\tparent.destroyAcceleratorTable ();", "-\t\t", "-\tint hMenu= parent.handle;", "-\tshort[] index= new short[1];", "-\tOS.GetIndMenuItemWithCommandID(hMenu, id, 1, null, index);", "-\tif (index[0] > 0)", "-\t\tsetAccelerator(hMenu, index[0], accelerator);", "-\telse", "-\t\terror (SWT.ERROR_CANNOT_SET_TEXT);", "+\tboolean inSetVirtualKey = false;", "+\tint inModifiers = OS.kMenuNoModifiers, inGlyph = OS.kMenuNullGlyph, inKey = 0;", "+\tif (accelerator != 0) {", "+\t\tinKey = accelerator & ~(SWT.SHIFT | SWT.CONTROL | SWT.ALT | SWT.COMMAND);", "+\t\tif (MacUtil.KEEP_MAC_SHORTCUTS) {", "+\t\t\tif ((accelerator & SWT.COMMAND) != 0)", "+\t\t\t\tif (inKey == 'H' || inKey == 'Q') return;", "+\t\t}", "+\t\tinGlyph = keyGlyph (inKey);", "+\t\tint virtualKey = Display.untranslateKey (inKey);", "+\t\tif (virtualKey != 0) {", "+\t\t\tinSetVirtualKey = true;", "+\t\t\tinKey = virtualKey;", "+\t\t} else {", "+\t\t\tinKey = Character.toUpperCase ((char)inKey);", "+\t\t}", "+\t\tinModifiers = (byte) OS.kMenuNoCommandModifier;", "+\t\tif ((accelerator & SWT.SHIFT) != 0) inModifiers |= OS.kMenuShiftModifier;", "+\t\tif ((accelerator & SWT.CONTROL) != 0) inModifiers |= OS.kMenuControlModifier;", "+\t\tif ((accelerator & SWT.COMMAND) != 0) inModifiers &= ~OS.kMenuNoCommandModifier;", "+\t\tif ((accelerator & SWT.ALT) != 0) inModifiers |= OS.kMenuOptionModifier;", "+\t}", "+\tOS.SetMenuItemModifiers (parent.handle, outIndex [0], (byte)inModifiers);", "+\tOS.SetMenuItemCommandKey (parent.handle, outIndex [0], inSetVirtualKey, (char)inKey);", "+\tOS.SetMenuItemKeyGlyph (parent.handle, outIndex [0], (short)inGlyph);", "+\tif (update) updateText ();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5d2298568c27de8815186c9b0bdcc6ac", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "1cdb6ac60d808b5abe4b3260c8c5ac8c7e554559", "commitAfterChange": "79dc2e0426425c125758f7e958dd88564888758f", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 22, "signatureBeforeChange": " public void setAccelerator (int accelerator)", "signatureAfterChange": " public void setAccelerator (int accelerator)", "diff": ["-\t", "+\tshort [] outIndex = new short [1];", "+\tif (OS.GetIndMenuItemWithCommandID (parent.handle, id, 1, null, outIndex) != OS.noErr) {", "+\t\treturn;", "+\t}", "+\tboolean update = (this.accelerator == 0 && accelerator != 0) || (this.accelerator != 0 && accelerator == 0);", "-\tparent.destroyAcceleratorTable ();", "-\t\t", "-\tint hMenu= parent.handle;", "-\tshort[] index= new short[1];", "-\tOS.GetIndMenuItemWithCommandID(hMenu, id, 1, null, index);", "-\tif (index[0] > 0)", "-\t\tsetAccelerator(hMenu, index[0], accelerator);", "-\telse", "-\t\terror (SWT.ERROR_CANNOT_SET_TEXT);", "+\tboolean inSetVirtualKey = false;", "+\tint inModifiers = OS.kMenuNoModifiers, inGlyph = OS.kMenuNullGlyph, inKey = 0;", "+\tif (accelerator != 0) {", "+\t\tinKey = accelerator & ~(SWT.SHIFT | SWT.CONTROL | SWT.ALT | SWT.COMMAND);", "+\t\tif (MacUtil.KEEP_MAC_SHORTCUTS) {", "+\t\t\tif ((accelerator & SWT.COMMAND) != 0)", "+\t\t\t\tif (inKey == 'H' || inKey == 'Q') return;", "+\t\t}", "+\t\tinGlyph = keyGlyph (inKey);", "+\t\tint virtualKey = Display.untranslateKey (inKey);", "+\t\tif (virtualKey != 0) {", "+\t\t\tinSetVirtualKey = true;", "+\t\t\tinKey = virtualKey;", "+\t\t} else {", "+\t\t\tinKey = Character.toUpperCase ((char)inKey);", "+\t\t}", "+\t\tinModifiers = (byte) OS.kMenuNoCommandModifier;", "+\t\tif ((accelerator & SWT.SHIFT) != 0) inModifiers |= OS.kMenuShiftModifier;", "+\t\tif ((accelerator & SWT.CONTROL) != 0) inModifiers |= OS.kMenuControlModifier;", "+\t\tif ((accelerator & SWT.COMMAND) != 0) inModifiers &= ~OS.kMenuNoCommandModifier;", "+\t\tif ((accelerator & SWT.ALT) != 0) inModifiers |= OS.kMenuOptionModifier;", "+\t}", "+\tOS.SetMenuItemModifiers (parent.handle, outIndex [0], (byte)inModifiers);", "+\tOS.SetMenuItemCommandKey (parent.handle, outIndex [0], inSetVirtualKey, (char)inKey);", "+\tOS.SetMenuItemKeyGlyph (parent.handle, outIndex [0], (short)inGlyph);", "+\tif (update) updateText ();"]}], "num": 62431}