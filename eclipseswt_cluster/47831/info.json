{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "eae9ae9adba499b38611310875f492c2", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e514d5ed55e8169a452e710e5f670f43", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Shell.java", "commitBeforeChange": "469d78836b6c75ac7b00ce6846ace38bef436b99", "commitAfterChange": "96f3c5b1981fb5e1bb0f4b9846e8ec6a83907a4f", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 23, "signatureBeforeChange": "  void fixShellFocus ()", "signatureAfterChange": "  int filterProc (int xEvent, int gdkEvent, int data)", "diff": ["-void fixShellFocus () {", "-\t/*", "-\t* Bug in GTK.  When a shell that has no window manager trimmings", "-\t* is given focus, GTK gets stuck in \"focus follows pointer\" mode when", "-\t* the pointer is within the shell and its parent when the shell is disposed.", "-\t* The fix is to send a fake XFocusChangeEvent with FocusOut to the", "-\t* parent shell to clear the mode. ", "-\t*/", "-\tif (!OS.GDK_WINDOWING_X11 ()) return;", "-\tint /*long*/ xDisplay = OS.GDK_DISPLAY ();", "-\tif (xDisplay == 0) return;", "-\tint /*long*/ xWindow = OS.gdk_x11_drawable_get_xid (OS.GTK_WIDGET_WINDOW (shellHandle));", "-\tif (xWindow == 0) return;", "-\tint /*long*/ [] root = new int /*long*/ [1];", "-\tint /*long*/ [] parent = new int /*long*/ [1];", "-\tOS.XQueryTree (xDisplay, xWindow, root, parent, new int /*long*/ [1], new int[1]);", "-\tif (parent [0] == root [0]) return;", "-\tXFocusChangeEvent focusEvent = new XFocusChangeEvent ();", "-\tfocusEvent.type = OS.FocusOut;", "-\tfocusEvent.display = xDisplay;", "-\tfocusEvent.window = xWindow;", "-\tfocusEvent.detail = OS.NotifyPointer;", "-\tint /*long*/ xEvent = OS.g_malloc (XEvent.sizeof);", "-\tif (xEvent != 0) {", "-\t\tOS.memmove (xEvent, focusEvent, XFocusChangeEvent.sizeof);", "-\t\tOS.XSetInputFocus (xDisplay, xWindow, OS.RevertToParent, OS.gtk_get_current_event_time ());", "-\t\tOS.gdk_flush ();", "-\t\tOS.XSendEvent (xDisplay, xWindow, false, 0, xEvent);", "-\t\tOS.gdk_flush ();\t", "-\t\tOS.g_free (xEvent);", "-\t}", "-}", "+", "+int /*long*/ filterProc (int /*long*/ xEvent, int /*long*/ gdkEvent, int /*long*/ data) {", "+\t/*", "+\t* Bug in GTK.  When a shell that has no window manager trimmings", "+\t* is given focus, GTK gets stuck in \"focus follows pointer\" mode when", "+\t* the pointer is within the shell and its parent when the shell is disposed.", "+\t* The fix is to modify the X events that cause this to happen.", "+\t*/", "+\tXFocusChangeEvent focusEvent = new XFocusChangeEvent ();", "+\tOS.memmove (focusEvent, xEvent, 4);", "+\tswitch (focusEvent.type) {", "+\t\tcase OS.FocusIn: {", "+\t\t\tOS.memmove (focusEvent, xEvent, XFocusChangeEvent.sizeof);", "+\t\t\tif (focusEvent.detail == OS.NotifyPointer) {", "+\t\t\t\tfocusEvent.detail = OS.NotifyNonlinear;", "+\t\t\t\tOS.memmove (xEvent, focusEvent, XFocusChangeEvent.sizeof);", "+\t\t\t}", "+\t\t\tbreak;", "+\t\t}", "+\t\tcase OS.EnterNotify: {", "+\t\t\tXCrossingEvent crossingEvent = new XCrossingEvent ();", "+\t\t\tOS.memmove (crossingEvent, xEvent, XCrossingEvent.sizeof);", "+\t\t\tif (crossingEvent.focus) {", "+\t\t\t\tcrossingEvent.focus = false;", "+\t\t\t\tOS.memmove (xEvent, crossingEvent, XCrossingEvent.sizeof);", "+\t\t\t}", "+\t\t\tbreak;", "+\t\t}", "+\t}", "+\treturn 0;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3eecff2c03f9df6cc41ec2a515db73c4", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/wpf/org/eclipse/swt/widgets/FileDialog.java", "commitBeforeChange": "48b541f22f408afa128c382b5462e26eee36aaa4", "commitAfterChange": "cf26ba9116b0e686fcefe5e69dca675ea8ec55ca", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 7, "signatureBeforeChange": " public String open ()", "signatureAfterChange": " public String open ()", "diff": ["-\tif (title != null) {", "-\t\tint length = title.length ();", "-\t\tchar [] buffer = new char [length + 1];", "-\t\ttitle.getChars (0, length, buffer, 0);", "-\t\tint titlePtr = OS.gcnew_String (buffer);", "-\t\tOS.FileDialog_Title (dialog, titlePtr);", "-\t\tOS.GCHandle_Free (titlePtr);", "-\t}", "-", "-\tif (fileName != null) {", "-\t\tint length = fileName.length ();", "-\t\tchar [] buffer = new char [length + 1];", "-\t\tfileName.getChars (0, length, buffer, 0);", "-\t\tint fileNamePtr = OS.gcnew_String (buffer);", "-\t\tOS.FileDialog_FileName (dialog, fileNamePtr);", "-\t\tOS.GCHandle_Free (fileNamePtr);", "-\t}", "+\tint titlePtr = parent.createDotNetString (title, false);", "+\tOS.FileDialog_Title (dialog, titlePtr);", "+\tOS.GCHandle_Free (titlePtr);", "+\tint fileNamePtr = parent.createDotNetString (fileName, false);", "+\tOS.FileDialog_FileName (dialog, fileNamePtr);", "+\tOS.GCHandle_Free (fileNamePtr);", "-\t\tint length = strFilter.length ();", "-\t\tchar [] buffer = new char [length + 1];", "-\t\tstrFilter.getChars (0, length, buffer, 0);", "-\t\tint filterPtr = OS.gcnew_String (buffer);", "+\t\tint filterPtr = parent.createDotNetString(strFilter.toString (), false);", "-\tif (filterPath != null) {", "-\t\tint length = filterPath.length ();", "-\t\tchar [] buffer = new char [length + 1];", "-\t\tfilterPath.getChars (0, length, buffer, 0);", "-\t\tint filterPathPtr = OS.gcnew_String (buffer);", "-\t\tOS.FileDialog_InitialDirectory (dialog, filterPathPtr);", "-\t\tOS.GCHandle_Free (filterPathPtr);", "-\t}", "+\tint filterPathPtr = parent.createDotNetString (filterPath, false);", "+\tOS.FileDialog_InitialDirectory (dialog, filterPathPtr);", "+\tOS.GCHandle_Free (filterPathPtr);", "-\tboolean success = OS.CommonDialog_ShowDialog(dialog, parentHandle);", "+\tboolean success = OS.CommonDialog_ShowDialog (dialog, parentHandle);", "-\t\t\tfileNames [i] = createJavaString (name);", "+\t\t\tfileNames [i] = parent.createJavaString (name);", "-\t\t\t\tfilterPath = createJavaString (dir);", "+\t\t\t\tfilterPath = parent.createJavaString (dir);"]}], "num": 47831}