{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ac4237991e5b5856730a760a589fbd87", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f2cb1198c520d656ea7ba0dd3c4e625f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "08627b8f2edae89ba88b83322a63b53be6640d9c", "commitAfterChange": "4eaa6e52c68deb9b1675aded171ec8dd4df1c383", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": "\r \r public void setText (String string)", "signatureAfterChange": "\r \r public void setText (String string)", "diff": ["+\tboolean fixPPCMenuBar = false;\r", "+\tif (OS.IsWinCE) {\r", "+\t\tDecorations shell = parent.parent;\r", "+\t\tif (parent == shell.menuBar) {\r", "+\t\t\tfixPPCMenuBar = true;\r", "+\t\t\t/*\r", "+\t\t\t* Bug in WinCE PPC.  Tool items on the menubar don't resize\r", "+\t\t\t* correctly when the character '&' is used (even when it\r", "+\t\t\t* is a sequence '&&'.  \r", "+\t\t\t* The workaround is to remove all '&' in the string. \r", "+\t\t\t*/\r", "+\t\t\tint length = string.length();\r", "+\t\t\tchar[] text = new char[length];\r", "+\t\t\tstring.getChars(0, length, text, 0);\r", "+\t\t\tint i = 0, j = 0;\r", "+\t\t\tfor (i = 0; i < length; i++) {\r", "+\t\t\t\tif (text[i] != '&') text[j++] = text[i];\r", "+\t\t\t}\r", "+\t\t\tif (j < i) string = new String(text, 0, j);\r", "+\t\t}\r", "+\t}\r", "-\tif (OS.IsWinCE) {\r", "+\tif (fixPPCMenuBar) {\r", "-\t\tif (parent == shell.menuBar) {\r", "-\t\t\t/* set text on corresponding tool item */\r", "-\t\t\tTBBUTTONINFO info2 = new TBBUTTONINFO ();\r", "-\t\t\tinfo2.cbSize = TBBUTTONINFO.sizeof;\r", "-\t\t\tinfo2.dwMask = OS.TBIF_TEXT;\r", "-\t\t\tinfo2.pszText = pszText;\r", "-\t\t\tOS.SendMessage (shell.hwndTB, OS.TB_SETBUTTONINFO, id, info2);\r", "-\t\t}\r", "+\t\t/* set text on corresponding tool item */\r", "+\t\tTBBUTTONINFO info2 = new TBBUTTONINFO ();\r", "+\t\tinfo2.cbSize = TBBUTTONINFO.sizeof;\r", "+\t\tinfo2.dwMask = OS.TBIF_TEXT;\r", "+\t\tinfo2.pszText = pszText;\r", "+\t\tOS.SendMessage (shell.hwndTB, OS.TB_SETBUTTONINFO, id, info2);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7dd7a023ba9b9f64c9cc23efe281cbec", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "31a262c707ffe0a0ed0cbf6446bed508771db3b0", "commitAfterChange": "8a1b7547e8e6e50ca940d0b15e69549a1b12424a", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": "\r \r public void setText (String string)", "signatureAfterChange": "\r \r public void setText (String string)", "diff": ["-\t\t\t* is a sequence '&&'.  \r", "-\t\t\t* The workaround is to remove all '&' in the string. \r", "+\t\t\t* is a sequence '&&').  The fix is to remove all '&' from\r", "+\t\t\t* the string. \r", "-\t\t\tint length = string.length();\r", "-\t\t\tchar[] text = new char[length];\r", "-\t\t\tstring.getChars(0, length, text, 0);\r", "+\t\t\tint length = string.length ();\r", "+\t\t\tchar[] text = new char [length];\r", "+\t\t\tstring.getChars( 0, length, text, 0);\r", "-\t\t\tfor (i = 0; i < length; i++) {\r", "-\t\t\t\tif (text[i] != '&') text[j++] = text[i];\r", "+\t\t\tfor (i=0; i<length; i++) {\r", "+\t\t\t\tif (text[i] != '&') text [j++] = text [i];\r", "-\t\t\tif (j < i) string = new String(text, 0, j);\r", "+\t\t\tif (j < i) string = new String (text, 0, j);\r", "+\t/*\r", "+\t* Bug in Windows 2000.  For some reason, when MIIM_TYPE is set\r", "+\t* on a menu item that also has MIIM_BITMAP, the MIIM_TYPE clears\r", "+\t* the MIIM_BITMAP style.  The fix is to reset both MIIM_BITMAP.\r", "+\t* Note, this does not happen on Windows 98.\r", "+\t*/\r", "+\tif (!OS.IsWinCE) {\r", "+\t\tif ((OS.WIN32_MAJOR << 16 | OS.WIN32_MINOR) >= (4 << 16 | 10)) {\r", "+\t\t\tif (image != null) {\r", "+\t\t\t\tinfo.fMask = OS.MIIM_BITMAP;\r", "+\t\t\t\tinfo.hbmpItem = OS.HBMMENU_CALLBACK;\r", "+\t\t\t\tsuccess = OS.SetMenuItemInfo (hMenu, id, false, info);\r", "+\t\t\t}\r", "+\t\t}\r", "+\t}\r", "-\t\t/* set text on corresponding tool item */\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5be1d895450919feca072188f53c1c70", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/TabItem.java", "commitBeforeChange": "4fc636c053e344f12be5975dec2a29e48c566ce5", "commitAfterChange": "f0e659ec45bbe8a76afe4acc9e00abfecfe3153d", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "\r \r public void setText (String string)", "signatureAfterChange": "\r \r public void setText (String string)", "diff": ["-\tif (COMCTL32_MAJOR >= 6) {\r", "-\t\t/*\r", "-\t\t* Feature in comctl version 6.0.  Tab items with an image\r", "-\t\t* and a label including the character '&' are rendered\r", "-\t\t* incorrectly (even when it is a sequence '&&'). The image\r", "-\t\t* overlaps the label.  The fix is to remove all '&' from\r", "-\t\t* the string. \r", "-\t\t*/\r", "-\t\tint length = string.length ();\r", "-\t\tchar[] text = new char [length];\r", "-\t\tstring.getChars( 0, length, text, 0);\r", "-\t\tint i = 0, j = 0;\r", "-\t\tfor (i=0; i<length; i++) {\r", "-\t\t\tif (text[i] != '&') text [j++] = text [i];\r", "-\t\t}\r", "-\t\tif (j < i) string = new String (text, 0, j);\r", "-\t}\r", "+\t/*\r", "+\t* Bug in Windows.  In version 6.00 of COMCTL32.DLL, tab\r", "+\t* items with an image and a label that includes '&' cause\r", "+\t* the tab to draw incorrectly (even when doubled '&&').\r", "+\t* The image  overlaps the label.  The fix is to remove\r", "+\t* all '&' characters from the string. \r", "+\t*/\r", "+\tif (COMCTL32_MAJOR >= 6 && image != null) {\r", "+\t\tif (text.indexOf ('&') != -1) {\r", "+\t\t\tint length = string.length ();\r", "+\t\t\tchar[] text = new char [length];\r", "+\t\t\tstring.getChars ( 0, length, text, 0);\r", "+\t\t\tint i = 0, j = 0;\r", "+\t\t\tfor (i=0; i<length; i++) {\r", "+\t\t\t\tif (text[i] != '&') text [j++] = text [i];\r", "+\t\t\t}\r", "+\t\t\tif (j < i) string = new String (text, 0, j);\r", "+\t\t}\r", "+\t}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f4df765be5ba699493ec8c72991cd16c", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/TabItem.java", "commitBeforeChange": "c270b603c7dfafdbba4594330199062a98e24cfe", "commitAfterChange": "1bf0f295caa27c5dbd58db068182111fea948e70", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 13, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": " public void setText (String string)", "diff": ["-\t/*", "-\t* Bug in Windows.  In version 6.00 of COMCTL32.DLL, tab", "-\t* items with an image and a label that includes '&' cause", "-\t* the tab to draw incorrectly (even when doubled '&&').", "-\t* The image overlaps the label.  The fix is to remove", "-\t* all '&' characters from the string. ", "-\t*/", "-\tif (OS.COMCTL32_MAJOR >= 6 && image != null) {", "-\t\tif (text.indexOf ('&') != -1) {", "-\t\t\tint length = string.length ();", "-\t\t\tchar[] text = new char [length];", "-\t\t\tstring.getChars ( 0, length, text, 0);", "-\t\t\tint i = 0, j = 0;", "-\t\t\tfor (i=0; i<length; i++) {", "-\t\t\t\tif (text[i] != '&') text [j++] = text [i];", "-\t\t\t}", "-\t\t\tif (j < i) string = new String (text, 0, j);", "-\t\t}", "-\t}", "-\tint hwnd = parent.handle;", "-\tint hHeap = OS.GetProcessHeap ();", "-\tTCHAR buffer = new TCHAR (parent.getCodePage (), string, true);", "-\tint byteCount = buffer.length () * TCHAR.sizeof;", "-\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "-\tOS.MoveMemory (pszText, buffer, byteCount); ", "-\tTCITEM tcItem = new TCITEM ();", "-\ttcItem.mask = OS.TCIF_TEXT;", "-\ttcItem.pszText = pszText;", "-\tOS.SendMessage (hwnd, OS.TCM_SETITEM, index, tcItem);", "-\tOS.HeapFree (hHeap, 0, pszText);", "+\t_setText (index, string);"]}], "num": 28052}