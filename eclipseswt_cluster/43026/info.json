{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "33b3c67949b85aabb20e17039b3aca65", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "28f1ff87b9514a0dbf8e755055695ab2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "ad7faf2331d33c7f68735fad69a11baef3deb362", "commitAfterChange": "169f4f3eed024153ecdf584bb52e3a3a80efd99a", "methodNumberBeforeChange": 47, "methodNumberAfterChange": 48, "signatureBeforeChange": "  public int internal_new_GC (GCData data)", "signatureAfterChange": "  public int internal_new_GC (GCData data)", "diff": ["+\tint visibleRgn = 0;", "+\tint window = OS.GetControlOwner (handle);", "+\tint port = OS.GetWindowPort (window);", "-\tint context = 0, paintRgn = 0, visibleRgn = 0;", "-\tif (data.paintEvent != 0) {", "-\t\tint theEvent = data.paintEvent;", "-\t\tOS.GetEventParameter (theEvent, OS.kEventParamCGContextRef, OS.typeCGContextRef, null, 4, null, buffer);", "-\t\tcontext = buffer [0];\t", "-\t\tOS.GetEventParameter (theEvent, OS.kEventParamRgnHandle, OS.typeQDRgnHandle, null, 4, null, buffer);", "-\t\tvisibleRgn = paintRgn = buffer [0];", "-\t}", "-\tif (context == 0) {", "-\t\tint window = OS.GetControlOwner (handle);", "-\t\tint port = OS.GetWindowPort (window);", "-\t\tOS.CreateCGContextForPort (port, buffer);", "-\t\tcontext = buffer [0];", "-\t\tif (context != 0) {", "-\t\t\tRect rect = new Rect ();", "-\t\t\tOS.GetControlBounds (handle, rect);", "-\t\t\tRect portRect = new Rect ();", "-\t\t\tOS.GetPortBounds (port, portRect);", "+\tOS.CreateCGContextForPort (port, buffer);", "+\tint context = buffer [0];", "+\tif (context != 0) {", "+\t\tRect rect = new Rect ();", "+\t\tOS.GetControlBounds (handle, rect);", "+\t\tRect portRect = new Rect ();", "+\t\tOS.GetPortBounds (port, portRect);", "+\t\tif (data != null && data.paintEvent != 0) {", "+\t\t\tvisibleRgn = data.visibleRgn;", "+\t\t} else {", "-\t\t\tif (paintRgn != 0) OS.SectRgn (paintRgn, visibleRgn, visibleRgn);", "-\t\t\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "-\t\t\tint portHeight = portRect.bottom - portRect.top;", "-\t\t\tOS.CGContextScaleCTM (context, 1, -1);", "-\t\t\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "+\t\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "+\t\tint portHeight = portRect.bottom - portRect.top;", "+\t\tOS.CGContextScaleCTM (context, 1, -1);", "+\t\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "-\t} else {", "-\t\tif (visibleRgn != paintRgn) OS.DisposeRgn (visibleRgn);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "179bf644170f43326175869868046d42", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 48, "methodNumberAfterChange": 44, "signatureBeforeChange": " public int internal_new_GC (GCData data)", "signatureAfterChange": "  public int internal_new_GC (GCData data)", "diff": ["- */", "+", "-    /* AW", "-\tif (!OS.XtIsRealized (handle)) {", "-\t\tShell shell = getShell ();", "-\t\tshell.realizeWidget ();", "+\tint [] buffer = new int [1];", "+\tint context = 0, paintRgn = 0, visibleRgn = 0;", "+\tif (data.paintEvent != 0) {", "+\t\tint theEvent = data.paintEvent;", "+\t\tOS.GetEventParameter (theEvent, OS.kEventParamCGContextRef, OS.typeCGContextRef, null, 4, null, buffer);", "+\t\tcontext = buffer [0];\t", "+\t\tOS.GetEventParameter (theEvent, OS.kEventParamRgnHandle, OS.typeQDRgnHandle, null, 4, null, buffer);", "+\t\tvisibleRgn = paintRgn = buffer [0];", "-\tint xDisplay = OS.XtDisplay (handle);", "-\tif (xDisplay == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\tint xWindow = OS.XtWindow (handle);", "-\tif (xWindow == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\tint xGC = OS.XCreateGC (xDisplay, xWindow, 0, null);", "-\tif (xGC == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\tOS.XSetGraphicsExposures (xDisplay, xGC, false);", "-\tint [] argList = {OS.XmNforeground, 0, OS.XmNbackground, 0, OS.XmNcolormap, 0};", "-\tOS.XtGetValues (handle, argList, argList.length / 2);", "-\t*/", "+\tif (context == 0) {", "+\t\tint window = OS.GetControlOwner (handle);", "+\t\tint port = OS.GetWindowPort (window);", "+\t\tOS.CreateCGContextForPort (port, buffer);", "+\t\tcontext = buffer [0];", "+\t\tif (context != 0) {", "+\t\t\tRect rect = new Rect ();", "+\t\t\tOS.GetControlBounds (handle, rect);", "+\t\t\tRect portRect = new Rect ();", "+\t\t\tOS.GetPortBounds (port, portRect);", "+\t\t\tvisibleRgn = getVisibleRegion (handle);", "+\t\t\tif (paintRgn != 0) OS.SectRgn (paintRgn, visibleRgn, visibleRgn);", "+\t\t\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "+\t\t\tint portHeight = portRect.bottom - portRect.top;", "+\t\t\tOS.CGContextScaleCTM (context, 1, -1);", "+\t\t\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "+\t\t}", "+\t}", "+\tif (context == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "-\t\tdata.device = getDisplay ();", "-\t\tdata.foreground = getForegroundPixel();", "-\t\tdata.background = getBackgroundPixel();", "-\t\tdata.font = font.handle;", "-\t\tdata.controlHandle = handle;", "-\t}", "-", "-\tint wHandle= 0;", "-\tif (MacUtil.USE_FRAME) {", "-\t\tShell shell= getShell();", "-\t\tif (shell != null)", "-\t\t\twHandle= shell.shellHandle;", "+\t\tDisplay display = getDisplay ();", "+\t\tdata.device = display;", "+\t\tdata.foreground = foreground != null ? foreground : display.getSystemColor (SWT.COLOR_BLACK).handle;", "+\t\tdata.background = background != null ? background : display.getSystemColor (SWT.COLOR_WHITE).handle;", "+\t\tdata.font = font != null ? font : defaultFont ();", "+\t\tdata.visibleRgn = visibleRgn;", "+\t\tdata.control = handle;", "-\t\twHandle= OS.GetControlOwner(handle);", "+\t\tif (visibleRgn != paintRgn) OS.DisposeRgn (visibleRgn);", "-\tint xGC= OS.GetWindowPort(wHandle);", "-\tif (xGC == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\t", "-    return xGC;", "+\treturn context;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "75801d1a32a7de51af856ac021333fa9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "e013b3ce89b90da2153438b34cb43d48c16fa7a0", "commitAfterChange": "7a42cc92cd5348bbf0e0886e024fbfe78c23cc9c", "methodNumberBeforeChange": 51, "methodNumberAfterChange": 51, "signatureBeforeChange": " public int internal_new_GC (GCData data)", "signatureAfterChange": " public int internal_new_GC (GCData data)", "diff": ["-\tint visibleRgn = 0;", "-\tif (context != 0) {", "-\t\tRect rect = new Rect ();", "-\t\tRect portRect = new Rect ();", "-\t\tOS.GetControlBounds (handle, rect);", "-\t\tOS.GetPortBounds (port, portRect);", "-\t\tif (data != null && data.paintEvent != 0) {", "-\t\t\tvisibleRgn = data.visibleRgn;", "+\tif (context == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "+\tint visibleRgn = 0;", "+\tif (data != null && data.paintEvent != 0) {", "+\t\tvisibleRgn = data.visibleRgn;", "+\t} else {", "+\t\tif (getDrawCount (handle) > 0) {", "+\t\t\tvisibleRgn = OS.NewRgn ();", "-\t\t\tif (getDrawCount (handle) > 0) {", "-\t\t\t\tvisibleRgn = OS.NewRgn ();", "-\t\t\t} else {", "-\t\t\t\tvisibleRgn = getVisibleRegion (handle, true);", "-\t\t\t}", "-\t\t}", "-\t\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "-\t\tint portHeight = portRect.bottom - portRect.top;", "-\t\tOS.CGContextScaleCTM (context, 1, -1);", "-\t\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "-\t\tif (data != null) {", "-\t\t\tdata.portRect = portRect;", "-\t\t\tdata.controlRect = rect;", "+\t\t\tvisibleRgn = getVisibleRegion (handle, true);", "-\tif (context == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "+\tRect rect = new Rect ();", "+\tRect portRect = new Rect ();", "+\tOS.GetControlBounds (handle, rect);", "+\tOS.GetPortBounds (port, portRect);", "+\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "+\tint portHeight = portRect.bottom - portRect.top;", "+\tOS.CGContextScaleCTM (context, 1, -1);", "+\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "-\t\tdata.foreground = foreground != null ? foreground : new float [] {0, 0, 0, 1};", "+\t\tdata.foreground = foreground != null ? foreground : new float [] {0, 0, 0, 1};", "+\t\tdata.portRect = portRect;", "+\t\tdata.controlRect = rect;"]}], "num": 43026}