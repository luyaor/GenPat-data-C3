{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "288edc71cb4de2166c15d26418bd5889", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3c4ee555081efdcd79da31534d2b0d76", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt.tools/Mac Generation/org/eclipse/swt/tools/internal/MacGenerator.java", "commitBeforeChange": "faf1b17ce38d7db186ae3678559b0f7c7aa0346b", "commitAfterChange": "2f4a5c62ac7c181999d015c72b6b830a180e7054", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 4, "signatureBeforeChange": "  void generateClasses()", "signatureAfterChange": "  void generateClasses()", "diff": ["+", "-\tMetaData metaData = new MetaData(mainClassName);", "-\t", "+\tHashMap classes = new HashMap();", "-\t\t\tif (\"class\".equals(node.getNodeName())) {", "-\t\t\t\tif (getGen(node)) {", "-\t\t\t\t\tByteArrayOutputStream out = new ByteArrayOutputStream();", "-\t\t\t\t\tthis.out = new PrintStream(out);", "-\t\t\t\t\tString data = metaData.getMetaData(\"swt_copyright\", null);", "-\t\t\t\t\tif (data != null && data.length() != 0) {", "-\t\t\t\t\t\tout(fixDelimiter(data));", "+\t\t\tif (\"class\".equals(node.getNodeName()) && getGen(node)) {", "+\t\t\t\tMap methods;", "+\t\t\t\tNamedNodeMap attributes = node.getAttributes();", "+\t\t\t\tString name = attributes.getNamedItem(\"name\").getNodeValue();", "+\t\t\t\tObject[] clazz = (Object[])classes.get(name);", "+\t\t\t\tif (clazz == null) {", "+\t\t\t\t\tmethods = new TreeMap();", "+\t\t\t\t\tclasses.put(name, new Object[]{node, methods});", "+\t\t\t\t} else {", "+\t\t\t\t\tmethods = (TreeMap)clazz[1];", "+\t\t\t\t}", "+\t\t\t\tNodeList methodList = node.getChildNodes();", "+\t\t\t\tfor (int j = 0; j < methodList.getLength(); j++) {", "+\t\t\t\t\tNode method = methodList.item(j);", "+\t\t\t\t\tif (\"method\".equals(method.getNodeName()) && getGen(method)) {", "+\t\t\t\t\t\tNamedNodeMap mthAttributes = method.getAttributes();", "+\t\t\t\t\t\tString selector = mthAttributes.getNamedItem(\"selector\").getNodeValue();", "+\t\t\t\t\t\t//static overloading instance method", "+\t\t\t\t\t\tif (methods.get(selector) == null) {", "+\t\t\t\t\t\t\tmethods.put(selector, method);", "+\t\t\t\t\t\t} ", "-\t\t\t\t\tNamedNodeMap attributes = node.getAttributes();", "-\t\t\t\t\tString name = attributes.getNamedItem(\"name\").getNodeValue();", "-\t\t\t\t\tout(\"package org.eclipse.swt.internal.cocoa;\");", "-\t\t\t\t\toutln();", "-\t\t\t\t\toutln();", "-\t\t\t\t\tout(\"public class \");", "-\t\t\t\t\tout(name);", "-\t\t\t\t\tif (name.equals(\"NSObject\")) {", "-\t\t\t\t\t\tout(\" extends id {\");", "-\t\t\t\t\t} else {", "-\t\t\t\t\t\tNode superclass = attributes.getNamedItem(\"swt_superclass\");", "-\t\t\t\t\t\tout(\" extends \");", "-\t\t\t\t\t\tif (superclass != null) {", "-\t\t\t\t\t\t\tout(superclass.getNodeValue());", "-\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\tout(\"NSObject\");", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tout(\" {\");", "-\t\t\t\t\t}", "-\t\t\t\t\toutln();", "-\t\t\t\t\toutln();", "-\t\t\t\t\tout(\"public \");", "-\t\t\t\t\tout(name);", "-\t\t\t\t\tout(\"() {\");", "-\t\t\t\t\toutln();", "-\t\t\t\t\tout(\"\\tsuper();\");", "-\t\t\t\t\toutln();", "-\t\t\t\t\tout(\"}\");", "-\t\t\t\t\toutln();", "-\t\t\t\t\toutln();", "-\t\t\t\t\tout(\"public \");", "-\t\t\t\t\tout(name);", "-\t\t\t\t\tout(\"(int id) {\");", "-\t\t\t\t\toutln();", "-\t\t\t\t\tout(\"\\tsuper(id);\");", "-\t\t\t\t\toutln();", "-\t\t\t\t\tout(\"}\");", "-\t\t\t\t\toutln();", "-\t\t\t\t\toutln();", "-\t\t\t\t\tNodeList methods = node.getChildNodes();", "-\t\t\t\t\tfor (int j = 0; j < methods.getLength(); j++) {", "-\t\t\t\t\t\tNode method = methods.item(j);", "-\t\t\t\t\t\tif (\"method\".equals(method.getNodeName())) {", "-\t\t\t\t\t\t\tif (getGen(method)) {", "-\t\t\t\t\t\t\t\tNamedNodeMap mthAttributes = method.getAttributes();", "-\t\t\t\t\t\t\t\tString sel = mthAttributes.getNamedItem(\"selector\").getNodeValue();", "-\t\t\t\t\t\t\t\tout(\"public \");", "-\t\t\t\t\t\t\t\tboolean isStatic = mthAttributes.getNamedItem(\"class_method\") != null; ", "-\t\t\t\t\t\t\t\tif (isStatic) out(\"static \");", "-\t\t\t\t\t\t\t\tNode returnNode = getReturnNode(method.getChildNodes());", "-\t\t\t\t\t\t\t\tif (getType(returnNode).equals(\"void\")) returnNode = null;", "-\t\t\t\t\t\t\t\tString returnType = \"\";", "-\t\t\t\t\t\t\t\tif (returnNode != null) {", "-\t\t\t\t\t\t\t\t\tNode replace = returnNode.getAttributes().getNamedItem(\"swt_replace_return\");", "-\t\t\t\t\t\t\t\t\tif (replace != null) {", "-\t\t\t\t\t\t\t\t\t\tout(returnType = replace.getNodeValue());", "-\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\tout(returnType = getJavaType(returnNode));", "-\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\tout(\" \");", "-\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\tout(\"void \");", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tString methodName = sel;", "-\t\t\t\t\t\t\t\tif (isUnique(method, methods)) {", "-\t\t\t\t\t\t\t\t\tint index = methodName.indexOf(\":\");", "-\t\t\t\t\t\t\t\t\tif (index != -1) methodName = methodName.substring(0, index);", "-\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\tmethodName = methodName.replaceAll(\":\", \"_\");", "-\t\t\t\t\t\t\t\t\tif (isStatic) methodName = \"static_\" + methodName;", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tout(methodName);", "-\t\t\t\t\t\t\t\tout(\"(\");", "-\t\t\t\t\t\t\t\tNodeList params = method.getChildNodes();", "-\t\t\t\t\t\t\t\tboolean first = true;", "-\t\t\t\t\t\t\t\tfor (int k = 0; k < params.getLength(); k++) {", "-\t\t\t\t\t\t\t\t\tNode param = params.item(k);", "-\t\t\t\t\t\t\t\t\tif (\"arg\".equals(param.getNodeName())) {", "-\t\t\t\t\t\t\t\t\t\tNamedNodeMap paramAttributes = param.getAttributes();", "-\t\t\t\t\t\t\t\t\t\tif (!first) out(\", \");", "-\t\t\t\t\t\t\t\t\t\tout(getJavaType(param));", "-\t\t\t\t\t\t\t\t\t\tfirst = false;", "-\t\t\t\t\t\t\t\t\t\tout(\" \");", "-\t\t\t\t\t\t\t\t\t\tString paramName = paramAttributes.getNamedItem(\"name\").getNodeValue();", "-\t\t\t\t\t\t\t\t\t\tif (paramName.length() == 0) paramName = \"arg\" + paramAttributes.getNamedItem(\"index\").getNodeValue();", "-\t\t\t\t\t\t\t\t\t\tif (paramName.equals(\"boolean\")) paramName = \"b\";", "-\t\t\t\t\t\t\t\t\t\tout(paramName);", "-\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tout(\") {\");", "-\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\t\tif (returnNode != null && isStruct(returnNode)) {", "-\t\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "-\t\t\t\t\t\t\t\t\tout(\"\\t\");", "-\t\t\t\t\t\t\t\t\tout(type);", "-\t\t\t\t\t\t\t\t\tout(\" result = new \");", "-\t\t\t\t\t\t\t\t\tout(type);", "-\t\t\t\t\t\t\t\t\tout(\"();\");", "-\t\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\t\t\tout(\"\\tOS.objc_msgSend_stret(result, \");", "-\t\t\t\t\t\t\t\t} else if (returnNode != null && isFloatingPoint(returnNode)) {", "-\t\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "-\t\t\t\t\t\t\t\t\tout(\"\\treturn \");", "-\t\t\t\t\t\t\t\t\tif (type.equals(\"float\")) out(\"(float)\");", "-\t\t\t\t\t\t\t\t\tout(\"OS.objc_msgSend_fpret(\");", "-\t\t\t\t\t\t\t\t} else if (returnNode != null && isObject(returnNode)) {", "-\t\t\t\t\t\t\t\t\tout(\"\\tint result = OS.objc_msgSend(\");", "-\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\tif (returnNode != null) {", "-\t\t\t\t\t\t\t\t\t\tout(\"\\treturn \");", "-\t\t\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "-\t\t\t\t\t\t\t\t\t\tif (!(type.equals(\"int\") || type.equals(\"boolean\"))) {", "-\t\t\t\t\t\t\t\t\t\t\tout(\"(\");", "-\t\t\t\t\t\t\t\t\t\t\tout(type);", "-\t\t\t\t\t\t\t\t\t\t\tout(\")\");", "-\t\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\tout(\"\\t\");", "-\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\tout(\"OS.objc_msgSend(\");", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tif (isStatic) {", "-\t\t\t\t\t\t\t\t\tout(\"OS.class_\");", "-\t\t\t\t\t\t\t\t\tout(name);", "-\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\tout(\"this.id\");", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tout(\", OS.\");", "-\t\t\t\t\t\t\t\tout(getSelConst(sel));", "-\t\t\t\t\t\t\t\tfirst = false;", "-\t\t\t\t\t\t\t\tfor (int k = 0; k < params.getLength(); k++) {", "-\t\t\t\t\t\t\t\t\tNode param = params.item(k);", "-\t\t\t\t\t\t\t\t\tif (\"arg\".equals(param.getNodeName())) {", "-\t\t\t\t\t\t\t\t\t\tNamedNodeMap paramAttributes = param.getAttributes();", "-\t\t\t\t\t\t\t\t\t\tif (!first) out(\", \");", "-\t\t\t\t\t\t\t\t\t\tfirst = false;", "-\t\t\t\t\t\t\t\t\t\tString paramName = paramAttributes.getNamedItem(\"name\").getNodeValue();", "-\t\t\t\t\t\t\t\t\t\tif (paramName.length() == 0) paramName = \"arg\" + paramAttributes.getNamedItem(\"index\").getNodeValue();", "-\t\t\t\t\t\t\t\t\t\tif (paramName.equals(\"boolean\")) paramName = \"b\";", "-\t\t\t\t\t\t\t\t\t\tif (isObject(param)) {", "-\t\t\t\t\t\t\t\t\t\t\tout(paramName);", "-\t\t\t\t\t\t\t\t\t\t\tout(\" != null ? \");", "-\t\t\t\t\t\t\t\t\t\t\tout(paramName);", "-\t\t\t\t\t\t\t\t\t\t\tout(\".id : 0\");", "-\t\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\t\tout(paramName);", "-\t\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tout(\")\");", "-\t\t\t\t\t\t\t\tif (returnNode != null && isBoolean(returnNode)) {", "-\t\t\t\t\t\t\t\t\tout(\" != 0\");", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tout(\";\");", "-\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\t\tif (returnNode != null && isObject(returnNode)) {", "-\t\t\t\t\t\t\t\t\tif (!isStatic && returnType.equals(name)) {", "-\t\t\t\t\t\t\t\t\t\tout(\"\\treturn result == this.id ? this : (result != 0 ? new \");", "-\t\t\t\t\t\t\t\t\t\tout(returnType);", "-\t\t\t\t\t\t\t\t\t\tout(\"(result) : null);\");", "-\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\tout(\"\\treturn result != 0 ? new \");", "-\t\t\t\t\t\t\t\t\t\tout(returnType);", "-\t\t\t\t\t\t\t\t\t\tout(\"(result) : null;\");", "-\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\t\t} else if (returnNode != null && isStruct(returnNode)) {", "-\t\t\t\t\t\t\t\t\tout(\"\\treturn result;\");", "-\t\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tout(\"}\");", "-\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t}\t\t\t\t\t", "-\t\t\t\t\t}\t\t\t\t", "-\t\t\t\t\tout(\"}\");", "-\t\t\t\t\toutln();", "-\t\t\t\t\t", "-\t\t\t\t\tString fileName = outputDir + mainClassName.substring(0, mainClassName.lastIndexOf('.') + 1).replace('.', '/') + name + \".java\";", "-\t\t\t\t\ttry {", "-\t\t\t\t\t\tout.flush();", "-\t\t\t\t\t\tif (out.size() > 0) output(out.toByteArray(), fileName);", "-\t\t\t\t\t} catch (Exception e) {", "-\t\t\t\t\t\tSystem.out.println(\"Problem\");", "-\t\t\t\t\t\te.printStackTrace(System.out);", "-\t\t\t\t\t}", "-\t\t\t\t\tout = null;", "+\t}", "+\tMetaData metaData = new MetaData(mainClassName);\t", "+\tSet classNames = classes.keySet();", "+\tfor (Iterator iterator = classNames.iterator(); iterator.hasNext();) {", "+\t\tByteArrayOutputStream out = new ByteArrayOutputStream();", "+\t\tthis.out = new PrintStream(out);", "+", "+\t\tString className = (String) iterator.next();", "+\t\tObject[] clazz = (Object[])classes.get(className);", "+\t\tNode node = (Node)clazz[0];", "+\t\tTreeMap methods = (TreeMap)clazz[1];", "+\t\tNamedNodeMap attributes = node.getAttributes();", "+\t\tString data = metaData.getMetaData(\"swt_copyright\", null);", "+\t\tif (data != null && data.length() != 0) {", "+\t\t\tout(fixDelimiter(data));", "+\t\t}", "+\t\tout(\"package \");", "+\t\tString packageName = getPackageName(mainClassName);", "+\t\tout(packageName);", "+\t\tout(\";\");", "+\t\toutln();", "+\t\toutln();", "+\t\tout(\"public class \");", "+\t\tout(className);", "+\t\tif (className.equals(\"NSObject\")) {", "+\t\t\tout(\" extends id {\");", "+\t\t} else {", "+\t\t\tNode superclass = attributes.getNamedItem(\"swt_superclass\");", "+\t\t\tout(\" extends \");", "+\t\t\tif (superclass != null) {", "+\t\t\t\tout(superclass.getNodeValue());", "+\t\t\t} else {", "+\t\t\t\tout(\"NSObject\");", "+\t\t\t}", "+\t\t\tout(\" {\");", "+\t\t}", "+\t\toutln();", "+\t\toutln();", "+\t\tout(\"public \");", "+\t\tout(className);", "+\t\tout(\"() {\");", "+\t\toutln();", "+\t\tout(\"\\tsuper();\");", "+\t\toutln();", "+\t\tout(\"}\");", "+\t\toutln();", "+\t\toutln();", "+\t\tout(\"public \");", "+\t\tout(className);", "+\t\tout(\"(int id) {\");", "+\t\toutln();", "+\t\tout(\"\\tsuper(id);\");", "+\t\toutln();", "+\t\tout(\"}\");", "+\t\toutln();", "+\t\toutln();", "+\t\t", "+\t\tgenerateMethods(className, methods);", "+\t\t", "+\t\tout(\"}\");", "+\t\toutln();", "+\t\t", "+\t\tString fileName = outputDir + packageName.replace('.', '/') + \"/\" + className + \".java\";", "+\t\ttry {", "+\t\t\tout.flush();", "+\t\t\tif (out.size() > 0) output(out.toByteArray(), fileName);", "+\t\t} catch (Exception e) {", "+\t\t\tSystem.out.println(\"Problem\");", "+\t\t\te.printStackTrace(System.out);", "+\t\t}", "+\t\tout = null;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c4bb9c6ed97fc22e03e6c6766ccab903", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt.tools/Mac Generation/org/eclipse/swt/tools/internal/MacGenerator.java", "commitBeforeChange": "82f22e2e03e4d70c9aa26448e8c8735454530ca2", "commitAfterChange": "e614ab59651b8801df1cfd335df3edd886371bea", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 3, "signatureBeforeChange": "  void generateClasses()", "signatureAfterChange": "  void generateClasses()", "diff": ["+\tMetaData metaData = new MetaData(mainClassName);", "+\t", "-\t\t\t\tNamedNodeMap attributes = node.getAttributes();", "-\t\t\t\tNode gen = attributes.getNamedItem(\"swt_gen\");", "-\t\t\t\tif (gen != null && gen.getNodeValue().equals(\"mixed\")) {", "+\t\t\t\tif (getGen(node)) {", "+\t\t\t\t\tByteArrayOutputStream out = new ByteArrayOutputStream();", "+\t\t\t\t\tthis.out = new PrintStream(out);", "+\t\t\t\t\tString data = metaData.getMetaData(\"swt_copyright\", null);", "+\t\t\t\t\tif (data != null && data.length() != 0) {", "+\t\t\t\t\t\tout(fixDelimiter(data));", "+\t\t\t\t\t}\t\t\t\t\t", "+\t\t\t\t\tNamedNodeMap attributes = node.getAttributes();", "-\t\t\t\t\tif (outputDir != null) {", "-//\t\t\t\t\t\tFileOutputStream  is = new FileOutputStream(outputDir + \"/\" + name + \".java\");", "-\t\t\t\t\t\tout = new PrintStream(new ByteArrayOutputStream());", "-\t\t\t\t\t}", "-\t\t\t\t\t\tout(\" extends NSObject {\");", "+\t\t\t\t\t\tNode superclass = attributes.getNamedItem(\"swt_superclass\");", "+\t\t\t\t\t\tout(\" extends \");", "+\t\t\t\t\t\tif (superclass != null) {", "+\t\t\t\t\t\t\tout(superclass.getNodeValue());", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\tout(\"NSObject\");", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tout(\" {\");", "-\t\t\t\t\t\t\tString sel = method.getAttributes().getNamedItem(\"selector\").getNodeValue();", "-\t\t\t\t\t\t\tout(\"public \");", "-\t\t\t\t\t\t\tboolean isStatic = method.getAttributes().getNamedItem(\"class_method\") != null; ", "-\t\t\t\t\t\t\tif (isStatic) out(\"static \");", "-\t\t\t\t\t\t\tNode returnNode = getReturnNode(method.getChildNodes());", "-\t\t\t\t\t\t\tif (getType(returnNode).equals(\"void\")) returnNode = null;", "-\t\t\t\t\t\t\tif (returnNode != null) {", "-\t\t\t\t\t\t\t\tout(getJavaType(returnNode));", "-\t\t\t\t\t\t\t\tout(\" \");", "-\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\tout(\"void \");", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tString methodName = sel;", "-\t\t\t\t\t\t\tif (isUnique(method, methods)) {", "-\t\t\t\t\t\t\t\tint index = methodName.indexOf(\":\");", "-\t\t\t\t\t\t\t\tif (index != -1) methodName = methodName.substring(0, index);", "-\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\tmethodName = methodName.replaceAll(\":\", \"_\");", "-\t\t\t\t\t\t\t\tif (isStatic) methodName = \"static_\" + methodName;", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tout(methodName);", "-\t\t\t\t\t\t\tout(\"(\");", "-\t\t\t\t\t\t\tNodeList params = method.getChildNodes();", "-\t\t\t\t\t\t\tboolean first = true;", "-\t\t\t\t\t\t\tfor (int k = 0; k < params.getLength(); k++) {", "-\t\t\t\t\t\t\t\tNode param = params.item(k);", "-\t\t\t\t\t\t\t\tif (\"arg\".equals(param.getNodeName())) {", "-\t\t\t\t\t\t\t\t\tNamedNodeMap paramAttributes = param.getAttributes();", "-\t\t\t\t\t\t\t\t\tif (!first) out(\", \");", "-\t\t\t\t\t\t\t\t\tout(getJavaType(param));", "-\t\t\t\t\t\t\t\t\tfirst = false;", "-\t\t\t\t\t\t\t\t\tout(\" \");", "-\t\t\t\t\t\t\t\t\tString paramName = paramAttributes.getNamedItem(\"name\").getNodeValue();", "-\t\t\t\t\t\t\t\t\tif (paramName.equals(\"boolean\")) paramName = \"b\";", "-\t\t\t\t\t\t\t\t\tout(paramName);", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tout(\") {\");", "-\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\tif (returnNode != null && isStruct(returnNode)) {", "-\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "-\t\t\t\t\t\t\t\tout(\"\\t\");", "-\t\t\t\t\t\t\t\tout(type);", "-\t\t\t\t\t\t\t\tout(\" result = new \");", "-\t\t\t\t\t\t\t\tout(type);", "-\t\t\t\t\t\t\t\tout(\"();\");", "-\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\t\tout(\"\\tOS.objc_msgSend_stret(result, \");", "-\t\t\t\t\t\t\t} else if (returnNode != null && isFloatingPoint(returnNode)) {", "-\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "-\t\t\t\t\t\t\t\tout(\"\\treturn \");", "-\t\t\t\t\t\t\t\tif (type.equals(\"float\")) out(\"(float)\");", "-\t\t\t\t\t\t\t\tout(\"OS.objc_msgSend_fpret(\");", "-\t\t\t\t\t\t\t} else if (returnNode != null && isObject(returnNode)) {", "-\t\t\t\t\t\t\t\tout(\"\\tint result = OS.objc_msgSend(\");", "-\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\tif (getGen(method)) {", "+\t\t\t\t\t\t\t\tNamedNodeMap mthAttributes = method.getAttributes();", "+\t\t\t\t\t\t\t\tString sel = mthAttributes.getNamedItem(\"selector\").getNodeValue();", "+\t\t\t\t\t\t\t\tout(\"public \");", "+\t\t\t\t\t\t\t\tboolean isStatic = mthAttributes.getNamedItem(\"class_method\") != null; ", "+\t\t\t\t\t\t\t\tif (isStatic) out(\"static \");", "+\t\t\t\t\t\t\t\tNode returnNode = getReturnNode(method.getChildNodes());", "+\t\t\t\t\t\t\t\tif (getType(returnNode).equals(\"void\")) returnNode = null;", "+\t\t\t\t\t\t\t\tString returnType = \"\";", "-\t\t\t\t\t\t\t\t\tout(\"\\treturn \");", "-\t\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "-\t\t\t\t\t\t\t\t\tif (!(type.equals(\"int\") || type.equals(\"boolean\"))) {", "-\t\t\t\t\t\t\t\t\t\tout(\"(\");", "-\t\t\t\t\t\t\t\t\t\tout(type);", "-\t\t\t\t\t\t\t\t\t\tout(\")\");", "-\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\tout(\"\\t\");", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tout(\"OS.objc_msgSend(\");", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tif (isStatic) {", "-\t\t\t\t\t\t\t\tout(\"OS.class_\");", "-\t\t\t\t\t\t\t\tout(name);", "-\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\tout(\"this.id\");", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tout(\", OS.\");", "-\t\t\t\t\t\t\tout(getSelConst(sel));", "-\t\t\t\t\t\t\tfirst = false;", "-\t\t\t\t\t\t\tfor (int k = 0; k < params.getLength(); k++) {", "-\t\t\t\t\t\t\t\tNode param = params.item(k);", "-\t\t\t\t\t\t\t\tif (\"arg\".equals(param.getNodeName())) {", "-\t\t\t\t\t\t\t\t\tNamedNodeMap paramAttributes = param.getAttributes();", "-\t\t\t\t\t\t\t\t\tif (!first) out(\", \");", "-\t\t\t\t\t\t\t\t\tfirst = false;", "-\t\t\t\t\t\t\t\t\tString paramName = paramAttributes.getNamedItem(\"name\").getNodeValue();", "-\t\t\t\t\t\t\t\t\tif (paramName.equals(\"boolean\")) paramName = \"b\";", "-\t\t\t\t\t\t\t\t\tif (isObject(param)) {", "-\t\t\t\t\t\t\t\t\t\tout(paramName);", "-\t\t\t\t\t\t\t\t\t\tout(\" != null ? \");", "-\t\t\t\t\t\t\t\t\t\tout(paramName);", "-\t\t\t\t\t\t\t\t\t\tout(\".id : 0\");", "+\t\t\t\t\t\t\t\t\tNode replace = returnNode.getAttributes().getNamedItem(\"swt_replace_return\");", "+\t\t\t\t\t\t\t\t\tif (replace != null) {", "+\t\t\t\t\t\t\t\t\t\tout(returnType = replace.getNodeValue());", "+\t\t\t\t\t\t\t\t\t\tout(returnType = getJavaType(returnNode));", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\tout(\" \");", "+\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\tout(\"void \");", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tString methodName = sel;", "+\t\t\t\t\t\t\t\tif (isUnique(method, methods)) {", "+\t\t\t\t\t\t\t\t\tint index = methodName.indexOf(\":\");", "+\t\t\t\t\t\t\t\t\tif (index != -1) methodName = methodName.substring(0, index);", "+\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\tmethodName = methodName.replaceAll(\":\", \"_\");", "+\t\t\t\t\t\t\t\t\tif (isStatic) methodName = \"static_\" + methodName;", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tout(methodName);", "+\t\t\t\t\t\t\t\tout(\"(\");", "+\t\t\t\t\t\t\t\tNodeList params = method.getChildNodes();", "+\t\t\t\t\t\t\t\tboolean first = true;", "+\t\t\t\t\t\t\t\tfor (int k = 0; k < params.getLength(); k++) {", "+\t\t\t\t\t\t\t\t\tNode param = params.item(k);", "+\t\t\t\t\t\t\t\t\tif (\"arg\".equals(param.getNodeName())) {", "+\t\t\t\t\t\t\t\t\t\tNamedNodeMap paramAttributes = param.getAttributes();", "+\t\t\t\t\t\t\t\t\t\tif (!first) out(\", \");", "+\t\t\t\t\t\t\t\t\t\tout(getJavaType(param));", "+\t\t\t\t\t\t\t\t\t\tfirst = false;", "+\t\t\t\t\t\t\t\t\t\tout(\" \");", "+\t\t\t\t\t\t\t\t\t\tString paramName = paramAttributes.getNamedItem(\"name\").getNodeValue();", "+\t\t\t\t\t\t\t\t\t\tif (paramName.length() == 0) paramName = \"arg\" + paramAttributes.getNamedItem(\"index\").getNodeValue();", "+\t\t\t\t\t\t\t\t\t\tif (paramName.equals(\"boolean\")) paramName = \"b\";", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tout(\")\");", "-\t\t\t\t\t\t\tif (returnNode != null && isBoolean(returnNode)) {", "-\t\t\t\t\t\t\t\tout(\" != 0\");", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tout(\";\");", "-\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\tif (returnNode != null && isObject(returnNode)) {", "-\t\t\t\t\t\t\t\tif (!isStatic && getJavaType(returnNode).equals(name)) {", "-\t\t\t\t\t\t\t\t\tout(\"\\treturn result == this.id ? this : (result != 0 ? new \");", "-\t\t\t\t\t\t\t\t\tout(getJavaType(returnNode));", "-\t\t\t\t\t\t\t\t\tout(\"(result) : null);\");", "+\t\t\t\t\t\t\t\tout(\") {\");", "+\t\t\t\t\t\t\t\toutln();", "+\t\t\t\t\t\t\t\tif (returnNode != null && isStruct(returnNode)) {", "+\t\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "+\t\t\t\t\t\t\t\t\tout(\"\\t\");", "+\t\t\t\t\t\t\t\t\tout(type);", "+\t\t\t\t\t\t\t\t\tout(\" result = new \");", "+\t\t\t\t\t\t\t\t\tout(type);", "+\t\t\t\t\t\t\t\t\tout(\"();\");", "+\t\t\t\t\t\t\t\t\toutln();", "+\t\t\t\t\t\t\t\t\tout(\"\\tOS.objc_msgSend_stret(result, \");", "+\t\t\t\t\t\t\t\t} else if (returnNode != null && isFloatingPoint(returnNode)) {", "+\t\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "+\t\t\t\t\t\t\t\t\tout(\"\\treturn \");", "+\t\t\t\t\t\t\t\t\tif (type.equals(\"float\")) out(\"(float)\");", "+\t\t\t\t\t\t\t\t\tout(\"OS.objc_msgSend_fpret(\");", "+\t\t\t\t\t\t\t\t} else if (returnNode != null && isObject(returnNode)) {", "+\t\t\t\t\t\t\t\t\tout(\"\\tint result = OS.objc_msgSend(\");", "-\t\t\t\t\t\t\t\t\tout(\"\\treturn result != 0 ? new \");", "-\t\t\t\t\t\t\t\t\tout(getJavaType(returnNode));", "-\t\t\t\t\t\t\t\t\tout(\"(result) : null;\");", "+\t\t\t\t\t\t\t\t\tif (returnNode != null) {", "+\t\t\t\t\t\t\t\t\t\tout(\"\\treturn \");", "+\t\t\t\t\t\t\t\t\t\tString type = getJavaType(returnNode);", "+\t\t\t\t\t\t\t\t\t\tif (!(type.equals(\"int\") || type.equals(\"boolean\"))) {", "+\t\t\t\t\t\t\t\t\t\t\tout(\"(\");", "+\t\t\t\t\t\t\t\t\t\t\tout(type);", "+\t\t\t\t\t\t\t\t\t\t\tout(\")\");", "+\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\tout(\"\\t\");", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\tout(\"OS.objc_msgSend(\");", "+\t\t\t\t\t\t\t\tif (isStatic) {", "+\t\t\t\t\t\t\t\t\tout(\"OS.class_\");", "+\t\t\t\t\t\t\t\t\tout(name);", "+\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\tout(\"this.id\");", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tout(\", OS.\");", "+\t\t\t\t\t\t\t\tout(getSelConst(sel));", "+\t\t\t\t\t\t\t\tfirst = false;", "+\t\t\t\t\t\t\t\tfor (int k = 0; k < params.getLength(); k++) {", "+\t\t\t\t\t\t\t\t\tNode param = params.item(k);", "+\t\t\t\t\t\t\t\t\tif (\"arg\".equals(param.getNodeName())) {", "+\t\t\t\t\t\t\t\t\t\tNamedNodeMap paramAttributes = param.getAttributes();", "+\t\t\t\t\t\t\t\t\t\tif (!first) out(\", \");", "+\t\t\t\t\t\t\t\t\t\tfirst = false;", "+\t\t\t\t\t\t\t\t\t\tString paramName = paramAttributes.getNamedItem(\"name\").getNodeValue();", "+\t\t\t\t\t\t\t\t\t\tif (paramName.length() == 0) paramName = \"arg\" + paramAttributes.getNamedItem(\"index\").getNodeValue();", "+\t\t\t\t\t\t\t\t\t\tif (paramName.equals(\"boolean\")) paramName = \"b\";", "+\t\t\t\t\t\t\t\t\t\tif (isObject(param)) {", "+\t\t\t\t\t\t\t\t\t\t\tout(paramName);", "+\t\t\t\t\t\t\t\t\t\t\tout(\" != null ? \");", "+\t\t\t\t\t\t\t\t\t\t\tout(paramName);", "+\t\t\t\t\t\t\t\t\t\t\tout(\".id : 0\");", "+\t\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\t\tout(paramName);", "+\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tout(\")\");", "+\t\t\t\t\t\t\t\tif (returnNode != null && isBoolean(returnNode)) {", "+\t\t\t\t\t\t\t\t\tout(\" != 0\");", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tout(\";\");", "-\t\t\t\t\t\t\t} else if (returnNode != null && isStruct(returnNode)) {", "-\t\t\t\t\t\t\t\tout(\"\\treturn result;\");", "+\t\t\t\t\t\t\t\tif (returnNode != null && isObject(returnNode)) {", "+\t\t\t\t\t\t\t\t\tif (!isStatic && returnType.equals(name)) {", "+\t\t\t\t\t\t\t\t\t\tout(\"\\treturn result == this.id ? this : (result != 0 ? new \");", "+\t\t\t\t\t\t\t\t\t\tout(returnType);", "+\t\t\t\t\t\t\t\t\t\tout(\"(result) : null);\");", "+\t\t\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t\t\tout(\"\\treturn result != 0 ? new \");", "+\t\t\t\t\t\t\t\t\t\tout(returnType);", "+\t\t\t\t\t\t\t\t\t\tout(\"(result) : null;\");", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\toutln();", "+\t\t\t\t\t\t\t\t} else if (returnNode != null && isStruct(returnNode)) {", "+\t\t\t\t\t\t\t\t\tout(\"\\treturn result;\");", "+\t\t\t\t\t\t\t\t\toutln();", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tout(\"}\");", "+\t\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\tout(\"}\");", "-\t\t\t\t\t\t\toutln();", "-\t\t\t\t\t\t\toutln();", "-\t\t\t\t\tif (outputDir != null) {", "-\t\t\t\t\t\tout.close();", "-\t\t\t\t\t\tout = null;", "+\t\t\t\t\t", "+\t\t\t\t\tString fileName = outputDir + mainClassName.substring(0, mainClassName.lastIndexOf('.') + 1).replace('.', '/') + name + \".java\";", "+\t\t\t\t\ttry {", "+\t\t\t\t\t\tout.flush();", "+\t\t\t\t\t\tif (out.size() > 0) output(out.toByteArray(), fileName);", "+\t\t\t\t\t} catch (Exception e) {", "+\t\t\t\t\t\tSystem.out.println(\"Problem\");", "+\t\t\t\t\t\te.printStackTrace(System.out);", "+\t\t\t\t\tout = null;"]}], "num": 16686}