{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f22fc074dc81fea8049118b8307cf05b", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "253686d4a701e29dc8a1d100d0f78bd9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "examples/org.eclipse.swt.examples/src/org/eclipse/swt/examples/texteditor/TextEditor.java", "commitBeforeChange": "e26934ac680ad70439130b120695448c0a630d25", "commitAfterChange": "95842c4b8acd967ae07a3fa166a616e528ae2f66", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 24, "signatureBeforeChange": "  void setFont()", "signatureAfterChange": " \t\t\tpublic void widgetSelected(SelectionEvent e)", "diff": ["-", "-void setFont() {", "-\tFontDialog fontDialog = new FontDialog(shell);", "-\tfontDialog.setFontList((text.getFont()).getFontData());", "-\tFontData fontData = fontDialog.open();", "-\tif (fontData != null) {", "-\t\tFont newFont = new Font(shell.getDisplay(), fontData); ", "-\t\ttext.setFont(newFont);", "-\t\tif (font != null) font.dispose();", "-\t\tfont = newFont;", "-}", "+\t\tsetFontItem.addSelectionListener(new SelectionAdapter() {", "+\t\t\tpublic void widgetSelected(SelectionEvent e) {", "+\t\t\t\tFontDialog fontDialog = new FontDialog(shell);", "+\t\t\t\tfontDialog.setFontList(styledText.getFont().getFontData());", "+\t\t\t\tFontData data = fontDialog.open();", "+\t\t\t\tif (data != null) {", "+\t\t\t\t\tFont newFont = new Font(display, data);", "+\t\t\t\t\tstyledText.setFont(newFont);", "+\t\t\t\t\tif (font != null) font.dispose();", "+\t\t\t\t\tfont = newFont;", "+\t\t\t\t\tupdateToolBar();", "+\t\t\t\t}", "+\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9b132af746ac7954eee24776f9b80f37", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/FontDialog.java", "commitBeforeChange": "26deca8787366594b00e667c8e5b7c6af5b33172", "commitAfterChange": "4a3495d33f0b113ef7f986d31f986971a3cf6245", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": " public FontData open ()", "signatureAfterChange": " public FontData open ()", "diff": ["-\tDisplay display = parent != null ? parent.display : Display.getCurrent ();", "-\t", "+\tDisplay display = parent != null ? parent.display : Display.getCurrent ();\t", "-\tif (fontData != null) {", "-\t\tFont font = new Font(display, fontData);", "-\t\tNSFontManager.sharedFontManager().setSelectedFont(font.handle, false);", "-\t\tfont.dispose();", "-\t}", "+\tboolean create = fontData != null;", "+\tFont font = create ? new Font(display, fontData) : display.getSystemFont();", "+\tpanel.setPanelFont(font.handle, false);", "+\tselected = false;", "+\tif (selected) {", "+\t\tNSFont nsFont = panel.panelConvertFont(font.handle);", "+\t\tfontData = Font.cocoa_new(display, nsFont).getFontData()[0];", "+\t}", "-\tNSFont font = NSFontManager.sharedFontManager().selectedFont();", "-\tif (font != null) {", "-\t\t//TODO - this does not work", "-\t\tfontData = Font.cocoa_new(display, font).getFontData()[0];", "-\t}", "+\tif (create) font.dispose();"]}], "num": 41948}