{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6b54367bdbef03deb7de4958a3cce84b", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "502a2f09be12488eeb28ca1faca72299", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "e983d4a13eb008de83ecbad342d94b6462cebe78", "commitAfterChange": "314fe3eaa680cd637146bed36cfd41bc773b01ef", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "  int createStyle ()", "signatureAfterChange": "  int createStyle ()", "diff": ["-\t", "-\t/*", "-\t* This code is intentionaly commented, since it forces ATSUI to", "-\t* syntesize fonts.", "-\t*/ ", "-//\tint ptr = OS.NewPtr(16);", "-//\tOS.memcpy(ptr, new int[]{handle}, 4); ", "-//\tOS.memcpy(ptr + 4, new int[]{OS.X2Fix(size)}, 4);", "-//\tOS.memcpy(ptr + 8, new byte[]{(style & OS.bold) != 0 ? (byte)1 : 0}, 1); ", "-//\tOS.memcpy(ptr + 9, new byte[]{(style & OS.italic) != 0 ? (byte)1 : 0}, 1); ", "-//\tint[] tags = new int[]{OS.kATSUFontTag, OS.kATSUSizeTag, OS.kATSUQDBoldfaceTag, OS.kATSUQDItalicTag};", "-//\tint[] sizes = new int[]{4, 4, 1, 1};", "-//\tint[] values = new int[]{ptr, ptr + 4, ptr + 8, ptr + 9};", "-\tint ptr = OS.NewPtr(16);", "+\tint atsuStyle = buffer[0];", "+", "+\tshort[] realStyle = new short[1];", "+\tOS.FMGetFontFromFontFamilyInstance(id, style, buffer, realStyle);", "+\tboolean synthesize = style != realStyle[0];", "+\tint ptr = OS.NewPtr(8 + (synthesize ? 8 : 0));", "-\tint[] tags = new int[]{OS.kATSUFontTag, OS.kATSUSizeTag};", "-\tint[] sizes = new int[]{4, 4};", "-\tint[] values = new int[]{ptr, ptr + 4};", "-\tOS.ATSUSetAttributes(buffer[0], tags.length, tags, sizes, values);", "+\tint[] tags, sizes, values;", "+\tif (synthesize) {", "+\t\tOS.memcpy(ptr + 8, new byte[]{(style & OS.bold) != 0 ? (byte)1 : 0}, 1); ", "+\t\tOS.memcpy(ptr + 9, new byte[]{(style & OS.italic) != 0 ? (byte)1 : 0}, 1);", "+\t\ttags = new int[]{OS.kATSUFontTag, OS.kATSUSizeTag, OS.kATSUQDBoldfaceTag, OS.kATSUQDItalicTag};", "+\t\tsizes = new int[]{4, 4, 1, 1};", "+\t\tvalues = new int[]{ptr, ptr + 4, ptr + 8, ptr + 9};", "+\t} else {", "+\t\ttags = new int[]{OS.kATSUFontTag, OS.kATSUSizeTag};", "+\t\tsizes = new int[]{4, 4};", "+\t\tvalues = new int[]{ptr, ptr + 4};", "+\t}", "+\tOS.ATSUSetAttributes(atsuStyle, tags.length, tags, sizes, values);", "-\tOS.ATSUSetFontFeatures(buffer[0], types.length, types, selectors);", "-\treturn buffer [0];", "+\tOS.ATSUSetFontFeatures(atsuStyle, types.length, types, selectors);", "+\treturn atsuStyle;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f5c468e05982dd72d2df5ed00e5f1615", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/FileDialog.java", "commitBeforeChange": "c987944ded12c5bc8fe9dae13a19cf4302cb99f8", "commitAfterChange": "49f82e85be645e8817a03190aaf35c4d31a01df7", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 12, "signatureBeforeChange": " void presetChooserDialog ()", "signatureAfterChange": " void presetChooserDialog ()", "diff": ["-\t\tOS.gtk_file_chooser_set_filename (handle, buffer);", "+\t\t/*  Bug in GTK. GtkFileChooser may crash on GTK versions 2.4.10 to 2.6", "+\t\t *  when setting a file name that is not a true canonical path. ", "+\t\t *  The fix is to use the canonical path.", "+\t\t */", "+\t\tint /*long*/ ptr = OS.realpath (buffer, null);", "+\t\tif (ptr != 0) {", "+\t\t\tint length = OS.strlen (ptr);", "+\t\t\tbuffer = new byte [length];", "+\t\t\tOS.memmove (buffer, ptr, length);", "+\t\t\tOS.gtk_file_chooser_set_filename (handle, buffer);", "+\t\t\tOS.g_free (ptr);", "+\t\t}", "-\t\t\t\tOS.gtk_file_chooser_set_filename (handle, buffer);", "+\t\t\t\t/*  Bug in GTK. GtkFileChooser may crash on GTK versions 2.4.10 to 2.6", "+\t\t\t\t *  when setting a file name that is not a true canonical path. ", "+\t\t\t\t *  The fix is to use the canonical path.", "+\t\t\t\t */", "+\t\t\t\tint /*long*/ ptr = OS.realpath (buffer, null);", "+\t\t\t\tif (ptr != 0) {", "+\t\t\t\t\tint length = OS.strlen (ptr);", "+\t\t\t\t\tbuffer = new byte [length];", "+\t\t\t\t\tOS.memmove (buffer, ptr, length);", "+\t\t\t\t\tOS.gtk_file_chooser_set_filename (handle, buffer);", "+\t\t\t\t\tOS.g_free (ptr);", "+\t\t\t\t}"]}], "num": 44560}