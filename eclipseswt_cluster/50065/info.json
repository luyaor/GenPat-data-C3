{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6c79314bbb3ce80c569b407ff2b7c925", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6bfff83e464942f111beb5dd25a8b0aa", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/common/org/eclipse/swt/browser/WindowCreator.java", "commitBeforeChange": "e291ba558cbbdd0051d4de729d547bbe9c2d503f", "commitAfterChange": "5ce01552be146308bf8e640ac1bdf2ed22887c49", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 19, "signatureBeforeChange": "  int CreateChromeWindow (int parent, int chromeFlags, int _retval)", "signatureAfterChange": "  int CreateChromeWindow (int parent, int chromeFlags, int _retval)", "diff": ["+\treturn CreateChromeWindow2 (parent, chromeFlags, 0, 0, 0, _retval);", "+}", "-\t", "-\tboolean doit = false;", "-\t\t\t\t((Mozilla)browser.webBrowser).isModal = true;", "-\t\tdoit = true;", "-\t\tif (doit) {", "-\t\t\t((Mozilla)browser.webBrowser).addressBar = (chromeFlags & nsIWebBrowserChrome.CHROME_LOCATIONBAR) != 0;", "-\t\t\t((Mozilla)browser.webBrowser).menuBar = (chromeFlags & nsIWebBrowserChrome.CHROME_MENUBAR) != 0;", "-\t\t\t((Mozilla)browser.webBrowser).statusBar = (chromeFlags & nsIWebBrowserChrome.CHROME_STATUSBAR) != 0;", "-\t\t\t((Mozilla)browser.webBrowser).toolBar = (chromeFlags & nsIWebBrowserChrome.CHROME_TOOLBAR) != 0;", "-\t\t}", "-\t\tint /*long*/ address = ((Mozilla)browser.webBrowser).webBrowserChrome.getAddress ();", "-\t\tnsIWebBrowserChrome webBrowserChrome = new nsIWebBrowserChrome (address);", "-\t\tXPCOM.memmove (_retval, new int /*long*/[] {address}, C.PTR_SIZEOF);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f728a1e75896c0a946738d71e02af9c9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/common/org/eclipse/swt/browser/External.java", "commitBeforeChange": "3fa10aec500a4081c70ceb9a57998af702891944", "commitAfterChange": "a84c4f3464a5f713e18d5891323717c2051b011d", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " static long callJava (long cx, long argc, long vp)", "signatureAfterChange": "  static int callJava (int functionId, long tokenVariant, long argsVariant, long returnPtr)", "diff": ["- */", "-static long /*int*/ callJava (long /*int*/ cx, long /*int*/ argc, long /*int*/ vp) {", "-\tint jsval_sizeof = 8;", "-\tlong /*int*/ argsPtr = vp + 2 * jsval_sizeof;", "-\tnsIVariant resultVariant = null;", "-", "-\tlong /*int*/[] result = new long /*int*/[1];", "-\tint rc = XPCOM.NS_GetServiceManager (result);", "-\tif (rc != XPCOM.NS_OK) Mozilla.error (rc);", "-\tif (result[0] == 0) Mozilla.error (XPCOM.NS_NOINTERFACE);", "-", "-\tnsIServiceManager serviceManager = new nsIServiceManager (result[0]);", "-\tresult[0] = 0;", "-\trc = serviceManager.GetService (XPCOM.NS_IXPCONNECT_CID, IIDStore.GetIID (nsIXPConnect.class), result);", "-\tif (rc != XPCOM.NS_OK) Mozilla.error (rc);", "-\tif (result[0] == 0) Mozilla.error (XPCOM.NS_NOINTERFACE);", "-", "-\tnsIXPConnect connect = new nsIXPConnect (result[0]);", "-\tresult[0] = 0;", "-", "-\t/* extract the first argument value (the function id) */", "-\trc = connect.JSValToVariant (cx, argsPtr, result);", "-\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-\t\tnsIVariant idVariant = new nsIVariant (result[0]);", "-\t\tresult[0] = 0;", "-\t\tshort[] dataType = new short[1];", "-\t\trc = idVariant.GetDataType (dataType);", "-\t\tif (rc == XPCOM.NS_OK && dataType[0] == nsIDataType.VTYPE_INT32) {", "-\t\t\tint[] intResult = new int[1];", "-\t\t\trc = idVariant.GetAsInt32 (intResult); /* PRInt32 */", "-\t\t\tif (rc == XPCOM.NS_OK) {", "-\t\t\t\tint functionId = intResult[0];", "-", "-\t\t\t\t/* get the second argument variant (the token string) */", "-\t\t\t\targsPtr += jsval_sizeof;", "-\t\t\t\trc = connect.JSValToVariant (cx, argsPtr, result);", "-\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-\t\t\t\t\tlong /*int*/ tokenVariant = result[0];", "-\t\t\t\t\tresult[0] = 0;", "-", "-\t\t\t\t\t/* get the third argument variant (the invocation args) */", "-\t\t\t\t\targsPtr += jsval_sizeof;", "-\t\t\t\t\trc = connect.JSValToVariant (cx, argsPtr, result);", "-\t\t\t\t\tif (rc == XPCOM.NS_OK && result[0] != 0) {", "-\t\t\t\t\t\tlong /*int*/ argsVariant = result[0];", "-\t\t\t\t\t\tresult[0] = 0;", "-", "-\t\t\t\t\t\t/* invoke the BrowserFunction */", "-\t\t\t\t\t\tresultVariant = new nsIVariant (invokeFunction (functionId, tokenVariant, argsVariant));", "-\t\t\t\t\t\tnew nsISupports (argsVariant).Release ();", "-\t\t\t\t\t}", "-\t\t\t\t\tnew nsISupports (tokenVariant).Release ();", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "-\t\tidVariant.Release ();", "-\t}", "-\tresult[0] = 0;", "-", "-\t/* if the BrowserFunction could not be invoked for some reason then return null to JS */", "-\tif (resultVariant == null) {", "-\t\trc = XPCOM.NS_GetComponentManager (result);", "-\t\tif (rc != XPCOM.NS_OK) Mozilla.error (rc);", "-\t\tif (result[0] == 0) Mozilla.error (XPCOM.NS_NOINTERFACE);", "-\t\tnsIComponentManager componentManager = new nsIComponentManager (result[0]);", "-\t\tresult[0] = 0;", "-\t\tresultVariant = convertToJS (null, componentManager);", "-\t\tcomponentManager.Release ();", "-\t}", "-", "-\t/* convert the resulting variant to a jsval */", "-\tbyte[] aContractID = MozillaDelegate.wcsToMbcs (null, XPCOM.NS_MEMORY_CONTRACTID, true);", "-\trc = serviceManager.GetServiceByContractID (aContractID, IIDStore.GetIID (nsIMemory.class), result);", "-\tif (rc != XPCOM.NS_OK) Mozilla.error (rc);", "-\tif (result[0] == 0) Mozilla.error (XPCOM.NS_NOINTERFACE);", "-\tserviceManager.Release();", "-", "-\tnsIMemory memory = new nsIMemory (result[0]);", "-\tresult[0] = 0;", "-\tlong /*int*/ jsVal = memory.Alloc (jsval_sizeof);", "-\tC.memset (jsVal, 0, jsval_sizeof);", "-\tlong /*int*/ globalObject = 0;", "-\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR24)) {", "-\t\tglobalObject = XPCOM.JS_GetGlobalForScopeChain24 (cx);", "-\t} else {", "-\t\tglobalObject = XPCOM.JS_GetGlobalObject (Mozilla.getJSLibPathBytes (), cx);", "-\t}", "-\trc = connect.VariantToJS (cx, globalObject, resultVariant.getAddress (), jsVal);", "-\tresultVariant.Release ();", "-\tconnect.Release ();", "-", "-\tlong /*int*/ returnValue = XPCOM.JS_FALSE;", "-\tif (rc == XPCOM.NS_OK) {", "-\t\t/* write the jsval to the return value slot */", "-\t\tC.memmove (vp, jsVal, jsval_sizeof);", "-\t\treturnValue = XPCOM.JS_TRUE;", "-\t}", "-\tmemory.Free (jsVal);", "-\tmemory.Release ();", "-\treturn returnValue;", "-}"]}], "num": 50065}