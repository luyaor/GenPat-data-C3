{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "7a2e63be313c5a048ebd8c9a9b7a425b", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d57ad062cec516872fbd4168e848f47f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "53ea4503362f7c2c8444634c8fc92aef195d321a", "commitAfterChange": "270e090b4cb9ec5600af752e1c84796023e2cbe9", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "  void computeRuns()", "signatureAfterChange": "   void computeRuns()", "diff": ["+", "-\ttextStorage = ((NSTextStorage)new NSTextStorage().alloc());", "-\ttextStorage.initWithString(str);", "+\ttextStorage = (NSTextStorage)new NSTextStorage().alloc().init();", "-\t", "-\ttextStorage.beginEditing();", "+", "+\t/*", "+\t* Feature in Cocoa. Adding attributes directly to a NSTextStorage causes", "+\t* output to the console and eventually a segmentation fault when printing ", "+\t* on a thread other than the main thread. The fix is to add attributes to", "+\t* a separate NSMutableAttributedString and add it to text storage when done.", "+\t*/", "+\tNSMutableAttributedString attrStr = (NSMutableAttributedString)new NSMutableAttributedString().alloc();", "+\tattrStr.id = attrStr.initWithString(str).id;", "+\tattrStr.beginEditing();", "-\ttextStorage.addAttribute(OS.NSFontAttributeName, defaultFont.handle, range);", "-\t", "+\tattrStr.addAttribute(OS.NSFontAttributeName, defaultFont.handle, range);", "+\t//TODO ascend descent wrap", "-\t", "-\t//TODO ascend descent wrap", "-\t", "-\ttextStorage.addAttribute(OS.NSParagraphStyleAttributeName, paragraph, range);", "+\tattrStr.addAttribute(OS.NSParagraphStyleAttributeName, paragraph, range);", "-\t", "-\t\t\ttextStorage.addAttribute(OS.NSFontAttributeName, font.handle, range);", "+\t\t\tattrStr.addAttribute(OS.NSFontAttributeName, font.handle, range);", "-\t\t\ttextStorage.addAttribute(OS.NSForegroundColorAttributeName, color, range);", "+\t\t\tattrStr.addAttribute(OS.NSForegroundColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSBackgroundColorAttributeName, color, range);", "+\t\t\tattrStr.addAttribute(OS.NSBackgroundColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSStrikethroughStyleAttributeName, NSNumber.numberWithInt(OS.NSUnderlineStyleSingle), range);", "+\t\t\tattrStr.addAttribute(OS.NSStrikethroughStyleAttributeName, NSNumber.numberWithInt(OS.NSUnderlineStyleSingle), range);", "-\t\t\t\ttextStorage.addAttribute(OS.NSStrikethroughColorAttributeName, color, range);", "+\t\t\t\tattrStr.addAttribute(OS.NSStrikethroughColorAttributeName, color, range);", "-\t\t\t\ttextStorage.addAttribute(OS.NSUnderlineStyleAttributeName, NSNumber.numberWithInt(underlineStyle), range);", "+\t\t\t\tattrStr.addAttribute(OS.NSUnderlineStyleAttributeName, NSNumber.numberWithInt(underlineStyle), range);", "-\t\t\t\t\ttextStorage.addAttribute(OS.NSUnderlineColorAttributeName, color, range);", "+\t\t\t\t\tattrStr.addAttribute(OS.NSUnderlineColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSBaselineOffsetAttributeName, NSNumber.numberWithInt(style.rise), range);", "+\t\t\tattrStr.addAttribute(OS.NSBaselineOffsetAttributeName, NSNumber.numberWithInt(style.rise), range);", "-\t\t\t//TODO", "+\t\t\t//TODO implement metrics ", "-\ttextStorage.endEditing();", "-\t", "-\ttextContainer.setLineFragmentPadding(0);\t", "+\tattrStr.endEditing();", "+\ttextStorage.setAttributedString(attrStr);", "+\tattrStr.release();", "+", "+\ttextContainer.setLineFragmentPadding(0);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a21014d3dd44444f3d1f3449f30c2b09", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "00d9a929233cc0e4c7aa22a7ff5b7562dd581371", "commitAfterChange": "82a169db2ad1731cac41b8c9102e1999ac7a1ef7", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "  void computeRuns()", "signatureAfterChange": "  void computeRuns()", "diff": ["-\ttextStorage.initWithString_(str);", "+\ttextStorage.initWithString(str);", "-\ttextStorage.addAttribute(OS.NSFontAttributeName(), defaultFont.handle, range);", "+\ttextStorage.addAttribute(OS.NSFontAttributeName, defaultFont.handle, range);", "-\ttextStorage.addAttribute(OS.NSParagraphStyleAttributeName(), paragraph, range);", "+\ttextStorage.addAttribute(OS.NSParagraphStyleAttributeName, paragraph, range);", "-\t\t\ttextStorage.addAttribute(OS.NSFontAttributeName(), font.handle, range);", "+\t\t\ttextStorage.addAttribute(OS.NSFontAttributeName, font.handle, range);", "-\t\t\ttextStorage.addAttribute(OS.NSForegroundColorAttributeName(), color, range);", "+\t\t\ttextStorage.addAttribute(OS.NSForegroundColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSBackgroundColorAttributeName(), color, range);", "+\t\t\ttextStorage.addAttribute(OS.NSBackgroundColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSStrikethroughStyleAttributeName(), NSNumber.numberWithInt(OS.NSUnderlineStyleSingle), range);", "+\t\t\ttextStorage.addAttribute(OS.NSStrikethroughStyleAttributeName, NSNumber.numberWithInt(OS.NSUnderlineStyleSingle), range);", "-\t\t\t\ttextStorage.addAttribute(OS.NSStrikethroughColorAttributeName(), color, range);", "+\t\t\t\ttextStorage.addAttribute(OS.NSStrikethroughColorAttributeName, color, range);", "-\t\t\t\ttextStorage.addAttribute(OS.NSUnderlineStyleAttributeName(), NSNumber.numberWithInt(underlineStyle), range);", "+\t\t\t\ttextStorage.addAttribute(OS.NSUnderlineStyleAttributeName, NSNumber.numberWithInt(underlineStyle), range);", "-\t\t\t\t\ttextStorage.addAttribute(OS.NSUnderlineColorAttributeName(), color, range);", "+\t\t\t\t\ttextStorage.addAttribute(OS.NSUnderlineColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSBaselineOffsetAttributeName(), NSNumber.numberWithInt(style.rise), range);", "+\t\t\ttextStorage.addAttribute(OS.NSBaselineOffsetAttributeName, NSNumber.numberWithInt(style.rise), range);", "-\t    layoutManager.lineFragmentUsedRectForGlyphAtIndex_effectiveRange_withoutAdditionalLayout_(index, rangePtr, true);", "+\t    layoutManager.lineFragmentUsedRectForGlyphAtIndex(index, rangePtr, true);", "-\t\tbounds[numberOfLines] = layoutManager.lineFragmentUsedRectForGlyphAtIndex_effectiveRange_withoutAdditionalLayout_(index, rangePtr, true);", "+\t\tbounds[numberOfLines] = layoutManager.lineFragmentUsedRectForGlyphAtIndex(index, rangePtr, true);"]}], "num": 44401}