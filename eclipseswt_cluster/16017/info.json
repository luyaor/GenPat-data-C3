{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "eb9da849a7671da93312230cb34e909d", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fdb1b2f974b5a80d22cbd16e36b619fa", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 44, "methodNumberAfterChange": 43, "signatureBeforeChange": " void init(Drawable drawable, GCData data, int xGC)", "signatureAfterChange": "  void init(Drawable drawable, GCData data, int context)", "diff": ["-void init(Drawable drawable, GCData data, int xGC) {", "-\t/* AW", "-\tint xDisplay = data.display;", "-\tint foreground = data.foreground;", "-\tif (foreground != -1) OS.XSetForeground (xDisplay, xGC, foreground);", "-\tint background = data.background;", "-\tif (background != -1) OS.XSetBackground (xDisplay, xGC, background);", "-\t*/", "+", "+void init(Drawable drawable, GCData data, int context) {", "+\tint colorspace = data.device.colorspace;", "+\tOS.CGContextSetStrokeColorSpace(context, colorspace);", "+\tOS.CGContextSetFillColorSpace(context, colorspace);", "+\tfloat[] foreground = data.foreground;", "+\tif (foreground != null) OS.CGContextSetStrokeColor(context, foreground);", "+\tfloat[] background = data.background;", "+\tif (background != null) OS.CGContextSetFillColor(context, background);", "+", "+\tint[] buffer = new int[1];", "+\tOS.ATSUCreateTextLayout(buffer);", "+\tif (buffer[0] == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\tdata.layout = buffer[0];", "+\tOS.ATSUCreateStyle(buffer);", "+\tif (buffer[0] == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\tdata.style = buffer[0];", "+\t", "+\tint ptr = OS.NewPtr(4);", "+\tbuffer[0] = context;", "+\tOS.memcpy(ptr, buffer, 4);", "+\tint[] tags = new int[]{OS.kATSUCGContextTag};", "+\tint[] sizes = new int[]{4};", "+\tint[] values = new int[]{ptr};", "+\tOS.ATSUSetLayoutControls(data.layout, tags.length, tags, sizes, values);", "+\tOS.DisposePtr(ptr);", "+", "-\t\tif (image.transparentPixel != -1) image.destroyMask();", "+//\t\tif (image.transparentPixel != -1) image.destroyMask();", "-\tif (xGC == 0)", "-\t\tSWT.error(SWT.ERROR_GRAPHIC_DISPOSED);", "-\thandle = xGC;", "+\thandle = context;", "+", "+\tFont font = data.font;", "+\tif (font != null) setFont(font);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d6aae830b8eb9e2a7aff2865596149e2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "99e0a1867a438da276ff0ae73d406d471f437071", "commitAfterChange": "0d2f1849f1c2d624e949f8423d4acfbeacdecd34", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": "  void destroyItem (TableColumn column)", "signatureAfterChange": "  void destroyItem (TableColumn column)", "diff": ["-\tfor (int i=0; i<itemCount; i++) {", "-\t\tTableItem item = items [i];", "-\t\tfor (int j=index; j<columnCount-1; j++) {", "-\t\t\t// TODO - don't call setter", "-\t\t\titem.setText (j, item.getText (j + 1));", "-\t\t\titem.setImage (j, item.getImage (j + 1));", "-\t\t}", "-\t\tif (columnCount > 1) {", "-\t\t\titem.setText (columnCount - 1, \"\");", "-\t\t\titem.setImage (columnCount - 1, null);", "-", "+\tif (columnCount > 1) {", "+\t\tfor (int i=0; i<itemCount; i++) {", "+\t\t\tTableItem item = items [i];", "+\t\t\tImage [] images = item.images;", "+\t\t\tif (images != null) {", "+\t\t\t\tImage [] temp = new Image [columnCount - 1];", "+\t\t\t\tSystem.arraycopy (images, 0, temp, 0, index);", "+\t\t\t\tSystem.arraycopy (images, index +1, temp, index, columnCount - 1 - index);", "+\t\t\t\titems [i].images = temp;", "+\t\t\t}", "+\t\t\tString [] strings = item.strings;", "+\t\t\tif (strings != null) {", "+\t\t\t\tString [] temp = new String [columnCount - 1];", "+\t\t\t\tSystem.arraycopy (strings, 0, temp, 0, index);", "+\t\t\t\tSystem.arraycopy (strings, index + 1, temp, index, columnCount - 1 - index);", "+\t\t\t\titems [i].strings = temp;", "+\t\t\t}", "-\t\t//TODO - reassign COLUMN_ID when last column deleted", "+\t\tcolumn_id = column.id; idCount = 0;", "+\t\tDataBrowserListViewHeaderDesc desc = new DataBrowserListViewHeaderDesc ();", "+\t\tdesc.version = OS.kDataBrowserListViewLatestHeaderDesc;", "+\t\tshort [] width = new short [1];", "+\t\tOS.GetDataBrowserTableViewNamedColumnWidth (handle, column_id, width);", "+\t\tdesc.minimumWidth = desc.maximumWidth = width [0];", "+\t\tint str = OS.CFStringCreateWithCharacters (OS.kCFAllocatorDefault, new char [0], 0);", "+\t\tdesc.titleString = str;", "+\t\tOS.SetDataBrowserListViewHeaderDesc (handle, column_id, desc);", "+\t\tOS.CFRelease (str);"]}], "num": 16017}