{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4e5a66541f36519c3fbc1a8106097bab", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4b52fd41004b142a4622b52319cd22ff", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "d1eac6a5bef58fbb4b941da8f18671ae3f07cf8d", "commitAfterChange": "7e5f5482b174a8578f83ebfd1f34a55411a644b3", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "  LRESULT CDDS_ITEMPOSTPAINT (NMTVCUSTOMDRAW nmcd, int wParam, int lParam)", "signatureAfterChange": "  LRESULT CDDS_ITEMPOSTPAINT (NMTVCUSTOMDRAW nmcd, int wParam, int lParam)", "diff": ["-\tboolean selected = false;", "+\tboolean selected = isItemSelected (nmcd);", "-\t\tTVITEM tvItem = new TVITEM ();", "-\t\ttvItem.mask = OS.TVIF_HANDLE | OS.TVIF_STATE;", "-\t\ttvItem.hItem = item.handle;", "-\t\tOS.SendMessage (handle, OS.TVM_GETITEM, 0, tvItem);", "-\t\tif ((tvItem.state & (OS.TVIS_SELECTED | OS.TVIS_DROPHILITED)) != 0) {", "-\t\t\tselected = true;", "-\t\t\t/*", "-\t\t\t* Feature in Windows.  When the mouse is pressed and the", "-\t\t\t* selection is first drawn for a tree, the previously", "-\t\t\t* selected item is redrawn but the the TVIS_SELECTED bits", "-\t\t\t* are not cleared.  When the user moves the mouse slightly", "-\t\t\t* and a drag and drop operation is not started, the item is", "-\t\t\t* drawn again and this time with TVIS_SELECTED is cleared.", "-\t\t\t* This means that an item that contains colored cells will", "-\t\t\t* not draw with the correct background until the mouse is", "-\t\t\t* moved.  The fix is to test for the selection colors and", "-\t\t\t* guess that the item is not selected.", "-\t\t\t* ", "-\t\t\t* NOTE: This code does not work when the foreground and", "-\t\t\t* background of the tree are set to the selection colors", "-\t\t\t* but this does not happen in a regular application.", "-\t\t\t*/", "-\t\t\tif (handle == OS.GetFocus ()) {", "-\t\t\t\tif (OS.GetTextColor (hDC) != OS.GetSysColor (OS.COLOR_HIGHLIGHTTEXT)) {", "-\t\t\t\t\tselected = false;", "-\t\t\t\t} else {", "-\t\t\t\t\tif (OS.GetBkColor (hDC) != OS.GetSysColor (OS.COLOR_HIGHLIGHT)) {", "-\t\t\t\t\t\tselected = false;", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t}", "-\t\t} else {", "-\t\t\t/*", "-\t\t\t* Feature in Windows.  When the mouse is pressed and the", "-\t\t\t* selection is first drawn for a tree, the item is drawn", "-\t\t\t* selected, but the TVIS_SELECTED bits for the item are", "-\t\t\t* not set.  When the user moves the mouse slightly and", "-\t\t\t* a drag and drop operation is not started, the item is", "-\t\t\t* drawn again and this time TVIS_SELECTED is set.  This", "-\t\t\t* means that an item that is in a tree that has the style", "-\t\t\t* TVS_FULLROWSELECT and that also contains colored cells", "-\t\t\t* will not draw the entire row selected until the user", "-\t\t\t* moves the mouse.  The fix is to test for the selection", "-\t\t\t* colors and guess that the item is selected.", "-\t\t\t* ", "-\t\t\t* NOTE: This code does not work when the foreground and", "-\t\t\t* background of the tree are set to the selection colors", "-\t\t\t* but this does not happen in a regular application.", "-\t\t\t*/", "-\t\t\tif (OS.GetTextColor (hDC) == OS.GetSysColor (OS.COLOR_HIGHLIGHTTEXT)) {", "-\t\t\t\tif (OS.GetBkColor (hDC) == OS.GetSysColor (OS.COLOR_HIGHLIGHT)) {", "-\t\t\t\t\tselected = true;", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "409ad8f9bb4f83ad170af7e59b580ea1", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "5cab2569643885009d09edef4954f0f1cc3554bb", "commitAfterChange": "eca05854d1b4619b606045e7674111329bc5e274", "methodNumberBeforeChange": 96, "methodNumberAfterChange": 96, "signatureBeforeChange": "  LRESULT wmNotifyChild (int wParam, int lParam)", "signatureAfterChange": "  LRESULT wmNotifyChild (int wParam, int lParam)", "diff": ["-\t\t\t\t\tif (!printClient) {", "+\t\t\t\t\tif (!printClient && (style & SWT.FULL_SELECTION) == 0) {", "-\t\t\t\t\tif (OS.IsWindowEnabled (handle)) {", "-\t\t\t\t\t\tOS.SetTextColor (hDC, getForegroundPixel ());", "+\t\t\t\t\tboolean useColor = OS.IsWindowEnabled (handle);", "+\t\t\t\t\tif (useColor) {", "+\t\t\t\t\t\tif ((style & SWT.FULL_SELECTION) != 0) {", "+\t\t\t\t\t\t\tTVITEM tvItem = new TVITEM ();", "+\t\t\t\t\t\t\ttvItem.mask = OS.TVIF_STATE;", "+\t\t\t\t\t\t\ttvItem.hItem = item.handle;", "+\t\t\t\t\t\t\tOS.SendMessage (handle, OS.TVM_GETITEM, 0, tvItem);", "+\t\t\t\t\t\t\tif ((tvItem.state & OS.TVIS_SELECTED) != 0) {", "+\t\t\t\t\t\t\t\tuseColor = false;", "+\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\t/*", "+\t\t\t\t\t\t\t\t* Feature in Windows.  When the mouse is pressed and the", "+\t\t\t\t\t\t\t\t* selection is first drawn for a tree, the item is drawn", "+\t\t\t\t\t\t\t\t* selected, but the TVIS_SELECTED bits for the item are", "+\t\t\t\t\t\t\t\t* not set.  When the user moves the mouse slightly and", "+\t\t\t\t\t\t\t\t* a drag and drop operation is not started, the item is", "+\t\t\t\t\t\t\t\t* drawn again and this time TVIS_SELECTED is set.  This", "+\t\t\t\t\t\t\t\t* means that an item that is in a tree that has the style", "+\t\t\t\t\t\t\t\t* TVS_FULLROWSELECT and that also contains colored cells", "+\t\t\t\t\t\t\t\t* will not draw the entire row selected until the user", "+\t\t\t\t\t\t\t\t* moves the mouse.  The fix is to test for the selection", "+\t\t\t\t\t\t\t\t* colors and guess that the item is selected.", "+\t\t\t\t\t\t\t\t* ", "+\t\t\t\t\t\t\t\t* NOTE: This code doesn't work when the foreground and", "+\t\t\t\t\t\t\t\t* background of the tree are set to the selection colors", "+\t\t\t\t\t\t\t\t* but this does not happen in a regular application.", "+\t\t\t\t\t\t\t\t*/", "+\t\t\t\t\t\t\t\tint clrForeground = OS.GetTextColor (hDC);", "+\t\t\t\t\t\t\t\tif (clrForeground == OS.GetSysColor (OS.COLOR_HIGHLIGHTTEXT)) {", "+\t\t\t\t\t\t\t\t\tint clrBackground = OS.GetBkColor (hDC);", "+\t\t\t\t\t\t\t\t\tif (clrBackground == OS.GetSysColor (OS.COLOR_HIGHLIGHT)) {", "+\t\t\t\t\t\t\t\t\t\tuseColor = false;", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\tOS.SetTextColor (hDC, getForegroundPixel ());", "+\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tif (printClient) {", "-\t\t\t\t\t\t\t\t\t/* Assume that the disabled color is COLOR_BTN_FACE */", "-\t\t\t\t\t\t\t\t\tint clrBackground = OS.IsWindowEnabled (handle) ? getBackgroundPixel () : OS.GetSysColor (OS.COLOR_BTNFACE);", "-\t\t\t\t\t\t\t\t\tdrawBackground (hDC, clrBackground, rect);", "+\t\t\t\t\t\t\t\tif (printClient || (style & SWT.FULL_SELECTION) != 0) {", "+\t\t\t\t\t\t\t\t\tdrawBackground (hDC, OS.GetBkColor (hDC), rect);", "-\t\t\t\t\t\t\t\tif (OS.IsWindowEnabled (handle)) {", "+\t\t\t\t\t\t\t\tif (useColor) {", "-\t\t\t\t\t\t\t\t\t\tif (OS.IsWindowEnabled (handle)) {", "+\t\t\t\t\t\t\t\t\t\tif (useColor) {", "-\t\t\t\t\t\tRECT rect = new RECT ();", "-\t\t\t\t\t\tif (printClient) {", "+\t\t\t\t\t\tif (printClient && (style & SWT.FULL_SELECTION) == 0) {", "+\t\t\t\t\t\t\t\t\tRECT rect = new RECT ();", "-\t\t\t\t\t\tif (OS.COMCTL32_MAJOR < 6) {", "+\t\t\t\t\t\tRECT rect = new RECT ();", "+\t\t\t\t\t\tif (OS.COMCTL32_MAJOR < 6 || (style & SWT.FULL_SELECTION) != 0) {", "-\t\t\t\t\t\t\t\tif (hItem == item.handle || OS.COMCTL32_MAJOR < 6) {", "+\t\t\t\t\t\t\t\tif (hItem == item.handle) {"]}], "num": 46406}