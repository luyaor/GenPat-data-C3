{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "b5c7ca822dde12715d88ae8df2dcbdcd", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c79b7cf6a55af35fc0be8c03178a41c6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "1abca3de880ca8fa3712038f321ffb3a0803dd38", "commitAfterChange": "1fcdb5569a20cdd8ecab2986180db47c5142ee2d", "methodNumberBeforeChange": 29, "methodNumberAfterChange": 29, "signatureBeforeChange": " public int getOffset(int x, int y, int[] trailing)", "signatureAfterChange": " public int getOffset(int x, int y, int[] trailing)", "diff": ["-\t\tfloat /*double*/[] partialFration = new float /*double*/[1];", "-\t\tint /*long*/ glyphIndex = layoutManager.glyphIndexForPoint(pt, textContainer, partialFration);", "-\t\tint /*long*/ offset = layoutManager.characterIndexForGlyphAtIndex(glyphIndex);", "-\t\tif (trailing != null) trailing[0] = Math.round((float)/*64*/partialFration[0]);", "-\t\treturn Math.min(untranslateOffset((int)/*64*/offset), length - 1);", "+\t\tfloat /*double*/[] partialFraction = new float /*double*/[1];", "+\t\tint /*long*/ glyphIndex = layoutManager.glyphIndexForPoint(pt, textContainer, partialFraction);", "+\t\tint offset = (int)/*64*/layoutManager.characterIndexForGlyphAtIndex(glyphIndex);", "+\t\toffset = Math.min(untranslateOffset(offset), length - 1);", "+\t\tif (trailing != null) {", "+\t\t\ttrailing[0] = Math.round((float)/*64*/partialFraction[0]);", "+\t\t\tif (partialFraction[0] > 0.5) {", "+\t\t\t\tchar ch = text.charAt(offset);", "+\t\t\t\tif (0xD800 <= ch && ch <= 0xDBFF) {", "+\t\t\t\t\tif (offset + 1 < length) {", "+\t\t\t\t\t\tch = text.charAt(offset + 1);", "+\t\t\t\t\t\tif (0xDC00 <= ch && ch <= 0xDFFF) {", "+\t\t\t\t\t\t\ttrailing[0]++;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t}", "+\t\t}", "+\t\treturn offset;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "585942b28ec19972e5c407f0e0695b81", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "ba7db5f8858c018413d5ba71484867612c3d4d2b", "commitAfterChange": "ef60ea24746fa9f565fff3764ece2aa5ccaec47a", "methodNumberBeforeChange": 72, "methodNumberAfterChange": 72, "signatureBeforeChange": " void doBackspace()", "signatureAfterChange": " void doBackspace()", "diff": ["+\t\t\tboolean isSurrogate = false;", "+\t\t\tString lineText = content.getLine(lineIndex);", "+\t\t\tchar ch = lineText.charAt(caretOffset - lineOffset - 1);", "+\t\t\tif (0xDC00 <= ch && ch <= 0xDFFF) {", "+\t\t\t\tif (caretOffset - lineOffset - 2 >= 0) {", "+\t\t\t\t\tch = lineText.charAt(caretOffset - lineOffset - 2);", "+\t\t\t\t\tisSurrogate = 0xD800 <= ch && ch <= 0xDBFF;", "+\t\t\t\t}", "+\t\t\t}", "-\t\t\tint start = layout.getPreviousOffset(caretOffset - lineOffset, SWT.MOVEMENT_CHAR);", "-\t\t\trenderer.disposeTextLayout(layout); ", "+\t\t\tint start = layout.getPreviousOffset(caretOffset - lineOffset, isSurrogate ? SWT.MOVEMENT_CLUSTER : SWT.MOVEMENT_CHAR);", "+\t\t\trenderer.disposeTextLayout(layout);"]}], "num": 28268}