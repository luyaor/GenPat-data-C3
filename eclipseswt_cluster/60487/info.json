{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "d0da9ebe6277404a7edda32ca222eebe", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4240970df44b166b91c6d076acf2bb2c", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "d99686d4a205a545dbfb69d5d0b60d14960d18b0", "commitAfterChange": "b2ef8a6279b37707cb201f32394e995cfb449f54", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public Image(Device device, Image srcImage, int flag)", "signatureAfterChange": " public Image(Device device, Image srcImage, int flag)", "diff": ["+\t\t\tint visualPtr = OS.XDefaultVisual(xDisplay, OS.XDefaultScreen(xDisplay));", "+\t\t\tint screenDepth = OS.XDefaultDepthOfScreen(OS.XDefaultScreenOfDisplay(xDisplay));\t\t\t", "+\t\t\tint destXImagePtr = OS.XCreateImage(xDisplay, visualPtr, screenDepth, OS.ZPixmap, 0, 0, width, height, srcXImage.bitmap_pad, 0);", "-\t\t\tint destXImagePtr = OS.XGetImage(xDisplay, drawable, 0, 0, width, height, OS.AllPlanes, OS.ZPixmap);", "-\t\t\tbyte[] destData = new byte[destXImage.bytes_per_line * destXImage.height];", "+\t\t\tint bufSize = destXImage.bytes_per_line * destXImage.height;", "+\t\t\tint bufPtr = OS.XtMalloc(bufSize);", "+\t\t\tdestXImage.data = bufPtr;", "+\t\t\tOS.memmove(destXImagePtr, destXImage, XImage.sizeof);", "+\t\t\tbyte[] destData = new byte[bufSize];", "-\t\t\t\t\tint screenNum = OS.XDefaultScreen(xDisplay);", "-\t\t\t\t\tint visualPtr = OS.XDefaultVisual(xDisplay, screenNum);", "-\t\t\t\t\tscreenNum = OS.XDefaultScreen(xDisplay);", "-\t\t\t\t\tvisualPtr = OS.XDefaultVisual(xDisplay, screenNum);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bd2b3f339fb88b4398369eadb637c9e6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "bc0159e1f232b2994f90bfab06507bbdbd612bc8", "commitAfterChange": "4bf0b224a9caf7edd2d827277068ffb2c6e7bf23", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": " void init(Device device, ImageData image)", "signatureAfterChange": " void init(Device device, ImageData image)", "diff": ["-\t/* AW", "-\tint xDisplay = device.xDisplay;", "-\tint drawable = OS.XDefaultRootWindow(xDisplay);", "-\tint screenDepth = OS.XDefaultDepthOfScreen(OS.XDefaultScreenOfDisplay(xDisplay));", "-\t*/", "-\tint screenDepth = 32;", "-\t/* AW", "-\tint visual = OS.XDefaultVisual(xDisplay, OS.XDefaultScreen(xDisplay));", "-\tint pixmap = OS.XCreatePixmap(xDisplay, drawable, image.width, image.height, screenDepth);", "-\t*/", "-\tint pixmap = createPixMap(image.width, image.height, screenDepth, null, null, null, null);", "-\t/* AW", "-\tint gc = OS.XCreateGC(xDisplay, pixmap, 0, null);", "-\t*/", "+", "+\tint screenDepth = device.fScreenDepth;", "+\tint pixmap = createPixMap(image.width, image.height, screenDepth);", "+", "-\tint error = putImage(image, 0, 0, image.width, image.height, 0, 0, image.width, image.height, screenDepth, null /* AW device.xcolors */, transPixel, false, pixmap);", "+\tint error= putImage(image, 0, 0, image.width, image.height,", "+\t\t\t\t\t\t\t    0, 0, image.width, image.height, screenDepth, transPixel, pixmap);", "-\t\tOS.DisposePixMap(pixmap);", "+\t\tDispose(pixmap);", "-\t\tImageData maskImage = image.getTransparencyMask();", "-\t\t/* AW", "-\t\tint mask = OS.XCreatePixmap(xDisplay, drawable, image.width, image.height, 1);", "-\t\t*/", "-\t\tint mask = createBitMap(image.width, image.height, null);", "-\t\t/* AW", "-\t\tgc = OS.XCreateGC(xDisplay, mask, 0, null);", "-\t\t*/", "-\t\terror = putImage(maskImage, 0, 0, maskImage.width, maskImage.height, 0, 0, maskImage.width, maskImage.height, screenDepth, null /* AW device.xcolors */, null, true, mask);", "-\t\t/* AW", "-\t\tOS.XFreeGC(xDisplay, gc);", "-\t\t*/", "-\t\tif (error != 0) {", "-\t\t\tOS.DisposePixMap(pixmap);", "-\t\t\tDisposeBitMap(mask);", "+\t\tint mask= createMaskImage(image.getTransparencyMask());", "+\t\tif (mask == 0) {", "+\t\t\tDispose(pixmap);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9ab034aa6d291495abf129d182bad6ec", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "bc0159e1f232b2994f90bfab06507bbdbd612bc8", "commitAfterChange": "4bf0b224a9caf7edd2d827277068ffb2c6e7bf23", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 8, "signatureBeforeChange": " void createMask()", "signatureAfterChange": " void createMask()", "diff": ["-    /* AW", "-\tint xDisplay = device.xDisplay;", "-\tint drawable = OS.XDefaultRootWindow(xDisplay);", "-\tint screenDepth = OS.XDefaultDepthOfScreen(OS.XDefaultScreenOfDisplay(xDisplay));", "-\t*/", "-\tint screenDepth = 32;", "-\t/* AW", "-\tint visual = OS.XDefaultVisual(xDisplay, OS.XDefaultScreen(xDisplay));", "-\t*/", "-\tImageData maskImage = getImageData().getTransparencyMask();", "-\t/* AW", "-\tint maskPixmap = OS.XCreatePixmap(xDisplay, drawable, maskImage.width, maskImage.height, 1);", "-\t*/", "-\tint maskPixmap = createBitMap(maskImage.width, maskImage.height, null);", "-\t/* AW", "-\tXColor[] xcolors = device.xcolors;", "-\t*/", "-\tXColor[] xcolors = null;", "-\tImage.putImage(maskImage, 0, 0, maskImage.width, maskImage.height, 0, 0, maskImage.width, maskImage.height, screenDepth, xcolors, null, true, maskPixmap);", "-\tthis.mask = maskPixmap;", "+\tmask = createMaskImage(getImageData().getTransparencyMask());", "+}"]}], "num": 60487}