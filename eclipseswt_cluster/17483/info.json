{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9b3106fdb7df3b84cf095f5fabbcacef", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ac70dfb18229f1fa80fe9c26b00b12b2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "28cf6a9552377ae12dd9f5d22390d86b3a3c6dee", "commitAfterChange": "07018574da4431b8a1576f407aaf63296b28adaf", "methodNumberBeforeChange": 30, "methodNumberAfterChange": 30, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": " public void setText (String string)", "diff": ["-\tint pszText;", "+\tint pszText = 0;", "-\t\t/* Use the character encoding for the default locale */", "-\t\tTCHAR buffer = new TCHAR (0, string, true);", "-\t\tint byteCount = buffer.length () * TCHAR.sizeof;", "-\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "-\t\tOS.MoveMemory (pszText, buffer, byteCount);\t", "-\t\tint hMenu = parent.handle;", "-\t\tinfo.fMask = OS.MIIM_TYPE;", "-\t\tinfo.fType = widgetStyle ();", "-\t\tinfo.dwTypeData = pszText;", "-\t\tsuccess = OS.SetMenuItemInfo (hMenu, id, false, info);", "+\t\tint hMenu = parent.handle;", "+\t\t", "+\t\tboolean hasBitmap = false;", "-\t\t\tif (image != null) {", "+\t\t\tinfo.fMask = OS.MIIM_BITMAP;", "+\t\t\tOS.GetMenuItemInfo (hMenu, id, false, info);", "+\t\t\thasBitmap = info.hbmpItem != 0;", "+\t\t}", "+\t\t", "+\t\t/* Use the character encoding for the default locale */", "+\t\tTCHAR buffer = new TCHAR (0, string, true);", "+\t\tint byteCount = buffer.length () * TCHAR.sizeof;", "+\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "+\t\tOS.MoveMemory (pszText, buffer, byteCount);\t", "+\t\tinfo.fMask = OS.MIIM_TYPE;", "+\t\tinfo.fType = widgetStyle ();", "+\t\tinfo.dwTypeData = pszText;", "+\t\tsuccess = OS.SetMenuItemInfo (hMenu, id, false, info);", "+", "+\t\t/*", "+\t\t* Restore the bitmap that was removed to work around a problem", "+\t\t* in GetMenuItemInfo() and menu items that have bitmaps set with", "+\t\t* MIIM_BITMAP.", "+\t\t*/", "+\t\tif (!OS.IsWinCE && (OS.WIN32_MAJOR << 16 | OS.WIN32_MINOR) >= (4 << 16 | 10)) {", "+\t\t\tif (hasBitmap) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e523ce1de6b84f75085a9ecf2c56fb3f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "000abc9c2895f20e56890595fdc9553919907596", "commitAfterChange": "dac30c018d5cf7c70486c933b24c16540aaa8795", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": "\r \r public void setText (String string)", "signatureAfterChange": "\r \r public void setText (String string)", "diff": ["-\t/* Use the character encoding for the default locale */\r", "-\tTCHAR buffer = new TCHAR (0, string, true);\r", "-\tint byteCount = buffer.length () * TCHAR.sizeof;\r", "-\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);\r", "-\tOS.MoveMemory (pszText, buffer, byteCount);\t\r", "+\tint pszText;\r", "-\tif (OS.IsPPC && parent.hwndCB != 0) {\r", "+\tif ((OS.IsPPC || OS.IsSP) && parent.hwndCB != 0) {\r", "+\t\t/* Use the character encoding for the default locale */\r", "+\t\tTCHAR buffer = new TCHAR (0, string, true);\r", "+\t\tint byteCount = buffer.length () * TCHAR.sizeof;\r", "+\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);\r", "+\t\tOS.MoveMemory (pszText, buffer, byteCount);\t\r", "+\t\t/* Use the character encoding for the default locale */\r", "+\t\tTCHAR buffer = new TCHAR (0, string, true);\r", "+\t\tint byteCount = buffer.length () * TCHAR.sizeof;\r", "+\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);\r", "+\t\tOS.MoveMemory (pszText, buffer, byteCount);\t\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6616e09e56d5f299df31efe93b917c5d", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "5291fb5ab98b8edb9d85f8aabfcd8636dd2d27f5", "commitAfterChange": "68eede6cc61dccf58685c545d1d833d2102b72d0", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": "  void createItem (MenuItem item, int index)", "signatureAfterChange": "  void createItem (MenuItem item, int index)", "diff": ["-\t\t\t\tlpNewItem = new TCHAR (0, \"\", true);", "+\t\t\t\tlpNewItem = new TCHAR (0, \" \", true);", "-\t\t\t* Bug in Windows.  For some reason, when InsertMenuItem ()", "+\t\t\t* Bug in Windows.  For some reason, when InsertMenuItem()", "-\t\t\t* to use SetMenuItemInfo () to set the text at a later time.", "-\t\t\t* The fix is to insert the item with an empty string.", "+\t\t\t* to use SetMenuItemInfo() to set the text at a later time.", "+\t\t\t* The fix is to insert the item with some text.", "+\t\t\t* ", "+\t\t\t* Feature in Windows.  When an empty string is used instead", "+\t\t\t* of a space and InsertMenuItem() is used to set a submenu", "+\t\t\t* before setting text to a non-empty string, the menu item", "+\t\t\t* becomes unexpectedly disabled.  The fix is to insert a", "+\t\t\t* space.", "-\t\t\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, TCHAR.sizeof);", "+\t\t\tTCHAR buffer = new TCHAR (0, \" \", true);", "+\t\t\tint byteCount = buffer.length () * TCHAR.sizeof;", "+\t\t\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "+\t\t\tOS.MoveMemory (pszText, buffer, byteCount);\t"]}], "num": 17483}