{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "1e324ccbf7c0bdf208a611a0e5c89300", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cb49cbbe2fbb0d7f03e62ce3c196495e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "cc7a79cec8920b1b6175a6c2124e7f63a3823262", "commitAfterChange": "d8f34c9ec09bc11f5d7b71293f9d378725f3146c", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 33, "signatureBeforeChange": " public int getItemHeight ()", "signatureAfterChange": " public int getItemHeight ()", "diff": ["-\t\tint [] w = new int [1], h = new int [1];", "-\t\tOS.gtk_tree_view_insert_column (handle, columnHandle, 0);", "-\t\tOS.gtk_tree_view_column_cell_get_size (columnHandle, null, null, null, w, h);", "-\t\tOS.gtk_tree_view_remove_column (handle, columnHandle);", "-\t\treturn h [0];", "-\t} else {", "-\t\tint /*long*/ iter = OS.g_malloc (OS.GtkTreeIter_sizeof ());", "-\t\tOS.gtk_tree_model_get_iter_first (modelHandle, iter);", "-\t\tOS.gtk_tree_view_column_cell_set_cell_data (column, modelHandle, iter, false, false);", "-\t\tOS.g_free (iter);", "+\t} else {", "+\t\tint height = 0;", "+\t\tint /*long*/ iter = OS.g_malloc (OS.GtkTreeIter_sizeof ());", "+\t\tOS.gtk_tree_model_get_iter_first (modelHandle, iter);", "+\t\tint columnCount = Math.max (1, this.columnCount);", "+\t\tfor (int i=0; i<columnCount; i++) {", "+\t\t\tint /*long*/ column = OS.gtk_tree_view_get_column (handle, i);", "+\t\t\tOS.gtk_tree_view_column_cell_set_cell_data (column, modelHandle, iter, false, false);", "+\t\t\tint [] w = new int [1], h = new int [1];", "+\t\t\tOS.gtk_tree_view_column_cell_get_size (column, null, null, null, w, h);", "+\t\t\theight = Math.max (height, h [0]);", "+\t\t}", "+\t\tOS.g_free (iter);", "+\t\treturn height;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f90b260284ce1bdb3ab424b9e61ec1cb", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "b459fd332b98f905fe0dcf3d944f407b97f6b8e6", "commitAfterChange": "89324c31b711bdc4a98d00798f7676e50d6a3fcc", "methodNumberBeforeChange": 35, "methodNumberAfterChange": 35, "signatureBeforeChange": " public int getItemHeight ()", "signatureAfterChange": " public int getItemHeight ()", "diff": ["-\tint /*long*/ column = OS.gtk_tree_view_get_column (handle, 0);", "-\tint /*long*/ list = OS.gtk_tree_view_column_get_cell_renderers (column);", "-\tint length = OS.g_list_length (list);", "-\tint /*long*/ renderer = OS.g_list_nth_data (list, length - 1);", "-\tOS.g_list_free (list);", "-\tint [] h = new int [1];", "-\tOS.gtk_cell_renderer_get_size (renderer, handle, null, null, null, null, h);", "-\tint[] separator = new int [1];", "-\tOS.gtk_widget_style_get (handle, OS.horizontal_separator, separator, 0);", "-\treturn h [0] + separator [0];", "+\tif (itemCount == 0) {", "+\t\tint /*long*/ column = OS.gtk_tree_view_get_column (handle, 0);", "+\t\tint [] w = new int [1], h = new int [1];", "+\t\tOS.gtk_tree_view_column_cell_get_size (column, null, null, null, w, h);", "+\t\treturn h [0];", "+\t} else {", "+\t\tint height = 0;", "+\t\tint /*long*/ iter = OS.g_malloc (OS.GtkTreeIter_sizeof ());", "+\t\tOS.gtk_tree_model_get_iter_first (modelHandle, iter);", "+\t\tint columnColumn = Math.max (1, columnCount);", "+\t\tfor (int i=0; i<columnCount; i++) {", "+\t\t\tint /*long*/ column = OS.gtk_tree_view_get_column (handle, i);", "+\t\t\tint /*long*/ renderers = OS.gtk_tree_view_column_get_cell_renderers (column);", "+\t\t\tint /*long*/ list = renderers;", "+\t\t\twhile (list != 0) {", "+\t\t\t\tint /*long*/ renderer = OS.g_list_data (list);", "+\t\t\t\tOS.gtk_tree_view_column_cell_set_cell_data (column, modelHandle, iter, false, false);", "+\t\t\t\tlist = OS.g_list_next (list);", "+\t\t\t}", "+\t\t\tif (renderers != 0) OS.g_list_free (renderers);", "+\t\t\tint [] w = new int [1], h = new int [1];", "+\t\t\tOS.gtk_tree_view_column_cell_get_size (column, null, null, null, w, h);", "+\t\t\theight = Math.max (height, h [0]);", "+\t\t}", "+\t\tOS.g_free (iter);", "+\t\treturn height;", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d1c93ff1df0615000df0723f56e6798f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "8072de8ac556091b7cf1f4c7ef1e2526bd4e25f4", "commitAfterChange": "0e433f8e5225314b18eb9c550958342f12d9762e", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "  int calculateWidth (long column, long iter)", "signatureAfterChange": "  int calculateWidth (long column, long iter)", "diff": ["+", "-\t// Code intentionally commented", "-\t//int [] width = new int [1];", "-\t//OS.gtk_tree_view_column_cell_get_size (column, null, null, null, width, null);", "-\t//return width [0];", "-", "-\tint width = 0;", "-\tint [] w = new int [1];", "-\tOS.gtk_widget_style_get(handle, OS.focus_line_width, w, 0);", "-\twidth += 2 * w [0];", "-\tlong /*int*/ list = OS.gtk_cell_layout_get_cells(column);", "-\tif (list == 0) return 0;", "-\tlong /*int*/ temp = list;", "-\twhile (temp != 0) {", "-\t\tlong /*int*/ renderer = OS.g_list_data (temp);", "-\t\tif (renderer != 0) {", "-\t\t\tgtk_cell_renderer_get_preferred_size (renderer, handle, w, null);", "-\t\t\twidth += w [0];", "-\t\t}", "-\t\ttemp = OS.g_list_next (temp);", "-\t}", "-\tOS.g_list_free (list);", "-\tif (OS.gtk_tree_view_get_grid_lines(handle) > OS.GTK_TREE_VIEW_GRID_LINES_NONE) {", "-\t\tOS.gtk_widget_style_get (handle, OS.grid_line_width, w, 0) ;", "+\t", "+\t//This workaround is causing the problem Bug 459834 in GTK3. So reverting the workaround for GTK3", "+\tif (OS.GTK3) {", "+\t\tint [] width = new int [1];", "+\t\tOS.gtk_tree_view_column_cell_get_size (column, null, null, null, width, null);", "+\t\treturn width [0];", "+\t} else {", "+\t\tint width = 0;", "+\t\tint [] w = new int [1];", "+\t\tOS.gtk_widget_style_get(handle, OS.focus_line_width, w, 0);", "+\t\tlong /*int*/ list = OS.gtk_cell_layout_get_cells(column);", "+\t\tif (list == 0) return 0;", "+\t\tlong /*int*/ temp = list;", "+\t\twhile (temp != 0) {", "+\t\t\tlong /*int*/ renderer = OS.g_list_data (temp);", "+\t\t\tif (renderer != 0) {", "+\t\t\t\tgtk_cell_renderer_get_preferred_size (renderer, handle, w, null);", "+\t\t\t\twidth += w [0];", "+\t\t\t}", "+\t\t\ttemp = OS.g_list_next (temp);", "+\t\t}", "+\t\tOS.g_list_free (list);", "+\t\tif (OS.gtk_tree_view_get_grid_lines(handle) > OS.GTK_TREE_VIEW_GRID_LINES_NONE) {", "+\t\t\tOS.gtk_widget_style_get (handle, OS.grid_line_width, w, 0) ;", "+\t\t\twidth += 2 * w [0];", "+\t\t}", "+\t\treturn width;", "-\treturn width;"]}], "num": 15265}