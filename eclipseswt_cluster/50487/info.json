{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f44807a55ad93465b95a4a0de37985a2", "detectedBy": ["DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "96d4ce1c13f8a4406382279294c86691", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/carbon/org/eclipse/swt/browser/Browser.java", "commitBeforeChange": "7406a6ef32d03054fd8215748217f7bbe21b8c6d", "commitAfterChange": "657a35a5cee6fbe37dbc793e3355871b42801dd3", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": " public Browser(Composite parent, int style)", "signatureAfterChange": " public Browser(Composite parent, int style)", "diff": ["-\taddListener(SWT.Dispose, new Listener() {", "+\tListener listener = new Listener() {", "-\t\t\tMap.remove(new Integer(webView));", "-\t\t\tWebKit.objc_msgSend(notificationCenter, WebKit.S_removeObserver_name_object, Delegate, 0, webView);", "+\t\t\tswitch (e.type) {", "+\t\t\t\tcase SWT.Dispose: {", "+\t\t\t\t\tMap.remove(new Integer(webView));", "+\t\t\t\t\tWebKit.objc_msgSend(notificationCenter, WebKit.S_removeObserver_name_object, Delegate, 0, webView);", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t\tcase SWT.Hide: {", "+\t\t\t\t\t/*", "+\t\t\t\t\t* Bug on Safari. The web view cannot be obscured by other views above it.", "+\t\t\t\t\t* This problem is specified in the apple documentation for HiWebViewCreate.", "+\t\t\t\t\t* The workaround is to hook Hide and Show events on the browser's parents", "+\t\t\t\t\t* and set its size to 0 in Hide and to restore its size in Show.", "+\t\t\t\t\t*/", "+\t\t\t\t\tCGRect bounds = new CGRect();", "+\t\t\t\t\tOS.HIViewSetFrame(webViewHandle, bounds);", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t\tcase SWT.Show: {", "+\t\t\t\t\t/*", "+\t\t\t\t\t* Bug on Safari. The web view cannot be obscured by other views above it.", "+\t\t\t\t\t* This problem is specified in the apple documentation for HiWebViewCreate.", "+\t\t\t\t\t* The workaround is to hook Hide and Show events on the browser's parents", "+\t\t\t\t\t* and set its size to 0 in Hide and to restore its size in Show.", "+\t\t\t\t\t*/", "+\t\t\t\t\tCGRect bounds = new CGRect();", "+\t\t\t\t\tOS.HIViewGetFrame(handle, bounds);", "+\t\t\t\t\tOS.HIViewSetFrame(webViewHandle, bounds);", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t\tcase SWT.Resize: {", "+\t\t\t\t\t/*", "+\t\t\t\t\t* Bug on Safari. Resizing the height of a Shell containing a Browser at", "+\t\t\t\t\t* a fixed location causes the Browser to redraw at a wrong location.", "+\t\t\t\t\t* The web view is a HIView container that internally hosts", "+\t\t\t\t\t* a Cocoa NSView that uses a coordinates system with the origin at the", "+\t\t\t\t\t* bottom left corner of a window instead of the coordinates system used", "+\t\t\t\t\t* in Carbon that starts at the top left corner. The workaround is to", "+\t\t\t\t\t* reposition the web view every time the Shell of the Browser is resized.", "+\t\t\t\t\t* ", "+\t\t\t\t\t* Feature on Safari. The HIView ignores the call to update its position", "+\t\t\t\t\t* because it believes it has not changed. The workaround is to force", "+\t\t\t\t\t* it to reposition by changing its size and setting it back to the", "+\t\t\t\t\t* original value. ", "+\t\t\t\t\t*/", "+\t\t\t\t\t/* If the widget is hidden, leave its size to 0,0 as set in the SWT.Hide callback */", "+\t\t\t\t\tif (!isVisible()) break;", "+\t\t\t\t\tCGRect bounds = new CGRect();", "+\t\t\t\t\tOS.HIViewGetFrame(handle, bounds);", "+\t\t\t\t\tbounds.width++;", "+\t\t\t\t\tOS.HIViewSetFrame(webViewHandle, bounds);", "+\t\t\t\t\tbounds.width--;", "+\t\t\t\t\tOS.HIViewSetFrame(webViewHandle, bounds);", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t}", "-\t});", "-", "-\taddListener(SWT.Resize, new Listener() {", "-\t\tpublic void handleEvent(Event e) {", "-\t\t\tCGRect bounds = new CGRect();", "-\t\t\tOS.HIViewGetFrame(handle, bounds);", "-\t\t\tOS.HIViewSetFrame(webViewHandle, bounds);", "-\t\t}", "-\t});", "+\t};", "+\taddListener(SWT.Dispose, listener);", "+\tShell shell = getShell();", "+\tshell.addListener(SWT.Resize, listener);", "+\tshell.addListener(SWT.Show, listener);", "+\tshell.addListener(SWT.Hide, listener);", "+\tControl c = this;", "+\tdo {", "+\t\tc.addListener(SWT.Show, listener);", "+\t\tc.addListener(SWT.Hide, listener);", "+\t\tc = c.getParent();", "+\t} while (c != shell);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ac97aa2619100506acd5430c2effea74", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/carbon/org/eclipse/swt/browser/Browser.java", "commitBeforeChange": "2bf3f6cfe7b7692ebc3a25b5da52dde7fa1df8ae", "commitAfterChange": "adbadb4438f3d96573b2e5b6ea70e01c4ef35386", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": " public Browser(Composite parent, int style)", "signatureAfterChange": " public Browser(Composite parent, int style)", "diff": ["+\t\t\t\t\tshell.removeListener(SWT.Show, this);", "+\t\t\t\t\tshell.removeListener(SWT.Hide, this);", "+\t\t\t\t\tControl c = Browser.this;", "+\t\t\t\t\tdo {", "+\t\t\t\t\t\tc.removeListener(SWT.Show, this);", "+\t\t\t\t\t\tc.removeListener(SWT.Hide, this);", "+\t\t\t\t\t\tc = c.getParent();", "+\t\t\t\t\t} while (c != shell);", "+\t\t\t\tcase SWT.Hide: {", "+\t\t\t\t\t/*", "+\t\t\t\t\t* Bug on Safari. The web view cannot be obscured by other views above it.", "+\t\t\t\t\t* This problem is specified in the apple documentation for HiWebViewCreate.", "+\t\t\t\t\t* The workaround is to hook Hide and Show events on the browser's parents", "+\t\t\t\t\t* and set its size to 0 in Hide and to restore its size in Show.", "+\t\t\t\t\t*/", "+\t\t\t\t\tCGRect bounds = new CGRect();", "+\t\t\t\t\tbounds.x = bounds.y = -MIN_SIZE;", "+\t\t\t\t\tbounds.width = bounds.height = MIN_SIZE;", "+\t\t\t\t\tOS.HIViewSetFrame(webViewHandle, bounds);", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t\tcase SWT.Show: {", "+\t\t\t\t\t/*", "+\t\t\t\t\t* Bug on Safari. The web view cannot be obscured by other views above it.", "+\t\t\t\t\t* This problem is specified in the apple documentation for HiWebViewCreate.", "+\t\t\t\t\t* The workaround is to hook Hide and Show events on the browser's parents", "+\t\t\t\t\t* and set its size to 0 in Hide and to restore its size in Show.", "+\t\t\t\t\t*/", "+\t\t\t\t\tCGRect bounds = new CGRect();", "+\t\t\t\t\tOS.HIViewGetFrame(handle, bounds);", "+\t\t\t\t\t/* ", "+\t\t\t\t\t* Bug in Safari.  For some reason, the web view will display incorrectly or", "+\t\t\t\t\t* blank depending on its contents, if its size is set to a value smaller than", "+\t\t\t\t\t* MIN_SIZE. It will not display properly even after the size is made larger.", "+\t\t\t\t\t* The fix is to avoid setting sizes smaller than MIN_SIZE. ", "+\t\t\t\t\t*/", "+\t\t\t\t\tif (bounds.width <= MIN_SIZE) bounds.width = MIN_SIZE;", "+\t\t\t\t\tif (bounds.height <= MIN_SIZE) bounds.height = MIN_SIZE;", "+\t\t\t\t\tOS.HIViewSetFrame(webViewHandle, bounds);", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t\t\t/* Do not update size when it is not visible */", "+\t\t\t\t\tif (!isVisible()) return;", "+\tshell.addListener(SWT.Show, listener);", "+\tshell.addListener(SWT.Hide, listener);", "+\tControl c = this;", "+\tdo {", "+\t\tc.addListener(SWT.Show, listener);", "+\t\tc.addListener(SWT.Hide, listener);", "+\t\tc = c.getParent();", "+\t} while (c != shell);"]}], "num": 50487}