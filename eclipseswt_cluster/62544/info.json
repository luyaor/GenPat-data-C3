{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2ee0273916f25f9c999eb892ed483b23", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5d3de280664c05b516ea6ca8c459797f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/carbon/org/eclipse/swt/dnd/RTFTransfer.java", "commitBeforeChange": "bd377d5ede28b82ea37a0902d7d539f96218e9fe", "commitAfterChange": "c03f2bbcabd697f87ad83444a1e4e58283e6ab32", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": " public Object nativeToJava(TransferData transferData)", "diff": ["-\t// get byte array from super", "-\tchar [] unicode = Converter.mbcsToWcs (null, buffer);", "-\tString string = new String (unicode);", "-\tint end = string.indexOf('\\0');", "-\treturn (end == -1) ? string : string.substring(0, end);", "+\tint encoding = OS.CFStringGetSystemEncoding();", "+\tint ptr = OS.CFStringCreateWithBytes(OS.kCFAllocatorDefault, buffer, buffer.length, encoding, true);", "+\tint length = OS.CFStringGetLength(ptr);", "+\tchar[] chars = new char[length];", "+\tCFRange range = new CFRange();", "+\trange.length = length;", "+\tOS.CFStringGetCharacters(ptr, range, chars);", "+\tOS.CFRelease (ptr);", "+\treturn new String (chars);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "61f62e2c3dc4f4d451b5985c484e3d2a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/carbon/org/eclipse/swt/dnd/TextTransfer.java", "commitBeforeChange": "452d871fcea68f1621418c4579396b2b44eb318a", "commitAfterChange": "fc6114a34cc30ee561685ecb8204f4bd2bd64753", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": " public Object nativeToJava(TransferData transferData)", "diff": ["-\tchar [] unicode = Converter.mbcsToWcs (null, buffer);", "-\tString string = new String (unicode);", "-\tint end = string.indexOf('\\0');", "-\treturn (end == -1) ? string : string.substring(0, end);", "+\tint encoding = OS.CFStringGetSystemEncoding();", "+\tint ptr = OS.CFStringCreateWithBytes(OS.kCFAllocatorDefault, buffer, buffer.length, encoding, true);", "+\tint length = OS.CFStringGetLength(ptr);", "+\tchar[] chars = new char[length];", "+\tCFRange range = new CFRange();", "+\trange.length = length;", "+\tOS.CFStringGetCharacters(ptr, range, chars);", "+\tOS.CFRelease (ptr);", "+\treturn new String (chars);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "55c9ad1b354844d48b402f5a0d851e7f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Label.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 12, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": "  public void setText (String string)", "diff": ["- */", "+", "+\tisImage = false;", "-", "-\t/* Strip out mnemonic marker symbols, and remember the mnemonic. */", "-\tchar [] unicode = new char [string.length ()];", "-\tstring.getChars (0, unicode.length, unicode, 0);", "-\tint i=0, j=0, mnemonic=0;", "-\twhile (i < unicode.length) {", "-\t\tif ((unicode [j++] = unicode [i++]) == Mnemonic) {", "-\t\t\tif (i == unicode.length) {continue;}", "-\t\t\tif (unicode [i] == Mnemonic) {i++; continue;}", "-\t\t\tif (mnemonic == 0) mnemonic = unicode [i];", "+\tchar [] buffer = new char [text.length ()];", "+\ttext.getChars (0, buffer.length, buffer, 0);", "+\tint i=0, j=0;", "+\twhile (i < buffer.length) {", "+\t\tif ((buffer [j++] = buffer [i++]) == Mnemonic) {", "+\t\t\tif (i == buffer.length) {continue;}", "+\t\t\tif (buffer [i] == Mnemonic) {i++; continue;}", "-\twhile (j < unicode.length) unicode [j++] = 0;", "-", "-\tredrawWidget (0, 0, 0, 0, false);", "+\tint ptr = OS.CFStringCreateWithCharacters (OS.kCFAllocatorDefault, buffer, j);", "+\tif (ptr == 0) error (SWT.ERROR_CANNOT_SET_TEXT);", "+\tOS.SetControlData (handle, 0 , OS.kControlStaticTextCFStringTag, 4, new int[]{ptr});", "+\tOS.CFRelease (ptr);", "+\tredraw ();"]}], "num": 62544}