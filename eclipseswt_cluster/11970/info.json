{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e77d52360d17f85ea529279d2b5422c6", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "735eebe1d0d92f791dbbd63af0cbf654", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "f1585125177ab04bbadcf62b2bcbb859d48f37f4", "commitAfterChange": "91bb0a8520c84853db3a649f0cbf7958861ecb66", "methodNumberBeforeChange": 39, "methodNumberAfterChange": 39, "signatureBeforeChange": " public void setFont (Font font)", "signatureAfterChange": " public void setFont (Font font)", "diff": ["-\tsuper.setFont (font);", "+\t/*", "+\t* Bug in Motif. Setting the font in a combo widget that does", "+\t* not have any items causes a GP on UTF-8 locale.", "+\t* The fix is to add an item, change the font, then", "+\t* remove the added item at the end. ", "+\t*/", "+\tint [] argList1 = {OS.XmNitems, 0, OS.XmNitemCount, 0,};", "+\tOS.XtGetValues (handle, argList1, argList1.length / 2);", "+\tboolean fixString = OS.IsDBLocale && argList1 [3] == 0;", "+\tif (fixString) {", "+\t\tbyte [] buffer = Converter.wcsToMbcs (getCodePage (), \"string\", true);", "+\t\tint xmString = OS.XmStringCreateLocalized (buffer);", "+\t\tOS.XmComboBoxAddItem (handle, xmString, -1, false);", "+\t\tOS.XmStringFree (xmString);", "+\t}", "+\tsuper.setFont (font);", "+\tif (fixString) OS.XtSetValues (handle, argList1, argList1.length / 2);\t", "+", "-\t\tint [] argList = {OS.XmNwidth, 0, OS.XmNheight, 0, OS.XmNborderWidth, 0};", "-\t\tOS.XtGetValues (handle, argList, argList.length / 2);", "-\t\tOS.XtResizeWidget (handle, argList [1], argList [3] + 1, argList [5]);", "-\t\tOS.XtResizeWidget (handle, argList [1], argList [3], argList [5]);", "+\t\tint [] argList2 = {OS.XmNwidth, 0, OS.XmNheight, 0, OS.XmNborderWidth, 0};", "+\t\tOS.XtGetValues (handle, argList2, argList2.length / 2);", "+\t\tOS.XtResizeWidget (handle, argList2 [1], argList2 [3] + 1, argList2 [5]);", "+\t\tOS.XtResizeWidget (handle, argList2 [1], argList2 [3], argList2 [5]);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "77f41abc539f6402a425d6585ea44893", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/Label.java", "commitBeforeChange": "71b4d726fd79c22187691209bb58c7707090859d", "commitAfterChange": "3e37b76595a142d67c198b627b7fb99e4de4107a", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": " public void setFont (Font font)", "signatureAfterChange": " public void setFont (Font font)", "diff": ["+\tcheckWidget();", "+\t", "+\t/*", "+\t* Bug in Motif. Setting the font in a label widget that does", "+\t* not have a non-empty string causes GP on UTF-8 locale.", "+\t* The fix is to set a non-empty string, change the font,", "+\t* and restore the empty string at the end. ", "+\t*/", "+\tint [] argList1 = {OS.XmNlabelString, 0};", "+\tOS.XtGetValues (handle, argList1, argList1.length / 2);", "+\tboolean fixString = OS.IsDBLocale && OS.XmStringEmpty (argList1 [1]); ", "+\tif (fixString) {", "+\t\tbyte[] buffer = Converter.wcsToMbcs (getCodePage (), \"string\", true);", "+\t\tint xmString = OS.XmStringCreateLocalized (buffer);\t", "+\t\tint [] argList2 = { ", "+\t\t\tOS.XmNlabelType, OS.XmSTRING,", "+\t\t\tOS.XmNlabelString, xmString,", "+\t\t};", "+\t\tOS.XtSetValues (handle, argList2, argList2.length / 2);", "+\t}", "+\tif (fixString) OS.XtSetValues (handle, argList1, argList1.length / 2);\t"]}], "num": 11970}