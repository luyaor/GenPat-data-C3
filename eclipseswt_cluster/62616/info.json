{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ff879b6c4a740c851e1da1690a69417c", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9f603e5f05151ce9ebf4682a582b0f07", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/carbon/org/eclipse/swt/dnd/DragSource.java", "commitBeforeChange": "5be5fff68efd319c9da7258093d3f3f2cda599f7", "commitAfterChange": "00da0905d97ffea48b43d35672001260f4e19536", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "  void drag(Event dragEvent)", "signatureAfterChange": "  void drag(Event dragEvent)", "diff": ["-\t\tEventRecord theEvent = new EventRecord();", "-\t\ttheEvent.message = OS.kEventMouseMoved;", "-\t\ttheEvent.modifiers = (short)OS.GetCurrentEventKeyModifiers();", "-\t\ttheEvent.what = (short)OS.osEvt;", "-\t\ttheEvent.where_h = (short)pt.h;", "-\t\ttheEvent.where_v = (short)pt.v;\t", "-\t\tint result = OS.TrackDrag(theDrag[0], theEvent, theRegion);", "-\t\t", "-\t\tint operation = DND.DROP_NONE;", "-\t\tif (result == OS.noErr) { ", "-\t\t\tint[] outAction = new int[1];", "-\t\t\tOS.GetDragDropAction(theDrag[0], outAction);", "-\t\t\toperation = osOpToOp(outAction[0]);", "+\t\tImageData imageData = effect.getDragSourceImage(dragEvent.x, dragEvent.y);", "+\t\tImage image = null;", "+\t\ttry {", "+\t\t\tif (imageData != null) {", "+\t\t\t\timage = new Image(getDisplay(), imageData);", "+\t\t\t\tCGPoint imageOffsetPt = new CGPoint();", "+\t\t\t\timageOffsetPt.x = 5;", "+\t\t\t\timageOffsetPt.y = 5;", "+\t\t\t\tOS.SetDragImageWithCGImage(theDrag[0], image.handle, imageOffsetPt, 0); //kDragStandardTranslucency", "+\t\t\t}", "+\t\t\tEventRecord theEvent = new EventRecord();", "+\t\t\ttheEvent.message = OS.kEventMouseMoved;", "+\t\t\ttheEvent.modifiers = (short)OS.GetCurrentEventKeyModifiers();", "+\t\t\ttheEvent.what = (short)OS.osEvt;", "+\t\t\ttheEvent.where_h = pt.h;", "+\t\t\ttheEvent.where_v = pt.v;\t", "+\t\t\tint result = OS.TrackDrag(theDrag[0], theEvent, theRegion);", "+\t\t\tint operation = DND.DROP_NONE;", "+\t\t\tif (result == OS.noErr) { ", "+\t\t\t\tint[] outAction = new int[1];", "+\t\t\t\tOS.GetDragDropAction(theDrag[0], outAction);", "+\t\t\t\toperation = osOpToOp(outAction[0]);", "+\t\t\t}\t", "+\t\t\tevent = new DNDEvent();", "+\t\t\tevent.widget = this;", "+\t\t\tevent.time = (int)System.currentTimeMillis();", "+\t\t\tevent.doit = result == OS.noErr;", "+\t\t\tevent.detail = operation; ", "+\t\t\tnotifyListeners(DND.DragEnd, event);", "+\t\t} finally {", "+\t\t\tif (image != null) image.dispose();", "-\t\t", "-\t\tevent = new DNDEvent();", "-\t\tevent.widget = this;", "-\t\tevent.time = (int)System.currentTimeMillis();", "-\t\tevent.doit = result == OS.noErr;", "-\t\tevent.detail = operation; ", "-\t\tnotifyListeners(DND.DragEnd, event);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cb0d66855c56e6aaee9737a018aa23d4", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/gtk/org/eclipse/swt/dnd/DragSource.java", "commitBeforeChange": "0c2e9abc4565e700564488b96dc45c231ce0c033", "commitAfterChange": "7fcb12202d5234213fbad4d76b30672d0511249d", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": "  void drag(Event dragEvent)", "signatureAfterChange": "  void drag(Event dragEvent)", "diff": ["-\tOS.gtk_drag_begin(control.handle, targetList, actions, 1, 0);", "+\tImageData imageData = effect.getDragSourceImage(dragEvent.x, dragEvent.y);", "+\tint context = OS.gtk_drag_begin(control.handle, targetList, actions, 1, 0);", "+\tif (context != 0 && imageData != null) {", "+\t\tImage image = new Image(getDisplay(), imageData);", "+\t\tint /*long*/ pixbuf = createPixbuf(image);", "+\t\tOS.gtk_drag_set_icon_pixbuf(context, pixbuf, 0, 0);", "+\t\tOS.g_object_unref(pixbuf);", "+\t\timage.dispose();", "+\t}"]}], "num": 62616}