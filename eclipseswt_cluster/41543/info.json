{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "05c882a5b27c35cf33442a92699cea03", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f00341dd562cdce6ab338a8ca6715d62", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "4def951fc85e643080de398e85c25cb30ec79f91", "commitAfterChange": "ea10febb5ae3b0d1b19a13c89b6c7b27ab367f3a", "methodNumberBeforeChange": 45, "methodNumberAfterChange": 40, "signatureBeforeChange": "  int processVerify (int int0, int int1, int int2)", "signatureAfterChange": "  int gtk_insert_text (int widget, int int0, int int1, int int2)", "diff": ["+", "+int gtk_insert_text (int widget, int int0, int int1, int int2) {", "+\tif (!hooks (SWT.Verify) && !filters (SWT.Verify)) return 0;", "+\tif ((style & SWT.SINGLE) != 0) {", "+\t\tif (int0 == 0 || int1==0) return 0;", "+\t\tbyte [] buffer = new byte [int1];", "+\t\tOS.memmove (buffer, int0, buffer.length);", "+\t\tString oldText = new String (Converter.mbcsToWcs (null, buffer));", "+\t\tint [] position = new int [1];", "+\t\tOS.memmove (position, int2, 4);", "+\t\tif (position [0] == -1) position [0] = getCharCount ();", "+\t\tString newText = verifyText (oldText, position [0], position [0]); //WRONG POSITION", "+\t\tif (newText == null) {", "+\t\t\tOS.g_signal_stop_emission_by_name (handle, OS.insert_text);", "+\t\t\treturn 0;", "+\t\t}", "+\t\tif (newText != oldText) {", "+\t\t\tbyte [] buffer3 = Converter.wcsToMbcs (null, newText, false);", "+\t\t\tOS.g_signal_handlers_block_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "+\t\t\tOS.gtk_editable_insert_text (handle, buffer3, buffer3.length, position);", "+\t\t\tOS.g_signal_handlers_unblock_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "+\t\t\tOS.g_signal_stop_emission_by_name (handle, OS.insert_text);", "+\t\t\treturn 0;", "+\t\t}", "+\t} else {", "+\t\tbyte [] iter = new byte [ITER_SIZEOF];", "+\t\tOS.memmove (iter, int0, iter.length);", "+\t\tint start = OS.gtk_text_iter_get_offset (iter);", "+\t\tbyte [] buffer = new byte [int2];", "+\t\tOS.memmove (buffer, int1, buffer.length);", "+\t\tString oldText = new String (Converter.mbcsToWcs (null, buffer));", "+\t\tString newText = verifyText (oldText, start, start);", "+\t\tif (newText == null) {", "+\t\t\tOS.g_signal_stop_emission_by_name (bufferHandle, OS.insert_text);", "+\t\t\treturn 0;", "+\t\t}", "+\t\tif (newText != oldText) {", "+\t\t\tbyte [] buffer1 = Converter.wcsToMbcs (null, newText, false);", "+\t\t\tOS.g_signal_handlers_block_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "+\t\t\tOS.gtk_text_buffer_insert (bufferHandle, iter, buffer1, buffer1.length);", "+\t\t\tOS.g_signal_handlers_unblock_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "+\t\t\tOS.g_signal_stop_emission_by_name (bufferHandle, OS.insert_text);", "+\t\t\treturn 0;", "+\t\t}", "+\t}", "+\treturn 0;", "+}", "-", "-int processVerify (int int0, int int1, int int2) {", "-\tif (!hooks (SWT.Verify) && !filters (SWT.Verify)) return 0;", "-\tif ((style & SWT.SINGLE) != 0) {", "-\t\tif (int0 == 0 || int1==0) return 0;", "-\t\tbyte [] buffer = new byte [int1];", "-\t\tOS.memmove (buffer, int0, buffer.length);", "-\t\tString oldText = new String (Converter.mbcsToWcs (null, buffer));", "-\t\tint [] position = new int [1];", "-\t\tOS.memmove (position, int2, 4);", "-\t\tif (position [0] == -1) position [0] = getCharCount ();", "-\t\tString newText = verifyText (oldText, position [0], position [0]); //WRONG POSITION", "-\t\tif (newText == null) {", "-\t\t\tOS.g_signal_stop_emission_by_name (handle, OS.insert_text);", "-\t\t\treturn 0;", "-\t\t}", "-\t\tif (newText != oldText) {", "-\t\t\tbyte [] buffer3 = Converter.wcsToMbcs (null, newText, false);", "-\t\t\tblockSignal (bufferHandle, SWT.Verify);", "-\t\t\tOS.gtk_editable_insert_text (handle, buffer3, buffer3.length, position);", "-\t\t\tunblockSignal (bufferHandle, SWT.Verify);", "-\t\t\tOS.g_signal_stop_emission_by_name (handle, OS.insert_text);", "-\t\t\treturn 0;", "-\t\t}", "-\t} else {", "-\t\tbyte [] iter = new byte [ITER_SIZEOF];", "-\t\tOS.memmove (iter, int0, iter.length);", "-\t\tint start = OS.gtk_text_iter_get_offset (iter);", "-\t\tbyte [] buffer = new byte [int2];", "-\t\tOS.memmove (buffer, int1, buffer.length);", "-\t\tString oldText = new String (Converter.mbcsToWcs (null, buffer));", "-\t\tString newText = verifyText (oldText, start, start);", "-\t\tif (newText == null) {", "-\t\t\tOS.g_signal_stop_emission_by_name (bufferHandle, OS.insert_text);", "-\t\t\treturn 0;", "-\t\t}", "-\t\tif (newText != oldText) {", "-\t\t\tbyte [] buffer1 = Converter.wcsToMbcs (null, newText, false);", "-\t\t\tblockSignal (bufferHandle, SWT.Verify);", "-\t\t\tOS.gtk_text_buffer_insert (bufferHandle, iter, buffer1, buffer1.length);", "-\t\t\tunblockSignal (bufferHandle, SWT.Verify);", "-\t\t\tOS.g_signal_stop_emission_by_name (bufferHandle, OS.insert_text);", "-\t\t\treturn 0;", "-\t\t}", "-\t}", "-\treturn 0;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8b2ab6044e66d58a03cd002bb82d2de5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "8012b40c7fbcd20ce3aea43ed347b6615788b1a9", "commitAfterChange": "bc390e523ad33cdcb413efc8c75a8067340424aa", "methodNumberBeforeChange": 52, "methodNumberAfterChange": 52, "signatureBeforeChange": "  int gtk_insert_text (int widget, int new_text, int new_text_length, int position)", "signatureAfterChange": "  int gtk_insert_text (int widget, int new_text, int new_text_length, int position)", "diff": ["-\tif ((style & SWT.SINGLE) != 0) {", "-\t\tif (new_text == 0 || new_text_length == 0) return 0;", "-\t\tbyte [] buffer = new byte [(int)/*64*/new_text_length];", "-\t\tOS.memmove (buffer, new_text, buffer.length);", "-\t\tString oldText = new String (Converter.mbcsToWcs (null, buffer));", "-\t\tint [] pos = new int [1];", "-\t\tOS.memmove (pos, position, 4);", "-\t\tif (pos [0] == -1) {", "-\t\t\tint /*long*/ ptr = OS.gtk_entry_get_text (handle);", "-\t\t\tpos [0] = (int)/*64*/OS.g_utf8_strlen (ptr, -1);", "-\t\t}", "-\t\tString newText = verifyText (oldText, pos [0], pos [0]);", "-\t\tif (newText != oldText) {", "-\t\t\tint [] newStart = new int [1], newEnd = new int [1];", "-\t\t\tOS.gtk_editable_get_selection_bounds (handle, newStart, newEnd);", "-\t\t\tif (newText != null) {", "-\t\t\t\tif (newStart [0] != newEnd [0]) {", "-\t\t\t\t\tOS.g_signal_handlers_block_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, DELETE_TEXT);", "-\t\t\t\t\tOS.g_signal_handlers_block_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, CHANGED);", "-\t\t\t\t\tOS.gtk_editable_delete_selection (handle);", "-\t\t\t\t\tOS.g_signal_handlers_unblock_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, DELETE_TEXT);", "-\t\t\t\t\tOS.g_signal_handlers_unblock_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, CHANGED);", "-\t\t\t\t}", "-\t\t\t\tbyte [] buffer3 = Converter.wcsToMbcs (null, newText, false);", "-\t\t\t\tOS.g_signal_handlers_block_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "-\t\t\t\tOS.gtk_editable_insert_text (handle, buffer3, buffer3.length, pos);", "-\t\t\t\tOS.g_signal_handlers_unblock_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "-\t\t\t}", "-\t\t\tpos [0] = newEnd [0];", "+\tif (new_text == 0 || new_text_length == 0) return 0;", "+\tbyte [] buffer = new byte [(int)/*64*/new_text_length];", "+\tOS.memmove (buffer, new_text, buffer.length);", "+\tString oldText = new String (Converter.mbcsToWcs (null, buffer));", "+\tint [] pos = new int [1];", "+\tOS.memmove (pos, position, 4);", "+\tif (pos [0] == -1) {", "+\t\tint /*long*/ ptr = OS.gtk_entry_get_text (handle);", "+\t\tpos [0] = (int)/*64*/OS.g_utf8_strlen (ptr, -1);", "+\t}", "+\tString newText = verifyText (oldText, pos [0], pos [0]);", "+\tif (newText != oldText) {", "+\t\tint [] newStart = new int [1], newEnd = new int [1];", "+\t\tOS.gtk_editable_get_selection_bounds (handle, newStart, newEnd);", "+\t\tif (newText != null) {", "-\t\t\t\tfixStart = newStart [0];", "-\t\t\t\tfixEnd = newEnd [0];", "+\t\t\t\tOS.g_signal_handlers_block_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, DELETE_TEXT);", "+\t\t\t\tOS.g_signal_handlers_block_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, CHANGED);", "+\t\t\t\tOS.gtk_editable_delete_selection (handle);", "+\t\t\t\tOS.g_signal_handlers_unblock_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, DELETE_TEXT);", "+\t\t\t\tOS.g_signal_handlers_unblock_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, CHANGED);", "-\t\t\tOS.memmove (position, pos, 4);", "-\t\t\tOS.g_signal_stop_emission_by_name (handle, OS.insert_text);", "+\t\t\tbyte [] buffer3 = Converter.wcsToMbcs (null, newText, false);", "+\t\t\tOS.g_signal_handlers_block_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "+\t\t\tOS.gtk_editable_insert_text (handle, buffer3, buffer3.length, pos);", "+\t\t\tOS.g_signal_handlers_unblock_matched (handle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "-\t} else {", "-\t\tbyte [] iter = new byte [ITER_SIZEOF];", "-\t\tOS.memmove (iter, new_text, iter.length);", "-\t\tint start = OS.gtk_text_iter_get_offset (iter);", "-\t\tbyte [] buffer = new byte [(int)/*64*/position];", "-\t\tOS.memmove (buffer, new_text_length, buffer.length);", "-\t\tString oldText = new String (Converter.mbcsToWcs (null, buffer));", "-\t\tString newText = verifyText (oldText, start, start);", "-\t\tif (newText == null) {", "-\t\t\tOS.g_signal_stop_emission_by_name (bufferHandle, OS.insert_text);", "-\t\t} else {", "-\t\t\tif (newText != oldText) {", "-\t\t\t\tbyte [] buffer1 = Converter.wcsToMbcs (null, newText, false);", "-\t\t\t\tOS.g_signal_handlers_block_matched (bufferHandle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "-\t\t\t\tOS.gtk_text_buffer_insert (bufferHandle, new_text, buffer1, buffer1.length);", "-\t\t\t\tOS.g_signal_handlers_unblock_matched (bufferHandle, OS.G_SIGNAL_MATCH_DATA, 0, 0, 0, 0, INSERT_TEXT);", "-\t\t\t\tOS.g_signal_stop_emission_by_name (bufferHandle, OS.insert_text);", "-\t\t\t}", "+\t\tpos [0] = newEnd [0];", "+\t\tif (newStart [0] != newEnd [0]) {", "+\t\t\tfixStart = newStart [0];", "+\t\t\tfixEnd = newEnd [0];", "+\t\tOS.memmove (position, pos, 4);", "+\t\tOS.g_signal_stop_emission_by_name (handle, OS.insert_text);"]}], "num": 41543}