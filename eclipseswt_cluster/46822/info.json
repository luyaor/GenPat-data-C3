{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "b5b85e3e1f8ce78d7cd69d91e62ed5ad", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "179bf644170f43326175869868046d42", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 48, "methodNumberAfterChange": 44, "signatureBeforeChange": " public int internal_new_GC (GCData data)", "signatureAfterChange": "  public int internal_new_GC (GCData data)", "diff": ["- */", "+", "-    /* AW", "-\tif (!OS.XtIsRealized (handle)) {", "-\t\tShell shell = getShell ();", "-\t\tshell.realizeWidget ();", "+\tint [] buffer = new int [1];", "+\tint context = 0, paintRgn = 0, visibleRgn = 0;", "+\tif (data.paintEvent != 0) {", "+\t\tint theEvent = data.paintEvent;", "+\t\tOS.GetEventParameter (theEvent, OS.kEventParamCGContextRef, OS.typeCGContextRef, null, 4, null, buffer);", "+\t\tcontext = buffer [0];\t", "+\t\tOS.GetEventParameter (theEvent, OS.kEventParamRgnHandle, OS.typeQDRgnHandle, null, 4, null, buffer);", "+\t\tvisibleRgn = paintRgn = buffer [0];", "-\tint xDisplay = OS.XtDisplay (handle);", "-\tif (xDisplay == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\tint xWindow = OS.XtWindow (handle);", "-\tif (xWindow == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\tint xGC = OS.XCreateGC (xDisplay, xWindow, 0, null);", "-\tif (xGC == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\tOS.XSetGraphicsExposures (xDisplay, xGC, false);", "-\tint [] argList = {OS.XmNforeground, 0, OS.XmNbackground, 0, OS.XmNcolormap, 0};", "-\tOS.XtGetValues (handle, argList, argList.length / 2);", "-\t*/", "+\tif (context == 0) {", "+\t\tint window = OS.GetControlOwner (handle);", "+\t\tint port = OS.GetWindowPort (window);", "+\t\tOS.CreateCGContextForPort (port, buffer);", "+\t\tcontext = buffer [0];", "+\t\tif (context != 0) {", "+\t\t\tRect rect = new Rect ();", "+\t\t\tOS.GetControlBounds (handle, rect);", "+\t\t\tRect portRect = new Rect ();", "+\t\t\tOS.GetPortBounds (port, portRect);", "+\t\t\tvisibleRgn = getVisibleRegion (handle);", "+\t\t\tif (paintRgn != 0) OS.SectRgn (paintRgn, visibleRgn, visibleRgn);", "+\t\t\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "+\t\t\tint portHeight = portRect.bottom - portRect.top;", "+\t\t\tOS.CGContextScaleCTM (context, 1, -1);", "+\t\t\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "+\t\t}", "+\t}", "+\tif (context == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "-\t\tdata.device = getDisplay ();", "-\t\tdata.foreground = getForegroundPixel();", "-\t\tdata.background = getBackgroundPixel();", "-\t\tdata.font = font.handle;", "-\t\tdata.controlHandle = handle;", "-\t}", "-", "-\tint wHandle= 0;", "-\tif (MacUtil.USE_FRAME) {", "-\t\tShell shell= getShell();", "-\t\tif (shell != null)", "-\t\t\twHandle= shell.shellHandle;", "+\t\tDisplay display = getDisplay ();", "+\t\tdata.device = display;", "+\t\tdata.foreground = foreground != null ? foreground : display.getSystemColor (SWT.COLOR_BLACK).handle;", "+\t\tdata.background = background != null ? background : display.getSystemColor (SWT.COLOR_WHITE).handle;", "+\t\tdata.font = font != null ? font : defaultFont ();", "+\t\tdata.visibleRgn = visibleRgn;", "+\t\tdata.control = handle;", "-\t\twHandle= OS.GetControlOwner(handle);", "+\t\tif (visibleRgn != paintRgn) OS.DisposeRgn (visibleRgn);", "-\tint xGC= OS.GetWindowPort(wHandle);", "-\tif (xGC == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\t", "-    return xGC;", "+\treturn context;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e19902ac5abfc6282ae915cef626faaf", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "5d5d6c8770a1d46c82c940b44d6a2e4884862a10", "commitAfterChange": "28aa455ae3ab9d2b8c756bcae7568a88b06cc8eb", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " public void draw(GC gc, int x, int y, int selectionStart, int selectionEnd, Color selectionForeground, Color selectionBackground, int flags)", "signatureAfterChange": " public void draw(GC gc, int x, int y, int selectionStart, int selectionEnd, Color selectionForeground, Color selectionBackground, int flags)", "diff": ["+\t\t\tif ((data.style & SWT.MIRRORED) != 0) {", "+\t\t\t\tCairo.cairo_save(cairo);", "+\t\t\t\tint[] width = new int[1], height = new int[1];", "+\t\t\t\tOS.pango_layout_get_size(layout, width, height);", "+\t\t\t\tCairo.cairo_scale(cairo, -1f,  1);", "+\t\t\t\tCairo.cairo_translate(cairo, -2 * x - OS.PANGO_PIXELS(width[0]), 0);", "+\t\t\t}", "+\t\t\tif ((data.style & SWT.MIRRORED) != 0) {", "+\t\t\t    Cairo.cairo_restore(cairo);", "+\t\t\t}", "+\t\t\t\tif ((data.style & SWT.MIRRORED) != 0) {", "+\t\t\t\t\tCairo.cairo_save(cairo);", "+\t\t\t\t\tint[] width = new int[1], height = new int[1];", "+\t\t\t\t\tOS.pango_layout_get_size(layout, width, height);", "+\t\t\t\t\tCairo.cairo_scale(cairo, -1f,  1);", "+\t\t\t\t\tCairo.cairo_translate(cairo, -2 * x - OS.PANGO_PIXELS(width[0]), 0);", "+\t\t\t\t}", "+\t\t\t\tif ((data.style & SWT.MIRRORED) != 0) {", "+\t\t\t\t\tCairo.cairo_restore(cairo);", "+\t\t\t\t}", "+\t\t\t\tif ((data.style & SWT.MIRRORED) != 0) {", "+\t\t\t\t\tCairo.cairo_save(cairo);", "+\t\t\t\t\tint[] width = new int[1], height = new int[1];", "+\t\t\t\t\tOS.pango_layout_get_size(layout, width, height);", "+\t\t\t\t\tCairo.cairo_scale(cairo, -1f,  1);", "+\t\t\t\t\tCairo.cairo_translate(cairo, -2 * x - OS.PANGO_PIXELS(width[0]), 0);", "+\t\t\t\t}", "+\t\t\t\tif ((data.style & SWT.MIRRORED) != 0) {", "+\t\t\t\t\tCairo.cairo_restore(cairo);", "+\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "aa114682f54756c00e7b9f603a456b9d", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/carbon/org/eclipse/swt/browser/Browser.java", "commitBeforeChange": "2e101cd05354a2b8b2c5bd7ff2ea32310e5732d7", "commitAfterChange": "3d14fe31ddd39bccba6a2856fcd2adc1154c62d5", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": " public Browser(Composite parent, int style)", "signatureAfterChange": " public Browser(Composite parent, int style)", "diff": ["-\tOS.HIViewAddSubview(handle, webViewHandle);", "-\tOS.HIViewSetVisible(webViewHandle, true);", "-\t\t\t", "+\t/*", "+\t* Bug in Safari. The WebView must be added after the top window is visible", "+\t* or it eats mouse events from the top window. A second issue is that the WebView ", "+\t* does not receive mouse and key events when it is added to a visible top window. ", "+\t* It is assumed that Safari hooks its own event listener when the top window ", "+\t* emits the kEventWindowShown event. The workaround to the first problem is to add", "+\t* the WebView to the HIView after the top window is visible. The workaround to the second", "+\t* problem is to send a fake kEventWindowShown event to the top window after the WebView", "+\t* has been added to the HIView (after the top window is visible) to give Safari a chance", "+\t* to hook events.", "+\t*/", "+\tif (getShell().isVisible()) {", "+\t\tadded = true;", "+\t\tOS.HIViewAddSubview(handle, webViewHandle);", "+\t\tOS.HIViewSetVisible(webViewHandle, true);", "+\t\t", "+\t\tint[] showEvent = new int[1];", "+\t\tOS.CreateEvent(0, OS.kEventClassWindow, OS.kEventWindowShown, 0.0, OS.kEventAttributeUserEvent, showEvent);", "+\t\tOS.SetEventParameter(showEvent[0], OS.kEventParamDirectObject, OS.typeWindowRef, 4, new int[] {OS.GetControlOwner(handle)});", "+\t\tOS.SendEventToEventTarget(showEvent[0], OS.GetWindowEventTarget(OS.GetControlOwner(handle)));", "+\t\tif (showEvent[0] != 0) OS.ReleaseEvent(showEvent[0]);", "+\t}", "+", "+\t\t\t\t\tif (!added && e.widget == getShell()) {", "+\t\t\t\t\t\t/*", "+\t\t\t\t\t\t* Bug in Safari. The WebView must be added after the top window is visible", "+\t\t\t\t\t\t* or it eats mouse events from the top window. A second issue is that the WebView ", "+\t\t\t\t\t\t* does not receive mouse and key events when it is added to a visible top window. ", "+\t\t\t\t\t\t* It is assumed that Safari hooks its own event listener when the top window ", "+\t\t\t\t\t\t* emits the kEventWindowShown event. The workaround to the first problem is to add", "+\t\t\t\t\t\t* the WebView to the HIView after the top window is visible. The workaround to the second", "+\t\t\t\t\t\t* problem is to send a fake kEventWindowShown event to the top window after the WebView", "+\t\t\t\t\t\t* has been added to the HIView (after the top window is visible) to give Safari a chance", "+\t\t\t\t\t\t* to hook events.", "+\t\t\t\t\t\t* ", "+\t\t\t\t\t\t* Note. SWT.Show is sent before the Shell is actually visible. The workaround is to", "+\t\t\t\t\t\t* add the WebView to the HiView from an asyncExec, after this notification has returned and", "+\t\t\t\t\t\t* made the Shell visible.", "+\t\t\t\t\t\t* Note. Because the Shell is already visible when WebView is added to the HiView and the real", "+\t\t\t\t\t\t* kEventWindowShow event has therefore been sent already, we need to send a fake kEventWindowShown", "+\t\t\t\t\t\t* event so that Safari can hook its events.", "+\t\t\t\t\t\t*/", "+\t\t\t\t\t\tfinal Shell shell = getShell();", "+\t\t\t\t\t\tgetDisplay().asyncExec(new Runnable() { ", "+\t\t\t\t\t\t\tpublic void run() {", "+\t\t\t\t\t\t\t\tif (isDisposed() || shell.isDisposed()) return;", "+\t\t\t\t\t\t\t\tif (added || !shell.isVisible()) return;", "+\t\t\t\t\t\t\t\tadded = true;", "+\t\t\t\t\t\t\t\tOS.HIViewAddSubview(handle, webViewHandle);", "+\t\t\t\t\t\t\t\tOS.HIViewSetVisible(webViewHandle, true);", "+", "+\t\t\t\t\t\t\t\tint[] showEvent = new int[1];", "+\t\t\t\t\t\t\t\tOS.CreateEvent(0, OS.kEventClassWindow, OS.kEventWindowShown, 0.0, OS.kEventAttributeUserEvent, showEvent);", "+\t\t\t\t\t\t\t\tOS.SetEventParameter(showEvent[0], OS.kEventParamDirectObject, OS.typeWindowRef, 4, new int[] {OS.GetControlOwner(handle)});", "+\t\t\t\t\t\t\t\tOS.SendEventToEventTarget(showEvent[0], OS.GetWindowEventTarget(OS.GetControlOwner(handle)));", "+\t\t\t\t\t\t\t\tif (showEvent[0] != 0) OS.ReleaseEvent(showEvent[0]);", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t});", "+\t\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d181a0cae502cd29a24e4749f0dc30ee", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/TreeItem.java", "commitBeforeChange": "b149d88166b2cf2323cb01c5c46c557ea0de46df", "commitAfterChange": "fb8c665b3d34ea54d7e61fa52a3d1d177488e6a4", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": " public Rectangle getBounds ()", "signatureAfterChange": " public Rectangle getBounds ()", "diff": ["+\t", "+\tboolean isExpander = OS.gtk_tree_model_iter_n_children (parent.modelHandle, handle) > 0;", "+\tboolean isExpanded = OS.gtk_tree_view_row_expanded (parentHandle, path);", "+\tOS.gtk_tree_view_column_cell_set_cell_data (column, parent.modelHandle, handle, isExpander, isExpanded);", "+\tint [] x = new int [1], width = new int [1];", "+\tOS.gtk_cell_renderer_get_size (parent.textRenderer, parentHandle, null, null, null, width, null);", "+\trect.width = width [0];", "+\tint [] buffer = new int [1];", "+\tif (OS.gtk_tree_view_get_expander_column (parentHandle) == column) {", "+\t\tOS.gtk_widget_style_get (parentHandle, OS.expander_size, buffer, 0);", "+\t\trect.x += buffer [0] + TreeItem.EXPANDER_EXTRA_PADDING;", "+\t}", "+\tOS.gtk_widget_style_get (parentHandle, OS.horizontal_separator, buffer, 0);", "+\tint horizontalSeparator = buffer[0];", "+\trect.x += horizontalSeparator;", "+\tif (OS.gtk_major_version () * 100 + OS.gtk_minor_version () * 10 + OS.gtk_micro_version () >= 213) {", "+\t\tOS.gtk_tree_view_column_cell_get_position (column, parent.textRenderer, x, null);", "+\t\trect.x += x [0];", "+\t} else {", "+\t\tif ((parent.style & SWT.CHECK) != 0) {", "+\t\t\tOS.gtk_cell_renderer_get_size (parent.checkRenderer, parentHandle, null, null, null, width, null);", "+\t\t\trect.x += width [0] + horizontalSeparator;", "+\t\t}", "+\t\tOS.gtk_cell_renderer_get_size (parent.pixbufRenderer, parentHandle, null, null, null, width, null);", "+\t\trect.x += width [0] + horizontalSeparator;", "+\t}", "+\tint border = parent.getBorderWidth ();", "+\trect.x += border;", "+\trect.y += border;", "+\t"]}], "num": 46822}