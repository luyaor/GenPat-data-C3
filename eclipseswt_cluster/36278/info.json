{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "cdf06a335c2db2f86bda368711c85212", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d4ab6926060848f203a2b39d7ed79e84", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/common/org/eclipse/swt/browser/Mozilla.java", "commitBeforeChange": "576b8b9621143b0dd2c8cf428f00a730c5074665", "commitAfterChange": "282f74d6ee885b09d0645c1a1456a7045a3ac6ee", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "  public void create (Composite parent, int style)", "signatureAfterChange": "  public void create (Composite parent, int style)", "diff": ["-\t\t\t\t\t\tIsXULRunner = false;\t/* failed */", "-\t\t\t\t\t} else {", "+", "+\t\t\t\t\t\t/* attempt to XPCOMGlueStartup the GRE pointed at by MOZILLA_FIVE_HOME */", "+\t\t\t\t\t\tint /*long*/ ptr = C.getenv (MozillaDelegate.wcsToMbcs (null, XPCOM.MOZILLA_FIVE_HOME, true));", "+\t\t\t\t\t\tif (ptr == 0) {", "+\t\t\t\t\t\t\tIsXULRunner = false;", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\tlength = C.strlen (ptr);", "+\t\t\t\t\t\t\tbyte[] buffer = new byte[length];", "+\t\t\t\t\t\t\tC.memmove (buffer, ptr, length);", "+\t\t\t\t\t\t\tmozillaPath = new String (MozillaDelegate.mbcsToWcs (null, buffer));", "+\t\t\t\t\t\t\t/*", "+\t\t\t\t\t\t\t * Attempting to XPCOMGlueStartup a mozilla-based GRE != xulrunner can", "+\t\t\t\t\t\t\t * crash, so don't attempt unless the GRE appears to be xulrunner.", "+\t\t\t\t\t\t\t */", "+\t\t\t\t\t\t\tif (mozillaPath.indexOf(\"xulrunner\") == -1) { //$NON-NLS-1$", "+\t\t\t\t\t\t\t\tIsXULRunner = false;\t", "+\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\tmozillaPath += SEPARATOR_OS + delegate.getLibraryName ();", "+\t\t\t\t\t\t\t\tpath = MozillaDelegate.wcsToMbcs (null, mozillaPath, true);", "+\t\t\t\t\t\t\t\trc = XPCOMInit.XPCOMGlueStartup (path);", "+\t\t\t\t\t\t\t\tif (rc != XPCOM.NS_OK) {", "+\t\t\t\t\t\t\t\t\tIsXULRunner = false;", "+\t\t\t\t\t\t\t\t\tmozillaPath = mozillaPath.substring (0, mozillaPath.lastIndexOf (SEPARATOR_OS));", "+\t\t\t\t\t\t\t\t\tif (Device.DEBUG) System.out.println (\"failed to start as XULRunner: \" + mozillaPath); //$NON-NLS-1$", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t} ", "+\t\t\t\t\t}", "+\t\t\t\t\tif (IsXULRunner) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "522a12d8e5d8a6cb1eadf82da452c220", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/motif/org/eclipse/swt/browser/Browser.java", "commitBeforeChange": "2b683da12e026c80e006fd4943b55cf90ddd71e5", "commitAfterChange": "45df91a68df1be1618eb250f2556a55a918a1156", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": " public Browser(Composite parent, int style)", "signatureAfterChange": " public Browser(Composite parent, int style)", "diff": ["+\t\tString mozillaPath = null;;", "+\t\tint ptr = OS.getenv(Converter.wcsToMbcs(null, XPCOM.MOZILLA_FIVE_HOME, true));", "+\t\tif (ptr != 0) {", "+\t\t\tint length = OS.strlen(ptr);", "+\t\t\tbyte[] buffer = new byte[length];", "+\t\t\tOS.memmove(buffer, ptr, length);", "+\t\t\tmozillaPath = new String (Converter.mbcsToWcs (null, buffer));", "+\t\t}", "+\t\tif (mozillaPath == null) {", "+\t\t\tdispose();", "+\t\t\tSWT.error(SWT.ERROR_NO_HANDLES, null, \" [Unknown Mozilla path (MOZILLA_FIVE_HOME not set)]\"); //$NON-NLS-1$", "+\t\t}", "+\t\t/*", "+\t\t* Note.  Embedding a Mozilla GTK1.2 causes a crash.  The workaround", "+\t\t* is to check the version of GTK used by Mozilla by looking for", "+\t\t* the libwidget_gtk.so library used by Mozilla GTK1.2. Mozilla GTK2", "+\t\t* uses the libwidget_gtk2.so library.   ", "+\t\t*/", "+\t\tFile file = new File(mozillaPath, \"components/libwidget_gtk.so\"); //$NON-NLS-1$", "+\t\tif (file.exists()) {", "+\t\t\tSWT.error(SWT.ERROR_NO_HANDLES, null, \" [Mozilla GTK2 required (GTK1.2 detected)]\"); //$NON-NLS-1$\t\t\t\t\t\t\t", "+\t\t}", "-\t\tString mozillaPath = GRE.mozillaPath;", "-\t\tif (mozillaPath == null) {", "-\t\t\tdispose();", "-\t\t\tSWT.error(SWT.ERROR_NO_HANDLES, null, \" [Unknown mozilla path]\");", "-\t\t}", "-"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d3b4df191a88b3deb5951fb385854a30", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/gtk/org/eclipse/swt/browser/Browser.java", "commitBeforeChange": "2b683da12e026c80e006fd4943b55cf90ddd71e5", "commitAfterChange": "45df91a68df1be1618eb250f2556a55a918a1156", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": " public Browser(Composite parent, int style)", "signatureAfterChange": " public Browser(Composite parent, int style)", "diff": ["-\t\ttry {", "-\t\t\tLibrary.loadLibrary (\"swt-mozilla\"); //$NON-NLS-1$", "-\t\t} catch (UnsatisfiedLinkError e) {", "-\t\t\tdispose();", "-\t\t\tSWT.error(SWT.ERROR_NO_HANDLES, e);", "+\t\tString mozillaPath = null;;", "+\t\tint ptr = OS.getenv(Converter.wcsToMbcs(null, XPCOM.MOZILLA_FIVE_HOME, true));", "+\t\tif (ptr != 0) {", "+\t\t\tint length = OS.strlen(ptr);", "+\t\t\tbyte[] buffer = new byte[length];", "+\t\t\tOS.memmove(buffer, ptr, length);", "+\t\t\tmozillaPath = new String (Converter.mbcsToWcs (null, buffer));", "-\t\t", "-\t\tString mozillaPath = GRE.mozillaPath;", "-\t\t\tSWT.error(SWT.ERROR_NO_HANDLES, null, \" [Unknown mozilla path]\"); //$NON-NLS-1$", "+\t\t\tSWT.error(SWT.ERROR_NO_HANDLES, null, \" [Unknown Mozilla path (MOZILLA_FIVE_HOME not set)]\"); //$NON-NLS-1$", "-", "+", "+\t\ttry {", "+\t\t\tLibrary.loadLibrary (\"swt-mozilla\"); //$NON-NLS-1$", "+\t\t} catch (UnsatisfiedLinkError e) {", "+\t\t\tdispose();", "+\t\t\tSWT.error(SWT.ERROR_NO_HANDLES, e);", "+\t\t}"]}], "num": 36278}