{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e6d028f4b5ad23983b354db9f4b9fddd", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "151e81386fc94e19c7dce9cb6b9e6b5d", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/DirectoryDialog.java", "commitBeforeChange": "606053bd685bca0d5cb127d4c4280db09c08af31", "commitAfterChange": "9ee2a7fe3d31efd1bbaa8109583dbc7f3b9cbc47", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": " private String interpretOsAnswer(int dialog)", "signatureAfterChange": " private String interpretOsAnswer(int dialog)", "diff": ["-\tint[] tmp= new int[1];", "-\tOS.NavDialogGetReply(dialog, tmp);", "-\tint reply= tmp[0];", "+\tString result= null;", "+\tNavReplyRecord record= new NavReplyRecord();", "+\tOS.NavDialogGetReply(dialog, record);", "+\tAEDesc selection= new AEDesc();", "+\tselection.descriptorType= record.selection_descriptorType;", "+\tselection.dataHandle= record.selection_dataHandle;", "+\tint[] count= new int[1];", "+\tOS.AECountItems(selection, count);", "-\tint selection= OS.NavReplyRecordGetSelection(reply);", "-\tOS.AECountItems(selection, tmp);", "-\tint count= tmp[0];", "-\t", "-\tif (count > 0) {", "-\t\tOS.AEGetNthPtr(selection, 1, tmp);", "-\t\treturn MacUtil.getStringAndRelease(tmp[0]);", "+\tif (count[0] > 0) {", "+\t\tint[] theAEKeyword = new int[1];", "+\t\tint[] typeCode = new int[1];", "+\t\tint maximumSize = 80; // size of FSRef", "+\t\tint dataPtr = OS.NewPtr(maximumSize);", "+\t\tint[] actualSize = new int[1];", "+\t\tint status = OS.AEGetNthPtr(selection, 1, OS.typeFSRef, theAEKeyword, typeCode, dataPtr, maximumSize, actualSize);", "+\t\tif (status == OS.noErr && typeCode[0] == OS.typeFSRef) {", "+\t\t\tbyte[] fsRef = new byte[actualSize[0]];", "+\t\t\tOS.memcpy(fsRef, dataPtr, actualSize[0]);", "+\t\t\tint anURL= OS.CFURLCreateFromFSRef(OS.kCFAllocatorDefault, fsRef);", "+\t\t\tint shandle= OS.CFURLCopyFileSystemPath(anURL, OS.kCFURLPOSIXPathStyle);", "+\t\t\tresult= MacUtil.getStringAndRelease(shandle);", "+\t\t}", "+\t\tOS.DisposePtr(dataPtr);", "-\treturn null;", "+\treturn result;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c0ea9faf6a29fbec7ee2f327e62d7a53", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/DirectoryDialog.java", "commitBeforeChange": "374a9aef6d3cdbe23142c7622f439f5425ecaa80", "commitAfterChange": "ed307d3f65dabf3aa5aefbc1cbd79da8679af838", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": " private String interpretOsAnswer(int dialog)", "signatureAfterChange": " private String interpretOsAnswer(int dialog)", "diff": ["-\tString result= null;", "-\tNavReplyRecord record= new NavReplyRecord();", "-\tOS.NavDialogGetReply(dialog, record);", "-\tAEDesc selection= new AEDesc();", "-\tselection.descriptorType= record.selection_descriptorType;", "-\tselection.dataHandle= record.selection_dataHandle;", "-\tint[] count= new int[1];", "-\tOS.AECountItems(selection, count);", "+\tint[] tmp= new int[1];", "+\tOS.NavDialogGetReply(dialog, tmp);", "+\tint reply= tmp[0];", "-\tif (count[0] > 0) {", "-\t\tint[] theAEKeyword = new int[1];", "-\t\tint[] typeCode = new int[1];", "-\t\tint maximumSize = 80; // size of FSRef", "-\t\tint dataPtr = OS.NewPtr(maximumSize);", "-\t\tint[] actualSize = new int[1];", "-\t\tint status = OS.AEGetNthPtr(selection, 1, OS.typeFSRef, theAEKeyword, typeCode, dataPtr, maximumSize, actualSize);", "-\t\tif (status == OS.noErr && typeCode[0] == OS.typeFSRef) {", "-\t\t\tbyte[] fsRef = new byte[actualSize[0]];", "-\t\t\tOS.memcpy(fsRef, dataPtr, actualSize[0]);", "-\t\t\tint anURL= OS.CFURLCreateFromFSRef(OS.kCFAllocatorDefault, fsRef);", "-\t\t\tint shandle= OS.CFURLCopyFileSystemPath(anURL, OS.kCFURLPOSIXPathStyle);", "-\t\t\tresult= MacUtil.getStringAndRelease(shandle);", "-\t\t}", "-\t\tOS.DisposePtr(dataPtr);", "+\tint selection= OS.NavReplyRecordGetSelection(reply);", "+\tOS.AECountItems(selection, tmp);", "+\tint count= tmp[0];", "+\t", "+\tif (count > 0) {", "+\t\tOS.AEGetNthPtr(selection, 1, tmp);", "+\t\treturn MacUtil.getStringAndRelease(tmp[0]);", "-\treturn result;", "+\treturn null;"]}], "num": 43581}