{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a3a9c112eee67a235b1d154c441c27b2", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8f98e5a6ac899f9d4bbc706c31ab7114", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "f6e418ce08de208f524d556323de8e3b12653f8f", "commitAfterChange": "df118cfee649740c3cfc2ab13c4b8610502d4d4e", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": " public void setMenu (Menu menu)", "signatureAfterChange": " public void setMenu (Menu menu)", "diff": ["-\tif (this.menu == menu) return;", "-\tif (this.menu != null) this.menu.cascade = null;", "+\tMenu oldMenu = this.menu;", "+\tif (oldMenu == menu) return;", "+\tif (oldMenu != null) oldMenu.cascade = null;", "+\tthis.menu = menu;", "+\t", "+\t/* Update the menu in the OS */", "-\tint inHierMenu = menu != null ? menu.handle : 0;", "-\tif (OS.SetMenuItemHierarchicalMenu (parent.handle, outIndex [0], inHierMenu) != OS.noErr) {", "-\t\terror (SWT.ERROR_CANNOT_SET_MENU);", "-\t}", "-\tif ((this.menu = menu) != null) {", "+\tint outMenuRef [] = new int [1];", "+\tif (menu == null) {", "+\t\tif ((parent.style & SWT.BAR) != 0) {", "+\t\t\tDisplay display = getDisplay ();", "+\t\t\tshort menuID = display.nextMenuId ();", "+\t\t\tif (OS.CreateNewMenu (menuID, 0, outMenuRef) != OS.noErr) {", "+\t\t\t\terror (SWT.ERROR_NO_HANDLES);", "+\t\t\t}", "+\t\t}", "+\t} else {", "+\t\tif ((parent.style & SWT.BAR) != 0) {", "+\t\t\tif (oldMenu == null) {", "+\t\t\t\tOS.GetMenuItemHierarchicalMenu (parent.handle, outIndex [0], outMenuRef);", "+\t\t\t\tif (outMenuRef [0] != 0) {", "+\t\t\t\t\tOS.DeleteMenu (OS.GetMenuID (outMenuRef [0]));", "+\t\t\t\t\tOS.DisposeMenu (outMenuRef [0]);", "+\t\t\t\t}", "+\t\t\t}", "+\t\t}", "+\t\toutMenuRef [0] = menu.handle;", "-\t\tOS.SetMenuTitleWithCFString (inHierMenu, outString [0]);", "+\t\tOS.SetMenuTitleWithCFString (outMenuRef [0], outString [0]);", "+\tif (OS.SetMenuItemHierarchicalMenu (parent.handle, outIndex [0], outMenuRef [0]) != OS.noErr) {", "+\t\terror (SWT.ERROR_CANNOT_SET_MENU);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5384e74cc9254b6a8bb75a77d4e24053", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "df118cfee649740c3cfc2ab13c4b8610502d4d4e", "commitAfterChange": "49ca7a603b8ba36618c52950618a40e222d8f456", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": " public void setMenu (Menu menu)", "signatureAfterChange": " public void setMenu (Menu menu)", "diff": ["-\tMenu oldMenu = this.menu;", "-\tif (oldMenu == menu) return;", "-\tif (oldMenu != null) oldMenu.cascade = null;", "-\tthis.menu = menu;", "-\t", "-\t/* Update the menu in the OS */", "+\tif (this.menu == menu) return;", "+\tif (this.menu != null) this.menu.cascade = null;", "-\tint outMenuRef [] = new int [1];", "-\tif (menu == null) {", "-\t\tif ((parent.style & SWT.BAR) != 0) {", "-\t\t\tDisplay display = getDisplay ();", "-\t\t\tshort menuID = display.nextMenuId ();", "-\t\t\tif (OS.CreateNewMenu (menuID, 0, outMenuRef) != OS.noErr) {", "-\t\t\t\terror (SWT.ERROR_NO_HANDLES);", "-\t\t\t}", "-\t\t}", "-\t} else {", "+\tint inHierMenu = menu != null ? menu.handle : 0;", "+\tif (OS.SetMenuItemHierarchicalMenu (parent.handle, outIndex [0], inHierMenu) != OS.noErr) {", "+\t\terror (SWT.ERROR_CANNOT_SET_MENU);", "+\t}", "+\tif ((this.menu = menu) != null) {", "-\t\tif ((parent.style & SWT.BAR) != 0) {", "-\t\t\tif (oldMenu == null) {", "-\t\t\t\tOS.GetMenuItemHierarchicalMenu (parent.handle, outIndex [0], outMenuRef);", "-\t\t\t\tif (outMenuRef [0] != 0) {", "-\t\t\t\t\tOS.DeleteMenu (OS.GetMenuID (outMenuRef [0]));", "-\t\t\t\t\tOS.DisposeMenu (outMenuRef [0]);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "-\t\toutMenuRef [0] = menu.handle;", "-\t\tOS.SetMenuTitleWithCFString (outMenuRef [0], outString [0]);", "+\t\tOS.SetMenuTitleWithCFString (inHierMenu, outString [0]);", "-\t}", "-\tif (OS.SetMenuItemHierarchicalMenu (parent.handle, outIndex [0], outMenuRef [0]) != OS.noErr) {", "-\t\terror (SWT.ERROR_CANNOT_SET_MENU);"]}], "num": 17227}