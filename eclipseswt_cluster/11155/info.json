{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e0fe44082ad06e26caea2d43c0955822", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "779edb505535cd9993d238b14a84e840", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT WebKit/gtk/org/eclipse/swt/browser/WebKit.java", "commitBeforeChange": "b402979b5de3a90d8705dbe2f45ac1f801226c5e", "commitAfterChange": "6b181ae8df9996e17bcff6504c65ea877a2f31df", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 34, "signatureBeforeChange": "  boolean handleDOMEvent (long event, int type)", "signatureAfterChange": "  boolean handleDOMEvent (long event, int type)", "diff": ["+\tint keyEventState = 0;", "+\tlong /*int*/ eventPtr = OS.gtk_get_current_event ();", "+\tif (eventPtr != 0) {", "+\t\tGdkEventKey gdkEvent = new GdkEventKey ();", "+\t\tOS.memmove (gdkEvent, eventPtr, GdkEventKey.sizeof);", "+\t\tswitch (gdkEvent.type) {", "+\t\t\tcase OS.GDK_KEY_PRESS:", "+\t\t\tcase OS.GDK_KEY_RELEASE:", "+\t\t\t\tkeyEventState = gdkEvent.state;", "+\t\t\t\tbreak;", "+\t\t}", "+\t\tOS.gdk_event_free (eventPtr);", "+\t}", "-\tboolean altKey = WebKitGTK.webkit_dom_mouse_event_get_alt_key (event) != 0;", "-\tboolean ctrlKey = WebKitGTK.webkit_dom_mouse_event_get_ctrl_key (event) != 0;", "-\tboolean shiftKey = WebKitGTK.webkit_dom_mouse_event_get_shift_key (event) != 0;", "-\tboolean metaKey = WebKitGTK.webkit_dom_mouse_event_get_meta_key (event) != 0;", "-\treturn handleKeyEvent(typeString, keyCode, charCode, altKey, ctrlKey, shiftKey, metaKey);", "+\tboolean altKey = (keyEventState & OS.GDK_MOD1_MASK) != 0;", "+\tboolean ctrlKey = (keyEventState & OS.GDK_CONTROL_MASK) != 0;", "+\tboolean shiftKey = (keyEventState & OS.GDK_SHIFT_MASK) != 0;", "+\treturn handleKeyEvent(typeString, keyCode, charCode, altKey, ctrlKey, shiftKey, false);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "75e889765fd5a944b90305a5225bae7b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "8c26d9a9eefdd82a00e12564061ed2f6a7f4ee19", "commitAfterChange": "dabb371250244a42d0a102e16d31217d0a0ef72f", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "\r \r void fillAccel (ACCEL accel)", "signatureAfterChange": "\r \r void fillAccel (ACCEL accel)", "diff": ["+\tint fVirt = OS.FVIRTKEY;\r", "-\tint newKey = Display.untranslateKey (key);\r", "-\tif (newKey != 0) {\r", "-\t\tkey = newKey;\r", "+\tint vKey = Display.untranslateKey (key);\r", "+\tif (vKey != 0) {\r", "+\t\tkey = vKey;\t\r", "-\t\tif (key == 0x7F) {\r", "-\t\t\tkey = OS.VK_DELETE;\r", "-\t\t} else {\r", "-\t\t\tshort ch = (short) wcsToMbcs ((char) key);\r", "-\t\t\tkey = OS.CharUpper (ch);\r", "+\t\tswitch (key) {\r", "+\t\t\t/*\r", "+\t\t\t* Bug in Windows.  For some reason, VkKeyScan\r", "+\t\t\t* fails to map ESC to VK_ESCAPE and DEL to\r", "+\t\t\t* VK_DELETE.  The fix is to map these keys\r", "+\t\t\t* as a special case.\r", "+\t\t\t*/\r", "+\t\t\tcase 27: key = OS.VK_ESCAPE; break;\r", "+\t\t\tcase 127: key = OS.VK_DELETE; break;\r", "+\t\t\tdefault: {\r", "+\t\t\t\tkey = wcsToMbcs ((char) key);\r", "+\t\t\t\tif (key == 0) return;\r", "+\t\t\t\tif (OS.IsWinCE) {\r", "+\t\t\t\t\tkey = OS.CharUpper ((short) key);\r", "+\t\t\t\t} else {\r", "+\t\t\t\t\tvKey = OS.VkKeyScan ((short) key) & 0xFF;\r", "+\t\t\t\t\tif (vKey == -1) {\r", "+\t\t\t\t\t\tfVirt = 0;\r", "+\t\t\t\t\t} else {\r", "+\t\t\t\t\t\tkey = vKey;\r", "+\t\t\t\t\t}\r", "+\t\t\t\t}\r", "+\t\t\t}\r", "-\taccel.fVirt = (byte) OS.FVIRTKEY;\r", "+\taccel.fVirt = (byte) fVirt;\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ddfff99093a11be901f6a8ffc2b23009", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "93fd0370557bcc56ce0fe252fed4dbac61b5402a", "commitAfterChange": "515b6a6db322905b71fb5f602fcdfe3210db4432", "methodNumberBeforeChange": 129, "methodNumberAfterChange": 129, "signatureBeforeChange": "  char [] sendIMKeyEvent (int type, GdkEventKey keyEvent, char  [] chars)", "signatureAfterChange": "  char [] sendIMKeyEvent (int type, GdkEventKey keyEvent, char  [] chars)", "diff": ["-\tint index = 0, count = 0, stateMask = 0, time = 0;", "-\tif (keyEvent != null) {", "-\t\tstateMask = keyEvent.state;", "-\t\ttime = keyEvent.time;", "-\t} else {", "-\t\tint [] state = new int [1];", "-\t\tif (OS.gtk_get_current_event_state (state)) {", "-\t\t\tstateMask = state [0];", "+\tint index = 0, count = 0;", "+\tif (keyEvent == null) {", "+\t\tint ptr = OS.gtk_get_current_event ();", "+\t\tif (ptr != 0) {", "+\t\t\tkeyEvent = new GdkEventKey ();", "+\t\t\tOS.memmove (keyEvent, ptr, GdkEventKey.sizeof);", "+\t\t\tOS.gdk_event_free (ptr);", "+\t\t\tswitch (keyEvent.type) {", "+\t\t\t\tcase OS.GDK_KEY_PRESS:", "+\t\t\t\tcase OS.GDK_KEY_RELEASE: break;", "+\t\t\t\tdefault: keyEvent = null; break;", "+\t\t\t}", "-\t\ttime = OS.gtk_get_current_event_time ();", "+\t\tif (keyEvent == null) {", "+\t\t\tint [] state = new int [1];", "+\t\t\tOS.gtk_get_current_event_state (state);", "+\t\t\tsetInputState (event, state [0]);", "+\t\t\tevent.time = OS.gtk_get_current_event_time();", "+\t\t} else {", "+\t\t\tsetKeyState (event, keyEvent);", "+\t\t\tevent.time = keyEvent.time;", "+\t\t}", "-\t\tsetInputState (event, stateMask);", "-\t\tevent.time = time;"]}], "num": 11155}