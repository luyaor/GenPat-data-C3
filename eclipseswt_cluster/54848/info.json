{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4950f0d882b22d36a392640cc73223db", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bdf3674d99a28b5e57249d9b361a53b0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "98f31492caf99e1c73e8107a75d65654daaee107", "commitAfterChange": "09221f4246ffb04bd30a4f2f5459d4e658664039", "methodNumberBeforeChange": 38, "methodNumberAfterChange": 38, "signatureBeforeChange": " public TreeItem [] getSelection ()", "signatureAfterChange": " public TreeItem [] getSelection ()", "diff": ["-//\tint [] count = new int [1];", "-//\tif (OS.GetDataBrowserItemCount (handle, OS.kDataBrowserNoItem, true, OS.kDataBrowserItemIsSelected, count) != OS.noErr) {", "-//\t\terror (SWT.ERROR_CANNOT_GET_COUNT);", "-//\t}", "-//\tTreeItem [] result = new TreeItem [count[0]];", "-//\tif (count[0] > 0) {", "-//\t\tint ptr = OS.NewHandle (0);", "-//\t\tif (count[0] == 1) {", "-//\t\t\tif (OS.GetDataBrowserItems (handle, OS.kDataBrowserNoItem, true, OS.kDataBrowserItemIsSelected, ptr) != OS.noErr) {", "-//\t\t\t\terror (SWT.ERROR_CANNOT_GET_SELECTION);", "-//\t\t\t}", "-//\t\t\tOS.HLock (ptr);", "-//\t\t\tint [] id = new int [1];", "-//\t\t\tOS.memmove (id, ptr, 4);", "-//\t\t\tOS.memmove (id, id [0], 4);", "-//\t\t\tresult [0] = _getItem (id [0], true);", "-//\t\t\tOS.HUnlock (ptr);", "-//\t\t} else {", "-//\t\t\tgetSelection (result, OS.kDataBrowserNoItem, ptr, 0);", "-//\t\t}", "-//\t\tOS.DisposeHandle (ptr);", "-//\t}", "-//\treturn result;", "-\treturn new TreeItem[0];", "+\tNSOutlineView widget = (NSOutlineView)view;", "+\tif (widget.numberOfSelectedRows() == 0) {", "+\t\treturn new TreeItem [0];", "+\t}", "+\tNSIndexSet selection = widget.selectedRowIndexes();", "+\tint count = selection.count();", "+\tint [] indexBuffer = new int [count];", "+\tselection.getIndexes(indexBuffer, count, 0);", "+\tTreeItem [] result = new TreeItem  [count];", "+\tfor (int i=0; i<count; i++) {", "+\t\tid item = widget.itemAtRow(indexBuffer [i]);", "+\t\tint jniRef = OS.objc_msgSend(item.id, OS.sel_tag);", "+\t\tif (jniRef != -1 && jniRef != 0) {", "+\t\t\t//TODO virtual", "+\t\t\tresult[i] = (TreeItem)OS.JNIGetObject(jniRef);", "+\t\t}", "+\t}", "+\treturn result;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f5ea99f5361cec970fc87657e4a41948", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "c6606207f5aaf3a7a5d75c3b53dd323015c92f52", "commitAfterChange": "9d4e1a3d62ccc6637fb62ca8592f9f40bfc73a84", "methodNumberBeforeChange": 55, "methodNumberAfterChange": 55, "signatureBeforeChange": " public TreeItem [] getSelection ()", "signatureAfterChange": " public TreeItem [] getSelection ()", "diff": ["-\tint ptr = OS.NewHandle (0);", "-\tif (OS.GetDataBrowserItems (handle, OS.kDataBrowserNoItem, true, OS.kDataBrowserItemIsSelected, ptr) != OS.noErr) {", "+\tint [] count = new int [1];", "+\tif (OS.GetDataBrowserItemCount (handle, OS.kDataBrowserNoItem, true, OS.kDataBrowserItemIsSelected, count) != OS.noErr) {", "+\t\terror (SWT.ERROR_CANNOT_GET_COUNT);", "+\t}", "+\tTreeItem [] result = new TreeItem [count[0]];", "+\tif (count[0] > 0) {", "+\t\tint ptr = OS.NewHandle (0);", "+\t\tif (count[0] == 1) {", "+\t\t\tif (OS.GetDataBrowserItems (handle, OS.kDataBrowserNoItem, true, OS.kDataBrowserItemIsSelected, ptr) != OS.noErr) {", "+\t\t\t\terror (SWT.ERROR_CANNOT_GET_SELECTION);", "+\t\t\t}", "+\t\t\tOS.HLock (ptr);", "+\t\t\tint [] id = new int [1];", "+\t\t\tOS.memcpy (id, ptr, 4);", "+\t\t\tOS.memcpy (id, id [0], 4);", "+\t\t\tresult [0] = _getItem (id [0], true);", "+\t\t\tOS.HUnlock (ptr);", "+\t\t} else {", "+\t\t\tgetSelection (result, OS.kDataBrowserNoItem, ptr, 0);", "+\t\t}", "+\t\tOS.DisposeHandle (ptr);", "+\t}", "+\treturn result;", "+}", "-\tTreeItem [] result = new TreeItem [count];", "-\t\tint [] start = new int [1];", "-\t\tOS.memcpy (start, ptr, 4);", "-\t\tint [] id = new int [1];", "-\t\t\tOS.memcpy (id, start [0] + (i * 4), 4);", "-\t\t\tresult [i] = _getItem (id [0], true);", "-\tOS.DisposeHandle (ptr);", "-\treturn result;"]}], "num": 54848}