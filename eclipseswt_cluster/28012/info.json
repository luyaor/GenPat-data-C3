{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "12df8673fd8ed9434513f53758d1376c", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e851296c0b9ec253f34f8bc62c9a35c6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/photon/org/eclipse/swt/dnd/FileTransfer.java", "commitBeforeChange": "1c11fbfcf03cb194b949ee2f545cb614e4dccbc5", "commitAfterChange": "96800434b1856a3053cd6adb63cc4f40bb90cd9d", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": "\r public Object nativeToJava(TransferData transferData)", "diff": ["- */", "+ */\r", "-\tif (transferData.pData == 0 || !(isSupportedType(transferData))) return null;\r", "-\tint size = transferData.length;\r", "-\tif (size == 0) return null;\r", "-\tbyte[] buffer = new byte[size];\r", "-\tOS.memmove(buffer, transferData.pData, size);\r", "-\tString[] filenames = new String[0];\r", "-\tint lastMark = 0;\r", "-\tfor (int i = 0; i < buffer.length; i++) {\r", "-\t\tif ( buffer[i] == 0 ) {\r", "-\t\t\tString s = new String(buffer, lastMark, i - lastMark );\r", "-\t\t\tString[] temp = filenames;\r", "-\t\t\tfilenames = new String[ filenames.length + 1];\r", "-\t\t\tSystem.arraycopy(temp, 0, filenames, 0 , temp.length);\t\t\r", "-\t\t\tfilenames[ filenames.length - 1] = s;\r", "-\t\t\tlastMark = i + 1;\r", "-\t\t}\r", "+\r", "+\tbyte[] data = (byte[])super.nativeToJava(transferData);\r", "+\tif (data == null) return null;\r", "+\tchar[] unicode = Converter.mbcsToWcs(null, data);\r", "+\tString string  = new String(unicode);\r", "+\t// parse data and convert string to array of files\r", "+\tint start = string.indexOf(\"file:\");\r", "+\tif (start == -1) return null;\r", "+\tstart += 5;\r", "+\tString[] fileNames = new String[0];\r", "+\twhile (start < string.length()) { \r", "+\t\tint end = string.indexOf(\"\\r\", start);\r", "+\t\tif (end == -1) end = string.length() - 1;\r", "+\t\tString fileName = string.substring(start, end);\r", "+\t\t\r", "+\t\tString[] newFileNames = new String[fileNames.length + 1];\r", "+\t\tSystem.arraycopy(fileNames, 0, newFileNames, 0, fileNames.length);\r", "+\t\tnewFileNames[fileNames.length] = fileName;\r", "+\t\tfileNames = newFileNames;\r", "+\r", "+\t\tstart = string.indexOf(\"file:\", end);\r", "+\t\tif (start == -1) break;\r", "+\t\tstart += 5;\r", "-\treturn filenames;\r", "+\treturn fileNames;\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "11e6b7fafb382b94d797de691bacb560", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/carbon/org/eclipse/swt/dnd/FileTransfer.java", "commitBeforeChange": "8727d22e38059537dcc917ca55f0d6ddcedac706", "commitAfterChange": "0e7716ec8b85ed8b2a10afa69a4dfa63fe12298f", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": " public Object nativeToJava(TransferData transferData)", "diff": ["-\treturn null;", "+", "+\tbyte[] data = (byte[])super.nativeToJava(transferData);", "+\tif (data == null) return null;", "+\tchar[] unicode = Converter.mbcsToWcs(null, data);", "+\tString string  = new String(unicode);", "+\t// parse data and convert string to array of files", "+\tint start = string.indexOf(\"file:\");", "+\tif (start == -1) return null;", "+\tstart += 5;", "+\tString[] fileNames = new String[0];", "+\twhile (start < string.length()) { ", "+\t\tint end = string.indexOf(\"\\r\", start);", "+\t\tif (end == -1) end = string.length() - 1;", "+\t\tString fileName = string.substring(start, end);", "+\t\t", "+\t\tString[] newFileNames = new String[fileNames.length + 1];", "+\t\tSystem.arraycopy(fileNames, 0, newFileNames, 0, fileNames.length);", "+\t\tnewFileNames[fileNames.length] = fileName;", "+\t\tfileNames = newFileNames;", "+", "+\t\tstart = string.indexOf(\"file:\", end);", "+\t\tif (start == -1) break;", "+\t\tstart += 5;", "+\t}", "+\treturn fileNames;"]}], "num": 28012}