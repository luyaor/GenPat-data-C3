{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "50f946891ad8a5d1360da368daefdf4f", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b7ab50e4ffb2f980ff252dfe4f39dc03", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder.java", "commitBeforeChange": "810eb254cbe71a3e1637e56f044fa70b981eb39d", "commitAfterChange": "803bd538f4c4c40e1d60df10cb6937bfea9dab26", "methodNumberBeforeChange": 84, "methodNumberAfterChange": 76, "signatureBeforeChange": " void setButtonBounds()", "signatureAfterChange": " void setButtonBounds(GC gc)", "diff": ["-void setButtonBounds() {", "+void setButtonBounds(GC gc) {", "+\tRectangle trim = renderer.computeTrim(CTabFolderRenderer.PART_BORDER, SWT.NONE, 0, 0, 0, 0);", "+\tint borderRight = trim.width + trim.x;", "+\tint borderLeft = -trim.x;", "+\tint borderBottom = trim.height + trim.y;", "+\tint borderTop = -trim.y;", "+\t", "-\t\tmaxRect.x = size.x - borderRight - BUTTON_SIZE - 3;", "+\t\tPoint maxSize = renderer.computeSize(CTabFolderRenderer.PART_MAX_BUTTON, SWT.NONE, gc);", "+\t\tmaxRect.x = size.x - borderRight - maxSize.x - 3;", "-\t\tmaxRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - BUTTON_SIZE)/2: borderTop + (tabHeight - BUTTON_SIZE)/2;", "-\t\tmaxRect.width = BUTTON_SIZE;", "-\t\tmaxRect.height = BUTTON_SIZE;", "+\t\tmaxRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - maxSize.y)/2: borderTop + (tabHeight - maxSize.y)/2;", "+\t\tmaxRect.width = maxSize.x;", "+\t\tmaxRect.height = maxSize.y;", "-\t", "+", "-\t\tminRect.x = size.x - borderRight - maxRect.width - BUTTON_SIZE - 3;", "+\t\tPoint minSize = renderer.computeSize(CTabFolderRenderer.PART_MIN_BUTTON, SWT.NONE, gc);", "+\t\tminRect.x = size.x - borderRight - maxRect.width - minSize.x - 3;", "-\t\tminRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - BUTTON_SIZE)/2: borderTop + (tabHeight - BUTTON_SIZE)/2;", "-\t\tminRect.width = BUTTON_SIZE;", "-\t\tminRect.height = BUTTON_SIZE;", "+\t\tminRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - minSize.y)/2: borderTop + (tabHeight - minSize.y)/2;", "+\t\tminRect.width = minSize.x;", "+\t\tminRect.height = minSize.y;", "-\t\t\t\t\t\tif (item.x + item.width + 7 + 3*BUTTON_SIZE/2 >= rightEdge) break;", "-\t\t\t\t\t\ttopRightRect.x = item.x + item.width + 7 + 3*BUTTON_SIZE/2;", "+\t\t\t\t\t\tint chevronWidth = renderer.computeSize(CTabFolderRenderer.PART_CHEVRON_BUTTON, SWT.NONE, gc).x;", "+\t\t\t\t\t\tif (item.x + item.width + 7 + chevronWidth >= rightEdge) break;", "+\t\t\t\t\t\ttopRightRect.x = item.x + item.width + 7 + chevronWidth;", "-\t\t\t\t\t\tCTabItem item = items[items.length - 1];", "-\t\t\t\t\t\ttopRightRect.x = item.x + item.width;", "-\t\t\t\t\t\tif (!simple && items.length - 1 == selectedIndex) topRightRect.x += curveWidth - curveIndent;", "+\t\t\t\t\t\tint lastIndex = items.length - 1;", "+\t\t\t\t\t\tCTabItem lastItem = items[lastIndex];", "+\t\t\t\t\t\ttopRightRect.x = lastItem.x + lastItem.width;", "+\tPoint chevronSize = renderer.computeSize(CTabFolderRenderer.PART_CHEVRON_BUTTON, SWT.NONE, gc);", "-\t\t\tchevronRect.width = 3*BUTTON_SIZE/2;", "-\t\t\tchevronRect.height = BUTTON_SIZE;", "+\t\t\tchevronRect.width = chevronSize.x;", "+\t\t\tchevronRect.height = chevronSize.y;", "-\t\t\tchevronRect.width = 3*BUTTON_SIZE/2;", "-\t\t\tchevronRect.height = BUTTON_SIZE;", "+\t\t\tchevronRect.width = chevronSize.x;", "+\t\t\tchevronRect.height = chevronSize.y;", "-\t\t\tif (!simple && lastIndex == selectedIndex) w += curveWidth - 2*curveIndent;", "-\t\t\tchevronRect.x = Math.min(w, getRightItemEdge());", "+\t\t\tif (!simple && lastIndex == selectedIndex) w -= renderer.curveIndent;  //TODO: fix chevron position", "+\t\t\tchevronRect.x = Math.min(w, getRightItemEdge(gc));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "df942a5f07581f88c2d8b2f0c123eb8e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder.java", "commitBeforeChange": "810eb254cbe71a3e1637e56f044fa70b981eb39d", "commitAfterChange": "803bd538f4c4c40e1d60df10cb6937bfea9dab26", "methodNumberBeforeChange": 89, "methodNumberAfterChange": 81, "signatureBeforeChange": " boolean setItemLocation()", "signatureAfterChange": " boolean setItemLocation(GC gc)", "diff": ["-boolean setItemLocation() {", "+boolean setItemLocation(GC gc) {", "+\tRectangle trim = renderer.computeTrim(CTabFolderRenderer.PART_BORDER, SWT.NONE, 0, 0, 0, 0);", "+\tint borderLeft = -trim.x;", "+\tint borderBottom = trim.height + trim.y;", "+\tint borderTop = -trim.y;", "+\tPoint closeButtonSize = renderer.computeSize(CTabFolderRenderer.PART_CLOSE_BUTTON, 0, gc);", "-\t\t\t\t\titem.closeRect.x = borderLeft + CTabItem.LEFT_MARGIN;", "-\t\t\t\t\titem.closeRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - BUTTON_SIZE)/2: borderTop + (tabHeight - BUTTON_SIZE)/2;", "+\t\t\t\t\titem.closeRect.x = borderLeft - renderer.computeTrim(i, SWT.NONE, 0, 0, 0, 0).x;", "+\t\t\t\t\titem.closeRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - closeButtonSize.y)/2: borderTop + (tabHeight - closeButtonSize.y)/2;", "-\t\tint rightItemEdge = getRightItemEdge();", "+\t\tint rightItemEdge = getRightItemEdge(gc);", "-\t\t\tif (!simple && priority[i] == selectedIndex) width += curveWidth - 2*curveIndent;", "-\t\t\t\tif (i == selectedIndex) {", "-\t\t\t\t\tint edge = Math.min(item.x + item.width, rightItemEdge);", "-\t\t\t\t\titem.closeRect.x = edge - CTabItem.RIGHT_MARGIN - BUTTON_SIZE;", "-\t\t\t\t} else {", "-\t\t\t\t\titem.closeRect.x = item.x + item.width - CTabItem.RIGHT_MARGIN - BUTTON_SIZE;", "-\t\t\t\t}", "-\t\t\t\titem.closeRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - BUTTON_SIZE)/2: borderTop + (tabHeight - BUTTON_SIZE)/2;", "+\t\t\t\tint state = SWT.NONE;", "+\t\t\t\tif (i == selectedIndex) state |= SWT.SELECTED;", "+\t\t\t\tRectangle edgeTrim = renderer.computeTrim(i, state, 0, 0, 0, 0);", "+\t\t\t\titem.closeRect.x = item.x + item.width  - (edgeTrim.width + edgeTrim.x) - closeButtonSize.x;", "+\t\t\t\titem.closeRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - closeButtonSize.y)/2: borderTop + (tabHeight - closeButtonSize.y)/2;", "-\t\t\t\tif (!simple && i == selectedIndex) x += curveWidth - 2*curveIndent;", "+\t\t\t\tif (!simple && i == selectedIndex) x -= renderer.curveIndent; //TODO: fix next item position "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6b78a6f3682e1bd4aaf56196f06222af", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder.java", "commitBeforeChange": "4a41229267d8ec39ffddb937135f7f228c3d90ec", "commitAfterChange": "a3f5ef23bb9a2d806a5c1b1bcf9eba42e3d5e4ca", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 31, "signatureBeforeChange": "\r private void layoutButtons()", "signatureAfterChange": "\r private void layoutButtons()", "diff": ["+\tupdateArrowBar();\r", "+\tupdateCloseBar();\r", "+\t\r", "+\tint tabHeight = getTabHeight();\r", "+\tRectangle area = super.getClientArea();\r", "+\t\r", "-\r", "-\t\tinitScrollBarImages();\r", "-\t\tPoint size = scrollBar.getSize();\r", "-\t\tRectangle area = super.getClientArea();\r", "-\t\tint x = area.x + area.width - size.x - borderRight;\r", "-\t\tint y = 0;\r", "-\t\tif (!onBottom) {\r", "-\t\t\ty = area.y + borderTop;\r", "-\t\t} else {\r", "-\t\t\ty = area.y + area.height - borderBottom - size.y;\r", "-\t\t}\r", "-\t\tscrollBar.setLocation(x, y);\r", "-\t\tscrollLeft.setEnabled(leftVisible);\r", "-\t\tscrollRight.setEnabled(rightVisible);\r", "-\t\tscrollBar.setVisible(true);\r", "+\t\tPoint size = arrowBar.computeSize(SWT.DEFAULT, tabHeight);\r", "+\t\tint x = area.x + area.width - borderRight - size.x;\r", "+\t\tint y = (onBottom) ? area.y + area.height - borderBottom - size.y : area.y + borderTop;\r", "+\t\t\r", "+\t\tarrowBar.setBounds(x, y, size.x, size.y);\r", "+\t\tToolItem[] items = arrowBar.getItems();\r", "+\t\titems[0].setEnabled(leftVisible);\r", "+\t\titems[1].setEnabled(rightVisible);\r", "+\t\tarrowBar.setVisible(true);\r", "-\t\tscrollBar.setVisible(false);\r", "+\t\tarrowBar.setVisible(false);\r", "-\t\tPoint size = closeBar.getSize();\r", "-\t\t\tint x = item.x + item.width - CTabItem.RIGHT_MARGIN - size.x + 2;\r", "-\t\t\tint y = item.y + CTabItem.TOP_MARGIN - 1;\r", "-\t\t\tcloseBar.setLocation(x, y);\r", "-\t\t\tif (scrollBar.isVisible()) {\r", "-\t\t\t\tRectangle scrollRect = scrollBar.getBounds();\r", "-\t\t\t\tscrollRect.width += borderRight;\r", "-\t\t\t\tcloseBar.setVisible(!scrollRect.contains(x, y));\r", "+\t\t\tint toolbarHeight = tabHeight - CTabItem.TOP_MARGIN - CTabItem.BOTTOM_MARGIN + 2; // +2 to ignore gab between focus rectangle\r", "+\t\t\tint x = item.x + item.width - toolbarHeight - 1;\r", "+\t\t\tint y = item.y + Math.max(0, (item.height - toolbarHeight)/2);\t\t\r", "+\t\t\t\tcloseBar.setBounds(x, y, toolbarHeight, toolbarHeight);\r", "+\t\t\tif (arrowBar.isVisible()) {\r", "+\t\t\t\tRectangle arrowRect = arrowBar.getBounds();\r", "+\t\t\t\tarrowRect.width += borderRight;\r", "+\t\t\t\tcloseBar.setVisible(!arrowRect.contains(x, y));\r"]}], "num": 32709}