{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f7d45b658798187879ff2c8ca48017e8", "detectedBy": ["DIFF_HIERARCHICAL", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4ce83fc30af70c4fb3404b97e7a2ff71", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "6bf9e9e7677dd6bee708b67e321d6e5506e19ea2", "commitAfterChange": "73f0362d919fe382f115eaf114311e63eb6b8d88", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": "  void init(Device device, String name, int height, int style)", "signatureAfterChange": "  void init(Device device, String name, int height, int style)", "diff": ["-\tbyte[] buffer = new byte[256];", "-\tint length = name.length();", "-\tif (length > 255) length = 255;", "-\tbuffer[0] = (byte)length;", "-\tfor (int i=0; i<length; i++) {", "-\t\tbuffer[i+1]= (byte)name.charAt(i);", "+\tint[] font = new int[1];", "+\tbyte[] buffer = name.getBytes();", "+\tthis.id = OS.kInvalidFontFamily;", "+\tif (OS.ATSUFindFontFromName(buffer, buffer.length, OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, font) == OS.noErr) {", "+\t\tshort[] family = new short[1];", "+\t\tOS.FMGetFontFamilyInstanceFromFont(font[0], family, new short[1]);", "+\t\tthis.id = family[0];", "-\tthis.id = OS.FMGetFontFamilyFromName(buffer);", "-\tint[] font = new int[1];", "-\tif (OS.FMGetFontFromFontFamilyInstance(id, this.style, font, null) != 0) {", "-\t\tSWT.error(SWT.ERROR_NO_HANDLES);", "+\tOS.FMGetFontFromFontFamilyInstance(id, this.style, font, null);", "+\tif (font[0] == 0) {", "+\t\tFont systemFont = device.systemFont;", "+\t\tthis.handle = systemFont.handle;", "+\t} else {", "+\t\tthis.handle = font[0];", "-\tif (font[0] == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\tthis.handle = font[0];"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d72d57e3bc531ea9a215acceb6b9b8c6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/FontDialog.java", "commitBeforeChange": "6bf9e9e7677dd6bee708b67e321d6e5506e19ea2", "commitAfterChange": "73f0362d919fe382f115eaf114311e63eb6b8d88", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": " public FontData open ()", "signatureAfterChange": " public FontData open ()", "diff": ["-\t\tbyte [] buffer = new byte [256];", "-\t\tint length = familyName.length();", "-\t\tif (length > 255) length = 255;", "-\t\tbuffer [0] = (byte)length;", "-\t\tfor (int i=0; i<length; i++) {", "-\t\t\tbuffer [i+1] = (byte) familyName.charAt(i);", "+\t\tint[] font = new int[1];", "+\t\tbyte[] buffer = familyName.getBytes();", "+\t\tif (OS.ATSUFindFontFromName(buffer, buffer.length, OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, font) == OS.noErr) {", "+\t\t\tshort[] family = new short[1];", "+\t\t\tOS.FMGetFontFamilyInstanceFromFont(font[0], family, new short[1]);\t\t", "+\t\t\tqdStyle.instance_fontFamily = family[0];", "-\t\tint id = OS.FMGetFontFamilyFromName (buffer);", "-\t\tif (id == OS.kInvalidFontFamily) id = OS.GetAppFont();", "-\t\tqdStyle.instance_fontFamily = (short)id;"]}], "num": 41247}