{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6f4fd6c52fd4d5491df590f325bbd93b", "detectedBy": ["DIFF_DBSCAN", "AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f8ab808601631fb5a64a947be602e6f3", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledTextBidi.java", "commitBeforeChange": "7f8a2d94d60193ce6db28ab152ae0dd19755173d", "commitAfterChange": "ba18445343518936655ba635310b2acca44a5b28", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 15, "signatureBeforeChange": "\r public int getCaretPosition(int logicalOffset)", "signatureAfterChange": "\r public int getCaretPosition(int logicalOffset)", "diff": ["-\tint caretX;\r", "-\r", "-\tif (getTextLength() == 0) {\r", "-\t\treturn StyledText.XINSET;\r", "-\t}\r", "-\t// at or past end of line?\r", "-\tif (logicalOffset >= order.length) {\r", "-\t\tlogicalOffset = Math.min(logicalOffset, order.length - 1);\r", "-\t\tint visualOffset = order[logicalOffset];\r", "-\t\tif (isRightToLeft(logicalOffset)) {\r", "-\t\t\tcaretX = renderPositions[visualOffset];\r", "-\t\t}\r", "-\t\telse {\r", "-\t\t\tcaretX = renderPositions[visualOffset] + dx[visualOffset];\r", "-\t\t}\r", "-\t}\r", "-\telse\r", "-\tif (logicalOffset > 0 && isRightToLeft(logicalOffset) != isRightToLeft(logicalOffset - 1)) {\r", "-\t\t// logically first character of different direction segment?\r", "-\t\t// go behind last character of previous direction segment\r", "-\t\tint visualOffset = order[logicalOffset - 1];\r", "-\t\tif (isRightToLeft(logicalOffset - 1)) {\r", "-\t\t\tcaretX = renderPositions[visualOffset];\r", "-\t\t}\r", "-\t\telse {\r", "-\t\t\tcaretX = renderPositions[visualOffset] + dx[visualOffset];\r", "-\t\t}\r", "-\t}\r", "-\telse\r", "-\t// at R2L character or beginning of line?\r", "-\tif (isRightToLeft(logicalOffset) || logicalOffset == 0) {\r", "-\t\tint visualOffset = order[logicalOffset];\r", "-\r", "-\r", "-\t\tif (isRightToLeft(logicalOffset)) {\r", "-\t\t\tcaretX = renderPositions[visualOffset] + dx[visualOffset];\r", "-\t\t}\r", "-\t\telse {\r", "-\t\t\tcaretX = renderPositions[visualOffset];\r", "-\t\t}\r", "-\t}\t\r", "-\telse {\r", "-\t\t// L2R segment\r", "-\t\tcaretX = renderPositions[order[logicalOffset]];\r", "-\t}\t\t\r", "-\treturn caretX;\r", "+\treturn getCaretPosition(logicalOffset, ST.COLUMN_NEXT);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c982f6b9521bf7665fefadbab84c08c9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledTextBidi.java", "commitBeforeChange": "43c5eca5ffa5452874e81e46e670840a579edd2f", "commitAfterChange": "1f82bdbe2d20fd7594c393bf39d9867087e27d8b", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 16, "signatureBeforeChange": "\r int[] getCaretOffsetAndDirectionAtX(int x)", "signatureAfterChange": "\r int[] getCaretOffsetAndDirectionAtX(int x)", "diff": ["+ */\r", "-\t}\t\r", "+\t}\t\t\r", "-\t// get the index visually clicked character\r", "-\tint visualIndex = getVisualOffsetAtX(x);\r", "+\t// get the visual offset of the clicked character\r", "+\tint visualOffset = getVisualOffsetAtX(x);\r", "-\tint halfway = renderPositions[visualIndex] + (dx[visualIndex] / 2);\r", "+\tint halfway = renderPositions[visualOffset] + dx[visualOffset] / 2;\r", "-\toffset = getLogicalOffset(visualIndex);\r", "-\r", "-\t// handle visual beginning\r", "-\tif (visualIndex == 0) {\r", "-\t\tif (isRightToLeft(offset)) {\r", "-\t\t\tif (visualLeft) {\r", "-\t\t\t\toffset = getLigatureEndOffset(offset);\r", "-\t\t\t\toffset = offset + 1;\r", "-\t\t\t\tdirection = ST.COLUMN_NEXT;\r", "-\t\t\t}\r", "-\t\t\telse {\r", "-\t\t\t\tdirection = ST.COLUMN_PREVIOUS;\r", "-\t\t\t}\r", "-\t\t}\r", "-\t\telse {\r", "-\t\t\tif (visualLeft) {\r", "-\t\t\t\tdirection = ST.COLUMN_PREVIOUS;\r", "-\t\t\t}\r", "-\t\t\telse {\r", "-\t\t\t\toffset = offset + 1;\r", "-\t\t\t\tdirection = ST.COLUMN_NEXT;\r", "-\t\t\t}\r", "-\t\t}\t\t\t\r", "-\t\treturn new int[] {offset, direction};\r", "-\t}\t\r", "-\r", "-\t// handle visual end\r", "-\tif (visualIndex == renderPositions.length - 1) {\r", "-\t\tif (isRightToLeft(offset)) {\r", "-\t\t\tif (visualLeft) {\r", "-\t\t\t\toffset = getLigatureEndOffset(offset);\r", "-\t\t\t\toffset = offset + 1;\r", "-\t\t\t\tdirection = ST.COLUMN_NEXT;\r", "-\t\t\t}\r", "-\t\t\telse {\r", "-\t\t\t\toffset = offset;\r", "-\t\t\t\tdirection = ST.COLUMN_PREVIOUS;\r", "-\t\t\t}\r", "-\t\t}\r", "-\t\telse {\r", "-\t\t\tif (visualLeft) {\r", "-\t\t\t\toffset = offset;\r", "-\t\t\t\tdirection = ST.COLUMN_PREVIOUS;\r", "-\t\t\t}\r", "-\t\t\telse {\r", "-\t\t\t\toffset = offset + 1;\r", "-\t\t\t\tdirection = ST.COLUMN_NEXT;\r", "-\t\t\t}\r", "-\t\t}\r", "-\t\treturn new int[] {offset, direction};\r", "-\t}\t\r", "+\toffset = getLogicalOffset(visualOffset);\r", "-\t\t\toffset = offset + 1;\r", "+\t\t\toffset++;\r", "-\t\t\toffset = offset;\r", "-\t\t\toffset = offset;\r", "-\t\t\toffset = offset + 1;\r", "+\t\t\toffset++;\r"]}], "num": 57967}