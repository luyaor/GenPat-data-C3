{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c5ef0077c9de1eb362d9d7349b82a25e", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8ad40037b957b0289ce9a9408deec515", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "5544ce1d748561f71c4f1d1997c431f82e5c4c86", "commitAfterChange": "24e0049851c0d0a09cb9f25e5892d112e2936fed", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": " \tvoid printDecorationSegment(String segment, int alignment, int page, boolean header)", "signatureAfterChange": " \tvoid printDecorationSegment(String segment, int alignment, int page, boolean header)", "diff": ["-\t\t\tint drawY;", "-\t\t\tStyledTextBidi bidi = null;", "-\t\t\t", "-\t\t\tif (isBidi()) {", "-\t\t\t\tbidi = new StyledTextBidi(gc, tabLength, segment, null, null, new int[] {0, segment.length()});", "-\t\t\t\tsegmentWidth = bidi.getTextWidth();", "-\t\t\t}\t\t\t", "-\t\t\telse {", "-\t\t\t\tsegmentWidth = gc.textExtent(segment).x;", "-\t\t\t}", "+\t\t\tint drawY = 0;", "+\t\t\tTextLayout layout = renderer.getTextLayout(segment, 0, null);", "+\t\t\tsegmentWidth = layout.getLineBounds(0).width;", "-\t\t\t}\t\t\t", "+\t\t\t}", "-\t\t\tif (bidi != null) {", "-\t\t\t\tbidi.drawBidiText(0, segment.length(), drawX, drawY);", "-\t\t\t}", "-\t\t\telse {", "-\t\t\t\tgc.drawString(segment, drawX, drawY, true);", "-\t\t\t}", "+\t\t\tlayout.draw(gc, drawX, drawY);", "+\t\t\trenderer.disposeTextLayout(layout, null);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "585942b28ec19972e5c407f0e0695b81", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "ba7db5f8858c018413d5ba71484867612c3d4d2b", "commitAfterChange": "ef60ea24746fa9f565fff3764ece2aa5ccaec47a", "methodNumberBeforeChange": 72, "methodNumberAfterChange": 72, "signatureBeforeChange": " void doBackspace()", "signatureAfterChange": " void doBackspace()", "diff": ["+\t\t\tboolean isSurrogate = false;", "+\t\t\tString lineText = content.getLine(lineIndex);", "+\t\t\tchar ch = lineText.charAt(caretOffset - lineOffset - 1);", "+\t\t\tif (0xDC00 <= ch && ch <= 0xDFFF) {", "+\t\t\t\tif (caretOffset - lineOffset - 2 >= 0) {", "+\t\t\t\t\tch = lineText.charAt(caretOffset - lineOffset - 2);", "+\t\t\t\t\tisSurrogate = 0xD800 <= ch && ch <= 0xDBFF;", "+\t\t\t\t}", "+\t\t\t}", "-\t\t\tint start = layout.getPreviousOffset(caretOffset - lineOffset, SWT.MOVEMENT_CHAR);", "-\t\t\trenderer.disposeTextLayout(layout); ", "+\t\t\tint start = layout.getPreviousOffset(caretOffset - lineOffset, isSurrogate ? SWT.MOVEMENT_CLUSTER : SWT.MOVEMENT_CHAR);", "+\t\t\trenderer.disposeTextLayout(layout);"]}], "num": 63127}