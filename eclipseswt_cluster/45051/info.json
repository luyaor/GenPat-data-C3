{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "84d67d129326ddc1dbd634adf03ede15", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "de0dd07351aa5d92b0d6f1be5b36e3e5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "874f49f65c480d909cd9a37c9e58ee52795e1ad9", "commitAfterChange": "f5f1be362ef2a7cb6943a5f1320016e3fb51da86", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": "  int eventProc (int event, int data)", "signatureAfterChange": "  int eventProc (int event, int data)", "diff": ["-", "-\tControl control = null;", "-\tint /*long*/ window = 0;", "-\tswitch (eventType) {", "-\t\tcase OS.GDK_KEY_PRESS:", "-\t\tcase OS.GDK_KEY_RELEASE:", "-\t\tcase OS.GDK_ENTER_NOTIFY:", "-\t\tcase OS.GDK_LEAVE_NOTIFY:", "-\t\tcase OS.GDK_BUTTON_PRESS:", "-\t\tcase OS.GDK_2BUTTON_PRESS: ", "-\t\tcase OS.GDK_3BUTTON_PRESS:", "-\t\tcase OS.GDK_BUTTON_RELEASE: ", "-\t\tcase OS.GDK_MOTION_NOTIFY:  {", "-\t\t\twindow = OS.GDK_EVENT_WINDOW (event);", "-\t\t\tint /*long*/ [] user_data = new int /*long*/ [1];", "-\t\t\tdo {", "-\t\t\t\tOS.gdk_window_get_user_data (window, user_data);", "-\t\t\t\tint /*long*/ handle = user_data [0];", "-\t\t\t\tif (handle != 0) {", "-\t\t\t\t\tWidget widget = getWidget (handle);", "-\t\t\t\t\tif (widget != null && widget instanceof Control) {", "-\t\t\t\t\t\tcontrol = (Control) widget;", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t} while ((window = OS.gdk_window_get_parent (window)) != 0);", "-\t\t}", "-\t}", "+\t/*", "+\t* Feature in GTK.  GTK implements modality by adding a grab", "+\t* to the GTK top level window.  Normally, all mouse and ", "+\t* keyboard events are delivered to child widgets and shells", "+\t* when the grab is active.  When a dialog child is an ", "+\t* override redirect window, GTK does not forward the events.  ", "+\t* The fix is to add a temporary grab to the override redirect", "+\t* window.  ", "+\t*/", "-\tif (control != null ) {", "-\t\tshell = control.getShell ();", "-\t\tif ((shell.style & SWT.ON_TOP) != 0) {", "-\t\t\tOS.gtk_grab_add (shell.shellHandle);", "+\tControl control = null;", "+\tint /*long*/ grabHandle = OS.gtk_grab_get_current ();", "+\tif (grabHandle != 0 && OS.GTK_IS_WINDOW (grabHandle) && OS.gtk_window_get_modal (grabHandle)) {", "+\t\tswitch (eventType) {", "+\t\t\tcase OS.GDK_KEY_PRESS:", "+\t\t\tcase OS.GDK_KEY_RELEASE:", "+\t\t\tcase OS.GDK_ENTER_NOTIFY:", "+\t\t\tcase OS.GDK_LEAVE_NOTIFY:", "+\t\t\tcase OS.GDK_BUTTON_PRESS:", "+\t\t\tcase OS.GDK_2BUTTON_PRESS: ", "+\t\t\tcase OS.GDK_3BUTTON_PRESS:", "+\t\t\tcase OS.GDK_BUTTON_RELEASE: ", "+\t\t\tcase OS.GDK_MOTION_NOTIFY:  {", "+\t\t\t\tint /*long*/ window = OS.GDK_EVENT_WINDOW (event);", "+\t\t\t\tint /*long*/ [] user_data = new int /*long*/ [1];", "+\t\t\t\tdo {", "+\t\t\t\t\tOS.gdk_window_get_user_data (window, user_data);", "+\t\t\t\t\tint /*long*/ handle = user_data [0];", "+\t\t\t\t\tif (handle != 0) {", "+\t\t\t\t\t\tWidget widget = getWidget (handle);", "+\t\t\t\t\t\tif (widget != null && widget instanceof Control) {", "+\t\t\t\t\t\t\tcontrol = (Control) widget;", "+\t\t\t\t\t\t\tbreak;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t} while ((window = OS.gdk_window_get_parent (window)) != 0);", "+\t\t\t}", "+\t\t}", "+\t\tif (control != null) {\t\t", "+\t\t\tshell = control.getShell ();", "+\t\t\tif ((shell.style & SWT.ON_TOP) != 0) {", "+\t\t\t\tOS.gtk_grab_add (shell.shellHandle);", "+\t\t\t}", "-\tif (control != null ) {", "+\tif (control != null) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e874ea0cda3fa6c35bb200d0521246f4", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "d6b79b6473afebbe9981c63f24cfb35b1cabdb63", "commitAfterChange": "e30f4695dcdef3aead385fb3beceec028923c85f", "methodNumberBeforeChange": 30, "methodNumberAfterChange": 31, "signatureBeforeChange": "  int eventProc (int event, int data)", "signatureAfterChange": "  int eventProc (int event, int data)", "diff": ["-\t/*", "-\t* Feature in GTK.  GTK implements modality by adding a grab", "-\t* to the GTK top level window.  Normally, all mouse and ", "-\t* keyboard events are delivered to child widgets and the", "-\t* shell when the grab is active.  When an override redirect", "-\t* shell is created as a child of a dialog, then events are", "-\t* grabbed by the dialog instead of the override redirect", "-\t* shell.  The fix is to add a temporary grab to the override", "-\t* redirect window when there is not already a grab in a", "-\t* child widget of the override redirect shell (for example,", "-\t* in a scroll bar).  ", "-\t*/", "-\tShell shell = null;", "-\tControl control = null;", "-\tint /*long*/ grabHandle = OS.gtk_grab_get_current ();", "-\tif (grabHandle != 0 && OS.GTK_IS_WINDOW (grabHandle) && OS.gtk_window_get_modal (grabHandle)) {", "-\t\tswitch (eventType) {", "-\t\t\tcase OS.GDK_KEY_PRESS:", "-\t\t\tcase OS.GDK_KEY_RELEASE:", "-\t\t\tcase OS.GDK_ENTER_NOTIFY:", "-\t\t\tcase OS.GDK_LEAVE_NOTIFY:", "-\t\t\tcase OS.GDK_BUTTON_PRESS:", "-\t\t\tcase OS.GDK_2BUTTON_PRESS: ", "-\t\t\tcase OS.GDK_3BUTTON_PRESS:", "-\t\t\tcase OS.GDK_BUTTON_RELEASE: ", "-\t\t\tcase OS.GDK_MOTION_NOTIFY:  {", "-\t\t\t\tint /*long*/ window = OS.GDK_EVENT_WINDOW (event);", "-\t\t\t\tint /*long*/ [] user_data = new int /*long*/ [1];", "-\t\t\t\tdo {", "-\t\t\t\t\tOS.gdk_window_get_user_data (window, user_data);", "-\t\t\t\t\tint /*long*/ handle = user_data [0];", "-\t\t\t\t\tif (handle != 0) {", "-\t\t\t\t\t\tWidget widget = getWidget (handle);", "-\t\t\t\t\t\tif (widget != null && widget instanceof Control) {", "-\t\t\t\t\t\t\tcontrol = (Control) widget;", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\t}", "-\t\t\t\t\t}", "-\t\t\t\t} while ((window = OS.gdk_window_get_parent (window)) != 0);", "-\t\t\t}", "-\t\t}", "-\t\tif (control != null) {\t\t", "-\t\t\tshell = control.getShell ();", "-\t\t\tif ((shell.style & SWT.ON_TOP) != 0) {", "-\t\t\t\tOS.gtk_grab_add (shell.shellHandle);", "-\t\t\t}", "-\t\t}", "-\t}", "-\tif (control != null) {", "-\t\tif (shell != null && !shell.isDisposed () && (shell.style & SWT.ON_TOP) != 0) {", "-\t\t\tOS.gtk_grab_remove (shell.shellHandle);", "-\t\t}", "-\t}"]}], "num": 45051}