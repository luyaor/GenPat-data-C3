{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "20d97fe6fc066118f8b3815539352424", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "de0dd07351aa5d92b0d6f1be5b36e3e5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "874f49f65c480d909cd9a37c9e58ee52795e1ad9", "commitAfterChange": "f5f1be362ef2a7cb6943a5f1320016e3fb51da86", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": "  int eventProc (int event, int data)", "signatureAfterChange": "  int eventProc (int event, int data)", "diff": ["-", "-\tControl control = null;", "-\tint /*long*/ window = 0;", "-\tswitch (eventType) {", "-\t\tcase OS.GDK_KEY_PRESS:", "-\t\tcase OS.GDK_KEY_RELEASE:", "-\t\tcase OS.GDK_ENTER_NOTIFY:", "-\t\tcase OS.GDK_LEAVE_NOTIFY:", "-\t\tcase OS.GDK_BUTTON_PRESS:", "-\t\tcase OS.GDK_2BUTTON_PRESS: ", "-\t\tcase OS.GDK_3BUTTON_PRESS:", "-\t\tcase OS.GDK_BUTTON_RELEASE: ", "-\t\tcase OS.GDK_MOTION_NOTIFY:  {", "-\t\t\twindow = OS.GDK_EVENT_WINDOW (event);", "-\t\t\tint /*long*/ [] user_data = new int /*long*/ [1];", "-\t\t\tdo {", "-\t\t\t\tOS.gdk_window_get_user_data (window, user_data);", "-\t\t\t\tint /*long*/ handle = user_data [0];", "-\t\t\t\tif (handle != 0) {", "-\t\t\t\t\tWidget widget = getWidget (handle);", "-\t\t\t\t\tif (widget != null && widget instanceof Control) {", "-\t\t\t\t\t\tcontrol = (Control) widget;", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t} while ((window = OS.gdk_window_get_parent (window)) != 0);", "-\t\t}", "-\t}", "+\t/*", "+\t* Feature in GTK.  GTK implements modality by adding a grab", "+\t* to the GTK top level window.  Normally, all mouse and ", "+\t* keyboard events are delivered to child widgets and shells", "+\t* when the grab is active.  When a dialog child is an ", "+\t* override redirect window, GTK does not forward the events.  ", "+\t* The fix is to add a temporary grab to the override redirect", "+\t* window.  ", "+\t*/", "-\tif (control != null ) {", "-\t\tshell = control.getShell ();", "-\t\tif ((shell.style & SWT.ON_TOP) != 0) {", "-\t\t\tOS.gtk_grab_add (shell.shellHandle);", "+\tControl control = null;", "+\tint /*long*/ grabHandle = OS.gtk_grab_get_current ();", "+\tif (grabHandle != 0 && OS.GTK_IS_WINDOW (grabHandle) && OS.gtk_window_get_modal (grabHandle)) {", "+\t\tswitch (eventType) {", "+\t\t\tcase OS.GDK_KEY_PRESS:", "+\t\t\tcase OS.GDK_KEY_RELEASE:", "+\t\t\tcase OS.GDK_ENTER_NOTIFY:", "+\t\t\tcase OS.GDK_LEAVE_NOTIFY:", "+\t\t\tcase OS.GDK_BUTTON_PRESS:", "+\t\t\tcase OS.GDK_2BUTTON_PRESS: ", "+\t\t\tcase OS.GDK_3BUTTON_PRESS:", "+\t\t\tcase OS.GDK_BUTTON_RELEASE: ", "+\t\t\tcase OS.GDK_MOTION_NOTIFY:  {", "+\t\t\t\tint /*long*/ window = OS.GDK_EVENT_WINDOW (event);", "+\t\t\t\tint /*long*/ [] user_data = new int /*long*/ [1];", "+\t\t\t\tdo {", "+\t\t\t\t\tOS.gdk_window_get_user_data (window, user_data);", "+\t\t\t\t\tint /*long*/ handle = user_data [0];", "+\t\t\t\t\tif (handle != 0) {", "+\t\t\t\t\t\tWidget widget = getWidget (handle);", "+\t\t\t\t\t\tif (widget != null && widget instanceof Control) {", "+\t\t\t\t\t\t\tcontrol = (Control) widget;", "+\t\t\t\t\t\t\tbreak;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t} while ((window = OS.gdk_window_get_parent (window)) != 0);", "+\t\t\t}", "+\t\t}", "+\t\tif (control != null) {\t\t", "+\t\t\tshell = control.getShell ();", "+\t\t\tif ((shell.style & SWT.ON_TOP) != 0) {", "+\t\t\t\tOS.gtk_grab_add (shell.shellHandle);", "+\t\t\t}", "-\tif (control != null ) {", "+\tif (control != null) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "01e88ea1e5b9cc21d5e42d3711aa4fc5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Shell.java", "commitBeforeChange": "8e1dda1437864634766dd6a9b21a20d9a8381ab4", "commitAfterChange": "e759097646243da78c48cf98ecd98d71e336f93e", "methodNumberBeforeChange": 49, "methodNumberAfterChange": 50, "signatureBeforeChange": "  int kEventWindowUpdate (int nextHandler, int theEvent, int userData)", "signatureAfterChange": "  int kEventWindowUpdate (int nextHandler, int theEvent, int userData)", "diff": ["+\tupdate = true;", "+\tupdate = false;", "+\tif (invalRgn != 0) {", "+\t\tOS.InvalWindowRgn (shellHandle, invalRgn);", "+\t\tOS.DisposeRgn (invalRgn);", "+\t\tinvalRgn = 0;", "+\t}"]}], "num": 38816}