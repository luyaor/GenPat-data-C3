{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "23143dab32a6847b942b65a75d1fe711", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a256b85dc23e1aa64a2426b51148a8d9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/TreeItem.java", "commitBeforeChange": "cc7a79cec8920b1b6175a6c2124e7f63a3823262", "commitAfterChange": "d8f34c9ec09bc11f5d7b71293f9d378725f3146c", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 9, "signatureBeforeChange": " public Rectangle getBounds ()", "signatureAfterChange": " public Rectangle getBounds ()", "diff": ["+\t// TODO fully test on early and later versions of GTK", "+\t// shifted a bit too far right on later versions of GTK - however, old Tree also had this problem", "+\tif (!parent.checkData (this)) error (SWT.ERROR_WIDGET_DISPOSED);", "-\tGdkRectangle rect = new GdkRectangle ();", "+\tif (column == 0) return new Rectangle (0, 0, 0, 0);", "+\tint /*long*/ textRenderer = parent.getTextRenderer (column);", "+\tint /*long*/ pixbufRenderer = parent.getPixbufRenderer (column);", "+\tif (textRenderer == 0 || pixbufRenderer == 0)  return new Rectangle (0, 0, 0, 0);", "+", "-\tOS.gtk_tree_view_get_cell_area (parentHandle, path, column, rect);", "-\tint [] x = new int [1], width = new int [1];", "-\tOS.gtk_cell_renderer_get_size (parent.textRenderer, parentHandle, null, null, null, width, null);", "-\trect.width = width [0];", "+\t", "+\tGdkRectangle rect = new GdkRectangle ();", "+\tOS.gtk_tree_view_get_cell_area (parentHandle, path, column, rect);", "+\tOS.gtk_tree_path_free (path);", "+", "+\tint [] x = new int [1], w = new int [1];", "+\tOS.gtk_cell_renderer_get_size (textRenderer, parentHandle, null, null, null, w, null);", "+\trect.width = w [0];", "+\t", "-\t\tOS.gtk_tree_view_column_cell_get_position (column, parent.textRenderer, x, null);", "+\t\tOS.gtk_tree_view_column_cell_get_position (column, textRenderer, x, null);", "-\t\t\tOS.gtk_cell_renderer_get_size (parent.checkRenderer, parentHandle, null, null, null, width, null);", "-\t\t\trect.x += width [0] + horizontalSeparator;", "+\t\t\tOS.gtk_cell_renderer_get_size (parent.checkRenderer, parentHandle, null, null, null, w, null);", "+\t\t\trect.x += w [0] + horizontalSeparator;", "-\t\tOS.gtk_cell_renderer_get_size (parent.pixbufRenderer, parentHandle, null, null, null, width, null);", "-\t\trect.x += width [0] + horizontalSeparator;", "+\t\tOS.gtk_cell_renderer_get_size (pixbufRenderer, parentHandle, null, null, null, w, null);", "+\t\trect.x += w [0] + horizontalSeparator;", "-\tint border = parent.getBorderWidth ();", "-\trect.x += border;", "-\trect.y += border;", "-\tOS.gtk_tree_path_free (path);", "-\treturn new Rectangle (rect.x, rect.y, rect.width, rect.height);", "-}\t", "+\t", "+\tint border = parent.getBorderWidth ();", "+\tint headerHeight = parent.getHeaderHeight ();", "+\treturn new Rectangle (rect.x + border, rect.y + (headerHeight == 0 ?  border : headerHeight), rect.width + 1, rect.height + 1);", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d181a0cae502cd29a24e4749f0dc30ee", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/TreeItem.java", "commitBeforeChange": "b149d88166b2cf2323cb01c5c46c557ea0de46df", "commitAfterChange": "fb8c665b3d34ea54d7e61fa52a3d1d177488e6a4", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": " public Rectangle getBounds ()", "signatureAfterChange": " public Rectangle getBounds ()", "diff": ["+\t", "+\tboolean isExpander = OS.gtk_tree_model_iter_n_children (parent.modelHandle, handle) > 0;", "+\tboolean isExpanded = OS.gtk_tree_view_row_expanded (parentHandle, path);", "+\tOS.gtk_tree_view_column_cell_set_cell_data (column, parent.modelHandle, handle, isExpander, isExpanded);", "+\tint [] x = new int [1], width = new int [1];", "+\tOS.gtk_cell_renderer_get_size (parent.textRenderer, parentHandle, null, null, null, width, null);", "+\trect.width = width [0];", "+\tint [] buffer = new int [1];", "+\tif (OS.gtk_tree_view_get_expander_column (parentHandle) == column) {", "+\t\tOS.gtk_widget_style_get (parentHandle, OS.expander_size, buffer, 0);", "+\t\trect.x += buffer [0] + TreeItem.EXPANDER_EXTRA_PADDING;", "+\t}", "+\tOS.gtk_widget_style_get (parentHandle, OS.horizontal_separator, buffer, 0);", "+\tint horizontalSeparator = buffer[0];", "+\trect.x += horizontalSeparator;", "+\tif (OS.gtk_major_version () * 100 + OS.gtk_minor_version () * 10 + OS.gtk_micro_version () >= 213) {", "+\t\tOS.gtk_tree_view_column_cell_get_position (column, parent.textRenderer, x, null);", "+\t\trect.x += x [0];", "+\t} else {", "+\t\tif ((parent.style & SWT.CHECK) != 0) {", "+\t\t\tOS.gtk_cell_renderer_get_size (parent.checkRenderer, parentHandle, null, null, null, width, null);", "+\t\t\trect.x += width [0] + horizontalSeparator;", "+\t\t}", "+\t\tOS.gtk_cell_renderer_get_size (parent.pixbufRenderer, parentHandle, null, null, null, width, null);", "+\t\trect.x += width [0] + horizontalSeparator;", "+\t}", "+\tint border = parent.getBorderWidth ();", "+\trect.x += border;", "+\trect.y += border;", "+\t"]}], "num": 48723}