{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "b0994ecf197abd6cec77c49da36403eb", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f86ceb2fccaf836fd45562900043ecd2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt.tools/Mac Generation/org/eclipse/swt/tools/internal/MacGeneratorUI.java", "commitBeforeChange": "c0eab291930878b5b0686e9f1e20996a4f2d6348", "commitAfterChange": "dc19d25aa6cd979d0249c3e9ed5cf50640a357ac", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": " \t \tvoid updateNodes()", "signatureAfterChange": " \t \tvoid updateNodes()", "diff": ["-\t\ttry {", "-\t\t\tfor (int x = 0; x < xmls.length; x++) {", "-\t\t\t\tString xmlPath = xmls[x];", "-\t\t\t\tTreeItem xmlItem = new TreeItem(nodesTree, SWT.NONE);", "-\t\t\t\tString xmlText = xmlPath;", "-\t\t\t\tint index = xmlText.lastIndexOf(File.separatorChar);", "-\t\t\t\tif (index != -1) xmlText = xmlText.substring(index + 1);", "-\t\t\t\txmlItem.setText(xmlText);", "+\t\tfor (int x = 0; x < xmls.length; x++) {", "+\t\t\tString xmlPath = xmls[x];", "+\t\t\tString xmlSimplePath = xmlPath;", "+\t\t\tint index = xmlSimplePath.lastIndexOf(File.separatorChar);", "+\t\t\tif (index != -1) xmlSimplePath = xmlSimplePath.substring(index + 1);", "-\t\t\t\tHashtable extras = new Hashtable();", "-\t\t\t\tDocument extraDocument = getDocument(xmlText + \".extras\");", "-\t\t\t\tif (extraDocument != null) {", "-\t\t\t\t\tbuildLookup(extraDocument, extras);", "-\t\t\t\t}", "-", "-\t\t\t\tDocument document = getDocument(xmlPath);", "-\t\t\t\tNodeList list = document.getDocumentElement().getChildNodes();", "-\t\t\t\tfor (int i = 0; i < list.getLength(); i++) {", "-\t\t\t\t\taddChild(list.item(i), xmlItem, extras);", "-\t\t\t\t}", "+\t\t\tDocument document = getDocument(xmlPath);", "+\t\t\tif (document == null) {", "+\t\t\t\tSystem.out.println(\"Could not find: \" + xmlPath);", "+\t\t\t\tcontinue;", "-\t\t\tTreeColumn[] columns = nodesTree.getColumns();", "-\t\t\tfor (int i = 0; i < columns.length; i++) {", "-\t\t\t\tcolumns[i].pack();", "+\t\t\tHashtable extras = new Hashtable();", "+\t\t\tDocument extraDocument = getDocument(xmlSimplePath + \".extras\");", "+\t\t\tif (extraDocument != null) {", "+\t\t\t\tbuildLookup(extraDocument, extras);", "-\t\t} catch (Throwable e) {", "-\t\t\te.printStackTrace();", "+\t\t\t", "+\t\t\tTreeItem xmlItem = new TreeItem(nodesTree, SWT.NONE);", "+\t\t\txmlItem.setText(xmlSimplePath);", "+\t\t\tNodeList list = document.getDocumentElement().getChildNodes();", "+\t\t\tfor (int i = 0; i < list.getLength(); i++) {", "+\t\t\t\taddChild(list.item(i), xmlItem, extras);", "+\t\t\t}", "+\t\t}", "+\t\tTreeColumn[] columns = nodesTree.getColumns();", "+\t\tfor (int i = 0; i < columns.length; i++) {", "+\t\t\tcolumns[i].pack();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "da6c40034e03b1302451d9954d4c1296", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Program/gtk/org/eclipse/swt/program/Program.java", "commitBeforeChange": "d70097b3723123dbd8abcf6b34b2f106be849ad8", "commitAfterChange": "b6666a5139ca22ba429077362792bdaf8b234877", "methodNumberBeforeChange": 27, "methodNumberAfterChange": 27, "signatureBeforeChange": "  ImageData gio_getImageData()", "signatureAfterChange": "  ImageData gio_getImageData()", "diff": ["-\ttry {", "-\t\tint /*long*/ icon_theme =OS.gtk_icon_theme_get_default();", "-\t\tbyte[] icon = Converter.wcsToMbcs (null, iconPath, true);", "-\t\tint /*long*/ gicon = OS.g_icon_new_for_string(icon, null);", "+\tint /*long*/ icon_theme =OS.gtk_icon_theme_get_default();", "+\tbyte[] icon = Converter.wcsToMbcs (null, iconPath, true);", "+\tint /*long*/ gicon = OS.g_icon_new_for_string(icon, null);", "+\tif (gicon != 0) {", "-\t\tint /*long*/ pixbuf = OS.gtk_icon_info_load_icon(gicon_info, null);\t\t", "-\t\tif (pixbuf != 0) {", "-\t\t\tint stride = OS.gdk_pixbuf_get_rowstride(pixbuf);", "-\t\t\tint /*long*/ pixels = OS.gdk_pixbuf_get_pixels(pixbuf);", "-\t\t\tint height = OS.gdk_pixbuf_get_height(pixbuf);", "-\t\t\tint width = OS.gdk_pixbuf_get_width(pixbuf);", "-\t\t\tboolean hasAlpha = OS.gdk_pixbuf_get_has_alpha(pixbuf);", "-\t\t\tbyte[] srcData = new byte[stride * height];", "-\t\t\tOS.memmove(srcData, pixels, srcData.length);", "-\t\t\tOS.g_object_unref(pixbuf);", "-\t\t\t", "-\t\t\tif (hasAlpha) {", "-\t\t\t\tPaletteData palette = new PaletteData(0xFF000000, 0xFF0000, 0xFF00);", "-\t\t\t\tdata = new ImageData(width, height, 32, palette, 4, srcData);", "-\t\t\t\tdata.bytesPerLine = stride;", "-\t\t\t\tint s = 3, a = 0;", "-\t\t\t\tbyte[] alphaData = new byte[width*height];", "-\t\t\t\tfor (int y=0; y<height; y++) {", "-\t\t\t\t\tfor (int x=0; x<width; x++) {", "-\t\t\t\t\t\talphaData[a++] = srcData[s];", "-\t\t\t\t\t\tsrcData[s] = 0;", "-\t\t\t\t\t\ts+=4;", "+\t\tif (gicon_info != 0) {", "+\t\t\tint /*long*/ pixbuf = OS.gtk_icon_info_load_icon(gicon_info, null);\t\t", "+\t\t\tif (pixbuf != 0) {", "+\t\t\t\tint stride = OS.gdk_pixbuf_get_rowstride(pixbuf);", "+\t\t\t\tint /*long*/ pixels = OS.gdk_pixbuf_get_pixels(pixbuf);", "+\t\t\t\tint height = OS.gdk_pixbuf_get_height(pixbuf);", "+\t\t\t\tint width = OS.gdk_pixbuf_get_width(pixbuf);", "+\t\t\t\tboolean hasAlpha = OS.gdk_pixbuf_get_has_alpha(pixbuf);", "+\t\t\t\tbyte[] srcData = new byte[stride * height];", "+\t\t\t\tOS.memmove(srcData, pixels, srcData.length);", "+\t\t\t\tOS.g_object_unref(pixbuf);", "+\t\t\t\tif (hasAlpha) {", "+\t\t\t\t\tPaletteData palette = new PaletteData(0xFF000000, 0xFF0000, 0xFF00);", "+\t\t\t\t\tdata = new ImageData(width, height, 32, palette, 4, srcData);", "+\t\t\t\t\tdata.bytesPerLine = stride;", "+\t\t\t\t\tint s = 3, a = 0;", "+\t\t\t\t\tbyte[] alphaData = new byte[width*height];", "+\t\t\t\t\tfor (int y=0; y<height; y++) {", "+\t\t\t\t\t\tfor (int x=0; x<width; x++) {", "+\t\t\t\t\t\t\talphaData[a++] = srcData[s];", "+\t\t\t\t\t\t\tsrcData[s] = 0;", "+\t\t\t\t\t\t\ts+=4;", "+\t\t\t\t\t\t}", "+\t\t\t\t\tdata.alphaData = alphaData;", "+\t\t\t\t} else {", "+\t\t\t\t\tPaletteData palette = new PaletteData(0xFF0000, 0xFF00, 0xFF);", "+\t\t\t\t\tdata = new ImageData(width, height, 24, palette, 4, srcData);", "+\t\t\t\t\tdata.bytesPerLine = stride;", "-\t\t\t\tdata.alphaData = alphaData;", "-\t\t\t} else {", "-\t\t\t\tPaletteData palette = new PaletteData(0xFF0000, 0xFF00, 0xFF);", "-\t\t\t\tdata = new ImageData(width, height, 24, palette, 4, srcData);", "-\t\t\t\tdata.bytesPerLine = stride;", "+\t\t\tOS.gtk_icon_info_free(gicon_info);", "-\t} catch (Exception e) {}", "+\t\tOS.g_object_unref(gicon);", "+\t}"]}], "num": 31898}