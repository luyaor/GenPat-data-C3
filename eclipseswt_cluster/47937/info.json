{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "50f91086e5fa9b1f56d7250efa69e946", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a2ea8f58d184812ab7c3181b31f0e06a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt.tools/JNI Generation/org/eclipse/swt/tools/internal/NativesGenerator.java", "commitBeforeChange": "2d914fcedcb0c63f85a01a949b658b18fdaca68c", "commitAfterChange": "b2a7bd8c826aba183c570104382c1d0f35dd8698", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": "  void generateFunctionCall(JNIMethod method, JNIParameter[] params, JNIType returnType, JNIType returnType64, boolean needsReturn)", "signatureAfterChange": "  void generateFunctionCall(JNIMethod method, JNIParameter[] params, JNIType returnType, JNIType returnType64, boolean needsReturn)", "diff": ["-\t\t\toutput(returnType.getTypeSignature2(!returnType.equals(returnType64)));", "+\t\t\tString returnCast = returnType.getTypeSignature2(!returnType.equals(returnType64));", "+\t\t\tif (name.equals(\"objc_msgSend_bool\") && returnCast.equals(\"jboolean\")) {", "+\t\t\t\treturnCast = \"BOOL\";", "+\t\t\t}", "+\t\t\toutput(returnCast);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5a6def959bfb62079591a17328227fb4", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt.tools/Mac Generation/org/eclipse/swt/tools/internal/DOMWriter.java", "commitBeforeChange": "936926b47d44649631dde16247bf24571f797179", "commitAfterChange": "a67a6385b683e09c0b625200174e2514ed2329d1", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": "\r\t\r\tpublic void print(Node node, int level)", "signatureAfterChange": "\r\t\r\tpublic void print(Node node, int level)", "diff": ["-/*******************************************************************************\r * Copyright (c) 2008 IBM Corporation and others.\r * All rights reserved. This program and the accompanying materials\r * are made available under the terms of the Eclipse Public License v1.0\r * which accompanies this distribution, and is available at\r * http://www.eclipse.org/legal/epl-v10.html\r *\r * Contributors:\r *     IBM Corporation - initial API and implementation\r *******************************************************************************/\rpackage org.eclipse.swt.tools.internal;\r\rimport java.io.PrintStream;\rimport java.util.Arrays;\rimport java.util.Comparator;\r\rimport org.w3c.dom.Attr;\rimport org.w3c.dom.Document;\rimport org.w3c.dom.NamedNodeMap;\rimport org.w3c.dom.Node;\rimport org.w3c.dom.NodeList;\r\rpublic class DOMWriter {\r\r\tstatic String ENCONDING = \"UTF8\";\r\tPrintStream out;\r\tString[] attributeFilter;\r\tString nodeFilter;\r\r\tpublic DOMWriter(PrintStream out) {\r\t\tthis.out = new PrintStream(out);\r\t}\r\r\tString nodeName(Node node) {\r\t\t// TODO use getLocalName()?\r\t\treturn node.getNodeName();\r\t}\r\t\r\tboolean filter(Attr attr) {\r\t\tif (attributeFilter == null) return false;\r\t\tString name = attr.getNodeName();\r\t\tfor (int i = 0; i < attributeFilter.length; i++) {\r\t\t\tif (name.matches(attributeFilter[i])) return false;\r\t\t}\r\t\treturn true;\r\t}\r\t\r\tvoid print(String str) {\r\t\tout.print(str);\r\t}\r\tvoid println() {\r\t\tout.println();\r\t}\r\r\tpublic void print(Node node) {\r\t\tprint(node, 0);\r\t}\r\t\r\tpublic void print(Node node, int level) {\r\t\tif (node == null)\r\t\t\treturn;\r\t\tint type = node.getNodeType();\r\t\tswitch (type) {\r\t\t\tcase Node.DOCUMENT_NODE: {\r\t\t\t\tprint(\"<?xml version=\\\"1.0\\\" encoding=\\\"\");\r\t\t\t\tprint(ENCONDING);\r\t\t\t\tprint(\"\\\"?>\");\r\t\t\t\tprintln();\r\t\t\t\tprint(((Document) node).getDocumentElement());\r\t\t\t\tbreak;\r\t\t\t}\r\t\t\tcase Node.ELEMENT_NODE: {\r\t\t\t\tAttr attrs[] = sort(node.getAttributes());\r\t\t\t\tboolean gen = false;\r\t\t\t\tfor (int i = 0; i < attrs.length && !gen; i++) {\r\t\t\t\t\tAttr attr = attrs[i];\r\t\t\t\t\tif (nodeName(attr).startsWith(nodeFilter)) gen = true;\r\t\t\t\t}\r\t\t\t\tif (!gen) break;\r\t\t\t\tfor (int i = 0; i < level; i++) print(\"\\t\");\r\t\t\t\tprint(\"<\");\r\t\t\t\tprint(nodeName(node));\r\t\t\t\tfor (int i = 0; i < attrs.length; i++) {\r\t\t\t\t\tAttr attr = attrs[i];\r\t\t\t\t\tif (filter(attr)) continue;\r\t\t\t\t\tprint(\" \");\r\t\t\t\t\tprint(nodeName(attr));\r\t\t\t\t\tprint(\"=\\\"\");\r\t\t\t\t\tprint(normalize(attr.getNodeValue()));\r\t\t\t\t\tprint(\"\\\"\");\r\t\t\t\t}\r\t\t\t\tprint(\">\");\r\t\t\t\tNodeList children = node.getChildNodes();\r\t\t\t\tint count = 0;\r\t\t\t\tif (children != null) {\r\t\t\t\t\tint len = children.getLength();\r\t\t\t\t\tfor (int i = 0; i < len; i++) {\r\t\t\t\t\t\tif (children.item(i).getNodeType() == Node.ELEMENT_NODE) count++;\r\t\t\t\t\t}\r\t\t\t\t\tif (count > 0) println();\r\t\t\t\t\tfor (int i = 0; i < len; i++) {\r\t\t\t\t\t\tprint(children.item(i), level + 1);\r\t\t\t\t\t}\r\t\t\t\t\tif (count > 0) {\r\t\t\t\t\t\tfor (int i = 0; i < level; i++) print(\"\\t\");\r\t\t\t\t\t}\r\t\t\t\t}\r\t\t\t\tprint(\"</\");\r\t\t\t\tprint(nodeName(node));\r\t\t\t\tprint(\">\");\r\t\t\t\tprintln();\r\t\t\t\tbreak;\r\t\t\t}\r\t\t}\r\t\tout.flush();\r\t}\r\r\tAttr[] sort(NamedNodeMap attrs) {\r\t\tif (attrs == null)\r\t\t\treturn new Attr[0];\r\t\tAttr result[] = new Attr[attrs.getLength()];\r\t\tfor (int i = 0; i < result.length; i++) {\r\t\t\tresult[i] = (Attr) attrs.item(i);\r\t\t}\r\t\tArrays.sort(result, new Comparator() {\r\t\t\tpublic int compare(Object arg0, Object arg1) {\r\t\t\t\treturn nodeName((Node) arg0).compareTo(nodeName((Node) arg1));\r\t\t\t}\r\t\t});\r\t\treturn result;\r\t}\r\r\tString normalize(String s) {\r\t\tif (s == null) return \"\";\r\t\tStringBuffer str = new StringBuffer();\r\t\tfor (int i = 0, length = s.length(); i < length; i++) {\r\t\t\tchar ch = s.charAt(i);\r\t\t\tswitch (ch) {\r\t\t\t\tcase '\"': str.append(\"\\\"\"); break;\r\t\t\t\tcase '\\r':\r\t\t\t\tcase '\\n':\r\t\t\t\t\t// FALL THROUGH\r\t\t\t\tdefault: str.append(ch);\r\t\t\t}\r\t\t}\r\t\treturn str.toString();\r\t}\r\t\r\tpublic void setNodeFilter(String filter) {\r\t\t\r\t\tnodeFilter = filter;\r\t}\r\t\r\tpublic void setAttributeFilter(String[] filter) {\r\t\tattributeFilter = filter;\r\t}\r}", "\\ No newline at end of file", "+/*******************************************************************************\r * Copyright (c) 2008 IBM Corporation and others.\r * All rights reserved. This program and the accompanying materials\r * are made available under the terms of the Eclipse Public License v1.0\r * which accompanies this distribution, and is available at\r * http://www.eclipse.org/legal/epl-v10.html\r *\r * Contributors:\r *     IBM Corporation - initial API and implementation\r *******************************************************************************/\rpackage org.eclipse.swt.tools.internal;\r\rimport java.io.PrintStream;\rimport java.util.Arrays;\rimport java.util.Comparator;\r\rimport org.w3c.dom.Attr;\rimport org.w3c.dom.Document;\rimport org.w3c.dom.NamedNodeMap;\rimport org.w3c.dom.Node;\rimport org.w3c.dom.NodeList;\r\rpublic class DOMWriter {\r\r\tstatic String ENCONDING = \"UTF8\";\r\tPrintStream out;\r\tString[] attributeFilter;\r\tString nodeFilter;\r\r\tpublic DOMWriter(PrintStream out) {\r\t\tthis.out = new PrintStream(out);\r\t}\r\r\tString nodeName(Node node) {\r\t\t// TODO use getLocalName()?\r\t\treturn node.getNodeName();\r\t}\r\t\r\tboolean filter(Attr attr) {\r\t\tif (attributeFilter == null) return false;\r\t\tString name = attr.getNodeName();\r\t\tfor (int i = 0; i < attributeFilter.length; i++) {\r\t\t\tif (name.matches(attributeFilter[i])) return false;\r\t\t}\r\t\treturn true;\r\t}\r\t\r\tvoid print(String str) {\r\t\tout.print(str);\r\t}\r\tvoid println() {\r\t\tout.println();\r\t}\r\r\tpublic void print(Node node) {\r\t\tprint(node, 0);\r\t}\r\t\r\tpublic void print(Node node, int level) {\r\t\tif (node == null)\r\t\t\treturn;\r\t\tint type = node.getNodeType();\r\t\tswitch (type) {\r\t\t\tcase Node.DOCUMENT_NODE: {\r\t\t\t\tprint(\"<?xml version=\\\"1.0\\\" encoding=\\\"\");\r\t\t\t\tprint(ENCONDING);\r\t\t\t\tprint(\"\\\"?>\");\r\t\t\t\tprintln();\r\t\t\t\tprint(((Document) node).getDocumentElement());\r\t\t\t\tbreak;\r\t\t\t}\r\t\t\tcase Node.ELEMENT_NODE: {\r\t\t\t\tAttr attrs[] = sort(node.getAttributes());\r\t\t\t\tString name = nodeName(node);\r\t\t\t\tboolean gen = name.equals(\"arg\") || name.equals(\"retval\");\r\t\t\t\tfor (int i = 0; i < attrs.length && !gen; i++) {\r\t\t\t\t\tAttr attr = attrs[i];\r\t\t\t\t\tif (nodeName(attr).startsWith(nodeFilter)) gen = true;\r\t\t\t\t}\r\t\t\t\tif (!gen) break;\r\t\t\t\tfor (int i = 0; i < level; i++) print(\"\\t\");\r\t\t\t\tprint(\"<\");\r\t\t\t\tprint(name);\r\t\t\t\tfor (int i = 0; i < attrs.length; i++) {\r\t\t\t\t\tAttr attr = attrs[i];\r\t\t\t\t\tif (filter(attr)) continue;\r\t\t\t\t\tprint(\" \");\r\t\t\t\t\tprint(nodeName(attr));\r\t\t\t\t\tprint(\"=\\\"\");\r\t\t\t\t\tprint(normalize(attr.getNodeValue()));\r\t\t\t\t\tprint(\"\\\"\");\r\t\t\t\t}\r\t\t\t\tprint(\">\");\r\t\t\t\tNodeList children = node.getChildNodes();\r\t\t\t\tint count = 0;\r\t\t\t\tif (children != null) {\r\t\t\t\t\tint len = children.getLength();\r\t\t\t\t\tfor (int i = 0; i < len; i++) {\r\t\t\t\t\t\tif (children.item(i).getNodeType() == Node.ELEMENT_NODE) count++;\r\t\t\t\t\t}\r\t\t\t\t\tif (count > 0) println();\r\t\t\t\t\tfor (int i = 0; i < len; i++) {\r\t\t\t\t\t\tprint(children.item(i), level + 1);\r\t\t\t\t\t}\r\t\t\t\t\tif (count > 0) {\r\t\t\t\t\t\tfor (int i = 0; i < level; i++) print(\"\\t\");\r\t\t\t\t\t}\r\t\t\t\t}\r\t\t\t\tprint(\"</\");\r\t\t\t\tprint(nodeName(node));\r\t\t\t\tprint(\">\");\r\t\t\t\tprintln();\r\t\t\t\tbreak;\r\t\t\t}\r\t\t}\r\t\tout.flush();\r\t}\r\r\tAttr[] sort(NamedNodeMap attrs) {\r\t\tif (attrs == null)\r\t\t\treturn new Attr[0];\r\t\tAttr result[] = new Attr[attrs.getLength()];\r\t\tfor (int i = 0; i < result.length; i++) {\r\t\t\tresult[i] = (Attr) attrs.item(i);\r\t\t}\r\t\tArrays.sort(result, new Comparator() {\r\t\t\tpublic int compare(Object arg0, Object arg1) {\r\t\t\t\treturn nodeName((Node) arg0).compareTo(nodeName((Node) arg1));\r\t\t\t}\r\t\t});\r\t\treturn result;\r\t}\r\r\tString normalize(String s) {\r\t\tif (s == null) return \"\";\r\t\tStringBuffer str = new StringBuffer();\r\t\tfor (int i = 0, length = s.length(); i < length; i++) {\r\t\t\tchar ch = s.charAt(i);\r\t\t\tswitch (ch) {\r\t\t\t\tcase '\"': str.append(\"\\\"\"); break;\r\t\t\t\tcase '\\r':\r\t\t\t\tcase '\\n':\r\t\t\t\t\t// FALL THROUGH\r\t\t\t\tdefault: str.append(ch);\r\t\t\t}\r\t\t}\r\t\treturn str.toString();\r\t}\r\t\r\tpublic void setNodeFilter(String filter) {\r\t\t\r\t\tnodeFilter = filter;\r\t}\r\t\r\tpublic void setAttributeFilter(String[] filter) {\r\t\tattributeFilter = filter;\r\t}\r}", "\\ No newline at end of file"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "235a8a944d26c6d0bd5f6ca240e9546c", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt.tools/JNI Generation/org/eclipse/swt/tools/internal/JNIGeneratorApp.java", "commitBeforeChange": "c9baca597732eba93412edfdda729834c82bd64e", "commitAfterChange": "c121bfa57942c896c00e3ff4112c06d496bc4869", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": "  void generateSWT_C()", "signatureAfterChange": "  void generateSWT_C()", "diff": ["-\t\tif (out.size() > 0) output(out.toByteArray(), outputDir + outputName + \".c\");", "+\t\tString extention = \".c\";", "+\t\tif (metaData.getMetaData(Class.forName(mainClass)).getFlag(\"cpp\")) {", "+\t\t\textention = \".cpp\";", "+\t\t}", "+\t\tif (out.size() > 0) output(out.toByteArray(), outputDir + outputName + extention);"]}], "num": 47937}