{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "31521dadad26f7566f48409c604c949b", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c3ca6b38c39f34de3c79681ec555eab3", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "c738133a2fdbe3d60fd9dfabbfd9e737153e1aa5", "commitAfterChange": "c9992cb98fd2a837c866ff6f32642b9e42588c7e", "methodNumberBeforeChange": 24, "methodNumberAfterChange": 24, "signatureBeforeChange": " public void drawText(String string, int x, int y, boolean isTransparent)", "signatureAfterChange": " public void drawText(String string, int x, int y, boolean isTransparent)", "diff": ["-\tif (handle == 0) SWT.error(SWT.ERROR_GRAPHIC_DISPOSED);", "-\tif (string == null) SWT.error(SWT.ERROR_NULL_ARGUMENT);", "-\tbyte[] buffer = Converter.wcsToMbcs(null, string, true);", "-\tbyte[] buffer1 = Converter.wcsToMbcs(null, \"Y\", true);", "-\tint fontHandle = _getGCFont();", "-\tint[] unused = new int[1];", "-\tint[] width = new int[1];", "-\tint[] ascent = new int[1];", "-\tint[] average_ascent = new int [1];", "-\tOS.gdk_string_extents(fontHandle, buffer, unused, unused, width, ascent, unused);", "-\tOS.gdk_string_extents(fontHandle, buffer1, unused, unused, unused, average_ascent, unused);", "-\tif (ascent[0]<average_ascent[0]) ascent[0] = average_ascent[0];", "-\tif (!isTransparent) {", "-\t\tint height = OS.gdk_string_height(fontHandle, buffer);", "-\t\tGdkGCValues values = new GdkGCValues();", "-\t\tOS.gdk_gc_get_values(handle, values);", "-\t\tGdkColor color = new GdkColor();", "-\t\tcolor.pixel = values.background_pixel;", "-\t\tcolor.red = values.background_red;", "-\t\tcolor.green = values.background_green;", "-\t\tcolor.blue = values.background_blue;", "-\t\tOS.gdk_gc_set_foreground(handle, color);", "-\t\tOS.gdk_draw_rectangle(data.drawable, handle, 1, x, y, width[0], height);", "-\t\tcolor.pixel = values.foreground_pixel;", "-\t\tcolor.red = values.foreground_red;", "-\t\tcolor.green = values.foreground_green;", "-\t\tcolor.blue = values.foreground_blue;", "-\t\tOS.gdk_gc_set_foreground(handle, color);", "-\t}", "-\tOS.gdk_draw_string(data.drawable, fontHandle, handle, x, y + ascent[0], buffer);", "+\tint flags = SWT.DRAW_DELIMITER | SWT.DRAW_TAB;", "+\tif (isTransparent) flags |= SWT.DRAW_TRANSPARENT;", "+\tdrawText(string, x, y, flags);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fd4fad65fcb3d3e48915b742572b6a8c", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "c738133a2fdbe3d60fd9dfabbfd9e737153e1aa5", "commitAfterChange": "c9992cb98fd2a837c866ff6f32642b9e42588c7e", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 22, "signatureBeforeChange": " public void drawString(String string, int x, int y, boolean isTransparent)", "signatureAfterChange": " public void drawString(String string, int x, int y, boolean isTransparent)", "diff": ["+\t//FIXME - need to avoid delimiter and tabs", "+\tint layout = data.layout;", "-\tbyte[] buffer1 = Converter.wcsToMbcs(null, \"Y\", true);", "-\tint[] unused = new int[1];", "-\tint[] width = new int[1];", "-\tint[] ascent = new int[1];", "-\tint[] average_ascent = new int [1];", "-\tint fontHandle = _getGCFont();", "-\tOS.gdk_string_extents(fontHandle, buffer, unused, unused, width, ascent, unused);", "-\tOS.gdk_string_extents(fontHandle, buffer1, unused, unused, unused, average_ascent, unused);", "-\tif (ascent[0]<average_ascent[0]) ascent[0] = average_ascent[0];", "-\tif (!isTransparent) {", "-\t\tint height = OS.gdk_string_height(fontHandle, buffer);", "-\t\tGdkGCValues values = new GdkGCValues();", "-\t\tOS.gdk_gc_get_values(handle, values);", "-\t\tGdkColor color = new GdkColor();", "-\t\tcolor.pixel = values.background_pixel;", "-\t\tcolor.red = values.background_red;", "-\t\tcolor.green = values.background_green;", "-\t\tcolor.blue = values.background_blue;", "-\t\tOS.gdk_gc_set_foreground(handle, color);", "-\t\tOS.gdk_draw_rectangle(data.drawable, handle, 1, x, y, width[0], height);", "-\t\tcolor.pixel = values.foreground_pixel;", "-\t\tcolor.red = values.foreground_red;", "-\t\tcolor.green = values.foreground_green;", "-\t\tcolor.blue = values.foreground_blue;", "-\t\tOS.gdk_gc_set_foreground(handle, color);", "-\t}", "-\tOS.gdk_draw_string(data.drawable, fontHandle, handle, x, y + ascent[0], buffer);", "+\tOS.pango_layout_set_text(layout, buffer, buffer.length - 1);", "+\tOS.gdk_draw_layout(data.drawable, handle, x, y, layout);"]}], "num": 20478}