{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a74cc08ae801cc9686685cd692c83cac", "detectedBy": ["DIFF_HIERARCHICAL", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5cbd4a49967a363f20d56e427e758209", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/FontDialog.java", "commitBeforeChange": "f6b0cb79e144a4b1239635be6215fd3b5682cba8", "commitAfterChange": "979617063880fb96af17f2e70d01ef24e3824845", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "  int fontProc (int nextHandler, int theEvent, int userData)", "signatureAfterChange": "  int fontProc (int nextHandler, int theEvent, int userData)", "diff": ["-\t\t\t\tOS.ATSUFindFontName (fontID [0], OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null);", "-\t\t\t\tbyte [] buffer = new byte [actualLength [0]];", "-\t\t\t\tOS.ATSUFindFontName (fontID [0], OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, buffer.length, buffer, actualLength, null);", "-\t\t\t\tString name = new String(buffer);", "+\t\t\t\tint platformCode = OS.kFontUnicodePlatform, encoding = OS.kCFStringEncodingUnicode;", "+\t\t\t\tif (OS.ATSUFindFontName (fontID [0], OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null) != OS.noErr) {", "+\t\t\t\t\tplatformCode = OS.kFontNoPlatformCode;", "+\t\t\t\t\tencoding = OS.kCFStringEncodingMacRoman;", "+\t\t\t\t\tOS.ATSUFindFontName (fontID [0], OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null);", "+\t\t\t\t}\t", "+\t\t\t\tbyte[] buffer = new byte[actualLength[0]];", "+\t\t\t\tOS.ATSUFindFontName (fontID [0], OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, buffer.length, buffer, actualLength, null);", "+\t\t\t\tString name = \"\";", "+\t\t\t\tint ptr = OS.CFStringCreateWithBytes (0, buffer, buffer.length, encoding, false);", "+\t\t\t\tif (ptr != 0) {", "+\t\t\t\t\tint length = OS.CFStringGetLength (ptr);", "+\t\t\t\t\tif (length != 0) {", "+\t\t\t\t\t\tchar[] chars = new char [length];", "+\t\t\t\t\t\tCFRange range = new CFRange ();", "+\t\t\t\t\t\trange.length = length;", "+\t\t\t\t\t\tOS.CFStringGetCharacters (ptr, range, chars);", "+\t\t\t\t\t\tname = new String (chars);", "+\t\t\t\t\t}", "+\t\t\t\t\tOS.CFRelease (ptr);", "+\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7be51b97c030c11c0663e99eeed03a56", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "f6b0cb79e144a4b1239635be6215fd3b5682cba8", "commitAfterChange": "979617063880fb96af17f2e70d01ef24e3824845", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " public FontData[] getFontData()", "signatureAfterChange": " public FontData[] getFontData()", "diff": ["-\tOS.ATSUFindFontName (handle, OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null);", "+\tint platformCode = OS.kFontUnicodePlatform, encoding = OS.kCFStringEncodingUnicode;", "+\tif (OS.ATSUFindFontName(handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null) != OS.noErr) {", "+\t\tplatformCode = OS.kFontNoPlatformCode;", "+\t\tencoding = OS.kCFStringEncodingMacRoman;", "+\t\tOS.ATSUFindFontName (handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null);", "+\t}\t", "-\tOS.ATSUFindFontName (handle, OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, buffer.length, buffer, actualLength, null);", "-\tString name = new String(buffer);", "+\tOS.ATSUFindFontName(handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, buffer.length, buffer, actualLength, null);", "+\tString name = \"\";", "+\tint ptr = OS.CFStringCreateWithBytes(0, buffer, buffer.length, encoding, false);", "+\tif (ptr != 0) {", "+\t\tint length = OS.CFStringGetLength(ptr);", "+\t\tif (length != 0) {", "+\t\t\tchar[] chars = new char[length];", "+\t\t\tCFRange range = new CFRange();", "+\t\t\trange.length = length;", "+\t\t\tOS.CFStringGetCharacters(ptr, range, chars);", "+\t\t\tname = new String(chars);", "+\t\t}", "+\t\tOS.CFRelease(ptr);", "+\t}"]}], "num": 42137}