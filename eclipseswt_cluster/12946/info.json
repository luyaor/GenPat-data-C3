{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "db3f993386a62f10f9fb610d5596f2a9", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c59e76de650c61b0d92af8bb33032c76", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Printing/gtk/org/eclipse/swt/printing/Printer.java", "commitBeforeChange": "3654966d37611f4d9d2c9f01b9ca8fa3554b426a", "commitAfterChange": "b2b34fbc2579012e9628a9fa709c082791d6ec37", "methodNumberBeforeChange": 31, "methodNumberAfterChange": 31, "signatureBeforeChange": " protected void init()", "signatureAfterChange": " protected void init()", "diff": ["+\tif (data.duplex != SWT.DEFAULT) {", "+\t\tint duplex = data.duplex == PrinterData.DUPLEX_LONG_EDGE ? OS.GTK_PRINT_DUPLEX_HORIZONTAL", "+\t\t\t: data.duplex == PrinterData.DUPLEX_SHORT_EDGE ? OS.GTK_PRINT_DUPLEX_VERTICAL", "+\t\t\t: OS.GTK_PRINT_DUPLEX_SIMPLEX;", "+\t\tOS.gtk_print_settings_set_duplex (settings, duplex);", "+\t\t/* ", "+\t\t * Bug in GTK.  The cups backend only looks at the value", "+\t\t * of the non-API field cups-Duplex in the print_settings.", "+\t\t * The fix is to manually set cups-Duplex to Tumble or NoTumble.", "+\t\t */", "+\t\tString cupsDuplexType = null;", "+\t\tif (duplex == OS.GTK_PRINT_DUPLEX_HORIZONTAL) cupsDuplexType = \"DuplexNoTumble\";", "+\t\telse if (duplex == OS.GTK_PRINT_DUPLEX_VERTICAL) cupsDuplexType = \"DuplexTumble\";", "+\t\tif (cupsDuplexType != null) {", "+\t\t\tbyte [] keyBuffer = Converter.wcsToMbcs (null, \"cups-Duplex\", true);", "+\t\t\tbyte [] valueBuffer = Converter.wcsToMbcs (null, cupsDuplexType, true);", "+\t\t\tOS.gtk_print_settings_set(settings, keyBuffer, valueBuffer);", "+\t\t}", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dd19d97ab0623af9755e017fc2942028", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Printing/cocoa/org/eclipse/swt/printing/PrintDialog.java", "commitBeforeChange": "3654966d37611f4d9d2c9f01b9ca8fa3554b426a", "commitAfterChange": "b2b34fbc2579012e9628a9fa709c082791d6ec37", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": " public PrinterData open()", "signatureAfterChange": " public PrinterData open()", "diff": ["-\tprintInfo.setOrientation(printerData.orientation == PrinterData.LANDSCAPE ? OS.NSLandscapeOrientation : OS.NSPortraitOrientation);", "-\tNSMutableDictionary dict = printInfo.dictionary();\t", "+\tif (printerData.duplex != SWT.DEFAULT) {", "+\t\tint /*long*/ settings = printInfo.PMPrintSettings();", "+\t\tint duplex = printerData.duplex == PrinterData.DUPLEX_SHORT_EDGE ? OS.kPMDuplexTumble", "+\t\t\t\t: printerData.duplex == PrinterData.DUPLEX_LONG_EDGE ? OS.kPMDuplexNoTumble", "+\t\t\t\t: OS.kPMDuplexNone;", "+\t\tOS.PMSetDuplex(settings, duplex);", "+\t}", "+\t/* Updating printInfo from PMPrintSettings overrides values in the printInfo dictionary. */", "+\tprintInfo.updateFromPMPrintSettings();", "+\tNSMutableDictionary dict = printInfo.dictionary();", "+\tdict.setValue(NSNumber.numberWithInt(printerData.orientation == PrinterData.LANDSCAPE ? OS.NSLandscapeOrientation : OS.NSPortraitOrientation), OS.NSPrintOrientation);", "-\t\tdata.orientation = printInfo.orientation() == OS.NSLandscapeOrientation ? PrinterData.LANDSCAPE : PrinterData.PORTRAIT;", "+\t\tdata.orientation = new NSNumber(dict.objectForKey(OS.NSPrintOrientation)).intValue() == OS.NSLandscapeOrientation ? PrinterData.LANDSCAPE : PrinterData.PORTRAIT;", "+\t\tint /*long*/ settings = printInfo.PMPrintSettings();", "+\t\tint outDuplexSetting[] = new int[1];", "+\t\tOS.PMGetDuplex(settings, outDuplexSetting);", "+\t\tdata.duplex = outDuplexSetting[0] == OS.kPMDuplexTumble ? PrinterData.DUPLEX_SHORT_EDGE", "+\t\t\t\t: outDuplexSetting[0] == OS.kPMDuplexNoTumble ? PrinterData.DUPLEX_LONG_EDGE", "+\t\t\t\t: PrinterData.DUPLEX_NONE;"]}], "num": 12946}