{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "df41d8e54c6fba62c6788f08b6e1916d", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0d6ee6d2157eba3c7665b042a0caa297", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "ce2f35c3f6b1d0b5778f68f011b1d8668d3c5c72", "commitAfterChange": "00bee382096a1807d86474fed7c933116a37eeb8", "methodNumberBeforeChange": 159, "methodNumberAfterChange": 175, "signatureBeforeChange": "\r void handlePaint(Event event)", "signatureAfterChange": "\r void handlePaint(Event event)", "diff": ["-\tdraw(event.x, event.y, event.width, event.height, event.gc, true);\r", "+\tint startLine = (event.y + verticalScrollOffset) / lineHeight;\r", "+\tint paintYFromTopLine = (startLine - topIndex) * lineHeight;\r", "+\tint topLineOffset = topIndex * lineHeight - verticalScrollOffset;\r", "+\tint startY = paintYFromTopLine + topLineOffset;\t// adjust y position for pixel based scrolling\r", "+\tint renderHeight = event.y + event.height - startY;\r", "+\tint paintY = 0;\r", "+\tint lineCount = content.getLineCount();\r", "+\tRectangle clientArea = getClientArea();\r", "+\tColor background = getBackground();\r", "+\tColor foreground = getForeground();\r", "+\tImage lineBuffer;\r", "+\tGC lineGC;\r", "+\t\t\r", "+\t// Check if there is work to do. clientArea.width should never be 0\r", "+\t// if we receive a paint event but we never want to try and create \r", "+\t// an Image with 0 width.\r", "+\tif (clientArea.width == 0 || event.height == 0) {\t\t\r", "+\t\treturn;\r", "+\t}\r", "+\tif (isSingleLine()) {\r", "+\t\tlineCount = 1;\r", "+\t\tif (startLine > 1) {\r", "+\t\t\tstartLine = 1;\r", "+\t\t}\r", "+\t}\r", "+\tlineBuffer = new Image(getDisplay(), clientArea.width, renderHeight);\r", "+\tlineGC = new GC(lineBuffer);\r", "+\tlineGC.setFont(event.gc.getFont());\r", "+\tlineGC.setForeground(foreground);\r", "+\tlineGC.setBackground(background);\r", "+\tfor (int i = startLine; paintY < renderHeight && i < lineCount; i++, paintY += lineHeight) {\r", "+\t\tString line = content.getLine(i);\r", "+\t\tdrawLine(line, i, paintY, lineGC, background, foreground, true);\r", "+\t}\r", "+\tif (paintY < renderHeight) {\r", "+\t\tlineGC.setBackground(background);\r", "+\t\tlineGC.setForeground(background);\r", "+\t\tlineGC.fillRectangle(0, paintY, clientArea.width, renderHeight - paintY);\r", "+\t}\r", "+\tevent.gc.drawImage(lineBuffer, 0, startY);\r", "+\tlineGC.dispose();\r", "+\tlineBuffer.dispose();\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "24faceb76da7549e1505fe75a111f1d6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "b2d1b28bdafb73ead9193c538dfcd04f6eaa6ede", "commitAfterChange": "c73348786abf15e490fc20d69d35d41b71bf2fe0", "methodNumberBeforeChange": 205, "methodNumberAfterChange": 205, "signatureBeforeChange": "\r void handlePaint(Event event)", "signatureAfterChange": "\r void handlePaint(Event event)", "diff": ["-\tint paintY = topMargin;\r", "+\tRectangle clientArea = getClientArea();\r", "+\t\r", "+\t// Check if there is work to do. clientArea.width should never be 0\r", "+\t// if we receive a paint event but we never want to try and create \r", "+\t// an Image with 0 width.\r", "+\tif (clientArea.width == 0 || event.height == 0) {\t\t\r", "+\t\treturn;\r", "+\t}\r", "+\tperformPaint(event.gc, startLine, startY, renderHeight);\t\r", "+}\t\r", "-\t// Check if there is work to do. clientArea.width should never be 0\r", "-\t// if we receive a paint event but we never want to try and create \r", "-\t// an Image with 0 width.\r", "-\tif (clientArea.width == 0 || event.height == 0) {\t\t\r", "-\tfont = event.gc.getFont();\r", "-\tlineBuffer = new Image(getDisplay(), clientArea.width, renderHeight);\r", "-\tlineGC = new GC(lineBuffer);\t\r", "-\tlineGC.setFont(font);\r", "-\tlineGC.setForeground(foreground);\r", "-\tlineGC.setBackground(background);\r", "-\tfor (int i = startLine; paintY < renderHeight && i < lineCount; i++, paintY += lineHeight) {\r", "-\t\tString line = content.getLine(i);\r", "-\t\trenderer.drawLine(line, i, paintY, lineGC, background, foreground, fontData, true);\r", "-\t}\r", "-\tif (paintY < renderHeight) {\r", "-\t\tlineGC.setForeground(background);\r", "-\t\tlineGC.fillRectangle(0, paintY, clientArea.width, renderHeight - paintY);\r", "-\tevent.gc.drawImage(lineBuffer, 0, startY);\r", "-\tlineGC.dispose();\r", "-\tlineBuffer.dispose();\r", "-\tevent.gc.setBackground(background);\r", "-\tevent.gc.fillRectangle(0, 0, clientArea.width, topMargin);\r", "-\tevent.gc.fillRectangle(0, 0, leftMargin, renderHeight);\t\r", "-\tevent.gc.fillRectangle(\r", "-\tevent.gc.fillRectangle(\r"]}], "num": 37818}