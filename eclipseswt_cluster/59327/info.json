{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "cb6063437b97cb447f61cba9b2bfe3b8", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4b660531db27fded56656c660f52b30e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Decorations.java", "commitBeforeChange": "a5aa19b74e4a92c24cdac1109fcadf73365d8fe2", "commitAfterChange": "9e03c17a82cd721f4edc09d79d09bb55f8613d1e", "methodNumberBeforeChange": 42, "methodNumberAfterChange": 41, "signatureBeforeChange": "\r public void setMenuBar (Menu menu)", "signatureAfterChange": "\r public void setMenuBar (Menu menu)", "diff": ["-\t\tboolean resize = menuBar != menu;\r", "+\t\t/*\r", "+\t\t* Note in WinCE PPC.  MenuBar is a separate popup window. If\r", "+\t\t* the Shell is full screen, resize its window to leave\r", "+\t\t* space for the MenuBar.\r", "+\t\t*/\r", "+\t\tboolean resize = (getMaximized() && menuBar != menu);\r", "-\t\t\t/*\r", "-\t\t\t* Because CommandBar_Destroy destroys the menu bar, it\r", "-\t\t\t* is necessary to move the current items into a new menu\r", "-\t\t\t* before it is called.\r", "-\t\t\t*/\r", "-\t\t\tint hMenu = OS.CreateMenu ();\r", "-\t\t\tif (!moveMenu (menuBar.handle, hMenu)) {\r", "-\t\t\t\terror (SWT.ERROR_CANNOT_SET_MENU);\r", "-\t\t\t}\r", "-\t\t\tmenuBar.handle = hMenu;\r", "-\t\t\tif (hwndCB != 0) OS.CommandBar_Destroy (hwndCB);\r", "+\t\t\tOS.CommandBar_Destroy (hwndCB);\r", "+\t\t\thwndTB = 0;\r", "-\t\t\thwndCB = OS.CommandBar_Create (OS.GetModuleHandle (null), handle, 1);\r", "-\t\t\tOS.CommandBar_InsertMenubarEx (hwndCB, 0, menuBar.handle, 0);\r", "+\t\t\tSHMENUBARINFO mbi = new SHMENUBARINFO ();\r", "+\t\t\tmbi.cbSize = mbi.sizeof;\r", "+\t\t\tmbi.hwndParent = handle;\r", "+\t\t\tmbi.dwFlags = 0;\r", "+\t\t\tmbi.nToolBarId = 100; /* as defined in .rc file */\r", "+\t\t\tmbi.hInstRes = OS.GetLibraryHandle ();\r", "+\t\t\tboolean res = OS.SHCreateMenuBar (mbi);\r", "+\t\t\thwndCB = mbi.hwndMB;\r", "+\r", "+\t\t\t/* Get ToolBar */\r", "+\t\t\tif (hwndCB != 0) hwndTB = OS.GetWindow (hwndCB, OS.GW_CHILD);\r", "+\t\t\t\t\t\t\r", "+\t\t\tif (hwndTB == 0) {\r", "+\t\t\t\t/* we can't use the menubar */\r", "+\t\t\t\tif (hwndCB != 0) OS.CommandBar_Destroy (hwndCB);\r", "+\t\t\t\treturn;\r", "+\t\t\t}\r", "+\t\t\t/* remove the menu item coming from the resource file */\r", "+\t\t\tOS.SendMessage (hwndTB, OS.TB_DELETEBUTTON, 0, 0);\r", "+\t\t\t\r", "+\t\t\t/* populate tool bar mapping menu items to tool items */\r", "+\t\t\tif (menuBar.getItemCount () > 0) {\r", "+\t\t\t\tMenuItem[] items = menuBar.getItems ();\r", "+\t\t\t\tTBBUTTON lpButton = new TBBUTTON ();\r", "+\t\t\t\tTBBUTTONINFO info = new TBBUTTONINFO ();\r", "+\t\t\t\tinfo.cbSize = TBBUTTONINFO.sizeof;\r", "+\t\t\t\tinfo.dwMask = OS.TBIF_TEXT;\r", "+\t\t\t\tfor (int i = 0; i < items.length; i++) {\r", "+\t\t\t\t\tMenuItem item = items[i];\r", "+\t\t\t\t\t/* insert item */\r", "+\t\t\t\t\tlpButton.idCommand = item.id;\r", "+\t\t\t\t\tlpButton.fsStyle = (byte) (OS.TBSTYLE_DROPDOWN | OS.TBSTYLE_AUTOSIZE | 0x80);\r", "+\t\t\t\t\tlpButton.fsState = (byte) OS.TBSTATE_ENABLED;\r", "+\t\t\t\t\tlpButton.iBitmap = OS.I_IMAGENONE;\r", "+\t\t\t\t\tif ((item.style & SWT.SEPARATOR) != 0) {\r", "+\t\t\t\t\t\tlpButton.fsStyle = (byte) OS.BTNS_SEP;\r", "+\t\t\t\t\t}\r", "+\t\t\t\t\tOS.SendMessage (hwndTB, OS.TB_INSERTBUTTON, i, lpButton);\r", "+\r", "+\t\t\t\t\tif ((item.style & SWT.SEPARATOR) == 0) {\r", "+\t\t\t\t\t\t/* set text */\r", "+\t\t\t\t\t\tString string = item.getText();\r", "+\t\t\t\t\t\tint hHeap = OS.GetProcessHeap ();\r", "+\t\t\t\t\t\tTCHAR buffer = new TCHAR (0, string, true);\r", "+\t\t\t\t\t\tint byteCount = buffer.length () * TCHAR.sizeof;\r", "+\t\t\t\t\t\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);\r", "+\t\t\t\t\t\tOS.MoveMemory (pszText, buffer, byteCount);\r", "+\t\t\t\t\t\tinfo.pszText = pszText;\r", "+\t\t\t\t\t\tOS.SendMessage (hwndTB, OS.TB_SETBUTTONINFO, item.id, info);\r", "+\t\t\t\t\t\tif (pszText != 0) OS.HeapFree (hHeap, 0, pszText);\r", "+\r", "+\t\t\t\t\t\t/* set state */\r", "+\t\t\t\t\t\tif (!item.isEnabled()) {\r", "+\t\t\t\t\t\t\tint fsState = 0;\r", "+\t\t\t\t\t\t\tOS.SendMessage (hwndTB, OS.TB_SETSTATE, item.id, fsState);\r", "+\t\t\t\t\t\t}\r", "+\r", "+\t\t\t\t\t\t/* set menu */\r", "+\t\t\t\t\t\tMenu menu2 = item.menu;\r", "+\t\t\t\t\t\tif (menu2 != null) {\r", "+\t\t\t\t\t\t\tOS.SendMessage (hwndCB, OS.SHCMBM_SETSUBMENU, item.id, menu2.handle);\r", "+\t\t\t\t\t\t}\r", "+\t\t\t\t\t}\r", "+\t\t\t\t}\r", "+\t\t\t}\r", "-\t\tif (resize) {\r", "-\t\t\tsendEvent (SWT.Resize);\r", "-\t\t\tlayout (false);\r", "-\t\t}\r", "+\t\tif (resize) setMaximized (true);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1afe86c8b3422d3c94c95da203914e8d", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "8848a0fd117061e467d06956f0abd85274a9ca0b", "commitAfterChange": "9da2fac94d15a6c7551e1557116a24207f321bd6", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 12, "signatureBeforeChange": "\r \r void createHandle ()", "signatureAfterChange": "\r \r void createHandle ()", "diff": ["+\tif (handle != 0) return;\r", "-\t\t\tmbi.nToolBarId = ID_PPCBAR;\r", "+\t\t\tmbi.nToolBarId = ID_PPC;\r", "+\t\t\treturn;\r", "+\t\t}\r", "+\t\t/*\r", "+\t\t* Note in WinCE SmartPhone.  The SoftBar contains only 2 items.\r", "+\t\t* An item can either be a menu or a button. \r", "+\t\t* SWT.BAR: creates a SoftBar with 2 menus\r", "+\t\t* SWT.BAR | SWT.BUTTON1: creates a SoftBar with 1 button\r", "+\t\t*    for button1, and a menu for button2\r", "+\t\t* SWT.BAR | SWT.BUTTON1 | SWT.BUTTON2: creates a SoftBar with\r", "+\t\t*    2 buttons\r", "+\t\t*/\r", "+\t\tif (OS.IsSP) {\r", "+\t\t\t/* Determine type of menubar */\r", "+\t\t\tint nToolBarId;\r", "+\t\t\tif ((style & SWT.BUTTON1) != 0) {\r", "+\t\t\t\tnToolBarId = ((style & SWT.BUTTON2) != 0) ? ID_SPBB : ID_SPBM;\r", "+\t\t\t} else {\r", "+\t\t\t\tnToolBarId = ((style & SWT.BUTTON2) != 0) ? ID_SPMB : ID_SPMM;\r", "+\t\t\t}\r", "+\t\t\t\r", "+\t\t\t/* Create SHMENUBAR */\r", "+\t\t\tSHMENUBARINFO mbi = new SHMENUBARINFO ();\r", "+\t\t\tmbi.cbSize = mbi.sizeof;\r", "+\t\t\tmbi.hwndParent = parent.handle;\r", "+\t\t\tmbi.dwFlags = OS.SHCMBF_HIDDEN;\r", "+\t\t\tmbi.nToolBarId = nToolBarId; /* as defined in .rc file */\r", "+\t\t\tmbi.hInstRes = OS.GetLibraryHandle ();\r", "+\t\t\tif (!OS.SHCreateMenuBar (mbi)) error (SWT.ERROR_NO_HANDLES);\r", "+\t\t\thwndCB = mbi.hwndMB;\r", "+\t\t\t\r", "+\t\t\t/*\r", "+\t\t\t* Feature on WinCE SmartPhone.  The SHCMBF_HIDDEN flag causes the\r", "+\t\t\t* SHMENUBAR to not be drawn. However the keyboard events still go\r", "+\t\t\t* through it.  The workaround is to also hide the SHMENUBAR with\r", "+\t\t\t* ShowWindow ().\r", "+\t\t\t*/\r", "+\t\t\tOS.ShowWindow (hwndCB, OS.SW_HIDE);\r", "+\t\t\t\r", "+\t\t\tTBBUTTONINFO info = new TBBUTTONINFO ();\r", "+\t\t\tinfo.cbSize = TBBUTTONINFO.sizeof;\r", "+\t\t\tinfo.dwMask = OS.TBIF_COMMAND;\r", "+\t\t\tMenuItem item;\r", "+\t\t\t\r", "+\t\t\t/* Set first item */\r", "+\t\t\tif (nToolBarId == ID_SPMM || nToolBarId == ID_SPMB) {\r", "+\t\t\t\tint hMenu = OS.SendMessage (hwndCB, OS.SHCMBM_GETSUBMENU, 0, ID_SPSOFTKEY0);\r", "+\t\t\t\t/* Remove the item from the resource file */\r", "+\t\t\t\tOS.RemoveMenu (hMenu, 0, OS.MF_BYPOSITION);\r", "+\t\t\t\tMenu menu = new Menu (parent, SWT.DROP_DOWN, hMenu);\r", "+\t\t\t\titem = new MenuItem (this, menu, SWT.CASCADE, 0);\r", "+\t\t\t} else {\r", "+\t\t\t\titem = new MenuItem (this, null, SWT.PUSH, 0);\r", "+\t\t\t}\r", "+\t\t\tinfo.idCommand = id0 = item.id;\r", "+\t\t\tOS.SendMessage (hwndCB, OS.TB_SETBUTTONINFO, ID_SPSOFTKEY0, info);\t\r", "+\r", "+\t\t\t/* Set second item */\r", "+\t\t\tif (nToolBarId == ID_SPMM || nToolBarId == ID_SPBM) {\r", "+\t\t\t\tint hMenu = OS.SendMessage (hwndCB, OS.SHCMBM_GETSUBMENU, 0, ID_SPSOFTKEY1);\r", "+\t\t\t\tOS.RemoveMenu (hMenu, 0, OS.MF_BYPOSITION);\r", "+\t\t\t\tMenu menu = new Menu (parent, SWT.DROP_DOWN, hMenu);\r", "+\t\t\t\titem = new MenuItem (this, menu, SWT.CASCADE, 1);\r", "+\t\t\t} else {\r", "+\t\t\t\titem = new MenuItem (this, null, SWT.PUSH, 1);\r", "+\t\t\t}\r", "+\t\t\tinfo.idCommand = id1 = item.id;\r", "+\t\t\tOS.SendMessage (hwndCB, OS.TB_SETBUTTONINFO, ID_SPSOFTKEY1, info);\r"]}], "num": 59327}