{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "5e786284a15ecbbfb540f544de767459", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4b99bb141332407f123b19bb2ba177f2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText2.java", "commitBeforeChange": "0eca40a26667c3712617b5dd23e67af76bcbab4d", "commitAfterChange": "c345d69dc06c2a69d5f698a12d1c7890b32841ad", "methodNumberBeforeChange": 88, "methodNumberAfterChange": 90, "signatureBeforeChange": " int doLineUp()", "signatureAfterChange": " int doLineUp()", "diff": ["+\tif (isSingleLine()) {", "+\t\treturn 0;", "+\t}", "-\tif (caretLine > 0) {", "+\tboolean paragraphUp = true;", "+\tif (wordWrap) {", "+\t\tString line = content.getLine(caretLine);", "+\t\tint lineOffset = content.getOffsetAtLine(caretLine);", "+\t\tTextLayout layout = renderer.getTextLayout(line, lineOffset);", "+\t\tif (layout.getLineCount() > 0) {", "+\t\t\tPoint pos = getCaret().getLocation();", "+\t\t\tpos.x += horizontalScrollOffset - rightMargin;", "+\t\t\tpos.y -= getLinePixel(caretLine) + topMargin;", "+\t\t\tint offset = layout.getOffset(pos, null);", "+\t\t\tint lineInParagraph = layout.getLineIndex(offset);", "+\t\t\tif (lineInParagraph > 0) {", "+\t\t\t\tparagraphUp = false;", "+\t\t\t\tpos.y -= layout.getLineBounds(lineInParagraph).height;", "+\t\t\t\tcaretOffset = lineOffset + layout.getOffset(pos, null);", "+\t\t\t}", "+\t\t}", "+\t\trenderer.disposeTextLayout(layout);", "+\t}", "+\tif (paragraphUp && caretLine > 0) {", "-\t\tcaretOffset = getOffsetAtMouseLocation(columnX, caretLine);", "+\t\tString line = content.getLine(caretLine);", "+\t\tint lineOffset = content.getOffsetAtLine(caretLine);", "+\t\tTextLayout layout = renderer.getTextLayout(line, lineOffset);", "+\t\tint x = columnX + horizontalScrollOffset - leftMargin;", "+\t\tint y = layout.getBounds().height - 1;", "+\t\tcaretOffset = lineOffset + layout.getOffset(x, y, null);", "+\t\trenderer.disposeTextLayout(layout);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5222fb41bd91f953b0987f426a97575f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText2.java", "commitBeforeChange": "0eca40a26667c3712617b5dd23e67af76bcbab4d", "commitAfterChange": "c345d69dc06c2a69d5f698a12d1c7890b32841ad", "methodNumberBeforeChange": 85, "methodNumberAfterChange": 87, "signatureBeforeChange": " int doLineDown()", "signatureAfterChange": " int doLineDown()", "diff": ["-\t// allow line down action only if receiver is not in single line mode.", "-\t// fixes 4820.", "-\tint caretLine = getCaretLine(); ", "-\tif (caretLine < content.getLineCount() - 1) {", "+\tint caretLine = getCaretLine();", "+\tboolean paragraphDown = true;", "+\tif (wordWrap) {", "+\t\tString line = content.getLine(caretLine);", "+\t\tint lineOffset = content.getOffsetAtLine(caretLine);", "+\t\tTextLayout layout = renderer.getTextLayout(line, lineOffset);", "+\t\tif (layout.getLineCount() > 0) {", "+\t\t\tPoint pos = getCaret().getLocation();", "+\t\t\tpos.x += horizontalScrollOffset - rightMargin;", "+\t\t\tpos.y -= getLinePixel(caretLine) + topMargin;", "+\t\t\tint offset = layout.getOffset(pos, null);", "+\t\t\tint lineInParagraph = layout.getLineIndex(offset);", "+\t\t\tif (lineInParagraph < layout.getLineCount() - 1) {", "+\t\t\t\tparagraphDown = false;", "+\t\t\t\tpos.y += layout.getLineBounds(lineInParagraph).height;", "+\t\t\t\tcaretOffset = lineOffset + layout.getOffset(pos, null);", "+\t\t\t}", "+\t\t}", "+\t\trenderer.disposeTextLayout(layout);", "+\t}", "+\tif (paragraphDown && caretLine < content.getLineCount() - 1) {", "-\t\tcaretOffset = getOffsetAtMouseLocation(columnX, caretLine);", "+\t\tString line = content.getLine(caretLine);", "+\t\tint lineOffset = content.getOffsetAtLine(caretLine);", "+\t\tTextLayout layout = renderer.getTextLayout(line, lineOffset);", "+\t\tint x = columnX + horizontalScrollOffset - leftMargin;", "+\t\tint y = 1;", "+\t\tcaretOffset = lineOffset + layout.getOffset(x, y, null);", "+\t\trenderer.disposeTextLayout(layout);"]}], "num": 44916}