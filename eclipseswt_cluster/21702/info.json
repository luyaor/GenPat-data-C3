{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e2733d905a43d22032be09cdc0334ef4", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "767f46722ebd478b901c09f4da4aaf6b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "383485f9396fa5b3ecc9c6104e597ef309bf8b65", "commitAfterChange": "d23fba0b8199ef3dc1f513e3ea053b6773edb46c", "methodNumberBeforeChange": 52, "methodNumberAfterChange": 52, "signatureBeforeChange": "  LRESULT sendMouseDownEvent (int type, int button, int msg, int wParam, int lParam)", "signatureAfterChange": "  LRESULT sendMouseDownEvent (int type, int button, int msg, int wParam, int lParam)", "diff": ["-\t* Feature in Windows.  When a table item is reselected,", "-\t* the table does not issue a WM_NOTIFY when the item", "-\t* state has not changed.  This is inconsistent with", "-\t* the list widget and other widgets in Windows.  The", "-\t* fix is to detect the case when an item is reselected", "-\t* and issue the notification.", "+\t* Feature in Windows.  When a table item is reselected", "+\t* in a single-select table, Windows does not issue a", "+\t* WM_NOTIFY because the item state has not changed.", "+\t* This is strictly correct but is inconsistent with the", "+\t* list widget and other widgets in Windows.  The fix is", "+\t* to detect the case when an item is reselected and issue", "+\t* the notification.", "-\tint count = OS.SendMessage (handle, OS.LVM_GETSELECTEDCOUNT, 0, 0);", "-\tif (count == 1 && pinfo.iItem != -1) {", "-\t\tLVITEM lvItem = new LVITEM ();", "-\t\tlvItem.mask = OS.LVIF_STATE;", "-\t\tlvItem.stateMask = OS.LVIS_SELECTED;", "-\t\tlvItem.iItem = pinfo.iItem;", "-\t\tOS.SendMessage (handle, OS.LVM_GETITEM, 0, lvItem);", "-\t\twasSelected = (lvItem.state & OS.LVIS_SELECTED) != 0;", "-\t\tif (wasSelected) ignoreSelect = true;", "+\tif ((style & SWT.SINGLE) != 0) {", "+\t\tint count = OS.SendMessage (handle, OS.LVM_GETSELECTEDCOUNT, 0, 0);", "+\t\tif (count == 1 && pinfo.iItem != -1) {", "+\t\t\tLVITEM lvItem = new LVITEM ();", "+\t\t\tlvItem.mask = OS.LVIF_STATE;", "+\t\t\tlvItem.stateMask = OS.LVIS_SELECTED;", "+\t\t\tlvItem.iItem = pinfo.iItem;", "+\t\t\tOS.SendMessage (handle, OS.LVM_GETITEM, 0, lvItem);", "+\t\t\twasSelected = (lvItem.state & OS.LVIS_SELECTED) != 0;", "+\t\t\tif (wasSelected) ignoreSelect = true;", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ad01286d8bb5090a47bde9c4b466f0f2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "11bccded3c22e8e6857213e8db2ccad6f605ba46", "commitAfterChange": "79662ee8cc3f613263cefb586b48c6b804026f52", "methodNumberBeforeChange": 52, "methodNumberAfterChange": 52, "signatureBeforeChange": "  LRESULT sendMouseDownEvent (int type, int button, int msg, int wParam, int lParam)", "signatureAfterChange": "  LRESULT sendMouseDownEvent (int type, int button, int msg, int wParam, int lParam)", "diff": ["+\t* ", "+\t* NOTE: This code runs for multi-select as well, ignoring", "+\t* the selection that is issed from WM_NOTIFY.", "-\tif ((style & SWT.SINGLE) != 0) {", "-\t\tint count = OS.SendMessage (handle, OS.LVM_GETSELECTEDCOUNT, 0, 0);", "-\t\tif (count == 1 && pinfo.iItem != -1) {", "-\t\t\tLVITEM lvItem = new LVITEM ();", "-\t\t\tlvItem.mask = OS.LVIF_STATE;", "-\t\t\tlvItem.stateMask = OS.LVIS_SELECTED;", "-\t\t\tlvItem.iItem = pinfo.iItem;", "-\t\t\tOS.SendMessage (handle, OS.LVM_GETITEM, 0, lvItem);", "-\t\t\twasSelected = (lvItem.state & OS.LVIS_SELECTED) != 0;", "-\t\t\tif (wasSelected) ignoreSelect = true;", "-\t\t}", "+\tint count = OS.SendMessage (handle, OS.LVM_GETSELECTEDCOUNT, 0, 0);", "+\tif (count == 1 && pinfo.iItem != -1) {", "+\t\tLVITEM lvItem = new LVITEM ();", "+\t\tlvItem.mask = OS.LVIF_STATE;", "+\t\tlvItem.stateMask = OS.LVIS_SELECTED;", "+\t\tlvItem.iItem = pinfo.iItem;", "+\t\tOS.SendMessage (handle, OS.LVM_GETITEM, 0, lvItem);", "+\t\twasSelected = (lvItem.state & OS.LVIS_SELECTED) != 0;", "+\t\tif (wasSelected) ignoreSelect = true;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e83d46445ca7f11cadc4481d95c047d0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "418189f52bdfb218fb6efa8e48de290592d75479", "commitAfterChange": "8ac319315f02f056087670898446ba12d963ef7a", "methodNumberBeforeChange": 52, "methodNumberAfterChange": 52, "signatureBeforeChange": "\r \r LRESULT sendMouseDownEvent (int type, int button, int msg, int wParam, int lParam)", "signatureAfterChange": "\r \r LRESULT sendMouseDownEvent (int type, int button, int msg, int wParam, int lParam)", "diff": ["-\t* Feature in Windows.  In tables that have the style\r", "-\t* LVS_SINGLESEL, when a table item is reselected, the\r", "-\t* table does not issue a WM_NOTIFY because the item\r", "+\t* Feature in Windows.  When a table item is reselected,\r", "+\t* the table does not issue a WM_NOTIFY when the item\r", "-\tint oldState = 0;\r", "-\tif ((style & SWT.SINGLE) != 0 && pinfo.iItem != -1) {\r", "+\tboolean wasSelected = false;\r", "+\tint count = OS.SendMessage (handle, OS.LVM_GETSELECTEDCOUNT, 0, 0);\r", "+\tif (count == 1 && pinfo.iItem != -1) {\r", "-\t\toldState = lvItem.state;\r", "+\t\twasSelected = (lvItem.state & OS.LVIS_SELECTED) != 0;\r", "+\t\tif (wasSelected) ignoreSelect = true;\r", "-\tif ((style & SWT.SINGLE) != 0 && pinfo.iItem != -1) {\r", "-\t\tif ((oldState & OS.LVIS_SELECTED) != 0) {\r", "-\t\t\tLVITEM lvItem = new LVITEM ();\r", "-\t\t\tlvItem.mask = OS.LVIF_STATE;\r", "-\t\t\tlvItem.stateMask = OS.LVIS_SELECTED;\r", "-\t\t\tlvItem.iItem = pinfo.iItem;\r", "-\t\t\tOS.SendMessage (handle, OS.LVM_GETITEM, 0, lvItem);\r", "-\t\t\tint newState = lvItem.state;\r", "-\t\t\tif ((newState & OS.LVIS_SELECTED) != 0) {\r", "-\t\t\t\tEvent event = new Event ();\r", "-\t\t\t\tevent.item = items [pinfo.iItem];\r", "-\t\t\t\tpostEvent (SWT.Selection, event);\r", "-\t\t\t}\r", "-\t\t}\r", "+\tif (wasSelected) {\r", "+\t\tignoreSelect = false;\r", "+\t\tEvent event = new Event ();\r", "+\t\tevent.item = items [pinfo.iItem];\r", "+\t\tpostEvent (SWT.Selection, event);\r"]}], "num": 21702}