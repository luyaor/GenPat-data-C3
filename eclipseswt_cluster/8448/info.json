{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "55c475a5e40a65efc22eea4568e13fa2", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ac70dfb18229f1fa80fe9c26b00b12b2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "28cf6a9552377ae12dd9f5d22390d86b3a3c6dee", "commitAfterChange": "07018574da4431b8a1576f407aaf63296b28adaf", "methodNumberBeforeChange": 30, "methodNumberAfterChange": 30, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": " public void setText (String string)", "diff": ["-\tint pszText;", "+\tint pszText = 0;", "-\t\t/* Use the character encoding for the default locale */", "-\t\tTCHAR buffer = new TCHAR (0, string, true);", "-\t\tint byteCount = buffer.length () * TCHAR.sizeof;", "-\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "-\t\tOS.MoveMemory (pszText, buffer, byteCount);\t", "-\t\tint hMenu = parent.handle;", "-\t\tinfo.fMask = OS.MIIM_TYPE;", "-\t\tinfo.fType = widgetStyle ();", "-\t\tinfo.dwTypeData = pszText;", "-\t\tsuccess = OS.SetMenuItemInfo (hMenu, id, false, info);", "+\t\tint hMenu = parent.handle;", "+\t\t", "+\t\tboolean hasBitmap = false;", "-\t\t\tif (image != null) {", "+\t\t\tinfo.fMask = OS.MIIM_BITMAP;", "+\t\t\tOS.GetMenuItemInfo (hMenu, id, false, info);", "+\t\t\thasBitmap = info.hbmpItem != 0;", "+\t\t}", "+\t\t", "+\t\t/* Use the character encoding for the default locale */", "+\t\tTCHAR buffer = new TCHAR (0, string, true);", "+\t\tint byteCount = buffer.length () * TCHAR.sizeof;", "+\t\tpszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "+\t\tOS.MoveMemory (pszText, buffer, byteCount);\t", "+\t\tinfo.fMask = OS.MIIM_TYPE;", "+\t\tinfo.fType = widgetStyle ();", "+\t\tinfo.dwTypeData = pszText;", "+\t\tsuccess = OS.SetMenuItemInfo (hMenu, id, false, info);", "+", "+\t\t/*", "+\t\t* Restore the bitmap that was removed to work around a problem", "+\t\t* in GetMenuItemInfo() and menu items that have bitmaps set with", "+\t\t* MIIM_BITMAP.", "+\t\t*/", "+\t\tif (!OS.IsWinCE && (OS.WIN32_MAJOR << 16 | OS.WIN32_MINOR) >= (4 << 16 | 10)) {", "+\t\t\tif (hasBitmap) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7dd7a023ba9b9f64c9cc23efe281cbec", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "31a262c707ffe0a0ed0cbf6446bed508771db3b0", "commitAfterChange": "8a1b7547e8e6e50ca940d0b15e69549a1b12424a", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": "\r \r public void setText (String string)", "signatureAfterChange": "\r \r public void setText (String string)", "diff": ["-\t\t\t* is a sequence '&&'.  \r", "-\t\t\t* The workaround is to remove all '&' in the string. \r", "+\t\t\t* is a sequence '&&').  The fix is to remove all '&' from\r", "+\t\t\t* the string. \r", "-\t\t\tint length = string.length();\r", "-\t\t\tchar[] text = new char[length];\r", "-\t\t\tstring.getChars(0, length, text, 0);\r", "+\t\t\tint length = string.length ();\r", "+\t\t\tchar[] text = new char [length];\r", "+\t\t\tstring.getChars( 0, length, text, 0);\r", "-\t\t\tfor (i = 0; i < length; i++) {\r", "-\t\t\t\tif (text[i] != '&') text[j++] = text[i];\r", "+\t\t\tfor (i=0; i<length; i++) {\r", "+\t\t\t\tif (text[i] != '&') text [j++] = text [i];\r", "-\t\t\tif (j < i) string = new String(text, 0, j);\r", "+\t\t\tif (j < i) string = new String (text, 0, j);\r", "+\t/*\r", "+\t* Bug in Windows 2000.  For some reason, when MIIM_TYPE is set\r", "+\t* on a menu item that also has MIIM_BITMAP, the MIIM_TYPE clears\r", "+\t* the MIIM_BITMAP style.  The fix is to reset both MIIM_BITMAP.\r", "+\t* Note, this does not happen on Windows 98.\r", "+\t*/\r", "+\tif (!OS.IsWinCE) {\r", "+\t\tif ((OS.WIN32_MAJOR << 16 | OS.WIN32_MINOR) >= (4 << 16 | 10)) {\r", "+\t\t\tif (image != null) {\r", "+\t\t\t\tinfo.fMask = OS.MIIM_BITMAP;\r", "+\t\t\t\tinfo.hbmpItem = OS.HBMMENU_CALLBACK;\r", "+\t\t\t\tsuccess = OS.SetMenuItemInfo (hMenu, id, false, info);\r", "+\t\t\t}\r", "+\t\t}\r", "+\t}\r", "-\t\t/* set text on corresponding tool item */\r"]}], "num": 8448}