{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "39e49d45e0c7c351a7a76e11a5687a89", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7a88b2808dbf25f23d5ac98a6837583a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "5544ce1d748561f71c4f1d1997c431f82e5c4c86", "commitAfterChange": "24e0049851c0d0a09cb9f25e5892d112e2936fed", "methodNumberBeforeChange": 277, "methodNumberAfterChange": 268, "signatureBeforeChange": " void setBidiCaretLocation(StyledTextBidi bidi)", "signatureAfterChange": " void setCaretImage(int direction)", "diff": ["+void setCaretImage(int direction) {", "+\tboolean updateImage = true;", "+\tImage caretImage = caret.getImage();", "+\tif (caretImage != null) {", "+\t\tupdateImage = caretImage.equals(leftCaretBitmap) || caretImage.equals(rightCaretBitmap);", "+\t}", "+\t", "+\t//workaround bug#54922 ", "+\tif (updateImage) {", "+\t\tif ((leftCaretBitmap != null && leftCaretBitmap.isDisposed()) ||", "+\t\t\t(rightCaretBitmap != null && rightCaretBitmap.isDisposed())) {", "+\t\t\tcreateCaretBitmaps();", "+\t\t}", "+\t}", "+\t", "+\t\tif (updateImage) caret.setImage(null);", "+\t}", "+\telse", "+\t\tif (updateImage) caret.setImage(leftCaretBitmap);", "+\t\t//TODO API needed", "+\t\tBidiUtil.setKeyboardLanguage(BidiUtil.KEYBOARD_NON_BIDI);", "+\t}", "+\telse", "- */", "-void setBidiCaretLocation(StyledTextBidi bidi) {", "-\tint caretLine = getCaretLine();", "-\t", "-\tsetBidiCaretLocation(bidi, caretLine);", "-}", "+\t\tif (updateImage) caret.setImage(rightCaretBitmap);", "+\t\t//TODO API needed", "+\t\tBidiUtil.setKeyboardLanguage(BidiUtil.KEYBOARD_BIDI);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2e2b9f7588c57ea682f4dd113670b854", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "5af866130b1781f4a201c60b77b83f0df2bbeea9", "commitAfterChange": "28542bd947cacdfa2528f9d49d01fbed334d6cf5", "methodNumberBeforeChange": 77, "methodNumberAfterChange": 258, "signatureBeforeChange": "\r void createBidiCaret()", "signatureAfterChange": "\r void setBidiCaretDirection()", "diff": ["- */\r", "-void createBidiCaret() {\r", "-\tCaret caret = getCaret();\r", "-\tif (caret == null) {\r", "-\t\tcaret = new Caret(this, SWT.NULL);\t\t\t\r", "-\t}\r", "-\tint direction = StyledTextBidi.getKeyboardLanguageDirection();\r", "-\tif (direction == caretDirection) {\r", "-\t\treturn;\r", "-\t}\r", "-\tcaretDirection = direction;\r", "-\tif (caretDirection == SWT.LEFT) {\r", "-\t\tcaret.setImage(leftCaretBitmap);\t\t\t\r", "-\t} \r", "-\telse \r", "-\tif (caretDirection == SWT.RIGHT) {\r", "-\t\tcaret.setImage(rightCaretBitmap);\t\t\t\r", "-\t}\t\r", "+ */\r", "+void setBidiCaretDirection() {\r", "+\tCaret caret = getCaret();\r", "+\tint direction = StyledTextBidi.getKeyboardLanguageDirection();\r", "+\t\r", "+\tif (caret == null || direction == caretDirection) {\r", "+\t\treturn;\r", "+\t}\r", "+\tcaretDirection = direction;\r", "+\tif (caretDirection == SWT.LEFT) {\r", "+\t\tcaret.setImage(leftCaretBitmap);\t\t\t\r", "+\t} \r", "+\telse \r", "+\tif (caretDirection == SWT.RIGHT) {\r", "+\t\tcaret.setImage(rightCaretBitmap);\t\t\t\r", "+\t}\r", "+}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ec5f58e551aaa52f8ed114b2817ab361", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "a23e5976280abc9190be37fa4d838e1b73285d73", "commitAfterChange": "b10c6977ac6c89221a208225e9d44e68de5b1e46", "methodNumberBeforeChange": 58, "methodNumberAfterChange": 58, "signatureBeforeChange": " public StyledText(Composite parent, int style)", "signatureAfterChange": " public StyledText(Composite parent, int style)", "diff": ["-\tRunnable runnable = new Runnable() {", "-\t\tpublic void run() {", "-\t\t\tint direction = BidiUtil.getKeyboardLanguage() == BidiUtil.KEYBOARD_BIDI ? SWT.RIGHT : SWT.LEFT;", "-\t\t\tif (direction == caretDirection) return;", "-\t\t\tint newCaretX = direction == SWT.LEFT ? columnX + getCaretWidth() - 1 : columnX;", "-\t\t\tsetCaretLocation(newCaretX, getCaretLine(), direction);", "-\t\t}", "-\t};", "-\tBidiUtil.addLanguageListener(handle, runnable);", "+\tif (isBidi) {", "+\t\tRunnable runnable = new Runnable() {", "+\t\t\tpublic void run() {", "+\t\t\t\tint direction = BidiUtil.getKeyboardLanguage() == BidiUtil.KEYBOARD_BIDI ? SWT.RIGHT : SWT.LEFT;", "+\t\t\t\tif (direction == caretDirection) return;", "+\t\t\t\tint newCaretX = direction == SWT.LEFT ? columnX + getCaretWidth() - 1 : columnX;", "+\t\t\t\tsetCaretLocation(newCaretX, getCaretLine(), direction);", "+\t\t\t}", "+\t\t};", "+\t\tBidiUtil.addLanguageListener(handle, runnable);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1fb2270c0c68cd2f925f0f6939426cb6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "5ea894241bdcc58c29197c49437e9f90e533b426", "commitAfterChange": "4f5c07d6b4213f3b31b43ecb01a5561168782d78", "methodNumberBeforeChange": 268, "methodNumberAfterChange": 268, "signatureBeforeChange": " void setCaretImage(int direction)", "signatureAfterChange": " void setCaretImage(int direction)", "diff": ["-\tCaret caret = getCaret();", "-\t", "-\tif (caret == null || direction == caretDirection) {", "-\t\treturn;", "-\t}", "-\tboolean updateImage = true;", "-\tImage caretImage = caret.getImage();", "-\tif (caretImage != null) {", "-\t\tupdateImage = caretImage.equals(leftCaretBitmap) || caretImage.equals(rightCaretBitmap);", "-\t}", "-\tcaretDirection = direction;", "-\tif (direction == SWT.DEFAULT) {", "-\t\tif (updateImage) caret.setImage(null);", "-\t\tcaret.setSize(caret.getSize().x, lineHeight);", "-\t}", "-\telse", "-\tif (caretDirection == SWT.LEFT) {", "-\t\tif (updateImage) caret.setImage(leftCaretBitmap);", "-\t\tBidiUtil.setKeyboardLanguage(BidiUtil.KEYBOARD_NON_BIDI);", "-\t}", "-\telse", "-\tif (caretDirection == SWT.RIGHT) {", "-\t\tif (updateImage) caret.setImage(rightCaretBitmap);", "-\t\tBidiUtil.setKeyboardLanguage(BidiUtil.KEYBOARD_BIDI);", "+\tif (defaultCaret != null) {", "+\t\tif (direction == SWT.DEFAULT) {", "+\t\t\tdefaultCaret.setImage(null);", "+\t\t\tdefaultCaret.setSize(defaultCaret.getSize().x, lineHeight);", "+\t\t} else if (caretDirection == SWT.LEFT) {", "+\t\t\tdefaultCaret.setImage(leftCaretBitmap);", "+\t\t} else if (caretDirection == SWT.RIGHT) {", "+\t\t\tdefaultCaret.setImage(rightCaretBitmap);", "+\t\t}"]}], "num": 13289}