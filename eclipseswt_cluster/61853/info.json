{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0abe024c8da3643194865162f764e995", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c9d7ad4e139c8d9353430447319e1c6b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledTextRenderer.java", "commitBeforeChange": "5d42583bedfb01f2af4aa781f40d3cc79804563c", "commitAfterChange": "f9711b34fd50570456baa5c59b174cc96df44367", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 15, "signatureBeforeChange": " int drawLine(int lineIndex, int paintX, int paintY, GC gc, Color widgetBackground, Color widgetForeground)", "signatureAfterChange": " int drawLine(int lineIndex, int paintX, int paintY, GC gc, Color widgetBackground, Color widgetForeground)", "diff": ["-\tint selectionStart = selection.x;", "-\tint selectionEnd = selection.y;", "+\tint selectionStart = selection.x - lineOffset;", "+\tint selectionEnd = selection.y - lineOffset;", "-\tboolean fullSelection = (styledText.getStyle() & SWT.FULL_SELECTION) != 0;", "-\tboolean isWPF = StyledText.IS_WPF;", "-\tgc.setBackground(lineBackground);", "+\tgc.setBackground(lineBackground);", "-\tif (!isWPF && selectionStart != selectionEnd) {", "-\t\tgc.setBackground(styledText.getSelectionBackground());", "-\t\tint selStart = selectionStart - lineOffset;", "-\t\tint selEnd = selectionEnd - lineOffset;", "-\t\tdrawLineSelection(paintX, paintY, gc, layout, lineLength, selStart, selEnd, client.width, fullSelection);", "-\t}", "-\tgc.setBackground(lineBackground);\t", "-\tif (selectionStart == selectionEnd || (selectionEnd <= lineOffset && selectionStart > lineOffset + lineLength - 1)) {", "+\tgc.setBackground(lineBackground);", "+\tif (selectionStart == selectionEnd || (selectionEnd <= 0 && selectionStart > lineLength - 1)) {", "-\t\tint start = Math.max(0, selectionStart - lineOffset);", "-\t\tint end = Math.min(lineLength, selectionEnd - lineOffset);", "+\t\tint start = Math.max(0, selectionStart);", "+\t\tint end = Math.min(lineLength, selectionEnd);", "-\t\tlayout.draw(gc, paintX, paintY, start, end - 1, selectionFg, selectionBg);", "+\t\tint flags;", "+\t\tif ((styledText.getStyle() & SWT.FULL_SELECTION) != 0) {", "+\t\t\tflags = SWT.FULL_SELECTION;", "+\t\t} else {", "+\t\t\tflags = SWT.DELIMITER_SELECTION;", "+\t\t}", "+\t\tif (selectionStart <= lineLength && lineLength < selectionEnd ) {", "+\t\t\tflags |= SWT.LAST_LINE_SELECTION;", "+\t\t}", "+\t\tlayout.draw(gc, paintX, paintY, start, end - 1, selectionFg, selectionBg, flags);", "-\tif (isWPF && selectionStart != selectionEnd) {", "-\t\tint alpha = gc.getAlpha();", "-\t\tgc.setAlpha(102);", "-\t\tgc.setBackground(styledText.getSelectionBackground());", "-\t\tint selStart = selectionStart - lineOffset;", "-\t\tint selEnd = selectionEnd - lineOffset;", "-\t\tdrawLineSelection(paintX, paintY, gc, layout, lineLength, selStart, selEnd, client.width, fullSelection);", "-\t\tgc.setAlpha(alpha);", "-\t}", "-", "-\t", "-}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e6e3e7de1bd0a4edba534286d30d53e0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "ec7edbaede68f4fd7608786e759e23fd6dbe2200", "commitAfterChange": "b206c3d5f3a448a2b6dfbc2c13ed7e271cef1597", "methodNumberBeforeChange": 104, "methodNumberAfterChange": 2, "signatureBeforeChange": "\r void drawLine(String line, int lineIndex, int paintY, GC gc, Color widgetBackground, Color widgetForeground, FontData currentFont, boolean clearBackground)", "signatureAfterChange": "\r \tvoid cacheLineBackground(int lineOffset, String line)", "diff": ["+\t */\r", "+\tvoid cacheLineBackground(int lineOffset, String line) {\r", "+\t\tStyledTextEvent event = getLineBackgroundData(lineOffset, line);\r", "+\t\t\r", "+\t\tif (event != null) {\r", "+\t\t\tlineBackgrounds.put(new Integer(lineOffset), event);\r", "+\t\t}\r", "+\t}\r", "- */\r", "-void drawLine(String line, int lineIndex, int paintY, GC gc, Color widgetBackground, Color widgetForeground, FontData currentFont, boolean clearBackground) {\r", "-\tint lineOffset = content.getOffsetAtLine(lineIndex);\r", "-\tint lineLength = line.length();\r", "-\tint selectionStart = selection.x;\r", "-\tint selectionEnd = selection.y;\r", "-\tStyleRange[] styles = new StyleRange[0];\r", "-\tColor lineBackground = null;\r", "-\tStyledTextEvent event = getLineStyleData(lineOffset, line);\r", "-\tStyledTextBidi bidi = null;\r", "-\t\r", "-\tif (event != null) {\r", "-\t\tstyles = event.styles;\r", "-\t}\r", "-\tif (isBidi()) {\r", "-\t\tsetLineFont(gc, currentFont, SWT.NORMAL);\r", "-\t\tbidi = getStyledTextBidi(line, lineOffset, gc, styles);\r", "-\t}\r", "-\tevent = getLineBackgroundData(lineOffset, line);\r", "-\tif (event != null) {\r", "-\t\tlineBackground = event.lineBackground;\r", "-\t}\r", "-\tif (lineBackground == null) {\r", "-\t\tlineBackground = widgetBackground;\r", "-\t}\r", "-\tif (clearBackground && \r", "-\t\t((getStyle() & SWT.FULL_SELECTION) == 0 || \r", "-\t\t selectionStart > lineOffset || \r", "-\t\t selectionEnd <= lineOffset + lineLength)) {\r", "-\t\t// draw background if full selection is off or if line is not \r", "-\t\t// completely selected\r", "-\t\tgc.setBackground(lineBackground);\r", "-\t\tgc.setForeground(lineBackground);\r", "-\t\tgc.fillRectangle(0, paintY, getClientArea().width, lineHeight);\r", "-\t}\r", "-\tif (selectionStart != selectionEnd) {\r", "-\t\tdrawLineSelectionBackground(line, lineOffset, styles, paintY, gc, currentFont, bidi);\r", "-\t}\r", "-\tif (selectionStart != selectionEnd && \r", "-\t\t((selectionStart >= lineOffset && selectionStart < lineOffset + lineLength) || \r", "-\t\t (selectionStart < lineOffset && selectionEnd > lineOffset))) {\r", "-\t\tstyles = getSelectionLineStyles(styles);\r", "-\t}\r", "-\tif (isBidi()) {\r", "-\t\tint paintX = bidiTextWidth(line, 0, 0, 0, bidi);\r", "-\t\tdrawStyledLine(line, lineOffset, 0, styles, paintX, paintY, gc, lineBackground, widgetForeground, currentFont, bidi);\r", "-\t}\r", "-\telse {\r", "-\t\tdrawStyledLine(line, lineOffset, 0, styles, 0, paintY, gc, lineBackground, widgetForeground, currentFont, bidi);\r", "-\t}\r", "-}\r"]}], "num": 61853}