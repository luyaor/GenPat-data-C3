{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "fb97b7904388446a889551ddc11ff721", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4d09a9aeaf27d446e2c08664cc91c7ea", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/CoolBar.java", "commitBeforeChange": "d702fffe4addb5ed70702ccc4ec707d6d5ebf8cb", "commitAfterChange": "2e2e88f4fdcd6e1c78cb89d8ab6d516b29b7a8c5", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "\r \r void destroyItem (CoolItem item)", "signatureAfterChange": "\r \r void destroyItem (CoolItem item)", "diff": ["-\tint lastIndex = getLastIndexOfRow (index);\r", "-\tif (count > 1 && index == lastIndex) {\r", "-\t\tREBARBANDINFO rbBand = new REBARBANDINFO ();\r", "-\t\trbBand.cbSize = REBARBANDINFO.sizeof;\r", "-\t\trbBand.fMask = OS.RBBIM_SIZE;\t\t\t\r", "-\t\trbBand.cx = MAX_WIDTH;\r", "-\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, lastIndex - 1, rbBand);\t\t\t\t\t\t\t\t\r", "+\tif (count != 0) {\r", "+\t\tint lastIndex = getLastIndexOfRow (index);\r", "+\t\tif (index == lastIndex) {\r", "+\t\t\tREBARBANDINFO rbBand = new REBARBANDINFO ();\r", "+\t\t\trbBand.cbSize = REBARBANDINFO.sizeof;\r", "+\t\t\trbBand.fMask = OS.RBBIM_SIZE;\t\t\t\r", "+\t\t\trbBand.cx = MAX_WIDTH;\r", "+\t\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, lastIndex - 1, rbBand);\r", "+\t\t}\t\t\t\t\t\t\t\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "75f590300c5902267759731245af0b14", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/CoolBar.java", "commitBeforeChange": "d702fffe4addb5ed70702ccc4ec707d6d5ebf8cb", "commitAfterChange": "2e2e88f4fdcd6e1c78cb89d8ab6d516b29b7a8c5", "methodNumberBeforeChange": 33, "methodNumberAfterChange": 14, "signatureBeforeChange": "\r \r int getLastIndexOfRow (int index)", "signatureAfterChange": "\r \r int getLastIndexOfRow (int index)", "diff": ["+\r", "+int getLastIndexOfRow (int index) {\r", "+\tint count = OS.SendMessage (handle, OS.RB_GETBANDCOUNT, 0, 0);\r", "+\tif (count == 0) return -1;\r", "+\tREBARBANDINFO rbBand = new REBARBANDINFO ();\t\r", "+\trbBand.cbSize = REBARBANDINFO.sizeof;\r", "+\trbBand.fMask = OS.RBBIM_STYLE;\r", "+\tfor (int i=index; i<count; i++) {\r", "+\t\tOS.SendMessage (handle, OS.RB_GETBANDINFO, i, rbBand);\r", "+\t\tif ((rbBand.fStyle & OS.RBBS_BREAK) != 0) {\r", "+\t\t\treturn i - 1;\r", "+\t\t}\r", "+\t}\r", "+\treturn count - 1;\r", "-\r", "-int getLastIndexOfRow (int index) {\r", "-\tint count = OS.SendMessage (handle, OS.RB_GETBANDCOUNT, 0, 0);\r", "-\tREBARBANDINFO rbBand = new REBARBANDINFO ();\t\r", "-\trbBand.cbSize = REBARBANDINFO.sizeof;\r", "-\trbBand.fMask = OS.RBBIM_STYLE;\r", "-\tfor (int i=index; i<count; i++) {\r", "-\t\tOS.SendMessage (handle, OS.RB_GETBANDINFO, i, rbBand);\r", "-\t\tif ((rbBand.fStyle & OS.RBBS_BREAK) != 0) {\r", "-\t\t\treturn i - 1;\r", "-\t\t}\r", "-\t}\r", "-\treturn count - 1;\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6ea6f08eac65e5cd01b002c6e6571c51", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/CoolBar.java", "commitBeforeChange": "e5acbe6c16a694c7f3c29cf4f69a551bf55b4776", "commitAfterChange": "0a7e0762eb6a91569487ff333d468559f2ea1861", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": "\r public void setWrapIndices (int [] indices)", "signatureAfterChange": "\r public void setWrapIndices (int [] indices)", "diff": ["-\tint count = OS.SendMessage (handle, OS.RB_GETBANDCOUNT, 0, 0);\r", "+\tint count = getItemCount ();\r", "-\tREBARBANDINFO rbBand = new REBARBANDINFO ();\r", "-\trbBand.cbSize = REBARBANDINFO.sizeof;\r", "-\trbBand.fMask = OS.RBBIM_STYLE;\r", "-\tfor (int i=0; i<count; i++) {\r", "-\t\tOS.SendMessage (handle, OS.RB_GETBANDINFO, i, rbBand);\r", "-\t\tif ((rbBand.fStyle & OS.RBBS_BREAK) != 0) {\r", "+\tsetRedraw (false);\r", "+\tCoolItem [] items = getItems ();\r", "+\tfor (int i=0; i<items.length; i++) {\r", "+\t\tCoolItem item = items [i];\r", "+\t\tif (item.getWrap ()) {\r", "-\t\t\trbBand.fStyle &= ~OS.RBBS_BREAK;\r", "-\t\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, i, rbBand);\r", "+\t\t\titem.setWrap (false);\r", "-\t/*\r", "-\t* Resize the last item in the row to the maximum size.\r", "-\t*/\r", "-\r", "-\t\trbBand.fMask = OS.RBBIM_STYLE;\t\t\r", "-\t\tOS.SendMessage (handle, OS.RB_GETBANDINFO, indices [i], rbBand);\r", "-\t\trbBand.fStyle |= OS.RBBS_BREAK;\r", "-\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, indices [i], rbBand);\r", "-\t\t/*\r", "-\t\t* Ensure that the last item in the previous row is at the maximum size.\r", "-\t\t*/\r", "-\t\tresizeToMaximumWidth (indices [i] - 1);\r", "+\t\tint index = indices [i];\r", "+\t\tif (0 <= index && index < items.length) {\r", "+\t\t\tCoolItem item = items [index];\r", "+\t\t\titem.setWrap (true);\r", "+\t\t\tresizeToMaximumWidth (index - 1);\r", "+\t\t}\r", "+\tsetRedraw (true);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7777c2859278ed79e2bbbda45fce8582", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/CoolItem.java", "commitBeforeChange": "23825160d21d6c3c1a58f38fbbe98cca0211c41b", "commitAfterChange": "88b2eb5d18523e69ae1e3acb4a4a79733b8a3e52", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": "\r \r public void setSize (int width, int height)", "signatureAfterChange": "\r \r public void setSize (int width, int height)", "diff": ["+\t/*\r", "+\t* Do not set the size for the last item on the row.\r", "+\t*/\r", "+\tint count = OS.SendMessage (hwnd, OS.RB_GETBANDCOUNT, 0, 0);\r", "+\tboolean isLastItem;\r", "+\tif (index + 1 == count) {\r", "+\t\tisLastItem = true;\r", "+\t} else {\r", "+\t\trbBand.fMask = OS.RBBIM_STYLE;\r", "+\t\tOS.SendMessage (hwnd, OS.RB_GETBANDINFO, index + 1, rbBand);\r", "+\t\tisLastItem = (rbBand.fStyle & OS.RBBS_BREAK) != 0;\r", "+\t\trbBand.fMask = 0;\r", "+\t}\r", "+\t\r", "-\trbBand.fMask = OS.RBBIM_CHILDSIZE | OS.RBBIM_SIZE | OS.RBBIM_IDEALSIZE;\r", "-\trbBand.cx = width;\r", "+\trbBand.fMask = OS.RBBIM_CHILDSIZE| OS.RBBIM_IDEALSIZE;\r", "+\tif (!isLastItem) {\r", "+\t\trbBand.cx = width;\r", "+\t\trbBand.fMask |= OS.RBBIM_SIZE;\r", "+\t}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "970502ed5a2e55a078c908391102cce2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/CoolBar.java", "commitBeforeChange": "7797431085f381781603127c1f820e618e643d20", "commitAfterChange": "81787cd27e32af892df033b20e65ebc1ed6c38e6", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": "\r \r void createItem (CoolItem item, int index)", "signatureAfterChange": "\r \r void createItem (CoolItem item, int index)", "diff": ["-\tint lastIndex = getLastIndexOfRow (index);\r", "-\tif (lastIndex != -1 && index == lastIndex + 1) {  \t\r", "-\t\tREBARBANDINFO rbBand2 = new REBARBANDINFO ();\r", "-\t\trbBand2.cbSize = REBARBANDINFO.sizeof;\r", "-\t\trbBand2.fMask = OS.RBBIM_IDEALSIZE;\r", "-\t\tOS.SendMessage (handle, OS.RB_GETBANDINFO, lastIndex, rbBand2);\r", "-\t\trbBand2.fMask = OS.RBBIM_SIZE;\r", "-\t\tRECT rect = new RECT ();\r", "-\t\tOS.SendMessage (handle, OS.RB_GETBANDBORDERS, lastIndex, rect);\r", "-\t\trbBand2.cx = rbBand2.cxIdeal + rect.left + rect.right;\r", "-\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, lastIndex, rbBand2);\r", "+\tint lastIndex = getLastIndexOfRow (index - 1);\r", "+\tif (index == lastIndex + 1) {  \t\r", "+\t\tresizeToPreferredWidth (lastIndex);\r", "-\r", "+\t\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b7796433b5972065e92dd0d7bb218ce8", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/CoolBar.java", "commitBeforeChange": "7797431085f381781603127c1f820e618e643d20", "commitAfterChange": "81787cd27e32af892df033b20e65ebc1ed6c38e6", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 28, "signatureBeforeChange": "\r public void setWrapIndices (int [] indices)", "signatureAfterChange": "\r public void setWrapIndices (int [] indices)", "diff": ["-\t\trbBand.fStyle &= ~OS.RBBS_BREAK;\r", "-\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, i, rbBand);\r", "+\t\tif ((rbBand.fStyle & OS.RBBS_BREAK) != 0) {\r", "+\t\t\tresizeToPreferredWidth (i - 1);\r", "+\t\t\trbBand.fStyle &= ~OS.RBBS_BREAK;\r", "+\t\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, i, rbBand);\r", "+\t\t}\r", "-\trbBand.fMask = OS.RBBIM_SIZE;\r", "-\trbBand.cx = MAX_WIDTH;\r", "-\tOS.SendMessage (handle, OS.RB_SETBANDINFO, count - 1, rbBand);\r", "+\tresizeToMaximumWidth (count - 1);\r", "-\t\t*/\t\r", "-\t\trbBand.fMask = OS.RBBIM_SIZE;\r", "-\t\trbBand.cx = MAX_WIDTH;\r", "-\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, indices [i] - 1, rbBand);\r", "+\t\t*/\r", "+\t\tresizeToMaximumWidth (indices [i] - 1);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "46ff4be5ed75e4f74f6da7a3d7949dd5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/CoolBar.java", "commitBeforeChange": "23825160d21d6c3c1a58f38fbbe98cca0211c41b", "commitAfterChange": "88b2eb5d18523e69ae1e3acb4a4a79733b8a3e52", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": "\r public void setWrapIndices (int [] indices)", "signatureAfterChange": "\r public void setWrapIndices (int [] indices)", "diff": ["+\t/*\r", "+\t* Resize the last item in the row to the maximum size.\r", "+\t*/\r", "+\trbBand.fMask = OS.RBBIM_SIZE;\r", "+\trbBand.cx = MAX_WIDTH;\r", "+\tOS.SendMessage (handle, OS.RB_SETBANDINFO, count - 1, rbBand);\r", "+\r", "+\t\trbBand.fMask = OS.RBBIM_STYLE;\t\t\r", "+\t\t/*\r", "+\t\t* Ensure that the last item in the previous row is at the maximum size.\r", "+\t\t*/\t\r", "+\t\trbBand.fMask = OS.RBBIM_SIZE;\r", "+\t\trbBand.cx = MAX_WIDTH;\r", "+\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, indices [i] - 1, rbBand);\r"]}], "num": 23679}