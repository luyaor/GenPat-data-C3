{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2ec01e2b86096862fa5b6274ffbc7eca", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dcbb7a29ac44a319a45c1e6433e2c9a0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/List.java", "commitBeforeChange": "c7b8a47b4f881fe023685c003812d64dd2d51c15", "commitAfterChange": "1b9976550b7657aeb02ff183aeee4687e9c1685e", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "signatureAfterChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "diff": ["-\tint count = OS.SendMessage (handle, OS.LB_GETCOUNT, 0, 0);", "-\tint itemHeight = OS.SendMessage (handle, OS.LB_GETITEMHEIGHT, 0, 0);", "-\tint width = 0, height = count * itemHeight;", "-\tif ((style & SWT.H_SCROLL) != 0) {", "-\t\twidth = OS.SendMessage (handle, OS.LB_GETHORIZONTALEXTENT, 0, 0);", "-\t} else {", "-\t\tint newFont, oldFont = 0;", "-\t\tint hDC = OS.GetDC (handle);", "-\t\tnewFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "-\t\tif (newFont != 0) oldFont = OS.SelectObject (hDC, newFont);", "-\t\tRECT rect = new RECT ();", "-\t\tint flags = OS.DT_CALCRECT | OS.DT_SINGLELINE | OS.DT_NOPREFIX;", "-\t\tint cp = getCodePage ();", "-\t\tTCHAR buffer = new TCHAR (cp, 64 + 1);", "-\t\tfor (int i=0; i<count; i++) {", "-\t\t\tint length = OS.SendMessage (handle, OS.LB_GETTEXTLEN, i, 0);", "-\t\t\tif (length != OS.LB_ERR) {", "-\t\t\t\tif (length + 1 > buffer.length ()) {", "-\t\t\t\t\tbuffer = new TCHAR (cp, length + 1);", "+\tint width = 0, height = 0;", "+\tif (wHint == SWT.DEFAULT) {", "+\t\tif ((style & SWT.H_SCROLL) != 0) {", "+\t\t\twidth = OS.SendMessage (handle, OS.LB_GETHORIZONTALEXTENT, 0, 0);", "+\t\t} else {", "+\t\t\tint count = OS.SendMessage (handle, OS.LB_GETCOUNT, 0, 0);", "+\t\t\tint newFont, oldFont = 0;", "+\t\t\tint hDC = OS.GetDC (handle);", "+\t\t\tnewFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "+\t\t\tif (newFont != 0) oldFont = OS.SelectObject (hDC, newFont);", "+\t\t\tRECT rect = new RECT ();", "+\t\t\tint flags = OS.DT_CALCRECT | OS.DT_SINGLELINE | OS.DT_NOPREFIX;", "+\t\t\tint cp = getCodePage ();", "+\t\t\tTCHAR buffer = new TCHAR (cp, 64 + 1);", "+\t\t\tfor (int i=0; i<count; i++) {", "+\t\t\t\tint length = OS.SendMessage (handle, OS.LB_GETTEXTLEN, i, 0);", "+\t\t\t\tif (length != OS.LB_ERR) {", "+\t\t\t\t\tif (length + 1 > buffer.length ()) {", "+\t\t\t\t\t\tbuffer = new TCHAR (cp, length + 1);", "+\t\t\t\t\t}", "+\t\t\t\t\tint result = OS.SendMessage (handle, OS.LB_GETTEXT, i, buffer);", "+\t\t\t\t\tif (result != OS.LB_ERR) {", "+\t\t\t\t\t\tOS.DrawText (hDC, buffer, length, rect, flags);", "+\t\t\t\t\t\twidth = Math.max (width, rect.right - rect.left);", "+\t\t\t\t\t}", "-\t\t\t\tint result = OS.SendMessage (handle, OS.LB_GETTEXT, i, buffer);", "-\t\t\t\tif (result != OS.LB_ERR) {", "-\t\t\t\t\tOS.DrawText (hDC, buffer, length, rect, flags);", "-\t\t\t\t\twidth = Math.max (width, rect.right - rect.left);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}\t", "-\t\tif (newFont != 0) OS.SelectObject (hDC, oldFont);", "-\t\tOS.ReleaseDC (handle, hDC);", "+\t\t\t}\t", "+\t\t\tif (newFont != 0) OS.SelectObject (hDC, oldFont);", "+\t\t\tOS.ReleaseDC (handle, hDC);", "+\t\t}", "+\t}", "+\tif (hHint == SWT.DEFAULT) {", "+\t\tint count = OS.SendMessage (handle, OS.LB_GETCOUNT, 0, 0);", "+\t\tint itemHeight = OS.SendMessage (handle, OS.LB_GETITEMHEIGHT, 0, 0);", "+\t \theight = count * itemHeight;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0ba9c6e535059058e3546a3ede4e8008", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "c7b8a47b4f881fe023685c003812d64dd2d51c15", "commitAfterChange": "1b9976550b7657aeb02ff183aeee4687e9c1685e", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "signatureAfterChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "diff": ["-\tint count = OS.SendMessage (handle, OS.CB_GETCOUNT, 0, 0);", "-\tint itemHeight = OS.SendMessage (handle, OS.CB_GETITEMHEIGHT, 0, 0);", "-\tint width = 0, height = 0;", "-\tif ((style & SWT.SIMPLE) != 0) height = count * itemHeight;", "-\tint newFont, oldFont = 0;", "-\tint hDC = OS.GetDC (handle);", "-\tnewFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "-\tif (newFont != 0) oldFont = OS.SelectObject (hDC, newFont);", "-\tRECT rect = new RECT ();", "-\tint flags = OS.DT_CALCRECT | OS.DT_NOPREFIX;", "-\tif ((style & SWT.READ_ONLY) == 0) flags |= OS.DT_EDITCONTROL;", "-\tint length = OS.GetWindowTextLength (handle);", "-\tint cp = getCodePage ();", "-\tTCHAR buffer = new TCHAR (cp, length + 1);", "-\tOS.GetWindowText (handle, buffer, length + 1);", "-\tOS.DrawText (hDC, buffer, length, rect, flags);", "-\twidth = Math.max (width, rect.right - rect.left);", "-\tfor (int i=0; i<count; i++) {", "-\t\tlength = OS.SendMessage (handle, OS.CB_GETLBTEXTLEN, i, 0);", "-\t\tif (length != OS.CB_ERR) {", "-\t\t\tif (length + 1 > buffer.length ()) buffer = new TCHAR (cp, length + 1);", "-\t\t\tint result = OS.SendMessage (handle, OS.CB_GETLBTEXT, i, buffer);", "-\t\t\tif (result != OS.CB_ERR) {", "-\t\t\t\tOS.DrawText (hDC, buffer, length, rect, flags);", "-\t\t\t\twidth = Math.max (width, rect.right - rect.left);", "+\tint width = 0, height = 0, tmInternalLeading = 0;", "+\tif (wHint == SWT.DEFAULT) {", "+\t\tint newFont, oldFont = 0;", "+\t\tint hDC = OS.GetDC (handle);", "+\t\tnewFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "+\t\tif (newFont != 0) oldFont = OS.SelectObject (hDC, newFont);", "+\t\tint count = OS.SendMessage (handle, OS.CB_GETCOUNT, 0, 0);", "+\t\tRECT rect = new RECT ();", "+\t\tint flags = OS.DT_CALCRECT | OS.DT_NOPREFIX;", "+\t\tif ((style & SWT.READ_ONLY) == 0) flags |= OS.DT_EDITCONTROL;", "+\t\tint length = OS.GetWindowTextLength (handle);", "+\t\tint cp = getCodePage ();", "+\t\tTCHAR buffer = new TCHAR (cp, length + 1);", "+\t\tOS.GetWindowText (handle, buffer, length + 1);", "+\t\tOS.DrawText (hDC, buffer, length, rect, flags);", "+\t\twidth = Math.max (width, rect.right - rect.left);", "+\t\tfor (int i=0; i<count; i++) {", "+\t\t\tlength = OS.SendMessage (handle, OS.CB_GETLBTEXTLEN, i, 0);", "+\t\t\tif (length != OS.CB_ERR) {", "+\t\t\t\tif (length + 1 > buffer.length ()) buffer = new TCHAR (cp, length + 1);", "+\t\t\t\tint result = OS.SendMessage (handle, OS.CB_GETLBTEXT, i, buffer);", "+\t\t\t\tif (result != OS.CB_ERR) {", "+\t\t\t\t\tOS.DrawText (hDC, buffer, length, rect, flags);", "+\t\t\t\t\twidth = Math.max (width, rect.right - rect.left);", "+\t\t\t\t}", "+\t\t}", "+\t\tif ((style & SWT.READ_ONLY) != 0) {", "+\t\t\tTEXTMETRIC tm = OS.IsUnicode ? (TEXTMETRIC) new TEXTMETRICW () : new TEXTMETRICA ();", "+\t\t\tOS.GetTextMetrics (hDC, tm);", "+\t\t\ttmInternalLeading = tm.tmInternalLeading;", "+\t\t}", "+\t\tif (newFont != 0) OS.SelectObject (hDC, oldFont);", "+\t\tOS.ReleaseDC (handle, hDC);", "+\t}", "+\tif (hHint == SWT.DEFAULT) {", "+\t\tif ((style & SWT.SIMPLE) != 0) {", "+\t\t\tint count = OS.SendMessage (handle, OS.CB_GETCOUNT, 0, 0);", "+\t\t\tint itemHeight = OS.SendMessage (handle, OS.CB_GETITEMHEIGHT, 0, 0);", "+\t\t\theight = count * itemHeight;", "-\tint border = OS.GetSystemMetrics (OS.SM_CXEDGE);", "-\t\tTEXTMETRIC tm = OS.IsUnicode ? (TEXTMETRIC) new TEXTMETRICW () : new TEXTMETRICA ();", "-\t\tOS.GetTextMetrics (hDC, tm);", "-\t\twidth += tm.tmInternalLeading * 2;", "+\t\twidth += tmInternalLeading * 2;", "+\tint border = OS.GetSystemMetrics (OS.SM_CXEDGE);", "-\tif (newFont != 0) OS.SelectObject (hDC, oldFont);", "-\tOS.ReleaseDC (handle, hDC);"]}], "num": 53329}