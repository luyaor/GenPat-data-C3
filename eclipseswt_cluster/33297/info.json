{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "42c281d7603d844818389cfb126b919f", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2030ba08cec89e036dd811d330691ffd", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "b055badbc52eef874ac04ced06c796aebe178c51", "commitAfterChange": "efd2b19e6f0f74c27009a05b4ddce186552ea417", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": "  boolean dragDetect (int x, int y)", "signatureAfterChange": "  boolean dragDetect (int x, int y, boolean filter, boolean [] consume)", "diff": ["-boolean dragDetect (int x, int y) {", "-\tif (!hooks (SWT.DragDetect)) return false;", "-\tint start = 0, end = 0;", "-\tif ((style & SWT.SINGLE) != 0) {", "-\t\tint [] s = new int [1], e = new int [1];", "-\t\tOS.gtk_editable_get_selection_bounds (handle, s, e);", "-\t\tstart = s [0]; end = e [0];", "-\t} else {", "-\t\tbyte [] s =  new byte [ITER_SIZEOF], e =  new byte [ITER_SIZEOF];", "-\t\tOS.gtk_text_buffer_get_selection_bounds (bufferHandle, s, e);", "-\t\tstart = OS.gtk_text_iter_get_offset (s);", "-\t\tend = OS.gtk_text_iter_get_offset (e);", "+boolean dragDetect (int x, int y, boolean filter, boolean [] consume) {", "+\tif (filter) {", "+\t\tint start = 0, end = 0;", "+\t\tif ((style & SWT.SINGLE) != 0) {", "+\t\t\tint [] s = new int [1], e = new int [1];", "+\t\t\tOS.gtk_editable_get_selection_bounds (handle, s, e);", "+\t\t\tstart = s [0];", "+\t\t\tend = e [0];", "+\t\t} else {", "+\t\t\tbyte [] s = new byte [ITER_SIZEOF], e =  new byte [ITER_SIZEOF];", "+\t\t\tOS.gtk_text_buffer_get_selection_bounds (bufferHandle, s, e);", "+\t\t\tstart = OS.gtk_text_iter_get_offset (s);", "+\t\t\tend = OS.gtk_text_iter_get_offset (e);", "+\t\t}", "+\t\tif (start != end) {", "+\t\t\tif (end < start) {", "+\t\t\t\tint temp = end;", "+\t\t\t\tend = start;", "+\t\t\t\tstart = temp;", "+\t\t\t}", "+\t\t\tint position = -1;", "+\t\t\tif ((style & SWT.SINGLE) != 0) {", "+\t\t\t\tint [] index = new int [1];", "+\t\t\t\tint [] trailing = new int [1];", "+\t\t\t\tint /*long*/ layout = OS.gtk_entry_get_layout (handle);", "+\t\t\t\tOS.pango_layout_xy_to_index (layout, x * OS.PANGO_SCALE, y * OS.PANGO_SCALE, index, trailing);", "+\t\t\t\tint /*long*/ ptr = OS.pango_layout_get_text (layout);", "+\t\t\t\tposition = (int)/*64*/OS.g_utf8_pointer_to_offset (ptr, ptr + index[0]) + trailing[0];", "+\t\t\t} else {", "+\t\t\t\tbyte [] p = new byte [ITER_SIZEOF];", "+\t\t\t\tOS.gtk_text_view_get_iter_at_location (handle, p, x, y);", "+\t\t\t\tposition = OS.gtk_text_iter_get_offset (p);", "+\t\t\t}", "+\t\t\tif (start <= position && position < end) {", "+\t\t\t\tif (super.dragDetect (x, y, filter, consume)) {", "+\t\t\t\t\tif (consume != null) consume [0] = true;", "+\t\t\t\t\treturn true;", "+\t\t\t\t}", "+\t\t\t}", "+\t\t}", "+\t\treturn false;", "-\tif (start == end) return false;", "-\tif (end < start) {", "-\t\tint temp = end;", "-\t\tend = start;", "-\t\tstart = temp;", "-\t}", "-\tint offset = -1;", "-\tif ((style & SWT.SINGLE) != 0) {", "-\t\tint /*long*/ layout = OS.gtk_entry_get_layout (handle);", "-\t\tint [] index = new int [1];", "-\t\tint [] trailing = new int [1];", "-\t\tOS.pango_layout_xy_to_index (layout, x * OS.PANGO_SCALE, y * OS.PANGO_SCALE, index, trailing);", "-\t\tint /*long*/ ptr = OS.pango_layout_get_text (layout);", "-\t\toffset = (int)/*64*/OS.g_utf8_pointer_to_offset (ptr, ptr + index[0]) + trailing[0];", "-\t} else {", "-\t\tbyte [] position = new byte [ITER_SIZEOF];", "-\t\tOS.gtk_text_view_get_iter_at_location (handle, position, x, y);", "-\t\toffset =  OS.gtk_text_iter_get_offset (position);", "-\t}", "-\treturn offset > start && offset < end;", "-}", "+\treturn super.dragDetect (x, y, filter, consume);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b9fed254ca835627e0afdeffea53eb9a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "efd2b19e6f0f74c27009a05b4ddce186552ea417", "commitAfterChange": "7964cbf3b02c1c8a872cf670d05fdba45e9e894e", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": " boolean dragDetect (int x, int y)", "signatureAfterChange": " boolean dragDetect (int x, int y, boolean filter, boolean [] consume)", "diff": ["-boolean dragDetect (int x, int y) {", "-\tif (hooks (SWT.DragDetect)) {", "+boolean dragDetect (int x, int y, boolean filter, boolean [] consume) {", "+\tif (filter) {", "-\t\tif (start [0] == end [0]) return false;", "-\t\tint pos = OS.XmTextXYToPos(handle, (short) x, (short) y);", "-\t\treturn pos > start [0] && pos < end [0];", "+\t\tif (start [0] != end [0]) {", "+\t\t\tint pos = OS.XmTextXYToPos(handle, (short) x, (short) y);", "+\t\t\tif (start [0] <= pos && pos < end [0]) {", "+\t\t\t\tif (super.dragDetect (x, y, filter, consume)) {", "+\t\t\t\t\tif (consume != null) consume [0] = true;", "+\t\t\t\t\treturn true;", "+\t\t\t\t}", "+\t\t\t}", "+\t\t}", "+\t\treturn false;", "-\treturn false;", "-}", "+\treturn super.dragDetect (x, y, filter, consume);"]}], "num": 33297}