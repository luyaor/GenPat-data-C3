{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "21653f62ab96c6713948bebc284a6aff", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c59e76de650c61b0d92af8bb33032c76", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Printing/gtk/org/eclipse/swt/printing/Printer.java", "commitBeforeChange": "3654966d37611f4d9d2c9f01b9ca8fa3554b426a", "commitAfterChange": "b2b34fbc2579012e9628a9fa709c082791d6ec37", "methodNumberBeforeChange": 31, "methodNumberAfterChange": 31, "signatureBeforeChange": " protected void init()", "signatureAfterChange": " protected void init()", "diff": ["+\tif (data.duplex != SWT.DEFAULT) {", "+\t\tint duplex = data.duplex == PrinterData.DUPLEX_LONG_EDGE ? OS.GTK_PRINT_DUPLEX_HORIZONTAL", "+\t\t\t: data.duplex == PrinterData.DUPLEX_SHORT_EDGE ? OS.GTK_PRINT_DUPLEX_VERTICAL", "+\t\t\t: OS.GTK_PRINT_DUPLEX_SIMPLEX;", "+\t\tOS.gtk_print_settings_set_duplex (settings, duplex);", "+\t\t/* ", "+\t\t * Bug in GTK.  The cups backend only looks at the value", "+\t\t * of the non-API field cups-Duplex in the print_settings.", "+\t\t * The fix is to manually set cups-Duplex to Tumble or NoTumble.", "+\t\t */", "+\t\tString cupsDuplexType = null;", "+\t\tif (duplex == OS.GTK_PRINT_DUPLEX_HORIZONTAL) cupsDuplexType = \"DuplexNoTumble\";", "+\t\telse if (duplex == OS.GTK_PRINT_DUPLEX_VERTICAL) cupsDuplexType = \"DuplexTumble\";", "+\t\tif (cupsDuplexType != null) {", "+\t\t\tbyte [] keyBuffer = Converter.wcsToMbcs (null, \"cups-Duplex\", true);", "+\t\t\tbyte [] valueBuffer = Converter.wcsToMbcs (null, cupsDuplexType, true);", "+\t\t\tOS.gtk_print_settings_set(settings, keyBuffer, valueBuffer);", "+\t\t}", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc83986a7e684d0831c6a332f33acd54", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Printing/win32/org/eclipse/swt/printing/PrintDialog.java", "commitBeforeChange": "3654966d37611f4d9d2c9f01b9ca8fa3554b426a", "commitAfterChange": "b2b34fbc2579012e9628a9fa709c082791d6ec37", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 15, "signatureBeforeChange": " public PrinterData open()", "signatureAfterChange": " public PrinterData open()", "diff": ["+\t\tif (printerData.duplex != SWT.DEFAULT) {", "+\t\t\tdevmode.dmFields |= OS.DM_DUPLEX;", "+\t\t\tswitch (printerData.duplex) {", "+\t\t\t\tcase PrinterData.DUPLEX_SHORT_EDGE: devmode.dmDuplex = OS.DMDUP_HORIZONTAL; break;", "+\t\t\t\tcase PrinterData.DUPLEX_LONG_EDGE: devmode.dmDuplex = OS.DMDUP_VERTICAL; break;", "+\t\t\t\tdefault: devmode.dmDuplex = OS.DMDUP_SIMPLEX;", "+\t\t\t}", "+\t\t}", "+\t\t\tif ((devmode.dmFields & OS.DM_DUPLEX) != 0) {", "+\t\t\t\tshort dmDuplex = devmode.dmDuplex;", "+\t\t\t\tdata.duplex = dmDuplex == OS.DMDUP_SIMPLEX ? PrinterData.DUPLEX_NONE : dmDuplex == OS.DMDUP_HORIZONTAL ? PrinterData.DUPLEX_SHORT_EDGE : PrinterData.DUPLEX_LONG_EDGE;", "+\t\t\t}", "+"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1cd7a3b68497aaab5b2f1c351c876392", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Printing/gtk/org/eclipse/swt/printing/PrintDialog.java", "commitBeforeChange": "3654966d37611f4d9d2c9f01b9ca8fa3554b426a", "commitAfterChange": "b2b34fbc2579012e9628a9fa709c082791d6ec37", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 15, "signatureBeforeChange": " public PrinterData open()", "signatureAfterChange": " public PrinterData open()", "diff": ["+\t\t/* ", "+\t\t * Bug in GTK.  The unix dialog gives priority to the value of the non-API", "+\t\t * field cups-Duplex in the print_settings (which we preserve in otherData).", "+\t\t * The fix is to manually clear cups-Duplex before setting the duplex field.", "+\t\t */", "+\t\tbyte [] keyBuffer = Converter.wcsToMbcs (null, \"cups-Duplex\", true);", "+\t\tOS.gtk_print_settings_set(settings, keyBuffer, (byte[]) null);", "+\t\tif (printerData.duplex != SWT.DEFAULT) {", "+\t\t\tint duplex = printerData.duplex == PrinterData.DUPLEX_LONG_EDGE ? OS.GTK_PRINT_DUPLEX_HORIZONTAL", "+\t\t\t\t: printerData.duplex == PrinterData.DUPLEX_SHORT_EDGE ? OS.GTK_PRINT_DUPLEX_VERTICAL", "+\t\t\t\t: OS.GTK_PRINT_DUPLEX_SIMPLEX;", "+\t\t\tOS.gtk_print_settings_set_duplex (settings, duplex);", "+\t\t}", "+\t\t\t\tint duplex = OS.gtk_print_settings_get_duplex(settings);", "+\t\t\t\tdata.duplex = duplex == OS.GTK_PRINT_DUPLEX_HORIZONTAL ? PrinterData.DUPLEX_LONG_EDGE", "+\t\t\t\t\t\t: duplex == OS.GTK_PRINT_DUPLEX_VERTICAL ? PrinterData.DUPLEX_SHORT_EDGE", "+\t\t\t\t\t\t: PrinterData.DUPLEX_NONE;"]}], "num": 57572}