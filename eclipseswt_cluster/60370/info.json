{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "af3822bca2db22e534faa3dff2ba2095", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "302e720efcf1cf8bb4bc5d6535fbe73b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "1e9a9b9a2f3b0161323b03292062cd8133cbbcb8", "commitAfterChange": "dec9fd8ce799a13104a343c8b185b7ed15925f00", "methodNumberBeforeChange": 48, "methodNumberAfterChange": 48, "signatureBeforeChange": " int untranslateOffset(int offset)", "signatureAfterChange": " int untranslateOffset(int offset)", "diff": ["-\tif (ascent != -1 || descent != -1) {", "-\t\tint /*long*/ ptr = OS.pango_layout_get_text(layout);", "-\t\tint /*long*/ iter = OS.pango_layout_get_iter(layout);", "-\t\tif (iter == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\t\tint count = 0;", "-\t\tdo {", "-\t\t\tint bytePos = OS.pango_layout_iter_get_index(iter);", "-\t\t\tint pos = (int)/*64*/OS.g_utf8_pointer_to_offset(ptr, ptr + bytePos);", "-\t\t\tif (pos >= offset) break;", "-\t\t\tcount++;", "-\t\t} while (OS.pango_layout_iter_next_line(iter));", "-\t\tOS.pango_layout_iter_free (iter);", "-\t\toffset -= count;", "+\tif (invalidOffsets == null) return offset;", "+\tfor (int i = 0; i < invalidOffsets.length; i++) {", "+\t\tif (offset == invalidOffsets[i]) {", "+\t\t\toffset++;", "+\t\t\tcontinue;", "+\t\t}", "+\t\tif (offset < invalidOffsets[i]) {", "+\t\t\treturn offset - i;", "+\t\t}", "-\tif (segments == null) return offset;", "-\tint nSegments = segments.length;", "-\tif (nSegments <= 1) return offset;", "-\tif (nSegments == 2) {", "-\t\tif (segments[0] == 0 && segments[1] == length) return offset;", "-\t}", "-\tfor (int i = 0; i < nSegments && offset > segments[i]; i++) {", "-\t\toffset--;", "-\t}", "-\treturn offset;", "+\treturn offset - invalidOffsets.length;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "aa93feb4c55b20c5f8882c2a0cbd3402", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "1e9a9b9a2f3b0161323b03292062cd8133cbbcb8", "commitAfterChange": "dec9fd8ce799a13104a343c8b185b7ed15925f00", "methodNumberBeforeChange": 47, "methodNumberAfterChange": 47, "signatureBeforeChange": " int translateOffset(int offset)", "signatureAfterChange": " int translateOffset(int offset)", "diff": ["-\tif (ascent != -1 || descent != -1) {", "-\t\tint /*long*/ ptr = OS.pango_layout_get_text(layout);", "-\t\tint /*long*/ iter = OS.pango_layout_get_iter(layout);", "-\t\tif (iter == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\t\tint count = 0;", "-\t\tdo {", "-\t\t\tint bytePos = OS.pango_layout_iter_get_index(iter);", "-\t\t\tint pos = (int)/*64*/OS.g_utf8_pointer_to_offset(ptr, ptr + bytePos);", "-\t\t\tif (pos - count > offset) break;", "-\t\t\tcount++;", "-\t\t} while (OS.pango_layout_iter_next_line(iter));", "-\t\tOS.pango_layout_iter_free (iter);", "-\t\toffset += count;", "-\t}", "-\tif (segments == null) return offset;", "-\tint nSegments = segments.length;", "-\tif (nSegments <= 1) return offset;", "-\tif (nSegments == 2) {", "-\t\tif (segments[0] == 0 && segments[1] == length) return offset;", "-\t}", "-\tfor (int i = 0; i < nSegments && offset - i >= segments[i]; i++) {", "+\tif (invalidOffsets == null) return offset;", "+\tfor (int i = 0; i < invalidOffsets.length; i++) {", "+\t\tif (offset < invalidOffsets[i]) break; "]}], "num": 60370}