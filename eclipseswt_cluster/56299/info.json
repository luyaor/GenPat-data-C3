{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "69225599c4d9bd1a06d22aae11793de7", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c0dd12cf86ae1387bfacef3b93c937d3", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "46582c910be397c961aaaee8545cb7afc157368f", "commitAfterChange": "d8b150f7916e0bed718cb1b6682bc59249791c7a", "methodNumberBeforeChange": 78, "methodNumberAfterChange": 78, "signatureBeforeChange": " void shape (final int hdc, final StyleItem run)", "signatureAfterChange": " void shape (final int hdc, final StyleItem run)", "diff": ["-\t\tif (OS.ScriptStringAnalyse(metaFileDc, chars, chars.length, 0, -1, flags, 0, null, null, 0, 0, 0, ssa) == OS.S_OK) {", "+\t\t/*", "+\t\t* Bug in Uniscribe. In some version of Uniscribe, ScriptStringAnalyse crashes", "+\t\t* when the character array is too long. The fix is to limit the size of character", "+\t\t* array to two. Note, limiting the array to only one character would cause surrogate ", "+\t\t* pairs to stop working.", "+\t\t*/", "+\t\tif (OS.ScriptStringAnalyse(metaFileDc, chars, Math.min(chars.length, 2), 0, -1, flags, 0, null, null, 0, 0, 0, ssa) == OS.S_OK) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d2e7fe1dd1747e1d90774fc749e0cbb0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "b27a6c0d41a6ad5d3c547e2886432e800f532a40", "commitAfterChange": "b528177279d0a55db5915b815b5bfe6759a0fb7a", "methodNumberBeforeChange": 78, "methodNumberAfterChange": 78, "signatureBeforeChange": " void shape (final int hdc, final StyleItem run)", "signatureAfterChange": " void shape (final int hdc, final StyleItem run)", "diff": ["-\t\tif (OS.ScriptStringAnalyse(metaFileDc, chars, Math.min(chars.length, 2), 0, -1, flags, 0, null, null, 0, 0, 0, ssa) == OS.S_OK) {", "+\t\tchar[] sampleChars = new char[Math.min(chars.length, 2)];", "+\t\tSCRIPT_LOGATTR logAttr = new SCRIPT_LOGATTR();", "+\t\tbreakRun(run);", "+\t\tint count = 0;", "+\t\tfor (int i = 0; i < chars.length; i++) {", "+\t\t\tOS.MoveMemory(logAttr, run.psla + (i * SCRIPT_LOGATTR.sizeof), SCRIPT_LOGATTR.sizeof); ", "+\t\t\tif (!logAttr.fWhiteSpace) {", "+\t\t\t\tsampleChars[count++] = chars[i];", "+\t\t\t\tif (count == sampleChars.length) break;", "+\t\t\t}", "+\t\t}", "+\t\tif (OS.ScriptStringAnalyse(metaFileDc, sampleChars, count, 0, -1, flags, 0, null, null, 0, 0, 0, ssa) == OS.S_OK) {"]}], "num": 56299}