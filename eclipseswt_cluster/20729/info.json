{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "79d39e453ad7e93b210fe3bcbeb3ff96", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "da6340a1715c79c6024dfb74dfb3b738", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Program/cocoa/org/eclipse/swt/program/Program.java", "commitBeforeChange": "74c0e792b346f85e2b9067f710416658485a9a3b", "commitAfterChange": "e188a1e4ca35b8a449353a5ac187e7a405693faf", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " public static Program findProgram (String extension)", "signatureAfterChange": " public static Program findProgram (String extension)", "diff": ["-\tNSWorkspace workspace = NSWorkspace.sharedWorkspace();", "-\tint /*long*/ appName = OS.malloc(C.PTR_SIZEOF);", "-\tint /*long*/ type = OS.malloc(C.PTR_SIZEOF);", "-\tNSString temp = new NSString(OS.NSTemporaryDirectory());", "-\tNSString fileName = NSString.stringWith(\"swt\" + System.currentTimeMillis() + extension);", "-\tNSString fullPath = temp.stringByAppendingPathComponent(fileName);", "-\tNSFileManager fileManager = NSFileManager.defaultManager();", "-\tfileManager.createFileAtPath(fullPath, null, null);", "-\tworkspace.getInfoForFile(fullPath, appName, type);", "-\tfileManager.removeItemAtPath(fullPath, 0);", "-\tint /*long*/ [] buffer = new int /*long*/[1];", "-\tOS.memmove(buffer, appName, C.PTR_SIZEOF);", "-\tOS.free(appName);", "-\tOS.free(type);", "-\tif (buffer [0] != 0) {", "-\t\tNSString appPath = new NSString(buffer[0]);", "-\t\tNSBundle bundle = NSBundle.bundleWithPath(appPath);", "-\t\tif (bundle != null) return getProgram(bundle);", "+\tNSAutoreleasePool pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tNSWorkspace workspace = NSWorkspace.sharedWorkspace();", "+\t\tint /*long*/ appName = OS.malloc(C.PTR_SIZEOF);", "+\t\tint /*long*/ type = OS.malloc(C.PTR_SIZEOF);", "+\t\tNSString temp = new NSString(OS.NSTemporaryDirectory());", "+\t\tNSString fileName = NSString.stringWith(\"swt\" + System.currentTimeMillis() + extension);", "+\t\tNSString fullPath = temp.stringByAppendingPathComponent(fileName);", "+\t\tNSFileManager fileManager = NSFileManager.defaultManager();", "+\t\tfileManager.createFileAtPath(fullPath, null, null);", "+\t\tworkspace.getInfoForFile(fullPath, appName, type);", "+\t\tfileManager.removeItemAtPath(fullPath, 0);", "+\t\tint /*long*/ [] buffer = new int /*long*/[1];", "+\t\tOS.memmove(buffer, appName, C.PTR_SIZEOF);", "+\t\tOS.free(appName);", "+\t\tOS.free(type);", "+\t\tif (buffer [0] != 0) {", "+\t\t\tNSString appPath = new NSString(buffer[0]);", "+\t\t\tNSBundle bundle = NSBundle.bundleWithPath(appPath);", "+\t\t\tif (bundle != null) return getProgram(bundle);", "+\t\t}", "+\t\treturn null;", "+\t} finally {", "+\t\tpool.release();", "-\treturn null;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f40ebb90df7f834915dcf102de93fa6a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Program/cocoa/org/eclipse/swt/program/Program.java", "commitBeforeChange": "18a77004921c958d7933e6a4bf2f9879ef0cfdc3", "commitAfterChange": "235449f60e73b051bff45b523d24758455cf4aa9", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " public static Program findProgram (String extension)", "signatureAfterChange": " public static Program findProgram (String extension)", "diff": ["-//\tchar[] chars;", "-//\tif (extension.charAt (0) != '.') {", "-//\t\tchars = new char[extension.length()];", "-//\t\textension.getChars(0, chars.length, chars, 0);", "-//\t} else {", "-//\t\tchars = new char[extension.length() - 1];", "-//\t\textension.getChars(1, extension.length(), chars, 0);\t\t", "-//\t}", "-//\tint ext = OS.CFStringCreateWithCharacters(OS.kCFAllocatorDefault, chars, chars.length);", "-//\tProgram program = null;", "-//\tif (ext != 0) {", "-//\t\tbyte[] fsRef = new byte[80];", "-//\t\tif (OS.LSGetApplicationForInfo(OS.kLSUnknownType, OS.kLSUnknownCreator, ext, OS.kLSRolesAll, fsRef, null) == OS.noErr) {", "-//\t\t\tprogram = getProgram(fsRef);", "-//\t\t}", "-//\t\tOS.CFRelease(ext);", "-//\t}", "-//\treturn program;", "+\tif (extension.charAt(0) != '.') extension = \".\" + extension;", "+\tNSWorkspace workspace = NSWorkspace.sharedWorkspace();", "+\tint /*long*/ appName = OS.malloc(C.PTR_SIZEOF);", "+\tint /*long*/ type = OS.malloc(C.PTR_SIZEOF);", "+\tNSString temp = new NSString(OS.NSTemporaryDirectory());", "+\tNSString fileName = NSString.stringWith(\"swt\" + System.currentTimeMillis() + extension);", "+\tNSString fullPath = temp.stringByAppendingPathComponent(fileName);", "+\tNSFileManager fileManager = NSFileManager.defaultManager();", "+\tfileManager.createFileAtPath(fullPath, null, null);", "+\tworkspace.getInfoForFile(fullPath, appName, type);", "+\tfileManager.removeItemAtPath(fullPath, 0);", "+\tint /*long*/ [] buffer = new int /*long*/[1];", "+\tOS.memmove(buffer, appName, C.PTR_SIZEOF);", "+\tOS.free(appName);", "+\tOS.free(type);", "+\tif (buffer [0] != 0) {", "+\t\tNSString appPath = new NSString(buffer[0]);", "+\t\tNSBundle bundle = NSBundle.bundleWithPath(appPath);", "+\t\tif (bundle != null) {", "+\t\t\tNSString CFBundleName = NSString.stringWith(\"CFBundleName\");", "+\t\t\tNSString CFBundleDisplayName = NSString.stringWith(\"CFBundleDisplayName\");", "+\t\t\tid bundleName = bundle.objectForInfoDictionaryKey(CFBundleDisplayName);", "+\t\t    if (bundleName == null) {", "+\t\t        bundleName = bundle.objectForInfoDictionaryKey(CFBundleName);", "+\t\t    }", "+\t\t    if (bundleName == null) {", "+\t\t        bundleName = appPath.lastPathComponent().stringByDeletingPathExtension();", "+\t\t    }", "+\t\t    NSString name = new NSString(bundleName.id);\t    ", "+\t\t\tProgram program = new Program();", "+\t\t\tprogram.name = name.getString();", "+\t\t\treturn program;", "+\t\t}", "+\t}"]}], "num": 20729}