{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "39651d64560894c610d75bf20aa25287", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c8a33609028a1e2ad9cec50b2be6f5ed", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "4ba1138c18d9e572e740905ef25012f42b3617a1", "commitAfterChange": "571baac413606d2aa026e05a07e86f9a4b9a106a", "methodNumberBeforeChange": 58, "methodNumberAfterChange": 53, "signatureBeforeChange": " void shape (final int hdc, final StyleItem run)", "signatureAfterChange": " void shape (final int hdc, final StyleItem run)", "diff": ["-\tif (run.style != null && run.style.metrics != null) {", "-\t\tGlyphMetrics metrics = run.style.metrics;", "-\t\trun.width = metrics.width * run.glyphCount;", "-\t\trun.ascent = metrics.ascent;", "-\t\trun.descent = metrics.descent;\t\t", "-\t} else {", "-\t\trun.width = abc[0] + abc[1] + abc[2];", "-\t\tTEXTMETRIC lptm = OS.IsUnicode ? (TEXTMETRIC)new TEXTMETRICW() : new TEXTMETRICA();", "-\t\tOS.GetTextMetrics(hdc, lptm);", "-\t\trun.ascent = lptm.tmAscent;", "-\t\trun.descent = lptm.tmDescent;", "-\t\trun.leading = lptm.tmInternalLeading;", "-\t}", "-\tif (run.style != null) {", "-\t\trun.ascent += run.style.rise;", "-\t\trun.descent -= +run.style.rise; ", "-\t}", "+\trun.width = abc[0] + abc[1] + abc[2];", "+\tTEXTMETRIC lptm = OS.IsUnicode ? (TEXTMETRIC)new TEXTMETRICW() : new TEXTMETRICA();", "+\tOS.GetTextMetrics(hdc, lptm);", "+\trun.ascent = lptm.tmAscent;", "+\trun.descent = lptm.tmDescent;", "+\trun.leading = lptm.tmInternalLeading;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "75742da0be01e69126fe0fda872d489f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "4ba1138c18d9e572e740905ef25012f42b3617a1", "commitAfterChange": "571baac413606d2aa026e05a07e86f9a4b9a106a", "methodNumberBeforeChange": 24, "methodNumberAfterChange": 21, "signatureBeforeChange": " public FontMetrics getLineMetrics (int lineIndex)", "signatureAfterChange": " public FontMetrics getLineMetrics (int lineIndex)", "diff": ["-\t\tint ascent = this.ascent, descent = this.descent, leading = 0, height = 0;", "+\t\tint ascent = this.ascent, descent = this.descent, leading = 0, aveCharWidth = 0, height = 0;", "-\t\t\tif (run.style != null && run.style.metrics != null) {", "-\t\t\t\tGlyphMetrics glyphMetrics = run.style.metrics; ", "-\t\t\t\tascent = Math.max(ascent, glyphMetrics.ascent);", "-\t\t\t\tdescent = Math.max(descent, glyphMetrics.descent);", "-\t\t\t\theight= Math.max(height, glyphMetrics.ascent + glyphMetrics.descent);", "-\t\t\t} else {", "-\t\t\t\tcheckItem(srcHdc, run);", "-\t\t\t\tOS.SelectObject(srcHdc, getItemFont(run));", "-\t\t\t\tOS.GetTextMetrics(srcHdc, lptm);", "-\t\t\t\tif (lptm.tmAscent > ascent) {", "-\t\t\t\t\tascent = lptm.tmAscent;", "-\t\t\t\t\tleading = lptm.tmInternalLeading;", "-\t\t\t\t}", "-\t\t\t\tdescent = Math.max(descent, lptm.tmDescent);", "-\t\t\t\theight = Math.max(height, lptm.tmHeight);\t\t\t\t", "-\t\t\t}", "+\t\t\tcheckItem(srcHdc, run);", "+\t\t\tOS.SelectObject(srcHdc, getItemFont(run));", "+\t\t\tOS.GetTextMetrics(srcHdc, lptm);", "+\t\t\tascent = Math.max(ascent, lptm.tmAscent);", "+\t\t\tdescent = Math.max(descent, lptm.tmDescent);", "+\t\t\theight = Math.max(height, lptm.tmHeight);", "+\t\t\tleading = Math.max(leading, lptm.tmInternalLeading);", "+\t\t\taveCharWidth += lptm.tmAveCharWidth;", "+\t\tlptm.tmAveCharWidth = aveCharWidth / lineRuns.length;"]}], "num": 6286}