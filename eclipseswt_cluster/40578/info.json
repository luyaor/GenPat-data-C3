{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "342990e52beb2232ef299bd7e28fc2a5", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1f9b5485f582e3260fe15aab5ead4add", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/cocoa/org/eclipse/swt/dnd/ImageTransfer.java", "commitBeforeChange": "6b0a245288556e7224d3c56682401ca81ba95245", "commitAfterChange": "4dbd09dcd54c5e8b8416ccbe2fdfacc6901be61f", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public void javaToNative(Object object, TransferData transferData)", "signatureAfterChange": " public void javaToNative(Object object, TransferData transferData)", "diff": ["-\ttransferData.result = -1;", "-", "-\tint handle = image.handle;", "-\tint width = OS.CGImageGetWidth(handle);", "-\tint height = OS.CGImageGetHeight(handle);", "-\tint alphaInfo = OS.CGImageGetAlphaInfo(handle);", "-\tint bpr = OS.CGImageGetBytesPerRow(handle);", "-", "-\tRect rect = new Rect();", "-\trect.left = 0;", "-\trect.top = 0;", "-\trect.right = (short) width;", "-\trect.bottom = (short) height;", "-", "-\tint[] gWorld = new int[1];", "-\tint format = OS.k24RGBPixelFormat;", "-\tif (alphaInfo != OS.kCGImageAlphaNoneSkipFirst) {", "-\t\tformat = OS.k32ARGBPixelFormat;", "-\t}", "-\tOS.NewGWorldFromPtr(gWorld, format, rect, 0, 0, 0, image.data, bpr);", "-\tint[] curPort = new int[1];", "-\tint[] curGWorld = new int[1];", "-\tOS.GetGWorld(curPort, curGWorld);", "-\tOS.SetGWorld(gWorld[0], curGWorld[0]);", "-\tint pictHandle = OS.OpenPicture(rect);", "-\tint portBitMap = OS.GetPortBitMapForCopyBits(gWorld[0]);", "-\tOS.CopyBits(portBitMap, portBitMap, rect, rect, (short) OS.srcCopy, 0);", "-\tOS.ClosePicture();", "-\tOS.SetGWorld(curPort[0], curGWorld[0]);", "-\tOS.DisposeGWorld(gWorld[0]);", "-\tint length = OS.GetHandleSize(pictHandle);", "-\tOS.HLock(pictHandle);", "-\tint[] buffer = new int[1];", "-\tOS.memmove(buffer, pictHandle, 4);", "-\tbyte[] pictData = new byte[length];", "-\tOS.memmove(pictData, buffer[0], length);", "-\tOS.HUnlock(pictHandle);", "-\tOS.KillPicture(pictHandle);", "+\tNSImage handle = image.handle;", "+\ttransferData.data = handle.TIFFRepresentation();", "-", "-\ttransferData.data = new byte[][] { pictData };", "-\ttransferData.result = OS.noErr;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc4e5fb1d1b01cafa433a92d752a11ed", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/DateTime.java", "commitBeforeChange": "815face9c5027040f3c7c99b10975d0bd5a29ae0", "commitAfterChange": "35a61cc1c43b28bcac378ce6ae2744f3a0935b9d", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "signatureAfterChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "diff": ["-\t\t\t// Determine the height of the current font.", "-\t\t\tint [] currentPort = new int [1];", "-\t\t\tshort themeFont = (short) defaultThemeFont ();", "-\t\t\tif (font != null) {", "-\t\t\t\tthemeFont = OS.kThemeCurrentPortFont;", "-\t\t\t\tOS.GetPort (currentPort);", "-\t\t\t\tOS.SetPortWindowPort (OS.GetControlOwner (handle));", "-\t\t\t\tOS.TextFont (font.id);", "-\t\t\t\tOS.TextFace (font.style);", "-\t\t\t\tOS.TextSize (font.size);", "-\t\t\t}", "-\t\t\tFontInfo info = new FontInfo ();", "-\t\t\tOS.GetFontInfo (info);", "-\t\t\theight = info.ascent + info.descent;", "-\t\t\t", "-\t\t\t// Max with the height of the up/down buttons.", "-\t\t\tint [] metric = new int [1];", "-\t\t\tOS.GetThemeMetric (OS.kThemeMetricLittleArrowsHeight, metric);", "-\t\t\theight = Math.max (height, metric [0]);", "-\t\t\t", "-\t\t\t// Determine the width of the date or time string in the current font.", "-\t\t\t// TODO: All of these strings need to be locale-specific", "-\t\t\tString string = (style & SWT.SHORT) != 0 ? \"00/0000\" : \"00/00/0000\";", "-\t\t\tif ((style & SWT.TIME) != 0) string = (style & SWT.SHORT) != 0 ? \"00:00 AM\" : \"00:00:00 AM\";", "-\t\t\t", "-\t\t\tchar [] buffer = new char [string.length ()];", "-\t\t\tstring.getChars (0, buffer.length, buffer, 0);", "-\t\t\tint ptr = OS.CFStringCreateWithCharacters (OS.kCFAllocatorDefault, buffer, buffer.length);", "-\t\t\torg.eclipse.swt.internal.carbon.Point ioBounds = new org.eclipse.swt.internal.carbon.Point ();", "-\t\t\tif (ptr != 0) {", "-\t\t\t\tOS.GetThemeTextDimensions (ptr, themeFont, OS.kThemeStateActive, false, ioBounds, null);", "-\t\t\t\twidth = Math.max (width, ioBounds.h);", "-\t\t\t\theight = Math.max (height, ioBounds.v);", "-\t\t\t\tOS.CFRelease (ptr);", "-\t\t\t}", "-\t\t\tif (font != null) {", "-\t\t\t\tOS.SetPort (currentPort [0]);", "-\t\t\t}", "-\t\t\t", "-\t\t\t// Add the width of the up/down buttons.", "-\t\t\tOS.GetThemeMetric (OS.kThemeMetricLittleArrowsWidth, metric);", "-\t\t\twidth += metric [0];", "-\t\t\t", "-\t\t\t// Add the margin between the text and the buttons.", "-\t\t\tOS.GetThemeMetric (OS.kThemeMetricEditTextWhitespace, metric);", "-\t\t\twidth += metric [0] * 4;", "+\t\t\tRect rect = new Rect ();", "+\t\t\tOS.GetBestControlRect (handle, rect, null);", "+\t\t\twidth = rect.right - rect.left;", "+\t\t\theight = rect.bottom - rect.top;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "78db364ed89f74e3591a87494a527ca9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/photon/org/eclipse/swt/widgets/Canvas.java", "commitBeforeChange": "3fb799dcaa7d449679ed92f9829fbed85aa6fd1d", "commitAfterChange": "6c0e3d76ce668620fd159ac504e2b5d9a48852be", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "\r \r public void scroll (int destX, int destY, int x, int y, int width, int height, boolean all)", "signatureAfterChange": "\r \r public void scroll (int destX, int destY, int x, int y, int width, int height, boolean all)", "diff": ["-\tPhRect_t rect = new PhRect_t();\r", "-\trect.ul_x = (short)x;\r", "-\trect.ul_y = (short)y;\r", "-\trect.lr_x = (short)(x + width - 1);\r", "-\trect.lr_y = (short)(y + height - 1);\r", "-\tPhPoint_t delta = new PhPoint_t();\r", "-\tdelta.x = (short)deltaX;\r", "-\tdelta.y = (short)deltaY;\r", "-\tOS.PtFlush ();\r", "-\tOS.PhBlit(OS.PtWidgetRid(handle), rect, delta);\r", "-\tboolean overlaps = (destX < x + width) && (destY < y + height) &&\r", "-\t\t(destX + width > x) && (destY + height > y);\r", "-\tif (!overlaps) {\r", "-\t\tOS.PtDamageExtent (handle, rect);\r", "-\t} else {\r", "-\t\tint src = OS.PhGetTile();\r", "-\t\tint dest = OS.PhGetTile();\r", "-\t\tOS.memmove(src, rect, PhRect_t.sizeof);\r", "-\t\tOS.memmove(dest, rect, PhRect_t.sizeof);\r", "-\t\tOS.PhTranslateTiles(dest, delta);\r", "-\t\tint damage_tile = OS.PhClipTilings(src, dest, null);\r", "-\t\tint[] damage_rects_count = new int[1];\r", "-\t\tint damage_rects = OS.PhTilesToRects(damage_tile, damage_rects_count);\r", "-\t\tOS.PhFreeTiles(dest);\r", "-\t\tOS.PhFreeTiles(damage_tile);\r", "-\t\tfor (int i=0; i<damage_rects_count[0]; i++) {\r", "-\t\t\tOS.memmove(rect, damage_rects + (i * PhRect_t.sizeof), PhRect_t.sizeof);\r", "-\t\t\tOS.PtDamageExtent (handle, rect);\r", "-\t\t}\r", "-\t\tOS.free(damage_rects);\r", "-\t}\r", "+\tGC gc = new GC (this);\r", "+\tgc.copyArea (x, y, width, height, destX, destY);\r", "+\tgc.dispose ();\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6170f45d038ce9f4bc09946a88005c62", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "1879f0110762a14d14725c1ff98b0c876188176a", "commitAfterChange": "ec0b807b1bde11bc567a2a3419e26587b448a196", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 11, "signatureBeforeChange": " public void copy ()", "signatureAfterChange": " public void copy ()", "diff": ["-\tint [] str = new int [1];", "-\tshort start, end;", "-\tif ((style & SWT.READ_ONLY) != 0) {", "-\t\t// NEEDS WORK - getting whole text, not just selection", "-\t\tint index = OS.GetControlValue (handle);", "-\t\tif (OS.CopyMenuItemTextAsCFString(menuHandle, (short)index, str) != OS.noErr) return;", "-\t\tstart = 0; end = (short)OS.CFStringGetLength (str [0]);", "-\t\tif (start >= end) {", "-\t\t\tOS.CFRelease (str [0]);", "-\t\t\treturn;", "-\t\t}", "-\t} else {", "-\t\tshort [] s = new short [2];", "-\t\tOS.GetControlData (handle, (short)OS.kHIComboBoxEditTextPart, OS.kControlEditTextSelectionTag, 4, s, null);", "-\t\tif (s [0] >= s [1]) return;", "-\t\tstart = s [0]; end = s [1];", "-\t\tif (OS.GetControlData (handle, (short)OS.kHIComboBoxEditTextPart, OS.kControlEditTextCFStringTag, 4, str, null) != OS.noErr) return;", "-\t}", "-\tCFRange range = new CFRange ();", "-\trange.location = start;", "-\trange.length = end - start;", "-\tint encoding = OS.CFStringGetSystemEncoding ();", "-\tint [] size = new int [1];", "-\tOS.CFStringGetBytes (str [0], range, encoding, (byte)'?', true, null, 0, size);", "-\tbyte [] buffer = new byte [size [0]];", "-\tOS.CFStringGetBytes (str [0], range, encoding, (byte)'?', true, buffer, size [0], size);", "-\tOS.CFRelease (str [0]);", "-\t", "-\tOS.ClearCurrentScrap();", "-\tint[] scrap = new int [1];", "+\tPoint selection = getSelection ();", "+\tif (selection.x == selection.y) return;", "+\tcopy (getText (selection.x, selection.y));", "+}", "-\tOS.PutScrapFlavor(scrap [0], OS.kScrapFlavorTypeText, 0, buffer.length, buffer);"]}], "num": 40578}