{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "693de78524a8ef1e0542e5233944bfc7", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "735eebe1d0d92f791dbbd63af0cbf654", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "f1585125177ab04bbadcf62b2bcbb859d48f37f4", "commitAfterChange": "91bb0a8520c84853db3a649f0cbf7958861ecb66", "methodNumberBeforeChange": 39, "methodNumberAfterChange": 39, "signatureBeforeChange": " public void setFont (Font font)", "signatureAfterChange": " public void setFont (Font font)", "diff": ["-\tsuper.setFont (font);", "+\t/*", "+\t* Bug in Motif. Setting the font in a combo widget that does", "+\t* not have any items causes a GP on UTF-8 locale.", "+\t* The fix is to add an item, change the font, then", "+\t* remove the added item at the end. ", "+\t*/", "+\tint [] argList1 = {OS.XmNitems, 0, OS.XmNitemCount, 0,};", "+\tOS.XtGetValues (handle, argList1, argList1.length / 2);", "+\tboolean fixString = OS.IsDBLocale && argList1 [3] == 0;", "+\tif (fixString) {", "+\t\tbyte [] buffer = Converter.wcsToMbcs (getCodePage (), \"string\", true);", "+\t\tint xmString = OS.XmStringCreateLocalized (buffer);", "+\t\tOS.XmComboBoxAddItem (handle, xmString, -1, false);", "+\t\tOS.XmStringFree (xmString);", "+\t}", "+\tsuper.setFont (font);", "+\tif (fixString) OS.XtSetValues (handle, argList1, argList1.length / 2);\t", "+", "-\t\tint [] argList = {OS.XmNwidth, 0, OS.XmNheight, 0, OS.XmNborderWidth, 0};", "-\t\tOS.XtGetValues (handle, argList, argList.length / 2);", "-\t\tOS.XtResizeWidget (handle, argList [1], argList [3] + 1, argList [5]);", "-\t\tOS.XtResizeWidget (handle, argList [1], argList [3], argList [5]);", "+\t\tint [] argList2 = {OS.XmNwidth, 0, OS.XmNheight, 0, OS.XmNborderWidth, 0};", "+\t\tOS.XtGetValues (handle, argList2, argList2.length / 2);", "+\t\tOS.XtResizeWidget (handle, argList2 [1], argList2 [3] + 1, argList2 [5]);", "+\t\tOS.XtResizeWidget (handle, argList2 [1], argList2 [3], argList2 [5]);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9fb6ef72bda1c00b2f3586195cc5d0f1", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 21, "signatureBeforeChange": " public int getTextHeight ()", "signatureAfterChange": "  public int getTextHeight ()", "diff": ["- */", "+", "-\tif ((style & SWT.DROP_DOWN) != 0) {", "-\t\t/*", "-\t\t* Bug in MOTIF.  For some reason, XtQueryGeometry ()", "-\t\t* returns the wrong height when the combo is not realized.", "-\t\t* The fix is to force the combo to be realized by forcing", "-\t\t* the shell to be realized.", "-\t\t*/", "-        /* AW", "-\t\tif (!OS.XtIsRealized (handle)) getShell ().realizeWidget ();", "-\t\tXtWidgetGeometry result = new XtWidgetGeometry ();", "-\t\tresult.request_mode = OS.CWHeight;", "-\t\tOS.XtQueryGeometry (handle, null, result);", "-\t\treturn result.height;", "-        */", "-        return 26;", "-\t} else {", "-\t\t/* Calculate text field height. */", "-        /* AW", "-\t\tint [] argList = {OS.XmNtextField, 0};", "-\t\tOS.XtGetValues (handle, argList, argList.length / 2);", "-\t\tint [] argList2 = {OS.XmNmarginHeight, 0};", "-\t\tOS.XtGetValues (argList[1], argList2, argList2.length / 2);", "-\t\tint height = getFontHeight ();", "-\t\tXRectangle rect = new XRectangle ();", "-\t\tOS.XmWidgetGetDisplayRect (argList[1], rect);", "-\t\theight += (rect.y * 2) + (2 * argList2[1]);", "-        */", "-", "-\t\t/* Add in combo box margins. */", "-        /* AW", "-\t\tint [] argList3 = {OS.XmNmarginHeight, 0, OS.XmNshadowThickness, 0, OS.XmNhighlightThickness, 0};", "-\t\tOS.XtGetValues(handle, argList3, argList3.length / 2);", "-\t\theight += (2 * argList3[1]) + (2 * argList3[3]) + (2 * argList3[5]);", "-", "-\t\treturn height;", "-        */", "-        return 26;", "-\t}", "+\treturn 26; // NEEDS WORK"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cfbbc77aa6023a8758bec034bb4d9d8a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "2adc7bfc8aac13ddcf9312b69aa9703cfc6bc5cd", "commitAfterChange": "b91b7259a2035142fccc1e2196ba1b205c2207c5", "methodNumberBeforeChange": 53, "methodNumberAfterChange": 53, "signatureBeforeChange": "\r void initializeLabel ()", "signatureAfterChange": "\r void initializeLabel ()", "diff": ["-\twidgetHandle = OS.XmCreateLabel (shellHandle, null, null, 0);\r", "+\t\t\r", "+\t/* \r", "+\t * Bug in Motif. When running on UTF-8 Motif  becomes unstable \r", "+\t * (causing GPs) if the first label widget is create without a XmString.\r", "+\t * The fix is to create the Label with a non-emptyXmString.\r", "+\t */\r", "+\tbyte [] buffer = Converter.wcsToMbcs(null, \"string\", true);\r", "+\tint xmString = OS.XmStringCreateLocalized(buffer);\r", "+\tint [] argList1 = {OS.XmNlabelType, OS.XmSTRING, OS.XmNlabelString, xmString};\r", "+\twidgetHandle = OS.XmCreateLabel (shellHandle, null, argList1, argList1.length / 2);\r", "-\tint [] argList = {OS.XmNforeground, 0, OS.XmNbackground, 0, OS.XmNfontList, 0};\r", "-\tOS.XtGetValues (widgetHandle, argList, argList.length / 2);\r", "-\tlabelForeground = argList [1];  labelBackground = argList [3]; \r", "+\tint [] argList2 = {OS.XmNforeground, 0, OS.XmNbackground, 0, OS.XmNfontList, 0};\r", "+\tOS.XtGetValues (widgetHandle, argList2, argList2.length / 2);\r", "+\tlabelForeground = argList2 [1];  labelBackground = argList2 [3]; \r", "-\tlabelFont = Font.motif_new (this, OS.XmFontListCopy (argList [5]));\r", "+\tlabelFont = Font.motif_new (this, OS.XmFontListCopy (argList2 [5]));\r", "+\tOS.XmStringFree (xmString);\r"]}], "num": 57290}