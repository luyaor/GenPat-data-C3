{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "146953549500af245a1a97a7f2264898", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f7e8f8790b3b43b982874daf168d0e65", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/motif/org/eclipse/swt/dnd/Clipboard.java", "commitBeforeChange": "147d1615f621339f30d0227193f0b040907c9480", "commitAfterChange": "4f94a8e41c5f58fd8cc31f50891f992413c14d7f", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 6, "signatureBeforeChange": " public String[] getAvailableTypeNames()", "signatureAfterChange": " public String[] getAvailableTypeNames()", "diff": ["+\tbyte[][] types = _getAvailableTypes();", "+\tString[] names = new String[types.length];", "+\tfor (int i = 0; i < names.length; i++) {", "+\t\t/* Use the character encoding for the default locale */", "+\t\tnames[i] = new String(Converter.mbcsToWcs(null, types[i]));", "+\t}", "+\treturn names;", "+}", "-\tif (xDisplay == 0)", "-\t\tDND.error(SWT.ERROR_UNSPECIFIED);", "-\tif (xWindow == 0)", "-\t\tDND.error(SWT.ERROR_UNSPECIFIED);", "-\tif (OS.XmClipboardInquireCount(xDisplay, xWindow, count, max_length) != OS.XmClipboardSuccess)", "-\t\tDND.error(SWT.ERROR_UNSPECIFIED);", "-\tString[] types = new String[count[0]];", "-\t\tif (rc == OS.XmClipboardNoData){", "-\t\t\ttypes[i] = \"\";", "-\t\t\tcontinue;", "-\t\t}", "-\t\tif (rc != OS.XmClipboardSuccess)", "-\t\t\tDND.error(SWT.ERROR_UNSPECIFIED);", "-\t\tchar [] unicode = Converter.mbcsToWcs (null, buffer2);", "-\t\ttypes[i] = new String (unicode);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5abb76d5f1d2b3348d915cf02d60a2e5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/motif/org/eclipse/swt/dnd/Clipboard.java", "commitBeforeChange": "00ed21c8f8c77f61853a45cda676574d76d69e41", "commitAfterChange": "8e00f3751d53017bb47fe8df7b2fb0596267f9cb", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 13, "signatureBeforeChange": "  private byte[][] _getAvailableTypes()", "signatureAfterChange": "  int[] getAvailableTypes(int xDisplay, int selection)", "diff": ["+", "+int[] getAvailableTypes(int xDisplay, int selection) {", "+\tdone = false;", "+\tselectionValue = null; selectionTransfer = null;", "+\tOS.XtGetSelectionValue(shellHandle, selection, targetsAtom, XtSelectionCallbackCallback.getAddress(), 0, OS.CurrentTime);", "+\tif (!done) {", "+\t\tint xtContext = OS.XtDisplayToApplicationContext(xDisplay);", "+\t\tint selectionTimeout = OS.XtAppGetSelectionTimeout(xtContext);", "+\t\t_wait(selectionTimeout);", "+\t\t", "+\t}", "+\treturn (!done || selectionValue == null) ? new int[0] : (int[])selectionValue;", "-", "-private byte[][] _getAvailableTypes() {", "-\tbyte[][] types = new byte[0][];", "-\tint[] count = new int[1];", "-\tint[] max_length = new int[1];", "-\tint xDisplay = OS.XtDisplay (shellHandle);", "-\tif (xDisplay == 0) return types;", "-\tint xWindow = OS.XtWindow (shellHandle);", "-\tif (xWindow == 0) return types;", "-\tif (OS.XmClipboardInquireCount(xDisplay, xWindow, count, max_length) == 0) {", "-\t\treturn types;", "-\t}", "-\tif (count[0] == 0) return types;", "-\ttypes = new byte[count[0]][];", "-\tfor (int i = 0; i < count[0]; i++) {", "-\t\tbyte[] buffer = new byte[max_length[0]];", "-\t\tint[] copied_length = new int[1];", "-\t\tint rc = OS.XmClipboardInquireFormat(xDisplay, xWindow, i + 1, buffer, buffer.length, copied_length);", "-\t\tif (rc != OS.XmClipboardSuccess) continue;", "-\t\tindex++;", "-\t\tbyte[] buffer2 = new byte[copied_length[0]];", "-\t\tSystem.arraycopy(buffer, 0, buffer2, 0, copied_length[0]);", "-\t\ttypes[index] = buffer2;", "-\t\ttypes = new byte[0][0];", "-\t} else if (index + 1 < types.length) {", "-\t\tbyte[][] newTypes = new byte[index + 1][];", "-\t\tSystem.arraycopy(types, 0, newTypes, 0, index + 1);", "-\t\ttypes = newTypes;", "-\treturn types;"]}], "num": 52138}