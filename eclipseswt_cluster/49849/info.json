{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9c596a185fe17a5b9a099ba446be3aad", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1b9ad96819bf2011665adeeb9b8bd76e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder2.java", "commitBeforeChange": "bdf90f4a4dba97c8432294befc5c28758027ecae", "commitAfterChange": "f278ec5644c5936371a8e843bfc935318521e5c6", "methodNumberBeforeChange": 54, "methodNumberAfterChange": 55, "signatureBeforeChange": " void onMouse(Event event)", "signatureAfterChange": " void onMouse(Event event)", "diff": ["-\t\t\t\tif (items[i].getBounds().contains(x, y)) {", "-\t\t\t\t\tif (i == selectedIndex) {", "-\t\t\t\t\t\tshowSelection();", "-\t\t\t\t\t\treturn;", "-\t\t\t\t\t}", "+\t\t\t\tCTabItem2 item = items[i];", "+\t\t\t\tRectangle bounds = item.getBounds();", "+\t\t\t\tif (bounds.contains(x, y)) {", "+\t\t\t\t\tif (!single && i != topTabIndex && bounds.x + bounds.width >= getRightItemEdge())return;", "-\t\t\t\t\tshowList(rect, SWT.LEFT);", "+\t\t\t\t\tshowList(rect, SWT.RIGHT);", "-\t\t\t\t\t\t\tshowList(rect, SWT.RIGHT);", "+\t\t\t\t\t\t\tshowList(rect, SWT.LEFT);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f510d0ca825d061ac1a716bbccc9f32b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Printing/cocoa/org/eclipse/swt/printing/Printer.java", "commitBeforeChange": "77b4feca7776d7a102f6b78d108d292827dbe92c", "commitAfterChange": "4d5c21d276610d76998a87692a93017e18f6ddcc", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": " protected void create(DeviceData deviceData)", "signatureAfterChange": " protected void create(DeviceData deviceData)", "diff": ["-\tNSAutoreleasePool pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "-\ttry {", "-\t\tdata = (PrinterData)deviceData;", "-\t\tif (data.otherData != null) {", "-\t\t\tNSData nsData = NSData.dataWithBytes(data.otherData, data.otherData.length);", "-\t\t\tprintInfo = new NSPrintInfo(NSKeyedUnarchiver.unarchiveObjectWithData(nsData).id);", "-\t\t} else {", "-\t\t\tprintInfo = NSPrintInfo.sharedPrintInfo();", "-\t\t}", "-\t\tprintInfo.retain();", "-\t\tprinter = NSPrinter.printerWithName(NSString.stringWith(data.name));", "-\t\tif (printer != null) {", "-\t\t\tprinter.retain();", "-\t\t\tprintInfo.setPrinter(printer);", "-\t\t}", "-\t\t/*", "-\t\t* Bug in Cocoa.  For some reason, the output still goes to the printer when", "-\t\t* the user chooses the preview button.  The fix is to reset the job disposition.", "-\t\t*/", "-\t\tNSString job = printInfo.jobDisposition();", "-\t\tif (job.isEqual(new NSString(OS.NSPrintPreviewJob()))) {", "-\t\t\tprintInfo.setJobDisposition(job);", "-\t\t}", "-\t\tNSRect rect = new NSRect();", "-\t\twindow = (NSWindow)new NSWindow().alloc();", "-\t\twindow.initWithContentRect(rect, OS.NSBorderlessWindowMask, OS.NSBackingStoreBuffered, false);", "-\t\tString className = \"SWTPrinterView\"; //$NON-NLS-1$", "-\t\tif (OS.objc_lookUpClass(className) == 0) {", "-\t\t\tIsFlipped = new Callback(getClass(), \"isFlipped\", 2); //$NON-NLS-1$", "-\t\t\tint /*long*/ cls = OS.objc_allocateClassPair(OS.class_NSView, className, 0);", "-\t\t\tOS.class_addMethod(cls, OS.sel_isFlipped, IsFlipped.getAddress(), \"@:\");", "-\t\t\tOS.objc_registerClassPair(cls);", "-\t\t}", "-\t\tview = (NSView)new SWTPrinterView().alloc();", "-\t\tview.initWithFrame(rect);", "-\t\twindow.setContentView(view);", "-\t\toperation = NSPrintOperation.printOperationWithView(view, printInfo);", "-\t\toperation.retain();", "-\t\toperation.setShowsPrintPanel(false);", "-\t\toperation.setShowsProgressPanel(false);", "-\t} finally {", "-\t\tpool.release();", "+\tNSThread nsthread = NSThread.currentThread();", "+\tNSMutableDictionary dictionary = nsthread.threadDictionary();", "+\tNSString key = NSString.stringWith(\"SWT_NSAutoreleasePool\");", "+\tpool = new NSAutoreleasePool(dictionary.objectForKey(key));", "+", "+\tdata = (PrinterData)deviceData;", "+\tif (data.otherData != null) {", "+\t\tNSData nsData = NSData.dataWithBytes(data.otherData, data.otherData.length);", "+\t\tprintInfo = new NSPrintInfo(NSKeyedUnarchiver.unarchiveObjectWithData(nsData).id);", "+\t} else {", "+\t\tprintInfo = NSPrintInfo.sharedPrintInfo();", "+\tprintInfo.retain();", "+\tprinter = NSPrinter.printerWithName(NSString.stringWith(data.name));", "+\tif (printer != null) {", "+\t\tprinter.retain();", "+\t\tprintInfo.setPrinter(printer);", "+\t}", "+\t/*", "+\t* Bug in Cocoa.  For some reason, the output still goes to the printer when", "+\t* the user chooses the preview button.  The fix is to reset the job disposition.", "+\t*/", "+\tNSString job = printInfo.jobDisposition();", "+\tif (job.isEqual(new NSString(OS.NSPrintPreviewJob()))) {", "+\t\tprintInfo.setJobDisposition(job);", "+\t}", "+\tNSRect rect = new NSRect();", "+\twindow = (NSWindow)new NSWindow().alloc();", "+\twindow.initWithContentRect(rect, OS.NSBorderlessWindowMask, OS.NSBackingStoreBuffered, false);", "+\tString className = \"SWTPrinterView\"; //$NON-NLS-1$", "+\tif (OS.objc_lookUpClass(className) == 0) {", "+\t\tIsFlipped = new Callback(getClass(), \"isFlipped\", 2); //$NON-NLS-1$", "+\t\tint /*long*/ cls = OS.objc_allocateClassPair(OS.class_NSView, className, 0);", "+\t\tOS.class_addMethod(cls, OS.sel_isFlipped, IsFlipped.getAddress(), \"@:\");", "+\t\tOS.objc_registerClassPair(cls);", "+\t}", "+\tview = (NSView)new SWTPrinterView().alloc();", "+\tview.initWithFrame(rect);", "+\twindow.setContentView(view);", "+\toperation = NSPrintOperation.printOperationWithView(view, printInfo);", "+\toperation.retain();", "+\toperation.setShowsPrintPanel(false);", "+\toperation.setShowsProgressPanel(false);"]}], "num": 49849}