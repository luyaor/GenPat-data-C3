{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c0f658c27ff01d34eadf66531b4919b5", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "153b8ec6178b0df690d40b60fa95507c", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "1c6a4189f07d97e9405f58322637972f78a68429", "commitAfterChange": "a11744334121c31b812d90d1d6c723eac3d03dc2", "methodNumberBeforeChange": 42, "methodNumberAfterChange": 42, "signatureBeforeChange": "\r \r void releaseWidget ()", "signatureAfterChange": "\r \r void releaseWidget ()", "diff": ["-\t\r", "+\r", "-\t* of items in a table (>1000), it is much faster to\r", "-\t* delete each item with LVM_DELETEITEM rather than\r", "-\t* using LVM_DELETEALLITEMS.  The fix is to delete the\r", "-\t* items, one by one.\r", "+\t* of columns and items in a table (>1000) where each\r", "+\t* of the subitems in the table has a string, it is much\r", "+\t* faster to delete each item with LVM_DELETEITEM rather\r", "+\t* than using LVM_DELETEALLITEMS.  The fix is to detect\r", "+\t* this case and delete the items, one by one.\r", "-\t*/\r", "-\t/* Turn off redraw and leave it off */\r", "-\tOS.SendMessage (handle, OS.WM_SETREDRAW, 0, 0);\r", "-\tfor (int i=itemCount-1; i>=0; --i) {\r", "-\t\tignoreSelect = true;\r", "-\t\tOS.SendMessage (handle, OS.LVM_DELETEITEM, i, 0);\r", "-\t\tignoreSelect = false;\r", "-\t\tTableItem item = items [i];\r", "-\t\tif (!item.isDisposed ()) item.releaseResources ();\r", "+\t*/\t\r", "+\tif (columnCount > 1) {\r", "+\t\t/* Turn off redraw and leave it off */\r", "+\t\tOS.SendMessage (handle, OS.WM_SETREDRAW, 0, 0);\r", "+\t\tfor (int i=itemCount-1; i>=0; --i) {\r", "+\t\t\tignoreSelect = true;\r", "+\t\t\tOS.SendMessage (handle, OS.LVM_DELETEITEM, i, 0);\r", "+\t\t\tignoreSelect = false;\r", "+\t\t\tTableItem item = items [i];\r", "+\t\t\tif (!item.isDisposed ()) item.releaseResources ();\r", "+\t\t}\r", "+\t} else {\t\r", "+\t\tfor (int i=0; i<itemCount; i++) {\r", "+\t\t\tTableItem item = items [i];\r", "+\t\t\tif (!item.isDisposed ()) item.releaseWidget ();\r", "+\t\t}\r", "-\t\r", "-\t/*\r", "-\t* This code is intentionally commmented.  This is\r", "-\t* the correct code, assuming that the problem with\r", "-\t* LVM_DELETEALLITEMS did not occur.\r", "-\t*/\r", "-//\tfor (int i=0; i<itemCount; i++) {\r", "-//\t\tTableItem item = items [i];\r", "-//\t\tif (!item.isDisposed ()) item.releaseWidget ();\r", "-//\t}\r", "-\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6de767399bf267175f6a2cb99903a17b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/TabFolder.java", "commitBeforeChange": "63b1a2d36990c1f8e8816e7709fc0b09bed89050", "commitAfterChange": "7a26d49f7fcf65bf8625393f1af4a67b482a7c35", "methodNumberBeforeChange": 32, "methodNumberAfterChange": 21, "signatureBeforeChange": "\r \r void releaseWidget ()", "signatureAfterChange": "\r \r void releaseWidget ()", "diff": ["-\r", "-\tsuper.releaseWidget();\r", "+\tint count = getItemCount ();\r", "+\tfor (int i=0; i<count; i++) {\r", "+\t\tTabItem item = items [i];\r", "+\t\tif (!item.isDisposed ()) item.releaseWidget ();\r", "+\t}\r", "+\tsuper.releaseWidget ();\r"]}], "num": 62071}