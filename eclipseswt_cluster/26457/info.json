{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "33926d300adfc8b3dc257ef68f081408", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "daf70048266ecc951ea079d59e22a2b5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/mozilla/org/eclipse/swt/browser/Browser.java", "commitBeforeChange": "5d2aa70de2e6cd273dddb20b33e744b162177c39", "commitAfterChange": "8e1de6b463cb1084376d836a06e1d4f89bfc89ec", "methodNumberBeforeChange": 81, "methodNumberAfterChange": 81, "signatureBeforeChange": " public String getUrl()", "signatureAfterChange": " public String getUrl()", "diff": ["-\tcheckWidget();           ", "-\tint[] aContentDOMWindow = new int[1];", "-\tint rc = webBrowser.GetContentDOMWindow(aContentDOMWindow);", "-\tif (rc != XPCOM.NS_OK) error(rc);", "-\tif (aContentDOMWindow[0] == 0) error(XPCOM.NS_ERROR_NO_INTERFACE);", "-\t\t\t", "-\tnsIDOMWindow domWindow = new nsIDOMWindow(aContentDOMWindow[0]);           ", "+\tcheckWidget();", "-\trc = domWindow.QueryInterface(nsIDOMWindowInternal.NS_IDOMWINDOWINTERNAL_IID, result);", "+\tint rc = webBrowser.QueryInterface(nsIWebNavigation.NS_IWEBNAVIGATION_IID, result);", "-\tdomWindow.Release();", "-         ", "-\tnsIDOMWindowInternal domWindowInternal = new nsIDOMWindowInternal(result[0]);", "-\tint[] aLocation = new int[1];  ", "-\trc = domWindowInternal.GetLocation(aLocation);", "+\t", "+\tnsIWebNavigation webNavigation = new nsIWebNavigation(result[0]);", "+\tint[] aCurrentURI = new int[1];", "+\trc = webNavigation.GetCurrentURI(aCurrentURI);", "-\tif (aLocation[0] == 0) error(XPCOM.NS_ERROR_NO_INTERFACE);", "-\tdomWindowInternal.Release();", "-", "-\tnsIDOMLocation domLocation = new nsIDOMLocation(aLocation[0]); ", "-    nsString _retval = new nsString();", "-\trc = domLocation.ToString(_retval.getAddress());", "-\tif (rc != XPCOM.NS_OK) error(rc);", "-\tdomLocation.Release();          ", "-\tString url = _retval.toString();", "-\t_retval.dispose();", "-                ", "-\treturn url;", "+\t/*", "+\t * This code is intentionally commented.  aCurrentURI is 0", "+\t * when no location has previously been set.", "+\t */", "+\t//if (aCurrentURI[0] == 0) error(XPCOM.NS_ERROR_NO_INTERFACE);", "+\twebNavigation.Release();", "+\t", "+\tbyte[] dest = null;", "+\tif (aCurrentURI[0] != 0) {", "+\t\tnsIURI uri = new nsIURI(aCurrentURI[0]);", "+\t\tint aSpec = XPCOM.nsCString_new();", "+\t\trc = uri.GetSpec(aSpec);", "+\t\tif (rc != XPCOM.NS_OK) error(rc);", "+\t\tint length = XPCOM.nsCString_Length(aSpec);", "+\t\tint buffer = XPCOM.nsCString_get(aSpec);", "+\t\tdest = new byte[length + 1];", "+\t\tXPCOM.memmove(dest, buffer, length);", "+\t\tXPCOM.nsCString_delete(aSpec);", "+\t\turi.Release();", "+\t}", "+\treturn dest != null ? new String(dest) : \"\"; //$NON-NLS-1$"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "50a9cff9558fa74dda9adc17efd9a863", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/motif/org/eclipse/swt/browser/Browser.java", "commitBeforeChange": "e4bc9c1893ead2ce8ed6f65933742cbfa25be732", "commitAfterChange": "a7206eed573d4459925f82f41be8140406ab7207", "methodNumberBeforeChange": 83, "methodNumberAfterChange": 83, "signatureBeforeChange": " public String getUrl()", "signatureAfterChange": " public String getUrl()", "diff": ["-\tif (!IsLinux) return \"\";", "-\tint[] aContentDOMWindow = new int[1];", "-\tint rc = webBrowser.GetContentDOMWindow(aContentDOMWindow);", "-\tif (rc != XPCOM.NS_OK) error(rc);", "-\tif (aContentDOMWindow[0] == 0) error(XPCOM.NS_ERROR_NO_INTERFACE);", "-\t\t\t", "-\tnsIDOMWindow domWindow = new nsIDOMWindow(aContentDOMWindow[0]);           ", "-\trc = domWindow.QueryInterface(nsIDOMWindowInternal.NS_IDOMWINDOWINTERNAL_IID, result);", "+\tint rc = webBrowser.QueryInterface(nsIWebNavigation.NS_IWEBNAVIGATION_IID, result);", "-\tdomWindow.Release();", "-         ", "-\tnsIDOMWindowInternal domWindowInternal = new nsIDOMWindowInternal(result[0]);", "-\tint[] aLocation = new int[1];  ", "-\trc = domWindowInternal.GetLocation(aLocation);", "+\t", "+\tnsIWebNavigation webNavigation = new nsIWebNavigation(result[0]);", "+\tint[] aCurrentURI = new int[1];", "+\trc = webNavigation.GetCurrentURI(aCurrentURI);", "-\tif (aLocation[0] == 0) error(XPCOM.NS_ERROR_NO_INTERFACE);", "-\tdomWindowInternal.Release();", "-", "-\tnsIDOMLocation domLocation = new nsIDOMLocation(aLocation[0]); ", "-    nsString _retval = new nsString();", "-\trc = domLocation.ToString(_retval.getAddress());", "-\tif (rc != XPCOM.NS_OK) error(rc);", "-\tdomLocation.Release();          ", "-\tString url = _retval.toString();", "-\t_retval.dispose();", "-                ", "-\treturn url;", "+\t/*", "+\t * This code is intentionally commented.  aCurrentURI is 0", "+\t * when no location has previously been set.", "+\t */", "+\t//if (aCurrentURI[0] == 0) error(XPCOM.NS_ERROR_NO_INTERFACE);", "+\twebNavigation.Release();", "+\t", "+\tbyte[] dest = null;", "+\tif (aCurrentURI[0] != 0) {", "+\t\tnsIURI uri = new nsIURI(aCurrentURI[0]);", "+\t\tint aSpec = XPCOM.nsCString_new();", "+\t\trc = uri.GetSpec(aSpec);", "+\t\tif (rc != XPCOM.NS_OK) error(rc);", "+\t\tint length = XPCOM.nsCString_Length(aSpec);", "+\t\tint buffer = XPCOM.nsCString_get(aSpec);", "+\t\tdest = new byte[length + 1];", "+\t\tXPCOM.memmove(dest, buffer, length);", "+\t\tXPCOM.nsCString_delete(aSpec);", "+\t\turi.Release();", "+\t}", "+\treturn dest != null ? new String(dest) : \"\"; //$NON-NLS-1$"]}], "num": 26457}