{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "7e4461e7f579f298cfd1d4288c24a513", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7be51b97c030c11c0663e99eeed03a56", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "f6b0cb79e144a4b1239635be6215fd3b5682cba8", "commitAfterChange": "979617063880fb96af17f2e70d01ef24e3824845", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " public FontData[] getFontData()", "signatureAfterChange": " public FontData[] getFontData()", "diff": ["-\tOS.ATSUFindFontName (handle, OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null);", "+\tint platformCode = OS.kFontUnicodePlatform, encoding = OS.kCFStringEncodingUnicode;", "+\tif (OS.ATSUFindFontName(handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null) != OS.noErr) {", "+\t\tplatformCode = OS.kFontNoPlatformCode;", "+\t\tencoding = OS.kCFStringEncodingMacRoman;", "+\t\tOS.ATSUFindFontName (handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null);", "+\t}\t", "-\tOS.ATSUFindFontName (handle, OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, buffer.length, buffer, actualLength, null);", "-\tString name = new String(buffer);", "+\tOS.ATSUFindFontName(handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, buffer.length, buffer, actualLength, null);", "+\tString name = \"\";", "+\tint ptr = OS.CFStringCreateWithBytes(0, buffer, buffer.length, encoding, false);", "+\tif (ptr != 0) {", "+\t\tint length = OS.CFStringGetLength(ptr);", "+\t\tif (length != 0) {", "+\t\t\tchar[] chars = new char[length];", "+\t\t\tCFRange range = new CFRange();", "+\t\t\trange.length = length;", "+\t\t\tOS.CFStringGetCharacters(ptr, range, chars);", "+\t\t\tname = new String(chars);", "+\t\t}", "+\t\tOS.CFRelease(ptr);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ab834a7d8360b0619b4a3a8d3a715dc0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "25e0b9cefcf6aad913e775e22fb19b1e3de2a216", "commitAfterChange": "abdb7df6c5ef7f31dd770f626e22ad0d039e1629", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 8, "signatureBeforeChange": " public FontData[] getFontData()", "signatureAfterChange": " public FontData[] getFontData()", "diff": ["-\tint [] actualLength = new int [1];", "+\tint[] buffer = new int[1];", "+\tOS.ATSFontGetName(handle, 0, buffer);", "+\tCFRange range = new CFRange();", "+\trange.length = OS.CFStringGetLength(buffer[0]);", "+\tchar [] chars = new char[range.length];", "+\tOS.CFStringGetCharacters(buffer[0], range, chars);", "+\tOS.CFRelease(buffer[0]);", "+\tString atsName = new String(chars);", "-\tif (OS.ATSUFindFontName(handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null) != OS.noErr) {", "+\tif (OS.ATSUFindFontName(handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, buffer, null) != OS.noErr) {", "-\t\tOS.ATSUFindFontName (handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, actualLength, null);", "+\t\tOS.ATSUFindFontName (handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, 0, null, buffer, null);", "-\tbyte[] buffer = new byte[actualLength[0]];", "-\tOS.ATSUFindFontName(handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, buffer.length, buffer, actualLength, null);", "+\tbyte[] bytes = new byte[buffer[0]];", "+\tOS.ATSUFindFontName(handle, OS.kFontFamilyName, platformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, bytes.length, bytes, buffer, null);", "-\tint ptr = OS.CFStringCreateWithBytes(0, buffer, buffer.length, encoding, false);", "+\tint ptr = OS.CFStringCreateWithBytes(0, bytes, bytes.length, encoding, false);", "-\t\tint length = OS.CFStringGetLength(ptr);", "-\t\tif (length != 0) {", "-\t\t\tchar[] chars = new char[length];", "-\t\t\tCFRange range = new CFRange();", "-\t\t\trange.length = length;", "+\t\trange.length = OS.CFStringGetLength(ptr);", "+\t\tif (range.length != 0) {", "+\t\t\tchars = new char[range.length];", "-\tint style = SWT.NORMAL;", "+\tint style = 0;", "+\tif (atsName.indexOf(\"Italic\") != -1) style |= SWT.ITALIC;", "+\tif (atsName.indexOf(\"Bold\") != -1) style |= SWT.BOLD;", "+\tdata.atsName = atsName;"]}], "num": 61452}