{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2e677703da4f3bdef52519f12d387007", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a07fd4a2c99bb48b1734f22f053edb92", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Decorations.java", "commitBeforeChange": "e976aba9ba2e21fa3483cd6339f93ee2113c9043", "commitAfterChange": "f2fe2b40efad97e775adadc99e7322e56dac4334", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "  void _setImages (Image [] images)", "signatureAfterChange": "  void _setImages (Image [] images)", "diff": ["+\t\tint /*long*/ colormap = OS.gdk_colormap_get_system ();", "-\t\t\tImage icon = images [i];", "+\t\t\tImage image = images [i];", "-\t\t\tOS.gdk_drawable_get_size (icon.pixmap, w, h);", "-\t\t\tint width = w [0], height = h [0]; \t", "-\t\t\tboolean hasMask = icon.mask != 0;", "-\t\t\tint /*long*/ pixbuf = OS.gdk_pixbuf_new (OS.GDK_COLORSPACE_RGB, hasMask, 8, width, height);", "-\t\t\tif (pixbuf == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "-\t\t\tint /*long*/ colormap = OS.gdk_colormap_get_system ();", "-\t\t\tOS.gdk_pixbuf_get_from_drawable (pixbuf, icon.pixmap, colormap, 0, 0, 0, 0, width, height);", "+\t\t\tOS.gdk_drawable_get_size (image.pixmap, w, h);", "+\t\t\tint /*long*/ pixbuf;", "+\t\t\tboolean hasMask = image.mask != 0;", "-\t\t\t\tint /*long*/ gdkMaskImagePtr = OS.gdk_drawable_get_image (icon.mask, 0, 0, width, height);", "+\t\t\t\tpixbuf = OS.gdk_pixbuf_new (OS.GDK_COLORSPACE_RGB, true, 8, w [0], h [0]);", "+\t\t\t\tif (pixbuf == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "+\t\t\t\tOS.gdk_pixbuf_get_from_drawable (pixbuf, image.pixmap, colormap, 0, 0, 0, 0, w [0], h [0]);\t\t\t\t", "+\t\t\t\tint /*long*/ gdkMaskImagePtr = OS.gdk_drawable_get_image (image.mask, 0, 0, w [0], h [0]);", "-\t\t\t\tfor (int y=0; y<height; y++) {", "+\t\t\t\tfor (int y = 0; y < h [0]; y++) {", "-\t\t\t\t\tfor (int x=0; x<width; x++) {", "+\t\t\t\t\tfor (int x = 0; x < w [0]; x++) {", "+\t\t\t} else {", "+\t\t\t\tImageData data = image.getImageData ();", "+\t\t\t\tboolean hasAlpha = data.getTransparencyType () == SWT.TRANSPARENCY_ALPHA;", "+\t\t\t\tpixbuf = OS.gdk_pixbuf_new (OS.GDK_COLORSPACE_RGB, hasAlpha, 8, w [0], h [0]);", "+\t\t\t\tif (pixbuf == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "+\t\t\t\tOS.gdk_pixbuf_get_from_drawable (pixbuf, image.pixmap, colormap, 0, 0, 0, 0, w [0], h [0]);", "+\t\t\t\tif (hasAlpha) {", "+\t\t\t\t\tbyte [] alpha = data.alphaData;", "+\t\t\t\t\tint stride = OS.gdk_pixbuf_get_rowstride (pixbuf);", "+\t\t\t\t\tint /*long*/ pixels = OS.gdk_pixbuf_get_pixels (pixbuf);", "+\t\t\t\t\tbyte [] line = new byte [stride];", "+\t\t\t\t\tfor (int y = 0; y < h [0]; y++) {", "+\t\t\t\t\t\tint /*long*/ offset = pixels + (y * stride);", "+\t\t\t\t\t\tOS.memmove (line, offset, stride);", "+\t\t\t\t\t\tfor (int x = 0; x < w [0]; x++) {", "+\t\t\t\t\t\t\tline [x*4+3] = alpha [y*w [0]+x];", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tOS.memmove (offset, line, stride);", "+\t\t\t\t\t}", "+\t\t\t\t}\t\t\t\t"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ca96aa7d7ece2b73e3d795b08c52b45e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/ImageList.java", "commitBeforeChange": "ea6c08958533b03c84c727669a3021125214b02b", "commitAfterChange": "0b1854a06485f795f57cdc07a3632e73767e9c7d", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "  public int add (Image image)", "signatureAfterChange": "  public int add (Image image)", "diff": ["-\tboolean hasMask = image.mask != 0;", "-\tint /*long*/ pixbuf = OS.gdk_pixbuf_new (OS.GDK_COLORSPACE_RGB, hasMask, 8, w [0], h [0]);", "-\tif (pixbuf == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "-\tOS.gdk_pixbuf_get_from_drawable (pixbuf, image.pixmap, colormap, 0, 0, 0, 0, w [0], h [0]);", "+\tint /*long*/ pixbuf;", "+\tboolean hasMask = image.mask != 0;", "+\t\tpixbuf = OS.gdk_pixbuf_new (OS.GDK_COLORSPACE_RGB, true, 8, w [0], h [0]);", "+\t\tif (pixbuf == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "+\t\tOS.gdk_pixbuf_get_from_drawable (pixbuf, image.pixmap, colormap, 0, 0, 0, 0, w [0], h [0]);", "-\t\tfor (int y=0; y<h[0]; y++) {", "+\t\tfor (int y = 0; y < h [0]; y++) {", "-\t\t\tfor (int x=0; x<w[0]; x++) {", "+\t\t\tfor (int x = 0; x < w [0]; x++) {", "-\t\t\t\t\tline[x*4+3] = 0;", "+\t\t\t\t\tline [x*4+3] = 0;", "+\t} else {", "+\t\tImageData data = image.getImageData ();", "+\t\tboolean hasAlpha = data.getTransparencyType () == SWT.TRANSPARENCY_ALPHA;", "+\t\tpixbuf = OS.gdk_pixbuf_new (OS.GDK_COLORSPACE_RGB, hasAlpha, 8, w [0], h [0]);", "+\t\tif (pixbuf == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "+\t\tOS.gdk_pixbuf_get_from_drawable (pixbuf, image.pixmap, colormap, 0, 0, 0, 0, w [0], h [0]);", "+\t\tif (hasAlpha) {", "+\t\t\tbyte [] alpha = data.alphaData;", "+\t\t\tint stride = OS.gdk_pixbuf_get_rowstride (pixbuf);", "+\t\t\tint /*long*/ pixels = OS.gdk_pixbuf_get_pixels (pixbuf);", "+\t\t\tbyte [] line = new byte [stride];", "+\t\t\tfor (int y = 0; y < h [0]; y++) {", "+\t\t\t\tint /*long*/ offset = pixels + (y * stride);", "+\t\t\t\tOS.memmove (line, offset, stride);", "+\t\t\t\tfor (int x = 0; x<w [0]; x++) {", "+\t\t\t\t\tline [x*4+3] = alpha [y*h [0]+x];", "+\t\t\t\t}", "+\t\t\t\tOS.memmove (offset, line, stride);", "+\t\t\t}", "+\t\t}"]}], "num": 54856}