{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "da76036d12b35dea31f992ac57860745", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b7ab50e4ffb2f980ff252dfe4f39dc03", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder.java", "commitBeforeChange": "810eb254cbe71a3e1637e56f044fa70b981eb39d", "commitAfterChange": "803bd538f4c4c40e1d60df10cb6937bfea9dab26", "methodNumberBeforeChange": 84, "methodNumberAfterChange": 76, "signatureBeforeChange": " void setButtonBounds()", "signatureAfterChange": " void setButtonBounds(GC gc)", "diff": ["-void setButtonBounds() {", "+void setButtonBounds(GC gc) {", "+\tRectangle trim = renderer.computeTrim(CTabFolderRenderer.PART_BORDER, SWT.NONE, 0, 0, 0, 0);", "+\tint borderRight = trim.width + trim.x;", "+\tint borderLeft = -trim.x;", "+\tint borderBottom = trim.height + trim.y;", "+\tint borderTop = -trim.y;", "+\t", "-\t\tmaxRect.x = size.x - borderRight - BUTTON_SIZE - 3;", "+\t\tPoint maxSize = renderer.computeSize(CTabFolderRenderer.PART_MAX_BUTTON, SWT.NONE, gc);", "+\t\tmaxRect.x = size.x - borderRight - maxSize.x - 3;", "-\t\tmaxRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - BUTTON_SIZE)/2: borderTop + (tabHeight - BUTTON_SIZE)/2;", "-\t\tmaxRect.width = BUTTON_SIZE;", "-\t\tmaxRect.height = BUTTON_SIZE;", "+\t\tmaxRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - maxSize.y)/2: borderTop + (tabHeight - maxSize.y)/2;", "+\t\tmaxRect.width = maxSize.x;", "+\t\tmaxRect.height = maxSize.y;", "-\t", "+", "-\t\tminRect.x = size.x - borderRight - maxRect.width - BUTTON_SIZE - 3;", "+\t\tPoint minSize = renderer.computeSize(CTabFolderRenderer.PART_MIN_BUTTON, SWT.NONE, gc);", "+\t\tminRect.x = size.x - borderRight - maxRect.width - minSize.x - 3;", "-\t\tminRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - BUTTON_SIZE)/2: borderTop + (tabHeight - BUTTON_SIZE)/2;", "-\t\tminRect.width = BUTTON_SIZE;", "-\t\tminRect.height = BUTTON_SIZE;", "+\t\tminRect.y = onBottom ? size.y - borderBottom - tabHeight + (tabHeight - minSize.y)/2: borderTop + (tabHeight - minSize.y)/2;", "+\t\tminRect.width = minSize.x;", "+\t\tminRect.height = minSize.y;", "-\t\t\t\t\t\tif (item.x + item.width + 7 + 3*BUTTON_SIZE/2 >= rightEdge) break;", "-\t\t\t\t\t\ttopRightRect.x = item.x + item.width + 7 + 3*BUTTON_SIZE/2;", "+\t\t\t\t\t\tint chevronWidth = renderer.computeSize(CTabFolderRenderer.PART_CHEVRON_BUTTON, SWT.NONE, gc).x;", "+\t\t\t\t\t\tif (item.x + item.width + 7 + chevronWidth >= rightEdge) break;", "+\t\t\t\t\t\ttopRightRect.x = item.x + item.width + 7 + chevronWidth;", "-\t\t\t\t\t\tCTabItem item = items[items.length - 1];", "-\t\t\t\t\t\ttopRightRect.x = item.x + item.width;", "-\t\t\t\t\t\tif (!simple && items.length - 1 == selectedIndex) topRightRect.x += curveWidth - curveIndent;", "+\t\t\t\t\t\tint lastIndex = items.length - 1;", "+\t\t\t\t\t\tCTabItem lastItem = items[lastIndex];", "+\t\t\t\t\t\ttopRightRect.x = lastItem.x + lastItem.width;", "+\tPoint chevronSize = renderer.computeSize(CTabFolderRenderer.PART_CHEVRON_BUTTON, SWT.NONE, gc);", "-\t\t\tchevronRect.width = 3*BUTTON_SIZE/2;", "-\t\t\tchevronRect.height = BUTTON_SIZE;", "+\t\t\tchevronRect.width = chevronSize.x;", "+\t\t\tchevronRect.height = chevronSize.y;", "-\t\t\tchevronRect.width = 3*BUTTON_SIZE/2;", "-\t\t\tchevronRect.height = BUTTON_SIZE;", "+\t\t\tchevronRect.width = chevronSize.x;", "+\t\t\tchevronRect.height = chevronSize.y;", "-\t\t\tif (!simple && lastIndex == selectedIndex) w += curveWidth - 2*curveIndent;", "-\t\t\tchevronRect.x = Math.min(w, getRightItemEdge());", "+\t\t\tif (!simple && lastIndex == selectedIndex) w -= renderer.curveIndent;  //TODO: fix chevron position", "+\t\t\tchevronRect.x = Math.min(w, getRightItemEdge(gc));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fc6b4d360d2c13304f9bfc4f58a61ef2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder.java", "commitBeforeChange": "810eb254cbe71a3e1637e56f044fa70b981eb39d", "commitAfterChange": "803bd538f4c4c40e1d60df10cb6937bfea9dab26", "methodNumberBeforeChange": 90, "methodNumberAfterChange": 82, "signatureBeforeChange": " boolean setItemSize()", "signatureAfterChange": " boolean setItemSize(GC gc)", "diff": ["-boolean setItemSize() {", "+boolean setItemSize(GC gc) {", "-\txClient = borderLeft + marginWidth + highlight_margin;", "-\tif (onBottom) {", "-\t\tyClient = borderTop + highlight_margin + marginHeight;", "-\t} else {", "-\t\tyClient = borderTop + tabHeight + highlight_header + marginHeight; ", "-\t}", "+", "+\tRectangle trim = renderer.computeTrim(CTabFolderRenderer.PART_HEADER, SWT.NONE, 0, 0, 0, 0);", "+\tint borderRight = trim.width + trim.x;", "+\tint borderLeft = -trim.x;", "+\t", "-\t\t\tGC gc = new GC(this);", "-\t\t\tint width = tab.preferredWidth(gc, true, false);", "-\t\t\tgc.dispose();", "-\t\t\twidth = Math.min(width, getRightItemEdge() - borderLeft);", "+\t\t\tint width = renderer.computeSize(selectedIndex, SWT.SELECTED, gc).x;", "+\t\t\twidth = Math.min(width, getRightItemEdge(gc) - borderLeft);", "-\t\t\t\t\ttab.closeRect.width = BUTTON_SIZE;", "-\t\t\t\t\ttab.closeRect.height = BUTTON_SIZE;", "+\t\t\t\t\tPoint closeSize = renderer.computeSize(selectedIndex, SWT.SELECTED, gc);", "+\t\t\t\t\ttab.closeRect.width = closeSize.x;", "+\t\t\t\t\ttab.closeRect.height = closeSize.y;", "-\tGC gc = new GC(this);", "-\tif (showMin) tabAreaWidth -= BUTTON_SIZE;", "-\tif (showMax) tabAreaWidth -= BUTTON_SIZE;", "+\tif (showMin) tabAreaWidth -= renderer.computeSize(CTabFolderRenderer.PART_MIN_BUTTON, SWT.NONE, gc).x;", "+\tif (showMax) tabAreaWidth -= renderer.computeSize(CTabFolderRenderer.PART_MAX_BUTTON, SWT.NONE, gc).x;", "-\tif (!simple) tabAreaWidth -= curveWidth - 2*curveIndent;", "-\t", "+", "-\t\tminWidths[index] = items[index].preferredWidth(gc, index == selectedIndex, true);", "+\t\tint state = CTabFolderRenderer.MINIMUM_SIZE;", "+\t\tif (index == selectedIndex) state |= SWT.SELECTED;", "+\t\tminWidths[index] = renderer.computeSize(index, state, gc).x;", "-\t\tif (showChevron) tabAreaWidth -= 3*BUTTON_SIZE/2;", "+\t\tif (showChevron) tabAreaWidth -= renderer.computeSize(CTabFolderRenderer.PART_CHEVRON_BUTTON, SWT.NONE, gc).x;", "-\t\t\tmaxWidths[i] = items[i].preferredWidth(gc, i == selectedIndex, false);", "+\t\t\tint state = 0;", "+\t\t\tif (i == selectedIndex) state |= SWT.SELECTED;", "+\t\t\tmaxWidths[i] = renderer.computeSize(i, state, gc).x;", "-\tgc.dispose();", "-\t\t\t\t\ttab.closeRect.width = BUTTON_SIZE;", "-\t\t\t\t\ttab.closeRect.height = BUTTON_SIZE;", "+\t\t\t\t\tPoint closeSize = renderer.computeSize(CTabFolderRenderer.PART_CLOSE_BUTTON, SWT.NONE, gc);", "+\t\t\t\t\ttab.closeRect.width = closeSize.x;", "+\t\t\t\t\ttab.closeRect.height = closeSize.y;"]}], "num": 59284}