{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "dffc360cc0f0c7675da494be2faf0eb7", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "009cd5a40a0f1ac03d9bcb7ddf3cfb78", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/ToolItem.java", "commitBeforeChange": "9cc72cd00c181250b1f51b95a0528a6b993c1ed9", "commitAfterChange": "1c6100db3e7e2869dd9939a388c01ffe02266ae6", "methodNumberBeforeChange": 50, "methodNumberAfterChange": 51, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": " public void setText (String string)", "diff": ["-\tif ((style & SWT.SEPARATOR) != 0) return;", "+\tif (((style & SWT.SEPARATOR) != 0) || text.equals(string)) return;", "-\tif (labelHandle == 0) return;", "-\tOS.gtk_label_set_text_with_mnemonic (labelHandle, buffer);", "-\tif (string.length () != 0) {", "-\t\tOS.gtk_widget_show (labelHandle);", "+\tif ((style & SWT.DROP_DOWN) != 0 && OS.GTK_VERSION < OS.VERSION (2, 6, 0)) {", "+\t\tOS.gtk_label_set_text_with_mnemonic (labelHandle, buffer);", "+\t\tif (string.length () != 0) {", "+\t\t\tOS.gtk_widget_show (labelHandle);", "+\t\t} else {", "+\t\t\tOS.gtk_widget_hide (labelHandle);", "+\t\t}", "+\t}", "+\tOS.gtk_tool_button_set_label (handle, buffer);", "+\t/*", "+\t * Feature in GTK. Toolitems with only image appear larger", "+\t * than the preferred size. The fix is to set the style as", "+\t * TOOLBAR_BOTH_HORIZ. If any of the child toolItem is set", "+\t * text, then the style shall be set back to default.", "+\t */", "+\tif (string.length() != 0) {", "+\t\thasText = true;", "+\t\tif ((parent.style & SWT.RIGHT) == 0) OS.gtk_toolbar_set_style (parent.handle, OS.GTK_TOOLBAR_BOTH);", "-\t\tOS.gtk_widget_hide (labelHandle);", "+\t\t/*", "+\t\t * If the toolbar has any item containing text, then the style", "+\t\t * should be TOOLBAR_BOTH. Otherwise, it should be set back to", "+\t\t * BOTH_HORIZ in order to prevent the larger size consumed by item.", "+\t\t */", "+\t\thasText = false;", "+\t\tToolItem[] items = parent._getItems();", "+\t\tboolean hasTextItems = false;", "+\t\tfor (int i=0; i<items.length; i++) {", "+\t\t\tToolItem item = items[i];", "+\t\t\tif (item != null) hasTextItems |= item.hasText;", "+\t\t}", "+\t\tif (!hasTextItems) OS.gtk_toolbar_set_style (parent.handle, OS.GTK_TOOLBAR_BOTH_HORIZ);", "+\t}", "+\tif ((style & SWT.DROP_DOWN) != 0) {", "+\t\tproxyMenuItem = 0;", "+\t\tproxyMenuItem = OS.gtk_tool_item_retrieve_proxy_menu_item (handle);", "+\t\tOS.g_signal_connect(proxyMenuItem, OS.activate, ToolBar.menuItemSelectedFunc.getAddress(), handle);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "405a54e702ecc399f0b22c7cbf7428c3", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/ToolItem.java", "commitBeforeChange": "1c6100db3e7e2869dd9939a388c01ffe02266ae6", "commitAfterChange": "e6c08d3d67d466157d79d499808f7b1d4fa4d3e5", "methodNumberBeforeChange": 51, "methodNumberAfterChange": 51, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": " public void setText (String string)", "diff": ["-\t/*", "-\t * Feature in GTK. Toolitems with only image appear larger", "-\t * than the preferred size. The fix is to set the style as", "-\t * TOOLBAR_BOTH_HORIZ. If any of the child toolItem is set", "-\t * text, then the style shall be set back to default.", "-\t */", "-\tif (string.length() != 0) {", "-\t\thasText = true;", "-\t\tif ((parent.style & SWT.RIGHT) == 0) OS.gtk_toolbar_set_style (parent.handle, OS.GTK_TOOLBAR_BOTH);", "-\t} else {", "-\t\t/*", "-\t\t * If the toolbar has any item containing text, then the style", "-\t\t * should be TOOLBAR_BOTH. Otherwise, it should be set back to", "-\t\t * BOTH_HORIZ in order to prevent the larger size consumed by item.", "-\t\t */", "-\t\thasText = false;", "-\t\tToolItem[] items = parent._getItems();", "-\t\tboolean hasTextItems = false;", "-\t\tfor (int i=0; i<items.length; i++) {", "-\t\t\tToolItem item = items[i];", "-\t\t\tif (item != null) hasTextItems |= item.hasText;", "-\t\t}", "-\t\tif (!hasTextItems) OS.gtk_toolbar_set_style (parent.handle, OS.GTK_TOOLBAR_BOTH_HORIZ);", "-\t}"]}], "num": 16759}