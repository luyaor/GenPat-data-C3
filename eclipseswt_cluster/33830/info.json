{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a1395831a2d7a84e6ce3d7ad02c111f9", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5f93c16498de4412266efc9696418322", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder.java", "commitBeforeChange": "4a41229267d8ec39ffddb937135f7f228c3d90ec", "commitAfterChange": "a3f5ef23bb9a2d806a5c1b1bcf9eba42e3d5e4ca", "methodNumberBeforeChange": 47, "methodNumberAfterChange": 52, "signatureBeforeChange": "\r \r private void initCloseButtonImages()", "signatureAfterChange": "\r \r private void updateCloseBar()", "diff": ["-private void initCloseButtonImages() {\r", "-\tif (closeImage != null) return;\r", "-\r", "-\ttry {\r", "-\t\tDisplay display = getDisplay();\r", "-\t\tImage image = new Image(display, CTabFolder.class.getResourceAsStream(\"close.gif\"));\r", "-\t\tImageData source = image.getImageData();\r", "-\t\tImageData mask = source.getTransparencyMask();\r", "-\t\timage.dispose();\r", "-\t\tcloseImage = new Image(display, source, mask);\r", "-\t} catch (Error e) {\r", "-\t\tcloseImage = null;\r", "-\t\treturn;\r", "-\t}\r", "+private void updateCloseBar() {\r", "+\tint imageHeight = getTabHeight() - CTabItem.TOP_MARGIN - CTabItem.BOTTOM_MARGIN - 6;\r", "+\tif (imageHeight < 4) return;\r", "-\tcloseItem.setDisabledImage(closeImage);\r", "+\tif (closeImage != null && closeImage.getBounds().height == imageHeight) return;\r", "+\t\r", "+\tif (closeBar != null) closeBar.dispose();\r", "+\tcloseBar = null;\r", "+\tif (inactiveCloseBar != null) inactiveCloseBar.dispose();\r", "+\tinactiveCloseBar = null;\r", "+\tcreateCloseBar();\r", "+\t\r", "+\tToolItem closeItem = closeBar.getItems()[0];\r", "+\tToolItem inactiveCloseItem = inactiveCloseBar.getItems()[0];\r", "+\t\t\r", "+\tif (closeImage != null) closeImage.dispose();\r", "+\t\r", "+\tDisplay display = getDisplay();\r", "+\tColor foreground = getForeground();\r", "+\tColor black = display.getSystemColor(SWT.COLOR_BLACK);\r", "+\tColor background = getBackground();\r", "+\t\r", "+\tPaletteData palette = new PaletteData(new RGB[]{foreground.getRGB(), background.getRGB(), black.getRGB()});\r", "+\tImageData imageData = new ImageData(imageHeight, imageHeight, 4, palette);\r", "+\timageData.transparentPixel = 1;\r", "+\tcloseImage = new Image(display, imageData);\r", "+\tGC gc = new GC(closeImage);\r", "+\tgc.setBackground(background);\r", "+\tgc.fillRectangle(0, 0, imageHeight, imageHeight);\r", "+\tgc.setForeground(black);\r", "+\t\r", "+\tint h = (imageHeight /2 )* 2;\r", "+\tgc.drawLine( 0, 0,     h - 2, h - 2);\r", "+\tgc.drawLine( 1, 0,     h,     h - 1);\r", "+\tgc.drawLine( 0, h - 2, h - 2, 0);\r", "+\tgc.drawLine( 1, h - 2, h - 1, 0);\r", "+\t\r", "+\tgc.dispose();\r", "+\t\r", "-\tinactiveCloseItem.setDisabledImage(closeImage);\r", "-\t\r", "-\tPoint size = closeBar.computeSize(SWT.DEFAULT, SWT.DEFAULT);\r", "-\tcloseBar.setSize(size);\r", "-\tinactiveCloseBar.setSize(size);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "46ace8745cfc9d299869a2fcb79b1c3f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "examples/org.eclipse.swt.examples/src/org/eclipse/swt/examples/texteditor/TextEditor.java", "commitBeforeChange": "e26934ac680ad70439130b120695448c0a630d25", "commitAfterChange": "95842c4b8acd967ae07a3fa166a616e528ae2f66", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 35, "signatureBeforeChange": " void createStyledText()", "signatureAfterChange": " \t \tvoid addControl(Control control)", "diff": ["-}", "-void createStyledText() {", "-\tinitializeColors();", "-\ttext = new StyledText (shell, SWT.BORDER | SWT.MULTI | SWT.V_SCROLL | SWT.H_SCROLL);", "-\tGridData spec = new GridData();", "-\tspec.horizontalAlignment = GridData.FILL;", "-\tspec.grabExcessHorizontalSpace = true;", "-\tspec.verticalAlignment = GridData.FILL;", "-\tspec.grabExcessVerticalSpace = true;", "-\ttext.setLayoutData(spec);", "-\ttext.addExtendedModifyListener(new ExtendedModifyListener() {", "-\t\tpublic void modifyText(ExtendedModifyEvent e) {", "-\t\t\thandleExtendedModify(e);", "-\t\t}", "-\t});", "-}", "+\t", "+\tvoid addControl(Control control) {", "+\t\tint offset = styledText.getCaretOffset();", "+\t\tstyledText.replaceTextRange(offset, 0, \"\\uFFFC\"); //$NON-NLS-1$", "+\t\tint index = 0;\t\t", "+\t\twhile (index < controlOffsets.length) {", "+\t\t\tif (controlOffsets[index] == -1 && controls[index] == null) break;", "+\t\t\tindex++;", "+\t\t}", "+\t\tif (index == controlOffsets.length) {", "+\t\t\tint[] tmpOffsets = new int[index + 1];", "+\t\t\tSystem.arraycopy(controlOffsets, 0, tmpOffsets, 0, controlOffsets.length);", "+\t\t\tcontrolOffsets = tmpOffsets;\t\t", "+\t\t\tControl[] tmpControls = new Control[index + 1];", "+\t\t\tSystem.arraycopy(controls, 0, tmpControls, 0, controls.length);", "+\t\t\tcontrols = tmpControls;", "+\t\t}", "+\t\tcontrolOffsets[index] = offset;", "+\t\tcontrols[index] = control;", "+\t\tStyleRange style = new StyleRange();", "+\t\tPoint size = control.computeSize(SWT.DEFAULT, SWT.DEFAULT);", "+\t\tint ascent = 2 * size.y / 3;", "+\t\tint descent = size.y - ascent;", "+\t\tstyle.metrics = new GlyphMetrics(ascent + MARGIN, descent + MARGIN, size.x + 2 * MARGIN);\t\t ", "+\t\tint[] ranges = {offset, 1};", "+\t\tStyleRange[] styles = {style};", "+\t\tstyledText.setStyleRanges(0,0, ranges, styles);", "+\t\tcontrol.setSize(size);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "71864692e5b1382e59d9fa08419bda71", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder.java", "commitBeforeChange": "4a41229267d8ec39ffddb937135f7f228c3d90ec", "commitAfterChange": "a3f5ef23bb9a2d806a5c1b1bcf9eba42e3d5e4ca", "methodNumberBeforeChange": 48, "methodNumberAfterChange": 53, "signatureBeforeChange": "\r private void initScrollBarImages()", "signatureAfterChange": "\r private void updateArrowBar()", "diff": ["-private void initScrollBarImages() {\r", "-\tif (arrowLeftImage != null) return;\r", "-\r", "-\ttry {\r", "-\t\tDisplay display = getDisplay();\r", "-\t\tImage image = new Image(display, CTabFolder.class.getResourceAsStream(\"leftDisabled.gif\"));\r", "-\t\tImageData source = image.getImageData();\r", "-\t\tImageData mask = source.getTransparencyMask();\r", "-\t\timage.dispose();\r", "-\t\tarrowLeftDisabledImage = new Image(display, source, mask);\r", "+private void updateArrowBar() {\r", "-\t\timage = new Image(display, CTabFolder.class.getResourceAsStream(\"left.gif\"));\r", "-\t\tsource = image.getImageData();\r", "-\t\tmask = source.getTransparencyMask();\r", "-\t\timage.dispose();\r", "-\t\tarrowLeftImage = new Image(display, source, mask);\r", "+\tint imageHeight = getTabHeight() - CTabItem.TOP_MARGIN - CTabItem.BOTTOM_MARGIN - 6;\r", "+\tif (imageHeight < 4) return;\r", "-\t\timage = new Image(display, CTabFolder.class.getResourceAsStream(\"rightDisabled.gif\"));\r", "-\t\tsource = image.getImageData();\r", "-\t\tmask = source.getTransparencyMask();\r", "-\t\timage.dispose();\r", "-\t\tarrowRightDisabledImage = new Image(display, source, mask);\r", "+\tif (arrowLeftImage != null && arrowLeftImage.getBounds().height == imageHeight) return;\t\r", "-\t\timage = new Image(display, CTabFolder.class.getResourceAsStream(\"right.gif\"));\r", "-\t\tsource = image.getImageData();\r", "-\t\tmask = source.getTransparencyMask();\r", "-\t\timage.dispose();\r", "-\t\tarrowRightImage = new Image(display, source, mask);\r", "-\t} catch (Error e) {\r", "-\t\tif (arrowLeftDisabledImage != null){\r", "-\t\t\tarrowLeftDisabledImage.dispose();\r", "-\t\t\tarrowLeftDisabledImage = null;\r", "-\t\t}\r", "-\t\tif (arrowLeftImage != null){\r", "-\t\t\tarrowLeftImage.dispose();\r", "-\t\t\tarrowLeftImage = null;\r", "-\t\t}\r", "-\t\tif (arrowRightDisabledImage != null){\r", "-\t\t\tarrowRightDisabledImage.dispose();\r", "-\t\t\tarrowRightDisabledImage = null;\r", "-\t\t}\r", "-\t\tif (arrowRightImage != null){\r", "-\t\t\tarrowRightImage.dispose();\r", "-\t\t\tarrowRightImage = null;\r", "-\t\t}\r", "-\t\treturn;\r", "-\t}\r", "+\tif (arrowBar != null) arrowBar.dispose();\r", "+\tarrowBar = null;\r", "+\tif (arrowLeftImage != null) arrowLeftImage.dispose();\r", "+\tif (arrowRightImage != null) arrowRightImage.dispose();\r", "-\tscrollLeft.setDisabledImage(arrowLeftDisabledImage);\r", "-\tscrollLeft.setImage(arrowLeftImage);\r", "+\tcreateArrowBar();\r", "+\tToolItem[] items = arrowBar.getItems();\r", "+\tToolItem left  = items[0];\r", "+\tToolItem right = items[1];\r", "-\tscrollRight.setDisabledImage(arrowRightDisabledImage);\r", "-\tscrollRight.setImage(arrowRightImage);\r", "+\tDisplay display = getDisplay();\r", "+\tColor foreground = getForeground();\r", "+\tColor black = display.getSystemColor(SWT.COLOR_BLACK);\r", "+\tColor background = getBackground();\r", "-\tint height = getTabHeight();\r", "-\tPoint size = scrollBar.computeSize(SWT.DEFAULT, height);\r", "-\tscrollBar.setSize(size);\r", "+\tPaletteData palette = new PaletteData(new RGB[]{foreground.getRGB(), background.getRGB(), black.getRGB()});\r", "+\tImageData imageData = new ImageData(imageHeight, imageHeight, 4, palette);\r", "+\timageData.transparentPixel = 1;\r", "+\tarrowLeftImage = new Image(display, imageData);\r", "+\tGC gc = new GC(arrowLeftImage);\r", "+\tgc.setBackground(background);\r", "+\tgc.fillRectangle(0, 0, imageHeight, imageHeight);\r", "+\tgc.setBackground(black);\r", "+\tint indent = 0;\r", "+\tint midpoint = (imageHeight - 2*indent)/2;\r", "+\tint height = 2 * midpoint;\r", "+\tint[] pointArr = new int[] {indent, indent + midpoint, \r", "+\t\t                        indent + height, indent, \r", "+\t\t                        indent + height,  indent + height};\r", "+\tgc.fillPolygon(pointArr);\r", "+\tgc.dispose();\r", "+\t\r", "+\tpalette = new PaletteData(new RGB[]{foreground.getRGB(), background.getRGB(), black.getRGB()});\r", "+\timageData = new ImageData(imageHeight, imageHeight, 4, palette);\r", "+\timageData.transparentPixel = 1;\r", "+\tarrowRightImage = new Image(display, imageData);\r", "+\tgc = new GC(arrowRightImage);\r", "+\tgc.setBackground(background);\r", "+\tgc.fillRectangle(0, 0, imageHeight, imageHeight);\r", "+\tgc.setBackground(black);\r", "+\tpointArr = new int[] {indent, indent, \r", "+\t\t                  indent, indent + height,\r", "+\t\t                  indent + height, indent + midpoint};\r", "+\tgc.fillPolygon(pointArr);\r", "+\tgc.dispose();\r", "+\t\r", "+\tleft.setImage(arrowLeftImage);\r", "+\tright.setImage(arrowRightImage);\r"]}], "num": 33830}