{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "fe8ab7aa546adfc64f8eafbb42351aa2", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "071ea10246bcf20c3769e221a0aa59c5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "ae82898454d0dd8bb09e947aa6f83ea8c44ff2f1", "commitAfterChange": "2ef2e709c4c31aa7b46fb0d933d3fc8c2c2d5682", "methodNumberBeforeChange": 156, "methodNumberAfterChange": 156, "signatureBeforeChange": "  LRESULT wmNotifyChild (NMHDR hdr, int wParam, int lParam)", "signatureAfterChange": "  LRESULT wmNotifyChild (NMHDR hdr, int wParam, int lParam)", "diff": ["-\t\t\t* When an item is being deleted from a virtual table, do not", "-\t\t\t* allow the application to provide data for a new item that", "-\t\t\t* becomes visible until the item has been removed from the", "-\t\t\t* items array.  Because arbitrary application code can run", "-\t\t\t* during the callback, the items array might be accessed", "-\t\t\t* in an inconsistent state.  Rather than answering the data", "-\t\t\t* right away, queue a redraw for later.", "-\t\t\t*/", "-\t\t\tif ((style & SWT.VIRTUAL) != 0) {", "-\t\t\t\tif (ignoreShrink) {", "-\t\t\t\t\tOS.SendMessage (handle, OS.LVM_REDRAWITEMS, plvfi.iItem, plvfi.iItem);", "-\t\t\t\t\tbreak;", "-\t\t\t\t}", "-\t\t\t}", "-", "-\t\t\t/*", "+\t\t\t* When an item is being deleted from a virtual table, do not", "+\t\t\t* allow the application to provide data for a new item that", "+\t\t\t* becomes visible until the item has been removed from the", "+\t\t\t* items array.  Because arbitrary application code can run", "+\t\t\t* during the callback, the items array might be accessed", "+\t\t\t* in an inconsistent state.  Rather than answering the data", "+\t\t\t* right away, queue a redraw for later.", "+\t\t\t*/", "+\t\t\tif ((style & SWT.VIRTUAL) != 0 && !item.cached) {", "+\t\t\t\tif (ignoreShrink) {", "+\t\t\t\t\tOS.SendMessage (handle, OS.LVM_REDRAWITEMS, plvfi.iItem, plvfi.iItem);", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t}", "+\t\t\t", "+\t\t\t/*"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cb485a69f659fe1083cc14f113de1cfa", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "28a7c9c62e09a440ce11f9081715d3867677550b", "commitAfterChange": "02960b509253479f2f1ee3befa7be0744f3ecf2f", "methodNumberBeforeChange": 169, "methodNumberAfterChange": 169, "signatureBeforeChange": "  LRESULT wmNotifyChild (NMHDR hdr, int wParam, int lParam)", "signatureAfterChange": "  LRESULT wmNotifyChild (NMHDR hdr, int wParam, int lParam)", "diff": ["-\t\t\t* When an item is being deleted from a virtual table, do not", "-\t\t\t* allow the application to provide data for a new item that", "-\t\t\t* becomes visible until the item has been removed from the", "-\t\t\t* items array.  Because arbitrary application code can run", "-\t\t\t* during the callback, the items array might be accessed", "-\t\t\t* in an inconsistent state.  Rather than answering the data", "-\t\t\t* right away, queue a redraw for later.", "+\t\t\t* Feature in Windows. On Vista, the list view expects the item array ", "+\t\t\t* to be up to date when a LVM_DELETEITEM message is being processed.", "+\t\t\t*  ", "+\t\t\t* Also, when the table is virtual, do not allow the application to ", "+\t\t\t* provide data for a new item that becomes visible until the item has", "+\t\t\t* been removed from the items array.  Because arbitrary application", "+\t\t\t* code can run during the callback, the items array might be accessed ", "+\t\t\t* in an inconsistent state.", "+\t\t\t*   ", "+\t\t\t* On both cases, Rather than answering the data right away, queue a ", "+\t\t\t* redraw for later.", "-\t\t\tif ((style & SWT.VIRTUAL) != 0 && !item.cached) {", "-\t\t\t\tif (ignoreShrink) {", "-\t\t\t\t\tOS.SendMessage (handle, OS.LVM_REDRAWITEMS, plvfi.iItem, plvfi.iItem);", "+\t\t\tif (ignoreShrink) {", "+\t\t\t\t/*", "+\t\t\t\t* Feature in Windows Vista and newer. Using LVM_REDRAWITEMS causes LVN_GETDISPINFO", "+\t\t\t\t* to be sent before the method returns. For this reason, LVM_REDRAWITEMS", "+\t\t\t\t* can never be used from a LVN_GETDISPINFO handler. The fix is to ", "+\t\t\t\t* InvalidateRect() passing the bounds for the entire item.", "+\t\t\t\t*/", "+\t\t\t\tif (!OS.IsWinCE && OS.WIN32_VERSION >= OS.VERSION (6, 0)) {", "+\t\t\t\t\tRECT rect = new RECT ();", "+\t\t\t\t\trect.left = OS.LVIR_BOUNDS;", "+\t\t\t\t\tignoreCustomDraw = true;", "+\t\t\t\t\tint /*long*/ code = OS.SendMessage (handle, OS. LVM_GETITEMRECT, plvfi.iItem, rect);", "+\t\t\t\t\tignoreCustomDraw = false;", "+\t\t\t\t\tif (code != 0) OS.InvalidateRect (handle, rect, true);", "+\t\t\t\t} else {", "+\t\t\t\t\tif ((style & SWT.VIRTUAL) != 0 && !item.cached) {", "+\t\t\t\t\t\tOS.SendMessage (handle, OS.LVM_REDRAWITEMS, plvfi.iItem, plvfi.iItem);", "+\t\t\t\t\t\tbreak;", "+\t\t\t\t\t}"]}], "num": 4510}