{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "cefee8d2f57b9ed636e9f1bec67098f4", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3c423e6d4e7be1ceba9a1f07da16e72e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText2.java", "commitBeforeChange": "0fa861dfc810fa95fef91d1138bd1d6fa87ebd2c", "commitAfterChange": "0600cb7b16b085c0042ea9cb2d61d7f2d118abff", "methodNumberBeforeChange": 59, "methodNumberAfterChange": 59, "signatureBeforeChange": " void calculateTopIndex()", "signatureAfterChange": " void calculateTopIndex(int delta)", "diff": ["-void calculateTopIndex() {", "+void calculateTopIndex(int delta) {", "-\t\tRectangle clientArea = getClientArea();", "-\t\ttopIndex = getLineIndex(clientArea.y);", "-\t\tint linePixel = getLinePixel(topIndex);", "-\t\tif (linePixel < 0) {", "-\t\t\tint lineCount = content.getLineCount();", "-\t\t\tif (topIndex < lineCount - 1) {", "-\t\t\t\tint bottom = getLinePixel(topIndex + 1);", "-\t\t\t\tbottom = lineCache.getLineHeight(topIndex + 1);", "-\t\t\t\tif (clientArea.height >= bottom) {", "-\t\t\t\t\ttopIndex++;", "-\t\t\t\t}", "+//\t\tRectangle clientArea = getClientArea();", "+//\t\ttopIndex = getLineIndex(clientArea.y);", "+//\t\tint linePixel = getLinePixel(topIndex);", "+//\t\tif (linePixel < 0) {", "+//\t\t\tint lineCount = content.getLineCount();", "+//\t\t\tif (topIndex < lineCount - 1) {", "+//\t\t\t\tint bottom = getLinePixel(topIndex + 1);", "+//\t\t\t\tbottom = lineCache.getLineHeight(topIndex + 1);", "+//\t\t\t\tif (clientArea.height >= bottom) {", "+//\t\t\t\t\ttopIndex++;", "+//\t\t\t\t}", "+//\t\t\t}", "+//\t\t}", "+\t\tif (delta > 0) {", "+\t\t\tif (partialHeight > delta) {", "+\t\t\t\tpartialHeight -= delta;", "+\t\t\t\treturn;", "-\t\t} ", "-\t}\t", "+\t\t\tdelta -= partialHeight;", "+\t\t\tpartialHeight = 0;", "+\t\t\t", "+\t\t\tint lineCount = content.getLineCount();", "+\t\t\twhile (delta > 0 && topIndex < lineCount -1) {", "+\t\t\t\tint lineHeight = lineCache.getLineHeight(topIndex);", "+\t\t\t\ttopIndex++;", "+\t\t\t\tif (lineHeight > delta) {", "+\t\t\t\t\tpartialHeight = lineHeight - delta;", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t\tdelta -= lineHeight;", "+\t\t\t}", "+\t\t} else {", "+\t\t\tif (topIndex > 0) {", "+\t\t\t\tint height = lineCache.getLineHeight(topIndex - 1) - partialHeight;", "+\t\t\t\tif (height > -delta) {", "+\t\t\t\t\tpartialHeight -= delta;", "+\t\t\t\t\treturn;", "+\t\t\t\t}", "+\t\t\t\tdelta += height;", "+\t\t\t\tpartialHeight = 0;", "+\t\t\t\ttopIndex--;", "+\t\t\t}", "+\t\t\t//delta == zero, topIndex--, end", "+\t\t\twhile (-delta > 0 && topIndex > 0) {", "+\t\t\t\tint lineHeight = lineCache.getLineHeight(topIndex - 1);", "+\t\t\t\tif (lineHeight > -delta) {", "+\t\t\t\t\tpartialHeight = -delta;", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t\ttopIndex--;", "+\t\t\t\tdelta += lineHeight;", "+\t\t\t}", "+\t\t}", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0db9c46d3d7565a2107cf82645aa2a0f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "bf221f66369037ceea33728d5ed71d69549dd596", "commitAfterChange": "73be0ec89889e2c1322c1bfa09d83f81f689ab7f", "methodNumberBeforeChange": 83, "methodNumberAfterChange": 84, "signatureBeforeChange": " void doPageUp(boolean select, int height)", "signatureAfterChange": " void doPageUp(boolean select, int height)", "diff": ["-\t\tint partialTopIndex = getPartialTopIndex();", "-\t\tint lineHeight = renderer.getLineHeight(partialTopIndex);", "+\t\tint lineHeight, lineIndex;", "-\t\t\tif (partialHeight == 0) {", "+\t\t\tif (topIndexY == 0) {", "-\t\t\t\theight = clientAreaHeight - partialHeight;", "+\t\t\t\tint y;", "+\t\t\t\tif (topIndex > 0) {", "+\t\t\t\t\tlineIndex = topIndex - 1;", "+\t\t\t\t\tlineHeight = renderer.getLineHeight(lineIndex);", "+\t\t\t\t\theight = clientAreaHeight - topIndexY;", "+\t\t\t\t\ty = lineHeight - topIndexY;", "+\t\t\t\t} else {", "+\t\t\t\t\tlineIndex = topIndex;", "+\t\t\t\t\tlineHeight = renderer.getLineHeight(lineIndex);", "+\t\t\t\t\theight = clientAreaHeight - (lineHeight + topIndexY);", "+\t\t\t\t\ty = -topIndexY;", "+\t\t\t\t}", "-\t\t\t\t\tint y = lineHeight - partialHeight;", "-\t\t\t\t\tTextLayout layout = renderer.getTextLayout(partialTopIndex);", "+\t\t\t\t\tTextLayout layout = renderer.getTextLayout(lineIndex);", "-\t\t\tint lineIndex = getLineIndex(clientAreaHeight - height);", "+\t\t\tlineIndex = getLineIndex(clientAreaHeight - height);", "-\t\tint availableHeight = 0;", "-\t\tif (partialHeight != 0) {", "-\t\t\tavailableHeight = lineHeight - partialHeight;", "-\t\t}", "-\t\tint lineIndex = partialTopIndex - 1;", "-\t\twhile (height > availableHeight && lineIndex >= 0) {", "-\t\t\tavailableHeight += renderer.getLineHeight(lineIndex--);", "-\t\t}", "-\t\t\tint offsetInLine = caretOffset - content.getOffsetAtLine(caretLine);", "-\t\t\tlineIndex = layout.getLineIndex(offsetInLine);", "-\t\t\tint[] offsets = layout.getLineOffsets();", "-\t\t\tif (lineIndex != 0 && offsetInLine == offsets[lineIndex] && caretAlignment == PREVIOUS_OFFSET_TRAILING) {", "-\t\t\t\tlineIndex--;", "-\t\t\t}", "+\t\t\tint offsetInLine = caretOffset - content.getOffsetAtLine(caretLine);", "+\t\t\tlineIndex = getVisualLineIndex(layout, offsetInLine);", "-\t\theight = Math.min(height, availableHeight);", "+\t\theight = getAvailableHeightAbove(height);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "496bbb20c2b4aae36becf1f1a703b2ea", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "bf221f66369037ceea33728d5ed71d69549dd596", "commitAfterChange": "73be0ec89889e2c1322c1bfa09d83f81f689ab7f", "methodNumberBeforeChange": 45, "methodNumberAfterChange": 45, "signatureBeforeChange": " void calculateTopIndex(int delta)", "signatureAfterChange": " void calculateTopIndex(int delta)", "diff": ["-\tint oldTopIndex = topIndex;\t", "+\tint oldTopIndex = topIndex;", "+\tint oldTopIndexY = topIndexY;", "-\t\tif (delta > 0) {", "-\t\t\tif (partialHeight > delta) {", "-\t\t\t\tpartialHeight -= delta;", "-\t\t\t\treturn;", "-\t\t\t}", "-\t\t\tdelta -= partialHeight;", "-\t\t\tpartialHeight = 0;", "-\t\t\t", "+\t\tif (delta >= 0) {", "+\t\t\tdelta -= topIndexY;", "+\t\t\tint lineIndex = topIndex;", "-\t\t\twhile (delta > 0 && topIndex < lineCount -1) {", "-\t\t\t\tint lineHeight = renderer.getLineHeight(topIndex);", "-\t\t\t\ttopIndex++;", "-\t\t\t\tif (lineHeight > delta) {", "-\t\t\t\t\tpartialHeight = lineHeight - delta;", "-\t\t\t\t\tbreak;", "-\t\t\t\t}", "-\t\t\t\tdelta -= lineHeight;", "+\t\t\twhile (lineIndex < lineCount) {", "+\t\t\t\tif (delta <= 0) break;", "+\t\t\t\tdelta -= renderer.getLineHeight(lineIndex++);", "+\t\t\t}", "+\t\t\tif (lineIndex < lineCount && -delta + renderer.getLineHeight(lineIndex) <= clientAreaHeight - topMargin - bottomMargin) {", "+\t\t\t\ttopIndex = lineIndex;", "+\t\t\t\ttopIndexY = -delta;", "+\t\t\t} else {", "+\t\t\t\ttopIndex = lineIndex - 1;", "+\t\t\t\ttopIndexY = -renderer.getLineHeight(topIndex) - delta;", "-\t\t\tif (topIndex > 0) {", "-\t\t\t\tint height = renderer.getLineHeight(topIndex - 1) - partialHeight;", "-\t\t\t\tif (height > -delta) {", "-\t\t\t\t\tpartialHeight -= delta;", "-\t\t\t\t\treturn;", "-\t\t\t\t}", "-\t\t\t\tdelta += height;", "-\t\t\t\tpartialHeight = 0;", "-\t\t\t\ttopIndex--;", "-\t\t\t}", "-\t\t\twhile (-delta > 0 && topIndex > 0) {", "-\t\t\t\tint lineHeight = renderer.getLineHeight(topIndex - 1);", "-\t\t\t\tif (lineHeight > -delta) {", "-\t\t\t\t\tpartialHeight = -delta;", "-\t\t\t\t\tbreak;", "-\t\t\t\t}", "-\t\t\t\ttopIndex--;", "+\t\t\tdelta -= topIndexY;", "+\t\t\tint lineIndex = topIndex;", "+\t\t\twhile (lineIndex > 0) {", "+\t\t\t\tint lineHeight = renderer.getLineHeight(lineIndex - 1);", "+\t\t\t\tif (delta + lineHeight > 0) break;", "+\t\t\t\tlineIndex--;", "+\t\t\t}", "+\t\t\tif (lineIndex == 0 || -delta + renderer.getLineHeight(lineIndex) <= clientAreaHeight - topMargin - bottomMargin) {", "+\t\t\t\ttopIndex = lineIndex;", "+\t\t\t\ttopIndexY = - delta;", "+\t\t\t} else {", "+\t\t\t\ttopIndex = lineIndex - 1;", "+\t\t\t\ttopIndexY = - renderer.getLineHeight(topIndex) - delta;", "-\tif (topIndex != oldTopIndex) {", "-\t\ttopOffset = content.getOffsetAtLine(topIndex);", "+\tif (topIndex != oldTopIndex || oldTopIndexY != topIndexY) {"]}], "num": 37739}