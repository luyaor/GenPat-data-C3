{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "1f17a7d49d45d4f9f0d1b9d16bfb7ed6", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a4be278cd6245c2ad29688894027db5b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/DateTime.java", "commitBeforeChange": "f4bb8ef7d86d4b06d34d232ac624ae216be4183a", "commitAfterChange": "358e077459326bfde3a675b949aa20349d21bc3d", "methodNumberBeforeChange": 73, "methodNumberAfterChange": 119, "signatureBeforeChange": "  void setTextField(int fieldName, int value, boolean commit, boolean adjust)", "signatureAfterChange": "  void setTextField (int fieldName, int value, boolean commitInternalDataStructure, boolean adjustDisplayedFormatting)", "diff": ["-void setTextField(int fieldName, int value, boolean commit, boolean adjust) {", "-\tif (commit) {", "-\t\tint max = calendar.getActualMaximum(fieldName);", "-\t\tint min = calendar.getActualMinimum(fieldName);", "-\t\tif (fieldName == Calendar.YEAR) {", "-\t\t\tmax = MAX_YEAR;", "-\t\t\tmin = MIN_YEAR;", "-\t\t\t/* Special case: convert 1 or 2-digit years into reasonable 4-digit years. */", "-\t\t\tint currentYear = Calendar.getInstance().get(Calendar.YEAR);", "-\t\t\tint currentCentury = (currentYear / 100) * 100;", "-\t\t\tif (value < (currentYear + 30) % 100) value += currentCentury;", "-\t\t\telse if (value < 100) value += currentCentury - 100;", "-\t\t}", "-\t\tif (value > max) value = min; // wrap", "-\t\tif (value < min) value = max; // wrap", "-\tint start = fieldIndices[currentField].x;", "-\tint end = fieldIndices[currentField].y;", "-\ttext.setSelection(start, end);", "-\tString newValue = formattedStringValue(fieldName, value, adjust);", "-\tStringBuffer buffer = new StringBuffer(newValue);", "-\t/* Convert leading 0's into spaces. */", "-\tint prependCount = end - start - buffer.length();", "-\tfor (int i = 0; i < prependCount; i++) {", "-\t\tswitch (fieldName) {", "-\t\t\tcase Calendar.MINUTE:", "-\t\t\tcase Calendar.SECOND:", "-\t\t\t\tbuffer.insert(0, 0);", "-\t\t\t\tbreak;", "-\t\t\tdefault:", "-\t\t\t\tbuffer.insert(0, ' ');", "-\t\t\t\tbreak;", "-\t\t}", "-\t}\t\t", "-\tnewValue = buffer.toString();", "-\tignoreVerify = true;", "-\ttext.insert(newValue);", "-\tignoreVerify = false;", "-\tselectField(currentField);", "-\tif (commit) setField(fieldName, value);", "+", "+void setTextField (int fieldName, int value, boolean commitInternalDataStructure, boolean adjustDisplayedFormatting) {", "+\tint start = fieldIndices[currentField].x;", "+\tint end = fieldIndices[currentField].y;", "+\tsetSelection (start, end);", "+\tif (commitInternalDataStructure) {", "+\t\tint validValue = validateValueBounds (fieldName, value);", "+\t\tsetFieldOfInternalDataStructure (fieldName, validValue);", "+\t\tupdateControl ();", "+\t} else {", "+\t\tString newValue = formattedStringValue (fieldName, value, adjustDisplayedFormatting);", "+\t\tnewValue = padWithZeros (start, end, newValue);", "+\t\treplaceCurrentlySelectedTextRegion (newValue);", "+\t}", "+\tselectField (currentField);", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f1dd5fdfbff1f659d134cd64002b9158", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/emulated/datetime/org/eclipse/swt/widgets/DateTime.java", "commitBeforeChange": "46857aaaa0b24a47271ecece1dd257302ed1ada5", "commitAfterChange": "03a94c558053b3ed9d02e16929534449bce35247", "methodNumberBeforeChange": 46, "methodNumberAfterChange": 46, "signatureBeforeChange": "  void setTextField(int fieldName, int value, boolean commit, boolean adjustMonth)", "signatureAfterChange": "  void setTextField(int fieldName, int value, boolean commit, boolean adjust)", "diff": ["-void setTextField(int fieldName, int value, boolean commit, boolean adjustMonth) {", "+void setTextField(int fieldName, int value, boolean commit, boolean adjust) {", "-\t\t\tif (value < 30) value += 2000;", "-\t\t\telse if (value <= 99) value += 1900;", "+\t\t\tint currentYear = Calendar.getInstance().get(Calendar.YEAR);", "+\t\t\tint currentCentury = (currentYear / 100) * 100;", "+\t\t\tif (value < (currentYear + 30) % 100) value += currentCentury;", "+\t\t\telse if (value < 100) value += currentCentury - 100;", "-\tString newValue;", "-\tif (fieldName == Calendar.AM_PM) {", "-\t\tnewValue = value == Calendar.AM ? \"AM\" : \"PM\";", "-\t\tcalendar.roll(Calendar.HOUR_OF_DAY, 12);", "-\t} else {", "-\t\tif (fieldName == Calendar.HOUR && value == 0) {", "-\t\t\tnewValue = String.valueOf(12); // TODO: if we add setFormat, then this is not generic enough", "-\t\t} else {", "-\t\t\tnewValue = String.valueOf(fieldName == Calendar.MONTH && adjustMonth ? value + 1 : value);", "-\t\t}", "-\t\tStringBuffer buffer = new StringBuffer(newValue);", "-\t\tint prependCount = end - start - buffer.length();", "-\t\tfor (int i = 0; i < prependCount; i++) {", "-\t\t\tbuffer.insert(0, ' ');", "-\t\t}", "-\t\tnewValue = buffer.toString();", "+\tString newValue = formattedStringValue(fieldName, value, adjust);", "+\tStringBuffer buffer = new StringBuffer(newValue);", "+\t/* Convert leading 0's into spaces. */", "+\tint prependCount = end - start - buffer.length();", "+\tfor (int i = 0; i < prependCount; i++) {", "+\t\tbuffer.insert(0, ' ');", "+\tnewValue = buffer.toString();"]}], "num": 48751}