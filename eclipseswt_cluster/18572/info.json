{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "5190a8ff51c702f26050b420c5b1733c", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4e273f4123fd42084496e47406b102f5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Group.java", "commitBeforeChange": "48cc0a268f324be7f04de1bf4769b6763dd5172e", "commitAfterChange": "6afd0f7c847ebf7da61adbbd98eda015eb44fe3f", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 22, "signatureBeforeChange": "  LRESULT WM_SIZE (int wParam, int lParam)", "signatureAfterChange": "  LRESULT WM_WINDOWPOSCHANGING (int wParam, int lParam)", "diff": ["-LRESULT WM_SIZE (int wParam, int lParam) {", "-\tLRESULT result = super.WM_SIZE (wParam, lParam);", "-\tif (OS.IsWinCE) return result;", "-\tOS.InvalidateRect (handle, null, true);", "-\treturn result;", "-}", "+", "+LRESULT WM_WINDOWPOSCHANGING (int wParam, int lParam) {", "+\tLRESULT result = super.WM_WINDOWPOSCHANGING (wParam, lParam);", "+\tif (result != null) return result;", "+\t/*", "+\t* Invalidate the portion of the group widget that needs to", "+\t* be redrawn.  Note that for some reason, invalidating the", "+\t* group from inside WM_SIZE causes pixel corruption for", "+\t* radio button children.", "+\t*/", "+\tif (OS.IsWinCE) return result;", "+\tif (!OS.IsWindowVisible (handle)) return result;", "+\tWINDOWPOS lpwp = new WINDOWPOS ();", "+\tOS.MoveMemory (lpwp, lParam, WINDOWPOS.sizeof);", "+\tif ((lpwp.flags & (OS.SWP_NOSIZE | OS.SWP_NOREDRAW)) != 0) {", "+\t\treturn result;", "+\t}", "+\tRECT rect = new RECT ();", "+\tOS.SetRect (rect, 0, 0, lpwp.cx, lpwp.cy);", "+\tOS.SendMessage (handle, OS.WM_NCCALCSIZE, 0, rect);", "+\tint newWidth = rect.right - rect.left;", "+\tint newHeight = rect.bottom - rect.top;", "+\tOS.GetClientRect (handle, rect);", "+\tint oldWidth = rect.right - rect.left;", "+\tint oldHeight = rect.bottom - rect.top;", "+\tif (newWidth == oldWidth && newHeight == oldHeight) {", "+\t\treturn result;", "+\t}", "+\tif (newWidth != oldWidth) {", "+\t\tint left = oldWidth;", "+\t\tif (newWidth < oldWidth) left = newWidth;", "+\t\tOS.SetRect (rect, left - CLIENT_INSET, 0, newWidth, newHeight);", "+\t\tOS.InvalidateRect (handle, rect, true);", "+\t}", "+\tif (newHeight != oldHeight) {", "+\t\tint bottom = oldHeight;", "+\t\tif (newHeight < oldHeight) bottom = newHeight;", "+\t\tif (newWidth < oldWidth) oldWidth -= CLIENT_INSET;", "+\t\tOS.SetRect (rect, 0, bottom - CLIENT_INSET, oldWidth, newHeight);", "+\t\tOS.InvalidateRect (handle, rect, true);", "+\t}", "+\treturn result;", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "025c825f8e00ac2f792313e669505008", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "8446f9e98b59905e2652a2064c0f407c80cfe624", "commitAfterChange": "595e8300c2ed2e3edf85213e588d65e62a8727e9", "methodNumberBeforeChange": 86, "methodNumberAfterChange": 86, "signatureBeforeChange": "  LRESULT WM_WINDOWPOSCHANGING (int wParam, int lParam)", "signatureAfterChange": "  LRESULT WM_WINDOWPOSCHANGING (int wParam, int lParam)", "diff": ["+\tLRESULT result = super.WM_WINDOWPOSCHANGING (wParam, lParam);", "+\tif (result != null) return result;", "-\t* using SWP_NOREDRAW and then damage only the combo", "-\t* box text field.", "+\t* using SWP_NOREDRAW and then damage the combo box", "+\t* text field and the area in the parent where the", "+\t* combo box used to be.", "-\tWINDOWPOS lpwp = new WINDOWPOS ();", "-\tOS.MoveMemory (lpwp, lParam, WINDOWPOS.sizeof);", "-\tif ((lpwp.flags & OS.SWP_NOSIZE) == 0) {", "-\t\tif (ignoreResize) {", "+\tif (drawCount != 0) return result;", "+\tif (!OS.IsWindowVisible (handle)) return result;", "+\tif (ignoreResize) {", "+\t\tWINDOWPOS lpwp = new WINDOWPOS ();", "+\t\tOS.MoveMemory (lpwp, lParam, WINDOWPOS.sizeof);", "+\t\tif ((lpwp.flags & OS.SWP_NOSIZE) == 0) {", "+\t\t\tRECT rect = new RECT ();", "+\t\t\tOS.GetWindowRect (handle, rect);", "+\t\t\tint width = rect.right - rect.left;", "+\t\t\tint height = rect.bottom - rect.top;", "+\t\t\tif (width != 0 && height != 0) {", "+\t\t\t\tint /*long*/ hwndParent = parent.handle;", "+\t\t\t\tint /*long*/ hwndChild = OS.GetWindow (hwndParent, OS.GW_CHILD);", "+\t\t\t\tOS.MapWindowPoints (0, hwndParent, rect, 2);", "+\t\t\t\tint /*long*/ rgn1 = OS.CreateRectRgn (rect.left, rect.top, rect.right, rect.bottom);", "+\t\t\t\twhile (hwndChild != 0) {", "+\t\t\t\t\tif (hwndChild != handle) {", "+\t\t\t\t\t\tOS.GetWindowRect (hwndChild, rect);", "+\t\t\t\t\t\tOS.MapWindowPoints (0, hwndParent, rect, 2);", "+\t\t\t\t\t\tint /*long*/ rgn2 = OS.CreateRectRgn (rect.left, rect.top, rect.right, rect.bottom);", "+\t\t\t\t\t\tOS.CombineRgn (rgn1, rgn1, rgn2, OS.RGN_DIFF);", "+\t\t\t\t\t\tOS.DeleteObject (rgn2);", "+\t\t\t\t\t}", "+\t\t\t\t\thwndChild = OS.GetWindow (hwndChild, OS.GW_HWNDNEXT);", "+\t\t\t\t}", "+\t\t\t\tint flags = OS.RDW_ERASE | OS.RDW_FRAME | OS.RDW_INVALIDATE;", "+\t\t\t\tOS.RedrawWindow (hwndParent, null, rgn1, flags);", "+\t\t\t\tOS.DeleteObject (rgn1);", "+\t\t\t}", "-\treturn super.WM_WINDOWPOSCHANGING (wParam, lParam);", "+\treturn result;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "eeb8ba40cd51145cd76ef3021afda152", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Decorations.java", "commitBeforeChange": "6df0f71a3908342adb1e7d84d70d4700c7692726", "commitAfterChange": "14d28b3fe6cf36e8628c8f9f5ebeeff54d692a1f", "methodNumberBeforeChange": 39, "methodNumberAfterChange": 39, "signatureBeforeChange": "\r public void setMaximized (boolean maximized)", "signatureAfterChange": "\r public void setMaximized (boolean maximized)", "diff": ["-\tif (OS.IsWinCE) return;\r", "-\tswFlags = OS.SW_RESTORE;\r", "-\tif (maximized) swFlags = OS.SW_SHOWMAXIMIZED;\r", "-\tif (!OS.IsWindowVisible (handle)) return;\r", "-\tif (maximized == OS.IsZoomed (handle)) return;\r", "-\tOS.ShowWindow (handle, swFlags);\r", "-\tOS.UpdateWindow (handle);\r", "+\tif (OS.IsWinCE) {\r", "+\t\t/*\r", "+\t\t* Note: WinCE does not support SW_SHOWMAXIMIZED and SW_RESTORE. The\r", "+\t\t* workaround is to resize the window to fit the parent client area.\r", "+\t\t* PocketPC windows typically don't have a caption when they are\r", "+\t\t* maximized. They usually have one when they are not occupying all the\r", "+\t\t* space. We implement this behavior by default - it can be overriden by\r", "+\t\t* setting SWT.TITLE or SWT.NO_TRIM.\r", "+\t\t*/\r", "+\t\tif (maximized) {\r", "+\t\t\tif ((style & SWT.TITLE) == 0) {\r", "+\t\t\t\t/* remove caption when maximized */\r", "+\t\t\t\tint bits = OS.GetWindowLong (handle, OS.GWL_STYLE);\r", "+\t\t\t\tbits &= ~OS.WS_CAPTION;\r", "+\t\t\t\tOS.SetWindowLong (handle, OS.GWL_STYLE, bits);\r", "+\t\t\t}\r", "+\t\t\t\r", "+\t\t\tint flags = OS.SWP_NOZORDER | OS.SWP_DRAWFRAME | OS.SWP_NOACTIVATE;\r", "+\t\t\tif (parent != null) {\r", "+\t\t\t\tRectangle rect = parent.getClientArea ();\r", "+\t\t\t\tOS.SetWindowPos (handle, 0, rect.x, rect.y, rect.width, rect.height, flags);\t\t\t\t\t\t\r", "+\t\t\t} else {\r", "+\t\t\t\tRECT rect = new RECT ();\r", "+\t\t\t\tOS.SystemParametersInfo (OS.SPI_GETWORKAREA, 0, rect, 0);\r", "+\t\t\t\tint width = rect.right - rect.left;\r", "+\t\t\t\tint height = rect.bottom - rect.top;\r", "+\t\t\t\tOS.SetWindowPos (handle, 0, rect.left, rect.top, width, height, flags);\t\t\t\r", "+\t\t\t}\r", "+\t\t} else {\r", "+\t\t\tif ((style & SWT.NO_TRIM) == 0) {\r", "+\t\t\t\t/* insert caption when no longer maximized */\r", "+\t\t\t\tint bits = OS.GetWindowLong (handle, OS.GWL_STYLE);\r", "+\t\t\t\tbits |= OS.WS_CAPTION;\r", "+\t\t\t\tOS.SetWindowLong (handle, OS.GWL_STYLE, bits);\r", "+\t\t\t\tint flags = OS.SWP_NOMOVE | OS.SWP_NOSIZE | OS.SWP_NOZORDER | OS.SWP_DRAWFRAME;\r", "+\t\t\t\tOS.SetWindowPos (handle, 0, 0, 0, 0, 0, flags);\r", "+\t\t\t}\r", "+\t\t}\r", "+\t} else {\r", "+\t\tswFlags = OS.SW_RESTORE;\r", "+\t\tif (maximized) swFlags = OS.SW_SHOWMAXIMIZED;\r", "+\t\tif (!OS.IsWindowVisible (handle)) return;\r", "+\t\tif (maximized == OS.IsZoomed (handle)) return;\r", "+\t\tOS.ShowWindow (handle, swFlags);\r", "+\t\tOS.UpdateWindow (handle);\r", "+\t}\r"]}], "num": 18572}