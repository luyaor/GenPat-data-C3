{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "fd8d57528093aa86b16c55f6b184795e", "detectedBy": ["DIFF_DBSCAN", "AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9b75316f7b9d5656cfa093de06416056", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "c89bab5bedb26789fc55835a14938a4fc6d4cc5c", "commitAfterChange": "8b04106dcfac2380b6792586458d07b21132dfcb", "methodNumberBeforeChange": 61, "methodNumberAfterChange": 64, "signatureBeforeChange": " public Point stringExtent(String string)", "signatureAfterChange": " public Point stringExtent(String string)", "diff": ["-\tif (handle == 0) SWT.error(SWT.ERROR_GRAPHIC_DISPOSED);", "-\tif (string == null) SWT.error(SWT.ERROR_NULL_ARGUMENT);", "-\tint length = string.length();", "-\tif (length == 0) return new Point(0, data.fontAscent + data.fontDescent);", "-\tif (Font.USE_ATSUI) {", "-\t\tif (data.layout == 0) createLayout ();", "-\t\tif (string != data.string) {", "-\t\t\tif (data.stringPtr != 0) OS.DisposePtr(data.stringPtr);", "-\t\t\tFont font = data.font;", "-\t\t\tint atsuiStyle = font.atsuiStyle != 0 ? font.atsuiStyle : data.atsuiStyle;", "-\t\t\tint ptr = OS.NewPtr(length * 2);", "-\t\t\tOS.memcpy(ptr, string, length * 2);", "-\t\t\tOS.ATSUSetTextPointerLocation(data.layout, ptr, 0, length, length);", "-\t\t\tOS.ATSUSetRunStyle(data.layout, atsuiStyle, 0, length);", "-\t\t\tdata.string = string;", "-\t\t\tdata.stringPtr = ptr;", "-\t\t\tOS.ATSUSetTransientFontMatching(data.layout, true);", "-\t\t}\t", "-\t\tATSTrapezoid trapezoid = new ATSTrapezoid();", "-\t\tOS.ATSUGetGlyphBounds(data.layout, 0, 0, 0, length, (short)OS.kATSUseDeviceOrigins, 1, trapezoid, null);", "-\t\tint width = OS.Fix2Long(trapezoid.upperRight_x) - OS.Fix2Long(trapezoid.upperLeft_x);", "-\t\tint height = OS.Fix2Long(trapezoid.lowerRight_y) - OS.Fix2Long(trapezoid.upperRight_y);", "-\t\treturn new Point(width, height);", "-\t} else {", "-\t\tOS.CGContextSetTextDrawingMode(handle, OS.kCGTextInvisible);", "-\t\tbyte[] buffer = string.getBytes();", "-\t\tOS.CGContextShowTextAtPoint(handle, 0, 0, buffer, buffer.length);", "-\t\tCGPoint pt = new CGPoint();", "-\t\tOS.CGContextGetTextPosition(handle, pt);", "-\t\treturn new Point((int)pt.x, data.fontAscent + data.fontDescent);", "-\t}", "+\treturn textExtent(string, 0);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c01be88082a683400dabf2e0f397f0e6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "c89bab5bedb26789fc55835a14938a4fc6d4cc5c", "commitAfterChange": "8b04106dcfac2380b6792586458d07b21132dfcb", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 23, "signatureBeforeChange": " public void drawString(String string, int x, int y, boolean isTransparent)", "signatureAfterChange": " public void drawString(String string, int x, int y, boolean isTransparent)", "diff": ["-\tif (handle == 0) SWT.error(SWT.ERROR_GRAPHIC_DISPOSED);", "-\tif (string == null) SWT.error(SWT.ERROR_NULL_ARGUMENT);", "-\tif (data.updateClip) setCGClipping();", "-\tint length = string.length();", "-\tif (length == 0) return;", "-\tOS.CGContextSaveGState(handle);", "-\tOS.CGContextScaleCTM(handle, 1, -1);", "-\tOS.CGContextSetFillColor(handle, data.foreground);", "-\tif (Font.USE_ATSUI) {", "-\t\tif (data.layout == 0) createLayout ();", "-\t\tif (string != data.string) {", "-\t\t\tif (data.stringPtr != 0) OS.DisposePtr(data.stringPtr);", "-\t\t\tFont font = data.font;", "-\t\t\tint atsuiStyle = font.atsuiStyle != 0 ? font.atsuiStyle : data.atsuiStyle;", "-\t\t\tint ptr = OS.NewPtr(length * 2);", "-\t\t\tOS.memcpy(ptr, string, length * 2);", "-\t\t\tOS.ATSUSetTextPointerLocation(data.layout, ptr, 0, length, length);", "-\t\t\tOS.ATSUSetRunStyle(data.layout, atsuiStyle, 0, length);", "-\t\t\tdata.string = string;", "-\t\t\tdata.stringPtr = ptr;", "-\t\t\tOS.ATSUSetTransientFontMatching(data.layout, true);", "-\t\t}", "-\t\tOS.ATSUDrawText(data.layout, 0, length, OS.X2Fix(x), OS.X2Fix(-(y + data.fontAscent)));", "-\t} else {", "-\t\tOS.CGContextSetTextDrawingMode(handle, OS.kCGTextFill);", "-\t\tbyte[] buffer = string.getBytes();", "-\t\tOS.CGContextShowTextAtPoint(handle, x, -(y + data.fontAscent), buffer, buffer.length);", "-\t}", "-\tOS.CGContextRestoreGState(handle);", "-\tif (data.control != 0 && data.paintEvent == 0) OS.CGContextSynchronize(handle);", "+\tdrawText(string, x, y, isTransparent ? SWT.DRAW_TRANSPARENT : 0);"]}], "num": 2184}