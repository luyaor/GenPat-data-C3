{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "95316a5c535ad8863e93c493c9739870", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7284ae998e354392b7e1159b56fca886", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Program/carbon/org/eclipse/swt/program/Program.java", "commitBeforeChange": "14581ca5a7841e362a4bb6a68c76d00675c70760", "commitAfterChange": "2882bbd7423650466596733b7f7109e5d58042c8", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 9, "signatureBeforeChange": "  static Program getProgram (String key)", "signatureAfterChange": "  static Program getProgram(byte[] fsRef)", "diff": ["-", "-static Program getProgram (String key) {", "-\tString[] extentions = getExtensions();", "-\tint i = 0;", "-\twhile (i < extentions.length) {", "-\t\tString ext = extentions[i];", "-\t\tif (ext.equals(key)) break;", "-\t\ti++;", "-\t}", "-\tif (i == extentions.length) return null;", "-", "-\t/* Name */", "-\tString name = key;", "-\tif (name == null || name.length () == 0) return null;", "-", "-\t/* Command */", "-\tString command = \"/usr/bin/open %f\";", "-", "-\t/* Icon */", "-\tString iconName = \"icon\";", "-", "-\tProgram program = new Program ();", "-\tprogram.name = name;", "-\tprogram.command = command;", "-\tprogram.iconName = iconName;", "-\treturn program;", "+", "+static Program getProgram(byte[] fsRef) {", "+\tString name = \"\";", "+\tint[] namePtr = new int[1];", "+\tOS.LSCopyDisplayNameForRef(fsRef, namePtr);", "+\tif (namePtr[0] != 0) {", "+\t\tint length = OS.CFStringGetLength(namePtr[0]);", "+\t\tif (length != 0) {", "+\t\t\tchar[] buffer= new char[length];", "+\t\t\tCFRange range = new CFRange();", "+\t\t\trange.length = length;", "+\t\t\tOS.CFStringGetCharacters(namePtr[0], range, buffer);", "+\t\t\tname = new String(buffer);", "+\t\t}", "+\t\tOS.CFRelease(namePtr[0]);", "+\t}", "+\tProgram program = new Program();", "+\tprogram.fsRef = fsRef;", "+\tprogram.name = name;", "+\treturn program;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "686bfebf05bf6df0e89c9e3046fd83fb", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/carbon/org/eclipse/swt/dnd/RTFTransfer.java", "commitBeforeChange": "89dd18f56416766e9f25e99fa93a3cfdf736ff7e", "commitAfterChange": "0333c3cd6e1227d0185cdb60c13b053083d72b21", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": " public Object nativeToJava(TransferData transferData)", "diff": ["-\tbyte[] buffer = (byte[])super.nativeToJava(transferData);", "-\tif (buffer == null) return null;", "-\t// convert byte array to a string", "+\tif (!isSupportedType(transferData) || transferData.data == null) return null;", "+\tif (transferData.data.length == 0 || transferData.data[0].length == 0) return null;", "+\tbyte[] buffer = transferData.data[0];", "-\tint ptr = OS.CFStringCreateWithBytes(OS.kCFAllocatorDefault, buffer, buffer.length, encoding, true);", "-\tint length = OS.CFStringGetLength(ptr);", "-\tchar[] chars = new char[length];", "-\tCFRange range = new CFRange();", "-\trange.length = length;", "-\tOS.CFStringGetCharacters(ptr, range, chars);", "-\tOS.CFRelease (ptr);", "-\treturn new String (chars);", "+\tint cfstring = OS.CFStringCreateWithBytes(OS.kCFAllocatorDefault, buffer, buffer.length, encoding, true);", "+\tif (cfstring == 0) return null;", "+\ttry {", "+\t\tint length = OS.CFStringGetLength(cfstring);", "+\t\tif (length == 0) return null;", "+\t\tchar[] chars = new char[length];", "+\t\tCFRange range = new CFRange();", "+\t\trange.length = length;", "+\t\tOS.CFStringGetCharacters(cfstring, range, chars);", "+\t\treturn new String(chars);", "+\t} finally {", "+\t\tOS.CFRelease(cfstring);", "+\t}"]}], "num": 12684}