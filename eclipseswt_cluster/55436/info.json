{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c30a046591fe95ee2de2dbab69f8ce8a", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b511ff886aff2b0f1d2fe2c0888b3ec5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "c89bab5bedb26789fc55835a14938a4fc6d4cc5c", "commitAfterChange": "8b04106dcfac2380b6792586458d07b21132dfcb", "methodNumberBeforeChange": 63, "methodNumberAfterChange": 66, "signatureBeforeChange": " public Point textExtent(String string, int flags)", "signatureAfterChange": " public Point textExtent(String string, int flags)", "diff": ["-\t//NOT DONE", "-\treturn stringExtent(string);", "+\tint length = string.length();", "+\tif (length == 0) return new Point(0, data.fontAscent + data.fontDescent);", "+\tif (data.layout == 0) createLayout ();", "+\tint layout = data.layout;", "+\tlength = setString(string, flags);", "+\tint width, height;", "+\tATSTrapezoid trapezoid = new ATSTrapezoid();", "+\tif ((flags & SWT.DRAW_DELIMITER) != 0) {", "+\t\twidth = 0;", "+\t\theight = 0;", "+\t\tint[] breakCount = new int[1];", "+\t\tOS.ATSUGetSoftLineBreaks(layout, 0, length, 0, null, breakCount);", "+\t\tint[] breaks = new int[breakCount[0] + 1];", "+\t\tOS.ATSUGetSoftLineBreaks(layout, 0, length, breakCount[0], breaks, breakCount);", "+\t\tbreaks[breakCount[0]] = length;", "+\t\tfor (int i=0, start=0; i<breaks.length; i++) {", "+\t\t\tint lineBreak = breaks[i];", "+\t\t\tOS.ATSUGetGlyphBounds(layout, 0, 0, start, lineBreak - start, (short)OS.kATSUseDeviceOrigins, 1, trapezoid, null);", "+\t\t\twidth = Math.max(width, OS.Fix2Long(trapezoid.upperRight_x) - OS.Fix2Long(trapezoid.upperLeft_x));", "+\t\t\theight += OS.Fix2Long(trapezoid.lowerRight_y) - OS.Fix2Long(trapezoid.upperRight_y);", "+\t\t\tstart = lineBreak;", "+\t\t}", "+\t} else {", "+\t\tOS.ATSUGetGlyphBounds(layout, 0, 0, 0, length, (short)OS.kATSUseDeviceOrigins, 1, trapezoid, null);", "+\t\twidth = OS.Fix2Long(trapezoid.upperRight_x) - OS.Fix2Long(trapezoid.upperLeft_x);", "+\t\theight = OS.Fix2Long(trapezoid.lowerRight_y) - OS.Fix2Long(trapezoid.upperRight_y);", "+\t}", "+\treturn new Point(width, height);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bbab67fccb0605e541b722fcc103f585", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "c89bab5bedb26789fc55835a14938a4fc6d4cc5c", "commitAfterChange": "8b04106dcfac2380b6792586458d07b21132dfcb", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 26, "signatureBeforeChange": " public void drawText (String string, int x, int y, int flags)", "signatureAfterChange": " public void drawText (String string, int x, int y, int flags)", "diff": ["-\t//NOT DONE", "-\tdrawString(string, x, y);", "+\tif (data.updateClip) setCGClipping();", "+\tint length = string.length();", "+\tif (length == 0) return;", "+\tOS.CGContextSaveGState(handle);", "+\tOS.CGContextScaleCTM(handle, 1, -1);", "+\tif (data.layout == 0) createLayout ();", "+\tint layout = data.layout;", "+\tlength = setString(string, flags);", "+\tif ((flags & SWT.DRAW_DELIMITER) != 0) {", "+\t\tint[] breakCount = new int[1];", "+\t\tOS.ATSUGetSoftLineBreaks(layout, 0, length, 0, null, breakCount);", "+\t\tint[] breaks = new int[breakCount[0] + 1];", "+\t\tOS.ATSUGetSoftLineBreaks(layout, 0, length, breakCount[0], breaks, breakCount);", "+\t\tbreaks[breakCount[0]] = length;", "+\t\tfor (int i=0, start=0; i<breaks.length; i++) {", "+\t\t\tint lineBreak = breaks[i];", "+\t\t\tdrawText(layout, x, y, start, lineBreak - start, flags);", "+\t\t\ty += data.fontAscent + data.fontDescent;", "+\t\t\tstart = lineBreak;", "+\t\t}", "+\t} else {", "+\t\tdrawText(layout, x, y, 0, length, flags);", "+\t}", "+\tOS.CGContextRestoreGState(handle);", "+\tif (data.control != 0 && data.paintEvent == 0) OS.CGContextSynchronize(handle);", "+}"]}], "num": 55436}