{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0cdef970efecfdc7d8e36d16e3711e7b", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f44857364b2f0b54335bb7efd704bd0f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "d9a401c1467de3c60e82082fb9582487dbeb27cc", "commitAfterChange": "3172b30bf1c6ff0d5e001b36bd7fac99461f15aa", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "  LRESULT CDDS_SUBITEMPREPAINT (int wParam, int lParam)", "signatureAfterChange": "  LRESULT CDDS_SUBITEMPREPAINT (int wParam, int lParam)", "diff": ["-\t\tif (!ignoreDraw && !ignoreDrawSelected && (style & SWT.FULL_SELECTION) != 0) {", "+\t\tif (!ignoreDrawSelected && (style & SWT.FULL_SELECTION) != 0) {", "-\t/*", "-\t* Bug in Windows.  When the attibutes are for one cell in a table,", "-\t* Windows does not reset them for the next cell.  As a result, all", "-\t* subsequent cells are drawn using the previous font, foreground and", "-\t* background colors.  The fix is to set the all attributes when any", "-\t* attribute could have changed.", "-\t*/", "-\tboolean hasAttributes = true;", "-\tif (hFont == -1 && clrText == -1 && clrTextBk == -1) {", "-\t\tif (item.cellForeground == null && item.cellBackground == null && item.cellFont == null) {", "-\t\t\tint hwndHeader = OS.SendMessage (handle, OS.LVM_GETHEADER, 0, 0);", "-\t\t\tint count = OS.SendMessage (hwndHeader, OS.HDM_GETITEMCOUNT, 0, 0);", "-\t\t\tif (count == 1) hasAttributes = false;", "-\t\t}", "-\t}", "-\tif (hasAttributes) {", "-\t\tif (hFont == -1) hFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "-\t\tOS.SelectObject (hDC, hFont);", "-\t\tif (OS.IsWindowEnabled (handle)) {", "-\t\t\tnmcd.clrText = clrText == -1 ? getForegroundPixel () : clrText;", "-\t\t\tif (clrTextBk == -1) {", "-\t\t\t\tnmcd.clrTextBk = OS.CLR_NONE;", "-\t\t\t\tif (textColor == -1) {", "-\t\t\t\t\tControl control = findBackgroundControl ();", "-\t\t\t\t\tif (control == null) control = this;", "-\t\t\t\t\tif (control.backgroundImage == null) {", "-\t\t\t\t\t\tnmcd.clrTextBk = control.getBackgroundPixel ();", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t} else {", "-\t\t\t\tnmcd.clrTextBk = textColor != -1 ? OS.CLR_NONE : clrTextBk;", "+\tif (!ignoreDraw) {", "+\t\t/*", "+\t\t* Bug in Windows.  When the attibutes are for one cell in a table,", "+\t\t* Windows does not reset them for the next cell.  As a result, all", "+\t\t* subsequent cells are drawn using the previous font, foreground and", "+\t\t* background colors.  The fix is to set the all attributes when any", "+\t\t* attribute could have changed.", "+\t\t*/", "+\t\tboolean hasAttributes = true;", "+\t\tif (hFont == -1 && clrText == -1 && clrTextBk == -1) {", "+\t\t\tif (item.cellForeground == null && item.cellBackground == null && item.cellFont == null) {", "+\t\t\t\tint hwndHeader = OS.SendMessage (handle, OS.LVM_GETHEADER, 0, 0);", "+\t\t\t\tint count = OS.SendMessage (hwndHeader, OS.HDM_GETITEMCOUNT, 0, 0);", "+\t\t\t\tif (count == 1) hasAttributes = false;", "-\t\t\tOS.MoveMemory (lParam, nmcd, NMLVCUSTOMDRAW.sizeof);", "-\t\tcode |= OS.CDRF_NEWFONT;", "+\t\tif (hasAttributes) {", "+\t\t\tif (hFont == -1) hFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "+\t\t\tOS.SelectObject (hDC, hFont);", "+\t\t\tif (OS.IsWindowEnabled (handle)) {", "+\t\t\t\tnmcd.clrText = clrText == -1 ? getForegroundPixel () : clrText;", "+\t\t\t\tif (clrTextBk == -1) {", "+\t\t\t\t\tnmcd.clrTextBk = OS.CLR_NONE;", "+\t\t\t\t\tif (textColor == -1) {", "+\t\t\t\t\t\tControl control = findBackgroundControl ();", "+\t\t\t\t\t\tif (control == null) control = this;", "+\t\t\t\t\t\tif (control.backgroundImage == null) {", "+\t\t\t\t\t\t\tnmcd.clrTextBk = control.getBackgroundPixel ();", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t} else {", "+\t\t\t\t\tnmcd.clrTextBk = textColor != -1 ? OS.CLR_NONE : clrTextBk;", "+\t\t\t\t}", "+\t\t\t\tOS.MoveMemory (lParam, nmcd, NMLVCUSTOMDRAW.sizeof);", "+\t\t\t}", "+\t\t\tcode |= OS.CDRF_NEWFONT;", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "572fc0d8f7bb3ff7a1d7486b6c234ecd", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "64605ca991b55a1d0eb43e382d0c6cb2dad19bc2", "commitAfterChange": "791bb30d56cbcd4b6bb6c636ef3a3f5c9f75a550", "methodNumberBeforeChange": 129, "methodNumberAfterChange": 129, "signatureBeforeChange": "  LRESULT wmNotifyChild (int wParam, int lParam)", "signatureAfterChange": "  LRESULT wmNotifyChild (int wParam, int lParam)", "diff": ["-\t\t\t\t\t\tif (useColor) {", "-\t\t\t\t\t\t\tint clrText = item.cellForeground != null ? item.cellForeground [0] : -1;", "-\t\t\t\t\t\t\tif (clrText == -1) clrText = item.foreground;", "-\t\t\t\t\t\t\tnmcd.clrText = clrText == -1 ? getForegroundPixel () : clrText;", "-\t\t\t\t\t\t\tint clrTextBk = item.cellBackground != null ? item.cellBackground [0] : -1;", "-\t\t\t\t\t\t\tif (clrTextBk == -1) clrTextBk = item.background;", "-\t\t\t\t\t\t\tif (clrTextBk == -1) {", "-\t\t\t\t\t\t\t\tControl control = findBackgroundControl ();", "-\t\t\t\t\t\t\t\tif (control == null) control = this;", "-\t\t\t\t\t\t\t\tif (control.backgroundImage == null) {", "-\t\t\t\t\t\t\t\t\tnmcd.clrTextBk = control.getBackgroundPixel ();", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\tnmcd.clrTextBk = clrTextBk;", "+\t\t\t\t\t\tint clrText = item.cellForeground != null ? item.cellForeground [0] : -1;", "+\t\t\t\t\t\tif (clrText == -1) clrText = item.foreground;", "+\t\t\t\t\t\tnmcd.clrText = clrText == -1 ? getForegroundPixel () : clrText;", "+\t\t\t\t\t\tint clrTextBk = item.cellBackground != null ? item.cellBackground [0] : -1;", "+\t\t\t\t\t\tif (clrTextBk == -1) clrTextBk = item.background;", "+\t\t\t\t\t\tif (clrTextBk == -1) {", "+\t\t\t\t\t\t\tControl control = findBackgroundControl ();", "+\t\t\t\t\t\t\tif (control == null) control = this;", "+\t\t\t\t\t\t\tif (control.backgroundImage == null) {", "+\t\t\t\t\t\t\t\tnmcd.clrTextBk = control.getBackgroundPixel ();", "-\t\t\t\t\t\t\tOS.MoveMemory (lParam, nmcd, NMTVCUSTOMDRAW.sizeof);", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\tnmcd.clrTextBk = clrTextBk;", "+\t\t\t\t\t\tif ((bits & OS.TVS_FULLROWSELECT) == 0) {", "+\t\t\t\t\t\t\tif (hwndHeader != 0) {", "+\t\t\t\t\t\t\t\tint count = OS.SendMessage (hwndHeader, OS.HDM_GETITEMCOUNT, 0, 0);", "+\t\t\t\t\t\t\t\tif (count != 0) {", "+\t\t\t\t\t\t\t\t\tHDITEM hdItem = new HDITEM ();", "+\t\t\t\t\t\t\t\t\thdItem.mask = OS.HDI_WIDTH;", "+\t\t\t\t\t\t\t\t\tint index = OS.SendMessage (hwndHeader, OS.HDM_ORDERTOINDEX, 0, 0);", "+\t\t\t\t\t\t\t\t\tOS.SendMessage (hwndHeader, OS.HDM_GETITEM, index, hdItem);", "+\t\t\t\t\t\t\t\t\tRECT rect = new RECT ();", "+\t\t\t\t\t\t\t\t\tOS.SetRect (rect, nmcd.left, nmcd.top, nmcd.left + hdItem.cxy, nmcd.bottom);", "+\t\t\t\t\t\t\t\t\tif (OS.COMCTL32_MAJOR < 6 || !OS.IsAppThemed ()) {", "+\t\t\t\t\t\t\t\t\t\tRECT itemRect = new RECT ();", "+\t\t\t\t\t\t\t\t\t\titemRect.left = item.handle;", "+\t\t\t\t\t\t\t\t\t\tif (OS.SendMessage (handle, OS.TVM_GETITEMRECT, 1, itemRect) != 0) {", "+\t\t\t\t\t\t\t\t\t\t\trect.left = Math.min (itemRect.left, rect.right);", "+\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\tfillBackground (hDC, nmcd.clrTextBk, rect);", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tif (useColor) OS.MoveMemory (lParam, nmcd, NMTVCUSTOMDRAW.sizeof);", "+\t\t\t\t\t\tint clrTextBk = -1;", "+\t\t\t\t\t\tif (useColor) {", "+\t\t\t\t\t\t\tclrTextBk = item.cellBackground != null ? item.cellBackground [index] : -1;", "+\t\t\t\t\t\t\tif (clrTextBk == -1) clrTextBk = item.background;", "+\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tif (useColor) {", "+\t\t\t\t\t\t\tif (useColor && clrTextBk == -1) {", "-\t\t\t\t\t\t\tint clrTextBk = -1;", "-\t\t\t\t\t\t\tif (useColor) {", "-\t\t\t\t\t\t\t\tclrTextBk = item.cellBackground != null ? item.cellBackground [index] : -1;", "-\t\t\t\t\t\t\t\tif (clrTextBk == -1) clrTextBk = item.background;", "-\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tfillBackground (hDC, clrTextBk, rect);", "+\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\tfillBackground (hDC, clrTextBk, rect);"]}], "num": 63282}