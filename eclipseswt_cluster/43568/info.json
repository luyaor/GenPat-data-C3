{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9d0deb604b2a4d0a59dd29b540da2d8b", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4ea4b505f447b2fbd5b5de5b58be2c4b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Decorations.java", "commitBeforeChange": "c2a3df1a5f68cf5dd9c3452b58c3950b7c421126", "commitAfterChange": "902e291c104c5166815bee0e35015c1683bd8a50", "methodNumberBeforeChange": 45, "methodNumberAfterChange": 46, "signatureBeforeChange": "  void setImages (Image image, Image [] images)", "signatureAfterChange": "  void setImages (Image image, Image [] images)", "diff": ["-\tint smallWidth = 0x7FFFFFFF, largeWidth = 0x7FFFFFFF;", "-\t\tRectangle rect = image.getBounds ();", "-\t\tsmallWidth = Math.abs (rect.width - OS.GetSystemMetrics (OS.SM_CXSMICON));", "-\t\tsmallIcon = image;", "-\t\tlargeWidth = Math.abs (rect.width - OS.GetSystemMetrics (OS.SM_CXICON)); ", "-\t\tlargeIcon = image;", "-\t}", "-\tif (images != null) {", "-\t\tfor (int i = 0; i < images.length; i++) {", "-\t\t\tRectangle rect = images [i].getBounds ();", "-\t\t\tint value = Math.abs (rect.width - OS.GetSystemMetrics (OS.SM_CXSMICON));", "-\t\t\tif (value < smallWidth) {", "-\t\t\t\tsmallWidth = value;", "-\t\t\t\tsmallIcon = images [i];", "+\t\tsmallIcon = largeIcon = image;", "+\t} else {", "+\t\tif (images != null && images.length > 0) {", "+\t\t\tint depth = display.getIconDepth ();", "+\t\t\tImageData [] datas = null;", "+\t\t\tif (images.length > 1) {", "+\t\t\t\tImage [] bestImages = new Image [images.length];", "+\t\t\t\tSystem.arraycopy (images, 0, bestImages, 0, images.length);", "+\t\t\t\tdatas = new ImageData [images.length];", "+\t\t\t\tfor (int i=0; i<datas.length; i++) {", "+\t\t\t\t\tdatas [i] = images [i].getImageData ();", "+\t\t\t\t}", "+\t\t\t\timages = bestImages;", "+\t\t\t\tsort (images, datas, OS.GetSystemMetrics (OS.SM_CXSMICON), OS.GetSystemMetrics (OS.SM_CYSMICON), depth);", "-\t\t\tvalue = Math.abs (rect.width - OS.GetSystemMetrics (OS.SM_CXICON));", "-\t\t\tif (value < largeWidth) {", "-\t\t\t\tlargeWidth = value;", "-\t\t\t\tlargeIcon = images [i];", "+\t\t\tsmallIcon = images [0];", "+\t\t\tif (images.length > 1) {", "+\t\t\t\tsort (images, datas, OS.GetSystemMetrics (OS.SM_CXICON), OS.GetSystemMetrics (OS.SM_CYICON), depth);", "+\t\t\tlargeIcon = images [0];"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b27729444da8f0b09b89125ca37fdccb", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/wpf/org/eclipse/swt/widgets/Decorations.java", "commitBeforeChange": "d7f52e244190d0233789b162a34cf1d32f1aac26", "commitAfterChange": "ab790bd82f5e4890a492355780ef36249213722b", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 34, "signatureBeforeChange": "  void setImages (Image image, Image [] images)", "signatureAfterChange": "  void setImages (Image image, Image [] images)", "diff": ["-\t//TODO", "+\tint encoder = OS.gcnew_TiffBitmapEncoder ();", "+\tint frames = OS.BitmapEncoder_Frames (encoder);", "+\tif (image != null) {", "+\t\tint frame = OS.BitmapFrame_Create (image.handle);", "+\t\tOS.BitmapFrameCollection_Add (frames, frame);", "+\t\tOS.GCHandle_Free (frame);", "+\t}", "+\tif (images != null) {", "+\t\tif (images.length > 1) {", "+\t\t\tImageData [] datas = null;", "+\t\t\tImage [] bestImages = new Image [images.length];", "+\t\t\tSystem.arraycopy (images, 0, bestImages, 0, images.length);", "+\t\t\tdatas = new ImageData [images.length];", "+\t\t\tfor (int i=0; i<datas.length; i++) {", "+\t\t\t\tdatas [i] = images [i].getImageData ();", "+\t\t\t}", "+\t\t\timages = bestImages;", "+\t\t\tsort (images, datas);", "+\t\t}", "+\t\tfor (int i = 0; i < images.length; i++) {", "+\t\t\tint frame = OS.BitmapFrame_Create (images [i].handle);", "+\t\t\tOS.BitmapFrameCollection_Add (frames, frame);", "+\t\t\tOS.GCHandle_Free (frame);", "+\t\t}", "+\t}", "+\tOS.GCHandle_Free (frames);", "+\tint stream = OS.gcnew_MemoryStream ();", "+\tOS.BitmapEncoder_Save (encoder, stream);", "+\tOS.GCHandle_Free (encoder);", "+\tint decoder = OS.BitmapDecoder_Create (stream, OS.BitmapCreateOptions_None, OS.BitmapCacheOption_Default);", "+\tframes = OS.BitmapDecoder_Frames (decoder);", "+\tint icon = OS.BitmapFrameCollection_default (frames, 0);", "+\tOS.GCHandle_Free (frames);", "+\tOS.GCHandle_Free (decoder);", "+\tOS.Window_Icon(shellHandle, icon);", "+\tOS.GCHandle_Free (icon);"]}], "num": 43568}