{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "242f4b7c715d3e7f164551741188f5ff", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "eb8eea0785b12bc1e4060b82e6689b50", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "d4eb14ad4f7b1074d4935c2b9211f94b2750616d", "commitAfterChange": "7d562ae8941ad5655a314eac8dd19e3b2aaef50c", "methodNumberBeforeChange": 35, "methodNumberAfterChange": 35, "signatureBeforeChange": "\r public int getAdvanceWidth(char ch)", "signatureAfterChange": "\r public int getAdvanceWidth(char ch)", "diff": ["-\tbyte[] buffer = Converter.wcsToMbcs(getCodePage(), new char[] { ch });\r", "-\tint val = 0;\r", "-\tfor (int i = 0; i < buffer.length; i++) {\r", "-\t\tval |= (buffer[i] & 0xFF) << (i * 8);\r", "+\tif (OS.IsWinCE) {\r", "+\t\tSIZE size = new SIZE();\r", "+\t\tOS.GetTextExtentPoint32W(handle, new char[]{ch}, 1, size);\r", "+\t\treturn size.cx;\r", "+\t}\r", "+\tint tch = ch;\r", "+\tif (ch > 0x7F) {\r", "+\t\tTCHAR buffer = new TCHAR(getCodePage(), ch, false);\r", "+\t\ttch = buffer.tcharAt(0);\r", "-\tOS.GetCharWidth(handle, val, val, width);\r", "+\tOS.GetCharWidth(handle, tch, tch, width);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "497ade23d5c6a12fcf531788d7bf36cc", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "d4eb14ad4f7b1074d4935c2b9211f94b2750616d", "commitAfterChange": "7d562ae8941ad5655a314eac8dd19e3b2aaef50c", "methodNumberBeforeChange": 37, "methodNumberAfterChange": 37, "signatureBeforeChange": "\r public int getCharWidth(char ch)", "signatureAfterChange": "\r public int getCharWidth(char ch)", "diff": ["-\tbyte[] buffer = Converter.wcsToMbcs(getCodePage(), new char[] { ch });\r", "-\tint val = 0;\r", "-\tfor (int i = 0; i < buffer.length; i++) {\r", "-\t\tval |= (buffer[i] & 0xFF) << (i * 8);\r", "-\t}\r", "-\tint[] width = new int[3];\r", "+\t\r", "-\tif (OS.GetCharABCWidths(handle, val, val, width)) {\r", "-\t\treturn width[1];\r", "+\tif (!OS.IsWinCE) {\r", "+\t\tint tch = ch;\r", "+\t\tif (ch > 0x7F) {\r", "+\t\t\tTCHAR buffer = new TCHAR(getCodePage(), ch, false);\r", "+\t\t\ttch = buffer.tcharAt (0);\r", "+\t\t}\r", "+\t\tint[] width = new int[3];\r", "+\t\tif (OS.GetCharABCWidths(handle, tch, tch, width)) {\r", "+\t\t\treturn width[1];\r", "+\t\t}\r", "+\t\r", "-\tOS.GetTextMetrics(handle, tm);\r", "+\tOS.GetTextMetricsW(handle, tm);\r", "-\tOS.GetTextExtentPoint32(handle, buffer, buffer.length, size);\r", "+\tOS.GetTextExtentPoint32W(handle, new char[]{ch}, 1, size);\r"]}], "num": 54310}