{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "1af7958959ca200d2b4b64218ff4771c", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c6093dd9a1bea8c0baba4ac2c02a7e67", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "e2e7896b3cf0e9c97f6038a8e9fe8cfb357377bf", "commitAfterChange": "d2e697ac12d333462fab7aa686c0fbe95379eed0", "methodNumberBeforeChange": 30, "methodNumberAfterChange": 32, "signatureBeforeChange": " public String getText (int start, int end)", "signatureAfterChange": " public String getText (int start, int end)", "diff": ["-\tint address = OS.gtk_editable_get_chars (handle, start, end);", "-\tif (address == 0) return null;", "+\tint address;", "+\tif ((style & SWT.SINGLE) != 0) {", "+\t\taddress = OS.gtk_editable_get_chars (handle, start, end);", "+\t} else {", "+\t\tbyte [] startIter =  new byte [ITER_SIZEOF];", "+\t\tbyte [] endIter =  new byte [ITER_SIZEOF];", "+\t\tOS.gtk_text_buffer_get_iter_at_offset (bufferHandle, startIter, start);", "+\t\tOS.gtk_text_buffer_get_iter_at_offset (bufferHandle, endIter, end);", "+\t\taddress = OS.gtk_text_buffer_get_text (bufferHandle, startIter, endIter, true);", "+\t}", "+\tif (address == 0) return \"\";", "-\tbyte [] buffer1 = new byte [length];", "-\tOS.memmove (buffer1, address, length);", "+\tbyte [] buffer = new byte [length];", "+\tOS.memmove (buffer, address, length);", "-\tchar [] buffer2 = Converter.mbcsToWcs (null, buffer1);", "-\treturn new String (buffer2, 0, buffer2.length);", "+\treturn new String (Converter.mbcsToWcs (null, buffer));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1469d46b5e955a6967c0b3ed9679c120", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "88e64e12e56dcb63257af0ec793ea95cf719e15e", "commitAfterChange": "98243fcb95591cca979715a18e7f52e3dc925eb7", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 34, "signatureBeforeChange": " public String getText (int start, int end)", "signatureAfterChange": " public String getText (int start, int end)", "diff": ["-\tint address;", "-\tif ((style & SWT.SINGLE) != 0) {", "-\t\taddress = OS.gtk_editable_get_chars (handle, start, end + 1);", "-\t} else {", "-\t\tbyte [] startIter =  new byte [ITER_SIZEOF];", "-\t\tbyte [] endIter =  new byte [ITER_SIZEOF];", "-\t\tOS.gtk_text_buffer_get_iter_at_offset (bufferHandle, startIter, start);", "-\t\tOS.gtk_text_buffer_get_iter_at_offset (bufferHandle, endIter, end + 1);", "-\t\taddress = OS.gtk_text_buffer_get_text (bufferHandle, startIter, endIter, true);", "-\t}", "-\tif (address == 0) return \"\";", "-\tint length = OS.strlen (address);", "-\tbyte [] buffer = new byte [length];", "-\tOS.memmove (buffer, address, length);", "-\tOS.g_free (address);", "-\tif (length <= end) error (SWT.ERROR_INVALID_RANGE); ", "-\treturn new String (Converter.mbcsToWcs (null, buffer));", "+\tString text = getText ();", "+\tint length = text.length ();", "+\tif (length <= end) error (SWT.ERROR_INVALID_RANGE);", "+\treturn text.substring (start, end);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "766cbc0ec009ab00996539276c244735", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "e2e7896b3cf0e9c97f6038a8e9fe8cfb357377bf", "commitAfterChange": "d2e697ac12d333462fab7aa686c0fbe95379eed0", "methodNumberBeforeChange": 29, "methodNumberAfterChange": 31, "signatureBeforeChange": " public String getText ()", "signatureAfterChange": " public String getText ()", "diff": ["-\t\taddress = OS.gtk_editable_get_chars (handle, 0, -1);", "+\t\tbyte [] start =  new byte [ITER_SIZEOF];", "+\t\tbyte [] end =  new byte [ITER_SIZEOF];", "+\t\tOS.gtk_text_buffer_get_bounds (bufferHandle, start, end);", "+\t\taddress = OS.gtk_text_buffer_get_text (bufferHandle, start, end, true);", "-\tif (address == 0) return null;", "+\tif (address == 0) return \"\";", "-\tbyte [] buffer1 = new byte [length];", "-\tOS.memmove (buffer1, address, length);", "-\t/*", "-\t * The GTK documentation explicitly states", "-\t * that this address should not be freed for a", "-\t * GtkEntry.", "-\t */", "+\tbyte [] buffer = new byte [length];", "+\tOS.memmove (buffer, address, length);", "-\tchar [] buffer2 = Converter.mbcsToWcs (null, buffer1);", "-\treturn new String (buffer2, 0, buffer2.length);", "+\treturn new String (Converter.mbcsToWcs (null, buffer));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ed924fa57a572e0770a5fa1e943f38ed", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "de57119d4c2e8cc6936a64281ecb9753509b7457", "commitAfterChange": "66765d120ac73f3ebfa5089726061e6ce4afe259", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 34, "signatureBeforeChange": " public String getText (int start, int end)", "signatureAfterChange": " public String getText (int start, int end)", "diff": ["-\tString text = getText ();", "-\tint length = text.length ();", "-\tif (length <= end) error (SWT.ERROR_INVALID_RANGE);", "-\t/*", "-\t* NOTE: The current implementation uses substring ()", "-\t* which can reference a potentially large character", "-\t* array.", "-\t*/", "-\treturn text.substring (start, end + 1);", "+\tint address;", "+\tif ((style & SWT.SINGLE) != 0) {", "+\t\taddress = OS.gtk_editable_get_chars (handle, start, end + 1);", "+\t} else {", "+\t\tbyte [] startIter =  new byte [ITER_SIZEOF];", "+\t\tbyte [] endIter =  new byte [ITER_SIZEOF];", "+\t\tOS.gtk_text_buffer_get_iter_at_offset (bufferHandle, startIter, start);", "+\t\tOS.gtk_text_buffer_get_iter_at_offset (bufferHandle, endIter, end + 1);", "+\t\taddress = OS.gtk_text_buffer_get_text (bufferHandle, startIter, endIter, true);", "+\t}", "+\tif (address == 0) return \"\";", "+\tint length = OS.strlen (address);", "+\tbyte [] buffer = new byte [length];", "+\tOS.memmove (buffer, address, length);", "+\tOS.g_free (address);", "+\treturn new String (Converter.mbcsToWcs (null, buffer));"]}], "num": 59674}