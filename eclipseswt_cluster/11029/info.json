{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ccc0c419a970bfae99f42fe1f098b4fa", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4ce83fc30af70c4fb3404b97e7a2ff71", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "6bf9e9e7677dd6bee708b67e321d6e5506e19ea2", "commitAfterChange": "73f0362d919fe382f115eaf114311e63eb6b8d88", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": "  void init(Device device, String name, int height, int style)", "signatureAfterChange": "  void init(Device device, String name, int height, int style)", "diff": ["-\tbyte[] buffer = new byte[256];", "-\tint length = name.length();", "-\tif (length > 255) length = 255;", "-\tbuffer[0] = (byte)length;", "-\tfor (int i=0; i<length; i++) {", "-\t\tbuffer[i+1]= (byte)name.charAt(i);", "+\tint[] font = new int[1];", "+\tbyte[] buffer = name.getBytes();", "+\tthis.id = OS.kInvalidFontFamily;", "+\tif (OS.ATSUFindFontFromName(buffer, buffer.length, OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, font) == OS.noErr) {", "+\t\tshort[] family = new short[1];", "+\t\tOS.FMGetFontFamilyInstanceFromFont(font[0], family, new short[1]);", "+\t\tthis.id = family[0];", "-\tthis.id = OS.FMGetFontFamilyFromName(buffer);", "-\tint[] font = new int[1];", "-\tif (OS.FMGetFontFromFontFamilyInstance(id, this.style, font, null) != 0) {", "-\t\tSWT.error(SWT.ERROR_NO_HANDLES);", "+\tOS.FMGetFontFromFontFamilyInstance(id, this.style, font, null);", "+\tif (font[0] == 0) {", "+\t\tFont systemFont = device.systemFont;", "+\t\tthis.handle = systemFont.handle;", "+\t} else {", "+\t\tthis.handle = font[0];", "-\tif (font[0] == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\tthis.handle = font[0];"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d72d57e3bc531ea9a215acceb6b9b8c6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/FontDialog.java", "commitBeforeChange": "6bf9e9e7677dd6bee708b67e321d6e5506e19ea2", "commitAfterChange": "73f0362d919fe382f115eaf114311e63eb6b8d88", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": " public FontData open ()", "signatureAfterChange": " public FontData open ()", "diff": ["-\t\tbyte [] buffer = new byte [256];", "-\t\tint length = familyName.length();", "-\t\tif (length > 255) length = 255;", "-\t\tbuffer [0] = (byte)length;", "-\t\tfor (int i=0; i<length; i++) {", "-\t\t\tbuffer [i+1] = (byte) familyName.charAt(i);", "+\t\tint[] font = new int[1];", "+\t\tbyte[] buffer = familyName.getBytes();", "+\t\tif (OS.ATSUFindFontFromName(buffer, buffer.length, OS.kFontFamilyName, OS.kFontNoPlatformCode, OS.kFontNoScriptCode, OS.kFontNoLanguageCode, font) == OS.noErr) {", "+\t\t\tshort[] family = new short[1];", "+\t\t\tOS.FMGetFontFamilyInstanceFromFont(font[0], family, new short[1]);\t\t", "+\t\t\tqdStyle.instance_fontFamily = family[0];", "-\t\tint id = OS.FMGetFontFamilyFromName (buffer);", "-\t\tif (id == OS.kInvalidFontFamily) id = OS.GetAppFont();", "-\t\tqdStyle.instance_fontFamily = (short)id;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "99dd42d21aa0781461920ae75e009a11", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 9, "signatureBeforeChange": "  void init (Device device, FontData fd)", "signatureAfterChange": "  void init(Device device, String name, int height, int style)", "diff": ["-", "-void init (Device device, FontData fd) {", "-\tif (fd == null) SWT.error(SWT.ERROR_NULL_ARGUMENT);", "-\tthis.device = device;", "-\thandle= new MacFont(fd.fontFamily, fd.height, fd.style);", "-}", "+", "+void init(Device device, String name, int height, int style) {", "+\tif (name == null) SWT.error(SWT.ERROR_NULL_ARGUMENT);", "+\tif (height < 0) SWT.error(SWT.ERROR_INVALID_ARGUMENT);", "+\tbyte[] buffer = new byte[256];", "+\tint length = name.length();", "+\tif (length > 255) length = 255;", "+\tbuffer[0] = (byte)length;", "+\tfor (int i=0; i<length; i++) {", "+\t\tbuffer[i+1]= (byte)name.charAt(i);", "+\t}", "+\tthis.id = OS.FMGetFontFamilyFromName(buffer);", "+\tif (this.id == OS.kInvalidFontFamily) this.id = OS.GetAppFont();", "+\tif ((style & SWT.ITALIC) != 0) this.style |= OS.italic;", "+\tif ((style & SWT.BOLD) != 0) this.style |= OS.bold;", "+\tthis.size = (short)height;", "+\tint[] font = new int[1];", "+\tif (OS.FMGetFontFromFontFamilyInstance(id, this.style, font, null) != 0) {", "+\t\tSWT.error(SWT.ERROR_NO_HANDLES);", "+\t}", "+\tthis.handle = font[0];", "+}"]}], "num": 11029}