{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "08219566aa765cf9c0195cc2a7f7c903", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d8563d22fd774087aa44ccf9e02a1619", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/win32/org/eclipse/swt/browser/WebSite.java", "commitBeforeChange": "d9eb41389caec5f452b5d8d515be40a4c5119018", "commitAfterChange": "6e5a30c16ae549824cbfd9ebe355a04012ff6598", "methodNumberBeforeChange": 64, "methodNumberAfterChange": 64, "signatureBeforeChange": "  int ProcessUrlAction(int pwszUrl, int dwAction, int pPolicy, int cbPolicy, int pContext, int cbContext, int dwFlags, int dwReserved)", "signatureAfterChange": "  int ProcessUrlAction(int pwszUrl, int dwAction, int pPolicy, int cbPolicy, int pContext, int cbContext, int dwFlags, int dwReserved)", "diff": ["-\tCOM.MoveMemory(pPolicy, new int[] {Browser.URLPOLICY_ALLOW}, 4);", "+\t/*", "+\t* Feature in IE 6 sp1.  HTML rendered in memory", "+\t* containing an OBJECT tag referring to a local file", "+\t* brings up a warning dialog asking the user whether", "+\t* it should proceed or not.  The workaround is to", "+\t* set the policy to URLPOLICY_ALLOW in this case (dwAction", "+\t* value of 0x1406).", "+\t* ", "+\t* Feature in IE. Security Patches and user settings", "+\t* affect the way the embedded web control behaves.  The current", "+\t* approach is to consider the content trusted and allow", "+\t* all URLs by default.", "+\t*/", "+\tint policy = Browser.URLPOLICY_ALLOW;", "+\t/*", "+\t* Note. The URLACTION_JAVA flags refer to the applet tag that normally resolve to", "+\t* the Microsoft VM, not to the java OBJECT tag that resolves to the", "+\t* Sun plugin. Return URLPOLICY_JAVA_LOW to authorize applets instead of", "+\t* URLPOLICY_ALLOW that is interpreted as URLPOLICY_JAVA_PROHIBIT in this", "+\t* context. ", "+\t*/", "+\tif (dwAction >= Browser.URLACTION_JAVA_MIN && dwAction <= Browser.URLACTION_JAVA_MAX) {", "+\t\tpolicy = Browser.URLPOLICY_JAVA_LOW;", "+\t}", "+\tif (dwAction >= Browser.URLACTION_ACTIVEX_MIN && dwAction <= Browser.URLACTION_ACTIVEX_MAX) {", "+\t\tint cnt = OS.wcslen(pwszUrl);", "+\t\tchar[] buffer = new char[cnt];", "+\t\t/* ", "+\t\t* Note.  pwszUrl is unicode on both unicode and ansi platforms.", "+\t\t* The nbr of chars is multiplied by the constant 2 and not by TCHAR.sizeof since", "+\t\t* TCHAR.sizeof returns 1 on ansi platforms.", "+\t\t*/", "+\t\tOS.MoveMemory(buffer, pwszUrl, cnt * 2);", "+\t\tString url = new String(buffer);", "+\t\t/*", "+\t\t* Note.  Some ActiveX plugins crash when executing", "+\t\t* inside the embedded explorer itself running into", "+\t\t* a JVM.  The current workaround is to detect when", "+\t\t* such ActiveX is about to be started and refuse", "+\t\t* to execute it.", "+\t\t* ActiveX blocked based on URL extension:", "+\t\t* - Shockwave director plugin (mime: application/x-director)", "+\t\t*/", "+\t\tif (url.endsWith(\".dcr\")) policy = Browser.URLPOLICY_DISALLOW; //$NON-NLS-1$", "+\t}", "+\tif (cbPolicy >= 4) COM.MoveMemory(pPolicy, new int[] {policy}, 4);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f2992aca844342010c41d1b3ebd38b84", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/win32/org/eclipse/swt/browser/WebSite.java", "commitBeforeChange": "b8feeeeb859ddc5373e72445b6a112d80118d143", "commitAfterChange": "b35a49da6d60208984201c1be34fa638b8bf5fdf", "methodNumberBeforeChange": 64, "methodNumberAfterChange": 64, "signatureBeforeChange": "  int ShowMessage(int hwnd, int lpstrText, int lpstrCaption, int dwType, int lpstrHelpFile, int dwHelpContext, int plResult)", "signatureAfterChange": "  int ShowMessage(int hwnd, int lpstrText, int lpstrCaption, int dwType, int lpstrHelpFile, int dwHelpContext, int plResult)", "diff": ["-\t/*", "-\t* Feature on IE.  When IE navigates to a website that contains an ActiveX that is prevented from", "-\t* being executed, IE displays a message \"Your current security settings prohibit running ActiveX ", "-\t* controls on this page ...\".  The workaround is to selectively block this alert as indicated", "-\t* in the MSDN article \"WebBrowser customization\".", "-\t*/", "-\t/* resource identifier in shdoclc.dll for window caption \"Your current security settings prohibit ", "-\t * running ActiveX controls on this page ...\" ", "-\t */", "-\tint IDS_MESSAGE_BOX_CAPTION = 8033;", "-\t\tif (lpstrText != 0) {", "-\t\tTCHAR lpLibFileName = new TCHAR (0, \"SHDOCLC.DLL\", true); //$NON-NLS-1$", "-\t\tint /*long*/ hModule = OS.LoadLibrary(lpLibFileName);", "-\t\tif (hModule != 0) {", "-\t\t\t/* ", "-\t\t\t* Note.  lpstrText is a LPOLESTR, i.e. a null terminated unicode string LPWSTR, i.e. a WCHAR*.", "-\t\t\t* It is not a BSTR.  A BSTR is a null terminated unicode string that contains its length", "-\t\t\t* at the beginning. ", "-\t\t\t*/", "-\t\t\tint cnt = OS.wcslen(lpstrText);", "-\t\t\tchar[] buffer = new char[cnt];", "-\t\t\t/* ", "-\t\t\t* Note.  lpstrText is unicode on both unicode and ansi platforms.", "-\t\t\t* The nbr of chars is multiplied by the constant 2 and not by TCHAR.sizeof since", "-\t\t\t* TCHAR.sizeof returns 1 on ansi platforms.", "-\t\t\t*/", "-\t\t\tOS.MoveMemory(buffer, lpstrText, cnt * 2);", "-\t\t\tString text = new String(buffer);", "-\t\t\t/* provide a buffer large enough to hold the string to compare to and a null terminated character */", "-\t\t\tint length = (OS.IsUnicode ? cnt : OS.WideCharToMultiByte (OS.CP_ACP, 0, buffer, cnt, 0, 0, null, null)) + 1;", "-", "-\t\t\tTCHAR lpBuffer = new TCHAR(0, length);", "-\t\t\tint result = OS.LoadString(hModule, IDS_MESSAGE_BOX_CAPTION, lpBuffer, length);", "-\t\t\tOS.FreeLibrary(hModule);", "-\t\t\treturn result > 0 && text.equals(lpBuffer.toString(0, result)) ? COM.S_OK : COM.S_FALSE;", "-\t\t}", "-\t}", "-\treturn COM.S_FALSE;", "+\tboolean ignore = ignoreNextMessage;", "+\tignoreNextMessage = false;", "+\treturn ignore ? COM.S_OK : COM.S_FALSE;"]}], "num": 62671}