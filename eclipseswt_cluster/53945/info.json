{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0bc2ee5ca5c7640d7943d689bc26f6fd", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2430d379be8829cde56375c9f477789c", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Link.java", "commitBeforeChange": "fd48f1038f78b11a089cce1dff82a2e75ba45935", "commitAfterChange": "b6e1dfbb6c67b65776d109a1647ed8268f4264ac", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "signatureAfterChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "diff": ["-\t\tTCHAR buffer = new TCHAR (getCodePage (), parse (text), false);", "-\t\tRECT rect = new RECT ();", "-\t\tint flags = OS.DT_CALCRECT | OS.DT_NOPREFIX;", "-\t\tif (wHint != SWT.DEFAULT) {", "-\t\t\tflags |= OS.DT_WORDBREAK;", "-\t\t\trect.right = wHint;", "+\t\tif (text.length () > 0) {", "+\t\t\tTCHAR buffer = new TCHAR (getCodePage (), parse (text), false);", "+\t\t\tRECT rect = new RECT ();", "+\t\t\tint flags = OS.DT_CALCRECT | OS.DT_NOPREFIX;", "+\t\t\tif (wHint != SWT.DEFAULT) {", "+\t\t\t\tflags |= OS.DT_WORDBREAK;", "+\t\t\t\trect.right = wHint;", "+\t\t\t}", "+\t\t\tOS.DrawText (hDC, buffer, buffer.length (), rect, flags);", "+\t\t\twidth = rect.right - rect.left;", "+\t\t\theight = rect.bottom;", "+\t\t} else {", "+\t\t\tTEXTMETRIC lptm = OS.IsUnicode ? (TEXTMETRIC)new TEXTMETRICW () : new TEXTMETRICA ();", "+\t\t\tOS.GetTextMetrics (hDC, lptm);", "+\t\t\twidth = 0;", "+\t\t\theight = lptm.tmHeight;", "-\t\tOS.DrawText (hDC, buffer, buffer.length (), rect, flags);", "-\t\twidth = rect.right - rect.left;", "-\t\theight = rect.bottom;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc011b14e9865684749af0e88aeb2d61", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "ddcc940c6ea8c0ef46cce8c3fd6eb2724417989a", "commitAfterChange": "9235085653f7600cdbdbab5c29cabffa32bf07f8", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": " void computeRuns (GC gc)", "signatureAfterChange": " void computeRuns (GC gc)", "diff": ["-\tif (srcHdc != 0) OS.DeleteDC(srcHdc);", "-\tif (gc == null) device.internal_dispose_GC(hDC, null);", "+\t\t\tif (lineRunCount == 1 && i == allRuns.length - 1) {", "+\t\t\t\tTEXTMETRIC lptm = OS.IsUnicode ? (TEXTMETRIC)new TEXTMETRICW() : new TEXTMETRICA();", "+\t\t\t\tOS.SelectObject(srcHdc, getItemFont(run));", "+\t\t\t\tOS.GetTextMetrics(srcHdc, lptm);", "+\t\t\t\trun.height = lptm.tmHeight;", "+\t\t\t\tlineHeight = run.height + lineSpacing;", "+\t\t\t}", "+\tif (srcHdc != 0) OS.DeleteDC(srcHdc);", "+\tif (gc == null) device.internal_dispose_GC(hDC, null);\t"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9dceb461394de4af63e78227e561a858", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/emulated/textlayout/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "8f5c8dc0cea3e2bb895176442f8ab171dcca741d", "commitAfterChange": "ddcc940c6ea8c0ef46cce8c3fd6eb2724417989a", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": "  void computeRuns (GC gc)", "signatureAfterChange": "  void computeRuns (GC gc)", "diff": ["+\t\t\t\t\trun.width = 0;", "+\t\t\t\t\trun.width = 0;", "-\tif (newGC) gc.dispose();", "+\t\t\tif (lineRunCount == 1 && i == allRuns.length - 1) {", "+\t\t\t\tgc.setFont(getItemFont(run));", "+\t\t\t\tFontMetrics metrics = gc.getFontMetrics();", "+\t\t\t\trun.height = metrics.getHeight();", "+\t\t\t\tlineHeight = run.height + lineSpacing;", "+\t\t\t}", "+\tif (newGC) gc.dispose();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d5ecddd08864fe22b07109d97e40eb0e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Group.java", "commitBeforeChange": "915780e93536b69764c4dbeedaf055ff446243b3", "commitAfterChange": "53a72a1e26ee8b5bafe3e8ea17f31ca574a7582b", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "signatureAfterChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "diff": ["+\tint textInset = 0;", "+\tif (length > 0) {", "+\t\t/* In the (rare) case where the text is wider than the client area,", "+\t\t * allow room for one average character to the right of the text.", "+\t\t */", "+\t\tTEXTMETRIC tm = OS.IsUnicode ? (TEXTMETRIC) new TEXTMETRICW () : new TEXTMETRICA ();", "+\t\tOS.GetTextMetrics (hDC, tm);", "+\t\ttextInset = tm.tmAveCharWidth;", "+\t}", "-\twidth = Math.max (trim.width, rect.right - rect.left + 6);", "+\twidth = Math.max (trim.width, rect.right - rect.left + INSET * 2 + textInset);", "+\tint border = getBorderWidth ();", "+\twidth += border * 2; height += border * 2;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "df4035dff49adf221c9de758bb1d388f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "9d94d6b83450f6d7c55e3c259dd2f8a36ead717d", "commitAfterChange": "62b114225776c09f8a6570dde053dd94358f28d9", "methodNumberBeforeChange": 48, "methodNumberAfterChange": 52, "signatureBeforeChange": " void shape (final int hdc, final StyleItem run)", "signatureAfterChange": " void shape (final int hdc, final StyleItem run)", "diff": ["-\tOS.ScriptCacheGetHeight(hdc, run.psc, buffer);", "-\trun.height = buffer[0];", "+\tTEXTMETRIC lptm = OS.IsUnicode ? (TEXTMETRIC)new TEXTMETRICW() : new TEXTMETRICA();", "+\tOS.GetTextMetrics(hdc, lptm);", "+\trun.ascent = lptm.tmAscent;", "+\trun.descent = lptm.tmDescent;"]}], "num": 53945}