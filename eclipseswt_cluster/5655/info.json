{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e4f62e08ef187ba41bf292a0c824a942", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "780a0c19829767935a277201214a4651", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Button.java", "commitBeforeChange": "839e7aae626325bcc120e28136132e007b50784e", "commitAfterChange": "d77e1468652c0bf6dd5b34c4530c6c4a4033fb64", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 22, "signatureBeforeChange": " public void setImage (Image image)", "signatureAfterChange": " public void setImage (Image image)", "diff": ["-\tint hImage = 0, imageBits = 0, fImageType = 0;", "-\tif (image != null) {", "-\t\tif (image.isDisposed()) error(SWT.ERROR_INVALID_ARGUMENT);", "-\t\thImage = image.handle;", "-\t\tswitch (image.type) {", "-\t\t\tcase SWT.BITMAP:", "-\t\t\t\timageBits = OS.BS_BITMAP;", "-\t\t\t\tfImageType = OS.IMAGE_BITMAP;", "-\t\t\t\tbreak;", "-\t\t\tcase SWT.ICON:", "-\t\t\t\timageBits = OS.BS_ICON;", "-\t\t\t\tfImageType = OS.IMAGE_ICON;", "-\t\t\t\tbreak;", "-\t\t\tdefault:", "-\t\t\t\treturn;", "-\t\t}", "-\t}", "-\tint newBits = OS.GetWindowLong (handle, OS.GWL_STYLE);", "-\tint oldBits = newBits;", "-\tnewBits &= ~(OS.BS_BITMAP | OS.BS_ICON);", "-\tnewBits |= imageBits;", "-\tif (newBits != oldBits) {", "-\t\tOS.SetWindowLong (handle, OS.GWL_STYLE, newBits);", "+\tif (OS.COMCTL32_MAJOR >= 6 && OS.IsAppThemed ()) {", "+\t\tOS.SendMessage (handle, OS.BCM_SETIMAGELIST, 0, 0);", "+\t\tif (imageList != null) imageList.dispose ();", "+\t\timageList = null;", "+\t\tif (image != null) {", "+\t\t\timageList = new ImageList ();", "+\t\t\timageList.add (image);", "+\t\t\tBUTTON_IMAGELIST buttonImageList = new BUTTON_IMAGELIST ();", "+\t\t\tbuttonImageList.himl = imageList.getHandle ();", "+\t\t\tif ((style & SWT.LEFT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_LEFT;", "+\t\t\tif ((style & SWT.CENTER) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_CENTER;", "+\t\t\tif ((style & SWT.RIGHT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_RIGHT;", "+\t\t\tTCHAR buffer = new TCHAR (getCodePage (), \"\", true);", "+\t\t\tOS.SetWindowText (handle, buffer);", "+\t\t\tOS.SendMessage (handle, OS.BCM_SETIMAGELIST, 0, buttonImageList);", "+\t\t} else {", "+\t\t\tTCHAR buffer = new TCHAR (getCodePage (), text, true);", "+\t\t\tOS.SetWindowText (handle, buffer);", "+\t\t\tOS.SendMessage (handle, OS.BCM_SETIMAGELIST, 0, 0);", "+\t\t}", "+\t} else {", "+\t\tint hImage = 0, imageBits = 0, fImageType = 0;", "+\t\tif (image != null) {", "+\t\t\tif (image.isDisposed()) error(SWT.ERROR_INVALID_ARGUMENT);", "+\t\t\thImage = image.handle;", "+\t\t\tswitch (image.type) {", "+\t\t\t\tcase SWT.BITMAP:", "+\t\t\t\t\timageBits = OS.BS_BITMAP;", "+\t\t\t\t\tfImageType = OS.IMAGE_BITMAP;", "+\t\t\t\t\tbreak;", "+\t\t\t\tcase SWT.ICON:", "+\t\t\t\t\timageBits = OS.BS_ICON;", "+\t\t\t\t\tfImageType = OS.IMAGE_ICON;", "+\t\t\t\t\tbreak;", "+\t\t\t}", "+\t\t}", "+\t\tint newBits = OS.GetWindowLong (handle, OS.GWL_STYLE);", "+\t\tint oldBits = newBits;", "+\t\tnewBits &= ~(OS.BS_BITMAP | OS.BS_ICON);", "+\t\tnewBits |= imageBits;", "+\t\tif (newBits != oldBits) OS.SetWindowLong (handle, OS.GWL_STYLE, newBits);", "+\t\tOS.SendMessage (handle, OS.BM_SETIMAGE, fImageType, hImage);", "-\tOS.SendMessage (handle, OS.BM_SETIMAGE, fImageType, hImage);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c35e2ed84ef5f74f2224f289fa6ebd55", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Button.java", "commitBeforeChange": "039da5b6cb01deacaa42e0c472d7c59171188a10", "commitAfterChange": "999cd70b792d3ba6318eaa17a83f0d788d0c9764", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 23, "signatureBeforeChange": " public void setImage (Image image)", "signatureAfterChange": " public void setImage (Image image)", "diff": ["-\tthis.image = image;", "-\tif (OS.COMCTL32_MAJOR >= 6 && OS.IsAppThemed ()) {", "-\t\tOS.SendMessage (handle, OS.BCM_SETIMAGELIST, 0, 0);", "-\t\tif (imageList != null) imageList.dispose ();", "-\t\timageList = null;", "-\t\tif (image != null) {", "-\t\t\tif (image.isDisposed()) error(SWT.ERROR_INVALID_ARGUMENT);", "-\t\t\timageList = new ImageList ();", "-\t\t\timageList.add (image);", "-\t\t\tBUTTON_IMAGELIST buttonImageList = new BUTTON_IMAGELIST ();", "-\t\t\tbuttonImageList.himl = imageList.getHandle ();", "-\t\t\tif ((style & SWT.LEFT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_LEFT;", "-\t\t\tif ((style & SWT.CENTER) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_CENTER;", "-\t\t\tif ((style & SWT.RIGHT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_RIGHT;", "-\t\t\tTCHAR buffer = new TCHAR (getCodePage (), \"\", true);", "-\t\t\tOS.SetWindowText (handle, buffer);", "-\t\t\tOS.SendMessage (handle, OS.BCM_SETIMAGELIST, 0, buttonImageList);", "-\t\t} else {", "-\t\t\tTCHAR buffer = new TCHAR (getCodePage (), text, true);", "-\t\t\tOS.SetWindowText (handle, buffer);", "-\t\t\tOS.SendMessage (handle, OS.BCM_SETIMAGELIST, 0, 0);", "-\t\t}", "-\t} else {", "-\t\tint hImage = 0, imageBits = 0, fImageType = 0;", "-\t\tif (image != null) {", "-\t\t\tif (image.isDisposed()) error(SWT.ERROR_INVALID_ARGUMENT);", "-\t\t\thImage = image.handle;", "-\t\t\tswitch (image.type) {", "-\t\t\t\tcase SWT.BITMAP:", "-\t\t\t\t\timageBits = OS.BS_BITMAP;", "-\t\t\t\t\tfImageType = OS.IMAGE_BITMAP;", "-\t\t\t\t\tbreak;", "-\t\t\t\tcase SWT.ICON:", "-\t\t\t\t\timageBits = OS.BS_ICON;", "-\t\t\t\t\tfImageType = OS.IMAGE_ICON;", "-\t\t\t\t\tbreak;", "-\t\t\t}", "-\t\t}", "-\t\tint newBits = OS.GetWindowLong (handle, OS.GWL_STYLE);", "-\t\tint oldBits = newBits;", "-\t\tnewBits &= ~(OS.BS_BITMAP | OS.BS_ICON);", "-\t\tnewBits |= imageBits;", "-\t\tif (newBits != oldBits) OS.SetWindowLong (handle, OS.GWL_STYLE, newBits);", "-\t\tOS.SendMessage (handle, OS.BM_SETIMAGE, fImageType, hImage);", "-\t}", "+\tif (image != null && image.isDisposed()) error(SWT.ERROR_INVALID_ARGUMENT);", "+\t_setImage (this.image = image);"]}], "num": 5655}