{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6e3f1c77ab0bce6c92e673312b4cf10e", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0ce72a18d0536271f665b86a211b2c6a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 33, "methodNumberAfterChange": 36, "signatureBeforeChange": " public void select (int index)", "signatureAfterChange": "  public void select (int index)", "diff": ["- */", "+", "-\tcheckWidget();", "-\t", "-\tint itemCount= _getItemCount();", "-\tif (!(0 <= index && index < itemCount)) {", "-\t\terror (SWT.ERROR_INVALID_RANGE);", "-\t}", "-\t", "-\tif (menuHandle != 0) {", "-\t\tint selected= OS.GetControlValue(handle)-1;", "-\t\tif (index != selected)\t{", "-\t\t\tOS.SetControl32BitValue(handle, index+1);", "-\t\t\tsendEvent(SWT.Modify);", "-\t\t}", "+\tcheckWidget ();", "+\tint count = getItemCount ();", "+\tif (0 > index || index >= count) error (SWT.ERROR_INVALID_RANGE);", "+\tif ((style & SWT.READ_ONLY) != 0) {", "+\t\tOS.SetControl32BitValue (handle, index+1);", "-\t\tString string= _getItem(index);", "-\t\t_setText(string);", "-\t\t_selectAll();", "+\t\tint[] ptr = new int[1];", "+\t\tif (OS.HIComboBoxCopyTextItemAtIndex (handle, index, ptr) != OS.noErr) return;", "+\t\tOS.SetControlData (handle, (short)OS.kHIComboBoxEditTextPart, OS.kControlEditTextCFStringTag, 4, ptr);", "+\t\tOS.CFRelease (ptr [0]);\t\t"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1f3234d835c309c8efb0ed7dfe0bac32", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " public void add (String string)", "signatureAfterChange": "  public void add (String string)", "diff": ["- */", "-public void add (String string) {", "-\tcheckWidget();", "-\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);", "-\t", "-\tint sHandle= 0;", "-\ttry {", "-\t\tsHandle= OS.CFStringCreateWithCharacters(string);", "-\t\tif (menuHandle != 0) {", "-\t\t\tif (OS.AppendMenuItemTextWithCFString(menuHandle, sHandle, 0, fgCommandID++, null) != OS.kNoErr)", "-\t\t\t\terror (SWT.ERROR_ITEM_NOT_ADDED);", "-\t\t\tOS.SetControl32BitMaximum(handle, OS.CountMenuItems(menuHandle));\t", "-\t\t} else {", "-\t\t\tif (OS.HIComboBoxAppendTextItem(handle, sHandle) != OS.kNoErr)", "-\t\t\t\terror (SWT.ERROR_ITEM_NOT_ADDED);", "-\t\t}", "-\t} finally {", "-\t\tif (sHandle != 0)", "-\t\t\tOS.CFRelease(sHandle);", "-\t}", "-}", "+public void add (String string) {", "+\tcheckWidget ();", "+\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);\t", "+\t", "+\tchar [] buffer = new char [string.length ()];", "+\tstring.getChars (0, buffer.length, buffer, 0);", "+\tint ptr = OS.CFStringCreateWithCharacters (OS.kCFAllocatorDefault, buffer, buffer.length);", "+\tif (ptr == 0) error (SWT.ERROR_ITEM_NOT_ADDED);", "+\tint result;", "+\tif ((style & SWT.READ_ONLY) != 0) {", "+\t\tresult = OS.AppendMenuItemTextWithCFString (menuHandle, ptr, 0, 0, null);", "+\t} else {", "+\t\tresult = OS.HIComboBoxAppendTextItem (handle, ptr, null);", "+\tOS.CFRelease (ptr);", "+\tif (result != OS.noErr) error (SWT.ERROR_ITEM_NOT_ADDED);"]}], "num": 4582}