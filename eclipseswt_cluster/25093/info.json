{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f022a639a5b5204ea1fb7e4105a8a458", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3ec141b6d02a5f182b5fdb745d64aacf", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/common/org/eclipse/swt/internal/image/FileFormat.java", "commitBeforeChange": "53384da893223313aba5640789830bdbd8f35283", "commitAfterChange": "af018cfe8d256e37fa7517b7cc46083bbd40d6b6", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 5, "signatureBeforeChange": "\r public static void save(OutputStream os, int format, ImageLoader loader)", "signatureAfterChange": "\r \r public static void save(OutputStream os, int format, ImageLoader loader)", "diff": ["+\r", "+\tif (format < 0 || format >= FORMATS.length) SWT.error(SWT.ERROR_INVALID_ARGUMENT);\r", "+\r", "-\tswitch (format) {\r", "-\t\tcase SWT.IMAGE_BMP:\r", "-\t\t\tWinBMPFileFormat f = new WinBMPFileFormat();\r", "-\t\t\tf.unloadIntoStream(data, stream);\r", "-\t\t\tbreak;\r", "-\t\tcase SWT.IMAGE_BMP_RLE:\r", "-\t\t\tf = new WinBMPFileFormat();\r", "-\t\t\tif (data.depth == 8)\r", "-\t\t\t\tf.compression = 1;\r", "-\t\t\tif (data.depth == 4)\r", "-\t\t\t\tf.compression = 2;\r", "-\t\t\tf.unloadIntoStream(data, stream);\r", "-\t\t\tbreak;\r", "-\t\tcase SWT.IMAGE_GIF:\r", "-\t\t\tGIFFileFormat g = new GIFFileFormat();\r", "-\t\t\tg.unloadIntoStream(data, stream);\r", "-\t\t\tbreak;\r", "-\t\tcase SWT.IMAGE_ICO:\r", "-\t\t\tWinICOFileFormat i = new WinICOFileFormat();\r", "-\t\t\ti.unloadIntoStream(data, stream);\r", "-\t\t\tbreak;\r", "-\t\tcase SWT.IMAGE_JPEG:\r", "-\t\t\tJPEGFileFormat j = new JPEGFileFormat();\r", "-\t\t\tj.unloadIntoStream(data, stream);\r", "-\t\t\tbreak;\r", "-\t\tcase SWT.IMAGE_PNG:\r", "-\t\t\tPNGFileFormat p = new PNGFileFormat();\r", "-\t\t\tp.unloadIntoStream(data, stream);\r", "-\t\t\tbreak;\r", "-\t\tdefault:\r", "-\t\t\tSWT.error(SWT.ERROR_INVALID_ARGUMENT);\r", "+\tFileFormat fileFormat = null;\r", "+\ttry {\r", "+\t\tClass clazz = Class.forName(FORMAT_PACKAGE + '.' + FORMATS[format] + FORMAT_SUFFIX);\r", "+\t\tfileFormat = (FileFormat) clazz.newInstance();\r", "+\t} catch (Exception e) {\r", "+\t\tSWT.error(SWT.ERROR_INVALID_ARGUMENT);\r", "+\tif (format == SWT.IMAGE_BMP_RLE) {\r", "+\t\tswitch (data.depth) {\r", "+\t\t\tcase 8: fileFormat.compression = 1; break;\r", "+\t\t\tcase 4: fileFormat.compression = 2; break;\r", "+\t\t}\r", "+\t}\r", "+\tfileFormat.unloadIntoStream(data, stream);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6ea6f08eac65e5cd01b002c6e6571c51", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/CoolBar.java", "commitBeforeChange": "e5acbe6c16a694c7f3c29cf4f69a551bf55b4776", "commitAfterChange": "0a7e0762eb6a91569487ff333d468559f2ea1861", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": "\r public void setWrapIndices (int [] indices)", "signatureAfterChange": "\r public void setWrapIndices (int [] indices)", "diff": ["-\tint count = OS.SendMessage (handle, OS.RB_GETBANDCOUNT, 0, 0);\r", "+\tint count = getItemCount ();\r", "-\tREBARBANDINFO rbBand = new REBARBANDINFO ();\r", "-\trbBand.cbSize = REBARBANDINFO.sizeof;\r", "-\trbBand.fMask = OS.RBBIM_STYLE;\r", "-\tfor (int i=0; i<count; i++) {\r", "-\t\tOS.SendMessage (handle, OS.RB_GETBANDINFO, i, rbBand);\r", "-\t\tif ((rbBand.fStyle & OS.RBBS_BREAK) != 0) {\r", "+\tsetRedraw (false);\r", "+\tCoolItem [] items = getItems ();\r", "+\tfor (int i=0; i<items.length; i++) {\r", "+\t\tCoolItem item = items [i];\r", "+\t\tif (item.getWrap ()) {\r", "-\t\t\trbBand.fStyle &= ~OS.RBBS_BREAK;\r", "-\t\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, i, rbBand);\r", "+\t\t\titem.setWrap (false);\r", "-\t/*\r", "-\t* Resize the last item in the row to the maximum size.\r", "-\t*/\r", "-\r", "-\t\trbBand.fMask = OS.RBBIM_STYLE;\t\t\r", "-\t\tOS.SendMessage (handle, OS.RB_GETBANDINFO, indices [i], rbBand);\r", "-\t\trbBand.fStyle |= OS.RBBS_BREAK;\r", "-\t\tOS.SendMessage (handle, OS.RB_SETBANDINFO, indices [i], rbBand);\r", "-\t\t/*\r", "-\t\t* Ensure that the last item in the previous row is at the maximum size.\r", "-\t\t*/\r", "-\t\tresizeToMaximumWidth (indices [i] - 1);\r", "+\t\tint index = indices [i];\r", "+\t\tif (0 <= index && index < items.length) {\r", "+\t\t\tCoolItem item = items [index];\r", "+\t\t\titem.setWrap (true);\r", "+\t\t\tresizeToMaximumWidth (index - 1);\r", "+\t\t}\r", "+\tsetRedraw (true);\r"]}], "num": 25093}