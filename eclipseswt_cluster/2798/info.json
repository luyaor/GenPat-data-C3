{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "72a4d5e89e87767f08f06c95a254ed94", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3a427b1173eae437b69fd8678ab421bb", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "74c0e792b346f85e2b9067f710416658485a9a3b", "commitAfterChange": "e188a1e4ca35b8a449353a5ac187e7a405693faf", "methodNumberBeforeChange": 49, "methodNumberAfterChange": 49, "signatureBeforeChange": " public void setStyle (TextStyle style, int start, int end)", "signatureAfterChange": " public void setStyle (TextStyle style, int start, int end)", "diff": ["-\tint length = text.length();", "-\tif (length == 0) return;", "-\tif (start > end) return;", "-\tstart = Math.min(Math.max(0, start), length - 1);", "-\tend = Math.min(Math.max(0, end), length - 1);", "-\tint low = -1;", "-\tint high = styles.length;", "-\twhile (high - low > 1) {", "-\t\tint index = (high + low) / 2;", "-\t\tif (styles[index + 1].start > start) {", "-\t\t\thigh = index;", "-\t\t} else {", "-\t\t\tlow = index;", "-\t\t}", "-\t}", "-\tif (0 <= high && high < styles.length) {", "-\t\tStyleItem item = styles[high];", "-\t\tif (item.start == start && styles[high + 1].start - 1 == end) {", "-\t\t\tif (style == null) {", "-\t\t\t\tif (item.style == null) return;", "+\tNSAutoreleasePool pool = null;", "+\tif (!NSThread.isMainThread()) pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tint length = text.length();", "+\t\tif (length == 0) return;", "+\t\tif (start > end) return;", "+\t\tstart = Math.min(Math.max(0, start), length - 1);", "+\t\tend = Math.min(Math.max(0, end), length - 1);", "+\t\tint low = -1;", "+\t\tint high = styles.length;", "+\t\twhile (high - low > 1) {", "+\t\t\tint index = (high + low) / 2;", "+\t\t\tif (styles[index + 1].start > start) {", "+\t\t\t\thigh = index;", "-\t\t\t\tif (style.equals(item.style)) return;", "+\t\t\t\tlow = index;", "-\t}", "-\tfreeRuns();", "-\tint modifyStart = high;", "-\tint modifyEnd = modifyStart;", "-\twhile (modifyEnd < styles.length) {", "-\t\tif (styles[modifyEnd + 1].start > end) break;", "-\t\tmodifyEnd++;", "-\t}", "-\tif (modifyStart == modifyEnd) {", "-\t\tint styleStart = styles[modifyStart].start; ", "-\t\tint styleEnd = styles[modifyEnd + 1].start - 1;", "-\t\tif (styleStart == start && styleEnd == end) {", "-\t\t\tstyles[modifyStart].style = style;", "-\t\t\treturn;", "+\t\tif (0 <= high && high < styles.length) {", "+\t\t\tStyleItem item = styles[high];", "+\t\t\tif (item.start == start && styles[high + 1].start - 1 == end) {", "+\t\t\t\tif (style == null) {", "+\t\t\t\t\tif (item.style == null) return;", "+\t\t\t\t} else {", "+\t\t\t\t\tif (style.equals(item.style)) return;", "+\t\t\t\t}", "+\t\t\t}", "-\t\tif (styleStart != start && styleEnd != end) {", "-\t\t\tStyleItem[] newStyles = new StyleItem[styles.length + 2];", "-\t\t\tSystem.arraycopy(styles, 0, newStyles, 0, modifyStart + 1);", "-\t\t\tStyleItem item = new StyleItem();", "-\t\t\titem.start = start;", "-\t\t\titem.style = style;", "-\t\t\tnewStyles[modifyStart + 1] = item;\t", "-\t\t\titem = new StyleItem();", "-\t\t\titem.start = end + 1;", "-\t\t\titem.style = styles[modifyStart].style;", "-\t\t\tnewStyles[modifyStart + 2] = item;", "-\t\t\tSystem.arraycopy(styles, modifyEnd + 1, newStyles, modifyEnd + 3, styles.length - modifyEnd - 1);", "-\t\t\tstyles = newStyles;", "-\t\t\treturn;", "+\t\tfreeRuns();", "+\t\tint modifyStart = high;", "+\t\tint modifyEnd = modifyStart;", "+\t\twhile (modifyEnd < styles.length) {", "+\t\t\tif (styles[modifyEnd + 1].start > end) break;", "+\t\t\tmodifyEnd++;", "+\t\tif (modifyStart == modifyEnd) {", "+\t\t\tint styleStart = styles[modifyStart].start; ", "+\t\t\tint styleEnd = styles[modifyEnd + 1].start - 1;", "+\t\t\tif (styleStart == start && styleEnd == end) {", "+\t\t\t\tstyles[modifyStart].style = style;", "+\t\t\t\treturn;", "+\t\t\t}", "+\t\t\tif (styleStart != start && styleEnd != end) {", "+\t\t\t\tStyleItem[] newStyles = new StyleItem[styles.length + 2];", "+\t\t\t\tSystem.arraycopy(styles, 0, newStyles, 0, modifyStart + 1);", "+\t\t\t\tStyleItem item = new StyleItem();", "+\t\t\t\titem.start = start;", "+\t\t\t\titem.style = style;", "+\t\t\t\tnewStyles[modifyStart + 1] = item;\t", "+\t\t\t\titem = new StyleItem();", "+\t\t\t\titem.start = end + 1;", "+\t\t\t\titem.style = styles[modifyStart].style;", "+\t\t\t\tnewStyles[modifyStart + 2] = item;", "+\t\t\t\tSystem.arraycopy(styles, modifyEnd + 1, newStyles, modifyEnd + 3, styles.length - modifyEnd - 1);", "+\t\t\t\tstyles = newStyles;", "+\t\t\t\treturn;", "+\t\t\t}", "+\t\t}", "+\t\tif (start == styles[modifyStart].start) modifyStart--;", "+\t\tif (end == styles[modifyEnd + 1].start - 1) modifyEnd++;", "+\t\tint newLength = styles.length + 1 - (modifyEnd - modifyStart - 1);", "+\t\tStyleItem[] newStyles = new StyleItem[newLength];", "+\t\tSystem.arraycopy(styles, 0, newStyles, 0, modifyStart + 1);\t", "+\t\tStyleItem item = new StyleItem();", "+\t\titem.start = start;", "+\t\titem.style = style;", "+\t\tnewStyles[modifyStart + 1] = item;", "+\t\tstyles[modifyEnd].start = end + 1;", "+\t\tSystem.arraycopy(styles, modifyEnd, newStyles, modifyStart + 2, styles.length - modifyEnd);", "+\t\tstyles = newStyles;", "+\t} finally {", "+\t\tif (pool != null) pool.release();", "-\tif (start == styles[modifyStart].start) modifyStart--;", "-\tif (end == styles[modifyEnd + 1].start - 1) modifyEnd++;", "-\tint newLength = styles.length + 1 - (modifyEnd - modifyStart - 1);", "-\tStyleItem[] newStyles = new StyleItem[newLength];", "-\tSystem.arraycopy(styles, 0, newStyles, 0, modifyStart + 1);\t", "-\tStyleItem item = new StyleItem();", "-\titem.start = start;", "-\titem.style = style;", "-\tnewStyles[modifyStart + 1] = item;", "-\tstyles[modifyEnd].start = end + 1;", "-\tSystem.arraycopy(styles, modifyEnd, newStyles, modifyStart + 2, styles.length - modifyEnd);", "-\tstyles = newStyles;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ad86c6d66211cd8a5c2f17442d2e4fa0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "74c0e792b346f85e2b9067f710416658485a9a3b", "commitAfterChange": "e188a1e4ca35b8a449353a5ac187e7a405693faf", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": " public Image(Device device, ImageData data)", "signatureAfterChange": " public Image(Device device, ImageData data)", "diff": ["-\tinit(data);", "-\tinit();", "+\tNSAutoreleasePool pool = null;", "+\tif (!NSThread.isMainThread()) pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tinit(data);", "+\t\tinit();", "+\t} finally {", "+\t\tif (pool != null) pool.release();", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1cbad36be8021014f1ff4ac46f9935b1", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Path.java", "commitBeforeChange": "74c0e792b346f85e2b9067f710416658485a9a3b", "commitAfterChange": "e188a1e4ca35b8a449353a5ac187e7a405693faf", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": " public void moveTo(float x, float y)", "signatureAfterChange": " public void moveTo(float x, float y)", "diff": ["-\tNSPoint pt = new NSPoint();", "-\tpt.x = x;", "-\tpt.y = y;", "-\thandle.moveToPoint(pt);", "-", "+\tNSAutoreleasePool pool = null;", "+\tif (!NSThread.isMainThread()) pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tNSPoint pt = new NSPoint();", "+\t\tpt.x = x;", "+\t\tpt.y = y;", "+\t\thandle.moveToPoint(pt);", "+\t} finally {", "+\t\tif (pool != null) pool.release();", "+\t}"]}], "num": 2798}