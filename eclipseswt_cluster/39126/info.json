{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "baebc18652a1a67d5528b55261a956c8", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4fc1da55e84aa9651422127c16a27f26", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "ce2f35c3f6b1d0b5778f68f011b1d8668d3c5c72", "commitAfterChange": "00bee382096a1807d86474fed7c933116a37eeb8", "methodNumberBeforeChange": 80, "methodNumberAfterChange": 90, "signatureBeforeChange": "\r void drawLine(String line, int lineIndex, int paintY, GC gc, Color widgetBackground, Color widgetForeground, boolean clearBackground)", "signatureAfterChange": "\r void drawLine(String line, int lineIndex, int paintY, GC gc, Color widgetBackground, Color widgetForeground, boolean clearBackground)", "diff": ["-\tint selectionEndX = 0;\r", "-\tint clientAreaWidth = getClientArea().width;\r", "-\tint selectionStartOffset;\r", "-\tint selectionEndOffset; \r", "-\tint selectionLength;\r", "-\tboolean lineSelection;\r", "+\tint selectionStart = selection.x;\r", "+\tint selectionEnd = selection.y;\r", "+\tStyledTextBidi bidi = null;\r", "+\t}\r", "+\tif (isBidi()) {\r", "+\t\tint[] boldStyles = getBoldRanges(styles, lineOffset, lineLength);\r", "+\t\tsetLineFont(gc, gc.getFont().getFontData()[0], SWT.NORMAL);\r", "+\t\tbidi = new StyledTextBidi(gc, tabWidth, line, boldStyles, boldFont, getStyleOffsets (line, lineOffset));\t\t\r", "-\t// calculate offset of selection start and end relative to the line start\r", "-\tselectionStartOffset = Math.max(0, selection.x - lineOffset);\r", "-\tselectionEndOffset = selection.y - lineOffset; \r", "-\tselectionLength = selectionEndOffset - selectionStartOffset;\t\r", "-\tif (selectionLength == 0 || selectionVisible == false) {\r", "-\t\tselectionStartOffset = 0;\r", "-\t\tselectionEndOffset = 0;\r", "-\t}\r", "-\tlineSelection = selectionEndOffset > 0 && selectionStartOffset <= lineLength;\r", "-\tif (lineSelection == false && clearBackground) {\r", "-\t\t// draw background for completely unselected line\r", "+\tif (clearBackground && ((getStyle() & SWT.FULL_SELECTION) == 0 || selectionStart > lineOffset || selectionEnd <= lineOffset + lineLength)) {\r", "+\t\t// draw background if full selection is off or if line is not completely selected\r", "-\t\tgc.fillRectangle(0, paintY, clientAreaWidth, lineHeight);\r", "-\t}\t\r", "-\tif (selectionStartOffset > 0) {\r", "-\t\tString unselectedLine;\t\t\r", "-\t\tif (selectionStartOffset > lineLength) {\r", "-\t\t\tunselectedLine = line;\r", "-\t\t}\r", "-\t\telse {\r", "-\t\t\tif (clearBackground) {\r", "-\t\t\t\t// draw background for partially unselected line\r", "-\t\t\t\tint selectionStartX = textWidth(line, lineOffset, 0, selectionStartOffset, styles, 0, gc);\r", "-\t\t\t\tgc.setBackground(lineBackground);\r", "-\t\t\t\tgc.setForeground(lineBackground);\r", "-\t\t\t\tgc.fillRectangle(0, paintY, selectionStartX - horizontalScrollOffset, lineHeight);\r", "-\t\t\t}\r", "-\t\t\tunselectedLine = line.substring(0, selectionStartOffset);\r", "-\t\t}\r", "-\t\tdrawStyledLine(unselectedLine, lineOffset, 0, styles, 0, paintY, gc, lineBackground, widgetForeground);\r", "+\t\tgc.fillRectangle(0, paintY, getClientArea().width, lineHeight);\r", "-\tif (selectionLength > 0 && lineSelection) {\r", "-\t\t// draw selected text\r", "-\t\tselectionEndX = drawLineSelection(line, lineOffset, selectionStartOffset, selectionLength, styles, paintY, gc) - horizontalScrollOffset;\r", "-\t\tif (selectionEndX < clientAreaWidth && clearBackground) {\r", "-\t\t\t// draw background after selection\r", "-\t\t\tgc.setBackground(lineBackground);\r", "-\t\t\tgc.setForeground(lineBackground);\r", "-\t\t\tgc.fillRectangle(selectionEndX, paintY, clientAreaWidth - selectionEndX, lineHeight);\r", "-\t\t}\r", "-\t\tselectionEndX += horizontalScrollOffset;\r", "+\tif (selectionStart != selectionEnd) {\r", "+\t\tdrawLineSelectionBackground(line, lineOffset, styles, paintY, gc, bidi);\r", "-\tif (selectionEndOffset < lineLength) {\r", "-\t\tselectionEndOffset = Math.max(0, selectionEndOffset);\r", "-\t\tdrawStyledLine(line, lineOffset, selectionEndOffset, styles, selectionEndX, paintY, gc, lineBackground, widgetForeground);\r", "+\tif (selectionStart != selectionEnd && ((selectionStart >= lineOffset && selectionStart < lineOffset + lineLength) || (selectionStart < lineOffset && selectionEnd > lineOffset))) {\r", "+\t\tstyles = getSelectionLineStyles(styles);\r", "+\t}\r", "+\tif (isBidi()) {\r", "+\t\tint paintX = textWidth(line, lineOffset, 0, 0, styles, 0, gc, bidi);\r", "+\t\tdrawStyledLine(line, lineOffset, 0, styles, paintX, paintY, gc, lineBackground, widgetForeground, bidi);\r", "+\t}\r", "+\telse {\r", "+\t\tdrawStyledLine(line, lineOffset, 0, styles, 0, paintY, gc, lineBackground, widgetForeground, bidi);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "168c8bc511859c25a099629a69c9b906", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Mozilla/common/org/eclipse/swt/browser/Mozilla.java", "commitBeforeChange": "d8955edbe9f5c9464b222d0331748137a5a534b7", "commitAfterChange": "b533c1ac7667bcd66286ef15cde6bafc62a4cf97", "methodNumberBeforeChange": 168, "methodNumberAfterChange": 168, "signatureBeforeChange": "  int OnStateChange (long aWebProgress, long aRequest, int aStateFlags, int aStatus)", "signatureAfterChange": "  int OnStateChange (long aWebProgress, long aRequest, int aStateFlags, int aStatus)", "diff": ["-\t\t\tint rc = request.QueryInterface (nsIChannel.NS_ICHANNEL_24_IID, result);", "-\t\t\tif (rc != XPCOM.NS_OK) {", "-\t\t\t\trc = request.QueryInterface (nsIChannel.NS_ICHANNEL_10_IID, result);", "-\t\t\t\tif (rc != XPCOM.NS_OK) {", "-\t\t\t\t\trc = request.QueryInterface (nsIChannel.NS_ICHANNEL_IID, result);", "-\t\t\t\t\tif (rc != XPCOM.NS_OK) error (rc);", "-\t\t\t\t}", "-\t\t\t\tif (result[0] == 0) error (XPCOM.NS_NOINTERFACE);", "-\t\t\t}", "+\t\t\tint rc = request.QueryInterface (IIDStore.GetIID (nsIChannel.class), result);", "+\t\t\tif (rc != XPCOM.NS_OK) error (rc);", "+\t\t\tif (result[0] == 0) error (XPCOM.NS_NOINTERFACE);", "-\t\t\trc = domWindow.QueryInterface (IsPre_24 ? (IsPre_4 ?  nsIDOMEventTarget.NS_IDOMEVENTTARGET_IID : nsIDOMEventTarget.NS_IDOMEVENTTARGET_10_IID) : nsIDOMEventTarget.NS_IDOMEVENTTARGET_24_IID, result);", "+\t\t\trc = domWindow.QueryInterface (IIDStore.GetIID (nsIDOMEventTarget.class), result);", "-\t\t\t\trc = serviceManager.GetService (XPCOM.NS_IOSERVICE_CID, nsIIOService.NS_IIOSERVICE_IID, result);", "+\t\t\t\trc = serviceManager.GetService (XPCOM.NS_IOSERVICE_CID, IIDStore.GetIID (nsIIOService.class), result);", "-\t\t\t\trc = webBrowser.QueryInterface (nsIWebBrowserStream.NS_IWEBBROWSERSTREAM_IID, result);", "+\t\t\t\trc = webBrowser.QueryInterface (IIDStore.GetIID (nsIWebBrowserStream.class), result);", "-\t\t\t\trc = domWindow.QueryInterface (IsPre_24 ? (IsPre_4 ?  nsIDOMEventTarget.NS_IDOMEVENTTARGET_IID : nsIDOMEventTarget.NS_IDOMEVENTTARGET_10_IID) : nsIDOMEventTarget.NS_IDOMEVENTTARGET_24_IID, result);", "+\t\t\t\trc = domWindow.QueryInterface (IIDStore.GetIID (nsIDOMEventTarget.class), result);", "-\t\tif (!IsPre_4) {", "+\t\tif (MozillaVersion.CheckVersion (MozillaVersion.VERSION_XR10)) {", "-\t\t\tint rc = request.QueryInterface (nsIChannel.NS_ICHANNEL_24_IID, result);", "-\t\t\tif (rc != XPCOM.NS_OK) {", "-\t\t\t\trc = request.QueryInterface (nsIChannel.NS_ICHANNEL_10_IID, result);", "-\t\t\t\tif (rc != XPCOM.NS_OK) {", "-\t\t\t\t\trc = request.QueryInterface (nsIChannel.NS_ICHANNEL_IID, result);", "-\t\t\t\t}", "-\t\t\t}", "+\t\t\tint rc = request.QueryInterface (IIDStore.GetIID (nsIChannel.class), result);", "-\t\t\trc = domWindow.QueryInterface (IsPre_24 ? (IsPre_4 ?  nsIDOMEventTarget.NS_IDOMEVENTTARGET_IID : nsIDOMEventTarget.NS_IDOMEVENTTARGET_10_IID) : nsIDOMEventTarget.NS_IDOMEVENTTARGET_24_IID, result);", "+\t\t\trc = domWindow.QueryInterface (IIDStore.GetIID (nsIDOMEventTarget.class), result);"]}], "num": 39126}