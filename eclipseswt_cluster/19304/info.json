{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "04116bfc3ceef4666d58fe75a0cbe6e9", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1eace80b8231a79d0c096f7a601b3fe9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Table.java", "commitBeforeChange": "966e156ab773184b0dc0663f86e482af291e3020", "commitAfterChange": "11abcc2bac82b6e532a993b3e35d5225f1813afa", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": "  int drawItemProc (int browser, int id, int property, int itemState, int theRect, int gdDepth, int colorDevice)", "signatureAfterChange": "  int drawItemProc (int browser, int id, int property, int itemState, int theRect, int gdDepth, int colorDevice)", "diff": ["+\tint width = rect.right - rect.left;", "-\tif (image != null) {", "-\t\tRectangle bounds = image.getBounds ();", "-\t\tgc.drawImage (image, 0, 0, bounds.width, bounds.height, x, y + (height - bounds.height) / 2, bounds.width, bounds.height);", "-\t\tx += bounds.width + 2;", "-\t}", "-\tFont font = item.getFont (columnIndex); ", "-\tgc.setFont (font);", "+\tgc.setFont (item.getFont (columnIndex));", "+\tint itemWidth = extent.x;", "+\tRectangle imageBounds = null;", "+\tif (image != null) {", "+\t\timageBounds = image.getBounds ();", "+\t\titemWidth += imageBounds.width + 2;", "+\t}", "+\tTableColumn column = columns [columnIndex];", "+\tif ((column.style & SWT.CENTER) != 0) x += (width - itemWidth) / 2;", "+\tif ((column.style & SWT.RIGHT) != 0) x += width - itemWidth;", "+\tif (image != null) {", "+\t\tgc.drawImage (image, 0, 0, imageBounds.width, imageBounds.height, x, y + (height - imageBounds.height) / 2, imageBounds.width, imageBounds.height);", "+\t\tx += imageBounds.width + 2;", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d20c94a2b409e675e7fd8da596d41eeb", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "6064bf54f9c02b013a6336de92e98261a6d27bb2", "commitAfterChange": "ab7a1436e4ef701e89dc80eaedb4dc69f6c11fec", "methodNumberBeforeChange": 91, "methodNumberAfterChange": 92, "signatureBeforeChange": "  void setItemHeight (Image image)", "signatureAfterChange": "  void setItemHeight (Image image, NSFont font)", "diff": ["-void setItemHeight (Image image) {", "-//\tRectangle bounds = image != null ? image.getBounds () : imageBounds;", "-//\tif (bounds == null) return;", "-//\timageBounds = bounds;", "-//\tshort [] height = new short [1];", "-//\tif (OS.GetDataBrowserTableViewRowHeight (handle, height) == OS.noErr) {", "-//\t\tif (height [0] < bounds.height) {", "-//\t\t\tOS.SetDataBrowserTableViewRowHeight (handle, (short) bounds.height);", "-//\t\t}", "-//\t}", "+void setItemHeight (Image image, NSFont font) {", "+\tif (font == null) font = getFont ().handle;", "+\tfloat /*double*/ ascent = font.ascender ();", "+\tfloat /*double*/ descent = -font.descender () + font.leading ();", "+\tint height = (int)Math.ceil (ascent + descent) + 1;", "+\tRectangle bounds = image != null ? image.getBounds () : imageBounds;", "+\tif (bounds != null) {", "+\t\timageBounds = bounds;", "+\t\theight = Math.max (height, bounds.height);", "+\t}", "+\tNSTableView widget = (NSTableView)view;", "+\tif (widget.rowHeight () < height) {", "+\t\twidget.setRowHeight (height);", "+\t}"]}], "num": 19304}