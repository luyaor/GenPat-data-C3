{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "d7d79cb65c16aa50dcc715c130c438cb", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e9a52e16c7f56458e5733c0f317500e9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "257d61e9439d7943ecdc8704cdc26b87077b747e", "commitAfterChange": "735e9a9bdbb6a114195dba9738a0d9f8f6b1edcf", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": " public void drawText (String string, int x, int y, int flags)", "signatureAfterChange": " public void drawText (String string, int x, int y, int flags)", "diff": ["-\t//FIXME - check flags", "+\t//FIXME - check flags, background color", "-\tOS.gdk_draw_layout(data.drawable, handle, x, y, layout);", "+\tif (!data.xorMode) {", "+\t\tOS.gdk_draw_layout(data.drawable, handle, x, y, layout);", "+\t} else {", "+\t\tint[] w = new int[1], h = new int[1];", "+\t\tOS.pango_layout_get_size(layout, w, h);", "+\t\tint width = OS.PANGO_PIXELS(w[0]);", "+\t\tint height = OS.PANGO_PIXELS(h[0]);", "+\t\tint pixmap = OS.gdk_pixmap_new(OS.GDK_ROOT_PARENT(), width, height, -1);", "+\t\tif (pixmap == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\t\tint gdkGC = OS.gdk_gc_new(pixmap);", "+\t\tif (gdkGC == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\t\tGdkColor foreground = new GdkColor();", "+\t\tOS.gdk_gc_set_foreground(gdkGC, foreground);", "+\t\tOS.gdk_draw_rectangle(pixmap, gdkGC, 1, 0, 0, width, height);", "+\t\tGdkGCValues values = new GdkGCValues();", "+\t\tOS.gdk_gc_get_values(handle, values);", "+\t\tforeground.pixel = values.foreground_pixel;", "+\t\tOS.gdk_gc_set_foreground(gdkGC, foreground);", "+\t\tOS.gdk_draw_layout(pixmap, gdkGC, 0, 0, layout);", "+\t\tOS.g_object_unref(gdkGC);", "+\t\tOS.gdk_draw_drawable(data.drawable, handle, pixmap, 0, 0, x, y, width, height);", "+\t\tOS.g_object_unref(pixmap);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c690fb80aae086360daca2d11f4c2277", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "257d61e9439d7943ecdc8704cdc26b87077b747e", "commitAfterChange": "735e9a9bdbb6a114195dba9738a0d9f8f6b1edcf", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": " public void drawString(String string, int x, int y, boolean isTransparent)", "signatureAfterChange": " public void drawString(String string, int x, int y, boolean isTransparent)", "diff": ["-\t//FIXME - need to avoid delimiter and tabs", "+\t//FIXME - need to avoid delimiter and tabs, background color", "-\tOS.gdk_draw_layout(data.drawable, handle, x, y, layout);", "+\tif (!data.xorMode) {", "+\t\tOS.gdk_draw_layout(data.drawable, handle, x, y, layout);", "+\t} else {", "+\t\tint[] w = new int[1], h = new int[1];", "+\t\tOS.pango_layout_get_size(layout, w, h);", "+\t\tint width = OS.PANGO_PIXELS(w[0]);", "+\t\tint height = OS.PANGO_PIXELS(h[0]);", "+\t\tint pixmap = OS.gdk_pixmap_new(OS.GDK_ROOT_PARENT(), width, height, -1);", "+\t\tif (pixmap == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\t\tint gdkGC = OS.gdk_gc_new(pixmap);", "+\t\tif (gdkGC == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\t\tGdkColor foreground = new GdkColor();", "+\t\tOS.gdk_gc_set_foreground(gdkGC, foreground);", "+\t\tOS.gdk_draw_rectangle(pixmap, gdkGC, 1, 0, 0, width, height);", "+\t\tGdkGCValues values = new GdkGCValues();", "+\t\tOS.gdk_gc_get_values(handle, values);", "+\t\tforeground.pixel = values.foreground_pixel;", "+\t\tOS.gdk_gc_set_foreground(gdkGC, foreground);", "+\t\tOS.gdk_draw_layout(pixmap, gdkGC, 0, 0, layout);", "+\t\tOS.g_object_unref(gdkGC);", "+\t\tOS.gdk_draw_drawable(data.drawable, handle, pixmap, 0, 0, x, y, width, height);", "+\t\tOS.g_object_unref(pixmap);", "+\t}"]}], "num": 46466}