{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "94c42e207deeb9ef7268109f3d78030a", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4155853ae84a70b2902fdcd6cf90b00e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/gtk/org/eclipse/swt/dnd/TextTransfer.java", "commitBeforeChange": "41379afd447e143f3a057620b8db69d0717b2e63", "commitAfterChange": "26a56a1cbfe587585a35a9712abb11e853344060", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": " public Object nativeToJava(TransferData transferData)", "diff": ["-\tbyte[] buffer = null;", "-\tif (transferData.type == COMPOUND_TEXT_ID) { \t", "-\t\tint /*long*/[] list = new int /*long*/[1];", "-\t\tint count = OS.gdk_text_property_to_utf8_list(transferData.type, transferData.format, transferData.pValue, transferData.length, list);", "-\t\tif (count == 0) return null;", "-\t\tint /*long*/[] ptr = new int /*long*/[1];", "-\t\tOS.memmove(ptr, list[0], OS.PTR_SIZEOF);", "-\t\tint length = OS.strlen(ptr[0]);", "-\t\tbuffer = new byte[length];", "-\t\tOS.memmove(buffer, ptr[0], length);", "-\t\tOS.g_strfreev(list[0]);", "-\t}", "-\tif (transferData.type == UTF8_STRING_ID ||", "-\t\ttransferData.type == STRING_ID) {", "-\t\tint size = transferData.format * transferData.length / 8;", "-\t\tif (size == 0) return null;", "-\t\tbuffer = new byte[size];", "-\t\tOS.memmove(buffer, transferData.pValue, size);", "-\t}", "-\tif (buffer == null) return null;", "-\t// convert byte array to a string", "-\tchar [] unicode = Converter.mbcsToWcs (null, buffer);", "+\tint /*long*/[] list = new int /*long*/[1];", "+\tint count = OS.gdk_text_property_to_utf8_list(transferData.type, transferData.format, transferData.pValue, transferData.length, list);", "+\tif (count == 0) return null;", "+\tint /*long*/[] ptr = new int /*long*/[1];", "+\tOS.memmove(ptr, list[0], OS.PTR_SIZEOF);", "+\tint length = OS.strlen(ptr[0]);", "+\tbyte[] utf8 = new byte[length];", "+\tOS.memmove(utf8, ptr[0], length);", "+\tOS.g_strfreev(list[0]);", "+\t// convert utf8 byte array to a unicode string", "+\tchar [] unicode = Converter.mbcsToWcs (null, utf8);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "48a2d65be03f98b0038c551717b53c44", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "185b3d6f26eb0daceba066583e3836e94ad0a643", "commitAfterChange": "269a20bffa49783c6d0463d2cbc4f0d4f939b6bf", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 20, "signatureBeforeChange": "  void releaseWidget ()", "signatureAfterChange": "  void releaseWidget ()", "diff": ["-\tif (menu != null) {", "+\tif (menu == null) {", "+\t\tdestroyEmptyMenu (-1);", "+\t} else {", "-\t} else {", "-\t\tif ((parent.style & SWT.BAR) != 0) {", "-\t\t\tint index = parent.indexOf (this);", "-\t\t\tif (index != -1) {", "-\t\t\t\tshort menuIndex = (short) (index + 1);", "-\t\t\t\tint [] outMenuRef = new int [1];", "-\t\t\t\tOS.GetMenuItemHierarchicalMenu (parent.handle, menuIndex, outMenuRef);", "-\t\t\t\tif (outMenuRef [0] != 0) {", "-\t\t\t\t\tOS.DisposeMenu (outMenuRef [0]);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}"]}], "num": 3216}