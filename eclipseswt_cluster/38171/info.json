{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "fc7c1632c50fca9a79209ba8cd3753b8", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c043b63cb4d71edd2e02b1b778ce5699", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/CTabFolder2.java", "commitBeforeChange": "bdf90f4a4dba97c8432294befc5c28758027ecae", "commitAfterChange": "f278ec5644c5936371a8e843bfc935318521e5c6", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": " void drawBorder(GC gc)", "signatureAfterChange": " void drawBorder(GC gc)", "diff": ["-\t\t\tint[] left = BOTTOM_LEFT_CORNER;", "-\t\t\tint[] right = curve;", "-\t\t\tshape = new int[left.length + right.length + 8];", "-\t\t\tint index = 0;", "-\t\t\tshape[index++] = Math.max(0, borderLeft - 1);", "-\t\t\tshape[index++] = itemY - 1;", "-\t\t\tshape[index++] = itemX;", "-\t\t\tshape[index++] = itemY - 1;", "-\t\t\tfor (int i = 0; i < left.length/2; i++) {", "-\t\t\t\tshape[index++] = itemX + left[2*i];", "-\t\t\t\tshape[index++] = itemY + itemH + left[2*i+1]-1;", "-\t\t\t}", "-\t\t\tfor (int i = 0; i < right.length/2; i++) {", "-\t\t\t\tshape[index++] = itemX + itemW - extra + right[2*i];", "-\t\t\t\tshape[index++] = itemY + right[2*i+1] - 2;", "-\t\t\t}", "-\t\t\tint temp = 0;", "-\t\t\tint rightTabEdge = size.x - borderRight - chevronRect.width - expandRect.width - closeRect.width - 1;", "-\t\t\tfor (int i = 0; i < shape.length/2; i++) {", "-\t\t\t\tif (shape[2*i] > rightTabEdge) {", "-\t\t\t\t\tif (temp == 0 && i > 0) {", "-\t\t\t\t\t\ttemp = shape[2*i-1];", "-\t\t\t\t\t} else {", "-\t\t\t\t\t\ttemp = itemY - 1;", "-\t\t\t\t\t}", "-\t\t\t\t\tshape[2*i] = rightTabEdge;", "-\t\t\t\t\tshape[2*i+1] = temp;", "+\t\t\tint rightTabEdge = getRightItemEdge();", "+\t\t\tif (!single && selectedIndex != topTabIndex && itemX + itemW >= rightTabEdge){ ", "+\t\t\t\tshape = new int[4];", "+\t\t\t\tint index = 0;", "+\t\t\t\tshape[index++] = Math.max(0, borderLeft - 1);", "+\t\t\t\tshape[index++] = itemY - 1;", "+\t\t\t\tshape[index++] = size.x - borderRight;", "+\t\t\t\tshape[index++] = itemY - 1;", "+\t\t\t} else {", "+\t\t\t\tint[] left = BOTTOM_LEFT_CORNER;", "+\t\t\t\tint[] right = curve;", "+\t\t\t\tshape = new int[left.length + right.length + 8];", "+\t\t\t\tint index = 0;", "+\t\t\t\tshape[index++] = Math.max(0, borderLeft - 1);", "+\t\t\t\tshape[index++] = itemY - 1;", "+\t\t\t\tshape[index++] = itemX;", "+\t\t\t\tshape[index++] = itemY - 1;", "+\t\t\t\tfor (int i = 0; i < left.length/2; i++) {", "+\t\t\t\t\tshape[index++] = itemX + left[2*i];", "+\t\t\t\t\tshape[index++] = itemY + itemH + left[2*i+1]-1;", "+\t\t\t\tfor (int i = 0; i < right.length/2; i++) {", "+\t\t\t\t\tshape[index++] = itemX + itemW - extra + right[2*i];", "+\t\t\t\t\tshape[index++] = itemY + right[2*i+1] - 2;", "+\t\t\t\t}", "+\t\t\t\tint temp = 0;\t\t\t", "+\t\t\t\tfor (int i = 0; i < shape.length/2; i++) {", "+\t\t\t\t\tif (shape[2*i] > rightTabEdge) {", "+\t\t\t\t\t\tif (temp == 0 && i > 0) {", "+\t\t\t\t\t\t\ttemp = shape[2*i-1];", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\ttemp = itemY - 1;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tshape[2*i] = rightTabEdge;", "+\t\t\t\t\t\tshape[2*i+1] = temp;", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t\tshape[index++] = rightTabEdge;", "+\t\t\t\tshape[index++] = itemY - 1;", "+\t\t\t\tshape[index++] = size.x - borderRight;", "+\t\t\t\tshape[index++] = itemY - 1;", "-\t\t\tshape[index++] = rightTabEdge;", "-\t\t\tshape[index++] = itemY - 1;", "-\t\t\tshape[index++] = size.x - borderRight;", "-\t\t\tshape[index++] = itemY - 1;", "-\t\t\t", "-\t\t\tint[] left = TOP_LEFT_CORNER;", "-\t\t\tint[] right = curve;", "-\t\t\tshape = new int[left.length+right.length+8];", "-\t\t\tint index = 0;", "-\t\t\t", "-\t\t\tshape[index++] = Math.max(0, borderLeft - 1);", "-\t\t\tshape[index++] = itemY + itemH;", "-\t\t\tshape[index++] = itemX;", "-\t\t\tshape[index++] = itemY + itemH;", "-\t\t\t", "-\t\t\tfor (int i = 0; i < left.length/2; i++) {", "-\t\t\t\tshape[index++] = itemX + left[2*i];", "-\t\t\t\tshape[index++] = itemY + left[2*i+1];", "-\t\t\t}", "-\t\t\tfor (int i = 0; i < right.length/2; i++) {", "-\t\t\t\tshape[index++] = itemX + itemW - extra + right[2*i];", "-\t\t\t\tshape[index++] = itemY + right[2*i+1];", "-\t\t\t}", "+\t\t\tint rightTabEdge = getRightItemEdge();", "+\t\t\tif (!single && selectedIndex != topTabIndex && itemX + itemW >= rightTabEdge){ ", "+\t\t\t\tshape = new int[4];", "+\t\t\t\tint index = 0;", "+\t\t\t\tshape[index++] = Math.max(0, borderLeft - 1);", "+\t\t\t\tshape[index++] = itemY + itemH;", "+\t\t\t\tshape[index++] = size.x - borderRight;", "+\t\t\t\tshape[index++] = itemY + itemH;", "+\t\t\t} else {", "+\t\t\t\tint[] left = TOP_LEFT_CORNER;", "+\t\t\t\tint[] right = curve;", "+\t\t\t\tshape = new int[left.length+right.length+8];", "+\t\t\t\tint index = 0;", "-\t\t\tint temp = 0;", "-\t\t\tint rightTabEdge = size.x - borderRight - chevronRect.width - expandRect.width - closeRect.width - 1;", "-\t\t\tfor (int i = 0; i < shape.length/2; i++) {", "-\t\t\t\tif (shape[2*i] > rightTabEdge) {", "-\t\t\t\t\tif (temp == 0 && i > 0) {", "-\t\t\t\t\t\ttemp = shape[2*i-1];", "-\t\t\t\t\t} else {", "-\t\t\t\t\t\ttemp = itemY + itemH;", "-\t\t\t\t\t}", "-\t\t\t\t\tshape[2*i] = rightTabEdge;", "-\t\t\t\t\tshape[2*i+1] = temp;", "+\t\t\t\tshape[index++] = Math.max(0, borderLeft - 1);", "+\t\t\t\tshape[index++] = itemY + itemH;", "+\t\t\t\tshape[index++] = itemX;", "+\t\t\t\tshape[index++] = itemY + itemH;", "+\t\t\t\t", "+\t\t\t\tfor (int i = 0; i < left.length/2; i++) {", "+\t\t\t\t\tshape[index++] = itemX + left[2*i];", "+\t\t\t\t\tshape[index++] = itemY + left[2*i+1];", "+\t\t\t\tfor (int i = 0; i < right.length/2; i++) {", "+\t\t\t\t\tshape[index++] = itemX + itemW - extra + right[2*i];", "+\t\t\t\t\tshape[index++] = itemY + right[2*i+1];", "+\t\t\t\t}", "+\t\t\t\t\t", "+\t\t\t\tint temp = 0;", "+\t\t\t\tfor (int i = 0; i < shape.length/2; i++) {", "+\t\t\t\t\tif (shape[2*i] > rightTabEdge) {", "+\t\t\t\t\t\tif (temp == 0 && i > 0) {", "+\t\t\t\t\t\t\ttemp = shape[2*i-1];", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\ttemp = itemY + itemH;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tshape[2*i] = rightTabEdge;", "+\t\t\t\t\t\tshape[2*i+1] = temp;", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t\tshape[index++] = rightTabEdge;", "+\t\t\t\tshape[index++] = itemY + itemH;", "+\t\t\t\tshape[index++] = size.x - borderRight;", "+\t\t\t\tshape[index++] = itemY + itemH;", "-\t\t\tshape[index++] = rightTabEdge;", "-\t\t\tshape[index++] = itemY + itemH;", "-\t\t\tshape[index++] = size.x - borderRight;", "-\t\t\tshape[index++] = itemY + itemH;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b7a2b7d8ffd4bf463766c3b054e74941", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Button.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Point computeSize (int wHint, int hHint, boolean changed)", "signatureAfterChange": "  public Point computeSize (int wHint, int hHint, boolean changed)", "diff": ["-}", "+", "-\tint border = getBorderWidth ();", "-\tint width = border * 2, height = border * 2;", "+\t// NEEDS WORK - empty string", "-\t\tDisplay display = getDisplay ();", "-\t\twidth += display.scrolledMarginX;", "-\t\theight += display.scrolledMarginY;", "-\t\tif (wHint != SWT.DEFAULT) width = wHint + (border * 2);", "-\t\tif (hHint != SWT.DEFAULT) height = hHint + (border * 2);", "+\t\tint [] outMetric = new int [1];", "+\t\tOS.GetThemeMetric (OS.kThemeMetricDisclosureTriangleHeight, outMetric);", "+\t\tint width = outMetric [0], height = outMetric [0];", "+\t\tif (wHint != SWT.DEFAULT) width = wHint;", "+\t\tif (hHint != SWT.DEFAULT) height = hHint;", "-    /* AW", "-\tXtWidgetGeometry result = new XtWidgetGeometry ();", "-\tresult.request_mode = OS.CWWidth | OS.CWHeight;", "-\tint [] argList2 = {OS.XmNrecomputeSize, 1};", "-\tOS.XtSetValues(handle, argList2, argList2.length / 2);", "-\tOS.XtQueryGeometry (handle, null, result);", "-\tint [] argList3 = {OS.XmNrecomputeSize, 0};", "-\tOS.XtSetValues(handle, argList3, argList3.length / 2);", "-\t*/", "-\tPoint result= MacUtil.computeSize(handle);", "-\tif ((style & SWT.PUSH) != 0) {", "-\t\tif (image != null) {\t// is a Bevel button!", "-\t\t\tRectangle bounds= image.getBounds();", "-\t\t\tresult.x= 4 + bounds.width + 4;", "-\t\t\tresult.y= 4 + bounds.height + 4;", "-\t\t} else {", "-\t\t\tString s= getText();", "-\t\t\tif (s != null && s.length() > 0) {", "-\t\t\t\tresult.x= result.x - 2*SPACE + 2*MARGIN;", "-\t\t\t\tresult.y= result.y + TOP_MARGIN + BOTTOM_MARGIN;", "+", "+\tint width = 0, height = 0;", "+", "+\tif (isImage && image != null) {", "+\t\tRectangle bounds = image.getBounds();", "+\t\twidth = bounds.width;", "+\t\theight = bounds.height;", "+\t} else {", "+\t\tint [] ptr = new int [1];", "+\t\tOS.CopyControlTitleAsCFString(handle, ptr);", "+\t\tif (ptr [0] != 0) {", "+\t\t\tif (font == null) {", "+\t\t\t\torg.eclipse.swt.internal.carbon.Point ioBounds = new org.eclipse.swt.internal.carbon.Point ();", "+\t\t\t\tshort [] baseLine = new short [1];", "+\t\t\t\tOS.GetThemeTextDimensions(ptr [0], (short)OS.kThemePushButtonFont, OS.kThemeStateActive, false, ioBounds, baseLine);", "+\t\t\t\twidth = ioBounds.h;", "+\t\t\t\theight = ioBounds.v;", "+\t\t\t} else {", "+\t\t\t\t// NEEDS WORK - alternatively we could use GetThemeTextDimensions with OS.kThemeCurrentPortFont", "+\t\t\t\tint length = OS.CFStringGetLength (ptr [0]);", "+\t\t\t\tchar [] buffer = new char [length];", "+\t\t\t\tCFRange range = new CFRange ();", "+\t\t\t\trange.length = length;", "+\t\t\t\tOS.CFStringGetCharacters (ptr [0], range, buffer);", "+\t\t\t\tString string = new String (buffer);", "+\t\t\t\tGC gc = new GC (this);", "+\t\t\t\tPoint extent = gc.stringExtent (string);", "+\t\t\t\tgc.dispose ();", "+\t\t\t\twidth = extent.x;", "+\t\t\t\theight = extent.y;", "+\t\t\tOS.CFRelease (ptr [0]);", "+\t\t} else {", "+\t\t\twidth = DEFAULT_WIDTH;", "+\t\t\theight = DEFAULT_HEIGHT;", "-\twidth += result.x;", "-\theight += result.y;", "-\t/*", "-\t * Feature in Motif. If a button's labelType is XmSTRING but it", "-\t * has no label set into it yet, recomputing the size will", "-\t * not take into account the height of the font, as we would", "-\t * like it to. Take care of this case.", "-\t */", "-    /* AW", "-\tint [] argList = {OS.XmNlabelType, 0};", "-\tOS.XtGetValues (handle, argList, argList.length / 2);", "-\tif (argList [1] == OS.XmSTRING) {", "-\t\tint [] argList1 = {OS.XmNlabelString, 0};", "-\t\tOS.XtGetValues (handle, argList1, argList1.length / 2);", "-\t\tint xmString = argList1 [1];", "-\t\tif (OS.XmStringEmpty (xmString)) height += getFontHeight ();", "-\t}", "-\t*/", "-\tif (wHint != SWT.DEFAULT || hHint != SWT.DEFAULT) {", "-\t\t/* AW", "-\t\tint [] argList4 = new int [] {OS.XmNmarginLeft, 0, OS.XmNmarginRight, 0, OS.XmNmarginTop, 0, OS.XmNmarginBottom, 0};", "-\t\tOS.XtGetValues (handle, argList4, argList4.length / 2);", "-\t\tif (wHint != SWT.DEFAULT) width = wHint + argList4 [1] + argList4 [3] + (border * 2);", "-\t\tif (hHint != SWT.DEFAULT) height = hHint + argList4 [5] + argList4 [7] + (border * 2);", "-\t\t*/", "-\t\tint left= 0;", "-\t\tint right= 0;", "-\t\tint top= 0;", "-\t\tint bottom= 0;", "-\t\t", "-\t\tif (wHint != SWT.DEFAULT) width = wHint + left + right;", "-\t\tif (hHint != SWT.DEFAULT) height = hHint + top + bottom;", "-\t}", "-\t\t", "-\treturn new Point(width, height);", "-}", "+\tif ((style & (SWT.CHECK | SWT.RADIO)) != 0) {", "+\t\tint [] outMetric = new int [1];", "+\t\tint metric = ((style & SWT.CHECK) != 0) ? OS.kThemeMetricCheckBoxWidth : OS.kThemeMetricRadioButtonWidth;", "+\t\tOS.GetThemeMetric (metric, outMetric);\t", "+ \t\twidth += outMetric [0] + 3; // +3 for gap between button and text/image", "+\t\theight = Math.max(outMetric [0], height);", "+\t} else {", "+\t\tif ((style & SWT.FLAT) != 0 || (style & SWT.TOGGLE) != 0) {", "+\t\t\twidth += 10;", "+\t\t\theight += 10;", "+\t\t} else {", "+\t\t\twidth += 28;", "+\t\t\theight += 8;", "+\t\t}", "+\t}", "+\t", "+\tRect inset = getInset ();", "+\twidth += inset.left + inset.right;", "+\theight += inset.top + inset.bottom;", "+\t", "+\t/*", "+\t * Feature in Mac OS X. Setting the width of a bevel button", "+\t * widget to less than 20 will fail.  This means you can not ", "+\t * make a button very small.  By forcing the width to be greater", "+\t * than or equal to 20, the height of the button can be made", "+\t * very small, even 0.", "+\t */", "+\twidth = Math.max(20, width);", "+\tint border = (style & SWT.PUSH) != 0 ? 2 : 0;", "+\tif (wHint != SWT.DEFAULT) width = wHint + (border * 2);", "+\tif (hHint != SWT.DEFAULT) height = hHint + (border * 2);", "+\treturn new Point (width, height);", "+}"]}], "num": 38171}