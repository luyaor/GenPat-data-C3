{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "5715a935e8c2bea305f344f5c2c1f643", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "67d72da70fa4388153350e053a25fcd8", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "0577307d31e48dc29b7c4e1d4dd5a260c1ff63d8", "commitAfterChange": "c589b83339477b9cd24d205bdab1caf2f61e909e", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 24, "signatureBeforeChange": " public FontMetrics getLineMetrics (int lineIndex)", "signatureAfterChange": " public FontMetrics getLineMetrics (int lineIndex)", "diff": ["-\t\tint ascent = this.ascent, descent = this.descent, leading = 0, aveCharWidth = 0, height = 0;", "+\t\tint ascent = this.ascent, descent = this.descent, leading = 0, height = 0;", "-\t\t\tcheckItem(srcHdc, run);", "-\t\t\tOS.SelectObject(srcHdc, getItemFont(run));", "-\t\t\tOS.GetTextMetrics(srcHdc, lptm);", "-\t\t\tascent = Math.max(ascent, lptm.tmAscent);", "-\t\t\tdescent = Math.max(descent, lptm.tmDescent);", "-\t\t\theight = Math.max(height, lptm.tmHeight);", "-\t\t\tleading = Math.max(leading, lptm.tmInternalLeading);", "-\t\t\taveCharWidth += lptm.tmAveCharWidth;", "+\t\t\tif (run.style != null && run.style.metrics != null) {", "+\t\t\t\tGlyphMetrics glyphMetrics = run.style.metrics; ", "+\t\t\t\tascent = Math.max(ascent, glyphMetrics.ascent);", "+\t\t\t\tdescent = Math.max(descent, glyphMetrics.descent);", "+\t\t\t\theight= Math.max(height, glyphMetrics.ascent + glyphMetrics.descent);", "+\t\t\t} else {", "+\t\t\t\tcheckItem(srcHdc, run);", "+\t\t\t\tOS.SelectObject(srcHdc, getItemFont(run));", "+\t\t\t\tOS.GetTextMetrics(srcHdc, lptm);", "+\t\t\t\tif (lptm.tmAscent > ascent) {", "+\t\t\t\t\tascent = lptm.tmAscent;", "+\t\t\t\t\tleading = lptm.tmInternalLeading;", "+\t\t\t\t}", "+\t\t\t\tdescent = Math.max(descent, lptm.tmDescent);", "+\t\t\t\theight = Math.max(height, lptm.tmHeight);\t\t\t\t", "+\t\t\t}", "-\t\tlptm.tmAveCharWidth = aveCharWidth / lineRuns.length;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "51922a81badce8518c4b02c63ab119b6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "065f2bc5320f7e3787bb8aa3b1fe53b5a5c29579", "commitAfterChange": "8b27ce8989bee24d774f8bcd7584db23e2967779", "methodNumberBeforeChange": 37, "methodNumberAfterChange": 40, "signatureBeforeChange": "  void place (StyleItem run)", "signatureAfterChange": "  void place (StyleItem run)", "diff": ["-\tchar[] chars = new char[run.length];", "-\ttext.getChars(run.start, run.start + run.length, chars, 0);", "-\tint fontList = getItemFont(run).handle;", "-\tbyte[] buffer = Converter.wcsToMbcs(null, chars, true);", "-\tshort[] width = new short[1], height = new short[1];", "-\tint xmString = OS.XmStringCreateLocalized(buffer);", "-\tOS.XmStringExtent(fontList, xmString, width, height);", "-\trun.width = width[0] & 0xFFFF;", "-\trun.height = height[0] & 0xFFFF;", "-\trun.baseline = OS.XmStringBaseline(fontList, xmString);", "-\tOS.XmStringFree(xmString);", "+\tif (run.style != null && run.style.metrics != null) {", "+\t\tGlyphMetrics glyphMetrics = run.style.metrics;", "+\t\trun.width = glyphMetrics.width;", "+\t\trun.baseline = glyphMetrics.ascent;", "+\t\trun.height = glyphMetrics.ascent + glyphMetrics.descent;", "+\t} else {", "+\t\tchar[] chars = new char[run.length];", "+\t\ttext.getChars(run.start, run.start + run.length, chars, 0);", "+\t\tint fontList = getItemFont(run).handle;", "+\t\tbyte[] buffer = Converter.wcsToMbcs(null, chars, true);", "+\t\tshort[] width = new short[1], height = new short[1];", "+\t\tint xmString = OS.XmStringCreateLocalized(buffer);", "+\t\tOS.XmStringExtent(fontList, xmString, width, height);", "+\t\trun.width = width[0] & 0xFFFF;", "+\t\trun.height = height[0] & 0xFFFF;", "+\t\trun.baseline = OS.XmStringBaseline(fontList, xmString);", "+\t\tOS.XmStringFree(xmString);", "+\t}"]}], "num": 2640}