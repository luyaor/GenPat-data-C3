{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f377f9d6f02a1f38f61217f996f2ac96", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "28f1ff87b9514a0dbf8e755055695ab2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "ad7faf2331d33c7f68735fad69a11baef3deb362", "commitAfterChange": "169f4f3eed024153ecdf584bb52e3a3a80efd99a", "methodNumberBeforeChange": 47, "methodNumberAfterChange": 48, "signatureBeforeChange": "  public int internal_new_GC (GCData data)", "signatureAfterChange": "  public int internal_new_GC (GCData data)", "diff": ["+\tint visibleRgn = 0;", "+\tint window = OS.GetControlOwner (handle);", "+\tint port = OS.GetWindowPort (window);", "-\tint context = 0, paintRgn = 0, visibleRgn = 0;", "-\tif (data.paintEvent != 0) {", "-\t\tint theEvent = data.paintEvent;", "-\t\tOS.GetEventParameter (theEvent, OS.kEventParamCGContextRef, OS.typeCGContextRef, null, 4, null, buffer);", "-\t\tcontext = buffer [0];\t", "-\t\tOS.GetEventParameter (theEvent, OS.kEventParamRgnHandle, OS.typeQDRgnHandle, null, 4, null, buffer);", "-\t\tvisibleRgn = paintRgn = buffer [0];", "-\t}", "-\tif (context == 0) {", "-\t\tint window = OS.GetControlOwner (handle);", "-\t\tint port = OS.GetWindowPort (window);", "-\t\tOS.CreateCGContextForPort (port, buffer);", "-\t\tcontext = buffer [0];", "-\t\tif (context != 0) {", "-\t\t\tRect rect = new Rect ();", "-\t\t\tOS.GetControlBounds (handle, rect);", "-\t\t\tRect portRect = new Rect ();", "-\t\t\tOS.GetPortBounds (port, portRect);", "+\tOS.CreateCGContextForPort (port, buffer);", "+\tint context = buffer [0];", "+\tif (context != 0) {", "+\t\tRect rect = new Rect ();", "+\t\tOS.GetControlBounds (handle, rect);", "+\t\tRect portRect = new Rect ();", "+\t\tOS.GetPortBounds (port, portRect);", "+\t\tif (data != null && data.paintEvent != 0) {", "+\t\t\tvisibleRgn = data.visibleRgn;", "+\t\t} else {", "-\t\t\tif (paintRgn != 0) OS.SectRgn (paintRgn, visibleRgn, visibleRgn);", "-\t\t\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "-\t\t\tint portHeight = portRect.bottom - portRect.top;", "-\t\t\tOS.CGContextScaleCTM (context, 1, -1);", "-\t\t\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "+\t\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "+\t\tint portHeight = portRect.bottom - portRect.top;", "+\t\tOS.CGContextScaleCTM (context, 1, -1);", "+\t\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "-\t} else {", "-\t\tif (visibleRgn != paintRgn) OS.DisposeRgn (visibleRgn);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "75801d1a32a7de51af856ac021333fa9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "e013b3ce89b90da2153438b34cb43d48c16fa7a0", "commitAfterChange": "7a42cc92cd5348bbf0e0886e024fbfe78c23cc9c", "methodNumberBeforeChange": 51, "methodNumberAfterChange": 51, "signatureBeforeChange": " public int internal_new_GC (GCData data)", "signatureAfterChange": " public int internal_new_GC (GCData data)", "diff": ["-\tint visibleRgn = 0;", "-\tif (context != 0) {", "-\t\tRect rect = new Rect ();", "-\t\tRect portRect = new Rect ();", "-\t\tOS.GetControlBounds (handle, rect);", "-\t\tOS.GetPortBounds (port, portRect);", "-\t\tif (data != null && data.paintEvent != 0) {", "-\t\t\tvisibleRgn = data.visibleRgn;", "+\tif (context == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "+\tint visibleRgn = 0;", "+\tif (data != null && data.paintEvent != 0) {", "+\t\tvisibleRgn = data.visibleRgn;", "+\t} else {", "+\t\tif (getDrawCount (handle) > 0) {", "+\t\t\tvisibleRgn = OS.NewRgn ();", "-\t\t\tif (getDrawCount (handle) > 0) {", "-\t\t\t\tvisibleRgn = OS.NewRgn ();", "-\t\t\t} else {", "-\t\t\t\tvisibleRgn = getVisibleRegion (handle, true);", "-\t\t\t}", "-\t\t}", "-\t\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "-\t\tint portHeight = portRect.bottom - portRect.top;", "-\t\tOS.CGContextScaleCTM (context, 1, -1);", "-\t\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "-\t\tif (data != null) {", "-\t\t\tdata.portRect = portRect;", "-\t\t\tdata.controlRect = rect;", "+\t\t\tvisibleRgn = getVisibleRegion (handle, true);", "-\tif (context == 0) SWT.error (SWT.ERROR_NO_HANDLES);", "+\tRect rect = new Rect ();", "+\tRect portRect = new Rect ();", "+\tOS.GetControlBounds (handle, rect);", "+\tOS.GetPortBounds (port, portRect);", "+\tOS.ClipCGContextToRegion (context, portRect, visibleRgn);", "+\tint portHeight = portRect.bottom - portRect.top;", "+\tOS.CGContextScaleCTM (context, 1, -1);", "+\tOS.CGContextTranslateCTM (context, rect.left, -portHeight + rect.top);", "-\t\tdata.foreground = foreground != null ? foreground : new float [] {0, 0, 0, 1};", "+\t\tdata.foreground = foreground != null ? foreground : new float [] {0, 0, 0, 1};", "+\t\tdata.portRect = portRect;", "+\t\tdata.controlRect = rect;"]}], "num": 48511}