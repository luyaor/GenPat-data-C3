{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "1a5f88e62ae8dad087c356549e252160", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c4e06e327bf3b372c4c66fd091f32e2d", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/cocoa/org/eclipse/swt/dnd/DragSource.java", "commitBeforeChange": "71e1311cbbe9e51dc606d59ab142f6565e43ed78", "commitAfterChange": "a61fa95313d95821792a0e7db807eb55fb2cdae8", "methodNumberBeforeChange": 32, "methodNumberAfterChange": 32, "signatureBeforeChange": "  DNDEvent startDrag(Event dragEvent)", "signatureAfterChange": "  DNDEvent startDrag(Event dragEvent)", "diff": ["-\tTransfer fileTrans = null;", "-", "-\t\t\tif (transfer instanceof FileTransfer) {", "-\t\t\t\tfileTrans = transfer;", "-\t\t\t}\t\t\t", "-", "-\tif (nativeTypeArray != null)", "-\t\tdragBoard.declareTypes(nativeTypeArray, dragSourceDelegate);", "-", "-\tif (fileTrans != null) {", "-\t\tNSFileManager fileManager = NSFileManager.defaultManager();", "-\t\tint index = 0;", "-\t\tpaths = new NSString[4];", "-\t\texist = new boolean[4];", "-\t\tint[] types = fileTrans.getTypeIds();", "-\t\tTransferData transferData = new TransferData();", "-\t\ttransferData.type = types[0];", "-\t\tDNDEvent event2 = new DNDEvent();", "-\t\tevent2.widget = this;", "-\t\tevent2.time = (int)System.currentTimeMillis(); ", "-\t\tevent2.dataType = transferData; ", "-\t\tnotifyListeners(DND.DragSetData, event2);", "-\t\tif (event2.data != null) {", "-\t\t\tfor (int j = 0; j < types.length; j++) {", "-\t\t\t\ttransferData.type = types[j];", "-\t\t\t\tfileTrans.javaToNative(event2.data, transferData);", "-\t\t\t\tif (transferData.data != null) {", "-\t\t\t\t\tNSArray array = (NSArray) transferData.data;", "-\t\t\t\t\tint count = (int) /*64*/ array.count();", "-\t\t\t\t\tfor (int i = 0; i < count; i++) {", "-\t\t\t\t\t\tif (index == paths.length) {", "-\t\t\t\t\t\t\tNSString newPaths [] = new NSString[paths.length + 4];", "-\t\t\t\t\t\t\tSystem.arraycopy(paths, 0, newPaths, 0, index);", "-\t\t\t\t\t\t\tpaths = newPaths;", "-\t\t\t\t\t\t\tboolean newExists[] = new boolean [paths.length];", "-\t\t\t\t\t\t\tSystem.arraycopy(exist, 0, newExists, 0, index);", "-\t\t\t\t\t\t\texist = newExists;", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tNSString filePath = new NSString(array.objectAtIndex(i));", "-\t\t\t\t\t\tpaths[index] = filePath;", "-\t\t\t\t\t\texist[index] = fileManager.fileExistsAtPath(filePath);", "-\t\t\t\t\t\tindex++;", "-\t\t\t\t\t}", "-\t\t\t\t\tdragBoard.setPropertyList(transferData.data, OS.NSFilenamesPboardType);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "-\t}", "+\tdragBoard.declareTypes(nativeTypeArray, dragSourceDelegate);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f32a48d35516eb1ace7349839ef584d8", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/cocoa/org/eclipse/swt/dnd/DragSource.java", "commitBeforeChange": "df12063c60592b4f4da5ddbab8d1379ea9ab591b", "commitAfterChange": "2c1c08eda487ee5680bf810a1f25bde3ad041839", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 9, "signatureBeforeChange": "  void drag(Event dragEvent)", "signatureAfterChange": "  void drag(Event dragDetectEvent)", "diff": ["-void drag(Event dragEvent) {", "-\tDNDEvent event = new DNDEvent();", "-\tevent.widget = this;", "-\tevent.x = dragEvent.x;", "-\tevent.y = dragEvent.y;", "-\tevent.time = dragEvent.time;", "-\tevent.doit = true;", "-\tnotifyListeners(DND.DragStart, event);", "-\tif (!event.doit || transferAgents == null || transferAgents.length == 0) return;", "+void drag(Event dragDetectEvent) {", "-\tNSPasteboard dragBoard = NSPasteboard.pasteboardWithName(OS.NSDragPboard);", "-\tNSMutableArray nativeTypeArray = NSMutableArray.arrayWithCapacity(10);", "-\tTransfer fileTrans = null;", "+\tDNDEvent event = startDrag(dragDetectEvent);", "+\tif (event == null) return;", "-\tfor (int i = 0; i < transferAgents.length; i++) {", "-\t\tTransfer transfer = transferAgents[i];", "-\t\tif (transfer != null) {", "-\t\t\tString[] typeNames = transfer.getTypeNames();", "-", "-\t\t\tfor (int j = 0; j < typeNames.length; j++) {", "-\t\t\t\tnativeTypeArray.addObject(NSString.stringWith(typeNames[j]));", "-\t\t\t}\t", "-", "-\t\t\tif (transfer instanceof FileTransfer) {", "-\t\t\t\tfileTrans = transfer;", "-\t\t\t}\t\t\t", "-\t\t}\t\t", "-\t}", "-", "-\tif (nativeTypeArray != null)", "-\t\tdragBoard.declareTypes(nativeTypeArray, dragSourceDelegate);", "-", "-\tif (fileTrans != null) {", "-\t\tint[] types = fileTrans.getTypeIds();", "-\t\tTransferData transferData = new TransferData();", "-\t\ttransferData.type = types[0];", "-\t\tDNDEvent event2 = new DNDEvent();", "-\t\tevent2.widget = this;", "-\t\tevent2.time = (int)System.currentTimeMillis(); ", "-\t\tevent2.dataType = transferData; ", "-\t\tnotifyListeners(DND.DragSetData, event2);", "-\t\tif (event2.data != null) {", "-\t\t\tfor (int j = 0; j < types.length; j++) {", "-\t\t\t\ttransferData.type = types[j];", "-\t\t\t\tfileTrans.javaToNative(event2.data, transferData);", "-\t\t\t\tif (transferData.data != null) {", "-\t\t\t\t\tdragBoard.setPropertyList(transferData.data, OS.NSFilenamesPboardType);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "-\t}", "-", "-", "-\t// Save off the drag operations -- AppKit will call back to us to request them during the drag.", "-\tdragOperations = opToOsOp(getStyle());", "-\t\tdragStarted = false;", "-\t\tcontrol.view.dragImage(dragImage, viewPt, ignored, NSApplication.sharedApplication().currentEvent(), dragBoard, dragSourceDelegate, true);", "-", "-\t\t// If we actually dragged, dragStarted will be set to true in dragImage:beganAt:", "-\t\t// If not, send a DragEnd indicating nothing happened.", "-\t\tif (!dragStarted) {", "-\t\t\tevent = new DNDEvent();", "-\t\t\tevent.widget = this;", "-\t\t\tevent.time = (int)System.currentTimeMillis();", "-\t\t\tevent.doit = false;", "-\t\t\tevent.detail = DND.DROP_NONE; ", "-\t\t\tnotifyListeners(DND.DragEnd, event);", "-\t\t}", "+\t\tcontrol.view.dragImage(dragImage, viewPt, ignored, NSApplication.sharedApplication().currentEvent(), NSPasteboard.pasteboardWithName(OS.NSDragPboard), dragSourceDelegate, true);", "+\t\t"]}], "num": 23145}