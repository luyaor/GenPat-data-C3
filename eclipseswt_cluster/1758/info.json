{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e5d29064e96a779f89e7adc3d99fe3f9", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc288fbe38ed82b5f67f14bd0a822b0e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "74c0e792b346f85e2b9067f710416658485a9a3b", "commitAfterChange": "e188a1e4ca35b8a449353a5ac187e7a405693faf", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " public FontData[] getFontData()", "signatureAfterChange": " public FontData[] getFontData()", "diff": ["-\tNSString family = handle.familyName();", "-\tString name = family.getString();", "-\tNSString str = handle.fontName();", "-\tString nsName = str.getString();", "-\tint style = SWT.NORMAL;", "-\tif (nsName.indexOf(\"Italic\") != -1) style |= SWT.ITALIC;", "-\tif (nsName.indexOf(\"Bold\") != -1) style |= SWT.BOLD;", "-\tPoint dpi = device.dpi, screenDPI = device.getScreenDPI();", "-\tFontData data = new FontData(name, (float)/*64*/handle.pointSize() * screenDPI.y / dpi.y, style);", "-\tdata.nsName = nsName;", "-\treturn new FontData[]{data};", "+\tNSAutoreleasePool pool = null;", "+\tif (!NSThread.isMainThread()) pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tNSString family = handle.familyName();", "+\t\tString name = family.getString();", "+\t\tNSString str = handle.fontName();", "+\t\tString nsName = str.getString();", "+\t\tint style = SWT.NORMAL;", "+\t\tif (nsName.indexOf(\"Italic\") != -1) style |= SWT.ITALIC;", "+\t\tif (nsName.indexOf(\"Bold\") != -1) style |= SWT.BOLD;", "+\t\tPoint dpi = device.dpi, screenDPI = device.getScreenDPI();", "+\t\tFontData data = new FontData(name, (float)/*64*/handle.pointSize() * screenDPI.y / dpi.y, style);", "+\t\tdata.nsName = nsName;", "+\t\treturn new FontData[]{data};", "+\t} finally {", "+\t\tif (pool != null) pool.release();", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1070197a1eae4e708a461574b3ea15ed", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Font.java", "commitBeforeChange": "74c0e792b346f85e2b9067f710416658485a9a3b", "commitAfterChange": "e188a1e4ca35b8a449353a5ac187e7a405693faf", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Font(Device device, String name, int height, int style)", "signatureAfterChange": " public Font(Device device, String name, int height, int style)", "diff": ["-\tinit(name, height, style, null);", "-\tinit();", "+\tNSAutoreleasePool pool = null;", "+\tif (!NSThread.isMainThread()) pool = (NSAutoreleasePool) new NSAutoreleasePool().alloc().init();", "+\ttry {", "+\t\tinit(name, height, style, null);", "+\t\tinit();", "+\t} finally {", "+\t\tif (pool != null) pool.release();", "+\t}"]}], "num": 1758}