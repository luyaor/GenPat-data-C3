{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ab590abe7062de6c515218b54c5de542", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f4df765be5ba699493ec8c72991cd16c", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/TabItem.java", "commitBeforeChange": "c270b603c7dfafdbba4594330199062a98e24cfe", "commitAfterChange": "1bf0f295caa27c5dbd58db068182111fea948e70", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 13, "signatureBeforeChange": " public void setText (String string)", "signatureAfterChange": " public void setText (String string)", "diff": ["-\t/*", "-\t* Bug in Windows.  In version 6.00 of COMCTL32.DLL, tab", "-\t* items with an image and a label that includes '&' cause", "-\t* the tab to draw incorrectly (even when doubled '&&').", "-\t* The image overlaps the label.  The fix is to remove", "-\t* all '&' characters from the string. ", "-\t*/", "-\tif (OS.COMCTL32_MAJOR >= 6 && image != null) {", "-\t\tif (text.indexOf ('&') != -1) {", "-\t\t\tint length = string.length ();", "-\t\t\tchar[] text = new char [length];", "-\t\t\tstring.getChars ( 0, length, text, 0);", "-\t\t\tint i = 0, j = 0;", "-\t\t\tfor (i=0; i<length; i++) {", "-\t\t\t\tif (text[i] != '&') text [j++] = text [i];", "-\t\t\t}", "-\t\t\tif (j < i) string = new String (text, 0, j);", "-\t\t}", "-\t}", "-\tint hwnd = parent.handle;", "-\tint hHeap = OS.GetProcessHeap ();", "-\tTCHAR buffer = new TCHAR (parent.getCodePage (), string, true);", "-\tint byteCount = buffer.length () * TCHAR.sizeof;", "-\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, byteCount);", "-\tOS.MoveMemory (pszText, buffer, byteCount); ", "-\tTCITEM tcItem = new TCITEM ();", "-\ttcItem.mask = OS.TCIF_TEXT;", "-\ttcItem.pszText = pszText;", "-\tOS.SendMessage (hwnd, OS.TCM_SETITEM, index, tcItem);", "-\tOS.HeapFree (hHeap, 0, pszText);", "+\t_setText (index, string);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "771fc6cf19379f33983e13a804cf7ee1", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/List.java", "commitBeforeChange": "d4eb14ad4f7b1074d4935c2b9211f94b2750616d", "commitAfterChange": "7d562ae8941ad5655a314eac8dd19e3b2aaef50c", "methodNumberBeforeChange": 40, "methodNumberAfterChange": 40, "signatureBeforeChange": "\r public void setItems (String [] items)", "signatureAfterChange": "\r public void setItems (String [] items)", "diff": ["-\tint length = items.length, guess = 32;\r", "+\tint length = items.length;\r", "-\tOS.SendMessage (handle, OS.LB_INITSTORAGE, length, length * guess);\r", "+\tOS.SendMessage (handle, OS.LB_INITSTORAGE, length, length * 32);\r", "-\tchar [] unicode = new char [guess];\r", "-\tbyte [] mbcs = new byte [unicode.length * 2];\r", "+\tint cp = getCodePage ();\r", "-\t\tint nUnicode = string.length ();\r", "-\t\tif (nUnicode >= unicode.length) {\r", "-\t\t\tunicode = new char [nUnicode + 1];\r", "-\t\t\tmbcs = new byte [unicode.length * 2];\r", "-\t\t}\r", "-\t\tstring.getChars (0, nUnicode, unicode, 0);\r", "-\t\tunicode [nUnicode++] = 0;\r", "-\t\tint nMbcs = nUnicode, i = 0;\r", "-\t\twhile (i < nUnicode) {\r", "-\t\t\tif (unicode [i] > 0x7F) break;\r", "-\t\t\tmbcs [i] = (byte) unicode [i];\r", "-\t\t\ti++;\r", "-\t\t}\r", "-\t\tif (i < nUnicode) {\r", "-\t\t\tint cp = getCodePage ();\r", "-\t\t\tnMbcs = OS.WideCharToMultiByte (cp, 0, unicode, nUnicode, mbcs, nUnicode * 2, null, null);\r", "-\t\t}\r", "-\t\tint result = OS.SendMessage (handle, OS.LB_ADDSTRING, 0, mbcs);\r", "+\t\tTCHAR buffer = new TCHAR (cp, string, true);\r", "+\t\tint result = OS.SendMessage (handle, OS.LB_ADDSTRING, 0, buffer);\r", "-\t\t\tOS.DrawText (hDC, mbcs, nMbcs - 1, rect, flags);\r", "+\t\t\tOS.DrawText (hDC, buffer, buffer.length (), rect, flags);\r"]}], "num": 32288}