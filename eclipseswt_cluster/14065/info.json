{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c6aa20f6af1dcd5df1b12d1128ffcd29", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "70b7f386f1a746c03fa4f41018d85c03", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/TreeItem.java", "commitBeforeChange": "b89523d4edc8df3c49cc648f90babb57387f7ec7", "commitAfterChange": "e3058890967ce8da780b8d3d7d26f660e91e1175", "methodNumberBeforeChange": 46, "methodNumberAfterChange": 46, "signatureBeforeChange": " public void setExpanded (boolean expanded)", "signatureAfterChange": " public void setExpanded (boolean expanded)", "diff": ["-\t* an item, the widget scrolls to show the root item and", "-\t* the newly expanded items.  While not strictly incorrect,", "+\t* an item, the widget scrolls to show the item and the", "+\t* newly expanded items.  While not strictly incorrect,", "-\t\tOS.SendMessage (hwnd, OS.TVM_SELECTITEM, OS.TVGN_FIRSTVISIBLE, hTopItem);", "-\t\tif (oldInfo != null) {", "+\t\tboolean collapsed = false;", "+\t\tif (!expanded) {", "+\t\t\tRECT rect = new RECT ();", "+\t\t\trect.left = hTopItem;", "+\t\t\twhile (hTopItem != 0 && OS.SendMessage (hwnd, OS.TVM_GETITEMRECT, 0, rect) == 0) {", "+\t\t\t\thTopItem = rect.left = OS.SendMessage (hwnd, OS.TVM_GETNEXTITEM, OS.TVGN_PARENT, hTopItem);", "+\t\t\t\tcollapsed = true;", "+\t\t\t}", "+\t\t}", "+\t\tboolean scrolled = true;", "+\t\tif (hTopItem != 0) {", "+\t\t\tOS.SendMessage (hwnd, OS.TVM_SELECTITEM, OS.TVGN_FIRSTVISIBLE, hTopItem);", "+\t\t\tscrolled = hTopItem != OS.SendMessage (hwnd, OS.TVM_GETNEXTITEM, OS.TVGN_FIRSTVISIBLE, 0);", "+\t\t}", "+\t\tif (!collapsed && !scrolled && oldInfo != null) {", "-\t\t\tboolean fixRedraw = false;", "-\t\t\tif (hTopItem == OS.SendMessage (hwnd, OS.TVM_GETNEXTITEM, OS.TVGN_FIRSTVISIBLE, 0)) {", "+\t\t\tboolean fixScroll = false;", "+\t\t\tif (!collapsed && !scrolled) {", "-\t\t\t\tfixRedraw = index == count;", "+\t\t\t\tfixScroll = index == count;", "-\t\t\tif (fixRedraw) {", "+\t\t\tif (fixScroll) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1951dd52c8963f88447a535a8185a74c", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/TreeItem.java", "commitBeforeChange": "cab2e6ac3392e3b13d9331de0b8b2739782ad19a", "commitAfterChange": "043c304583a23ffa2293051da40878601bc19ea8", "methodNumberBeforeChange": 46, "methodNumberAfterChange": 46, "signatureBeforeChange": " public void setExpanded (boolean expanded)", "signatureAfterChange": " public void setExpanded (boolean expanded)", "diff": ["+\tRECT oldRect = null;", "-\tint count = 0, hTopItem = OS.SendMessage (hwnd, OS.TVM_GETNEXTITEM, OS.TVGN_FIRSTVISIBLE, 0);", "+\tint count = 0, hBottomItem = 0;", "+\tint hTopItem = OS.SendMessage (hwnd, OS.TVM_GETNEXTITEM, OS.TVGN_FIRSTVISIBLE, 0);", "+\t\t\t\thBottomItem = hItem;", "+\t\t\t\toldRect = new RECT ();", "+\t\t\t\tOS.GetClientRect (hwnd, oldRect);", "-\t\t\t\tint hItem = hTopItem, index = 0;", "-\t\t\t\twhile (hItem != 0 && index < count) {", "-\t\t\t\t\tRECT rect = new RECT ();", "-\t\t\t\t\trect.left = hItem;", "-\t\t\t\t\tif (OS.SendMessage (hwnd, OS.TVM_GETITEMRECT, 1, rect) != 0) {", "-\t\t\t\t\t\tif (!OS.EqualRect (rect, rects [index])) {", "-\t\t\t\t\t\t\tbreak;", "+\t\t\t\tRECT newRect = new RECT ();", "+\t\t\t\tOS.GetClientRect (hwnd, newRect);", "+\t\t\t\tif (OS.EqualRect (oldRect, newRect)) {", "+\t\t\t\t\tint hItem = hTopItem, index = 0;", "+\t\t\t\t\twhile (hItem != 0 && index < count) {", "+\t\t\t\t\t\tRECT rect = new RECT ();", "+\t\t\t\t\t\trect.left = hItem;", "+\t\t\t\t\t\tif (OS.SendMessage (hwnd, OS.TVM_GETITEMRECT, 1, rect) != 0) {", "+\t\t\t\t\t\t\tif (!OS.EqualRect (rect, rects [index])) {", "+\t\t\t\t\t\t\t\tbreak;", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\thItem = OS.SendMessage (hwnd, OS.TVM_GETNEXTITEM, OS.TVGN_NEXTVISIBLE, hItem);", "+\t\t\t\t\t\tindex++;", "-\t\t\t\t\thItem = OS.SendMessage (hwnd, OS.TVM_GETNEXTITEM, OS.TVGN_NEXTVISIBLE, hItem);", "-\t\t\t\t\tindex++;", "+\t\t\t\t\tfixScroll = index == count && hItem == hBottomItem;", "-\t\t\t\tfixScroll = index == count;"]}], "num": 14065}