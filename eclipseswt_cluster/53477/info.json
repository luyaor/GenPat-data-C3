{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "36d8484edd9728fad6c5decdf5c8db54", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "33a1d327e26da32d3a626c5fd3f0039b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "bb717d59b79c0a782a38ba12420d934c86085f62", "commitAfterChange": "5dc510036d3f589b77ab51681b222b8b9e1a0c26", "methodNumberBeforeChange": 79, "methodNumberAfterChange": 79, "signatureBeforeChange": " public void setSelection (TreeItem [] items)", "signatureAfterChange": " public void setSelection (TreeItem [] items)", "diff": ["-//\tint length = items.length;", "-//\tif (length == 0 || ((style & SWT.SINGLE) != 0 && length > 1)) return;", "-//\tint count = 0;", "-//\tint[] ids = new int [length];", "-//\tfor (int i=0; i<length; i++) {", "-//\t\tif (items [i] != null) {", "-//\t\t\tif (items [i].isDisposed ()) error (SWT.ERROR_INVALID_ARGUMENT);", "-//\t\t\tids [count++] = items [i].id;", "-//\t\t\tshowItem (items [i], false);", "-//\t\t}", "-//\t}", "-//\tignoreSelect = true;", "-//\t/*", "-//\t* Bug in the Macintosh.  When the DataBroswer selection flags includes", "-//\t* both kDataBrowserNeverEmptySelectionSet and kDataBrowserSelectOnlyOne,", "-//    * two items are selected when SetDataBrowserSelectedItems() is called", "-//    * with kDataBrowserItemsAssign to assign a new seletion despite the fact", "-//\t* that kDataBrowserSelectOnlyOne was specified.  The fix is to save and", "-//\t* restore kDataBrowserNeverEmptySelectionSet around each call to", "-//\t* SetDataBrowserSelectedItems().", "-//\t*/", "-//\tint [] selectionFlags = null;", "-//\tif ((style & SWT.SINGLE) != 0) {", "-//\t\tselectionFlags = new int [1];", "-//\t\tOS.GetDataBrowserSelectionFlags (handle, selectionFlags);", "-//\t\tOS.SetDataBrowserSelectionFlags (handle, selectionFlags [0] & ~OS.kDataBrowserNeverEmptySelectionSet);", "-//\t}", "-//\tOS.SetDataBrowserSelectedItems (handle, count, ids, OS.kDataBrowserItemsAssign);", "-//\tif ((style & SWT.SINGLE) != 0) {", "-//\t\tOS.SetDataBrowserSelectionFlags (handle, selectionFlags [0]);", "-//\t}", "-//\tignoreSelect = false;", "-//\tif (length > 0) {", "-//\t\tint index = -1;", "-//\t\tfor (int i=0; i<items.length; i++) {", "-//\t\t\tif (items [i] != null) {", "-//\t\t\t\tindex = i;", "-//\t\t\t\tbreak;", "-//\t\t\t}", "-//\t\t}", "-//\t\tif (index != -1) showItem (items [index], true);", "-//\t}", "+\tint length = items.length;", "+\tif (length == 0 || ((style & SWT.SINGLE) != 0 && length > 1)) return;", "+\tNSOutlineView outlineView = (NSOutlineView) view;", "+\tNSMutableIndexSet rows = (NSMutableIndexSet) new NSMutableIndexSet ().alloc ().init ();", "+\trows.autorelease ();", "+\tfor (int i=0; i<length; i++) {", "+\t\tif (items [i] != null) {", "+\t\t\tif (items [i].isDisposed ()) error (SWT.ERROR_INVALID_ARGUMENT);", "+\t\t\tTreeItem item = items [i];", "+\t\t\tshowItem (items [i], false);", "+\t\t\tint row = outlineView.rowForItem (item.handle);", "+\t\t\trows.addIndex (row);", "+\t\t}", "+\t}", "+\tignoreSelect = true;", "+\toutlineView.selectRowIndexes (rows, false);", "+\tignoreSelect = false;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "658e01bd080a687462cb32c021f110ff", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Tree.java", "commitBeforeChange": "b16a097ce1f227d4fd237cb6f8c0ba950eb50b9e", "commitAfterChange": "ad9e4c7cb4e85f9de20630936ecc2b154a562c71", "methodNumberBeforeChange": 57, "methodNumberAfterChange": 66, "signatureBeforeChange": "  int itemNotificationProc (int browser, int id, int message)", "signatureAfterChange": "  int itemNotificationProc (int browser, int id, int message)", "diff": ["-\tint index = id - 1;", "-\tif (!(0 <= index && index < items.length)) return OS.noErr;", "-\tTreeItem item = items [index];", "+\tif (!(0 < id && id <= items.length)) return OS.noErr;", "-\t\t\t\tevent.item = item;", "+\t\t\t\tevent.item = _getItem (id, true);", "-\t\t\tevent.item = item;", "+\t\t\tevent.item = _getItem (id, true);", "-", "-\t\t\t\t\t* Bug in the Macintosh.  When the DataBroswer selection flags includes", "+\t\t\t\t\t* Bug in the Macintosh.  When the DataBrowser selection flags includes", "-\t\t\t\t  * two items are selected when SetDataBrowserSelectedItems() is called", "-\t\t\t\t  * with kDataBrowserItemsAssign to assign a new seletion despite the fact", "+\t\t\t\t\t* two items are selected when SetDataBrowserSelectedItems() is called", "+\t\t\t\t\t* with kDataBrowserItemsAssign to assign a new seletion despite the fact", "-\t\t\t\t\tevent.item = item;", "+\t\t\t\t\tevent.item = _getItem (id, true);", "+\t\t\tTreeItem item = _getItem (id, true);", "+\t\t\tint [] ids = item.childIds;", "+\t\t\tif (ids != null) {", "+\t\t\t\tfor (int i=0; i<item.itemCount; i++) {", "+\t\t\t\t\tint childId = ids [i];", "+\t\t\t\t\tif (childId != 0) {", "+\t\t\t\t\t\tif (childId > items.length || items [childId - 1] == null) ids [i] = 0;", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t}", "-\t\t\tsetScrollWidth ();", "+\t\t\tsetScrollWidth (true);", "+\t\t\tTreeItem item = _getItem (id, true);", "-\t\t\tint count = 0;", "-\t\t\tfor (int i=0; i<items.length; i++) {", "-\t\t\t\tif (items [i] != null && items [i].parentItem == item) count++;", "+\t\t\tint newIdCount = 0;", "+\t\t\tfor (int i=0; i<item.itemCount; i++) {", "+\t\t\t\tif (item.childIds [i] == 0) newIdCount++;", "-\t\t\tTreeItem [] newItems = new TreeItem [count];", "-\t\t\tint [] ids = new int [count];", "-\t\t\tfor (int i=0; i<items.length; i++) {", "-\t\t\t\tif (items [i] != null && items [i].parentItem == item) {", "-\t\t\t\t\tids [items [i].index] = items [i].id;", "-\t\t\t\t\tnewItems [items [i].index] = items [i];", "+\t\t\tif (newIdCount > 0) {", "+\t\t\t\tint [] newIds = _getIds (newIdCount);", "+\t\t\t\tint index = 0;", "+\t\t\t\tfor (int i=0; i<item.itemCount; i++) {", "+\t\t\t\t\tif (item.childIds [i] == 0) item.childIds [i] = newIds [index++];   ", "-\t\t\tOS.AddDataBrowserItems (handle, id, ids.length, ids, OS.kDataBrowserItemNoProperty);", "-\t\t\tvisibleCount += ids.length;", "-\t\t\tsetScrollWidth (newItems, false);", "+\t\t\tOS.AddDataBrowserItems (handle, id, item.itemCount, item.childIds, OS.kDataBrowserItemNoProperty);", "+\t\t\tvisibleCount += item.itemCount;", "+\t\t\tsetScrollWidth (false);"]}], "num": 53477}