{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "adde287c3b7830ec8d7c0156f713f8ce", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4668736055e17dab2b81e5838483d3d0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "d4eb14ad4f7b1074d4935c2b9211f94b2750616d", "commitAfterChange": "7d562ae8941ad5655a314eac8dd19e3b2aaef50c", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 23, "signatureBeforeChange": "\r public MenuItem [] getItems ()", "signatureAfterChange": "\r public MenuItem [] getItems ()", "diff": ["-\tint count = OS.GetMenuItemCount (handle);\r", "-\tMenuItem [] items = new MenuItem [count];\r", "-\tif (items.length == 0) return items;\r", "+\tint index = 0;\r", "+\tint length = OS.IsWinCE ? 4 : OS.GetMenuItemCount (handle);\r", "+\tMenuItem [] items = new MenuItem [length];\r", "-\tfor (int i=0; i<count; i++) {\r", "-\t\tif (OS.GetMenuItemInfo (handle, i, true, info)) {\r", "-\t\t\titems [i] = parent.findMenuItem (info.wID);\r", "+\twhile (OS.GetMenuItemInfo (handle, index, true, info)) {\r", "+\t\tif (index == items.length) {\r", "+\t\t\tMenuItem [] newItems = new MenuItem [index + 4];\r", "+\t\t\tSystem.arraycopy (newItems, 0, items, 0, index);\r", "+\t\t\titems = newItems;\r", "+\t\titems [index++] = parent.findMenuItem (info.wID);\r", "-\treturn items;\r", "+\tif (index == items.length) return items;\r", "+\tMenuItem [] result = new MenuItem [index];\r", "+\tSystem.arraycopy (result, 0, items, 0, index);\r", "+\treturn result;\r", "+}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4ae36ee4f9b5630e74bf0e43ff75ab28", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "df118cfee649740c3cfc2ab13c4b8610502d4d4e", "commitAfterChange": "49ca7a603b8ba36618c52950618a40e222d8f456", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 21, "signatureBeforeChange": " public MenuItem [] getItems ()", "signatureAfterChange": " public MenuItem [] getItems ()", "diff": ["-\tint length = OS.CountMenuItems (handle);", "+\tint index = 0;", "+\tint length = OS.CountMenuItems(handle);", "-\tint [] outCommandID= new int [1];\t", "-\tfor (int i=0; i<items.length; i++) {", "-\t\tif (OS.GetMenuItemCommandID (handle, (short)(i+1), outCommandID) != OS.noErr) {", "-\t\t\terror (SWT.ERROR_CANNOT_GET_ITEM);", "+\t/* AW", "+\tMENUITEMINFO info = new MENUITEMINFO ();", "+\tinfo.cbSize = MENUITEMINFO.sizeof;", "+\tinfo.fMask = OS.MIIM_ID;", "+\twhile (OS.GetMenuItemInfo (handle, index, true, info)) {", "+\t*/", "+\tint[] commandID= new int[1];\t", "+\twhile (OS.GetMenuItemCommandID(handle, (short)(index+1), commandID) == OS.noErr) {", "+\t\tif (index == items.length) {", "+\t\t\tMenuItem [] newItems = new MenuItem [index + 4];", "+\t\t\tSystem.arraycopy (newItems, 0, items, 0, index);", "+\t\t\titems = newItems;", "-\t\titems [i] = parent.findMenuItem (outCommandID [0]);", "+\t\titems [index] = parent.findMenuItem (commandID [0]);", "+\t\tif (items [index] != null)", "+\t\t\tindex++;", "-\treturn items;", "+\tif (index == items.length) return items;", "+\tMenuItem [] result = new MenuItem [index];", "+\tSystem.arraycopy (result, 0, items, 0, index);", "+\treturn result;"]}], "num": 56322}