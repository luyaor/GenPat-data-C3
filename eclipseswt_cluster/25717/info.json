{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6b745d32feaa52efb4db9aba0fbf0ef6", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ffa81b19b8c6e294ac3626c3aa951bd2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "79cbb8566728e79bfa5ec879b944eb52f93e4274", "commitAfterChange": "2eda618caa8a3739d0982addf2afc5298cbf130e", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": " public void drawString(String string, int x, int y, boolean isTransparent)", "signatureAfterChange": " public void drawString(String string, int x, int y, boolean isTransparent)", "diff": ["-\tchar[] buffer = new char[length];", "-\tstring.getChars(0, length, buffer, 0);", "-\tint ptr = OS.NewPtr(length * 2);", "-\tOS.memcpy(ptr, buffer, length * 2);", "-\tOS.ATSUSetTextPointerLocation(data.layout, ptr, 0, length, length);", "-\tFont font = data.font;", "-\tint atsuiStyle = font.atsuiStyle != 0 ? font.atsuiStyle : data.atsuiStyle;", "-\tOS.ATSUSetRunStyle(data.layout, atsuiStyle, 0, length);", "+\tif (string != data.string) {", "+\t\tif (data.stringPtr != 0) OS.DisposePtr(data.stringPtr);", "+\t\tchar[] buffer = new char[length];", "+\t\tstring.getChars(0, length, buffer, 0);", "+\t\tFont font = data.font;", "+\t\tint atsuiStyle = font.atsuiStyle != 0 ? font.atsuiStyle : data.atsuiStyle;", "+\t\tint ptr = OS.NewPtr(length * 2);", "+\t\tOS.memcpy(ptr, buffer, length * 2);", "+\t\tOS.ATSUSetTextPointerLocation(data.layout, ptr, 0, length, length);", "+\t\tOS.ATSUSetRunStyle(data.layout, atsuiStyle, 0, length);", "+\t\tdata.string = string;", "+\t\tdata.stringPtr = ptr;", "+\t}", "-\tOS.DisposePtr(ptr);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "586d55673f02d56583cac93b53168118", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "79cbb8566728e79bfa5ec879b944eb52f93e4274", "commitAfterChange": "2eda618caa8a3739d0982addf2afc5298cbf130e", "methodNumberBeforeChange": 57, "methodNumberAfterChange": 57, "signatureBeforeChange": " public Point stringExtent(String string)", "signatureAfterChange": " public Point stringExtent(String string)", "diff": ["-\tchar[] buffer = new char[length];", "-\tstring.getChars(0, length, buffer, 0);", "-\tint ptr1 = OS.NewPtr(length * 2);", "-\tOS.memcpy(ptr1, buffer, length * 2);", "-\tOS.ATSUSetTextPointerLocation(data.layout, ptr1, 0, length, length);", "-\tFont font = data.font;", "-\tint atsuiStyle = font.atsuiStyle != 0 ? font.atsuiStyle : data.atsuiStyle;", "-\tOS.ATSUSetRunStyle(data.layout, atsuiStyle, 0, length);", "-\tint ptr2 = OS.NewPtr(ATSTrapezoid.sizeof);", "-\tOS.ATSUGetGlyphBounds(data.layout, 0, 0, 0, length, (short)OS.kATSUseDeviceOrigins, 1, ptr2, null);", "-\tOS.DisposePtr(ptr1);", "+\tif (string != data.string) {", "+\t\tif (data.stringPtr != 0) OS.DisposePtr(data.stringPtr);", "+\t\tchar[] buffer = new char[length];", "+\t\tstring.getChars(0, length, buffer, 0);", "+\t\tFont font = data.font;", "+\t\tint atsuiStyle = font.atsuiStyle != 0 ? font.atsuiStyle : data.atsuiStyle;", "+\t\tint ptr = OS.NewPtr(length * 2);", "+\t\tOS.memcpy(ptr, buffer, length * 2);", "+\t\tOS.ATSUSetTextPointerLocation(data.layout, ptr, 0, length, length);", "+\t\tOS.ATSUSetRunStyle(data.layout, atsuiStyle, 0, length);", "+\t\tdata.string = string;", "+\t\tdata.stringPtr = ptr;", "+\t}", "+\tint ptr = OS.NewPtr(ATSTrapezoid.sizeof);", "+\tOS.ATSUGetGlyphBounds(data.layout, 0, 0, 0, length, (short)OS.kATSUseDeviceOrigins, 1, ptr, null);", "-\tOS.memcpy(trapezoid, ptr2, ATSTrapezoid.sizeof);", "-\tOS.DisposePtr(ptr2);", "+\tOS.memcpy(trapezoid, ptr, ATSTrapezoid.sizeof);", "+\tOS.DisposePtr(ptr);"]}], "num": 25717}