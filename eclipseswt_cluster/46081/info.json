{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "d08daa833eb3db434188d8f8b87791a3", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "45c89ca377f43de2e77f28d54c014764", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt.tools/JNI Generation/org/eclipse/swt/tools/internal/NativesGenerator.java", "commitBeforeChange": "dc99d9bb9843280e22befd705fd4e0f15ba22ec9", "commitAfterChange": "da66ed50e7f2fec0e5faf4b617a73367a0acde7d", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 13, "signatureBeforeChange": "  boolean generateLocalVars(Method method, Class[] paramTypes, Class returnType)", "signatureAfterChange": "  boolean generateLocalVars(JNIMethod method, JNIParameter[] params, JNIType returnType, JNIType returnType64)", "diff": ["-", "-boolean generateLocalVars(Method method, Class[] paramTypes, Class returnType) {", "+boolean generateLocalVars(JNIMethod method, JNIParameter[] params, JNIType returnType, JNIType returnType64) {", "-\tfor (int i = 0; i < paramTypes.length; i++) {", "-\t\tClass paramType = paramTypes[i];", "+\tfor (int i = 0; i < params.length; i++) {", "+\t\tJNIParameter param = params[i];", "+\t\tJNIType paramType = param.getType(), paramType64 = param.getType64();", "-\t\tParameterData paramData = getMetaData().getMetaData(method, i);", "-\t\t\tClass componentType = paramType.getComponentType();", "+\t\t\tJNIType componentType = paramType.getComponentType();", "-\t\t\t\toutput(getTypeSignature2(componentType));", "+\t\t\t\toutput(componentType.getTypeSignature2(!paramType.equals(paramType64)));", "-\t\t} else if (paramType == String.class) {", "-\t\t\tif (paramData.getFlag(FLAG_UNICODE)) {", "+\t\t} else if (paramType.isType(\"java.lang.String\")) {", "+\t\t\tif (param.getFlag(FLAG_UNICODE)) {", "-\t\t\tClassData classData = metaData.getMetaData(paramType);", "-\t\t\tif (classData.getFlag(Flags.FLAG_STRUCT)) {", "+\t\t\tif (param.getTypeClass().getFlag(Flags.FLAG_STRUCT)) {", "-\t\t\toutput(getClassName(paramType));", "+\t\t\toutput(paramType.getSimpleName());", "-\t\t\tif (paramData.getFlag(FLAG_INIT)) output(\"={0}\");", "+\t\t\tif (param.getFlag(FLAG_INIT)) output(\"={0}\");", "-\t\tif (returnType != Void.TYPE) {", "+\t\tif (!returnType.isType(\"void\")) {", "-\t\t\toutput(getTypeSignature2(returnType));", "+\t\t\toutput(returnType.getTypeSignature2(!returnType.equals(returnType64)));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "30dfaa08b378f9d9ad678dcd1f96d679", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt.tools/JNI Generation/org/eclipse/swt/tools/internal/NativesGenerator.java", "commitBeforeChange": "dc99d9bb9843280e22befd705fd4e0f15ba22ec9", "commitAfterChange": "da66ed50e7f2fec0e5faf4b617a73367a0acde7d", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 18, "signatureBeforeChange": "  void generateFunctionCallRightSide(Method method, MethodData methodData, Class[] paramTypes, int paramStart)", "signatureAfterChange": "  void generateFunctionCallRightSide(JNIMethod method, JNIParameter[] params, int paramStart)", "diff": ["-void generateFunctionCallRightSide(Method method, MethodData methodData, Class[] paramTypes, int paramStart) {", "-\tif (!methodData.getFlag(FLAG_CONST)) {", "+void generateFunctionCallRightSide(JNIMethod method, JNIParameter[] params, int paramStart) {", "+\tif (!method.getFlag(FLAG_CONST)) {", "-\t\tif (methodData.getFlag(FLAG_JNI)) {", "+\t\tif (method.getFlag(FLAG_JNI)) {", "-\t\tfor (int i = paramStart; i < paramTypes.length; i++) {", "-\t\t\tClass paramType = paramTypes[i];", "-\t\t\tParameterData paramData = getMetaData().getMetaData(method, i);", "+\t\tfor (int i = paramStart; i < params.length; i++) {", "+\t\t\tJNIParameter param = params[i];", "-\t\t\tif (paramData.getFlag(FLAG_STRUCT)) output(\"*\");", "-\t\t\toutput(paramData.getCast());", "-\t\t\tif (paramData.getFlag(FLAG_GCOBJECT)) output(\"TO_OBJECT(\");", "-\t\t\tif (i == paramTypes.length - 1 && paramData.getFlag(FLAG_SENTINEL)) {", "+\t\t\tif (param.getFlag(FLAG_STRUCT)) output(\"*\");", "+\t\t\toutput(param.getCast());", "+\t\t\tif (param.getFlag(FLAG_GCOBJECT)) output(\"TO_OBJECT(\");", "+\t\t\tif (i == params.length - 1 && param.getFlag(FLAG_SENTINEL)) {", "+\t\t\t\tJNIType paramType = param.getType();", "-\t\t\tif (paramData.getFlag(FLAG_GCOBJECT)) output(\")\");", "+\t\t\tif (param.getFlag(FLAG_GCOBJECT)) output(\")\");"]}], "num": 46081}