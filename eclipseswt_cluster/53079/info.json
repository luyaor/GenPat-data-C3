{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9fdfd37fed911fc26a544d527b2cfffc", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f03bea072dc76d019c950fd12f19cab6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "a7206eed573d4459925f82f41be8140406ab7207", "commitAfterChange": "f413d9c6ba97decb96b3a0db1f8ba5ef3a107f45", "methodNumberBeforeChange": 103, "methodNumberAfterChange": 103, "signatureBeforeChange": " public boolean sleep ()", "signatureAfterChange": " public boolean sleep ()", "diff": ["-\tint display_fd = OS.ConnectionNumber (xDisplay);", "-\tint max_fd = display_fd > read_fd ? display_fd : read_fd;", "+//\tint display_fd = OS.ConnectionNumber (xDisplay);", "+//\tint max_fd = display_fd > read_fd ? display_fd : read_fd;", "+//\tdo {", "+//\t\tOS.FD_ZERO (fd_set);", "+//\t\tOS.FD_SET (display_fd, fd_set);", "+//\t\tOS.FD_SET (read_fd, fd_set);", "+//\t\ttimeout [0] = 0;", "+//\t\ttimeout [1] = 100000;", "+//\t\tif (OS.select (max_fd + 1, fd_set, null, null, timeout) != 0) break;", "+//\t\tif (getMessageCount () != 0) return true;", "+//\t\tint xtContext = OS.XtDisplayToApplicationContext (xDisplay);", "+//\t\tif (OS.XtAppPending (xtContext) != 0) return true;", "+//\t} while (true);", "+//\treturn OS.FD_ISSET (display_fd, fd_set);", "+", "+\t//TODO need to sleep waiting for the next event", "+\tint xtContext = OS.XtDisplayToApplicationContext (xDisplay);", "-\t\tOS.FD_ZERO (fd_set);", "-\t\tOS.FD_SET (display_fd, fd_set);", "-\t\tOS.FD_SET (read_fd, fd_set);", "-\t\ttimeout [0] = 0;", "-\t\ttimeout [1] = 100000;", "-\t\tif (OS.select (max_fd + 1, fd_set, null, null, timeout) != 0) break;", "-\t\tif (getMessageCount () != 0) return true;", "-\t\tint xtContext = OS.XtDisplayToApplicationContext (xDisplay);", "+\t\tif (getMessageCount () != 0) break;", "+\t\ttry {", "+\t\t\tsynchronized (OS_LOCK) {", "+\t\t\t\tOS_LOCK.wait (50);", "+\t\t\t}", "+\t\t} catch (Exception e) {", "+\t\t\treturn false;", "+\t\t}", "-\treturn OS.FD_ISSET (display_fd, fd_set);", "+\treturn true;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "700d53dadf585811d71f6faf84ee2ab2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Shell.java", "commitBeforeChange": "be7a6b56ec36f2937282f99ce8f6d3a09d752bb5", "commitAfterChange": "388089e4bec9dc7b9e91ccd2ec44faabbba9290c", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": "  void drawWidget (int control, int context, int damageRgn, int visibleRgn, int theEvent)", "signatureAfterChange": "  void drawWidget (int control, int context, int damageRgn, int visibleRgn, int theEvent)", "diff": ["-\tint port = 0; ", "-\tint [] buffer = null;", "-\tif (!OS.HIVIEW) {", "-\t\tbuffer = new int [1];", "-\t\tRect portRect = new Rect ();", "-\t\tport = OS.GetWindowPort (shellHandle);", "-\t\tOS.GetPortBounds (port, portRect);", "-\t\tOS.QDBeginCGContext (port, buffer);", "-\t\tcontext = buffer [0];", "-\t\tOS.CGContextScaleCTM (context, 1, -1);", "-\t\tOS.CGContextTranslateCTM (context, 0, portRect.top - portRect.bottom);", "-\t}", "-\tif (!OS.HIVIEW) OS.QDEndCGContext (port, buffer);"]}], "num": 53079}