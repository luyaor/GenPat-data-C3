{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2b264745bfa3fd6d05082b88ab97247c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5fe49a3c3ec1cba2a74eb79765f2d244", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "d5cf1c396dd6fc70c2ff1691fe757ac2af91424f", "commitAfterChange": "6d82b41e49943a9b4edcc7793f7d74b1be0c636a", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 21, "signatureBeforeChange": "  void init(Device device, ImageData image)", "signatureAfterChange": "  void init(Device device, ImageData image)", "diff": ["-\t\tif (device.useXRender && (alpha != -1 || alphaData != null)) {", "-\t\t\tmask = OS.gdk_pixmap_new(0, alpha != -1 ? 1 : width, alpha != -1 ? 1 : height, 8);", "-\t\t\tif (mask == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\t\t\tint /*long*/ gc = OS.gdk_gc_new(mask);", "-\t\t\tif (alpha != -1) {", "-\t\t\t\tGdkColor color = new GdkColor();", "-\t\t\t\tcolor.pixel = (alpha & 0xFF) << 8 | (alpha & 0xFF);", "-\t\t\t\tOS.gdk_gc_set_foreground(gc, color);", "-\t\t\t\tOS.gdk_draw_rectangle(mask, gc, 1, 0, 0, 1, 1);", "-\t\t\t} else {", "-\t\t\t\tint /*long*/ imagePtr = OS.gdk_drawable_get_image(mask, 0, 0, width, height);", "-\t\t\t\tif (imagePtr == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "-\t\t\t\tGdkImage gdkImage = new GdkImage();", "-\t\t\t\tOS.memmove(gdkImage, imagePtr);", "-\t\t\t\tif (gdkImage.bpl == width) {", "-\t\t\t\t\tOS.memmove(gdkImage.mem, alphaData, alphaData.length);", "-\t\t\t\t} else {", "-\t\t\t\t\tbyte[] line = new byte[gdkImage.bpl];", "-\t\t\t\t\tfor (int y = 0; y < height; y++) {", "-\t\t\t\t\t\tSystem.arraycopy(alphaData, width * y, line, 0, width);", "-\t\t\t\t\t\tOS.memmove(gdkImage.mem + (gdkImage.bpl * y), line, gdkImage.bpl);", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t\tOS.gdk_draw_image(mask, gc, imagePtr, 0, 0, 0, 0, width, height);", "-\t\t\t\tOS.g_object_unref(imagePtr);", "-\t\t\t}\t\t", "-\t\t\tOS.g_object_unref(gc);", "-\t\t}", "+\t\tcreateAlphaMask(width, height);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4e994f005da7d162cb1d02e42d88c7aa", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "600117323003db9ea522ed0baf12ee909172c3dc", "commitAfterChange": "c44dd21c1a1b0072edf7d53333363f735a817f14", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": "  void init(Device device, ImageData image)", "signatureAfterChange": "  void init(Device device, ImageData image)", "diff": ["+\t\tif (device.useXRender && (alpha != -1 || alphaData != null)) {", "+\t\t\tmask = OS.gdk_pixmap_new(0, alpha != -1 ? 1 : width, alpha != -1 ? 1 : height, 8);", "+\t\t\tif (mask == 0) SWT.error(SWT.ERROR_NO_HANDLES);", "+\t\t\tint /*long*/ gc = OS.gdk_gc_new(mask);", "+\t\t\tif (alpha != -1) {", "+\t\t\t\tGdkColor color = new GdkColor();", "+\t\t\t\tcolor.pixel = (alpha & 0xFF) << 8 | (alpha & 0xFF);", "+\t\t\t\tOS.gdk_gc_set_foreground(gc, color);", "+\t\t\t\tOS.gdk_draw_rectangle(mask, gc, 1, 0, 0, 1, 1);", "+\t\t\t} else {", "+\t\t\t\tint /*long*/ imagePtr = OS.gdk_drawable_get_image(mask, 0, 0, width, height);", "+\t\t\t\tGdkImage gdkImage = new GdkImage();", "+\t\t\t\tOS.memmove(gdkImage, imagePtr);", "+\t\t\t\tif (gdkImage.bpl == width) {", "+\t\t\t\t\tOS.memmove(gdkImage.mem, alphaData, alphaData.length);", "+\t\t\t\t} else {", "+\t\t\t\t\tbyte[] line = new byte[gdkImage.bpl];", "+\t\t\t\t\tfor (int y = 0; y < height; y++) {", "+\t\t\t\t\t\tSystem.arraycopy(alphaData, width * y, line, 0, width);", "+\t\t\t\t\t\tOS.memmove(gdkImage.mem + (gdkImage.bpl * y), line, gdkImage.bpl);", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t\tOS.gdk_draw_image(mask, gc, imagePtr, 0, 0, 0, 0, width, height);", "+\t\t\t\tOS.g_object_unref(imagePtr);", "+\t\t\t}\t\t", "+\t\t\tOS.g_object_unref(gc);", "+\t\t}"]}], "num": 11486}