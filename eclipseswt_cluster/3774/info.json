{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "02e54968d334a8515b387685cb25d15b", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f7bb6f819bab9c3f05a86250ee2b3a68", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "5dd555b333bfe4be20987ae764a2256175dee6d5", "commitAfterChange": "417f8bbebaee175318e96c4131831bf11c482f6f", "methodNumberBeforeChange": 179, "methodNumberAfterChange": 265, "signatureBeforeChange": " int getWordEndNoSpaces(int offset)", "signatureAfterChange": " int sendWordBoundaryEvent(int eventType, int movement, int offset, int newOffset, String lineText, int lineOffset)", "diff": ["- */", "-int getWordEndNoSpaces(int offset) {", "-\tif (offset >= getCharCount()) {", "-\t\treturn offset;", "-\t}", "-\tint line = content.getLineAtOffset(offset);", "-\tint lineOffset = content.getOffsetAtLine(line);", "-\tString lineText = content.getLine(line);", "-\tint lineLength = lineText.length();", "-\tif (offset == lineOffset + lineLength) {", "-\t\tline++;", "-\t\toffset = content.getOffsetAtLine(line);", "-\t} else {", "-\t\toffset -= lineOffset;", "-\t\tchar ch = lineText.charAt(offset);", "-\t\tboolean letterOrDigit = Compatibility.isLetterOrDigit(ch);", "-\t\twhile (offset < lineLength - 1 && Compatibility.isLetterOrDigit(ch) == letterOrDigit && !Compatibility.isSpaceChar(ch)) {", "-\t\t\toffset++;", "-\t\t\tch = lineText.charAt(offset);", "-\t\tif (offset == lineLength - 1 && Compatibility.isLetterOrDigit(ch) == letterOrDigit && !Compatibility.isSpaceChar(ch)) {", "-\t\t\toffset++;", "-\t\t}", "-\t\toffset += lineOffset;", "-\treturn offset;", "+int sendWordBoundaryEvent(int eventType, int movement, int offset, int newOffset, String lineText, int lineOffset) {", "+\tif (isListening(eventType)) {", "+\t\tStyledTextEvent event = new StyledTextEvent(content);", "+\t\tevent.detail = lineOffset;", "+\t\tevent.text = lineText;", "+\t\tevent.count = movement;", "+\t\tevent.start = offset;", "+\t\tevent.end = newOffset;", "+\t\tnotifyListeners(eventType, event);", "+\t\toffset = event.end;", "+\t\tif (offset != newOffset) {", "+\t\t\tint length = getCharCount();", "+\t\t\tif (offset < 0) {", "+\t\t\t\toffset = 0;", "+\t\t\t} else if (offset > length) {", "+\t\t\t\toffset = length;", "+\t\t\t} else {", "+\t\t\t\tif (isLineDelimiter(offset)) {", "+\t\t\t\t\tSWT.error(SWT.ERROR_INVALID_ARGUMENT);", "+\t\t\t\t}", "+\t\t\t}", "+\t\t}", "+\t\treturn offset;", "+\t}", "+\treturn newOffset;", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7f48d027d1e4e97a9899c1901d924d7f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "5dd555b333bfe4be20987ae764a2256175dee6d5", "commitAfterChange": "417f8bbebaee175318e96c4131831bf11c482f6f", "methodNumberBeforeChange": 178, "methodNumberAfterChange": 179, "signatureBeforeChange": " int getWordEnd(int offset)", "signatureAfterChange": " int getWordNext (int offset, int movement)", "diff": ["- */", "-int getWordEnd(int offset) {", "+int getWordNext (int offset, int movement) {", "+\tint newOffset, lineOffset;", "+\tString lineText;", "-\t\treturn offset;", "-\t}", "-\tint lineIndex = content.getLineAtOffset(offset);", "-\tint lineOffset = content.getOffsetAtLine(lineIndex);", "-\tint lineLength = content.getLine(lineIndex).length();", "-\tif (offset == lineOffset + lineLength) {", "-\t\toffset = content.getOffsetAtLine(lineIndex + 1);", "+\t\tnewOffset = offset;", "+\t\tint lineIndex = content.getLineCount() - 1;", "+\t\tlineOffset = content.getOffsetAtLine(lineIndex);", "+\t\tlineText = content.getLine(lineIndex);", "-\t\tTextLayout layout = renderer.getTextLayout(lineIndex);", "-\t\toffset -= lineOffset;", "-\t\toffset = layout.getNextOffset(offset, SWT.MOVEMENT_WORD);", "-\t\toffset += lineOffset;", "-\t\trenderer.disposeTextLayout(layout);", "-\t}", "-\treturn offset;", "-}", "+\t\tint lineIndex = content.getLineAtOffset(offset);", "+\t\tlineOffset = content.getOffsetAtLine(lineIndex);", "+\t\tlineText = content.getLine(lineIndex);", "+\t\tint lineLength = lineText.length();", "+\t\tif (offset == lineOffset + lineLength) {", "+\t\t\tnewOffset = content.getOffsetAtLine(lineIndex + 1);", "+\t\t} else {", "+\t\t\tTextLayout layout = renderer.getTextLayout(lineIndex);", "+\t\t\tnewOffset = lineOffset + layout.getNextOffset(offset - lineOffset, movement);", "+\t\t\trenderer.disposeTextLayout(layout);", "+\treturn sendWordBoundaryEvent(WordNext, movement, offset, newOffset, lineText, lineOffset);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "aa74a9dcd34f2c7cb3dfb44c9fa2702f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "1cafb9b13b36075eb1d31bd71ad3febbf37de5b5", "commitAfterChange": "4b7ac62e4c7abc2bdb8c97e1ee5fae6064a184d8", "methodNumberBeforeChange": 196, "methodNumberAfterChange": 197, "signatureBeforeChange": " void handleCompositionChanged(Event event)", "signatureAfterChange": " void handleCompositionChanged(Event event)", "diff": ["+\tint start = event.start;", "-\tif (compositionStart == -1) {", "-\t\tcompositionStart = caretOffset;", "-\t\tcompositionLength = 0;", "-\t}", "-\tint oldLength = compositionLength;", "-\tcompositionLength = 0;", "-\trenderer.imeRanges = null;", "-\trenderer.imeStyles = null;", "-\tif (length == event.count) {", "-\t\tcontent.replaceTextRange(compositionStart, oldLength, \"\");", "-\t\tcaretOffset = compositionStart;", "-\t\tcompositionStart = -1;", "+\tif (length == ime.getCommitCount()) {", "+\t\tcontent.replaceTextRange(start, event.end - start, \"\");", "+\t\tcaretOffset = start;", "-\t\tcontent.replaceTextRange(compositionStart, oldLength, text);", "-\t\tcompositionLength = length;", "-\t\tcaretOffset = compositionStart + event.index;", "-\t\tint lineIndex = getCaretLine();", "-\t\trenderer.imeRanges = event.ranges;", "-\t\trenderer.imeStyles = event.styles;", "-\t\tresetCache(lineIndex, 1);", "-\t\tif (event.wideCaret) {", "+\t\tcontent.replaceTextRange(start, event.end - start, text);", "+\t\tcaretOffset = ime.getCaretOffset();", "+\t\tif (ime.getWideCaret()) {", "+\t\t\tint lineIndex = getCaretLine();", "-\t\t\tcaretWidth = layout.getBounds(compositionStart - lineOffset, compositionStart + compositionLength - 1 - lineOffset).width;", "+\t\t\tcaretWidth = layout.getBounds(start - lineOffset, start + length - 1 - lineOffset).width;"]}], "num": 3774}