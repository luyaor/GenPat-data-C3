{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ff706db3b1f02e98533b25662d295e0f", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f72da091798ddee296a6ca3ec967a68e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/cocoa/org/eclipse/swt/dnd/TextTransfer.java", "commitBeforeChange": "6b0a245288556e7224d3c56682401ca81ba95245", "commitAfterChange": "4dbd09dcd54c5e8b8416ccbe2fdfacc6901be61f", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": " public Object nativeToJava(TransferData transferData)", "diff": ["-\tif (transferData.data.length == 0 || transferData.data[0].length == 0) return null;", "-\tbyte[] buffer = transferData.data[0];", "-\tswitch (transferData.type) {", "-\t\tcase TEXTID: {", "-\t\t\tint encoding = OS.CFStringGetSystemEncoding();", "-\t\t\tint cfstring = OS.CFStringCreateWithBytes(OS.kCFAllocatorDefault, buffer, buffer.length, encoding, true);", "-\t\t\tif (cfstring == 0) return null;", "-\t\t\ttry {", "-\t\t\t\tint length = OS.CFStringGetLength(cfstring);", "-\t\t\t\tif (length == 0) return null;", "-\t\t\t\tchar[] chars = new char[length];", "-\t\t\t\tCFRange range = new CFRange();", "-\t\t\t\trange.length = length;", "-\t\t\t\tOS.CFStringGetCharacters(cfstring, range, chars);", "-\t\t\t\treturn new String(chars);", "-\t\t\t} finally {", "-\t\t\t\tOS.CFRelease(cfstring);", "-\t\t\t}", "-\t\t}", "-\t\tcase UTEXTID: {", "-\t\t\tchar[] chars = new char[(buffer.length + 1) / 2];", "-\t\t\tOS.memmove(chars, buffer, buffer.length);", "-\t\t\treturn new String(chars);", "-\t\t}", "-\t}", "-\treturn null;", "+\tNSString string = (NSString) transferData.data;", "+\tchar[] chars = new char[string.length()];", "+\tstring.getCharacters_(chars);", "+\treturn new String(chars);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bfc65a9cf5d4d56ffdbba95212c91031", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/cocoa/org/eclipse/swt/dnd/RTFTransfer.java", "commitBeforeChange": "6b0a245288556e7224d3c56682401ca81ba95245", "commitAfterChange": "4dbd09dcd54c5e8b8416ccbe2fdfacc6901be61f", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": " public Object nativeToJava(TransferData transferData)", "diff": ["-\tif (transferData.data.length == 0 || transferData.data[0].length == 0) return null;", "-\tbyte[] buffer = transferData.data[0];", "-\tint encoding = OS.CFStringGetSystemEncoding();", "-\tint cfstring = OS.CFStringCreateWithBytes(OS.kCFAllocatorDefault, buffer, buffer.length, encoding, true);", "-\tif (cfstring == 0) return null;", "-\ttry {", "-\t\tint length = OS.CFStringGetLength(cfstring);", "-\t\tif (length == 0) return null;", "-\t\tchar[] chars = new char[length];", "-\t\tCFRange range = new CFRange();", "-\t\trange.length = length;", "-\t\tOS.CFStringGetCharacters(cfstring, range, chars);", "-\t\treturn new String(chars);", "-\t} finally {", "-\t\tOS.CFRelease(cfstring);", "-\t}", "+\tNSString string = (NSString) transferData.data;", "+\tchar[] chars = new char[string.length()];", "+\tstring.getCharacters_(chars);", "+\treturn new String(chars);"]}], "num": 31484}