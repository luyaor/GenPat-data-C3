{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a6436cddfdc76a2fa570416cedfa2edc", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5054a66d00c3f5de36cca26325170452", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "9deefd18be8de01a672cfca15620a560b1ae5f22", "commitAfterChange": "d67b8caceb3f10df6a8e238427498db262144133", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 52, "signatureBeforeChange": " public void setClipping(Region region)", "signatureAfterChange": " public void setClipping(Region region)", "diff": ["- */", "-public void setClipping(Region region) {\t", "-/*\tif (data.clipRgn == 0) data.clipRgn = OS.gdk_region_new();", "-\tif (region == null) {", "-\t\tdata.clipRgn = OS.gdk_regions_subtract(data.clipRgn, data.clipRgn);", "-\t\tOS.gdk_gc_set_clip_mask(handle, OS.GDK_NONE);", "-\t} else {", "-\t\tdata.clipRgn = OS.gdk_regions_subtract(data.clipRgn, data.clipRgn);", "-\t\tdata.clipRgn = OS.gdk_regions_union(region.handle, data.clipRgn);", "-\t\tOS.gdk_gc_set_clip_region(handle, region.handle);", "-\t}*/", "-}", "+ */", "+public void setClipping(Region region) {", "+\tif (handle == 0) SWT.error(SWT.ERROR_GRAPHIC_DISPOSED);", "+\tint clipRgn = data.clipRgn;", "+\tif (region == null) {", "+\t\tOS.gdk_gc_set_clip_region(handle, 0);", "+\t\tif (clipRgn != 0) {", "+\t\t\tOS.gdk_region_destroy(clipRgn);", "+\t\t\tdata.clipRgn = clipRgn = 0;", "+\t\t}", "+\t} else {", "+\t\tif (clipRgn == 0) {", "+\t\t\tdata.clipRgn = clipRgn = OS.gdk_region_new();", "+\t\t} else {", "+\t\t\tOS.gdk_region_subtract(clipRgn, clipRgn);", "+\t\t}", "+\t\tOS.gdk_region_union(clipRgn, region.handle);", "+\t\tOS.gdk_gc_set_clip_region(handle, clipRgn);", "+\t}", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1f1cd31bd209f11b6c42b9c08fa9a4d2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "9deefd18be8de01a672cfca15620a560b1ae5f22", "commitAfterChange": "d67b8caceb3f10df6a8e238427498db262144133", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 38, "signatureBeforeChange": " public void getClipping(Region region)", "signatureAfterChange": " public void getClipping(Region region)", "diff": ["- */", "-public void getClipping(Region region) {\t", "-\tif (region == null) error(SWT.ERROR_NULL_ARGUMENT);", "-\tint hRegion = region.handle;", "-\tif (data.clipRgn == 0) {", "-\t\tint[] width = new int[1]; int[] height = new int[1];", "-\t\tOS.gdk_drawable_get_size(data.drawable, width, height);", "-\t\thRegion = OS.gdk_region_new();", "-\t\tGdkRectangle rect = new GdkRectangle();", "-\t\trect.x = 0; rect.y = 0;", "-\t\trect.width = (short)width[0]; rect.height = (short)height[0];", "-\t\tregion.handle = OS.gdk_region_union_with_rect(hRegion, rect);", "-\t\treturn;", "-\t}", "-\thRegion = OS.gdk_region_new();", "-\tregion.handle = OS.gdk_regions_union(data.clipRgn, hRegion);", "-}", "+ */", "+public void getClipping(Region region) {\t", "+\tif (handle == 0) SWT.error(SWT.ERROR_GRAPHIC_DISPOSED);", "+\tif (region == null) SWT.error(SWT.ERROR_NULL_ARGUMENT);", "+\tint hRegion = region.handle;", "+\tint clipRgn = data.clipRgn;", "+\tOS.gdk_region_subtract(hRegion, hRegion);", "+\tif (data.clipRgn == 0) {", "+\t\tint[] width = new int[1]; int[] height = new int[1];", "+\t\tOS.gdk_drawable_get_size(data.drawable, width, height);", "+\t\tGdkRectangle rect = new GdkRectangle();", "+\t\trect.x = 0; rect.y = 0;", "+\t\trect.width = width[0]; rect.height = height[0];", "+\t\tOS.gdk_region_union_with_rect(hRegion, rect);", "+\t\treturn;", "+\t}", "+\tOS.gdk_region_union(hRegion, clipRgn);", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "37e85bb0b5b156065332c0cebef3c49e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "978a5068b13063ede30b740ed3c44a97b7570e39", "commitAfterChange": "20cec0fcfd39844bd15ec0f72029c909ca9e3777", "methodNumberBeforeChange": 115, "methodNumberAfterChange": 115, "signatureBeforeChange": "  int gtk_visibility_notify_event (int widget, int event)", "signatureAfterChange": "  int gtk_visibility_notify_event (int widget, int event)", "diff": ["-\tif (gdkEvent.state == OS.GDK_VISIBILITY_FULLY_OBSCURED) {", "-\t\tstate |= OBSCURED;", "-\t} else {", "-\t\tif ((state & OBSCURED) != 0) {", "-\t\t\tint /*long*/ window = gdkEvent.window;", "-\t\t\tint [] width = new int [1], height = new int [1];", "-\t\t\tOS.gdk_drawable_get_size (window, width, height);", "-\t\t\tGdkRectangle rect = new GdkRectangle ();", "-\t\t\trect.width = width [0];", "-\t\t\trect.height = height [0];", "-\t\t\tOS.gdk_window_invalidate_rect (window, rect, true);", "+\tint /*long*/ paintWindow = paintWindow();", "+\tint /*long*/ window = gdkEvent.window;", "+\tif (window == paintWindow) {", "+\t\tif (gdkEvent.state == OS.GDK_VISIBILITY_FULLY_OBSCURED) {", "+\t\t\tstate |= OBSCURED;", "+\t\t} else {", "+\t\t\tif ((state & OBSCURED) != 0) {\t\t", "+\t\t\t\tint [] width = new int [1], height = new int [1];", "+\t\t\t\tOS.gdk_drawable_get_size (window, width, height);", "+\t\t\t\tGdkRectangle rect = new GdkRectangle ();", "+\t\t\t\trect.width = width [0];", "+\t\t\t\trect.height = height [0];", "+\t\t\t\tOS.gdk_window_invalidate_rect (window, rect, true);", "+\t\t\t}", "+\t\t\tstate &= ~OBSCURED;", "-\t\tstate &= ~OBSCURED;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e869c27f33ea74c04da8d8ffe4d4d7dc", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "9deefd18be8de01a672cfca15620a560b1ae5f22", "commitAfterChange": "d67b8caceb3f10df6a8e238427498db262144133", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 50, "signatureBeforeChange": " public void setClipping(int x, int y, int width, int height)", "signatureAfterChange": " public void setClipping(int x, int y, int width, int height)", "diff": ["- */", "-public void setClipping(int x, int y, int width, int height) {", "-/*\tif (data.clipRgn == 0) data.clipRgn = OS.gdk_region_new();", "-\tGdkRectangle rect = new GdkRectangle();", "-\trect.x = (short)x;  rect.y = (short)y;", "-\trect.width = (short)width;  rect.height = (short)height;", "-\tOS.gdk_gc_set_clip_rectangle(handle, rect);", "-\tdata.clipRgn = OS.gdk_regions_subtract(data.clipRgn, data.clipRgn);", "-\tdata.clipRgn = OS.gdk_region_union_with_rect(data.clipRgn, rect);*/", "-}", "+ */", "+public void setClipping(int x, int y, int width, int height) {", "+\tif (handle == 0) SWT.error(SWT.ERROR_GRAPHIC_DISPOSED);", "+\tint clipRgn = data.clipRgn;", "+\tif (clipRgn == 0) {", "+\t\tdata.clipRgn = clipRgn = OS.gdk_region_new();", "+\t} else {", "+\t\tOS.gdk_region_subtract(clipRgn, clipRgn);", "+\t}", "+\tGdkRectangle rect = new GdkRectangle();", "+\trect.x = x;  rect.y = y;", "+\trect.width = width;  rect.height = height;", "+\tOS.gdk_gc_set_clip_rectangle(handle, rect);", "+\tOS.gdk_region_union_with_rect(clipRgn, rect);", "+}"]}], "num": 26553}