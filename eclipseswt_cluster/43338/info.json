{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f3f69f3a01c37426390fd889bbeae398", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1621846cc65d5a9d8eae98386cb9e17d", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "c75fa2aaa81cd96400f0b4207d26c662b67c5bce", "commitAfterChange": "68dd096752e238c658788f5395a8c9f209d457e7", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 34, "signatureBeforeChange": "  int coreEventProc (int theAppleEvent, int reply, int handlerRefcon)", "signatureAfterChange": "  int coreEventProc (int theAppleEvent, int reply, int handlerRefcon)", "diff": ["-\tif (!disposing) {", "-\t\tEvent event = new Event ();", "-\t\tsendEvent (SWT.Close, event);", "-\t\tif (event.doit) {", "-\t\t\tdispose ();", "-\t\t\t/*", "-\t\t\t* When the application is closing, no SWT program can continue", "-\t\t\t* to run.  In order to avoid running code after the display has", "-\t\t\t* been disposed, exit from Java.", "-\t\t\t*/", "-\t\t\t/* This code is intentionally commented */", "-//\t\t\tSystem.exit (0);", "-\t\t} else {", "-\t\t\treturn OS.userCanceledErr;", "-\t\t}", "+\tswitch(handlerRefcon) {", "+\t\tcase OS.kAEOpenDocuments:", "+\t\t\tAEDesc docList = new AEDesc();", "+\t\t\tint[] count = new int[1];", "+\t\t    OS.AEGetParamDesc(theAppleEvent, OS.keyDirectObject, OS.typeAEList, docList);", "+\t\t\tOS.AECountItems(docList, count);", "+\t\t\tfor(int index = 1; index <= count[0]; index++) {", "+\t\t\t\tint [] theAEKeyword = new int [1];", "+\t\t\t\tint [] typeCode = new int [1];", "+\t\t\t\tint maximumSize = 80; // size of FSRef", "+\t\t\t\tint dataPtr = OS.NewPtr (maximumSize);", "+\t\t\t\tint [] actualSize = new int [1];", "+\t\t\t\tint status = OS.AEGetNthPtr (docList, 1, OS.typeFSRef, theAEKeyword, typeCode, dataPtr, maximumSize, actualSize);", "+\t\t\t\tif (status == OS.noErr && typeCode [0] == OS.typeFSRef) {", "+\t\t\t\t\tbyte [] fsRef = new byte [actualSize [0]];", "+\t\t\t\t\tOS.memmove (fsRef, dataPtr, actualSize [0]);", "+\t\t\t\t\tint dirUrl = OS.CFURLCreateFromFSRef (OS.kCFAllocatorDefault, fsRef);", "+\t\t\t\t\tint dirString = OS.CFURLCopyFileSystemPath(dirUrl, OS.kCFURLPOSIXPathStyle);", "+\t\t\t\t\tOS.CFRelease (dirUrl);\t\t\t\t\t\t", "+\t\t\t\t\tint length = OS.CFStringGetLength (dirString);", "+\t\t\t\t\tchar [] buffer= new char [length];", "+\t\t\t\t\tCFRange range = new CFRange ();", "+\t\t\t\t\trange.length = length;", "+\t\t\t\t\tOS.CFStringGetCharacters (dirString, range, buffer);", "+\t\t\t\t\tOS.CFRelease (dirString);", "+\t\t\t\t\tString string = new String(buffer);", "+\t\t\t\t\tEvent event = new Event();", "+\t\t\t\t\tevent.type = SWT.OpenDoc;", "+\t\t\t\t\tevent.text = string;", "+\t\t\t\t\tpostEvent(event);", "+\t\t\t\t}", "+\t\t\t\tOS.DisposePtr (dataPtr);", "+\t\t    }", "+\t\t    OS.AEDisposeDesc(docList);", "+\t\t\tbreak;", "+\t\tcase OS.kAEQuitApplication:", "+\t\t\tif (!disposing) {", "+\t\t\t\tEvent event = new Event ();", "+\t\t\t\tsendEvent (SWT.Close, event);", "+\t\t\t\tif (event.doit) {", "+\t\t\t\t\tdispose ();", "+\t\t\t\t\t/*", "+\t\t\t\t\t* When the application is closing, no SWT program can continue", "+\t\t\t\t\t* to run.  In order to avoid running code after the display has", "+\t\t\t\t\t* been disposed, exit from Java.", "+\t\t\t\t\t*/", "+\t\t\t\t\t/* This code is intentionally commented */", "+\t\t//\t\t\tSystem.exit (0);", "+\t\t\t\t} else {", "+\t\t\t\t\treturn OS.userCanceledErr;", "+\t\t\t\t}", "+\t\t\t}", "+\t\t\tbreak;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a637abc82e6ab8c010bf8dfeecd94df7", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "375107332fc5402c59bbea222825730a86b9abf8", "commitAfterChange": "44de4d90761d97390b615c1ff34478d750cc19d6", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "  int appleEventProc (int nextHandler, int theEvent, int userData)", "signatureAfterChange": "  int appleEventProc (int nextHandler, int theEvent, int userData)", "diff": ["-\tint [] aeEventID = new int [1];", "-\tif (OS.GetEventParameter (theEvent, OS.kEventParamAEEventID, OS.typeType, null, 4, null, aeEventID) == OS.noErr) {", "-\t\tif (aeEventID [0] == OS.kAEQuitApplication) {", "-\t\t\tEvent event = new Event ();", "-\t\t\tsendEvent (SWT.Close, event);", "-\t\t\tif (event.doit) {", "-\t\t\t\t/*", "-\t\t\t\t* When the application is closing, no SWT program can continue", "-\t\t\t\t* to run.  In order to avoid running code after the display has", "-\t\t\t\t* been disposed, exit from Java.", "-\t\t\t\t*/", "-\t\t\t\tdispose ();", "-\t\t\t\tSystem.exit (0);", "+\tint eventClass = OS.GetEventClass (theEvent);", "+\tint eventKind = OS.GetEventKind (theEvent);", "+\tswitch (eventClass) {", "+\t\tcase OS.kEventClassApplication: ", "+\t\t\tswitch (eventKind) {", "+\t\t\t\tcase OS.kEventAppAvailableWindowBoundsChanged: {", "+\t\t\t\t\t/* Reset the dock image in case the dock has been restarted */", "+\t\t\t\t\tif (dockImage != 0) {", "+\t\t\t\t\t\tint [] reason = new int [1];", "+\t\t\t\t\t\tOS.GetEventParameter (theEvent, OS.kEventParamReason, OS.typeUInt32, null, 4, null, reason);", "+\t\t\t\t\t\tif (reason [0] == OS.kAvailBoundsChangedForDock) {", "+\t\t\t\t\t\t\tOS.SetApplicationDockTileImage (dockImage);", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "-\t\t\treturn OS.userCanceledErr;", "-\t\t}", "+\t\t\tbreak;", "+\t\tcase OS.kEventClassAppleEvent:", "+\t\t\tint [] aeEventID = new int [1];", "+\t\t\tif (OS.GetEventParameter (theEvent, OS.kEventParamAEEventID, OS.typeType, null, 4, null, aeEventID) == OS.noErr) {", "+\t\t\t\tif (aeEventID [0] == OS.kAEQuitApplication) {", "+\t\t\t\t\tEvent event = new Event ();", "+\t\t\t\t\tsendEvent (SWT.Close, event);", "+\t\t\t\t\tif (event.doit) {", "+\t\t\t\t\t\t/*", "+\t\t\t\t\t\t* When the application is closing, no SWT program can continue", "+\t\t\t\t\t\t* to run.  In order to avoid running code after the display has", "+\t\t\t\t\t\t* been disposed, exit from Java.", "+\t\t\t\t\t\t*/", "+\t\t\t\t\t\tdispose ();", "+\t\t\t\t\t\tSystem.exit (0);", "+\t\t\t\t\t}", "+\t\t\t\t\treturn OS.userCanceledErr;", "+\t\t\t\t}", "+\t\t\t}", "+\t\t\tbreak;"]}], "num": 43338}