{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "5ab68cf13d8b69a8678d8470f5187788", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ab9f071a8614c6a68079f70b7b9534b9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/cocoa/org/eclipse/swt/browser/Safari.java", "commitBeforeChange": "4edc576de20a88abac088ae701d29ce3e54ede4f", "commitAfterChange": "c2ec875b36ecf39df432358c14d183b7d7f45fe0", "methodNumberBeforeChange": 48, "methodNumberAfterChange": 49, "signatureBeforeChange": "  void mouseDidMoveOverElement (int elementInformation, int modifierFlags)", "signatureAfterChange": "  void webView_mouseDidMoveOverElement_modifierFlags (int sender, int elementInformationID, int modifierFlags)", "diff": ["-void mouseDidMoveOverElement (int elementInformation, int modifierFlags) {", "-\tif (elementInformation == 0) return;", "+void webView_mouseDidMoveOverElement_modifierFlags (int sender, int elementInformationID, int modifierFlags) {", "+\tif (elementInformationID == 0) return;", "-\tint length = WebElementLinkURLKey.length();", "-\tchar[] chars = new char[length];", "-\tWebElementLinkURLKey.getChars(0, length, chars, 0);", "-\tint key = OS.CFStringCreateWithCharacters(0, chars, length);", "-\tint value = Cocoa.objc_msgSend(elementInformation, Cocoa.S_valueForKey, key);", "-\tOS.CFRelease(key);", "-\tif (value == 0) {", "+\tNSString key = NSString.stringWith(WebElementLinkURLKey);", "+\tNSDictionary elementInformation = new NSDictionary(elementInformationID);", "+\tid value = elementInformation.valueForKey(key);", "+\tif (value == null) {", "-\tint stringPtr = Cocoa.objc_msgSend(value, Cocoa.S_absoluteString);", "-\tlength = OS.CFStringGetLength(stringPtr);", "+\tNSString url = new NSURL(value.id).absoluteString();", "+\tint length = url.length();", "-\t\tchars = new char[length];", "-\t\tCFRange range = new CFRange();", "-\t\trange.length = length;", "-\t\tOS.CFStringGetCharacters(stringPtr, range, chars);", "-\t\turlString = new String(chars);", "+\t\tchar[] buffer = new char[length];", "+\t\turl.getCharacters_(buffer);", "+\t\turlString = new String(buffer);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7ce48a98fd1e574bffede9578b9f9813", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/cocoa/org/eclipse/swt/browser/Safari.java", "commitBeforeChange": "4edc576de20a88abac088ae701d29ce3e54ede4f", "commitAfterChange": "c2ec875b36ecf39df432358c14d183b7d7f45fe0", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 27, "signatureBeforeChange": "  void didCommitLoadForFrame(int frame)", "signatureAfterChange": "  void webView_didCommitLoadForFrame(int sender, int frameID)", "diff": ["-void didCommitLoadForFrame(int frame) {", "-\tint webView = Cocoa.HIWebViewGetWebView(webViewHandle);", "-\t//id url= [[[[frame provisionalDataSource] request] URL] absoluteString];", "-\tint dataSource = Cocoa.objc_msgSend(frame, Cocoa.S_dataSource);", "-\tint request = Cocoa.objc_msgSend(dataSource, Cocoa.S_request);", "-\tint url = Cocoa.objc_msgSend(request, Cocoa.S_URL);", "-\tint s = Cocoa.objc_msgSend(url, Cocoa.S_absoluteString);\t", "-\tint length = OS.CFStringGetLength(s);", "+void webView_didCommitLoadForFrame(int sender, int frameID) {", "+\tWebFrame frame = new WebFrame(frameID);", "+\tWebDataSource dataSource = frame.dataSource();", "+\tNSURLRequest request = dataSource.request();", "+\tNSURL url = request.URL();", "+\tNSString s = url.absoluteString();", "+\tint length = s.length();", "-\tCFRange range = new CFRange();", "-\trange.length = length;", "-\tOS.CFStringGetCharacters(s, range, buffer);", "+\ts.getCharacters_(buffer);", "-\tboolean top = frame == Cocoa.objc_msgSend(webView, Cocoa.S_mainFrame);", "+\tboolean top = frameID == webView.mainFrame().id;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dd176f90af9b3ad13ba7e7016c2ded72", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/cocoa/org/eclipse/swt/browser/Safari.java", "commitBeforeChange": "4edc576de20a88abac088ae701d29ce3e54ede4f", "commitAfterChange": "c2ec875b36ecf39df432358c14d183b7d7f45fe0", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 12, "signatureBeforeChange": "  public String getText()", "signatureAfterChange": "  public String getText()", "diff": ["-\tint webView = Cocoa.HIWebViewGetWebView(webViewHandle);", "-\tint mainFrame = Cocoa.objc_msgSend(webView, Cocoa.S_mainFrame);", "-\tint dataSource = Cocoa.objc_msgSend(mainFrame, Cocoa.S_dataSource);", "-\tif (dataSource == 0) return \"\";\t//$NON-NLS-1$", "-\tint representation = Cocoa.objc_msgSend(dataSource, Cocoa.S_representation);", "-\tif (representation == 0) return \"\";\t//$NON-NLS-1$", "-\tint source = Cocoa.objc_msgSend(representation, Cocoa.S_documentSource);", "-\tif (source == 0) return \"\";\t//$NON-NLS-1$", "-\tint length = OS.CFStringGetLength(source);", "-\tchar[] buffer = new char[length];", "-\tCFRange range = new CFRange();", "-\trange.length = length;", "-\tOS.CFStringGetCharacters(source, range, buffer);", "+\tWebFrame mainFrame = webView.mainFrame();", "+\tWebDataSource dataSource = mainFrame.dataSource();", "+\tif (dataSource == null) return \"\";\t//$NON-NLS-1$", "+\tWebDocumentRepresentation representation = dataSource.representation();", "+\tif (representation == null) return \"\";\t//$NON-NLS-1$", "+\tNSString source = representation.documentSource();", "+\tif (source == null) return \"\";\t//$NON-NLS-1$", "+\tchar[] buffer = new char[source.length()];", "+\tsource.getCharacters_(buffer);"]}], "num": 4206}