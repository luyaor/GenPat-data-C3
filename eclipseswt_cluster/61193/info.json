{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3f216bba4e9cfe6964064d0044eb87a5", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d4e5bf1329159131e2125ae066f54ba6", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/ToolBar.java", "commitBeforeChange": "31fd280be8e8a42a84f11af93d2167a17b14eb6c", "commitAfterChange": "897b53cfc07404bb405be201646e27c750abe5b5", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 19, "signatureBeforeChange": "  int [] layoutVertical (int width, int height, boolean resize)", "signatureAfterChange": "  int [] layoutVertical (int width, int height, boolean resize)", "diff": ["-\tint maxWidth = 0, maxY = 0, cols = 1;", "+\tint maxY = 0, cols = 1;", "+\tGC gc = new GC(this);", "+\tPoint [] sizes = new Point [itemCount];", "-\t\tRectangle rect = items [i].getBounds ();", "-\t\titemWidth = Math.max (itemWidth, rect.width);", "+\t\tPoint size = sizes [i] = items [i].computeSize (gc);", "+\t\titemWidth = Math.max (itemWidth, size.x);", "-\t\tRectangle rect = item.getBounds ();", "-\t\tif (wrap && i != 0 && y + rect.height > height) {", "+\t\tPoint size = sizes [i];", "+\t\tif (wrap && i != 0 && y + size.y > height) {", "-\t\t\tx += xSpacing + maxWidth;", "+\t\t\tx += xSpacing + itemWidth;", "-\t\t\tmaxWidth = 0;", "-\t\tmaxWidth = Math.max (maxWidth, rect.width);", "-\t\t\titem.setBounds (x, y, itemWidth, rect.height);", "-\t\t\tboolean visible = x + rect.width <= width && y + rect.height <= height;", "+\t\t\titem.setBounds (x, y, itemWidth, size.y, gc);", "+\t\t\tboolean visible = x + itemWidth <= width && y + size.y <= height;", "+\t\t\tControl control = item.control;", "+\t\t\tif (control != null) {", "+\t\t\t\tint controlX = x + (itemWidth - size.x) / 2;", "+\t\t\t\tcontrol.setBounds (controlX, y, itemWidth - (controlX - x), size.y);", "+\t\t\t}", "-\t\ty += ySpacing + rect.height;", "+\t\ty += ySpacing + size.y;", "-\treturn new int [] {cols, x + maxWidth, maxY};", "+\tgc.dispose();", "+\t", "+\t//TODO - tempporary code", "+\tif (resize) invalidateVisibleRegion (handle);", "+\t", "+\treturn new int [] {cols, x + itemWidth, maxY};"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9c2a9b44248245b0fac43e0d0fbb9271", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/ToolBar.java", "commitBeforeChange": "31fd280be8e8a42a84f11af93d2167a17b14eb6c", "commitAfterChange": "897b53cfc07404bb405be201646e27c750abe5b5", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 16, "signatureBeforeChange": " int [] layoutVertical (int width, int height, boolean resize)", "signatureAfterChange": " int [] layoutVertical (int width, int height, boolean resize)", "diff": ["-\tint maxWidth = 0, maxY = 0, cols = 1;", "+\tint maxY = 0, cols = 1;", "+\tint itemWidth = 0;", "+\tPoint [] sizes = new Point [itemCount];", "+\tGC gc = new GC (this);", "+\tfor (int i=0; i<itemCount; i++) {", "+\t\tPoint size = sizes [i] = items [i].computeSize (gc);", "+\t\titemWidth = Math.max (itemWidth, size.x);", "+\t}\t", "-\t\tRectangle rect = item.getBounds ();", "-\t\tif (wrap && i != 0 && y + rect.height > height) {", "+\t\tPoint size = sizes [i];", "+\t\tif (wrap && i != 0 && y + size.y > height) {", "-\t\t\tx += xSpacing + maxWidth;  y = marginHeight;", "-\t\t\tmaxWidth = 0;", "+\t\t\tx += xSpacing + itemWidth;", "+\t\t\ty = marginHeight;", "-\t\tmaxWidth = Math.max (maxWidth, rect.width);", "-\t\t\titem.setBounds (x, y, rect.width, rect.height);", "-\t\t\tboolean visible = x + rect.width <= width && y + rect.height <= height;", "+\t\t\titem.setBounds (x, y, itemWidth, size.y);", "+\t\t\tboolean visible = x + itemWidth <= width && y + size.y <= height;", "+\t\t\tControl control = item.control;", "+\t\t\tif (control != null) {", "+\t\t\t\tint controlX = x + (itemWidth - size.x) / 2;", "+\t\t\t\tcontrol.setBounds (controlX, y, itemWidth - (controlX - x), size.y);", "+\t\t\t}", "-\t\ty += ySpacing + rect.height;", "+\t\ty += ySpacing + size.y;", "-\treturn new int [] {cols, x + maxWidth, maxY};", "+\treturn new int [] {cols, x + itemWidth, maxY};"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "51d74268ab327b797f3122973a62bfc1", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/ToolBar.java", "commitBeforeChange": "31fd280be8e8a42a84f11af93d2167a17b14eb6c", "commitAfterChange": "897b53cfc07404bb405be201646e27c750abe5b5", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": "  int [] layoutHorizontal (int width, int height, boolean resize)", "signatureAfterChange": "  int [] layoutHorizontal (int width, int height, boolean resize)", "diff": ["-\tint maxHeight = 0, maxX = 0, rows = 1;", "+\tint maxX = 0, rows = 1;", "+\tGC gc = new GC(this);", "+\tPoint [] sizes = new Point [itemCount];", "-\t\tRectangle rect = items [i].getBounds ();", "-\t\titemHeight = Math.max (itemHeight, rect.height);", "+\t\tPoint size = sizes [i] = items [i].computeSize (gc);", "+\t\titemHeight = Math.max (itemHeight, size.y);", "-\t\tRectangle rect = item.getBounds ();", "-\t\tif (wrap && i != 0 && x + rect.width > width) {", "+\t\tPoint size = sizes [i];", "+\t\tif (wrap && i != 0 && x + size.x > width) {", "-\t\t\ty += ySpacing + maxHeight;", "-\t\t\tmaxHeight = 0;", "+\t\t\ty += ySpacing + itemHeight;", "-\t\tmaxHeight = Math.max (maxHeight, rect.height);", "-\t\t\titem.setBounds (x, y, rect.width, itemHeight);", "-\t\t\tboolean visible = x + rect.width <= width && y + rect.height <= height;", "+\t\t\titem.setBounds (x, y, size.x, itemHeight, gc);", "+\t\t\tboolean visible = x + size.x <= width && y + itemHeight <= height;", "+\t\t\tControl control = item.control;", "+\t\t\tif (control != null) {", "+\t\t\t\tint controlY = y + (itemHeight - size.y) / 2;", "+\t\t\t\tcontrol.setBounds (x, controlY, size.x, itemHeight - (controlY - y));", "+\t\t\t}", "-\t\tx += xSpacing + rect.width;", "+\t\tx += xSpacing + size.x;", "-\treturn new int [] {rows, maxX, y + maxHeight};", "+\tgc.dispose();", "+\t", "+\t//TODO - tempporary code", "+\tif (resize) invalidateVisibleRegion (handle);", "+\t", "+\treturn new int [] {rows, maxX, y + itemHeight};"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d5573271d55eee1943470cfa34b08c4a", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/ToolBar.java", "commitBeforeChange": "31fd280be8e8a42a84f11af93d2167a17b14eb6c", "commitAfterChange": "897b53cfc07404bb405be201646e27c750abe5b5", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 15, "signatureBeforeChange": " int [] layoutHorizontal (int width, int height, boolean resize)", "signatureAfterChange": " int [] layoutHorizontal (int width, int height, boolean resize)", "diff": ["-\tint maxHeight = 0, maxX = 0, rows = 1;", "+\tint maxX = 0, rows = 1;", "+\tint itemHeight = 0;", "+\tPoint [] sizes = new Point [itemCount];", "+\tGC gc = new GC (this);", "+\tfor (int i=0; i<itemCount; i++) {", "+\t\tPoint size = sizes [i] = items [i].computeSize (gc);", "+\t\titemHeight = Math.max (itemHeight, size.y);", "+\t}", "-\t\tRectangle rect = item.getBounds ();", "-\t\tif (wrap && i != 0 && x + rect.width > width) {", "+\t\tPoint size = sizes [i];", "+\t\tif (wrap && i != 0 && x + size.x > width) {", "-\t\t\tx = marginWidth;  y += ySpacing + maxHeight;", "-\t\t\tmaxHeight = 0;", "+\t\t\tx = marginWidth;", "+\t\t\ty += ySpacing + itemHeight;", "-\t\tmaxHeight = Math.max (maxHeight, rect.height);", "-\t\t\titem.setBounds (x, y, rect.width, rect.height);", "-\t\t\tboolean visible = x + rect.width <= width && y + rect.height <= height;", "+\t\t\titem.setBounds (x, y, size.x, itemHeight);", "+\t\t\tboolean visible = x + size.x <= width && y + itemHeight <= height;", "+\t\t\tControl control = item.control;", "+\t\t\tif (control != null) {", "+\t\t\t\tint controlY = y + (itemHeight - size.y) / 2;", "+\t\t\t\tcontrol.setBounds (x, controlY, size.x, itemHeight - (controlY - y));", "+\t\t\t}", "-\t\tx += xSpacing + rect.width;", "+\t\tx += xSpacing + size.x;", "-\treturn new int [] {rows, maxX, y + maxHeight};", "+\tgc.dispose ();", "+\treturn new int [] {rows, maxX, y + itemHeight};"]}], "num": 61193}