{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "1c185b358da9b1c4a4ae9d103deeb731", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "557bf96a7deae0a0906e0f93a5931bc8", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 12, "signatureBeforeChange": "  void createItem (MenuItem item, int index)", "signatureAfterChange": "  void createItem (MenuItem item, int index)", "diff": ["-\tparent.add (item);", "-\tboolean success = false;", "-\t/*", "-\tif (OS.IsWinCE) {", "-\t\tint flags = OS.MF_BYPOSITION;", "-\t\tif ((style & SWT.SEPARATOR) != 0) flags |= OS.MF_SEPARATOR;", "-\t\tsuccess = OS.InsertMenu (handle, index, flags, item.id, null); ", "-\t} else {", "-\t\tint hHeap = OS.GetProcessHeap ();", "-\t\tint pszText = OS.HeapAlloc (hHeap, OS.HEAP_ZERO_MEMORY, TCHAR.sizeof);", "-\t\tMENUITEMINFO info = new MENUITEMINFO ();", "-\t\tinfo.cbSize = MENUITEMINFO.sizeof;", "-\t\tinfo.fMask = OS.MIIM_ID | OS.MIIM_TYPE;", "-\t\tinfo.wID = item.id;", "-\t\tinfo.fType = item.widgetStyle ();", "-\t\tinfo.dwTypeData = pszText;", "-\t\tsuccess = OS.InsertMenuItem (handle, index, true, info);", "-\t\tif (pszText != 0) OS.HeapFree (hHeap, 0, pszText);", "-\t}", "-\t*/", "-\t", "-\t/*", "-\tif ((style & SWT.SEPARATOR) != 0) return OS.MFT_SEPARATOR;", "-\tif ((style & SWT.RADIO) != 0) return OS.MFT_RADIOCHECK;", "-\treturn OS.MFT_STRING;", "-\t*/", "-\t", "-\tint attributes= 0;", "-\tif ((item.style & SWT.SEPARATOR) != 0) ", "-\t\tattributes= OS.kMenuItemAttrSeparator;", "-\tif (OS.InsertMenuItemTextWithCFString(handle, 0, (short) index, attributes, item.id) == OS.kNoErr)", "-\t\tsuccess= true;", "-\t", "-\tif (!success) {", "-\t\tparent.remove (item);", "+\tDisplay display = getDisplay ();", "+\tdisplay.addMenuItem (item);", "+\tint attributes = 0;", "+\tif ((item.style & SWT.SEPARATOR) != 0) attributes = OS.kMenuItemAttrSeparator;", "+\tint result = OS.InsertMenuItemTextWithCFString (handle, 0, (short) index, attributes, item.id);", "+\tif (result != OS.noErr) {", "+\t\tdisplay.removeMenuItem (item);", "-\t/* AW\t", "-\tredraw ();", "-\t*/", "-}", "+\tif ((style & SWT.BAR) != 0) {", "+//\t\tDisplay display = getDisplay ();", "+//\t\tshort menuID = display.nextMenuId ();", "+//\t\tint outMenuRef [] = new int [1];", "+//\t\tif (OS.CreateNewMenu (menuID, 0, outMenuRef) != OS.noErr) {", "+//\t\t\terror (SWT.ERROR_NO_HANDLES);", "+//\t\t}", "+//\t\tOS.SetMenuItemHierarchicalMenu (handle, (short) (index + 1), outMenuRef [0]);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4d7506db5dc896aca0c5d4e619f4efa4", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "4a9698f8803239b41ae26b8225684b00c21a1d84", "commitAfterChange": "6359cada2dc200304371adbfcf279dc183cb996e", "methodNumberBeforeChange": 42, "methodNumberAfterChange": 42, "signatureBeforeChange": "  int gtk_insert_text (int widget, int int0, int int1, int int2)", "signatureAfterChange": "  int gtk_insert_text (int widget, int new_text, int new_text_length, int position)", "diff": ["-int gtk_insert_text (int widget, int int0, int int1, int int2) {", "+int gtk_insert_text (int widget, int new_text, int new_text_length, int position) {", "-\t\tif (int0 == 0 || int1==0) return 0;", "-\t\tbyte [] buffer = new byte [int1];", "-\t\tOS.memmove (buffer, int0, buffer.length);", "+\t\tif (new_text == 0 || new_text_length == 0) return 0;", "+\t\tbyte [] buffer = new byte [new_text_length];", "+\t\tOS.memmove (buffer, new_text, buffer.length);", "-\t\tint [] position = new int [1];", "-\t\tOS.memmove (position, int2, 4);", "-\t\tif (position [0] == -1) position [0] = getCharCount ();", "-\t\tString newText = verifyText (oldText, position [0], position [0]); //WRONG POSITION", "+\t\tint [] pos = new int [1];", "+\t\tOS.memmove (pos, position, 4);", "+\t\tif (pos [0] == -1) pos [0] = getCharCount ();", "+\t\tString newText = verifyText (oldText, pos [0], pos [0]); //WRONG POSITION", "-\t\t\tOS.gtk_editable_insert_text (handle, buffer3, buffer3.length, position);", "+\t\t\tOS.gtk_editable_insert_text (handle, buffer3, buffer3.length, pos);", "+\t\t\tOS.memmove (position, pos, 4);", "-\t\tOS.memmove (iter, int0, iter.length);", "+\t\tOS.memmove (iter, new_text, iter.length);", "-\t\tbyte [] buffer = new byte [int2];", "-\t\tOS.memmove (buffer, int1, buffer.length);", "+\t\tbyte [] buffer = new byte [position];", "+\t\tOS.memmove (buffer, new_text_length, buffer.length);", "-\t\t\tOS.gtk_text_buffer_insert (bufferHandle, int0, buffer1, buffer1.length);", "+\t\t\tOS.gtk_text_buffer_insert (bufferHandle, new_text, buffer1, buffer1.length);"]}], "num": 13433}