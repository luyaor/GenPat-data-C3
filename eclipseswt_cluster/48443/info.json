{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2f4f9d7391d812ba3d10f884e9a48da0", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a6dc38faab763d0b879f302382d378af", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Button.java", "commitBeforeChange": "7dc0ed76c00a73244d89c00fb91aa296e1c8bb9a", "commitAfterChange": "283346df972bf05bab552efd3c4080f6b823b0e2", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "  void _setImage (Image image)", "signatureAfterChange": "  void _setImage (Image image)", "diff": ["-\tif (OS.COMCTL32_MAJOR >= 6 && OS.IsAppThemed ()) {", "-\t\tOS.SendMessage (handle, OS.BCM_SETIMAGELIST, 0, 0);", "+\tif (OS.COMCTL32_MAJOR >= 6) {", "-\t\t\timageList.add (image);", "+\t\t\timageList.add (image); //PBS_NORMAL", "+\t\t\t/*", "+\t\t\t* Bug in Windows.  When BCM_SETIMAGELIST is used to assign", "+\t\t\t* an image list with each of the button states, and the button", "+\t\t\t* has the style BS_CHECKBOX or BS_RADIOBUTTON, when the user", "+\t\t\t* drags the mouse in and out of the button when the state is", "+\t\t\t* set, the button draws using a blank image.  The fix is to", "+\t\t\t* set the complete image list only when the button is disabled.", "+\t\t\t*/", "+\t\t\tif (!OS.IsWindowEnabled (handle)) {", "+\t\t\t\timageList.add (image); //PBS_HOT", "+\t\t\t\timageList.add (image); //PBS_PRESSED", "+\t\t\t\tif (disabledImage != null) disabledImage.dispose ();", "+\t\t\t\tdisabledImage = new Image (display, image, SWT.IMAGE_DISABLE);", "+\t\t\t\timageList.add (disabledImage); //PBS_DISABLED", "+\t\t\t\timageList.add (image); //PBS_DEFAULTED", "+\t\t\t\timageList.add (image); //PBS_STYLUSHOT", "+\t\t\t}", "-\t\t\tif ((style & SWT.LEFT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_LEFT;", "-\t\t\tif ((style & SWT.CENTER) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_CENTER;", "-\t\t\tif ((style & SWT.RIGHT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_RIGHT;", "-\t\t\tTCHAR buffer = new TCHAR (getCodePage (), \"\", true);", "-\t\t\tOS.SetWindowText (handle, buffer);", "+\t\t\tint oldBits = OS.GetWindowLong (handle, OS.GWL_STYLE), newBits = oldBits;", "+\t\t\tnewBits &= ~(OS.BS_LEFT | OS.BS_CENTER | OS.BS_RIGHT);", "+\t\t\tif ((style & SWT.LEFT) != 0) newBits |= OS.BS_LEFT;", "+\t\t\tif ((style & SWT.CENTER) != 0) newBits |= OS.BS_CENTER;", "+\t\t\tif ((style & SWT.RIGHT) != 0) newBits |= OS.BS_RIGHT;", "+\t\t\tif (text.length () == 0) {", "+\t\t\t\tif ((style & SWT.LEFT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_LEFT;", "+\t\t\t\tif ((style & SWT.CENTER) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_CENTER;", "+\t\t\t\tif ((style & SWT.RIGHT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_RIGHT;", "+\t\t\t} else {", "+\t\t\t\tbuttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_LEFT;", "+\t\t\t\tbuttonImageList.margin_left = computeLeftMargin ();", "+\t\t\t\tbuttonImageList.margin_right = MARGIN;", "+\t\t\t\tnewBits &= ~(OS.BS_CENTER | OS.BS_RIGHT);", "+\t\t\t\tnewBits |= OS.BS_LEFT;", "+\t\t\t}", "+\t\t\tif (newBits != oldBits) {", "+\t\t\t\tOS.SetWindowLong (handle, OS.GWL_STYLE, newBits);", "+\t\t\t\tOS.InvalidateRect (handle, null, true);", "+\t\t\t}", "-\t\t\tTCHAR buffer = new TCHAR (getCodePage (), text, true);", "-\t\t\tOS.SetWindowText (handle, buffer);", "-\t\t\t", "-\t\tint newBits = OS.GetWindowLong (handle, OS.GWL_STYLE);", "-\t\tint oldBits = newBits;", "+\t\tint newBits = OS.GetWindowLong (handle, OS.GWL_STYLE), oldBits = newBits;", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a6814a20d85e56eaa912ca18b93995dd", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Button.java", "commitBeforeChange": "7dc0ed76c00a73244d89c00fb91aa296e1c8bb9a", "commitAfterChange": "283346df972bf05bab552efd3c4080f6b823b0e2", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 25, "signatureBeforeChange": " public void setAlignment (int alignment)", "signatureAfterChange": " public void setAlignment (int alignment)", "diff": ["-\tint bits = OS.GetWindowLong (handle, OS.GWL_STYLE);", "-\tbits &= ~(OS.BS_LEFT | OS.BS_CENTER | OS.BS_RIGHT);", "-\tif ((style & SWT.LEFT) != 0) bits |= OS.BS_LEFT;", "-\tif ((style & SWT.CENTER) != 0) bits |= OS.BS_CENTER;", "-\tif ((style & SWT.RIGHT) != 0) bits |= OS.BS_RIGHT;", "-\tOS.SetWindowLong (handle, OS.GWL_STYLE, bits);", "-\tif (OS.COMCTL32_MAJOR >= 6 && OS.IsAppThemed ()) {", "+\tint oldBits = OS.GetWindowLong (handle, OS.GWL_STYLE), newBits = oldBits;", "+\tnewBits &= ~(OS.BS_LEFT | OS.BS_CENTER | OS.BS_RIGHT);", "+\tif ((style & SWT.LEFT) != 0) newBits |= OS.BS_LEFT;", "+\tif ((style & SWT.CENTER) != 0) newBits |= OS.BS_CENTER;", "+\tif ((style & SWT.RIGHT) != 0) newBits |= OS.BS_RIGHT;", "+\tif (OS.COMCTL32_MAJOR >= 6) {", "-\t\t\tif ((style & SWT.LEFT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_LEFT;", "-\t\t\tif ((style & SWT.CENTER) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_CENTER;", "-\t\t\tif ((style & SWT.RIGHT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_RIGHT;", "+\t\t\tif (text.length () == 0) {", "+\t\t\t\tif ((style & SWT.LEFT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_LEFT;", "+\t\t\t\tif ((style & SWT.CENTER) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_CENTER;", "+\t\t\t\tif ((style & SWT.RIGHT) != 0) buttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_RIGHT;", "+\t\t\t} else {", "+\t\t\t\tbuttonImageList.uAlign = OS.BUTTON_IMAGELIST_ALIGN_LEFT;", "+\t\t\t\tbuttonImageList.margin_left = computeLeftMargin ();", "+\t\t\t\tbuttonImageList.margin_right = MARGIN;", "+\t\t\t\tnewBits &= ~(OS.BS_CENTER | OS.BS_RIGHT);", "+\t\t\t\tnewBits |= OS.BS_LEFT;", "+\t\t\t}", "-\tOS.InvalidateRect (handle, null, true);", "+\tif (newBits != oldBits) {", "+\t\tOS.SetWindowLong (handle, OS.GWL_STYLE, newBits);", "+\t\tOS.InvalidateRect (handle, null, true);", "+\t}"]}], "num": 48443}