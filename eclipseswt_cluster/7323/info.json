{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "d35bb05df27b46a49267b4c9b74d45b3", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6412d9236f16933e52ad9a961728fd16", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Accessibility/carbon/org/eclipse/swt/accessibility/Accessible.java", "commitBeforeChange": "e38f7ba08e4cd9896dddbc5916c5187c2e1b63eb", "commitAfterChange": "7349d1b65ee9a9edeeac8e2e96a33b2c8d655b80", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": " \t \tint getFocusedAttribute (int nextHandler, int theEvent, int userData)", "signatureAfterChange": " \t \tint getFocusedAttribute (int nextHandler, int theEvent, int userData)", "diff": ["-\t\tint code = OS.CallNextEventHandler (nextHandler, theEvent);", "-\t\tboolean osFocusedAttribute = false;", "-\t\tint [] booleanRef = new int [1];", "-\t\tif (code == OS.noErr) {", "-\t\t\tint status = OS.GetEventParameter (theEvent, OS.kEventParamAccessibleAttributeValue, OS.typeCFBooleanRef, null, 4, null, booleanRef);", "-\t\t\tif (status == OS.noErr) {", "-\t\t\t\tosFocusedAttribute = booleanRef [0] != 0;", "-\t\t\t}", "-\t\t}", "+\t\tint osChildID = getChildIDFromEvent(theEvent);", "-\t\tevent.childID = getChildIDFromEvent(theEvent);", "+\t\tevent.childID = ACC.CHILDID_MULTIPLE; // set to impossible value to test if app resets", "+\t\tevent.accessible = null;", "-\t\treturn OS.noErr;", "+\t\tif (event.accessible != null) {", "+\t\t\tif (OS.CFEqual(event.accessible.axuielementref, osChildID)) {", "+\t\t\t\tOS.SetEventParameter (theEvent, OS.kEventParamAccessibleAttributeValue, OS.typeBoolean, 4, new boolean [] {true});", "+\t\t\t\treturn OS.noErr;", "+\t\t\t}", "+\t\t}", "+\t\tif (event.childID == ACC.CHILDID_NONE) {", "+\t\t\tOS.SetEventParameter (theEvent, OS.kEventParamAccessibleAttributeValue, OS.typeBoolean, 4, new boolean [] {false});", "+\t\t\treturn OS.noErr;", "+\t\t}", "+\t\tif (event.childID != ACC.CHILDID_MULTIPLE) {", "+\t\t\tboolean hasFocus = OS.CFEqual(childIDToOs(event.childID), osChildID); // This will test for CHILDID_SELF also.", "+\t\t\tOS.SetEventParameter (theEvent, OS.kEventParamAccessibleAttributeValue, OS.typeBoolean, 4, new boolean [] {hasFocus});", "+\t\t\treturn OS.noErr;", "+\t\t}", "+\t\t// TODO: If the app does not implement getFocus, return the native focus", "+//\t\tif (OS.CFEqual(axuielementref, osChildID)) {", "+//\t\t\tboolean hasFocus = control.isFocusControl();", "+//\t\t\tOS.SetEventParameter (theEvent, OS.kEventParamAccessibleAttributeValue, OS.typeBoolean, 4, new boolean [] {hasFocus});", "+//\t\t\treturn OS.noErr;", "+//\t\t}", "+\t\treturn OS.CallNextEventHandler (nextHandler, theEvent);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ae447a51dd6689efe6ccf36ae6f2fefc", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 13, "signatureBeforeChange": " int defaultForeground ()", "signatureAfterChange": "  void drawWidget (int control)", "diff": ["+", "+void drawWidget (int control) {", "+\tOS.TXNDraw (txnObject, 0);", "+\tRect rect = new Rect ();", "+\tOS.GetControlBounds (handle, rect);", "+\tRect inset = inset ();", "+\trect.left += inset.left;", "+\trect.top += inset.top;", "+\trect.right -= inset.right;", "+\trect.bottom -= inset.bottom;", "+\tif (hasBorder ()) {", "+\t\tint state = OS.IsControlActive (handle) ? OS.kThemeStateActive : OS.kThemeStateInactive;", "+\t\tif (hasFocus ()) {", "+\t\t\tOS.DrawThemeEditTextFrame (rect, state);", "+\t\t\tOS.DrawThemeFocusRect (rect, true);", "+\t\t} else {", "+\t\t\tOS.DrawThemeFocusRect (rect, false);", "+\t\t\tOS.DrawThemeEditTextFrame (rect, state);", "+\t\t}", "+\t} else {", "+\t\tOS.DrawThemeFocusRect (rect, hasFocus ());", "-}", "-int defaultForeground () {", "-\treturn getDisplay ().textForeground;", "-}"]}], "num": 7323}