{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "10ffa57a5cfa409c7fdf77b2c79c5673", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9f603e5f05151ce9ebf4682a582b0f07", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/carbon/org/eclipse/swt/dnd/DragSource.java", "commitBeforeChange": "5be5fff68efd319c9da7258093d3f3f2cda599f7", "commitAfterChange": "00da0905d97ffea48b43d35672001260f4e19536", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "  void drag(Event dragEvent)", "signatureAfterChange": "  void drag(Event dragEvent)", "diff": ["-\t\tEventRecord theEvent = new EventRecord();", "-\t\ttheEvent.message = OS.kEventMouseMoved;", "-\t\ttheEvent.modifiers = (short)OS.GetCurrentEventKeyModifiers();", "-\t\ttheEvent.what = (short)OS.osEvt;", "-\t\ttheEvent.where_h = (short)pt.h;", "-\t\ttheEvent.where_v = (short)pt.v;\t", "-\t\tint result = OS.TrackDrag(theDrag[0], theEvent, theRegion);", "-\t\t", "-\t\tint operation = DND.DROP_NONE;", "-\t\tif (result == OS.noErr) { ", "-\t\t\tint[] outAction = new int[1];", "-\t\t\tOS.GetDragDropAction(theDrag[0], outAction);", "-\t\t\toperation = osOpToOp(outAction[0]);", "+\t\tImageData imageData = effect.getDragSourceImage(dragEvent.x, dragEvent.y);", "+\t\tImage image = null;", "+\t\ttry {", "+\t\t\tif (imageData != null) {", "+\t\t\t\timage = new Image(getDisplay(), imageData);", "+\t\t\t\tCGPoint imageOffsetPt = new CGPoint();", "+\t\t\t\timageOffsetPt.x = 5;", "+\t\t\t\timageOffsetPt.y = 5;", "+\t\t\t\tOS.SetDragImageWithCGImage(theDrag[0], image.handle, imageOffsetPt, 0); //kDragStandardTranslucency", "+\t\t\t}", "+\t\t\tEventRecord theEvent = new EventRecord();", "+\t\t\ttheEvent.message = OS.kEventMouseMoved;", "+\t\t\ttheEvent.modifiers = (short)OS.GetCurrentEventKeyModifiers();", "+\t\t\ttheEvent.what = (short)OS.osEvt;", "+\t\t\ttheEvent.where_h = pt.h;", "+\t\t\ttheEvent.where_v = pt.v;\t", "+\t\t\tint result = OS.TrackDrag(theDrag[0], theEvent, theRegion);", "+\t\t\tint operation = DND.DROP_NONE;", "+\t\t\tif (result == OS.noErr) { ", "+\t\t\t\tint[] outAction = new int[1];", "+\t\t\t\tOS.GetDragDropAction(theDrag[0], outAction);", "+\t\t\t\toperation = osOpToOp(outAction[0]);", "+\t\t\t}\t", "+\t\t\tevent = new DNDEvent();", "+\t\t\tevent.widget = this;", "+\t\t\tevent.time = (int)System.currentTimeMillis();", "+\t\t\tevent.doit = result == OS.noErr;", "+\t\t\tevent.detail = operation; ", "+\t\t\tnotifyListeners(DND.DragEnd, event);", "+\t\t} finally {", "+\t\t\tif (image != null) image.dispose();", "-\t\t", "-\t\tevent = new DNDEvent();", "-\t\tevent.widget = this;", "-\t\tevent.time = (int)System.currentTimeMillis();", "-\t\tevent.doit = result == OS.noErr;", "-\t\tevent.detail = operation; ", "-\t\tnotifyListeners(DND.DragEnd, event);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "66b81375ca94262a927c7150e1a2b1a0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/carbon/org/eclipse/swt/dnd/DragSource.java", "commitBeforeChange": "f8fe23a917bfec64ec37ec88389dd25746799609", "commitAfterChange": "0e099db276518a9c35b41186cb26d354cbc1f9c9", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "  void drag(Event dragEvent)", "signatureAfterChange": "  void drag(Event dragEvent)", "diff": ["-\tevent.feedback = DND.FEEDBACK_DEFAULT;", "-\t\tImageData imageData = effect.getDragSourceImage(dragEvent.x, dragEvent.y);", "-\t\tImage image = null;", "-\t\ttry {", "-\t\t\tif (imageData != null) {", "-\t\t\t\timage = new Image(getDisplay(), imageData);", "-\t\t\t\tCGPoint imageOffsetPt = new CGPoint();", "-\t\t\t\timageOffsetPt.x = 0;", "-\t\t\t\timageOffsetPt.y = 0;", "-\t\t\t\tOS.SetDragImageWithCGImage(theDrag[0], image.handle, imageOffsetPt, OS.kDragStandardTranslucency);", "-\t\t\t}", "-\t\t\tEventRecord theEvent = new EventRecord();", "-\t\t\ttheEvent.message = OS.kEventMouseMoved;", "-\t\t\ttheEvent.modifiers = (short)OS.GetCurrentEventKeyModifiers();", "-\t\t\ttheEvent.what = (short)OS.osEvt;", "-\t\t\ttheEvent.where_h = pt.h;", "-\t\t\ttheEvent.where_v = pt.v;\t", "-\t\t\tint result = OS.TrackDrag(theDrag[0], theEvent, theRegion);", "-\t\t\tint operation = DND.DROP_NONE;", "-\t\t\tif (result == OS.noErr) { ", "-\t\t\t\tint[] outAction = new int[1];", "-\t\t\t\tOS.GetDragDropAction(theDrag[0], outAction);", "-\t\t\t\toperation = osOpToOp(outAction[0]);", "-\t\t\t}\t", "-\t\t\tevent = new DNDEvent();", "-\t\t\tevent.widget = this;", "-\t\t\tevent.time = (int)System.currentTimeMillis();", "-\t\t\tevent.doit = result == OS.noErr;", "-\t\t\tevent.detail = operation; ", "-\t\t\tnotifyListeners(DND.DragEnd, event);", "-\t\t} finally {", "-\t\t\tif (image != null) image.dispose();", "+\t\tImage image = event.image;", "+\t\tif (image != null) {", "+\t\t\tCGPoint imageOffsetPt = new CGPoint();", "+\t\t\timageOffsetPt.x = 0;", "+\t\t\timageOffsetPt.y = 0;", "+\t\t\tOS.SetDragImageWithCGImage(theDrag[0], image.handle, imageOffsetPt, OS.kDragStandardTranslucency);", "+\t\tEventRecord theEvent = new EventRecord();", "+\t\ttheEvent.message = OS.kEventMouseMoved;", "+\t\ttheEvent.modifiers = (short)OS.GetCurrentEventKeyModifiers();", "+\t\ttheEvent.what = (short)OS.osEvt;", "+\t\ttheEvent.where_h = pt.h;", "+\t\ttheEvent.where_v = pt.v;\t", "+\t\tint result = OS.TrackDrag(theDrag[0], theEvent, theRegion);", "+\t\tint operation = DND.DROP_NONE;", "+\t\tif (result == OS.noErr) { ", "+\t\t\tint[] outAction = new int[1];", "+\t\t\tOS.GetDragDropAction(theDrag[0], outAction);", "+\t\t\toperation = osOpToOp(outAction[0]);", "+\t\t}\t", "+\t\tevent = new DNDEvent();", "+\t\tevent.widget = this;", "+\t\tevent.time = (int)System.currentTimeMillis();", "+\t\tevent.doit = result == OS.noErr;", "+\t\tevent.detail = operation; ", "+\t\tnotifyListeners(DND.DragEnd, event);"]}], "num": 33572}