{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "918de9232f37b1f6c0deb6c17156a6b2", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "47ea7e1636901d5196e4ac6b471f5092", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Spinner.java", "commitBeforeChange": "991749f7f8d70b27654548d75f2e2ea9b6410c4f", "commitAfterChange": "228eb4049daca5bb2e99b6953c43092e18d962b8", "methodNumberBeforeChange": 35, "methodNumberAfterChange": 35, "signatureBeforeChange": "  boolean sendKeyEvent (int type, Event event)", "signatureAfterChange": "  boolean sendKeyEvent (int type, Event event)", "diff": ["+//\tif (!hooks (SWT.Verify) && !filters (SWT.Verify)) return true;", "-\tif (hooks (SWT.Verify) || filters (SWT.Verify)) {", "-\t\tint [] actualSize = new int [1];", "-\t\tint [] ptr = new int [1];", "-\t\tint charCount = 0;", "-\t\tif (OS.GetControlData (textHandle, (short)OS.kControlEntireControl, OS.kControlEditTextCFStringTag, 4, ptr, actualSize) == OS.noErr) {", "-\t\t\tcharCount = OS.CFStringGetLength (ptr [0]);", "-\t\t\tOS.CFRelease (ptr [0]);", "-\t\t} ", "-\t\tshort [] selection = new short [2];", "-\t\tOS.GetControlData (textHandle, (short)OS.kControlEntireControl, OS.kControlEditTextSelectionTag, 4, selection, null);", "-\t\tint start = selection [0], end = selection [1];", "-\t\tswitch (event.character) {", "-\t\t\tcase SWT.BS:", "-\t\t\t\tif (start == end) {", "-\t\t\t\t\tif (start == 0) return true;", "-\t\t\t\t\tstart = Math.max (0, start - 1);", "-\t\t\t\t}", "-\t\t\t\tbreak;", "-\t\t\tcase SWT.DEL:", "-\t\t\t\tif (start == end) {", "-\t\t\t\t\tif (start == charCount) return true;", "-\t\t\t\t\tend = Math.min (end + 1, charCount);", "-\t\t\t\t}", "-\t\t\t\tbreak;", "-\t\t\tcase SWT.CR:", "-\t\t\t\treturn true;", "-\t\t\tdefault:", "-\t\t\t\tif (event.character != '\\t' && event.character < 0x20) return true;", "-\t\t\t\toldText = new String (new char [] {event.character});", "-\t\t}", "-\t\tnewText = verifyText (oldText, start, end, event);", "-\t\tif (newText == null) return false;", "-\t\tif (newText != oldText) {", "-\t\t\tsetText (newText, start, end, false);", "-\t\t\tstart += newText.length ();", "-\t\t\tselection = new short [] {(short)start, (short)start };", "-\t\t\tOS.SetControlData (textHandle, (short)OS.kControlEntireControl, OS.kControlEditTextSelectionTag, 4, selection);", "-\t\t}", "+\tint [] actualSize = new int [1];", "+\tint [] ptr = new int [1];", "+\tint charCount = 0;", "+\tif (OS.GetControlData (textHandle, (short)OS.kControlEntireControl, OS.kControlEditTextCFStringTag, 4, ptr, actualSize) == OS.noErr) {", "+\t\tcharCount = OS.CFStringGetLength (ptr [0]);", "+\t\tOS.CFRelease (ptr [0]);", "+\t} ", "+\tshort [] selection = new short [2];", "+\tOS.GetControlData (textHandle, (short)OS.kControlEntireControl, OS.kControlEditTextSelectionTag, 4, selection, null);", "+\tint start = selection [0], end = selection [1];", "+\tswitch (event.character) {", "+\t\tcase SWT.BS:", "+\t\t\tif (start == end) {", "+\t\t\t\tif (start == 0) return true;", "+\t\t\t\tstart = Math.max (0, start - 1);", "+\t\t\t}", "+\t\t\tbreak;", "+\t\tcase SWT.DEL:", "+\t\t\tif (start == end) {", "+\t\t\t\tif (start == charCount) return true;", "+\t\t\t\tend = Math.min (end + 1, charCount);", "+\t\t\t}", "+\t\t\tbreak;", "+\t\tcase SWT.CR:", "+\t\t\treturn true;", "+\t\tdefault:", "+\t\t\tif (event.character != '\\t' && event.character < 0x20) return true;", "+\t\t\toldText = new String (new char [] {event.character});", "+\t}", "+\tnewText = verifyText (oldText, start, end, event);", "+\tif (newText == null) return false;", "+\tif (newText != oldText) {", "+\t\tsetText (newText, start, end, false);", "+\t\tstart += newText.length ();", "+\t\tselection = new short [] {(short)start, (short)start };", "+\t\tOS.SetControlData (textHandle, (short)OS.kControlEntireControl, OS.kControlEditTextSelectionTag, 4, selection);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5f7b3526148194376386aceeff822759", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "ff3cadaa049c759729d9bc97390eb051b58a23a3", "commitAfterChange": "79cbb8566728e79bfa5ec879b944eb52f93e4274", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 36, "signatureBeforeChange": "  int kEventRawKeyDown (int nextHandler, int theEvent, int userData)", "signatureAfterChange": "  boolean sendKeyEvent (int type, Event event)", "diff": ["-int kEventRawKeyDown (int nextHandler, int theEvent, int userData) {", "-\tint result = super.kEventRawKeyDown (nextHandler, theEvent, userData);", "-\tif (result == OS.noErr) return result;", "-\tint [] keyCode = new int [1];", "-\tOS.GetEventParameter (theEvent, OS.kEventParamKeyCode, OS.typeUInt32, null, keyCode.length * 4, null, keyCode);", "-\tif (keyCode [0] == 36) { //CR", "-\t\tsendEvent (SWT.DefaultSelection);", "-\t\treturn OS.noErr;", "-\t}", "-\treturn OS.eventNotHandledErr;", "-}", "+boolean sendKeyEvent (int type, Event event) {", "+\t//NEEDS WORK - start/end and CR", "+\tif (!super.sendKeyEvent (type, event)) {", "+\t\treturn false;", "+\t}", "+\tif (type != SWT.KeyDown) return true;", "+\tif (event.character == 0) return true;", "+\tif ((style & SWT.READ_ONLY) != 0) return false;", "+\tString oldText = \"\";", "+\t//int charCount = getCharCount ();", "+\t//Point selection = getSelection ();", "+\tint [] ptr = new int [1];", "+\tint [] actualSize = new int [1];", "+\tint charCount;", "+\tint result = OS.GetControlData (handle, (short)OS.kHIComboBoxEditTextPart, OS.kControlEditTextCFStringTag, 4, ptr, actualSize);", "+\tif (result == OS.noErr) {", "+\t\tcharCount = OS.CFStringGetLength (ptr [0]);", "+\t\tOS.CFRelease (ptr [0]);", "+\t} else {", "+\t\tcharCount = 0;", "+\t}", "+\tPoint selection = new Point (0, charCount - 1);", "+\tint start = selection.x, end = selection.y;", "+\tswitch (event.character) {", "+\t\tcase SWT.BS:", "+\t\t\tif (start == end) {", "+\t\t\t\tif (start == 0) return true;", "+\t\t\t\tstart = Math.max (0, start - 1);", "+\t\t\t}", "+\t\t\tbreak;", "+\t\tcase SWT.DEL:", "+\t\t\tif (start == end) {", "+\t\t\t\tif (start == charCount) return true;", "+\t\t\t\tend = Math.min (end + 1, charCount);", "+\t\t\t}", "+\t\t\tbreak;", "+\t\tcase SWT.CR:", "+\t\t\tif ((style & SWT.SINGLE) != 0) {", "+\t\t\t\tpostEvent (SWT.DefaultSelection);", "+\t\t\t\treturn true;", "+\t\t\t}", "+\t\t\tbreak;", "+\t\tdefault:", "+\t\t\tif (event.character != '\\t' && event.character < 0x20) return true;", "+\t\t\toldText = new String (new char [] {event.character});", "+\t}", "+\tString newText = verifyText (oldText, start, end);", "+\tif (newText == null) return false;", "+\tif (charCount - (end - start) + newText.length () > LIMIT/*textLimit*/) {", "+\t\treturn false;", "+\t}", "+\tif (newText != oldText) setText (newText);", "+\t/*", "+\t* Post the modify event so that the character will be inserted", "+\t* into the widget when the modify event is delivered.  Normally,", "+\t* modify events are sent but it is safe to post the event here", "+\t* because this method is called from the event loop.", "+\t*/", "+\tpostEvent (SWT.Modify);", "+\treturn newText == oldText;", "+}"]}], "num": 34486}