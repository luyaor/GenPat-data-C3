{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0aeb5cd4fa9859ae55fc24bbe74f248f", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b5017574d0b6a503bc6b9d6fdba63634", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "185b3d6f26eb0daceba066583e3836e94ad0a643", "commitAfterChange": "269a20bffa49783c6d0463d2cbc4f0d4f939b6bf", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 28, "signatureBeforeChange": " public void setMenu (Menu menu)", "signatureAfterChange": " public void setMenu (Menu menu)", "diff": ["-\tshort menuIndex = (short) (index + 1);", "-\tint outMenuRef [] = new int [1];", "+\tint menuHandle = 0;", "-\t\tif ((parent.style & SWT.BAR) != 0) {", "-\t\t\tif (OS.CreateNewMenu ((short) 0, 0, outMenuRef) != OS.noErr) {", "-\t\t\t\terror (SWT.ERROR_NO_HANDLES);", "-\t\t\t}", "-\t\t}", "+\t\tmenuHandle = createEmptyMenu ();", "-\t\tif ((parent.style & SWT.BAR) != 0) {", "-\t\t\tif (oldMenu == null) {", "-\t\t\t\tOS.GetMenuItemHierarchicalMenu (parent.handle, menuIndex, outMenuRef);", "-\t\t\t\tif (outMenuRef [0] != 0) {", "-\t\t\t\t\tOS.DisposeMenu (outMenuRef [0]);", "-\t\t\t\t}", "-\t\t\t}", "+\t\tif (oldMenu == null) \tdestroyEmptyMenu (index);", "+\t\tmenuHandle = menu.handle;", "+\t}", "+\tshort menuIndex = (short) (index + 1);", "+\tif (menuHandle != 0) {", "+\t\tint [] outString = new int [1];", "+\t\tif (OS.CopyMenuItemTextAsCFString (parent.handle, menuIndex, outString) != OS.noErr) {", "+\t\t\terror (SWT.ERROR_CANNOT_SET_MENU);", "-\t\toutMenuRef [0] = menu.handle;", "+\t\tOS.SetMenuTitleWithCFString (menuHandle, outString [0]);", "+\t\tOS.CFRelease (outString [0]);", "-\tint [] outString = new int [1];", "-\tif (OS.CopyMenuItemTextAsCFString (parent.handle, menuIndex, outString) != OS.noErr) {", "-\t\terror (SWT.ERROR_CANNOT_SET_MENU);", "-\t}", "-\tOS.SetMenuTitleWithCFString (outMenuRef [0], outString [0]);", "-\tOS.CFRelease (outString [0]);", "-\tif (OS.SetMenuItemHierarchicalMenu (parent.handle, menuIndex, outMenuRef [0]) != OS.noErr) {", "+\tif (OS.SetMenuItemHierarchicalMenu (parent.handle, menuIndex, menuHandle) != OS.noErr) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8ef55bb7230d2629695242477288d2a5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/MenuItem.java", "commitBeforeChange": "c2e593e3cbfc4496e068aef605abc9a7d9c3882a", "commitAfterChange": "723b1d512892bf38284a569af00c3d6fc1897f30", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": " public void setMenu (Menu menu)", "signatureAfterChange": " public void setMenu (Menu menu)", "diff": ["-//\t\t\tDisplay display = getDisplay ();", "-//\t\t\tshort menuID = display.nextMenuId ();", "-//\t\t\tif (OS.CreateNewMenu (menuID, 0, outMenuRef) != OS.noErr) {", "-//\t\t\t\terror (SWT.ERROR_NO_HANDLES);", "-//\t\t\t}", "+\t\t\tif (OS.CreateNewMenu ((short) 0, 0, outMenuRef) != OS.noErr) {", "+\t\t\t\terror (SWT.ERROR_NO_HANDLES);", "+\t\t\t}", "-//\t\t\t\tOS.GetMenuItemHierarchicalMenu (parent.handle, outIndex [0], outMenuRef);", "-//\t\t\t\tif (outMenuRef [0] != 0) {", "-//\t\t\t\t\tOS.DeleteMenu (OS.GetMenuID (outMenuRef [0]));", "-//\t\t\t\t\tOS.DisposeMenu (outMenuRef [0]);", "-//\t\t\t\t}", "+\t\t\t\tOS.GetMenuItemHierarchicalMenu (parent.handle, menuIndex, outMenuRef);", "+\t\t\t\tif (outMenuRef [0] != 0) {", "+\t\t\t\t\tOS.DisposeMenu (outMenuRef [0]);", "+\t\t\t\t}", "-\t\tint [] outString = new int [1];", "-\t\tif (OS.CopyMenuItemTextAsCFString (parent.handle, menuIndex, outString) != OS.noErr) {", "-\t\t\terror (SWT.ERROR_CANNOT_SET_MENU);", "-\t\t}", "-\t\tOS.SetMenuTitleWithCFString (outMenuRef [0], outString [0]);", "-\t\tOS.CFRelease (outString [0]);", "+\tint [] outString = new int [1];", "+\tif (OS.CopyMenuItemTextAsCFString (parent.handle, menuIndex, outString) != OS.noErr) {", "+\t\terror (SWT.ERROR_CANNOT_SET_MENU);", "+\t}", "+\tOS.SetMenuTitleWithCFString (outMenuRef [0], outString [0]);", "+\tOS.CFRelease (outString [0]);"]}], "num": 29509}