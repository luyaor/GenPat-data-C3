{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9b380cdd0d4d771373cb0be21525da41", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5be649c90883e08bcdf60260d1fc7540", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Program/carbon/org/eclipse/swt/program/Program.java", "commitBeforeChange": "40e406847bbec70e832cb5264f6ca01235f59b94", "commitAfterChange": "f76106b9a0a32393cf05026ec9c19b261ae68883", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public static Program [] getPrograms ()", "signatureAfterChange": " public static Program [] getPrograms ()", "diff": ["-\tif (OS.VERSION < 0x1040) {", "-\t\treturn new Program[]{};", "-\t}", "-\tfor (int i = 0; i < extensions.length; i++) {", "-\t\tString extension = extensions[i];", "-\t\tchar[] chars = new char[extension.length() - 1];", "-\t\textension.getChars(1, extension.length(), chars, 0);", "-\t\tint ext = OS.CFStringCreateWithCharacters(OS.kCFAllocatorDefault, chars, chars.length);", "-\t\tif (ext != 0) {", "-\t\t\tint utis = OS.UTTypeCreateAllIdentifiersForTag(OS.kUTTagClassFilenameExtension(), ext, 0);", "-\t\t\tif (utis != 0) {", "-\t\t\t\tint utiCount = OS.CFArrayGetCount(utis);", "-\t\t\t\tfor (int j = 0; j < utiCount; j++) {", "-\t\t\t\t\tint uti = OS.CFArrayGetValueAtIndex(utis, j);", "-\t\t\t\t\tif (uti != 0) {", "-\t\t\t\t\t\tint apps = OS.LSCopyAllRoleHandlersForContentType(uti, OS.kLSRolesAll);", "-\t\t\t\t\t\tif (apps != 0) {", "-\t\t\t\t\t\t\tint appCount = OS.CFArrayGetCount(apps);", "-\t\t\t\t\t\t\tfor (int k = 0; k < appCount; k++) {", "-\t\t\t\t\t\t\t\tint app = OS.CFArrayGetValueAtIndex(apps, k);", "-\t\t\t\t\t\t\t\tif (app != 0) {", "-\t\t\t\t\t\t\t\t\tint length = OS.CFStringGetLength(app);", "-\t\t\t\t\t\t\t\t\tif (length != 0) {", "-\t\t\t\t\t\t\t\t\t\tchar[] buffer= new char[length];", "-\t\t\t\t\t\t\t\t\t\tCFRange range = new CFRange();", "-\t\t\t\t\t\t\t\t\t\trange.length = length;", "-\t\t\t\t\t\t\t\t\t\tOS.CFStringGetCharacters(app, range, buffer);", "-\t\t\t\t\t\t\t\t\t\tString bundleID = new String(buffer);", "-\t\t\t\t\t\t\t\t\t\tif (bundles.get(bundleID) == null) {", "-\t\t\t\t\t\t\t\t\t\t\tbyte[] fsRef = new byte[80];", "-\t\t\t\t\t\t\t\t\t\t\tif (OS.LSFindApplicationForInfo(OS.kLSUnknownCreator, app,\t0, fsRef, null) == OS.noErr) {", "-\t\t\t\t\t\t\t\t\t\t\t\tProgram program = getProgram(fsRef);", "-\t\t\t\t\t\t\t\t\t\t\t\tbundles.put(bundleID, program);", "+\tif (OS.VERSION < 0x1040) {", "+\t\tfor (int i = 0; i < extensions.length; i++) {", "+\t\t\tProgram program = findProgram(extensions[i]);", "+\t\t\tif (program != null && bundles.get(program.getName()) == null) {", "+\t\t\t\tbundles.put(program.getName(), program);", "+\t\t\t}", "+\t\t}", "+\t} else {", "+\t\tfor (int i = 0; i < extensions.length; i++) {", "+\t\t\tString extension = extensions[i];", "+\t\t\tchar[] chars = new char[extension.length() - 1];", "+\t\t\textension.getChars(1, extension.length(), chars, 0);", "+\t\t\tint ext = OS.CFStringCreateWithCharacters(OS.kCFAllocatorDefault, chars, chars.length);", "+\t\t\tif (ext != 0) {", "+\t\t\t\tint utis = OS.UTTypeCreateAllIdentifiersForTag(OS.kUTTagClassFilenameExtension(), ext, 0);", "+\t\t\t\tif (utis != 0) {", "+\t\t\t\t\tint utiCount = OS.CFArrayGetCount(utis);", "+\t\t\t\t\tfor (int j = 0; j < utiCount; j++) {", "+\t\t\t\t\t\tint uti = OS.CFArrayGetValueAtIndex(utis, j);", "+\t\t\t\t\t\tif (uti != 0) {", "+\t\t\t\t\t\t\tint apps = OS.LSCopyAllRoleHandlersForContentType(uti, OS.kLSRolesAll);", "+\t\t\t\t\t\t\tif (apps != 0) {", "+\t\t\t\t\t\t\t\tint appCount = OS.CFArrayGetCount(apps);", "+\t\t\t\t\t\t\t\tfor (int k = 0; k < appCount; k++) {", "+\t\t\t\t\t\t\t\t\tint app = OS.CFArrayGetValueAtIndex(apps, k);", "+\t\t\t\t\t\t\t\t\tif (app != 0) {", "+\t\t\t\t\t\t\t\t\t\tint length = OS.CFStringGetLength(app);", "+\t\t\t\t\t\t\t\t\t\tif (length != 0) {", "+\t\t\t\t\t\t\t\t\t\t\tchar[] buffer= new char[length];", "+\t\t\t\t\t\t\t\t\t\t\tCFRange range = new CFRange();", "+\t\t\t\t\t\t\t\t\t\t\trange.length = length;", "+\t\t\t\t\t\t\t\t\t\t\tOS.CFStringGetCharacters(app, range, buffer);", "+\t\t\t\t\t\t\t\t\t\t\tString bundleID = new String(buffer);", "+\t\t\t\t\t\t\t\t\t\t\tif (bundles.get(bundleID) == null) {", "+\t\t\t\t\t\t\t\t\t\t\t\tbyte[] fsRef = new byte[80];", "+\t\t\t\t\t\t\t\t\t\t\t\tif (OS.LSFindApplicationForInfo(OS.kLSUnknownCreator, app,\t0, fsRef, null) == OS.noErr) {", "+\t\t\t\t\t\t\t\t\t\t\t\t\tProgram program = getProgram(fsRef);", "+\t\t\t\t\t\t\t\t\t\t\t\t\tbundles.put(bundleID, program);", "+\t\t\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tOS.CFRelease(apps);", "-\t\t\t\t\t\t\tOS.CFRelease(apps);", "+\t\t\t\t\tOS.CFRelease(utis);", "-\t\t\t\tOS.CFRelease(utis);", "+\t\t\t\tOS.CFRelease(ext);", "-\t\t\tOS.CFRelease(ext);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8985e950bd1b0ff12aa0a9cc4cbf4ab3", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Browser/carbon/org/eclipse/swt/browser/Browser.java", "commitBeforeChange": "9ce66105e41de2817c2d7abdf2d052bfdbd204cb", "commitAfterChange": "c880d8fddc142a4330f75728b45eed168a0f7052", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": " public boolean setUrl(String url)", "signatureAfterChange": " public boolean setUrl(String url)", "diff": ["-\tint length = url.length();", "-\tchar[] buffer = new char[length];", "-\turl.getChars(0, length, buffer, 0);", "-\tint sHandle = OS.CFStringCreateWithCharacters(0, buffer, length);", "+\tStringBuffer buffer = new StringBuffer();", "+\tfor (int i = 0; i < url.length(); i++) {", "+\t\tchar c = url.charAt(i);", "+\t\tif (c == ' ') buffer.append(\"%20\");", "+\t\telse buffer.append(c);", "+\t}", "+\t", "+\tint length = buffer.length();", "+\tchar[] chars = new char[length];", "+\tbuffer.getChars(0, length, chars, 0);", "+\tint sHandle = OS.CFStringCreateWithCharacters(0, chars, length);"]}], "num": 18944}