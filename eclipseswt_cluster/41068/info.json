{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e7eb76a8f7ead17c6d0025cef6a4dfcd", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4fbe1f95c1e8411b59aaff40895096bd", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "e2c2a7a74542ff409e980bc4b2fbaa161b141be9", "commitAfterChange": "06b0b6bb52d1fd2fb63bfd651ac4ecf3e0f11d0d", "methodNumberBeforeChange": 38, "methodNumberAfterChange": 38, "signatureBeforeChange": " public void remove (int start, int end)", "signatureAfterChange": " public void remove (int start, int end)", "diff": ["-\tint length = OS.GetWindowTextLength (handle);", "+\tint textLength = OS.GetWindowTextLength (handle);", "+\tRECT rect = null;", "+\tint hDC = 0, oldFont = 0, newFont = 0, newWidth = 0;", "+\tif ((style & SWT.H_SCROLL) != 0) {", "+\t\trect = new RECT ();", "+\t\thDC = OS.GetDC (handle);", "+\t\tnewFont = OS.SendMessage (handle, OS.WM_GETFONT, 0, 0);", "+\t\tif (newFont != 0) oldFont = OS.SelectObject (hDC, newFont);", "+\t}", "+\tint cp = getCodePage ();", "+\tint flags = OS.DT_CALCRECT | OS.DT_SINGLELINE | OS.DT_NOPREFIX;", "+\t\tTCHAR buffer = null;", "+\t\tif ((style & SWT.H_SCROLL) != 0) {", "+\t\t\tint length = OS.SendMessage (handle, OS.CB_GETLBTEXTLEN, start, 0);", "+\t\t\tif (length == OS.CB_ERR) break;", "+\t\t\tbuffer = new TCHAR (cp, length + 1);", "+\t\t\tint result = OS.SendMessage (handle, OS.CB_GETLBTEXT, start, buffer);", "+\t\t\tif (result == OS.CB_ERR) break;", "+\t\t}", "+\t\tif ((style & SWT.H_SCROLL) != 0) {", "+\t\t\tOS.DrawText (hDC, buffer, -1, rect, flags);", "+\t\t\tnewWidth = Math.max (newWidth, rect.right - rect.left);", "+\t\t}", "-\tif (length != OS.GetWindowTextLength (handle)) {", "-\t\t/*", "-\t\t* It is possible (but unlikely), that application", "-\t\t* code could have disposed the widget in the modify", "-\t\t* event.  If this happens, just return.", "-\t\t*/", "+\tif ((style & SWT.H_SCROLL) != 0) {", "+\t\tif (newFont != 0) OS.SelectObject (hDC, oldFont);", "+\t\tOS.ReleaseDC (handle, hDC);", "+\t\tsetScrollWidth (newWidth, false);", "+\t}", "+\tif (textLength != OS.GetWindowTextLength (handle)) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "79037de73800270834ae89a15a3a2983", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/TableItem.java", "commitBeforeChange": "d1b62f67e6198f629fa2f6b243b4b3c279397a30", "commitAfterChange": "678527ffefbe64dffee7b04e05293b36ab0a837c", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 12, "signatureBeforeChange": "  RECT getBounds (int row, int column, boolean getText, boolean getImage, boolean fullText, boolean fullImage, int hDC)", "signatureAfterChange": "  RECT getBounds (int row, int column, boolean getText, boolean getImage, boolean fullText, boolean fullImage, int hDC)", "diff": ["-\t\tif (hDC != 0 && parent.explorerTheme) {", "+\t\tif (parent.explorerTheme) {", "-\t\t\tint code = OS.SendMessage (hwnd, OS. LVM_GETSUBITEMRECT, row, rect);", "+\t\t\tint code = OS.SendMessage (hwnd, OS. LVM_GETITEMRECT, row, rect);", "-\t\t\t\tRECT textRect = new RECT ();", "-\t\t\t\tTCHAR buffer = new TCHAR (parent.getCodePage (), text, false);", "-\t\t\t\tint flags = OS.DT_NOPREFIX | OS.DT_SINGLELINE | OS.DT_CALCRECT;", "-\t\t\t\tOS.DrawText (hDC, buffer, buffer.length (), textRect, flags);", "+\t\t\t\tint width = 0;", "+\t\t\t\tint hFont = cellFont != null ? cellFont [column] : -1;", "+\t\t\t\tif (hFont == -1) hFont = font;", "+\t\t\t\tif (hFont == -1 && hDC == 0) {", "+\t\t\t\t\tTCHAR buffer = new TCHAR (parent.getCodePage (), text, true);", "+\t\t\t\t\twidth = OS.SendMessage (hwnd, OS.LVM_GETSTRINGWIDTH, 0, buffer);", "+\t\t\t\t} else {", "+\t\t\t\t\tTCHAR buffer = new TCHAR (parent.getCodePage (), text, false);", "+\t\t\t\t\tint textDC = hDC != 0 ? hDC : OS.GetDC (hwnd), oldFont = -1;", "+\t\t\t\t\tif (hDC == 0) {", "+\t\t\t\t\t\tif (hFont == -1) hFont = OS.SendMessage (hwnd, OS.WM_GETFONT, 0, 0);", "+\t\t\t\t\t\toldFont = OS.SelectObject (textDC, hFont);", "+\t\t\t\t\t}", "+\t\t\t\t\tRECT textRect = new RECT ();", "+\t\t\t\t\tint flags = OS.DT_NOPREFIX | OS.DT_SINGLELINE | OS.DT_CALCRECT;", "+\t\t\t\t\tOS.DrawText (textDC, buffer, buffer.length (), textRect, flags);", "+\t\t\t\t\twidth = textRect.right - textRect.left;", "+\t\t\t\t\tif (hDC == 0) {", "+\t\t\t\t\t\tif (oldFont != -1) OS.SelectObject (textDC, oldFont);", "+\t\t\t\t\t\tOS.ReleaseDC (hwnd, textDC);", "+\t\t\t\t\t}", "+\t\t\t\t}", "-\t\t\t\trect.right += textRect.right - textRect.left + Table.INSET * 3 + 1;", "+\t\t\t\trect.right += width + Table.INSET * 2;", "-\t\t\tif (getText && getImage) {", "+\t\t\tif (getText) {", "+\t\t\t\tparent.ignoreCustomDraw = true;", "+\t\t\t\tint code = OS.SendMessage (hwnd, OS.LVM_GETITEMRECT, row, rect);", "+\t\t\t\tparent.ignoreCustomDraw = false;", "+\t\t\t\tif (code == 0) return new RECT ();", "+\t\t\t\tif (!getImage) {", "+\t\t\t\t\tRECT iconRect = new RECT ();", "+\t\t\t\t\ticonRect.left = OS.LVIR_ICON;", "+\t\t\t\t\tparent.ignoreCustomDraw = true;", "+\t\t\t\t\tcode = OS.SendMessage (hwnd, OS. LVM_GETITEMRECT, row, iconRect);", "+\t\t\t\t\tparent.ignoreCustomDraw = false;", "+\t\t\t\t\tif (code != 0) rect.left = iconRect.right;", "+\t\t\t\t}", "-\t\t\t\trect.left = getText ? OS.LVIR_LABEL : OS.LVIR_ICON;", "+\t\t\t\trect.left = OS.LVIR_ICON;", "+\t\t\t\tparent.ignoreCustomDraw = true;", "+\t\t\t\tint code = OS.SendMessage (hwnd, OS.LVM_GETITEMRECT, row, rect);", "+\t\t\t\tparent.ignoreCustomDraw = false;", "+\t\t\t\tif (code == 0) return new RECT ();", "-\t\t\tparent.ignoreCustomDraw = true;", "-\t\t\tint code = OS.SendMessage (hwnd, OS.LVM_GETITEMRECT, row, rect);", "-\t\t\tparent.ignoreCustomDraw = false;", "-\t\t\tif (code == 0) return new RECT ();", "-\t\t\t* Bug in Windows.  Despite the fact that the documenation states", "+\t\t\t* Bug in Windows.  Despite the fact that the documentation states"]}], "num": 41068}