{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "111e7516993b1adca0263e699cfef0ac", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4155853ae84a70b2902fdcd6cf90b00e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/gtk/org/eclipse/swt/dnd/TextTransfer.java", "commitBeforeChange": "41379afd447e143f3a057620b8db69d0717b2e63", "commitAfterChange": "26a56a1cbfe587585a35a9712abb11e853344060", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public Object nativeToJava(TransferData transferData)", "signatureAfterChange": " public Object nativeToJava(TransferData transferData)", "diff": ["-\tbyte[] buffer = null;", "-\tif (transferData.type == COMPOUND_TEXT_ID) { \t", "-\t\tint /*long*/[] list = new int /*long*/[1];", "-\t\tint count = OS.gdk_text_property_to_utf8_list(transferData.type, transferData.format, transferData.pValue, transferData.length, list);", "-\t\tif (count == 0) return null;", "-\t\tint /*long*/[] ptr = new int /*long*/[1];", "-\t\tOS.memmove(ptr, list[0], OS.PTR_SIZEOF);", "-\t\tint length = OS.strlen(ptr[0]);", "-\t\tbuffer = new byte[length];", "-\t\tOS.memmove(buffer, ptr[0], length);", "-\t\tOS.g_strfreev(list[0]);", "-\t}", "-\tif (transferData.type == UTF8_STRING_ID ||", "-\t\ttransferData.type == STRING_ID) {", "-\t\tint size = transferData.format * transferData.length / 8;", "-\t\tif (size == 0) return null;", "-\t\tbuffer = new byte[size];", "-\t\tOS.memmove(buffer, transferData.pValue, size);", "-\t}", "-\tif (buffer == null) return null;", "-\t// convert byte array to a string", "-\tchar [] unicode = Converter.mbcsToWcs (null, buffer);", "+\tint /*long*/[] list = new int /*long*/[1];", "+\tint count = OS.gdk_text_property_to_utf8_list(transferData.type, transferData.format, transferData.pValue, transferData.length, list);", "+\tif (count == 0) return null;", "+\tint /*long*/[] ptr = new int /*long*/[1];", "+\tOS.memmove(ptr, list[0], OS.PTR_SIZEOF);", "+\tint length = OS.strlen(ptr[0]);", "+\tbyte[] utf8 = new byte[length];", "+\tOS.memmove(utf8, ptr[0], length);", "+\tOS.g_strfreev(list[0]);", "+\t// convert utf8 byte array to a unicode string", "+\tchar [] unicode = Converter.mbcsToWcs (null, utf8);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4d7506db5dc896aca0c5d4e619f4efa4", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Text.java", "commitBeforeChange": "4a9698f8803239b41ae26b8225684b00c21a1d84", "commitAfterChange": "6359cada2dc200304371adbfcf279dc183cb996e", "methodNumberBeforeChange": 42, "methodNumberAfterChange": 42, "signatureBeforeChange": "  int gtk_insert_text (int widget, int int0, int int1, int int2)", "signatureAfterChange": "  int gtk_insert_text (int widget, int new_text, int new_text_length, int position)", "diff": ["-int gtk_insert_text (int widget, int int0, int int1, int int2) {", "+int gtk_insert_text (int widget, int new_text, int new_text_length, int position) {", "-\t\tif (int0 == 0 || int1==0) return 0;", "-\t\tbyte [] buffer = new byte [int1];", "-\t\tOS.memmove (buffer, int0, buffer.length);", "+\t\tif (new_text == 0 || new_text_length == 0) return 0;", "+\t\tbyte [] buffer = new byte [new_text_length];", "+\t\tOS.memmove (buffer, new_text, buffer.length);", "-\t\tint [] position = new int [1];", "-\t\tOS.memmove (position, int2, 4);", "-\t\tif (position [0] == -1) position [0] = getCharCount ();", "-\t\tString newText = verifyText (oldText, position [0], position [0]); //WRONG POSITION", "+\t\tint [] pos = new int [1];", "+\t\tOS.memmove (pos, position, 4);", "+\t\tif (pos [0] == -1) pos [0] = getCharCount ();", "+\t\tString newText = verifyText (oldText, pos [0], pos [0]); //WRONG POSITION", "-\t\t\tOS.gtk_editable_insert_text (handle, buffer3, buffer3.length, position);", "+\t\t\tOS.gtk_editable_insert_text (handle, buffer3, buffer3.length, pos);", "+\t\t\tOS.memmove (position, pos, 4);", "-\t\tOS.memmove (iter, int0, iter.length);", "+\t\tOS.memmove (iter, new_text, iter.length);", "-\t\tbyte [] buffer = new byte [int2];", "-\t\tOS.memmove (buffer, int1, buffer.length);", "+\t\tbyte [] buffer = new byte [position];", "+\t\tOS.memmove (buffer, new_text_length, buffer.length);", "-\t\t\tOS.gtk_text_buffer_insert (bufferHandle, int0, buffer1, buffer1.length);", "+\t\t\tOS.gtk_text_buffer_insert (bufferHandle, new_text, buffer1, buffer1.length);"]}], "num": 50218}