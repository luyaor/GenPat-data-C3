{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "46bf9352c8b794aa2c150679d6bcfbe8", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8273363d48033098ecadfa1a339d78af", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "5eb478733e245d765f6b4943008f5b6fe8c50044", "commitAfterChange": "cc47e7b3a41e1f0f888d41d2dedf9501bc08fea3", "methodNumberBeforeChange": 41, "methodNumberAfterChange": 39, "signatureBeforeChange": " public void setVisible (boolean visible)", "signatureAfterChange": " public void setVisible (boolean visible)", "diff": ["-\t\t\t/*\r", "-\t\t\t* Feature in GTK.  When gtk_menu_popup() is called with no parent menu shell\r", "-\t\t\t* and parent menu item, the menu temporarily takes focus from the top level shell\r", "-\t\t\t* and then restores the focus when the menu pops down.  This behavior is not\r", "-\t\t\t* incorrect but is unwanted.  The fix is to create a temporary menu bar and item\r", "-\t\t\t* to pass to gtk_menu_popup().  This requires special code to pop down the\r", "-\t\t\t* menu when the user clicks outside of the menu and special code to ensure\r", "-\t\t\t* that an item is selected when it is pressed.\r", "-\t\t\t*/\r", "-\t\t\tint parentHandle = parent.fixedHandle;\r", "-\t\t\tint width = OS.GTK_WIDGET_WIDTH (parentHandle);\r", "-\t\t\tint height = OS.GTK_WIDGET_HEIGHT (parentHandle);\r", "-\t\t\tbarHandle = OS.gtk_menu_bar_new ();\r", "-\t\t\tif (barHandle == 0) error (SWT.ERROR_NO_HANDLES);\r", "-\t\t\tOS.gtk_container_add (parentHandle, barHandle);\r", "-\t\t\tOS.gtk_fixed_move (parentHandle, barHandle, width, height);\r", "-\t\t\tOS.gtk_widget_show (barHandle);\r", "-\t\t\tint itemHandle = OS.gtk_image_menu_item_new_with_label (new byte[1]);\r", "-\t\t\tif (itemHandle == 0) error (SWT.ERROR_NO_HANDLES);\r", "-\t\t\tOS.gtk_menu_shell_insert (barHandle, itemHandle, 0);\r", "-\t\t\tOS.gtk_widget_show (itemHandle);\r", "-\t\t\tOS.gtk_menu_shell_select_item (barHandle, itemHandle);\r", "-\t\t\tbarHandleCallback = new Callback (this, \"GtkMenuBarEventFunc\", 3);\r", "-\t\t\tint barHandleProc = barHandleCallback.getAddress ();\r", "-\t\t\tif (barHandleProc == 0) error (SWT.ERROR_NO_MORE_CALLBACKS);\r", "-\t\t\tOS.g_signal_connect (barHandle, OS.event_after, barHandleProc, 0);\r", "-\t\t\tOS.g_signal_connect (barHandle, OS.button_press_event, barHandleProc, SWT.MouseDown);\r", "-\r", "-\t\t\t/* Pop up the menu */\r", "-\t\t\tOS.gtk_menu_popup (handle, barHandle, itemHandle, address, 0, 0, OS.gtk_get_current_event_time());\r", "+\t\t\tOS.gtk_menu_popup (handle, 0, 0, address, 0, 0, OS.gtk_get_current_event_time());\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "93419382f625d50f1005727805210c39", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/ToolItem.java", "commitBeforeChange": "d771086aa977f99f068da574ec32efbca3c90084", "commitAfterChange": "7df4483d84bff3d62bcce7ab431b1b7000cedfd3", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 22, "signatureBeforeChange": "  @Override long gtk_create_menu_proxy (long widget)", "signatureAfterChange": "  @Override long gtk_create_menu_proxy (long widget)", "diff": ["-\t\t\t\t\tif (!OS.GTK3) {", "-\t\t\t\t\t\tlong /*int*/ property = OS.g_object_class_find_property(OS.G_OBJECT_GET_CLASS(settings), OS.gtk_menu_images);", "-\t\t\t\t\t\tif (property != 0) OS.g_object_get (settings, OS.gtk_menu_images, showImages, 0);", "-\t\t\t\t\t}", "+\t\t\t\t\tlong /*int*/ property = OS.g_object_class_find_property(OS.G_OBJECT_GET_CLASS(settings), OS.gtk_menu_images);", "+\t\t\t\t\tif (property != 0) OS.g_object_get (settings, OS.gtk_menu_images, showImages, 0);", "-\t\t\t\tlong /*int*/ menuItem;", "-\t\t\t\tif (OS.GTK3) {", "-", "-\t\t\t\t\tmenuItem = OS.gtk_menu_item_new ();", "-\t\t\t\t\tif (menuItem == 0) error (SWT.ERROR_NO_HANDLES);", "-", "-\t\t\t\t\tlong /*int*/ boxHandle = gtk_box_new (OS.GTK_ORIENTATION_HORIZONTAL, false, 6);", "-\t\t\t\t\tif (boxHandle == 0) error (SWT.ERROR_NO_HANDLES);", "-", "-\t\t\t\t\tlong /*int*/ menuLabel = OS.gtk_accel_label_new (label);", "-\t\t\t\t\tif (menuLabel == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\t\t\t\tif (OS.GTK_VERSION >= OS.VERSION (3, 16, 0)) {", "-\t\t\t\t\t\tOS.gtk_label_set_xalign (labelHandle, 0);", "-\t\t\t\t\t\tOS.gtk_widget_set_halign (labelHandle, OS.GTK_ALIGN_FILL);", "-\t\t\t\t\t} else {", "-\t\t\t\t\t\tOS.gtk_misc_set_alignment(labelHandle, 0, 0);", "-\t\t\t\t\t}", "-", "-\t\t\t\t\tlong /*int*/ menuImage = OS.gtk_image_new_from_pixbuf (pixbuf);", "-\t\t\t\t\tif (menuImage == 0) error (SWT.ERROR_NO_HANDLES);", "-", "-\t\t\t\t\tOS.gtk_container_add (boxHandle, menuImage);", "-\t\t\t\t\tOS.gtk_box_pack_end (boxHandle, menuLabel, true, true, 0);", "-\t\t\t\t\tOS.gtk_container_add (menuItem, boxHandle);", "-\t\t\t\t} else {", "-\t\t\t\t\tmenuItem = OS.gtk_image_menu_item_new_with_label (label);", "-\t\t\t\t\tif (menuItem == 0) error (SWT.ERROR_NO_HANDLES);", "-", "-\t\t\t\t\tlong /*int*/ menuImage = OS.gtk_image_new_from_pixbuf (pixbuf);", "-\t\t\t\t\tif (menuImage == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\t\t\t\tOS.gtk_image_menu_item_set_image (menuItem, menuImage);", "-\t\t\t\t}", "+\t\t\t\tlong /*int*/ menuItem = OS.gtk_image_menu_item_new_with_label (label);", "+\t\t\t\tlong /*int*/ menuImage = OS.gtk_image_new_from_pixbuf (pixbuf);", "+\t\t\t\tOS.gtk_image_menu_item_set_image (menuItem, menuImage);", "-"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3cde38e9fcd64ee4a82feba5f13bdccb", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Menu.java", "commitBeforeChange": "d771086aa977f99f068da574ec32efbca3c90084", "commitAfterChange": "7df4483d84bff3d62bcce7ab431b1b7000cedfd3", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": "  void createIMMenu (long imHandle)", "signatureAfterChange": "  void createIMMenu (long imHandle)", "diff": ["-\t\tif (OS.GTK3) {", "-\t\t\timItem = OS.gtk_menu_item_new ();", "-\t\t\tif (imItem == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\t\tlong /*int*/ imageHandle = 0;", "-\t\t\tlong /*int*/ labelHandle = OS.gtk_accel_label_new (buffer);", "-\t\t\tif (labelHandle == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\t\tif (OS.GTK_VERSION >= OS.VERSION (3, 16, 0)) {", "-\t\t\t\tOS.gtk_label_set_xalign (labelHandle, 0);", "-\t\t\t\tOS.gtk_widget_set_halign (labelHandle, OS.GTK_ALIGN_FILL);", "-\t\t\t} else {", "-\t\t\t\tOS.gtk_misc_set_alignment(labelHandle, 0, 0);", "-\t\t\t}", "-\t\t\tlong /*int*/ boxHandle = gtk_box_new (OS.GTK_ORIENTATION_HORIZONTAL, false, 0);", "-\t\t\tif (boxHandle == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\t\tif (OS.SWT_PADDED_MENU_ITEMS) {", "-\t\t\t\timageHandle = OS.gtk_image_new();", "-\t\t\t\tif (imageHandle == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\t\t\tOS.gtk_image_set_pixel_size (imageHandle, 16);", "-\t\t\t\tif (boxHandle != 0) {", "-\t\t\t\t\tOS.gtk_container_add (boxHandle, imageHandle);", "-\t\t\t\t\tOS.gtk_widget_show (imageHandle);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t\tif (labelHandle != 0 && boxHandle != 0) {", "-\t\t\t\tOS.gtk_box_pack_end (boxHandle, labelHandle, true, true, 0);", "-\t\t\t\tOS.gtk_widget_show (labelHandle);", "-\t\t\t}", "-\t\t\tif (boxHandle != 0) {", "-\t\t\t\tOS.gtk_container_add (imItem, boxHandle);", "-\t\t\t\tOS.gtk_widget_show (boxHandle);", "-\t\t\t}", "-\t\t} else {", "-\t\t\timItem = OS.gtk_image_menu_item_new_with_label (buffer);", "-\t\t\tif (imItem == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\t}", "+\t\timItem = OS.gtk_image_menu_item_new_with_label (buffer);"]}], "num": 27711}