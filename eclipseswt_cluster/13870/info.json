{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "1767358c52b00305efb7b83bbd97ec07", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1f3234d835c309c8efb0ed7dfe0bac32", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " public void add (String string)", "signatureAfterChange": "  public void add (String string)", "diff": ["- */", "-public void add (String string) {", "-\tcheckWidget();", "-\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);", "-\t", "-\tint sHandle= 0;", "-\ttry {", "-\t\tsHandle= OS.CFStringCreateWithCharacters(string);", "-\t\tif (menuHandle != 0) {", "-\t\t\tif (OS.AppendMenuItemTextWithCFString(menuHandle, sHandle, 0, fgCommandID++, null) != OS.kNoErr)", "-\t\t\t\terror (SWT.ERROR_ITEM_NOT_ADDED);", "-\t\t\tOS.SetControl32BitMaximum(handle, OS.CountMenuItems(menuHandle));\t", "-\t\t} else {", "-\t\t\tif (OS.HIComboBoxAppendTextItem(handle, sHandle) != OS.kNoErr)", "-\t\t\t\terror (SWT.ERROR_ITEM_NOT_ADDED);", "-\t\t}", "-\t} finally {", "-\t\tif (sHandle != 0)", "-\t\t\tOS.CFRelease(sHandle);", "-\t}", "-}", "+public void add (String string) {", "+\tcheckWidget ();", "+\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);\t", "+\t", "+\tchar [] buffer = new char [string.length ()];", "+\tstring.getChars (0, buffer.length, buffer, 0);", "+\tint ptr = OS.CFStringCreateWithCharacters (OS.kCFAllocatorDefault, buffer, buffer.length);", "+\tif (ptr == 0) error (SWT.ERROR_ITEM_NOT_ADDED);", "+\tint result;", "+\tif ((style & SWT.READ_ONLY) != 0) {", "+\t\tresult = OS.AppendMenuItemTextWithCFString (menuHandle, ptr, 0, 0, null);", "+\t} else {", "+\t\tresult = OS.HIComboBoxAppendTextItem (handle, ptr, null);", "+\tOS.CFRelease (ptr);", "+\tif (result != OS.noErr) error (SWT.ERROR_ITEM_NOT_ADDED);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6f8f8f25b5eb16f42a677e7971168784", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/widgets/Combo.java", "commitBeforeChange": "d063aea08192e0213a4b6532b27dc31f9dce6e1b", "commitAfterChange": "48ef0056097e65cbe2f990bf125c93e76b95da33", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public void add (String string, int index)", "signatureAfterChange": "  public void add (String string, int index)", "diff": ["- */", "-public void add (String string, int index) {", "-\tcheckWidget();", "-\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);", "-\tif (index == -1) error (SWT.ERROR_INVALID_RANGE);", "-\tint sHandle= 0;", "-\ttry {", "-\t\tsHandle= OS.CFStringCreateWithCharacters(string);", "-\t\tif (menuHandle != 0) {", "-\t\t\tif (OS.InsertMenuItemTextWithCFString(menuHandle, sHandle, (short)index, 0, fgCommandID++) != OS.kNoErr)", "-\t\t\t\terror (SWT.ERROR_ITEM_NOT_ADDED);", "-\t\t\tOS.SetControl32BitMaximum(handle, OS.CountMenuItems(menuHandle));\t", "-\t\t} else {", "-\t\t\tOS.HIComboBoxInsertTextItemAtIndex(handle, index, sHandle);", "-\t\t}", "-\t} finally {", "-\t\tif (sHandle != 0)", "-\t\t\tOS.CFRelease(sHandle);", "+", "+public void add (String string, int index) {", "+\tcheckWidget ();", "+\tif (string == null) error (SWT.ERROR_NULL_ARGUMENT);", "+\tint count = getItemCount ();", "+\tif (0 > index || index > count) error (SWT.ERROR_INVALID_RANGE);", "+\t", "+\tchar [] buffer = new char [string.length ()];", "+\tstring.getChars (0, buffer.length, buffer, 0);", "+\tint ptr = OS.CFStringCreateWithCharacters (OS.kCFAllocatorDefault, buffer, buffer.length);", "+\tif (ptr == 0) error (SWT.ERROR_ITEM_NOT_ADDED);", "+\tint result;", "+\tif ((style & SWT.READ_ONLY) != 0) {", "+\t\tresult = OS.InsertMenuItemTextWithCFString (menuHandle, ptr, (short)index, 0, 0);", "+\t} else {", "+\t\tresult = OS.HIComboBoxInsertTextItemAtIndex (handle, index, ptr);", "+\t}", "+\tOS.CFRelease (ptr);", "+\tif (result != OS.noErr) error (SWT.ERROR_ITEM_NOT_ADDED);", "+}"]}], "num": 13870}