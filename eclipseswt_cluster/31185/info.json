{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a2af3f87e9c9615218f08c601b09744d", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cf7deeef1354d31ad980f7c408b2a4a2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/Widget.java", "commitBeforeChange": "8c0cfc19eca4f241c34603eca33803e9daafabd5", "commitAfterChange": "ad0b4f3d2956c80326dfb03508ef2a05c83adcca", "methodNumberBeforeChange": 46, "methodNumberAfterChange": 46, "signatureBeforeChange": " void setKeyState (Event event, XKeyEvent xEvent)", "signatureAfterChange": " void setKeyState (Event event, XKeyEvent xEvent)", "diff": ["-\t\t* Feature in MOTIF. For some reason, XLookupString() fails ", "-\t\t* to translate both the keysym and the character when the", "-\t\t* control key is down.  For example, Ctrl+2 has the correct", "-\t\t* keysym value (50) but no character value, while Ctrl+/ has", "-\t\t* the keysym value (2F) but an invalid character value", "-\t\t* (1F).  It seems that Motif is applying the algorithm to", "-\t\t* convert a character to a control character for characters", "-\t\t* that are not valid control characters.  The fix is to test", "-\t\t* for 7-bit ASCII keysym values that fall outside of the", "-\t\t* the valid control character range and use the keysym value", "-\t\t* as the character, not the incorrect value that XLookupString()", "-\t\t* returns.  Even though lower case values are not strictly", "-\t\t* valid control characters, they are included in the range.", "-\t\t* ", "-\t\t* Some other cases include Ctrl+3..Ctr+8, Ctrl+[.", "-\t\t*/", "-\t\tif ((xEvent.state & OS.ControlMask) != 0) {", "-\t\t\tint key = keysym [0];", "-\t\t\tif (0 <= key && key <= 0x7F) {", "-\t\t\t\tif ('a' <= key && key <= 'z') {", "-\t\t\t\t\tkey -= 'a' - 'A';", "-\t\t\t\t}", "-\t\t\t\tif (!(64 <= key && key <= 95)) {", "-\t\t\t\t\tbuffer [0] = (byte) key;", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "-\t\t", "-\t\t/*", "-\t\t* and Shift+F12 are not translated correctly by XLookupString.", "+\t\t* and Shift+F12 are not translated correctly by XLookupString().", "+\t\t* Feature in MOTIF. For some reason, XLookupString() fails ", "+\t\t* to translate both the keysym and the character when the", "+\t\t* control key is down.  For example, Ctrl+2 has the correct", "+\t\t* keysym value (50) but no character value, while Ctrl+/ has", "+\t\t* the keysym value (2F) but an invalid character value", "+\t\t* (1F).  It seems that Motif is applying the algorithm to", "+\t\t* convert a character to a control character for characters", "+\t\t* that are not valid control characters.  The fix is to test", "+\t\t* for 7-bit ASCII keysym values that fall outside of the", "+\t\t* the valid control character range and use the keysym value", "+\t\t* as the character, not the incorrect value that XLookupString()", "+\t\t* returns.  Even though lower case values are not strictly", "+\t\t* valid control characters, they are included in the range.", "+\t\t* ", "+\t\t* Some other cases include Ctrl+3..Ctr+8, Ctrl+[.", "+\t\t*/", "+\t\tint key = keysym [0];", "+\t\tif ((xEvent.state & OS.ControlMask) != 0 && (0 <= key && key <= 0x7F)) {", "+\t\t\tif ('a' <= key && key <= 'z') key -= 'a' - 'A';", "+\t\t\tif (!(64 <= key && key <= 95)) buffer [0] = (byte) key;", "+\t\t}", "+\t\t", "+\t\t/*", "+\t\tif (event.keyCode == 0) {", "+\t\t\tbyte [] buffer1 = new byte [5];", "+\t\t\tint [] keysym1 = new int [1];", "+\t\t\tint oldState = xEvent.state;", "+\t\t\txEvent.state = 0;", "+\t\t\tOS.XLookupString (xEvent, buffer1, buffer1.length, keysym1, null);", "+\t\t\txEvent.state = oldState;", "+\t\t\tif (buffer1 [0] != 0) {", "+\t\t\t\tchar [] result = Converter.mbcsToWcs (null, buffer1);", "+\t\t\t\tif (result.length != 0) event.keyCode = result [0];", "+\t\t\t}", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ae7ac25c300be26faf45d8ed7e14cd1e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/motif/org/eclipse/swt/widgets/Widget.java", "commitBeforeChange": "eda2a2418c4450b2d104d71f5bf6f8ca33cebc34", "commitAfterChange": "531850a3e0806300795ef7d038564fab44c70aee", "methodNumberBeforeChange": 46, "methodNumberAfterChange": 46, "signatureBeforeChange": " boolean setKeyState (Event event, XKeyEvent xEvent)", "signatureAfterChange": " boolean setKeyState (Event event, XKeyEvent xEvent)", "diff": ["-\tboolean isNull = false;", "-\t", "-\t/*", "-\t* Bug in MOTIF.  On Solaris only, XK_F11 and XK_F12 are not", "-\t* translated correctly by XLookupString().  They are mapped", "-\t* to 0x1005FF10 and 0x1005FF11 respectively.  The fix is to", "-\t* look for these values explicitly and correct them.", "-\t*/", "-\tif (OS.IsSunOS && keysym [0] != 0) {", "-\t\tswitch (keysym [0]) {", "-\t\t\tcase 0x1005FF10: ", "-\t\t\t\tkeysym [0] = OS.XK_F11;", "-\t\t\t\tbuffer [0] = 0;", "-\t\t\t\tbreak;", "-\t\t\tcase 0x1005FF11:", "-\t\t\t\tkeysym [0] = OS.XK_F12;", "-\t\t\t\tbuffer [0] = 0;", "-\t\t\t\tbreak;", "-\t\t}", "-\t\t/*", "-\t\t* Bug in MOTIF.  On Solaris only, there is garbage in the", "-\t\t* high 16-bits for Keysyms such as XK_Down.  Since Keysyms", "-\t\t* must be 16-bits to fit into a Character, mask away the", "-\t\t* high 16-bits on all platforms.", "-\t\t*/", "-\t\tkeysym [0] &= 0xFFFF;", "-\t}", "-\t", "-\t/*", "-\t* Bug in Motif.  On HP-UX only, Shift+F9, Shift+F10, Shift+F11", "-\t* and Shift+F12 are not translated correctly by XLookupString().", "-\t* The fix is to look for these values explicitly and correct them.", "-\t*/", "-\tif (OS.IsHPUX && keysym [0] != 0) {", "-\t\tswitch (keysym [0]) {", "-\t\t\tcase 0xFF91: keysym [0] = OS.XK_F9; break;", "-\t\t\tcase 0xFF92: keysym [0] = OS.XK_F10; break;", "-\t\t\tcase 0xFF93: keysym [0] = OS.XK_F11; break;", "-\t\t\tcase 0xFF94: keysym [0] = OS.XK_F12; break;", "-\t\t}", "-\t}", "-\t", "-\t/*", "-\t* Feature in MOTIF. For some reason, XLookupString() fails ", "-\t* to translate both the keysym and the character when the", "-\t* control key is down.  For example, Ctrl+2 has the correct", "-\t* keysym value (50) but no character value, while Ctrl+/ has", "-\t* the keysym value (2F) but an invalid character value", "-\t* (1F).  It seems that Motif is applying the algorithm to", "-\t* convert a character to a control character for characters", "-\t* that are not valid control characters.  The fix is to test", "-\t* for 7-bit ASCII keysym values that fall outside of the", "-\t* the valid control character range and use the keysym value", "-\t* as the character, not the incorrect value that XLookupString()", "-\t* returns.  Even though lower case values are not strictly", "-\t* valid control characters, they are included in the range.", "-\t* ", "-\t* Some other cases include Ctrl+3..Ctr+8, Ctrl+[.", "-\t*/", "-\tint key = keysym [0];", "-\tif ((xEvent.state & OS.ControlMask) != 0) {", "-\t\tif (0 <= key && key <= 0x7F) {", "-\t\t\tif ('a' <= key && key <= 'z') key -= 'a' - 'A';", "-\t\t\tif (!(64 <= key && key <= 95)) buffer [0] = (byte) key;", "-\t\t\tisNull = key == '@' && buffer [0] == 0;", "-\t\t} else {", "-\t\t\tswitch (keysym [0]) {", "-\t\t\t\tcase OS.XK_KP_0: buffer [0] = '0'; break;", "-\t\t\t\tcase OS.XK_KP_1: buffer [0] = '1'; break;", "-\t\t\t\tcase OS.XK_KP_2: buffer [0] = '2'; break;", "-\t\t\t\tcase OS.XK_KP_3: buffer [0] = '3'; break;", "-\t\t\t\tcase OS.XK_KP_4: buffer [0] = '4'; break;", "-\t\t\t\tcase OS.XK_KP_5: buffer [0] = '5'; break;", "-\t\t\t\tcase OS.XK_KP_6: buffer [0] = '6'; break;", "-\t\t\t\tcase OS.XK_KP_7: buffer [0] = '7'; break;", "-\t\t\t\tcase OS.XK_KP_8: buffer [0] = '8'; break;", "-\t\t\t\tcase OS.XK_KP_9: buffer [0] = '9'; break;", "-\t\t\t}", "-\t\t}", "-\t}", "-\t", "-\t/*", "-\t* Bug in Motif.  There are some keycodes for which ", "-\t* XLookupString() does not translate the character.", "-\t* Some of examples are Shift+Tab and Ctrl+Space.", "-\t*/", "-\tswitch (keysym [0]) {", "-\t\tcase OS.XK_KP_Delete: buffer [0] = 0x7f; break;", "-\t\tcase OS.XK_ISO_Left_Tab: buffer [0] = '\\t'; break;", "-\t\tcase OS.XK_space: buffer [0] = ' '; break;", "-\t}", "-\t\t", "-\t/* Fill in the event keyCode or character */", "+\tboolean isNull = display.fixKey (keysym, buffer, xEvent.state);"]}], "num": 31185}