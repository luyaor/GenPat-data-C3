{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "63dbc9e2fbf35b91d203898ff3dfee97", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6261c2c7f1bfc94387a9b4a67497023f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Decorations.java", "commitBeforeChange": "562c65dd1842578db920df56ca041172cc0dffa5", "commitAfterChange": "4d28edf7b62e3b5fcfaf6380e9333fcb7245709a", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": "\r \r void createAcceleratorTable ()", "signatureAfterChange": "\r \r void createAcceleratorTable ()", "diff": ["-\tif (menuBar == null || items == null) return;\r", "+\tint maxAccel;\r", "+\tif (menuBar == null || items == null) {\r", "+\t\tif (OS.IsWinCE) maxAccel = 1;\r", "+\t\telse return;\r", "+\t} else {\r", "+\t\tmaxAccel = OS.IsWinCE ? items.length + 1 : items.length;\r", "+\t}\r", "-\tbyte [] buffer1 = new byte [size];\r", "-\tbyte [] buffer2 = new byte [items.length * size];\r", "-\tfor (int i=0; i<items.length; i++) {\r", "-\t\tMenuItem item = items [i];\r", "-\t\tif (item != null && item.accelerator != 0) {\r", "-\t\t\tMenu parent = item.parent;\r", "-\t\t\twhile (parent != null && parent != menuBar) {\r", "-\t\t\t\tparent = parent.getParentMenu ();\r", "-\t\t\t}\r", "-\t\t\tif (parent == menuBar) {\r", "-\t\t\t\titem.fillAccel (accel);\r", "-\t\t\t\tOS.MoveMemory (buffer1, accel, size);\r", "-\t\t\t\tSystem.arraycopy (buffer1, 0, buffer2, nAccel * size, size);\r", "-\t\t\t\tnAccel++;\r", "+\tbyte [] buffer1 = new byte [size];\t\r", "+\tbyte [] buffer2 = new byte [maxAccel * size];\r", "+\tif (menuBar != null && items != null) {\r", "+\t\tfor (int i=0; i<items.length; i++) {\r", "+\t\t\tMenuItem item = items [i];\r", "+\t\t\tif (item != null && item.accelerator != 0) {\r", "+\t\t\t\tMenu parent = item.parent;\r", "+\t\t\t\twhile (parent != null && parent != menuBar) {\r", "+\t\t\t\t\tparent = parent.getParentMenu ();\r", "+\t\t\t\t}\r", "+\t\t\t\tif (parent == menuBar) {\r", "+\t\t\t\t\titem.fillAccel (accel);\r", "+\t\t\t\t\tOS.MoveMemory (buffer1, accel, size);\r", "+\t\t\t\t\tSystem.arraycopy (buffer1, 0, buffer2, nAccel * size, size);\r", "+\t\t\t\t\tnAccel++;\r", "+\t\t\t\t}\r", "+\tif (OS.IsWinCE) {\r", "+\t\t/* \r", "+\t\t* Note on WinCE PPC.  Close Shell when user taps CTRL-Q.\r", "+\t\t* IDOK represents the \"Done Button\" which also closes\r", "+\t\t* the Shell.\r", "+\t\t*/\r", "+\t\taccel.fVirt = OS.FVIRTKEY | OS.FCONTROL;\r", "+\t\taccel.key = 'Q';\r", "+\t\taccel.cmd = OS.IDOK;\r", "+\t\tOS.MoveMemory (buffer1, accel, size);\r", "+\t\tSystem.arraycopy (buffer1, 0, buffer2, nAccel * size, size);\r", "+\t\tnAccel++;\t\t\t\r", "+\t}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bd56da1c7f866326d23c913bfa8ab0eb", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/Decorations.java", "commitBeforeChange": "abaec105203e00f0f38ed2046e43613969ed66fe", "commitAfterChange": "a4b4318c74f73cccf09888df2eee5e0ca1200808", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 10, "signatureBeforeChange": "  void createAccelerators ()", "signatureAfterChange": "  void createAccelerators ()", "diff": ["+\tMenuItem [] items = display.items;", "-\tint size = ACCEL.sizeof;", "-\tbyte [] buffer1 = new byte [size];\t", "-\tbyte [] buffer2 = new byte [maxAccel * size];", "+\tbyte [] buffer1 = new byte [ACCEL.sizeof];\t", "+\tbyte [] buffer2 = new byte [maxAccel * ACCEL.sizeof];", "-\t\t\t\tMenu parent = item.parent;", "-\t\t\t\twhile (parent != null && parent != menuBar) {", "-\t\t\t\t\tparent = parent.getParentMenu ();", "-\t\t\t\t}", "-\t\t\t\tif (parent == menuBar) {", "-\t\t\t\t\titem.fillAccel (accel);", "-\t\t\t\t\tOS.MoveMemory (buffer1, accel, size);", "-\t\t\t\t\tSystem.arraycopy (buffer1, 0, buffer2, nAccel * size, size);", "-\t\t\t\t\tnAccel++;", "+\t\t\t\tMenu menu = item.parent;", "+\t\t\t\tif (menu.parent == this) {", "+\t\t\t\t\twhile (menu != null && menu != menuBar) {", "+\t\t\t\t\t\tmenu = menu.getParentMenu ();", "+\t\t\t\t\t}", "+\t\t\t\t\tif (menu == menuBar) {", "+\t\t\t\t\t\titem.fillAccel (accel);", "+\t\t\t\t\t\tOS.MoveMemory (buffer1, accel, ACCEL.sizeof);", "+\t\t\t\t\t\tSystem.arraycopy (buffer1, 0, buffer2, nAccel * ACCEL.sizeof, ACCEL.sizeof);", "+\t\t\t\t\t\tnAccel++;", "+\t\t\t\t\t}", "-\t\tOS.MoveMemory (buffer1, accel, size);", "-\t\tSystem.arraycopy (buffer1, 0, buffer2, nAccel * size, size);", "+\t\tOS.MoveMemory (buffer1, accel, ACCEL.sizeof);", "+\t\tSystem.arraycopy (buffer1, 0, buffer2, nAccel * ACCEL.sizeof, ACCEL.sizeof);"]}], "num": 12682}