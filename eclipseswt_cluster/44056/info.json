{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9a8f6a37d3a66747f8e758e36bd4797e", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5c8ee4dff3f4f9509d26a040b573b023", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Accessibility/win32/org/eclipse/swt/accessibility/Accessible.java", "commitBeforeChange": "30eaec187a22ddf0998c34e45a71b135fb6c6509", "commitAfterChange": "4e3ace7441083b52059381fc7315ed0ffaa59c75", "methodNumberBeforeChange": 63, "methodNumberAfterChange": 270, "signatureBeforeChange": "  \tint get_accKeyboardShortcut(int varChild, int pszKeyboardShortcut)", "signatureAfterChange": " \tint get_accKeyboardShortcut(int varChild, int pszKeyboardShortcut)", "diff": ["+\t/* get_accKeyboardShortcut([in] varChild, [out] pszKeyboardShortcut) */", "-\t\tif (iaccessible == null) return COM.CO_E_OBJNOTCONNECTED;", "-\t\t", "-\t\t/* Get the default keyboard shortcut from the OS. */", "+\t\tint code = COM.DISP_E_MEMBERNOTFOUND;", "-\t\tint code = iaccessible.get_accKeyboardShortcut(varChild, pszKeyboardShortcut);", "-\t\tif (code == COM.E_INVALIDARG) code = COM.S_FALSE; // proxy doesn't know about app childID", "-\t\tif (accessibleListeners.size() == 0) return code;", "-\t\tif (code == COM.S_OK) {", "-\t\t\tint /*long*/[] pKeyboardShortcut = new int /*long*/[1];", "-\t\t\tCOM.MoveMemory(pKeyboardShortcut, pszKeyboardShortcut, OS.PTR_SIZEOF);", "-\t\t\tint size = COM.SysStringByteLen(pKeyboardShortcut[0]);", "-\t\t\tif (size > 0) {", "-\t\t\t\tchar[] buffer = new char[(size + 1) /2];", "-\t\t\t\tCOM.MoveMemory(buffer, pKeyboardShortcut[0], size);", "-\t\t\t\tosKeyboardShortcut = new String(buffer);", "+\t\tif (iaccessible != null) {", "+\t\t\t/* Get the default keyboard shortcut from the OS. */", "+\t\t\tcode = iaccessible.get_accKeyboardShortcut(varChild, pszKeyboardShortcut);", "+\t\t\tif (code == COM.E_INVALIDARG) code = COM.S_FALSE; // proxy doesn't know about app childID", "+\t\t\tif (accessibleListeners.size() == 0) return code;", "+\t\t\tif (code == COM.S_OK) {", "+\t\t\t\tint /*long*/[] pKeyboardShortcut = new int /*long*/[1];", "+\t\t\t\tCOM.MoveMemory(pKeyboardShortcut, pszKeyboardShortcut, OS.PTR_SIZEOF);", "+\t\t\t\tint size = COM.SysStringByteLen(pKeyboardShortcut[0]);", "+\t\t\t\tif (size > 0) {", "+\t\t\t\t\tchar[] buffer = new char[(size + 1) /2];", "+\t\t\t\t\tCOM.MoveMemory(buffer, pKeyboardShortcut[0], size);", "+\t\t\t\t\tosKeyboardShortcut = new String(buffer);", "+\t\t\t\t}", "-\t\tchar[] data = (event.result + \"\\0\").toCharArray();", "-\t\tint /*long*/ ptr = COM.SysAllocString(data);", "-\t\tCOM.MoveMemory(pszKeyboardShortcut, new int /*long*/[] { ptr }, OS.PTR_SIZEOF);", "+\t\tif (event.result.length() == 0) return COM.S_FALSE;", "+\t\tsetString(pszKeyboardShortcut, event.result);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6422397ca742e182125917f5202b5457", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Accessibility/win32/org/eclipse/swt/accessibility/Accessible.java", "commitBeforeChange": "30eaec187a22ddf0998c34e45a71b135fb6c6509", "commitAfterChange": "4e3ace7441083b52059381fc7315ed0ffaa59c75", "methodNumberBeforeChange": 59, "methodNumberAfterChange": 266, "signatureBeforeChange": " \t \tint get_accDescription(int varChild, int pszDescription)", "signatureAfterChange": " \tint get_accDescription(int varChild, int pszDescription)", "diff": ["+\t/* get_accDescription([in] varChild, [out] pszDescription) */", "-\t\t * NOTE: Description was exposed as SWT API. We will need to either deprecate this,", "-\t\t * or find a suitable replacement. Note that the trick to expose tree columns", "-\t\t * was not supported by screen readers, so it should be replaced.", "+\t\t * TODO: Description was exposed as SWT API. We will need to either deprecate this (?),", "+\t\t * or find a suitable replacement. Also, check description property on other platforms.", "+\t\t * Note that the trick to expose tree columns (below) was not supported by screen readers,", "+\t\t * so it should be replaced.", "-\t\tif (iaccessible == null) return COM.CO_E_OBJNOTCONNECTED;", "-\t\t", "-\t\t/* Get the default description from the OS. */", "+\t\tint code = COM.DISP_E_MEMBERNOTFOUND;", "-\t\tint code = iaccessible.get_accDescription(varChild, pszDescription);", "-\t\tif (code == COM.E_INVALIDARG) code = COM.S_FALSE; // proxy doesn't know about app childID", "-\t\t// TEMPORARY CODE - process tree even if there are no apps listening", "-\t\tif (accessibleListeners.size() == 0 && !(control instanceof Tree)) return code;", "-\t\tif (code == COM.S_OK) {", "-\t\t\tint /*long*/[] pDescription = new int /*long*/[1];", "-\t\t\tCOM.MoveMemory(pDescription, pszDescription, OS.PTR_SIZEOF);", "-\t\t\tint size = COM.SysStringByteLen(pDescription[0]);", "-\t\t\tif (size > 0) {", "-\t\t\t\tchar[] buffer = new char[(size + 1) /2];", "-\t\t\t\tCOM.MoveMemory(buffer, pDescription[0], size);", "-\t\t\t\tosDescription = new String(buffer);", "+\t\tif (iaccessible != null) {", "+\t\t\t/* Get the default description from the OS. */", "+\t\t\tcode = iaccessible.get_accDescription(varChild, pszDescription);", "+\t\t\tif (code == COM.E_INVALIDARG) code = COM.S_FALSE; // proxy doesn't know about app childID", "+\t\t\t// TEMPORARY CODE - process tree even if there are no apps listening", "+\t\t\tif (accessibleListeners.size() == 0 && !(control instanceof Tree)) return code;", "+\t\t\tif (code == COM.S_OK) {", "+\t\t\t\tint /*long*/[] pDescription = new int /*long*/[1];", "+\t\t\t\tCOM.MoveMemory(pDescription, pszDescription, OS.PTR_SIZEOF);", "+\t\t\t\tint size = COM.SysStringByteLen(pDescription[0]);", "+\t\t\t\tif (size > 0) {", "+\t\t\t\t\tchar[] buffer = new char[(size + 1) /2];", "+\t\t\t\t\tCOM.MoveMemory(buffer, pDescription[0], size);", "+\t\t\t\t\tosDescription = new String(buffer);", "+\t\t\t\t}", "-\t\tchar[] data = (event.result + \"\\0\").toCharArray();", "-\t\tint /*long*/ ptr = COM.SysAllocString(data);", "-\t\tCOM.MoveMemory(pszDescription, new int /*long*/[] { ptr }, OS.PTR_SIZEOF);", "+\t\tif (event.result.length() == 0) return COM.S_FALSE;", "+\t\tsetString(pszDescription, event.result);"]}], "num": 44056}