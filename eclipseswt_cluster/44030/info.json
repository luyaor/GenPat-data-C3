{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f317a2c831cff2f697c936fb784cd5d1", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d57ad062cec516872fbd4168e848f47f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/TextLayout.java", "commitBeforeChange": "53ea4503362f7c2c8444634c8fc92aef195d321a", "commitAfterChange": "270e090b4cb9ec5600af752e1c84796023e2cbe9", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": "  void computeRuns()", "signatureAfterChange": "   void computeRuns()", "diff": ["+", "-\ttextStorage = ((NSTextStorage)new NSTextStorage().alloc());", "-\ttextStorage.initWithString(str);", "+\ttextStorage = (NSTextStorage)new NSTextStorage().alloc().init();", "-\t", "-\ttextStorage.beginEditing();", "+", "+\t/*", "+\t* Feature in Cocoa. Adding attributes directly to a NSTextStorage causes", "+\t* output to the console and eventually a segmentation fault when printing ", "+\t* on a thread other than the main thread. The fix is to add attributes to", "+\t* a separate NSMutableAttributedString and add it to text storage when done.", "+\t*/", "+\tNSMutableAttributedString attrStr = (NSMutableAttributedString)new NSMutableAttributedString().alloc();", "+\tattrStr.id = attrStr.initWithString(str).id;", "+\tattrStr.beginEditing();", "-\ttextStorage.addAttribute(OS.NSFontAttributeName, defaultFont.handle, range);", "-\t", "+\tattrStr.addAttribute(OS.NSFontAttributeName, defaultFont.handle, range);", "+\t//TODO ascend descent wrap", "-\t", "-\t//TODO ascend descent wrap", "-\t", "-\ttextStorage.addAttribute(OS.NSParagraphStyleAttributeName, paragraph, range);", "+\tattrStr.addAttribute(OS.NSParagraphStyleAttributeName, paragraph, range);", "-\t", "-\t\t\ttextStorage.addAttribute(OS.NSFontAttributeName, font.handle, range);", "+\t\t\tattrStr.addAttribute(OS.NSFontAttributeName, font.handle, range);", "-\t\t\ttextStorage.addAttribute(OS.NSForegroundColorAttributeName, color, range);", "+\t\t\tattrStr.addAttribute(OS.NSForegroundColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSBackgroundColorAttributeName, color, range);", "+\t\t\tattrStr.addAttribute(OS.NSBackgroundColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSStrikethroughStyleAttributeName, NSNumber.numberWithInt(OS.NSUnderlineStyleSingle), range);", "+\t\t\tattrStr.addAttribute(OS.NSStrikethroughStyleAttributeName, NSNumber.numberWithInt(OS.NSUnderlineStyleSingle), range);", "-\t\t\t\ttextStorage.addAttribute(OS.NSStrikethroughColorAttributeName, color, range);", "+\t\t\t\tattrStr.addAttribute(OS.NSStrikethroughColorAttributeName, color, range);", "-\t\t\t\ttextStorage.addAttribute(OS.NSUnderlineStyleAttributeName, NSNumber.numberWithInt(underlineStyle), range);", "+\t\t\t\tattrStr.addAttribute(OS.NSUnderlineStyleAttributeName, NSNumber.numberWithInt(underlineStyle), range);", "-\t\t\t\t\ttextStorage.addAttribute(OS.NSUnderlineColorAttributeName, color, range);", "+\t\t\t\t\tattrStr.addAttribute(OS.NSUnderlineColorAttributeName, color, range);", "-\t\t\ttextStorage.addAttribute(OS.NSBaselineOffsetAttributeName, NSNumber.numberWithInt(style.rise), range);", "+\t\t\tattrStr.addAttribute(OS.NSBaselineOffsetAttributeName, NSNumber.numberWithInt(style.rise), range);", "-\t\t\t//TODO", "+\t\t\t//TODO implement metrics ", "-\ttextStorage.endEditing();", "-\t", "-\ttextContainer.setLineFragmentPadding(0);\t", "+\tattrStr.endEditing();", "+\ttextStorage.setAttributedString(attrStr);", "+\tattrStr.release();", "+", "+\ttextContainer.setLineFragmentPadding(0);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6ecf818afca9bb83af17b02a23ce5001", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Path.java", "commitBeforeChange": "270e090b4cb9ec5600af752e1c84796023e2cbe9", "commitAfterChange": "3d08192901d13e179eaad70437789428698af920", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": " public void addString(String string, float x, float y, Font font)", "signatureAfterChange": " public void addString(String string, float x, float y, Font font)", "diff": ["-\t\tNSTextStorage textStorage = ((NSTextStorage)new NSTextStorage().alloc());", "-\t\ttextStorage.initWithString(str);", "+\t\tNSTextStorage textStorage = (NSTextStorage)new NSTextStorage().alloc().init();", "-\t\ttextStorage.beginEditing();", "-\t\ttextStorage.addAttribute(OS.NSFontAttributeName, font.handle, range);", "-\t\ttextStorage.endEditing();", "+\t\t/*", "+\t\t* Feature in Cocoa. Adding attributes directly to a NSTextStorage causes", "+\t\t* output to the console and eventually a segmentation fault when printing ", "+\t\t* on a thread other than the main thread. The fix is to add attributes to", "+\t\t* a separate NSMutableAttributedString and add it to text storage when done.", "+\t\t*/", "+\t\tNSMutableAttributedString attrStr = (NSMutableAttributedString)new NSMutableAttributedString().alloc();", "+\t\tattrStr.id = attrStr.initWithString(str).id;", "+\t\tattrStr.beginEditing();", "+\t\tattrStr.addAttribute(OS.NSFontAttributeName, font.handle, range);", "+\t\tattrStr.endEditing();", "+\t\ttextStorage.setAttributedString(attrStr);", "+\t\tattrStr.release();"]}], "num": 44030}