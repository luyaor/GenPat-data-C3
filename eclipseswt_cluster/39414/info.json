{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6ad7608f60486f63c18d5d3331224845", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7defea8ce6106f34f87d82e96acc1da7", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "9897614cc57b96bb97451125093fad1bcc2e945a", "commitAfterChange": "856f6a008a0ed77a41d39123c5600a8b16c79156", "methodNumberBeforeChange": 43, "methodNumberAfterChange": 43, "signatureBeforeChange": " public void getClipping(Region region)", "signatureAfterChange": " public void getClipping(Region region)", "diff": ["+\tif (region.isDisposed()) SWT.error(SWT.ERROR_INVALID_ARGUMENT);", "-\tint width = 0, height = 0;", "-\tif (data.control != 0) {", "-\t\tbounds = new Rect();", "-\t\tOS.GetControlBounds(data.control, bounds);", "-\t\twidth = bounds.right - bounds.left;", "-\t\theight = bounds.bottom - bounds.top;", "-\t} else {", "-\t\tif (data.image != null) {", "-\t\t\tint image = data.image.handle;", "-\t\t\twidth = OS.CGImageGetWidth(image);", "-\t\t\theight = OS.CGImageGetHeight(image);", "-\t\t}", "-\t}", "-\tOS.SetRectRgn(clipping, (short)0, (short)0, (short)width, (short)height);", "-\tif (data.clipRgn != 0) OS.SectRgn(data.clipRgn, clipping, clipping);", "-\tif (data.visibleRgn != 0) {", "-\t\t// Note that bounds has the control bounds", "+\tif (data.clipRgn == 0) {", "+\t\tint width = 0, height = 0;", "+\t\tif (data.control != 0) {", "+\t\t\tif (bounds == null) bounds = new Rect();", "+\t\t\tOS.GetControlBounds(data.control, bounds);", "+\t\t\twidth = bounds.right - bounds.left;", "+\t\t\theight = bounds.bottom - bounds.top;", "+\t\t} else {", "+\t\t\tif (data.image != null) {", "+\t\t\t\tint image = data.image.handle;", "+\t\t\t\twidth = OS.CGImageGetWidth(image);", "+\t\t\t\theight = OS.CGImageGetHeight(image);", "+\t\t\t}", "+\t\t}", "+\t\tOS.SetRectRgn(clipping, (short)0, (short)0, (short)width, (short)height);", "+\t} else {", "+\t\tOS.CopyRgn(data.clipRgn, clipping);", "+\t}", "+\tif (data.paintEvent != 0 && data.visibleRgn != 0) {", "+\t\tif (bounds == null) bounds = new Rect();", "+\t\tOS.GetControlBounds(data.control, bounds);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4661d2a18a06d7b3f73ba78ae49a639f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/GC.java", "commitBeforeChange": "9897614cc57b96bb97451125093fad1bcc2e945a", "commitAfterChange": "856f6a008a0ed77a41d39123c5600a8b16c79156", "methodNumberBeforeChange": 42, "methodNumberAfterChange": 42, "signatureBeforeChange": " public Rectangle getClipping()", "signatureAfterChange": " public Rectangle getClipping()", "diff": ["-\tRect bounds = new Rect();", "-\tint x = 0, y = 0, width = 0, height = 0;", "-\tif (data.control != 0) {", "-\t\tOS.GetControlBounds(data.control, bounds);", "-\t\twidth = bounds.right - bounds.left;", "-\t\theight = bounds.bottom - bounds.top;", "-\t} else {", "-\t\tif (data.image != null) {", "-\t\t\tint image = data.image.handle;", "-\t\t\twidth = OS.CGImageGetWidth(image);", "-\t\t\theight = OS.CGImageGetHeight(image);", "-\t\t}", "-\t}", "-\tif (data.clipRgn != 0 || data.visibleRgn != 0) {", "-\t\tint clipping = OS.NewRgn();", "-\t\tOS.SetRectRgn(clipping, (short)0, (short)0, (short)width, (short)height);", "-\t\tif (data.clipRgn != 0) OS.SectRgn(data.clipRgn, clipping, clipping);", "-\t\tif (data.visibleRgn != 0) {", "-\t\t\t// Note that bounds has the control bounds", "-\t\t\tOS.OffsetRgn(data.visibleRgn, (short)-bounds.left, (short)-bounds.top);", "-\t\t\tOS.SectRgn(data.visibleRgn, clipping, clipping);", "-\t\t\tOS.OffsetRgn(data.visibleRgn, bounds.left, bounds.top);", "-\t\t}", "-\t\tOS.GetRegionBounds(clipping, bounds);", "-\t\tx = bounds.left;", "-\t\ty = bounds.top;", "-\t\twidth = bounds.right - bounds.left;", "-\t\theight = bounds.bottom - bounds.top;", "-\t\tOS.DisposeRgn(clipping);", "-\t}", "-\treturn new Rectangle(x, y, width, height);", "+\tRegion region = new Region();", "+\tgetClipping(region);", "+\tRectangle rect = region.getBounds();", "+\tregion.dispose();", "+\treturn rect;"]}], "num": 39414}