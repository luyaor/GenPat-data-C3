{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "da13f55da3ea2fab73d83a6e5be1eaf0", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5840a5b1b6d3ff99ef77e854f8e00ad9", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/ToolBar.java", "commitBeforeChange": "3a4151df7f890efbc61e9a01d33c3ead4c2645d9", "commitAfterChange": "c762252cf769015e8f116caa1f2d177bbf731286", "methodNumberBeforeChange": 42, "methodNumberAfterChange": 42, "signatureBeforeChange": "\r \r LRESULT WM_WINDOWPOSCHANGING (int wParam, int lParam)", "signatureAfterChange": "\r \r LRESULT WM_WINDOWPOSCHANGING (int wParam, int lParam)", "diff": ["-\t* Bug in Windows.  When a flat tool bar is wrapped,\r", "-\t* Windows draws a horizontal separator between the\r", "-\t* rows.  The tool bar does not draw the first or\r", "-\t* the last two pixels of this separator.  When the\r", "-\t* toolbar is resized to be bigger, only the new\r", "-\t* area is drawn and the last two pixels, which are\r", "-\t* blank are drawn over by separator.  This leaves\r", "-\t* garbage on the screen.  The fix is to damage the\r", "-\t* pixels.\r", "+\t* Feature in Windows.  When a tool bar that contains\r", "+\t* separators is wrapped, under certain circumstances,\r", "+\t* Windows redraws the entire tool bar unnecessarily\r", "+\t* when resized no item is moves.  Whether the entire\r", "+\t* toolbar is damaged or not seems to depend on the\r", "+\t* size of the tool bar and the position of the separators.\r", "+\t* The fix is to ensure that the newly exposed areas are\r", "+\t* always damaged, and avoid the redraw when no tool item\r", "+\t* moves.\r", "+\tint oldHeight = oldRect.bottom - oldRect.top;\r", "+\tint newHeight = newRect.bottom - newRect.top;\r", "+\t\t/*\r", "+\t\t* Bug in Windows.  When a flat tool bar is wrapped,\r", "+\t\t* Windows draws a horizontal separator between the\r", "+\t\t* rows.  The tool bar does not draw the first or\r", "+\t\t* the last two pixels of this separator.  When the\r", "+\t\t* toolbar is resized to be bigger, only the new\r", "+\t\t* area is drawn and the last two pixels, which are\r", "+\t\t* blank are drawn over by separator.  This leaves\r", "+\t\t* garbage on the screen.  The fix is to damage the\r", "+\t\t* pixels.\r", "+\t\t*/\r", "-\t\trect.left = oldWidth - 2;\r", "-\t\trect.right = oldWidth;\r", "-\t\trect.bottom = newRect.bottom - newRect.top;\r", "+\t\tOS.SetRect (rect, oldWidth - 2, 0, oldWidth, newHeight);\r", "+\t\tOS.SetRect (rect, oldRect.right, newRect.top, newRect.right, newRect.bottom);\r", "+\t\tOS.InvalidateRect (handle, rect, true);\r", "+\t}\r", "+\tif (newHeight > oldHeight) {\r", "+\t\tRECT rect = new RECT ();\r", "+\t\tOS.SetRect (rect, newRect.left, oldRect.bottom, newRect.right, newRect.bottom);\r", "+\t\tOS.InvalidateRect (handle, rect, true);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7ee87af7e72f91ec1eded0cad52ecc19", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/win32/org/eclipse/swt/widgets/ToolBar.java", "commitBeforeChange": "c7a9228d80fff1b80a779eaa2302793ec130a6d3", "commitAfterChange": "e3044a41893dace052525d17ede27b288332bdf6", "methodNumberBeforeChange": 48, "methodNumberAfterChange": 48, "signatureBeforeChange": "  LRESULT WM_WINDOWPOSCHANGING (int wParam, int lParam)", "signatureAfterChange": "  LRESULT WM_WINDOWPOSCHANGING (int wParam, int lParam)", "diff": ["+\tif (ignoreResize) return result;", "+\t/*", "+\t* Bug in Windows.  When a flat tool bar is wrapped,", "+\t* Windows draws a horizontal separator between the", "+\t* rows.  The tool bar does not draw the first or", "+\t* the last two pixels of this separator.  When the", "+\t* toolbar is resized to be bigger, only the new", "+\t* area is drawn and the last two pixels, which are", "+\t* blank are drawn over by separator.  This leaves", "+\t* garbage on the screen.  The fix is to damage the", "+\t* pixels.", "+\t*/", "-\tint oldHeight = oldRect.bottom - oldRect.top;", "-\tint newHeight = newRect.bottom - newRect.top;", "-\t\t/*", "-\t\t* Bug in Windows.  When a flat tool bar is wrapped,", "-\t\t* Windows draws a horizontal separator between the", "-\t\t* rows.  The tool bar does not draw the first or", "-\t\t* the last two pixels of this separator.  When the", "-\t\t* toolbar is resized to be bigger, only the new", "-\t\t* area is drawn and the last two pixels, which are", "-\t\t* blank are drawn over by separator.  This leaves", "-\t\t* garbage on the screen.  The fix is to damage the", "-\t\t* pixels.", "-\t\t*/", "+\t\tint newHeight = newRect.bottom - newRect.top;", "-\t\tOS.SetRect (rect, oldRect.right, newRect.top, newRect.right, newRect.bottom);", "-\t\tOS.InvalidateRect (handle, rect, true);", "-\t}", "-\tif (newHeight > oldHeight) {", "-\t\tRECT rect = new RECT ();", "-\t\tOS.SetRect (rect, newRect.left, oldRect.bottom, newRect.right, newRect.bottom);", "-\t\tOS.InvalidateRect (handle, rect, true);"]}], "num": 41673}