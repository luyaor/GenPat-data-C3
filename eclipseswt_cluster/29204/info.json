{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "b85bd29accb2cfb8b3aef7952d35b124", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ad9d32f50f7e5fc72d5883ee7400aa2b", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Control.java", "commitBeforeChange": "b35a49da6d60208984201c1be34fa638b8bf5fdf", "commitAfterChange": "6b3f40fb94f6858bfa876ed525a9745360cf8cba", "methodNumberBeforeChange": 209, "methodNumberAfterChange": 209, "signatureBeforeChange": "  void setToolTipText (Shell shell, String newString)", "signatureAfterChange": "  void setToolTipText (Shell shell, String newString)", "diff": ["-\tshell.setToolTipText (eventHandle (), newString);", "+\tif (OS.GTK_VERSION >= OS.VERSION (2, 12, 0)) {", "+\t\t/*", "+\t\t* Feature in GTK.  In order to prevent children widgets", "+\t\t* from inheriting their parent's tooltip, the tooltip is", "+\t\t* a set on a shell only. In order to force the shell tooltip", "+\t\t* to update when a new tip string is set, the existing string", "+\t\t* in the tooltip is set to null, followed by running a query.", "+\t\t* The real tip text can then be set. ", "+\t\t* ", "+\t\t* Note that this will only run if the control for which the ", "+\t\t* tooltip is being set is the current control (i.e. the control", "+\t\t* under the pointer).", "+\t\t*/", "+\t\tif (display.currentControl == this) {", "+\t\t\tbyte[] buffer = null;", "+\t\t\tif (newString != null && newString.length() > 0) {", "+\t\t\t\tchar[] chars = fixMnemonic(newString, false);", "+\t\t\t\tbuffer = Converter.wcsToMbcs(null, chars, true);", "+\t\t\t}", "+\t\t\tOS.gtk_widget_set_tooltip_text (shell.handle, null);", "+\t\t\tOS.gtk_tooltip_trigger_tooltip_query (OS.gdk_display_get_default ());", "+\t\t\tOS.gtk_widget_set_tooltip_text (shell.handle, buffer);", "+\t\t}", "+\t} else {", "+\t\tshell.setToolTipText (eventHandle (), newString);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4a2c113c35d1dda377932a985fa99444", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/gtk/org/eclipse/swt/widgets/Shell.java", "commitBeforeChange": "b35a49da6d60208984201c1be34fa638b8bf5fdf", "commitAfterChange": "6b3f40fb94f6858bfa876ed525a9745360cf8cba", "methodNumberBeforeChange": 97, "methodNumberAfterChange": 97, "signatureBeforeChange": "  void setToolTipText (int widget, String string)", "signatureAfterChange": "  void setToolTipText (int widget, String string)", "diff": ["-\tbyte [] buffer = null;", "-\tif (string != null && string.length () > 0) {", "-\t\tchar [] chars = fixMnemonic (string, false);", "-\t\tbuffer = Converter.wcsToMbcs (null, chars, true);", "-\t}", "-\tif (tooltipsHandle == 0) {", "-\t\ttooltipsHandle = OS.gtk_tooltips_new ();", "-\t\tif (tooltipsHandle == 0) error (SWT.ERROR_NO_HANDLES);", "-\t\tOS.g_object_ref (tooltipsHandle);", "-\t\tOS.gtk_object_sink (tooltipsHandle);", "-\t}", "-", "-\t/*", "-\t* Feature in GTK.  There is no API to position a tooltip.", "-\t* The fix is to connect to the size_allocate signal for", "-\t* the tooltip window and position it before it is mapped.", "-\t*", "-\t* Bug in Solaris-GTK.  Invoking gtk_tooltips_force_window()", "-\t* can cause a crash in older versions of GTK.  The fix is", "-\t* to avoid this call if the GTK version is older than 2.2.x.", "-\t*/", "-\tif (OS.GTK_VERSION >= OS.VERSION (2, 2, 1)) {", "-\t\tOS.gtk_tooltips_force_window (tooltipsHandle);", "-\t}", "-\tint /*long*/ tipWindow = OS.GTK_TOOLTIPS_TIP_WINDOW (tooltipsHandle);", "-\tif (tipWindow != 0 && tipWindow != tooltipWindow) {", "-\t\tOS.g_signal_connect (tipWindow, OS.size_allocate, display.sizeAllocateProc, shellHandle);", "-\t\ttooltipWindow = tipWindow;", "-\t}", "+\tif (OS.GTK_VERSION >= OS.VERSION (2, 12, 0)) {", "+\t\tbyte [] buffer = null;", "+\t\tif (string != null && string.length () > 0) {", "+\t\t\tchar [] chars = fixMnemonic (string, false);", "+\t\t\tbuffer = Converter.wcsToMbcs (null, chars, true);", "+\t\t}", "+\t\tOS.gtk_widget_set_tooltip_text (widget, null);", "+\t\tOS.gtk_tooltip_trigger_tooltip_query (OS.gdk_display_get_default ());", "+\t\tOS.gtk_widget_set_tooltip_text (widget, buffer);\t", "+\t} else {", "+\t\tbyte [] buffer = null;", "+\t\tif (string != null && string.length () > 0) {", "+\t\t\tchar [] chars = fixMnemonic (string, false);", "+\t\t\tbuffer = Converter.wcsToMbcs (null, chars, true);", "+\t\t}", "+\t\tif (tooltipsHandle == 0) {", "+\t\t\ttooltipsHandle = OS.gtk_tooltips_new ();", "+\t\t\tif (tooltipsHandle == 0) error (SWT.ERROR_NO_HANDLES);", "+\t\t\tOS.g_object_ref (tooltipsHandle);", "+\t\t\tOS.gtk_object_sink (tooltipsHandle);", "+\t\t}", "-\t/*", "-\t* Bug in GTK.  If the cursor is inside the window when a new", "-\t* tooltip is set and the old tooltip is hidden, the new tooltip", "-\t* is not displayed until the mouse re-enters the window.  The", "-\t* fix is force the new tooltip to be active.", "-\t*/", "-\tboolean set = true;", "-\tif (tipWindow != 0) {", "-\t\tif ((OS.GTK_WIDGET_FLAGS (widget) & (OS.GTK_REALIZED | OS.GTK_VISIBLE)) != 0) {", "-\t\t\tint [] x = new int [1], y = new int [1];", "-\t\t\tint /*long*/ window = OS.gdk_window_at_pointer (x, y);", "-\t\t\tif (window != 0) {", "-\t\t\t\tint /*long*/ [] user_data = new int /*long*/ [1];", "-\t\t\t\tOS.gdk_window_get_user_data (window, user_data);", "-\t\t\t\tif (widget == user_data [0]) {", "-\t\t\t\t\t/* ", "-\t\t\t\t\t* Feature in GTK.  Calling gtk_tooltips_set_tip() positions and", "-\t\t\t\t\t* shows the tooltip.  If the tooltip is already visible, moving", "-\t\t\t\t\t* it to a new location in the size_allocate signal causes flashing.", "-\t\t\t\t\t* The fix is to hide the tip window in the size_request signal", "-\t\t\t\t\t* and before the new tooltip is forced to be active. ", "-\t\t\t\t\t*/", "-\t\t\t\t\tset = false;", "-\t\t\t\t\tint handler_id = OS.g_signal_connect (tipWindow, OS.size_request, display.sizeRequestProc, shellHandle);", "-\t\t\t\t\tOS.gtk_tooltips_set_tip (tooltipsHandle, widget, buffer, null);", "-\t\t\t\t\tOS.gtk_widget_hide (tipWindow);", "-\t\t\t\t\tint /*long*/ data = OS.gtk_tooltips_data_get (widget);", "-\t\t\t\t\tOS.GTK_TOOLTIPS_SET_ACTIVE (tooltipsHandle, data);", "-\t\t\t\t\tOS.gtk_tooltips_set_tip (tooltipsHandle, widget, buffer, null);", "-\t\t\t\t\tif (handler_id != 0) OS.g_signal_handler_disconnect (tipWindow, handler_id);", "+\t\t/*", "+\t\t* Feature in GTK.  There is no API to position a tooltip.", "+\t\t* The fix is to connect to the size_allocate signal for", "+\t\t* the tooltip window and position it before it is mapped.", "+\t\t*", "+\t\t* Bug in Solaris-GTK.  Invoking gtk_tooltips_force_window()", "+\t\t* can cause a crash in older versions of GTK.  The fix is", "+\t\t* to avoid this call if the GTK version is older than 2.2.x.", "+\t\t*/", "+\t\tif (OS.GTK_VERSION >= OS.VERSION (2, 2, 1)) {", "+\t\t\tOS.gtk_tooltips_force_window (tooltipsHandle);", "+\t\t}", "+\t\tint /*long*/ tipWindow = OS.GTK_TOOLTIPS_TIP_WINDOW (tooltipsHandle);", "+\t\tif (tipWindow != 0 && tipWindow != tooltipWindow) {", "+\t\t\tOS.g_signal_connect (tipWindow, OS.size_allocate, display.sizeAllocateProc, shellHandle);", "+\t\t\ttooltipWindow = tipWindow;", "+\t\t}", "+\t\t", "+\t\t/*", "+\t\t* Bug in GTK.  If the cursor is inside the window when a new", "+\t\t* tooltip is set and the old tooltip is hidden, the new tooltip", "+\t\t* is not displayed until the mouse re-enters the window.  The", "+\t\t* fix is force the new tooltip to be active.", "+\t\t*/", "+\t\tboolean set = true;", "+\t\tif (tipWindow != 0) {", "+\t\t\tif ((OS.GTK_WIDGET_FLAGS (widget) & (OS.GTK_REALIZED | OS.GTK_VISIBLE)) != 0) {", "+\t\t\t\tint [] x = new int [1], y = new int [1];", "+\t\t\t\tint /*long*/ window = OS.gdk_window_at_pointer (x, y);", "+\t\t\t\tif (window != 0) {", "+\t\t\t\t\tint /*long*/ [] user_data = new int /*long*/ [1];", "+\t\t\t\t\tOS.gdk_window_get_user_data (window, user_data);", "+\t\t\t\t\tif (widget == user_data [0]) {", "+\t\t\t\t\t\t/* ", "+\t\t\t\t\t\t* Feature in GTK.  Calling gtk_tooltips_set_tip() positions and", "+\t\t\t\t\t\t* shows the tooltip.  If the tooltip is already visible, moving", "+\t\t\t\t\t\t* it to a new location in the size_allocate signal causes flashing.", "+\t\t\t\t\t\t* The fix is to hide the tip window in the size_request signal", "+\t\t\t\t\t\t* and before the new tooltip is forced to be active. ", "+\t\t\t\t\t\t*/", "+\t\t\t\t\t\tset = false;", "+\t\t\t\t\t\tint handler_id = OS.g_signal_connect (tipWindow, OS.size_request, display.sizeRequestProc, shellHandle);", "+\t\t\t\t\t\tOS.gtk_tooltips_set_tip (tooltipsHandle, widget, buffer, null);", "+\t\t\t\t\t\tOS.gtk_widget_hide (tipWindow);", "+\t\t\t\t\t\tint /*long*/ data = OS.gtk_tooltips_data_get (widget);", "+\t\t\t\t\t\tOS.GTK_TOOLTIPS_SET_ACTIVE (tooltipsHandle, data);", "+\t\t\t\t\t\tOS.gtk_tooltips_set_tip (tooltipsHandle, widget, buffer, null);", "+\t\t\t\t\t\tif (handler_id != 0) OS.g_signal_handler_disconnect (tipWindow, handler_id);", "+\t\t\t\t\t}", "+\t\tif (set) OS.gtk_tooltips_set_tip (tooltipsHandle, widget, buffer, null);", "-\tif (set) OS.gtk_tooltips_set_tip (tooltipsHandle, widget, buffer, null);", "+\t\t"]}], "num": 29204}