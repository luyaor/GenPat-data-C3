{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "cbb435465606efbd7790345f9806dc41", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b064a7f52fdd4585bd5740f80f35ef1e", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledTextRenderer.java", "commitBeforeChange": "8302dcae845b1fe69dae77b303345ce4bebc2e77", "commitAfterChange": "cd2b53b4a9279ed54f58046e25d52b26e8ff215a", "methodNumberBeforeChange": 33, "methodNumberAfterChange": 33, "signatureBeforeChange": " TextLayout getTextLayout(int lineIndex, int orientation, int width, int lineSpacing)", "signatureAfterChange": " TextLayout getTextLayout(int lineIndex, int orientation, int width, int lineSpacing)", "diff": ["-\tif (event != null) {", "-\t\tif (styledText.compositionStart != -1 && styledText.compositionLength > 0) {", "-\t\t\tint compositionLine = styledText.getContent().getLineAtOffset(styledText.compositionStart);", "+\tif (styledText != null && imeRanges != null && imeStyles != null) {", "+\t\tint compositionStart = styledText.compositionStart;", "+\t\tint compositionLength = styledText.compositionLength;", "+\t\tif (compositionStart != -1 && compositionLength > 0) {", "+\t\t\tint compositionLine = content.getLineAtOffset(compositionStart);", "-\t\t\t\tStyleRange[] imeStyles = getStyleRanges(styledText.compositionStart, styledText.compositionLength, false);", "-\t\t\t\tint[] imeRanges = getRanges(styledText.compositionStart, styledText.compositionLength);", "-\t\t\t\tif (imeStyles != null && imeRanges != null) {", "-\t\t\t\t\tfor (int i = 0; i < imeStyles.length; i++) {", "-\t\t\t\t\t\tint start = imeRanges[i*2] - lineOffset;", "-\t\t\t\t\t\tlayout.setStyle(imeStyles[i], start, start + imeRanges[i*2+1] - 1);", "+\t\t\t\tfor (int i = 0; i < imeStyles.length; i++) {", "+\t\t\t\t\tint start = imeRanges[i*2] + compositionStart - lineOffset;", "+\t\t\t\t\tint end = start + imeRanges[i*2+1] - 1;", "+\t\t\t\t\tTextStyle imeStyle = imeStyles[i], userStyle;", "+\t\t\t\t\tfor (int j = start; j <= end; j++) {", "+\t\t\t\t\t\tuserStyle = layout.getStyle(j);", "+\t\t\t\t\t\tif (userStyle == null && j > 0) userStyle = layout.getStyle(j - 1);", "+\t\t\t\t\t\tif (userStyle == null && j + 1 < length) userStyle = layout.getStyle(j + 1);", "+\t\t\t\t\t\tif (userStyle == null) {", "+\t\t\t\t\t\t\tlayout.setStyle(imeStyle, j, j);", "+\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\tTextStyle newStyle = new TextStyle(imeStyle);", "+\t\t\t\t\t\t\tif (newStyle.font == null) newStyle.font = userStyle.font;", "+\t\t\t\t\t\t\tif (newStyle.foreground == null) newStyle.foreground = userStyle.foreground;", "+\t\t\t\t\t\t\tif (newStyle.background == null) newStyle.background = userStyle.background;", "+\t\t\t\t\t\t\tlayout.setStyle(newStyle, j, j);", "+\t\t\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f29fa9a32899669d8e4fda63eb9b2272", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledTextRenderer.java", "commitBeforeChange": "22a485996265caffc39eb87d45853e16dfab31d7", "commitAfterChange": "f3e96f662738a7d9d8dfe9b3d0a107eb91c7a9f9", "methodNumberBeforeChange": 33, "methodNumberAfterChange": 33, "signatureBeforeChange": " TextLayout getTextLayout(int lineIndex, int orientation, int width, int lineSpacing)", "signatureAfterChange": " TextLayout getTextLayout(int lineIndex, int orientation, int width, int lineSpacing)", "diff": ["-\tif (styledText != null && imeRanges != null && imeStyles != null) {", "+\tif (styledText != null) {", "-\t\t\t\tfor (int i = 0; i < imeStyles.length; i++) {", "-\t\t\t\t\tint start = imeRanges[i*2] + compositionStart - lineOffset;", "-\t\t\t\t\tint end = start + imeRanges[i*2+1] - 1;", "-\t\t\t\t\tTextStyle imeStyle = imeStyles[i], userStyle;", "-\t\t\t\t\tfor (int j = start; j <= end; j++) {", "-\t\t\t\t\t\tuserStyle = layout.getStyle(j);", "-\t\t\t\t\t\tif (userStyle == null && j > 0) userStyle = layout.getStyle(j - 1);", "-\t\t\t\t\t\tif (userStyle == null && j + 1 < length) userStyle = layout.getStyle(j + 1);", "-\t\t\t\t\t\tif (userStyle == null) {", "-\t\t\t\t\t\t\tlayout.setStyle(imeStyle, j, j);", "-\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\tTextStyle newStyle = new TextStyle(imeStyle);", "-\t\t\t\t\t\t\tif (newStyle.font == null) newStyle.font = userStyle.font;", "-\t\t\t\t\t\t\tif (newStyle.foreground == null) newStyle.foreground = userStyle.foreground;", "-\t\t\t\t\t\t\tif (newStyle.background == null) newStyle.background = userStyle.background;", "-\t\t\t\t\t\t\tlayout.setStyle(newStyle, j, j);", "+\t\t\t\tif (imeRanges != null && imeStyles != null) {", "+\t\t\t\t\tfor (int i = 0; i < imeStyles.length; i++) {", "+\t\t\t\t\t\tint start = imeRanges[i*2] + compositionStart - lineOffset;", "+\t\t\t\t\t\tint end = start + imeRanges[i*2+1] - 1;", "+\t\t\t\t\t\tTextStyle imeStyle = imeStyles[i], userStyle;", "+\t\t\t\t\t\tfor (int j = start; j <= end; j++) {", "+\t\t\t\t\t\t\tuserStyle = layout.getStyle(j);", "+\t\t\t\t\t\t\tif (userStyle == null && j > 0) userStyle = layout.getStyle(j - 1);", "+\t\t\t\t\t\t\tif (userStyle == null && j + 1 < length) userStyle = layout.getStyle(j + 1);", "+\t\t\t\t\t\t\tif (userStyle == null) {", "+\t\t\t\t\t\t\t\tlayout.setStyle(imeStyle, j, j);", "+\t\t\t\t\t\t\t} else {", "+\t\t\t\t\t\t\t\tTextStyle newStyle = new TextStyle(imeStyle);", "+\t\t\t\t\t\t\t\tif (newStyle.font == null) newStyle.font = userStyle.font;", "+\t\t\t\t\t\t\t\tif (newStyle.foreground == null) newStyle.foreground = userStyle.foreground;", "+\t\t\t\t\t\t\t\tif (newStyle.background == null) newStyle.background = userStyle.background;", "+\t\t\t\t\t\t\t\tlayout.setStyle(newStyle, j, j);", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t} else {", "+\t\t\t\t\tint start = compositionStart - lineOffset;", "+\t\t\t\t\tint end = start + compositionLength - 1;", "+\t\t\t\t\tTextStyle userStyle = layout.getStyle(start);", "+\t\t\t\t\tif (userStyle == null) {", "+\t\t\t\t\t\tif (start > 0) userStyle = layout.getStyle(start - 1);", "+\t\t\t\t\t\tif (userStyle == null && end + 1 < length) userStyle = layout.getStyle(end + 1);", "+\t\t\t\t\t\tif (userStyle != null) {", "+\t\t\t\t\t\t\tTextStyle newStyle = new TextStyle();", "+\t\t\t\t\t\t\tnewStyle.font = userStyle.font;", "+\t\t\t\t\t\t\tnewStyle.foreground = userStyle.foreground;", "+\t\t\t\t\t\t\tnewStyle.background = userStyle.background;", "+\t\t\t\t\t\t\tlayout.setStyle(newStyle, start, end);"]}], "num": 51424}