{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "8516bcb8706829995bde4e22b3d48482", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f72f7722f21ffe03712edbd32ad7bdde", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "ce2f35c3f6b1d0b5778f68f011b1d8668d3c5c72", "commitAfterChange": "00bee382096a1807d86474fed7c933116a37eeb8", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": "\r \t\r public StyledText(Composite parent, int style)", "signatureAfterChange": "\r \t\r public StyledText(Composite parent, int style)", "diff": ["-\tcaret = new Caret(this, SWT.NULL);\t\r", "-\tcaret.setBounds(0, 0, CARET_WIDTH, lineHeight);\r", "+\tsetForeground(display.getSystemColor(SWT.COLOR_LIST_FOREGROUND));\r", "+\tsetBackground(display.getSystemColor(SWT.COLOR_LIST_BACKGROUND));\t\r", "+\tinitializeFonts();\r", "+\tif (isBidi() == false) {\r", "+\t\tCaret caret = new Caret(this, SWT.NULL);\r", "+\t\tcaret.setSize(1, caret.getSize().y);\r", "+\t} \r", "+\telse {\r", "+\t\tcreateCaretBitmaps();\r", "+\t\tcreateBidiCaret();\r", "+\t\txInset = BIDI_CARET_WIDTH - 1;\r", "+\t\tRunnable runnable = new Runnable() {\r", "+\t\t\tpublic void run() {\r", "+\t\t\t\tcreateBidiCaret();\r", "+\t\t\t\tCaret caret = getCaret();\r", "+\t\t\t\t// don't use setBidiCaret, will position the caret\r", "+\t\t\t\t// incorrectly\r", "+\t\t\t\tint caretX = caret.getLocation().x;\r", "+\t\t\t\tif (StyledTextBidi.getKeyboardLanguageDirection() == SWT.RIGHT) {\r", "+\t\t\t\t\tcaretX -= (getCaretWidth() - 1);\r", "+\t\t\t\t} else {\r", "+\t\t\t\t\tcaretX += (getCaretWidth() - 1);\r", "+\t\t\t\t}\r", "+\t\t\t\tint line = content.getLineAtOffset(caretOffset);\r", "+\t\t\t\tcaret.setLocation(caretX, line * lineHeight - verticalScrollOffset);\r", "+\t\t\t}\r", "+\t\t};\r", "+\t\tStyledTextBidi.addLanguageListener(this.handle, runnable);\r", "+\t}\r", "+\t// set the caret width, the height of the caret will default to the line height\r", "-\t\r", "-\tsetForeground(display.getSystemColor(SWT.COLOR_LIST_FOREGROUND));\r", "-\tsetBackground(display.getSystemColor(SWT.COLOR_LIST_BACKGROUND));\t\r", "-\tinitializeFonts();\r", "+}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "985466e81d69ba4b06ee7c29ca5c8fca", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Custom Widgets/common/org/eclipse/swt/custom/StyledText.java", "commitBeforeChange": "5544ce1d748561f71c4f1d1997c431f82e5c4c86", "commitAfterChange": "24e0049851c0d0a09cb9f25e5892d112e2936fed", "methodNumberBeforeChange": 58, "methodNumberAfterChange": 58, "signatureBeforeChange": " public StyledText(Composite parent, int style)", "signatureAfterChange": " public StyledText(Composite parent, int style)", "diff": ["-\tif ((style & SWT.BORDER) == 0 || (style & SWT.SINGLE) == 0) {", "-\t\tleftMargin = topMargin = rightMargin = bottomMargin = 0;", "+\tleftMargin = BIDI_CARET_WIDTH - 1;", "+\tif ((style & SWT.SINGLE) != 0 && (style & SWT.BORDER) != 0) {", "+\t\ttopMargin = rightMargin = bottomMargin = 2;", "-\tif (isBidi() == false) {", "-\t\tCaret caret = new Caret(this, SWT.NULL);", "-\t\tcaret.setSize(1, caret.getSize().y);", "-\t} ", "-\telse {", "-\t\tcreateCaretBitmaps();", "-\t\tif (isMirrored) {", "-\t\t\tBidiUtil.setKeyboardLanguage(BidiUtil.KEYBOARD_BIDI);", "+\tnew Caret(this, SWT.NULL);", "+\tif (isBidi) createCaretBitmaps();", "+\tsetCaretImage(isBidi ? (isMirrored ? SWT.RIGHT : SWT.LEFT) : SWT.DEFAULT);", "+\tRunnable runnable = new Runnable() {", "+\t\tpublic void run() {", "+\t\t\tint direction = BidiUtil.getKeyboardLanguage() == BidiUtil.KEYBOARD_BIDI ? SWT.RIGHT : SWT.LEFT;", "+\t\t\tif (direction == caretDirection) return;", "+\t\t\tint newCaretX = direction == SWT.LEFT ? columnX + getCaretWidth() - 1 : columnX;", "+\t\t\tsetCaretLocation(newCaretX, getCaretLine(), direction);", "-\t\tnew Caret(this, SWT.NULL);\t\t\t", "-\t\tsetBidiCaretDirection();", "-\t\tRunnable runnable = new Runnable() {", "-\t\t\tpublic void run() {", "-\t\t\t\t// setBidiCaretLocation calculates caret location like during ", "-\t\t\t\t// cursor movement and takes keyboard language into account. ", "-\t\t\t\t// Fixes 1GKPYMK", "-\t\t\t\tsetBidiCaretLocation(null);", "-\t\t\t}", "-\t\t};", "-\t\tStyledTextBidi.addLanguageListener(this, runnable);", "-\t}", "-\t", "+\t};", "+\tStyledTextBidi.addLanguageListener(this, runnable);", "-\tisCarbon = \"carbon\".equals(platform);\t", "-\t", "-\t// set the caret width, the height of the caret will default to the line height", "+\tisCarbon = \"carbon\".equals(platform);"]}], "num": 47980}