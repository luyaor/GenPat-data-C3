{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "00913fe24a9a92d78bfbb4ce9483c0b1", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b7fd8e620c9b5c8271e4d2cac1fe95e2", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "6b31c0eed18de0d04a1940c687302d2c80ed3928", "commitAfterChange": "35d4101635c3eba5225d3cfcce67f526f793f806", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": "  void initNative(String filename)", "signatureAfterChange": "  void initNative(String filename)", "diff": ["+\t\t\t", "+\t\t\tImageData data = getImageData();", "+\t\t\tint /*long*/ bitmapFormat = imageRep.bitmapFormat();", "+\t\t\tboolean alphaFirst = (bitmapFormat & OS.NSAlphaFirstBitmapFormat) != 0;", "+\t\t\t// If the alpha has only 0 or 255 (-1) for alpha values, compute the transparent pixel color instead", "+\t\t\t// of a continuous alpha range.", "+\t\t\tboolean hasTransparentPixel = true;", "+\t\t\tint transparentColor = -1;", "+\t\t\tint/*64*/ alphaOffset = 0;", "+\t\t\ttransparentScan: {", "+\t\t\t\tfor (int y = 0; y < height; y++) {", "+\t\t\t\t\tfor (int x = 0; x < width; x++) {", "+\t\t\t\t\t\tif (alphaData[alphaOffset] != 0 && alphaData[alphaOffset] != -1) {", "+\t\t\t\t\t\t\thasTransparentPixel = false;", "+\t\t\t\t\t\t\tbreak transparentScan;", "+\t\t\t\t\t\t}\t\t\t\t\t", "+\t\t\t\t\t\t", "+\t\t\t\t\t\tif (alphaData[alphaOffset] == 0) {", "+\t\t\t\t\t\t\ttransparentColor = data.getPixel(x, y);", "+\t\t\t\t\t\t\tif (alphaFirst) transparentColor >>= 8;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\t", "+\t\t\t\t\t\talphaOffset += 1;", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t}", "+\t\t\t", "+\t\t\tif (hasTransparentPixel) this.transparentPixel = transparentColor;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c425fee8becb08d3fb0c457db4e55707", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/carbon/org/eclipse/swt/graphics/Image.java", "commitBeforeChange": "756a00a38650dc664abac86d0eaf738e79c5bf67", "commitAfterChange": "419fbd51f297423e3c35f3288d228d758c69641e", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "  void createMask ()", "signatureAfterChange": "  void createAlpha ()", "diff": ["-void createMask () {", "-\tif (transparentPixel == -1) return;", "+void createAlpha () {", "+\tif (transparentPixel == -1 && alpha == -1 && alphaData == null) return;", "-\tfor (int i=0; i<dataSize; i+=4) {", "-\t\tint pixel = ((srcData[i+1] & 0xFF) << 16) | ((srcData[i+2] & 0xFF) << 8) | (srcData[i+3] & 0xFF);", "-\t\tsrcData[i] = (byte)(pixel == transparentPixel ? 0 : 0xFF); ", "+\tif (transparentPixel != -1) {", "+\t\tfor (int i=0; i<dataSize; i+=4) {", "+\t\t\tint pixel = ((srcData[i+1] & 0xFF) << 16) | ((srcData[i+2] & 0xFF) << 8) | (srcData[i+3] & 0xFF);", "+\t\t\tsrcData[i] = (byte)(pixel == transparentPixel ? 0 : 0xFF); ", "+\t\t}", "+\t} else if (alpha != -1) {", "+\t\tbyte a = (byte)this.alpha;", "+\t\tfor (int i=0; i<dataSize; i+=4) {", "+\t\t\tsrcData[i] = a;\t\t\t\t", "+\t\t}", "+\t} else {", "+\t\tint width = OS.CGImageGetWidth(handle);", "+\t\tint offset = 0, alphaOffset = 0;", "+\t\tfor (int y = 0; y<height; y++) {", "+\t\t\tfor (int x = 0; x<width; x++) {", "+\t\t\t\tsrcData[offset] = alphaData[alphaOffset];", "+\t\t\t\toffset += 4;", "+\t\t\t\talphaOffset += 1;", "+\t\t\t}", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7865dd134eb5887ecea2a108fdaf2aa0", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT Drag and Drop/win32/org/eclipse/swt/dnd/TreeDragSourceEffect.java", "commitBeforeChange": "37b39338852bbb3626c259b29c92ff26274598d8", "commitAfterChange": "304ecb73b01093b7a85bb6c4e4d1d47b09d3b6e2", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "  \tImage getDragSourceImage(DragSourceEvent event)", "signatureAfterChange": "  \tImage getDragSourceImage(DragSourceEvent event)", "diff": ["-\t\t\t\tevent.x += shdi.ptOffset.x;", "+\t\t\t\tif ((control.getStyle() & SWT.MIRRORED) != 0) {", "+\t\t\t\t\tevent.x += shdi.sizeDragImage.cx - shdi.ptOffset.x;", "+\t\t\t\t} else {", "+\t\t\t\t\tevent.x += shdi.ptOffset.x;", "+\t\t\t\t}", "-\t\t\t\t\tdata.transparentPixel = shdi.crColorKey << 8;", "+\t\t\t\t\tif (shdi.crColorKey == -1) {", "+\t\t\t\t\t\tbyte[] alphaData = new byte[srcWidth * srcHeight];", "+\t\t\t\t\t\tint spinc = dibBM.bmWidthBytes - srcWidth * 4;", "+\t\t\t\t\t\tint ap = 0, sp = 3;", "+\t\t\t\t\t\tfor (int y = 0; y < srcHeight; ++y) {", "+\t\t\t\t\t\t\tfor (int x = 0; x < srcWidth; ++x) {", "+\t\t\t\t\t\t\t\talphaData [ap++] = srcData [sp];", "+\t\t\t\t\t\t\t\tsp += 4;", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\tsp += spinc;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tdata.alphaData = alphaData;", "+\t\t\t\t\t} else {", "+\t\t\t\t\t\tdata.transparentPixel = shdi.crColorKey << 8;", "+\t\t\t\t\t}"]}], "num": 28342}