{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bb0cdfef8346b4bd0a8d23eebe8e0566", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "167b700b8ce972b6b5a23f5db4c9ef9f", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "6690d674a484a07e4445df2a5224ec4517b7f791", "commitAfterChange": "1ba8b708320d2a0e38aa19602a51bfddb75db828", "methodNumberBeforeChange": 43, "methodNumberAfterChange": 43, "signatureBeforeChange": " public Control getFocusControl ()", "signatureAfterChange": " public Control getFocusControl ()", "diff": ["+\treturn getFocusControl(window);", "+}", "-\t\tNSResponder view = window.firstResponder();", "-\t\tWidget widget = getWidget (view.id);", "-\t\tif (widget != null && widget instanceof Control) {", "-\t\t\t//TODO go up hierarchy", "-\t\t\treturn (Control)widget;", "-\t\t} else {", "-\t\t\t/*", "-\t\t\t* If the first responder is the shared field editor then answer its", "-\t\t\t* delegate as the focus control.", "-\t\t\t*/", "-\t\t\tif (view.isKindOfClass(NSText.static_class())) {", "-\t\t\t\tNSText text = new NSText(view.id);", "-\t\t\t\tif (text.isFieldEditor()) {", "-\t\t\t\t\tid delegateId = text.delegate();", "-\t\t\t\t\tif (delegateId != null) {", "-\t\t\t\t\t\twidget = getWidget (delegateId.id);", "-\t\t\t\t\t\tif (widget != null && widget instanceof Control) {", "-\t\t\t\t\t\t\treturn (Control)widget;", "-\t\t\t\t\t\t}", "-\t\t\t\t\t}", "-\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "020f693d1340544e3441e7b2102326ca", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/Display.java", "commitBeforeChange": "6fd5aa9d1be49611cff9b718e864fb6c8bf80663", "commitAfterChange": "6242701c8cb8d3abdee5517ccc0e3b78fafed05c", "methodNumberBeforeChange": 42, "methodNumberAfterChange": 42, "signatureBeforeChange": " public Control getFocusControl ()", "signatureAfterChange": " public Control getFocusControl ()", "diff": ["+\t\t\t} else {", "+\t\t\t\t/*", "+\t\t\t\t* If the first responder is the shared field editor then answer its", "+\t\t\t\t* delegate as the focus control.", "+\t\t\t\t*/", "+\t\t\t\tif (view.isKindOfClass(NSText.static_class())) {", "+\t\t\t\t\tNSText text = new NSText(view.id);", "+\t\t\t\t\tif (text.isFieldEditor()) {", "+\t\t\t\t\t\tid delegateId = text.delegate();", "+\t\t\t\t\t\tif (delegateId != null) {", "+\t\t\t\t\t\t\tNSObject delegate = new NSObject(delegateId.id);", "+\t\t\t\t\t\t\tif (delegate.respondsToSelector(OS.sel_tag)) {", "+\t\t\t\t\t\t\t\ttag = OS.objc_msgSend(delegate.id, OS.sel_tag);", "+\t\t\t\t\t\t\t\tif (tag != 0 && tag != -1) {", "+\t\t\t\t\t\t\t\t\tObject object = OS.JNIGetObject(tag);", "+\t\t\t\t\t\t\t\t\tif (object instanceof Control) {", "+\t\t\t\t\t\t\t\t\t\treturn (Control)object;", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2e00eb718b132a505eaa75d85dcc4df5", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/Shell.java", "commitBeforeChange": "e31f7652984f652ea926922eada8f616d2b06239", "commitAfterChange": "d580a3f0fff23e1bdc5580a0c92a6b691a4d4d98", "methodNumberBeforeChange": 74, "methodNumberAfterChange": 73, "signatureBeforeChange": "  void windowSendEvent(int id, int event)", "signatureAfterChange": "  void windowSendEvent(int id, int event)", "diff": ["-\tsuper.windowSendEvent(id, event);", "-\t\tControl focusControl = display.getFocusControl();", "-\t\tif (focusControl != null) {", "-\t\t\tfocusControl.sendKeyEvent(nsEvent, type == OS.NSKeyDown ? SWT.KeyDown : SWT.KeyUp);", "+\t\tControl eventTarget = display.getFocusControl();", "+\t\tif (eventTarget == null) {", "+\t\t\t/*", "+\t\t\t* If the first responder is the shared field editor then set its delegate", "+\t\t\t* as the event target.", "+\t\t\t*/", "+\t\t\tNSResponder firstResponder = window.firstResponder();", "+\t\t\tif (firstResponder.isKindOfClass(NSText.static_class())) {", "+\t\t\t\tNSText text = new NSText(firstResponder.id);", "+\t\t\t\tif (text.isFieldEditor()) {", "+\t\t\t\t\tid delegateId = text.delegate();", "+\t\t\t\t\tif (delegateId != null) {", "+\t\t\t\t\t\tNSObject delegate = new NSObject(delegateId.id);", "+\t\t\t\t\t\tif (delegate.respondsToSelector(OS.sel_tag)) {", "+\t\t\t\t\t\t\tint tag = OS.objc_msgSend(delegate.id, OS.sel_tag);", "+\t\t\t\t\t\t\tif (tag != 0 && tag != -1) {", "+\t\t\t\t\t\t\t\tControl control = (Control)OS.JNIGetObject(tag);", "+\t\t\t\t\t\t\t\tif (control != null) {", "+\t\t\t\t\t\t\t\t\teventTarget = control;", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t}", "+\t\t}", "+\t\tif (eventTarget != null) {", "+\t\t\teventTarget.sendKeyEvent(nsEvent, type == OS.NSKeyDown ? SWT.KeyDown : SWT.KeyUp);", "+\tsuper.windowSendEvent(id, event);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6ca9643d020e4842c7cfc49807976caf", "repository": "http://git.eclipse.org/gitroot/platform/eclipse.platform.swt.git", "fileName": "bundles/org.eclipse.swt/Eclipse SWT/cocoa/org/eclipse/swt/widgets/Shell.java", "commitBeforeChange": "630676523e8e76d5f39411b8b8a188abe94ad224", "commitAfterChange": "c7b236709b17af539494ecb59d7054eef90de873", "methodNumberBeforeChange": 73, "methodNumberAfterChange": 75, "signatureBeforeChange": "  void windowSendEvent(int id, int event)", "signatureAfterChange": "  void windowSendEvent(int id, int event)", "diff": ["-\t\tControl eventTarget = display.getFocusControl();", "-\t\tif (eventTarget == null) {", "-\t\t\t/*", "-\t\t\t* If the first responder is the shared field editor then set its delegate", "-\t\t\t* as the event target.", "-\t\t\t*/", "-\t\t\tNSResponder firstResponder = window.firstResponder();", "-\t\t\tif (firstResponder.isKindOfClass(NSText.static_class())) {", "-\t\t\t\tNSText text = new NSText(firstResponder.id);", "-\t\t\t\tif (text.isFieldEditor()) {", "-\t\t\t\t\tid delegateId = text.delegate();", "-\t\t\t\t\tif (delegateId != null) {", "-\t\t\t\t\t\tNSObject delegate = new NSObject(delegateId.id);", "-\t\t\t\t\t\tif (delegate.respondsToSelector(OS.sel_tag)) {", "-\t\t\t\t\t\t\tint tag = OS.objc_msgSend(delegate.id, OS.sel_tag);", "-\t\t\t\t\t\t\tif (tag != 0 && tag != -1) {", "-\t\t\t\t\t\t\t\tControl control = (Control)OS.JNIGetObject(tag);", "-\t\t\t\t\t\t\t\tif (control != null) {", "-\t\t\t\t\t\t\t\t\teventTarget = control;", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t}", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "+\t\tControl eventTarget = getCurrentKeyTarget();"]}], "num": 27591}