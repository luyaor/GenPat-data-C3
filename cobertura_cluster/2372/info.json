{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3578c6291553e2ef94b71e9ce244d2cf", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8008f6471d649a21be930a6aec48a31a", "repository": "https://github.com/cobertura/cobertura.git", "fileName": "cobertura/src/net/sourceforge/cobertura/javancss/ASCII_UCodeESC_CharStream.java", "commitBeforeChange": "7878dbc8c14057d3c27375fea2484940a54a6ebc", "commitAfterChange": "5c3edcc6dd3fd1408cac466f6859d53cda78784e", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "  \tpublic final char readChar() throws java.io.IOException", "signatureAfterChange": "    public final char readChar() throws java.io.IOException", "diff": ["+  public final char readChar() throws java.io.IOException", "+  {", "+     if (inBuf > 0)", "+     {", "+        --inBuf;", "+        return buffer[(bufpos == bufsize - 1) ? (bufpos = 0) : ++bufpos];", "+     }", "+     char c;", "-\tpublic final char readChar() throws java.io.IOException", "-\t{", "-\t\tif (inBuf > 0)", "-\t\t{", "-\t\t\t--inBuf;", "-\t\t\treturn buffer[(bufpos == bufsize - 1) ? (bufpos = 0) : ++bufpos];", "-\t\t}", "+     if (++bufpos == available)", "+        AdjustBuffSize();", "-\t\tchar c;", "+     if (((buffer[bufpos] = c = (char)((char)0xff & ReadByte())) == '\\\\'))", "+     {", "+        UpdateLineColumn(c);", "-\t\tif (++bufpos == available)", "-\t\t\tadjustBuffSize();", "+        int backSlashCnt = 1;", "-\t\tif (((buffer[bufpos] = c = (char)((char)0xff & readByte())) == '\\\\'))", "-\t\t{", "-\t\t\tupdateLineColumn(c);", "+        for (;;) // Read all the backslashes", "+        {", "+           if (++bufpos == available)", "+              AdjustBuffSize();", "-\t\t\tint backSlashCnt = 1;", "+           try", "+           {", "+              if ((buffer[bufpos] = c = (char)((char)0xff & ReadByte())) != '\\\\')", "+              {", "+                 UpdateLineColumn(c);", "+                 // found a non-backslash char.", "+                 if ((c == 'u') && ((backSlashCnt & 1) == 1))", "+                 {", "+                    if (--bufpos < 0)", "+                       bufpos = bufsize - 1;", "-\t\t\tfor (;;) // Read all the backslashes", "-\t\t\t{", "-\t\t\t\tif (++bufpos == available)", "-\t\t\t\t\tadjustBuffSize();", "+                    break;", "+                 }", "-\t\t\t\ttry", "-\t\t\t\t{", "-\t\t\t\t\tif ((buffer[bufpos] = c = (char)((char)0xff & readByte())) != '\\\\')", "-\t\t\t\t\t{", "-\t\t\t\t\t\tupdateLineColumn(c);", "-\t\t\t\t\t\t// found a non-backslash char.", "-\t\t\t\t\t\tif ((c == 'u') && ((backSlashCnt & 1) == 1))", "-\t\t\t\t\t\t{", "-\t\t\t\t\t\t\tif (--bufpos < 0)", "-\t\t\t\t\t\t\t\tbufpos = bufsize - 1;", "+                 backup(backSlashCnt);", "+                 return '\\\\';", "+              }", "+           }", "+           catch(java.io.IOException e)", "+           {", "+              if (backSlashCnt > 1)", "+                 backup(backSlashCnt);", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\t}", "+              return '\\\\';", "+           }", "-\t\t\t\t\t\tbackup(backSlashCnt);", "-\t\t\t\t\t\treturn '\\\\';", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t\tcatch (java.io.IOException e)", "-\t\t\t\t{", "-\t\t\t\t\tif (backSlashCnt > 1)", "-\t\t\t\t\t\tbackup(backSlashCnt);", "+           UpdateLineColumn(c);", "+           backSlashCnt++;", "+        }", "-\t\t\t\t\treturn '\\\\';", "-\t\t\t\t}", "+        // Here, we have seen an odd number of backslash's followed by a 'u'", "+        try", "+        {", "+           while ((c = (char)((char)0xff & ReadByte())) == 'u')", "+              ++column;", "-\t\t\t\tupdateLineColumn(c);", "-\t\t\t\tbackSlashCnt++;", "-\t\t\t}", "+           buffer[bufpos] = c = (char)(hexval(c) << 12 |", "+                                       hexval((char)((char)0xff & ReadByte())) << 8 |", "+                                       hexval((char)((char)0xff & ReadByte())) << 4 |", "+                                       hexval((char)((char)0xff & ReadByte())));", "-\t\t\t// Here, we have seen an odd number of backslash's followed by a 'u'", "-\t\t\ttry", "-\t\t\t{", "-\t\t\t\twhile ((c = (char)((char)0xff & readByte())) == 'u')", "-\t\t\t\t\t++column;", "+           column += 4;", "+        }", "+        catch(java.io.IOException e)", "+        {", "+           throw new Error(\"Invalid escape character at line \" + line +", "+                                         \" column \" + column + \".\");", "+        }", "-\t\t\t\tbuffer[bufpos] = c = (char)(hexval(c) << 12", "-\t\t\t\t\t\t| hexval((char)((char)0xff & readByte())) << 8", "-\t\t\t\t\t\t| hexval((char)((char)0xff & readByte())) << 4 | hexval((char)((char)0xff & readByte())));", "+        if (backSlashCnt == 1)", "+           return c;", "+        else", "+        {", "+           backup(backSlashCnt - 1);", "+           return '\\\\';", "+        }", "+     }", "+     else", "+     {", "+        UpdateLineColumn(c);", "+        return (c);", "+     }", "+  }", "-\t\t\t\tcolumn += 4;", "-\t\t\t}", "-\t\t\tcatch (java.io.IOException e)", "-\t\t\t{", "-\t\t\t\tthrow new Error(\"Invalid escape character at line \" + line + \" column \" + column", "-\t\t\t\t\t\t+ \".\");", "-\t\t\t}", "-\t\t\tif (backSlashCnt == 1)", "-\t\t\t\treturn c;", "-\t\t\tbackup(backSlashCnt - 1);", "-\t\t\treturn '\\\\';", "-\t\t}", "-\t\tupdateLineColumn(c);", "-\t\treturn (c);", "-\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b8affba402e50832d0c3d011969ae66f", "repository": "https://github.com/cobertura/cobertura.git", "fileName": "cobertura/src/net/sourceforge/cobertura/coveragedata/TouchCollector.java", "commitBeforeChange": "39aff69c052bed11ddf0e72014f573a749d7b423", "commitAfterChange": "d2a99fd01a0928b8540b82a22d6a1f3dfabcc94a", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 1, "signatureBeforeChange": "\t \t \t \tpublic static synchronized void applyTouchesOnProjectData(ProjectData projectData)", "signatureAfterChange": "  \tpublic static synchronized void applyTouchesOnProjectData( \t\t\tProjectData projectData)", "diff": ["+", "+\tpublic static synchronized void applyTouchesOnProjectData(", "+\t\t\tProjectData projectData) {", "+\t\tSystem.out", "+\t\t\t\t.println(\"=================== START OF RAPORT ======================== \");", "+\t\tfor (Class<?> c : registeredClasses.keySet()) {", "+\t\t\tSystem.out.println(\"Report: \"+c.getName());", "+\t\t\tClassData cd=projectData.getOrCreateClassData(c.getName());", "+\t\t\tapplyTouchesToSingleClassOnProjectData(cd, c);", "+\t\tSystem.out", "+\t\t\t\t.println(\"===================  END OF RAPORT  ======================== \");", "+\t\t// System.out.println(\"Flushing results...\");", "+\t\t// Map<LineTouchData,Integer>", "+\t\t// touches=touchedLines.getFinalStateAndCleanIt();", "+\t\t// for(Entry<LineTouchData, Integer> touch:touches.entrySet()){", "+\t\t// if(touch.getValue()>0){", "+\t\t// getClassFor(touch.getKey(),projectData).touch(touch.getKey().lineNumber,touch.getValue());", "+\t\t// }", "+\t\t// }", "+\t\t//\t\t", "+\t\t// Map<SwitchTouchData,Integer>", "+\t\t// switchTouches=switchTouchData.getFinalStateAndCleanIt();", "+\t\t// for(Entry<SwitchTouchData, Integer> touch:switchTouches.entrySet()){", "+\t\t// if(touch.getValue()>0){", "+\t\t// getClassFor(touch.getKey(),projectData).touchSwitch(", "+\t\t// touch.getKey().lineNumber,", "+\t\t// touch.getKey().switchNumber,", "+\t\t// touch.getKey().branch,touch.getValue());", "+\t\t// }", "+\t\t// }", "+\t\t//\t\t", "+\t\t// Map<JumpTouchData,Integer>", "+\t\t// jumpTouches=jumpTouchData.getFinalStateAndCleanIt();", "+\t\t// for(Entry<JumpTouchData, Integer> touch:jumpTouches.entrySet()){", "+\t\t// if(touch.getValue()>0){", "+\t\t// getClassFor(touch.getKey(),projectData).touchJump(", "+\t\t// touch.getKey().lineNumber,", "+\t\t// touch.getKey().branchNumber,", "+\t\t// touch.getKey().branch,touch.getValue());", "+\t\t// }", "+\t\t// }", "+\t\t// System.out.println(\"Flushing results done\");", "+\t\t// }", "+", "+\t\t// private static ClassData getClassFor(LineTouchData key,ProjectData", "+\t\t// projectData) {", "+\t\t// System.out.println(\"\\nLooking for:\"+key.classId+\"\\n\");", "+\t\t// return", "+\t\t// projectData.getOrCreateClassData(classId2class.get(key.classId));", "+\t}", "-\t", "-\tpublic static synchronized void applyTouchesOnProjectData(ProjectData projectData){", "-\t\tSystem.out.println(\"Flushing results...\");", "-\t\tMap<LineTouchData,Integer> touches=touchedLines.getFinalStateAndCleanIt();", "-\t\tfor(Entry<LineTouchData, Integer> touch:touches.entrySet()){", "-\t\t\tif(touch.getValue()>0){\t\t\t\t", "-\t\t\t\tgetClassFor(touch.getKey(),projectData).touch(touch.getKey().lineNumber,touch.getValue());", "-\t\tMap<SwitchTouchData,Integer> switchTouches=switchTouchData.getFinalStateAndCleanIt();", "-\t\tfor(Entry<SwitchTouchData, Integer> touch:switchTouches.entrySet()){", "-\t\t\tif(touch.getValue()>0){", "-\t\t\t\tgetClassFor(touch.getKey(),projectData).touchSwitch(", "-\t\t\t\t\t\ttouch.getKey().lineNumber,", "-\t\t\t\t\t\ttouch.getKey().switchNumber,", "-\t\t\t\t\t\ttouch.getKey().branch,touch.getValue());", "-\t\tMap<JumpTouchData,Integer> jumpTouches=jumpTouchData.getFinalStateAndCleanIt();", "-\t\tfor(Entry<JumpTouchData, Integer> touch:jumpTouches.entrySet()){", "-\t\t\tif(touch.getValue()>0){", "-\t\t\t\tgetClassFor(touch.getKey(),projectData).touchJump(", "-\t\t\t\t\t\ttouch.getKey().lineNumber,", "-\t\t\t\t\t\ttouch.getKey().branchNumber,", "-\t\t\t\t\t\ttouch.getKey().branch,touch.getValue());", "-\t\t\t}", "-\t\tSystem.out.println(\"Flushing results done\");", "-\t}"]}]}