{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "b94e0f669b3d204eda1b02ab954207d7", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "238568cacc22d3c48f4164a11b0decd3", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/util/GeneralProcessCreator.java", "commitBeforeChange": "91061a0d47469bc7d07ba5fa464f35ab97f70dbb", "commitAfterChange": "296befb4a12a5cc35f5f70ed97c5006f2e9fc8bc", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "\r   public Process start() throws IOException", "signatureAfterChange": "   public Process start() throws IOException", "diff": ["-  /** Starts a new process using the attributes of this process creator. */\r", "-  public Process start() throws IOException {\r", "-    // set up work directory\r", "-    _evaluatedWorkDir = StringOps.replaceVariables(_workdir, _props, PropertyMaps.GET_CURRENT);\r", "-    _evaluatedWorkDir = StringOps.unescapeFileName(_evaluatedWorkDir);\r", "-    File dir = null;\r", "-    if (!_evaluatedWorkDir.trim().equals(\"\")) { dir = new File(_evaluatedWorkDir); }\r", "-\r", "-    // set up environment\r", "-    String[] env = null;\r", "-    if ((_env!=null) && (_env.size()>0)) {\r", "-      env = new String[_env.size()];\r", "-      int i = 0;\r", "-      for(String key: _env.keySet()) {\r", "-        String value = _env.get(key);\r", "-        env[i] = key+\"=\"+value;\r", "-      }\r", "-    }\r", "-\r", "-    // set up command line\r", "-    if (_cmdline!=null) {\r", "-      _evaluatedCmdLine = StringOps.replaceVariables(_cmdline, _props, PropertyMaps.GET_CURRENT);\r", "-      _seqs = StringOps.commandLineToLists(_evaluatedCmdLine);\r", "-    }\r", "-    LOG.log(\"\\t\"+edu.rice.cs.plt.iter.IterUtil.toString(_seqs));\r", "-    if (_seqs.size()<1) { throw new IOException(\"No process to start.\"); }\r", "-    if (_seqs.size()==1) {\r", "-      // only one piping chain, creating a process sequence is not necessary\r", "-      List<List<String>> pipe = _seqs.get(0);\r", "-      if (pipe.size()<1) { throw new IOException(\"No process to start.\"); }\r", "-      if (pipe.size()==1) {\r", "-        // only one process, creating a piping chain is not necessary\r", "-        List<String> cmds = pipe.get(0);\r", "-        String[] cmdarray = new String[cmds.size()];\r", "-        for (int i=0; i<cmds.size(); ++i) {\r", "-          cmdarray[i] = StringOps.unescapeFileName(cmds.get(i));\r", "-        }\r", "-        // creating a simple process\r", "-        return Runtime.getRuntime().exec(cmdarray,env,dir);\r", "-      }\r", "-      // more than one process, create a process chain\r", "-      ProcessCreator[] creators = new ProcessCreator[pipe.size()];\r", "-      for (int i=0; i<pipe.size(); ++i) {\r", "-        List<String> cmds = pipe.get(i);\r", "-        String[] cmdarray = new String[cmds.size()];\r", "-        for (int j=0; j<cmds.size(); ++j) {\r", "-          cmdarray[j] = StringOps.unescapeFileName(cmds.get(j));\r", "-        }\r", "-        creators[i] = new ProcessCreator(cmdarray, _workdir);\r", "-      }\r", "-      return new ProcessChain(creators);\r", "-    }\r", "-    // more than one piping chain, create a process sequence\r", "-    ProcessCreator[] creators = new ProcessCreator[_seqs.size()];\r", "-    for (int i=0; i<_seqs.size(); ++i) {\r", "-      List<List<List<String>>> l = new ArrayList<List<List<String>>>();\r", "-      l.add(_seqs.get(i));\r", "-      creators[i] = new GeneralProcessCreator(l, _workdir, _props);\r", "-    }\r", "-    return new ProcessSequence(creators);\r", "-  }\r", "+  /** Starts a new process using the attributes of this process creator. */", "+  public Process start() throws IOException {", "+    // set up work directory", "+    _evaluatedWorkDir = StringOps.replaceVariables(_workdir, _props, PropertyMaps.GET_CURRENT);", "+    _evaluatedWorkDir = StringOps.unescapeFileName(_evaluatedWorkDir);", "+    File dir = null;", "+    if (!_evaluatedWorkDir.trim().equals(\"\")) { dir = new File(_evaluatedWorkDir); }", "+", "+    // set up environment", "+    String[] env = null;", "+    if ((_env!=null) && (_env.size()>0)) {", "+      env = new String[_env.size()];", "+      int i = 0;", "+      for(String key: _env.keySet()) {", "+        String value = _env.get(key);", "+        env[i] = key+\"=\"+value;", "+      }", "+    }", "+", "+    // set up command line", "+    if (_cmdline!=null) {", "+      _evaluatedCmdLine = StringOps.replaceVariables(_cmdline, _props, PropertyMaps.GET_CURRENT);", "+      _seqs = StringOps.commandLineToLists(_evaluatedCmdLine);", "+    }", "+    LOG.log(\"\\t\"+edu.rice.cs.plt.iter.IterUtil.toString(_seqs));", "+    if (_seqs.size()<1) { throw new IOException(\"No process to start.\"); }", "+    if (_seqs.size()==1) {", "+      // only one piping chain, creating a process sequence is not necessary", "+      List<List<String>> pipe = _seqs.get(0);", "+      if (pipe.size()<1) { throw new IOException(\"No process to start.\"); }", "+      if (pipe.size()==1) {", "+        // only one process, creating a piping chain is not necessary", "+        List<String> cmds = pipe.get(0);", "+        if (cmds.size()<1) { throw new IOException(\"No process to start.\"); }", "+        String[] cmdarray = new String[cmds.size()];", "+        for (int i=0; i<cmds.size(); ++i) {", "+          cmdarray[i] = StringOps.unescapeFileName(cmds.get(i));", "+        }", "+        // creating a simple process", "+        return Runtime.getRuntime().exec(cmdarray,env,dir);", "+      }", "+      // more than one process, create a process chain", "+      ProcessCreator[] creators = new ProcessCreator[pipe.size()];", "+      for (int i=0; i<pipe.size(); ++i) {", "+        List<String> cmds = pipe.get(i);", "+        if (cmds.size()<1) { throw new IOException(\"No process to start.\"); }", "+        String[] cmdarray = new String[cmds.size()];", "+        for (int j=0; j<cmds.size(); ++j) {", "+          cmdarray[j] = StringOps.unescapeFileName(cmds.get(j));", "+        }", "+        creators[i] = new ProcessCreator(cmdarray, _workdir);", "+      }", "+      return new ProcessChain(creators);", "+    }", "+    // more than one piping chain, create a process sequence", "+    ProcessCreator[] creators = new ProcessCreator[_seqs.size()];", "+    for (int i=0; i<_seqs.size(); ++i) {", "+      List<List<List<String>>> l = new ArrayList<List<List<String>>>();", "+      l.add(_seqs.get(i));", "+      creators[i] = new GeneralProcessCreator(l, _workdir, _props);", "+    }", "+    return new ProcessSequence(creators);", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ce0056c0cbfebe6a0139ab67ac565d8b", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/util/ProcessCreator.java", "commitBeforeChange": "1e619a02befaa7a99dc31172b2a007a2446ed2bd", "commitAfterChange": "591f8aac4f79eab75475a3d9dd862c3b019f02a1", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "   public Process start() throws IOException", "signatureAfterChange": "\r   public Process start() throws IOException", "diff": ["-    */", "-  public Process start() throws IOException {", "-    // set up work directory", "-    _evaluatedWorkDir = StringOps.replaceVariables(_workdir, _props, PropertyMaps.GET_CURRENT);", "-    _evaluatedWorkDir = StringOps.unescapeFileName(_evaluatedWorkDir);", "-    File dir = null;", "-    if (!_evaluatedWorkDir.trim().equals(\"\")) { dir = new File(_evaluatedWorkDir); }", "-    ", "-    // set up environment", "-    String[] env = null;", "-    if ((_env!=null) && (_env.size()>0)) {", "-      env = new String[_env.size()];", "-      int i = 0;", "-      for(String key: _env.keySet()) {", "-        String value = _env.get(key);", "-        env[i] = key+\"=\"+value;", "-      }", "-    }", "-    ", "-    // set up command line, if necessary", "-    if (_cmdline!=null) {", "-      _evaluatedCmdLine = StringOps.replaceVariables(_cmdline, _props, PropertyMaps.GET_CURRENT);", "-      List<String> cmds = StringOps.commandLineToList(_evaluatedCmdLine);", "-      _cmdarray = new String[cmds.size()];", "-      for (int i=0; i<cmds.size(); ++i) {", "-        _cmdarray[i] = StringOps.unescapeFileName(cmds.get(i));", "-      }", "-    }", "-    ", "-    return Runtime.getRuntime().exec(_cmdarray,env,dir);", "-  }", "+    */\r", "+  public Process start() throws IOException {\r", "+    // set up work directory\r", "+    _evaluatedWorkDir = StringOps.replaceVariables(_workdir, _props, PropertyMaps.GET_CURRENT);\r", "+    _evaluatedWorkDir = StringOps.unescapeFileName(_evaluatedWorkDir);\r", "+    File dir = null;\r", "+    if (!_evaluatedWorkDir.trim().equals(\"\")) { dir = new File(_evaluatedWorkDir); }\r", "+    \r", "+    // set up environment\r", "+    String[] env = null;\r", "+    if ((_env!=null) && (_env.size()>0)) {\r", "+      env = new String[_env.size()];\r", "+      int i = 0;\r", "+      for(String key: _env.keySet()) {\r", "+        String value = _env.get(key);\r", "+        env[i] = key+\"=\"+value;\r", "+      }\r", "+    }\r", "+    \r", "+    // set up command line, if necessary\r", "+    if (_cmdline!=null) {\r", "+      _evaluatedCmdLine = StringOps.replaceVariables(_cmdline, _props, PropertyMaps.GET_CURRENT);\r", "+      List<List<List<String>>> seqs = StringOps.commandLineToLists(_evaluatedCmdLine);\r", "+      if (seqs.size()!=1) { throw new IllegalArgumentException(\"ProcessCreator needs a command line with just one process.\"); }\r", "+      List<List<String>> pipe = seqs.get(0);\r", "+      if (pipe.size()<1) { throw new IllegalArgumentException(\"ProcessCreator needs a command line with just one process.\"); }\r", "+      List<String> cmds = pipe.get(0);\r", "+      _cmdarray = new String[cmds.size()];\r", "+      for (int i=0; i<cmds.size(); ++i) {\r", "+        _cmdarray[i] = StringOps.unescapeFileName(cmds.get(i));\r", "+      }\r", "+    }\r", "+    \r", "+    return Runtime.getRuntime().exec(_cmdarray,env,dir);\r", "+  }\r"]}], "num": 22194}