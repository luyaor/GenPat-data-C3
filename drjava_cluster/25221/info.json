{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "fb479a9b9dd4d5716e91bf3b9f80c364", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "167b5d40a89d458f4c3fc71ad02a4d67", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/junit/JUnitTestManager.java", "commitBeforeChange": "db64d6218289f5b8c2c9777bfd38b4160001ceaa", "commitAfterChange": "8f81b4833cb462795daefaccef203de9c66140be", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "   private JUnitError _makeJUnitError ( TestFailure tF, String theclass, boolean isError, String fileName)", "signatureAfterChange": "   private JUnitError _makeJUnitError(TestFailure failure, String className, boolean isError, String fileName)", "diff": ["-  private JUnitError _makeJUnitError ( TestFailure tF, String theclass, boolean isError, String fileName) {", "+  private JUnitError _makeJUnitError(TestFailure failure, String className, boolean isError, String fileName) {", "-    TestFailure tFail = tF;", "-    TestCase tcFail = (TestCase) tFail.failedTest();", "+    Test failedTest = failure.failedTest();", "+    String testName = failedTest.getClass().getName();", "+    if (failedTest instanceof TestCase) {", "+      testName = ((TestCase)failedTest).getName();", "+    }", "-    StringWriter swFail = new StringWriter();", "-    PrintWriter pwFail  = new PrintWriter(swFail);", "+    StringWriter sWriter = new StringWriter();", "+    PrintWriter pWriter  = new PrintWriter(sWriter);", "-    tFail.thrownException().printStackTrace(pwFail);", "+    failure.thrownException().printStackTrace(pWriter);", "-    String classnameFail = theclass + \".\" + tcFail.getName();", "+    String classNameAndTest = className + \".\" + testName;", "-    int lineNum = _lineNumber( swFail.toString(), classnameFail);", "+    int lineNum = _lineNumber( sWriter.toString(), classNameAndTest);", "-  /*  try {", "-      _file = _document.getFile();", "-    }", "-    catch (FileMovedException fme) {", "-      // Recover, even though file was deleted", "-      _file = fme.getFile();", "-    }*/", "-    ", "-      tFail.thrownException().toString(): ", "-      tFail.thrownException().getMessage();", "+      failure.thrownException().toString(): ", "+      failure.thrownException().getMessage();", "-                            ! (tFail.thrownException() instanceof AssertionFailedError),", "-                            tcFail.getName(),", "-                            swFail.toString());", "+                            ! (failure.thrownException() instanceof AssertionFailedError),", "+                            testName,", "+                            sWriter.toString());"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3469be017f4728c5d7f143d3d335e7d6", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/InteractionsModelTest.java", "commitBeforeChange": "00c274c983090e9126b5a9ac7c84f4781adba195", "commitAfterChange": "f520b1b5f1b15642429d7c7844d7ac7a96f3e402", "methodNumberBeforeChange": 32, "methodNumberAfterChange": 31, "signatureBeforeChange": "   public void testInteractionsHistoryStoredCorrectly() throws EditDocumentException", "signatureAfterChange": "   public void testInteractionsHistoryStoredCorrectly() throws Exception", "diff": ["-  public void testInteractionsHistoryStoredCorrectly() throws EditDocumentException {", "+  public void testInteractionsHistoryStoredCorrectly() throws Exception {", "-    final InteractionsDocument doc = _model.getDocument();", "+    _model = new BadSyntaxInteractionsModel(_adapter);  // replaces model created by setUp()", "+    final BadSyntaxInteractionsModel model = (BadSyntaxInteractionsModel) _model;", "+    ", "+    final InteractionsDocument doc = model.getDocument();", "+    model._logInteractionStart();", "-        _model.interpretCurrentInteraction();", "+        model.setSyntaxErrorStrings(\"Encountered Unexpected \\\"<EOF>\\\"\", \"public class A {\\n\");", "+        model.interpretCurrentInteraction();", "-    Utilities.clearEventQueue();", "+    model._waitInteractionDone();", "-    _model.replReturnedSyntaxError(\"Encountered Unexpected \\\"<EOF>\\\"\", \"public class A {\\n\", -1, -1, -1, -1);", "+//    _model.replReturnedSyntaxError(\"Encountered Unexpected \\\"<EOF>\\\"\", \"public class A {\\n\", -1, -1, -1, -1);", "-    Utilities.clearEventQueue();", "+//    Utilities.clearEventQueue();", "-    ", "+    model.disableSyntaxError();", "+    model._logInteractionStart();", "-        _model.replReturnedVoid();", "-    ", "-    Utilities.clearEventQueue();", "+    model._waitInteractionDone();"]}], "num": 25221}