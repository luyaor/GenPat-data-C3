{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c1dd173c3f21d9e34fe131d0f0b82364", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "84bed5aa6862c7dcefbeaf59b3150643", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/cache/DocumentCache.java", "commitBeforeChange": "0b7f9842c42a34509d077a5e1d655daf0b8192d6", "commitAfterChange": "736bd820b2cec64b47667921b5d5c82d9c502af8", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 22, "signatureBeforeChange": "   public void update(OpenDefinitionsDocument odd, DDReconstructor reconstructor)", "signatureAfterChange": "          boolean isFirst()", "diff": ["-   */", "-  public void update(OpenDefinitionsDocument odd, DDReconstructor reconstructor){", "-    //System.out.println(\"update \" + odd);", "-    Pair<DefinitionsDocument,DDReconstructor> oldpair = table.get(odd);", "-    Pair<DefinitionsDocument,DDReconstructor> newpair = new Pair<DefinitionsDocument,DDReconstructor>(null, reconstructor);", "-    if(isDDocInCache(odd)){", "-      reconstructor.saveDocInfo(oldpair.getFirst());", "-      oldpair.getFirst().close();", "-    }", "-    oldpair = table.remove(odd);", "-    table.put(odd, newpair);", "-  }", "+    ", "+    boolean isFirst()    { return _stat == FIRST_IN_LRU; }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9a3394af7e152ec42bd3416fe13701fe", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/cache/DocumentCache.java", "commitBeforeChange": "0b7f9842c42a34509d077a5e1d655daf0b8192d6", "commitAfterChange": "736bd820b2cec64b47667921b5d5c82d9c502af8", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 6, "signatureBeforeChange": "   public void put(OpenDefinitionsDocument odd, DDReconstructor reconstructor)", "signatureAfterChange": "   private synchronized void newFirst(DocManager dm)", "diff": ["-   */", "-  public void put(OpenDefinitionsDocument odd, DDReconstructor reconstructor){", "-    //System.out.println(\"put: \" + odd);", "-    Pair<DefinitionsDocument,DDReconstructor> pair = new Pair<DefinitionsDocument,DDReconstructor>(null, reconstructor);", "-    table.remove(odd);", "-    table.put(odd, pair);", "-    synchronized(lru) {", "-      lru.remove(odd);", "-    }", "-//    System.out.println(this);", "-  }", "+   */", "+  private synchronized void newFirst(DocManager dm) {", "+    if (_lru.size() > 0) _lru.getFirst().setNotFirst();", "+    _lru.remove(dm); // Make sure dm isn't in the LRU", "+    _lru.addFirst(dm);", "+    dm.setFirst();", "+    if (_lru.size() > CACHE_SIZE) {", "+      DocManager last = _lru.getLast();", "+      _lru.removeLast();", "+      last.kickOut();", "+    }"]}], "num": 17997}