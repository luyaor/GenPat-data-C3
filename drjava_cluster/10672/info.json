{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "58172750430d0e5b83fc6aaf453f45e4", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "00ca69d2e26ad41da414ed76a2e6dc25", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "plt/src/edu/rice/cs/plt/concurrent/CompletionMonitorTest.java", "commitBeforeChange": "274f7defc49003e66c942e814c9ce22958b3814c", "commitAfterChange": "f2730b22a0cb99532fc26d3fe0cc1ef03dc2fb33", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "      public void testRealSignal()", "signatureAfterChange": "      public void testRealSignal() throws InterruptedException", "diff": ["-  public void testRealSignal() {", "+  public void testRealSignal() throws InterruptedException {", "-    Thread worker = new Thread() {", "-      public void run() {", "-        try {", "-          Thread.sleep(50);", "-          as.set();", "-        } catch (InterruptedException e) {", "-        }", "-      }", "-    };", "-    worker.start();", "-    assertTrue(\"WaitOne hung\", as.waitOne());", "-    assertTrue(as.waitOne());", "+    ", "+    DelayedInterrupter interrupter1 = new DelayedInterrupter(200);", "+    _flag = false;", "+    new Thread() { public void run() { ConcurrentUtil.sleep(100); _flag = true; as.signal(); } }.start();", "+    assertFalse(_flag);", "+    assertFalse(as.isSignalled());", "+    as.insureSignalled();", "+    assertTrue(_flag);", "+    interrupter1.abort();", "+    assertTrue(as.isSignalled());", "+    ", "+    DelayedInterrupter interrupter2 = new DelayedInterrupter(10);", "+    assertTrue(as.isSignalled());", "+    as.insureSignalled(); // should not block", "+    interrupter2.abort();", "+    ", "-    assertFalse(\"Reset failed to do its job\", as.isFlag());", "+    assertFalse(as.isSignalled());", "+    DelayedInterrupter interrupter3 = new DelayedInterrupter(50);", "+    try { as.insureSignalled(); fail(\"Monitor should not be signalled\"); }", "+    catch (InterruptedException e) { /* expected behavior */ }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2819b1e9637b20127b5af03850a23e04", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelOtherTest.java", "commitBeforeChange": "5524f1583831732cba13db8d29753185e8da800d", "commitAfterChange": "99d03f8fb452eedca57bf52b837e87bbebdabefc", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "   public void testInteractionPreventedFromExit() throws BadLocationException", "signatureAfterChange": "   public void testInteractionPreventedFromExit()     throws BadLocationException, InterruptedException", "diff": ["-  public void testInteractionPreventedFromExit() throws BadLocationException", "+  public void testInteractionPreventedFromExit()", "+    throws BadLocationException, InterruptedException", "-    String result = interpret(\"System.exit(-1);\");", "+    TestListener listener = new TestListener() {", "+      public void interactionStarted() {", "+        interactionStartCount++;", "+      }", "-    assertEquals(\"interactions result\",", "-                 DefaultGlobalModel.EXIT_CALLED_MESSAGE,", "-                 result);", "+      public void interactionsExited(int status) {", "+        assertInteractionStartCount(1);", "+        interactionsExitedCount++;", "+        lastExitStatus = status;", "+      }", "+", "+      public void interactionsReset() {", "+        synchronized(this) {", "+          assertInteractionStartCount(1);", "+          assertInteractionsExitedCount(1);", "+          interactionsResetCount++;", "+          this.notify();", "+        }", "+      }", "+    };", "+", "+    _model.addListener(listener);", "+    synchronized(listener) {", "+      interpretIgnoreResult(\"System.exit(23);\");", "+      listener.wait();", "+    }", "+", "+    listener.assertInteractionStartCount(1);", "+    listener.assertInteractionsResetCount(1);", "+    listener.assertInteractionsExitedCount(1);", "+    assertEquals(\"exit status\", 23, listener.lastExitStatus);", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d42a7570dab8767696aaee61596defc8", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelOtherTest.java", "commitBeforeChange": "6e00bd0fe78b22f9b84f30182d050c16081947ef", "commitAfterChange": "d6801eea8d321f3e0015cdd20a1cba75837384cb", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 5, "signatureBeforeChange": "   public void testResetConsole() throws EditDocumentException, InterruptedException", "signatureAfterChange": "   public void testResetConsole() throws EditDocumentException, InterruptedException", "diff": ["-    TestListener listener = new TestListener() {", "-      public void interactionStarted() { }", "-      public void interactionEnded() {", "-        synchronized(_interactionDoneLock) {", "-          interactionEndCount++;", "-//          _interactionDone = true;", "-          _interactionDoneLock.notify();", "-        }", "-      }", "-", "-      public void consoleReset() { consoleResetCount++; }", "-    };", "+    InteractionListener listener = new InteractionListener();", "+    ", "+    listener.logInteractionStart();", "+    Utilities.clearEventQueue();", "+    ", "-//    _interactionDone = false;", "-    synchronized(_interactionDoneLock) {", "-      interpretIgnoreResult(\"System.out.print(\\\"a\\\");\");", "-      _interactionDoneLock.wait();  // notified on interactionEnded", "-    }", "-", "+    ", "+    listener.logInteractionStart();    // only resets the interactionDone and resetDone flags", "+    listener.resetConsoleResetCount(); // resets the resetConsoleCount in the listener", "+    ", "+    interpretIgnoreResult(\"System.out.print(\\\"a\\\");\");", "+    listener.waitInteractionDone();", "+    ", "+    Utilities.clearEventQueue();", "+    ", "-    listener.assertConsoleResetCount(2);", "+    listener.assertConsoleResetCount(1);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "db1c5e3716fc997aa66e8f4a7ae27a42", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelIOTest.java", "commitBeforeChange": "5944dd2b12a74ebad6e3549d813d2dd557403c7e", "commitAfterChange": "53735c967d2add6a16ab5776bac9111426f41996", "methodNumberBeforeChange": 56, "methodNumberAfterChange": 56, "signatureBeforeChange": "   public void testSaveClearAndLoadHistory() throws DocumentAdapterException,     BadLocationException, InterruptedException, IOException", "signatureAfterChange": "   public void testSaveClearAndLoadHistory() throws DocumentAdapterException,     BadLocationException, InterruptedException, IOException", "diff": ["+    String newLine = System.getProperty(\"line.separator\");", "+    String s3 = \"int y;\" + newLine + \"int z;\";", "+    interpretIgnoreResult(s3);", "+    while (listener.interactionEndCount == 2) {", "+      synchronized(listener) {", "+        try {", "+          listener.wait();", "+        }", "+        catch (InterruptedException ie) {", "+          throw new UnexpectedException(ie);", "+        }", "+      }", "+    }", "-                 s1+'\\n'+s2+'\\n',", "+                 s1 + newLine + s2 + newLine + s3 + newLine,", "-                 s1+\"\\n\"+s2+\";\\n\",", "+                 s1 + newLine + s2 + \";\" + newLine + s3 + newLine,", "-    listener.assertInteractionEndCount(2);", "-    listener.assertInteractionStartCount(2);", "+    listener.assertInteractionEndCount(3);", "+    listener.assertInteractionStartCount(3);", "-    //String newLine = System.getProperty(\"line.separator\");", "-                 History.HISTORY_FORMAT_VERSION_2 + s1 + \"\\n\" + s2 + \";\\n\",", "+                 History.HISTORY_FORMAT_VERSION_2 + ", "+                 s1 + newLine + s2 + \";\" + newLine + s3 + newLine,", "-    while (listener.interactionEndCount == 2) {", "+    while (listener.interactionEndCount == 3) {", "-    listener.assertInteractionStartCount(3);", "-    listener.assertInteractionEndCount(3);", "+    listener.assertInteractionStartCount(4);", "+    listener.assertInteractionEndCount(4);"]}], "num": 10672}