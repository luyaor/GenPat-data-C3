{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c9334bb201982f839471864b055f9dd3", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "245a9cbbf07d28220b1d03a2040a7442", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/StyleUpdateThread.java", "commitBeforeChange": "ab1acd6921fa73274023da473a4888d5bdd6b5f2", "commitAfterChange": "a5a766c0abe1a94ea1cfa69aac7995654eda0886", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "  \tpublic void run()", "signatureAfterChange": "  \tpublic void run()", "diff": ["-\t\tSimpleAttributeSet attributes = new SimpleAttributeSet();", "-\t\t//int startOfInterimText = _changedStates.elementAt(0).location;", "-\t\t// Paint all affected text yellow as interim color.", "-//\t\tStyleConstants.setForeground(attributes, StateBlock.INTERIM_COLOR);", "-//\t\t_doc.setCharacterAttributes(startOfInterimText,", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t _doc.getLength() - startOfInterimText,", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t attributes,", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t false);", "-\t\t//synchronized(this) {", "-//\t\ttry {sleep(150);}", "-//\t\tcatch (InterruptedException ex) {}", "-//\t\t\t}", "-\t\tfor (int i = 0; i < _changedStates.size(); i++) {", "-\t\t\tStateBlock currentSB = _changedStates.elementAt(i);", "-\t\t\tif (currentSB.location >= _breakLocation) {", "-\t\t\t\tbreak;", "+\t\twhile (true) {", "+\t\t\twhile (_messages.size() == 0) {", "+\t\t\t\ttry {", "+\t\t\t\t\tsleep(100);", "+\t\t\t\t}", "+\t\t\t\tcatch (InterruptedException e) {}", "-\t\t\tStyleConstants.setForeground(attributes, currentSB.state);", "-\t\t\t_doc.setCharacterAttributes(currentSB.location,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentSB.size,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattributes,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);\t\t\t", "+", "+\t\t\tStyleUpdateMessage nextMessage = _messages.elementAt(0);", "+\t\t\t_messages.removeElementAt(0);", "+\t\t\t", "+\t\t\tif (nextMessage instanceof CompoundUpdateMessage) {", "+\t\t\t\tCompoundUpdateMessage compoundMessage =", "+\t\t\t\t\t(CompoundUpdateMessage)nextMessage;", "+\t\t\t\tfor (int i = 0; i < compoundMessage.size(); i++) {", "+\t\t\t\t\tcurrentSB = compoundMessage.elementAt(i);", "+\t\t\t\t\tif ((_messages.size() != 0) &&", "+\t\t\t\t\t\t\t(_messages.elementAt(0) instanceof CompoundUpdateMessage) &&", "+\t\t\t\t\t\t\t(currentSB.location >", "+\t\t\t\t\t\t\t ((CompoundUpdateMessage)_messages.elementAt(0))", "+\t\t\t\t\t\t\t .elementAt(0).location)) {", "+\t\t\t\t\t\t// Abort the current update because we got a new one.", "+\t\t\t\t\t\t// The abort happens once we've updated using the old info", "+\t\t\t\t\t\t// at least up to where the new one starts.", "+\t\t\t\t\t\tbreak;", "+\t\t\t\t\t}", "+\t\t\t\t", "+\t\t\t\t\tStyleConstants.setForeground(attributes, currentSB.state);", "+\t\t\t\t\ttry {", "+\t\t\t\t\t\tSwingUtilities.invokeAndWait(new Runnable() {", "+\t\t\t\t\t\t\tpublic void run() {", "+\t\t\t\t\t\t\t\t_doc.setCharacterAttributes(currentSB.location,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentSB.size,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattributes,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t});", "+\t\t\t\t\t} catch (Exception e) {}", "+\t\t\t\t\t\t", "+\t\t\t\t\t\t", "+//\t\t\t\t\t} catch (ArrayIndexOutOfBoundsException e) {", "+//\t\t\t\t\t\tSystem.err.println(\"len=\" + _doc.getLength() +", "+//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", cur=\" + _doc.getCurrentLocation() +", "+//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", loc=\" + currentSB.location +", "+//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", +=\" + currentSB.size);", "+//\t\t\t\t\t}", "+//\t\t\t\t\t_taskCounter.signalProgress();", "+//\t\t\t\t\tDrJava.consoleOut().println(\"Compound: \" + currentSB.location + \", \" +", "+//\t\t\t\t\t\t\t\t\t\t\t\t\t\t currentSB.size + \": \" +", "+//\t\t\t\t\t\t\t\t\t\t\t\t\t\t currentSB.state);", "+\t\t\t\t}", "+\t\t\t}", "+\t\t\telse if (nextMessage instanceof SimpleUpdateMessage) {", "+\t\t\t\t\tcurrentSB = ((SimpleUpdateMessage)nextMessage)", "+\t\t\t\t\t\t.getStateBlock();", "+\t\t\t\t\tStyleConstants.setForeground(attributes, currentSB.state);", "+\t\t\t\t\ttry {", "+\t\t\t\t\t\tSwingUtilities.invokeAndWait(new Runnable() {", "+\t\t\t\t\t\t\tpublic void run() {", "+\t\t\t\t\t\t\t\t_doc.setCharacterAttributes(currentSB.location,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentSB.size,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattributes,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t});", "+\t\t\t\t\t} catch (Exception e) {}", "+//\t\t\t\t\tDrJava.consoleOut().println(\"Simple: \" + currentSB.location + \", \" +", "+//\t\t\t\t\t\t\t\t\t\t\t\t\t\t currentSB.size + \": \" +", "+//\t\t\t\t\t\t\t\t\t\t\t\t\t\t currentSB.state);", "+", "+\t\t\t}", "+\t\t\telse { // nextMessage instanceof NoUpdateMessage", "+//\t\t\t\t\tDrJava.consoleOut().println(\"No update\");", "+\t\t\t}", "+\t\t\t_taskCounter.decrement();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9b907fefb67a5854da9cae00c6744ec1", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/StyleUpdateThread.java", "commitBeforeChange": "e89db6424eb4d447de92442bb5bec9b31ff0f5d0", "commitAfterChange": "d23acb744eb150939f4879adf009d6632073536f", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "  \tpublic void run()", "signatureAfterChange": "  \tpublic void run()", "diff": ["-\t\t\t", "-\t\t\tif (nextMessage instanceof CompoundUpdateMessage) {", "-\t\t\t\tCompoundUpdateMessage compoundMessage =", "-\t\t\t\t\t(CompoundUpdateMessage)nextMessage;", "-\t\t\t\tfor (int i = 0; i < compoundMessage.size(); i++) {", "-\t\t\t\t\tcurrentSB = compoundMessage.elementAt(i);", "-\t\t\t\t\tif ((_messages.size() != 0) &&", "-\t\t\t\t\t\t\t(_messages.elementAt(0) instanceof CompoundUpdateMessage) &&", "-\t\t\t\t\t\t\t(currentSB.location >", "-\t\t\t\t\t\t\t ((CompoundUpdateMessage)_messages.elementAt(0))", "-\t\t\t\t\t\t\t .elementAt(0).location)) {", "-\t\t\t\t\t\t// Abort the current update because we got a new one.", "-\t\t\t\t\t\t// The abort happens once we've updated using the old info", "-\t\t\t\t\t\t// at least up to where the new one starts.", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\t}", "-\t\t\t\t", "-\t\t\t\t\tStyleConstants.setForeground(attributes, currentSB.state);", "-\t\t\t\t\ttry {", "-\t\t\t\t\t\tSwingUtilities.invokeAndWait(new Runnable() {", "-\t\t\t\t\t\t\tpublic void run() {", "-\t\t\t\t\t\t\t\t_doc.setCharacterAttributes(currentSB.location,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentSB.size,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattributes,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t});", "-\t\t\t\t\t} catch (Exception e) {}", "-\t\t\t\t\t\t", "-\t\t\t\t\t\t", "-//\t\t\t\t\t} catch (ArrayIndexOutOfBoundsException e) {", "-//\t\t\t\t\t\tSystem.err.println(\"len=\" + _doc.getLength() +", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", cur=\" + _doc.getCurrentLocation() +", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", loc=\" + currentSB.location +", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", +=\" + currentSB.size);", "-//\t\t\t\t\t}", "-//\t\t\t\t\t_taskCounter.signalProgress();", "-//\t\t\t\t\tDrJava.consoleOut().println(\"Compound: \" + currentSB.location + \", \" +", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t\t currentSB.size + \": \" +", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t\t currentSB.state);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t\telse if (nextMessage instanceof SimpleUpdateMessage) {", "-\t\t\t\t\tcurrentSB = ((SimpleUpdateMessage)nextMessage)", "-\t\t\t\t\t\t.getStateBlock();", "-\t\t\t\t\tStyleConstants.setForeground(attributes, currentSB.state);", "-\t\t\t\t\ttry {", "-\t\t\t\t\t\tSwingUtilities.invokeAndWait(new Runnable() {", "-\t\t\t\t\t\t\tpublic void run() {", "-\t\t\t\t\t\t\t\t_doc.setCharacterAttributes(currentSB.location,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentSB.size,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattributes,", "-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse);", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t});", "-\t\t\t\t\t} catch (Exception e) {}", "-//\t\t\t\t\tDrJava.consoleOut().println(\"Simple: \" + currentSB.location + \", \" +", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t\t currentSB.size + \": \" +", "-//\t\t\t\t\t\t\t\t\t\t\t\t\t\t currentSB.state);", "-", "-\t\t\t}", "-\t\t\telse { // nextMessage instanceof NoUpdateMessage", "-//\t\t\t\t\tDrJava.consoleOut().println(\"No update\");", "-\t\t\t}", "+\t\t\tnextMessage.dispatch(_doc, _messages);"]}], "num": 22210}