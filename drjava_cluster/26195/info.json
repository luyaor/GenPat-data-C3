{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bc7a015d96ea010cf3f74bc93d32573f", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9f4aa36f7593b823216b6f360515a4b8", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "javalanglevels/src/edu/rice/cs/javalanglevels/Augmentor.java", "commitBeforeChange": "093f33e43dd3de7d97364f410a0a58ca1448a1ce", "commitAfterChange": "51703b3c111cc35e01e35a5e289226f6da1c1962", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "   public Void forClassDef(ClassDef cd)", "signatureAfterChange": "   public Void forClassDef(ClassDef cd)", "diff": ["-", "-    ModifiersAndVisibility m = cd.getMav();", "-    if (_isElementaryFile() && sd.hasModifier(\"public\")) { ", "-      // If this is an Elementary level file that we augmented with \"public\", then we need to", "-      // augment the .java file with \"public\".  We should do this for all TestCase files.", "+    ModifiersAndVisibility m = cd.getMav();", "+    String[] modifiers = m.getModifiers();", "+    ", "+    /* Support legacy Elementary level (dj0) files by generating a Junit import statement if this import has", "+     * been auto-generated. */", "+", "+    if (sd.hasAutoGeneratedJunitImport()) {", "+      // import statement should be OK here because language level test files can only contain one class. */", "+      _writeToFileOut(\"import junit.framework.TestCase;\" + newLine);  ", "+    }", "+    ", "+    /* Support legacy Elementary level (dj0) files by add \"public \" prefix to classes that must be public (TestCase ", "+     * files). */", "+    if (sd.hasModifier(\"public\") && (! Utilities.isPublic(m.getModifiers()))) {", "+      assert ! Utilities.hasVisibilityModifier(modifiers);", "-", "+    ", "-    // Do all that crazy augmentation stuff.", "-    if (_isElementaryFile() || _isIntermediateFile()) {", "-      writeConstructor(className, sd, baseIndent);", "-      writeAccessors(sd, baseIndent);", "-      String valueToStringName = writeValueToString(sd, baseIndent);", "-      String valueEqualsName = writeValueEquals(sd, baseIndent);", "-      String valueHashCodeName = writeValueHashCode(sd, baseIndent, valueEqualsName);", "-      writeToString(sd, baseIndent, valueToStringName);", "-      writeEquals(className, sd, baseIndent, valueEqualsName);", "-      writeHashCode(className, sd, baseIndent, false, valueHashCodeName);", "-      for (String s : _endOfClassVarDefs) {", "-        _writeToFileOut(newLine + indentString(baseIndent, 1) + s);", "-      }", "-      if (_endOfClassVarDefs.size() > 0) {", "+    // Augment this class declaration", "+    writeConstructor(className, sd, baseIndent);", "+    writeAccessors(sd, baseIndent);", "+    String valueToStringName = writeValueToString(sd, baseIndent);", "+    String valueEqualsName = writeValueEquals(sd, baseIndent);", "+    String valueHashCodeName = writeValueHashCode(sd, baseIndent, valueEqualsName);", "+    writeToString(sd, baseIndent, valueToStringName);", "+    writeEquals(className, sd, baseIndent, valueEqualsName);", "+    writeHashCode(className, sd, baseIndent, false, valueHashCodeName);", "+    for (String s : _endOfClassVarDefs) {", "+      _writeToFileOut(newLine + indentString(baseIndent, 1) + s);", "+    }", "+    if (_endOfClassVarDefs.size() > 0) {", "-      }", "-      _writeToFileOut(indentString(baseIndent, 0));", "-", "+    _writeToFileOut(indentString(baseIndent, 0));", "-"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a0d881e64af4589e5c9573298b2d8b77", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "javalanglevels/src/edu/rice/cs/javalanglevels/Augmentor.java", "commitBeforeChange": "093f33e43dd3de7d97364f410a0a58ca1448a1ce", "commitAfterChange": "51703b3c111cc35e01e35a5e289226f6da1c1962", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 12, "signatureBeforeChange": "   public Void forInnerClassDef(InnerClassDef cd)", "signatureAfterChange": "   public Void forInnerClassDef(InnerClassDef cd)", "diff": ["-   */", "+    */", "-", "+    ", "+    /** WARNING: the code suffix copied from ClassDef; it it works it should be refactored. */", "-", "-    _readAndWriteThroughIndex(cd.getSourceInfo().getEndLine(), cd.getSourceInfo().getEndColumn() - 1);;", "-", "-    // We don't bother visiting any of the signature nodes -- parameters, type, name, etc.", "+    ", "+    int baseIndent = cd.getSourceInfo().getStartColumn() - 1;", "+    className = LanguageLevelVisitor.getUnqualifiedClassName(sd.getName());", "+    _readAndWriteThroughIndex(cd.getSourceInfo().getEndLine(), cd.getSourceInfo().getEndColumn() - 1);", "+    ", "+    // Augment this class declaration", "+    writeConstructor(className, sd, baseIndent);", "+    writeAccessors(sd, baseIndent);", "+    String valueToStringName = writeValueToString(sd, baseIndent);", "+    String valueEqualsName = writeValueEquals(sd, baseIndent);", "+    String valueHashCodeName = writeValueHashCode(sd, baseIndent, valueEqualsName);", "+    writeToString(sd, baseIndent, valueToStringName);", "+    writeEquals(className, sd, baseIndent, valueEqualsName);", "+    writeHashCode(className, sd, baseIndent, false, valueHashCodeName);", "+    for (String s : _endOfClassVarDefs) {", "+      _writeToFileOut(newLine + indentString(baseIndent, 1) + s);", "+    }", "+    if (_endOfClassVarDefs.size() > 0) {", "+      _writeToFileOut(newLine);", "+      _endOfClassVarDefs.clear();", "+    }", "+    _writeToFileOut(indentString(baseIndent, 0));", "+    ", "+    ", "+// We don't bother visiting any of the signature nodes -- parameters, type, name, etc.", "-}", "+  }"]}], "num": 26195}