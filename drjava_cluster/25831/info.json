{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4dc38b08fa6c5684f4f7da956703fddc", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "77f24d3abb679f9032d29a7944792778", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "92fd06b34796984853343dde64251cfdd2a0ce25", "commitAfterChange": "ad91ad9028e35ded2c6aef6b30e8459151ecae7c", "methodNumberBeforeChange": 79, "methodNumberAfterChange": 80, "signatureBeforeChange": "          public void run()", "signatureAfterChange": "     public void run()", "diff": ["+    /** Inserts chars in reduced model and move location to end of insert; cache has already been selectively cleared. */", "-      // adjust location to the start of the text to input", "-      acquireReadLock();", "-      try {", "-        synchronized(_reduced) {", "-          _reduced.move(_offset - _currentLocation);  ", "-          int len = _text.length();", "-          // loop over string, inserting characters into reduced model", "-          for (int i = 0; i < len; i++) {", "-            char curChar = _text.charAt(i);", "-            _addCharToReducedModel(curChar);", "-          }", "-          _currentLocation = _offset + len;  // current location is at end of inserted string", "-          _styleChanged();", "-        }", "+      ", "+//      acquireReadLock();  // Unnecessary! exclusive readLock should already be held!", "+//      try {", "+//        synchronized(_reduced) {  // Unnecessary?  no other thread should hold a readLock", "+      _reduced.move(_offset - _currentLocation);  ", "+      int len = _text.length();", "+      // loop over string, inserting characters into reduced model", "+      for (int i = 0; i < len; i++) {", "+        char curChar = _text.charAt(i);", "+        _addCharToReducedModel(curChar);", "-      finally { releaseReadLock(); }", "+      _currentLocation = _offset + len;  // current location is at end of inserted string", "+      _styleChanged();", "+//        }", "+//      }", "+//      finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "94598a893d349f393205f22935d008b5", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 74, "methodNumberAfterChange": 74, "signatureBeforeChange": "          public void run()", "signatureAfterChange": "          public void run()", "diff": ["-      synchronized(_reduced) {", "-        _reduced.move(_offset - _currentLocation);  ", "-        int len = _text.length();", "-        // loop over string, inserting characters into reduced model", "-        for (int i = 0; i < len; i++) {", "-          char curChar = _text.charAt(i);", "-          _addCharToReducedModel(curChar);", "+      readLock();", "+      try {", "+        synchronized(_reduced) {", "+          _reduced.move(_offset - _currentLocation);  ", "+          int len = _text.length();", "+          // loop over string, inserting characters into reduced model", "+          for (int i = 0; i < len; i++) {", "+            char curChar = _text.charAt(i);", "+            _addCharToReducedModel(curChar);", "+          }", "+          _currentLocation = _offset + len;  // current location is at end of inserted string", "+          _styleChanged();", "-        _currentLocation = _offset + len;  // current location is at end of inserted string", "-        _styleChanged();", "+      finally { readUnlock(); }"]}], "num": 25831}