{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "00d565912d23415c25089418919afe12", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1e130ee45515b16f62ec32da56017755", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/ProjectPropertiesFrame.java", "commitBeforeChange": "d33d42f5f56aa9f97fa7ee5954a0170706bf34dc", "commitAfterChange": "d94a1a3c2d24d89ea1f580460a5e45b2a0d432b1", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 29, "signatureBeforeChange": "      public JPanel _jarMainClassPanel()", "signatureAfterChange": "      public JPanel _mainDocumentSelector()", "diff": ["-  public JPanel _jarMainClassPanel() {", "+  public JPanel _mainDocumentSelector() {", "+    File rootFile = _getProjRoot();", "+    try {", "+      rootFile = rootFile.getCanonicalFile();", "+    } catch(IOException e) { }", "-    JFileChooser mainChooser = new JFileChooser(_getProjRoot());", "-    mainChooser.setDialogTitle(\"Select Main Document for the project\");", "-    mainChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);", "-//    chooser.setTopMessage(\"Select the main document for the project:\");", "-    mainChooser.setApproveButtonText(\"Select\");", "+    final File root = rootFile;", "-    _jarMainClassSelector = new FileSelectorComponent(this, mainChooser, 20, 12f);", "-    //toReturn.add(_builtDirSelector, BorderLayout.EAST);", "+    FileChooser chooser = new FileChooser(root);", "+    chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);", "+    chooser.setDialogType(JFileChooser.CUSTOM_DIALOG);", "+ ", "+    chooser.setDialogTitle(\"Select Main Document\");", "+//    Utilities.show(\"Main Document Root is: \" + root);", "+    chooser.setCurrentDirectory(root);", "+    File mainFile = _getMainFile();", "+    if (mainFile != FileOption.NULL_FILE) chooser.setSelectedFile(mainFile);", "+", "+    chooser.setApproveButtonText(\"Select\");", "-    _jarMainClassSelector.setFileFilter(new FileFilter() {", "+    FileFilter filter = new FileFilter() {", "-        return f.isDirectory() ||", "-          (name.endsWith(\".java\") || name.endsWith(\".dj0\") || name.endsWith(\".dj1\") || name.endsWith(\".dj2\"));", "+        return  FileOps.isInFileTree(f, root) && (f.isDirectory() ||", "+          (name.endsWith(\".java\") || name.endsWith(\".dj0\") || name.endsWith(\".dj1\") || name.endsWith(\".dj2\")));", "-      public String getDescription() { return \"Java & DrJava Files (*.java, *.dj0, *.dj1, *.dj2)\"; }", "-    });", "+      public String getDescription() { return \"Java & DrJava Files (*.java, *.dj0, *.dj1, *.dj2) in project\"; }", "+    };", "-    _jarMainClassSelector.getFileField().getDocument().addDocumentListener(new DocumentListener() {", "+    chooser.addChoosableFileFilter(filter);", "+    _mainDocumentSelector = new FileSelectorComponent(this, chooser, 20, 12f);", "+    ", "+    _mainDocumentSelector.getFileField().getDocument().addDocumentListener(new DocumentListener() {", "-    ", "-    return _jarMainClassSelector;", "+    return _mainDocumentSelector;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "25e3ef178de5e348db09f9c446cf4db6", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/ProjectPropertiesFrame.java", "commitBeforeChange": "5b5854a74ae4104fe98919ec137a82ddfe0b03d0", "commitAfterChange": "1ee842fd21d172ce428a3353cc0f74580e95bff8", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 11, "signatureBeforeChange": "      public JPanel _jarMainClassSelector()", "signatureAfterChange": "   public JPanel _jarMainClassSelector()", "diff": ["+//  }", "-    JFileChooser fileChooser = new JFileChooser(_mainFrame.getModel().getProjectFile().getParentFile());", "-    fileChooser.setDialogTitle(\"Select\");", "-    fileChooser.setApproveButtonText(\"Select\");", "-    fileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);", "-    fileChooser.setMultiSelectionEnabled(false);", "-    _jarMainClassSelector = new FileSelectorComponent(this,fileChooser,20,12f);", "-    _jarMainClassSelector.setFileFilter(new FileFilter(){", "+    File rootFile = _mainFrame.getModel().getProjectFile();", "+    try {", "+      rootFile = rootFile.getCanonicalFile();", "+    } catch(IOException e) { }", "+    ", "+    DirectoryChooser chooser = new DirectoryChooser(this,rootFile);", "+    chooser.setTitle(\"Select Main Document\");", "+    chooser.setTopMessage(\"Select the main doucment for the project:\");", "+    chooser.setApproveButtonText(\"Select\");", "+    FileFilter filter = new FileFilter(){", "-        return f.getName().endsWith(\".java\") || f.isDirectory();", "+        String name = f.getName();", "+        return  !f.isDirectory() &&", "+          (name.endsWith(\".java\") ||", "+           name.endsWith(\".dj0\") ||", "+           name.endsWith(\".dj1\") ||", "+           name.endsWith(\".dj2\"));", "-        return \"Java Files (*.java)\";", "+        return \"Java & DrJava Files (*.java, *.dj0, *.dj1, *.dj2)\";", "-      ", "-    });", "+    };", "+    chooser.addChoosableFileFilter(filter);", "+    chooser.addFileFilter(filter);", "+    chooser.setShowFiles(true);", "+    chooser.setFileDisplayManager(MainFrame.getFileDisplayManager());", "+    _jarMainClassSelector = new DirectorySelectorComponent(this,chooser,20,12f);"]}], "num": 24626}