{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "edfd7d277cd592a6e62e7843cdfbe146", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "660a304ee343ab1677e5d1cd02f00fa1", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/debug/jpda/EventHandlerThread.java", "commitBeforeChange": "27f4730bb628f4f21b5ace9b8592e93a615017f8", "commitAfterChange": "08f616afaebe02cc02ba5da4da4990852caead81", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 13, "signatureBeforeChange": "   private void _handleThreadDeathEvent(ThreadDeathEvent e) throws DebugException", "signatureAfterChange": "   private void _handleThreadDeathEvent(final ThreadDeathEvent e)", "diff": ["-  private void _handleThreadDeathEvent(ThreadDeathEvent e) throws DebugException {", "+  private void _handleThreadDeathEvent(final ThreadDeathEvent e) /* throws DebugException */ {", "-    synchronized(_debugger) {", "-      ThreadReference running = _debugger.getCurrentRunningThread();", "-      if (e.thread().equals(running)) {", "-        // Delete any step requests pending on this thread", "-        EventRequestManager erm = _vm.eventRequestManager();", "-        List steps = erm.stepRequests();", "-        for (int i = 0; i < steps.size(); i++) {", "-          StepRequest step = (StepRequest)steps.get(i);", "-          if (step.thread().equals(e.thread())) {", "-            erm.deleteEventRequest(step);", "-            ", "-            // There can only be one step request per thread,", "-            //  so we can stop looking", "-            break;", "+//    synchronized(_debugger) {", "+    SwingUtilities.invokeLater(new Runnable() {", "+      public void run() {", "+        try {", "+          ThreadReference running = _debugger.getCurrentRunningThread();", "+          if (e.thread().equals(running)) {", "+            // Delete any step requests pending on this thread", "+            EventRequestManager erm = _vm.eventRequestManager();", "+            List steps = erm.stepRequests();", "+            for (int i = 0; i < steps.size(); i++) {", "+              StepRequest step = (StepRequest)steps.get(i);", "+              if (step.thread().equals(e.thread())) {", "+                erm.deleteEventRequest(step);", "+                ", "+                // There can only be one step request per thread,", "+                //  so we can stop looking", "+                break;", "+              }", "+            }", "+            _debugger.currThreadDied();", "+          else _debugger.nonCurrThreadDied();", "+//    }", "+          ", "+          // Thread is suspended on death, so resume it now.", "+          e.thread().resume();", "-        _debugger.currThreadDied();", "-      }", "-      else _debugger.nonCurrThreadDied();", "-    }", "-    ", "-    // Thread is suspended on death, so resume it now.", "-    e.thread().resume();", "+        catch(DebugException e) { throw new UnexpectedException(e); }", "+      }   ", "+    });"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f7dbe6f02506ca19f323adb9deff0923", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/debug/jpda/EventHandlerThread.java", "commitBeforeChange": "27f4730bb628f4f21b5ace9b8592e93a615017f8", "commitAfterChange": "08f616afaebe02cc02ba5da4da4990852caead81", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 8, "signatureBeforeChange": "   private void _handleStepEvent(StepEvent e) throws DebugException", "signatureAfterChange": "   private void _handleStepEvent(final StepEvent e)", "diff": ["-  private void _handleStepEvent(StepEvent e) throws DebugException {", "+  private void _handleStepEvent(final StepEvent e) /* throws DebugException */ {", "-    _debugger.preloadDocument(e.location());", "-    // now acquire _debugger lock, the event thread won't need tge _debugger lock anymore", "-    synchronized(_debugger) {", "-      if (_isSuspendedWithFrames(e.thread()) && _debugger.setCurrentThread(e.thread())) {", "-        _debugger.printMessage(\"Stepped to \" + e.location().declaringType().name() + \".\" + e.location().method().name()", "-                                 + \"(...)  [line \" + e.location().lineNumber() + \"]\");", "-        _debugger.currThreadSuspended();", "+    SwingUtilities.invokeLater(new Runnable() {", "+      public void run() {", "+        try {", "+          _debugger.preloadDocument(e.location());", "+          // now acquire _debugger lock, the event thread won't need tge _debugger lock anymore", "+//    synchronized(_debugger) {", "+          if (_isSuspendedWithFrames(e.thread()) && _debugger.setCurrentThread(e.thread())) {", "+            _debugger.printMessage(\"Stepped to \" + e.location().declaringType().name() + \".\" + e.location().method().name()", "+                                     + \"(...)  [line \" + e.location().lineNumber() + \"]\");", "+            _debugger.currThreadSuspended();", "+          }", "+          // Delete the step request so it doesn't happen again", "+          _debugger.getEventRequestManager().deleteEventRequest(e.request());", "+//    }", "+        }", "+        catch(DebugException e) { throw new UnexpectedException(e); }", "-      // Delete the step request so it doesn't happen again", "-      _debugger.getEventRequestManager().deleteEventRequest(e.request());", "-    }", "+    });"]}], "num": 17923}