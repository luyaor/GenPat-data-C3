{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4101a3a78774978dfdf63d48461c22c5", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1c89ff627af623c3858acc0735e8f5ea", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/indent/ActionStartPrevStmtPlus.java", "commitBeforeChange": "66e3bf5b9e7c116ff08fb5d237bdd1378cfb618a", "commitAfterChange": "22f4e4d3d8066ee931c35c7ee670d4fd2e8cfd6c", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "   public void indentLine(DefinitionsDocument doc)", "signatureAfterChange": "   public void indentLine(DefinitionsDocument doc)", "diff": ["+    ", "+    try {", "+      // Jump over {-} region if delimiter was a close brace.", "+      char delim = doc.getText(prevDelimiterPos, 1).charAt(0);", "+      if (delim == '}') {", "+        BraceReduction reduced = doc.getReduced();", "+        reduced.resetLocation();", "+        int dist = prevDelimiterPos - here + 1;", "+        reduced.move(dist);", "+        prevDelimiterPos -= reduced.balanceBackward() - 1;", "+        reduced.move(-dist);", "+      }", "+    }", "+    catch (BadLocationException e) {", "+      throw new UnexpectedException(e);", "+    }", "+    "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5cee7b3e17f88e8af073459006f4bbd9", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "f01da19eef180264e50ee938eb35e69c8d092f3e", "commitAfterChange": "fbaecba32a4936f7aab208313b312f73181698a7", "methodNumberBeforeChange": 189, "methodNumberAfterChange": 189, "signatureBeforeChange": "   private void _close()", "signatureAfterChange": "   private void _close()", "diff": ["-    _model.closeFile(_model.getActiveDocument());", "+    ", "+    try{", "+      if(_model.getActiveDocument().isAuxiliaryFile() || ", "+         _model.getActiveDocument().isProjectFile()){", "+        String text = \"Closing this file will permanently remove it from the current project.\" + ", "+          \"\\nAre you sure that you want to close this file?\";", "+        ", "+        int rc = JOptionPane.showConfirmDialog(MainFrame.this,", "+                                             text,", "+                                             \"Close \" + ", "+                                               _model.getActiveDocument().getFile().getName() + ", "+                                               \"?\",", "+                                             JOptionPane.YES_NO_OPTION);", "+        if(rc != JOptionPane.YES_OPTION)", "+          return;", "+      }", "+      ", "+      //Either this is an external file or user actually wants to close it", "+      _model.closeFile(_model.getActiveDocument());", "+        ", "+    }", "+    catch(FileMovedException e){", "+      //Not sure what exactly should be done.", "+      //For now, let's just say the error is unexpected.", "+      throw new UnexpectedException(e);", "+    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ec5b22982358ee53d0400c41e68ab712", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/indent/ActionStartPrevStmtPlus.java", "commitBeforeChange": "a3941c1000ac76b7c7dfbe2e02df0072cee011b6", "commitAfterChange": "9dde008cc707b0b4af3c382ad06f25fcd30d66ce", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "   public void indentLine(DefinitionsDocument doc)", "signatureAfterChange": "   public void indentLine(DefinitionsDocument doc)", "diff": ["-    ", "+", "+    try {", "+      char delim = doc.getText(prevDelimiterPos, 1).charAt(0);", "+      char[] ws = {' ', '\\t', '\\n', ';'};", "+      if (delim == ';') {", "+        int testPos = doc.findPrevCharPos(prevDelimiterPos, ws);", "+        if (doc.getText(testPos,1).charAt(0) == '}') {", "+          prevDelimiterPos = testPos;", "+        }", "+      }", "+    } catch (BadLocationException e) {", "+      //do nothing", "+    }", "+", "+"]}], "num": 4705}