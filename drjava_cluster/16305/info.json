{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "11ddf60f64dc1a1ccab9797b7e8e5019", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0ad13720b821bbc00ca5a5af7407f7d4", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": "      public ReducedModelState stateAtRelLocation(int dist)", "signatureAfterChange": "      public ReducedModelState stateAtRelLocation(int dist)", "diff": ["-    synchronized(_reduced) { return _reduced.moveWalkerGetState(dist); }", "+    readLock();", "+    try { synchronized(_reduced) { return _reduced.moveWalkerGetState(dist); } }", "+    finally { readUnlock(); }  "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3186cc953ed0a310e4316bc66d6567aa", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 24, "methodNumberAfterChange": 24, "signatureBeforeChange": "   public int balanceBackward()", "signatureAfterChange": "   public int balanceBackward()", "diff": ["-    synchronized(_reduced) { return _reduced.balanceBackward(); }", "+    readLock();", "+    try { ", "+      synchronized(_reduced) { return _reduced.balanceBackward(); }", "+    }", "+    finally { readUnlock(); }  "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3bbf8b226534bb753c515567e3f00b9a", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 76, "methodNumberAfterChange": 76, "signatureBeforeChange": "          public void run()", "signatureAfterChange": "          public void run()", "diff": ["-      synchronized(_reduced) { ", "-        setCurrentLocation(_offset);", "-        _reduced.delete(_length);    ", "-        _styleChanged();", "+      readLock();", "+      try {", "+        synchronized(_reduced) { ", "+          setCurrentLocation(_offset);", "+          _reduced.delete(_length);    ", "+          _styleChanged();", "+        }", "+      finally { readUnlock(); } "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "54a3eb151fa4e56cf990bedc4cf3910a", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 29, "methodNumberAfterChange": 29, "signatureBeforeChange": "      public ReducedModelState getStateAtCurrent()", "signatureAfterChange": "      public ReducedModelState getStateAtCurrent()", "diff": ["-    synchronized(_reduced) { return _reduced.getStateAtCurrent(); }", "+    readLock();", "+    try { synchronized(_reduced) { return _reduced.getStateAtCurrent(); } }", "+    finally { readUnlock(); } "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "59c8e951f9eda9dec99ef153dc83d882", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 30, "methodNumberAfterChange": 30, "signatureBeforeChange": "      public void resetReducedModelLocation()", "signatureAfterChange": "      public void resetReducedModelLocation()", "diff": ["-    synchronized(_reduced) { _reduced.resetLocation(); }", "+    readLock();", "+    try { synchronized(_reduced) { _reduced.resetLocation(); } }", "+    finally { readUnlock(); } "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "75ed02aefb1d16dd6457acf8c5f593ab", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/InteractionsDocumentAdapter.java", "commitBeforeChange": "1ca22d8d9e892abbe72cd6aa5627cc7ce0e56b03", "commitAfterChange": "024873f55ad7ba6280213fee7183c6688ba3b395", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": "   public boolean isInCommentBlock()", "signatureAfterChange": "   public boolean isInCommentBlock()", "diff": ["-    synchronized(_reduced) {", "-      resetReducedModelLocation();", "-      ReducedModelState state = stateAtRelLocation(getLength() - _currentLocation);", "-      boolean toReturn = (state.equals(ReducedModelStates.INSIDE_BLOCK_COMMENT));", "-      return toReturn;", "+    readLock();", "+    try {", "+      synchronized(_reduced) {", "+        resetReducedModelLocation();", "+        ReducedModelState state = stateAtRelLocation(getLength() - _currentLocation);", "+        boolean toReturn = (state.equals(ReducedModelStates.INSIDE_BLOCK_COMMENT));", "+        return toReturn;", "+      }", "+    finally { readUnlock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "94598a893d349f393205f22935d008b5", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 74, "methodNumberAfterChange": 74, "signatureBeforeChange": "          public void run()", "signatureAfterChange": "          public void run()", "diff": ["-      synchronized(_reduced) {", "-        _reduced.move(_offset - _currentLocation);  ", "-        int len = _text.length();", "-        // loop over string, inserting characters into reduced model", "-        for (int i = 0; i < len; i++) {", "-          char curChar = _text.charAt(i);", "-          _addCharToReducedModel(curChar);", "+      readLock();", "+      try {", "+        synchronized(_reduced) {", "+          _reduced.move(_offset - _currentLocation);  ", "+          int len = _text.length();", "+          // loop over string, inserting characters into reduced model", "+          for (int i = 0; i < len; i++) {", "+            char curChar = _text.charAt(i);", "+            _addCharToReducedModel(curChar);", "+          }", "+          _currentLocation = _offset + len;  // current location is at end of inserted string", "+          _styleChanged();", "-        _currentLocation = _offset + len;  // current location is at end of inserted string", "-        _styleChanged();", "+      finally { readUnlock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c3aff958f0b72719dcdfac22802772b9", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 22, "signatureBeforeChange": "   public void setCurrentLocation(int loc)", "signatureAfterChange": "   public void setCurrentLocation(int loc)", "diff": ["-   *  prevent _currentLocation from being stale when loc may be stale? */", "+   */", "-    synchronized(_reduced) { // locked because reading _currentLocation is not protected by locking in move", "-      move(loc - _currentLocation);  // sets _currentLocation", "+    readLock();", "+    try {", "+      synchronized(_reduced) { // locked because reading _currentLocation is not protected by locking in move", "+        move(loc - _currentLocation);  // sets _currentLocation", "+      }", "+    finally { readUnlock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "eb743fc26e1d75a972be5c7b516c88ca", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/DefinitionsDocument.java", "commitBeforeChange": "47c398bb655e51c115c8c0eb3d0935db42834771", "commitAfterChange": "62776e907e3e6dddd6b4161559ae3b70f27cc2e5", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": "   public boolean isModifiedSinceSave()", "signatureAfterChange": "   public boolean isModifiedSinceSave()", "diff": ["-//    readLock();", "-//    try { ", "-      return  _modifiedSinceSave; ", "-//    }", "-//    finally { readUnlock(); }", "+    readLock();", "+    try { return  _modifiedSinceSave; }", "+    finally { readUnlock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ebe9798c4f5b410a5cac9b1b2c195224", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "5497ac60fa563e6e67c580081d99fbd842e52332", "commitAfterChange": "5fa866685226be5aebbebdfba9d7d34d29108e50", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": "   public int balanceForward()", "signatureAfterChange": "   public int balanceForward()", "diff": ["-    synchronized(_reduced) { return _reduced.balanceForward(); }", "+    readLock();", "+    try { synchronized(_reduced) { return _reduced.balanceForward(); } }", "+    finally { readUnlock(); }  "]}], "num": 16305}