{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "977616d8a4bbc1cf5254aab99c378b7a", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "44362c156f08d3f6354eeea94c650cc9", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "e8f48651b4fb31b2a1907635fbd654b3f66a98b2", "commitAfterChange": "2499b0018a7f137bb1baaaf2d077c26486e3f12e", "methodNumberBeforeChange": 137, "methodNumberAfterChange": 138, "signatureBeforeChange": "   private void _openProjectHelper(File projectFile)", "signatureAfterChange": "   private void _openProjectHelper(File projectFile)", "diff": ["-    ", "-    /**", "-     * now the model", "-     */", "+    File[] projectFiles = _model.getProjectFiles();", "-    ", "-    /**", "-     * close all project files", "-     */", "-//    for(OpenDefinitionsDocument d: projDocs){", "-//      _model.closeFile(d);", "-//    }", "-      ", "-    closeFiles(projDocs);", "-//    nav.clear();", "-//    for(OpenDefinitionsDocument d: nonProjDocs){", "-//      System.err.println(\"adding\" + d);", "-//      try{", "-//        /* transfer docs with files to new navigator */", "-//        nav.addDocument(_model.getIDocGivenODD(d), d.getFile().getParentFile().getAbsolutePath());", "-//      }catch(IllegalStateException e){", "-//        /* transfer untitled docs to new navigator */", "-//        nav.addDocument(_model.getIDocGivenODD(d));", "-//      }catch(FileMovedException e){", "-//        /* if the file has moved or been deleted,", "-//         * then add it to external files, since it's", "-//         * \"no longer in the project directory\"", "-//         */", "-//        nav.addDocument(_model.getIDocGivenODD(d));", "-//      }", "-//    }", "+    // close all project files", "+    List<OpenDefinitionsDocument> docsToClose = new LinkedList<OpenDefinitionsDocument>();", "+    for(OpenDefinitionsDocument d: projDocs){", "+      if(d.isProjectFile()){", "+        docsToClose.add(d);", "+      }else{", "+        try{", "+          nav.refreshDocument(_model.getIDocGivenODD(d), d.getFile().getParentFile().getCanonicalPath());", "+        }catch(IOException e){", "+          // noop", "+        }", "+      }", "+    }", "+", "+    closeFiles(docsToClose);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ba67281bc9d7e0dcfaef1ad07ab5cb74", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "85ed1aa237c32b1787aaceb2ddec6d2f0e4c80e0", "commitAfterChange": "e2dcf9bc2cf7370066c5a6486905b66439f74f74", "methodNumberBeforeChange": 129, "methodNumberAfterChange": 129, "signatureBeforeChange": "   private void _openProjectHelper(File projectFile)", "signatureAfterChange": "   private void _openProjectHelper(File projectFile)", "diff": ["+    System.err.println(\"opening\");", "+", "-    _closeAll();", "-    _resetNavigatorPane();", "+    /**", "+     * now the model", "+     */", "+    List<OpenDefinitionsDocument> nonProjDocs = _model.getNonProjectDocuments();", "+    List<OpenDefinitionsDocument> projDocs = _model.getProjectDocuments();", "+    ", "+    ", "+    /**", "+     * close all project files", "+     */", "+    for(OpenDefinitionsDocument d: projDocs){", "+      System.err.println(\"closing \" + d);", "+      _model.closeFile(d);", "+      System.err.println(\"closed\");", "+    }", "+      ", "+    /**", "+     * keep all nonproject files open", "+     */", "+    IDocumentNavigator nav = _model.getDocumentNavigator();", "+//    nav.clear();", "+", "+//    for(OpenDefinitionsDocument d: nonProjDocs){", "+//      System.err.println(\"adding\" + d);", "+//      try{", "+//        /* transfer docs with files to new navigator */", "+//        nav.addDocument(_model.getIDocGivenODD(d), d.getFile().getParentFile().getAbsolutePath());", "+//      }catch(IllegalStateException e){", "+//        /* transfer untitled docs to new navigator */", "+//        nav.addDocument(_model.getIDocGivenODD(d));", "+//      }catch(FileMovedException e){", "+//        /* if the file has moved or been deleted,", "+//         * then add it to external files, since it's", "+//         * \"no longer in the project directory\"", "+//         */", "+//        nav.addDocument(_model.getIDocGivenODD(d));", "+//      }", "+//    }", "+    ", "+    System.err.println(\"done adding\");", "+    ", "+    System.err.println(\"about to set close project action\");", "+    ", "+", "+    System.err.println(\"done opening\");", "+    ", "+    _resetNavigatorPane();"]}], "num": 9359}