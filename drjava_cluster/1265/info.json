{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c31363cc6ff000953249041444043335", "detectedBy": ["DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "24a218b78855f6f219b52c16d8091a2d", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "ec122c42b0ab3c99a1554c09645af9cf8be61ec1", "commitAfterChange": "6db37f3ba52ce47e8942cb0806d8019c4f81cf93", "methodNumberBeforeChange": 461, "methodNumberAfterChange": 461, "signatureBeforeChange": "      void _saveProjectHelper(File file)", "signatureAfterChange": "      void _saveProjectHelper(File file)", "diff": ["-      if (file.getName().indexOf(\".\") == -1) file = new File (file.getAbsolutePath() + PROJECT_FILE_EXTENSION);", "-      String fileName = file.getCanonicalPath();", "+      String fileName = file.getAbsolutePath();", "+      if (!fileName.endsWith(PROJECT_FILE_EXTENSION) &&", "+          !fileName.endsWith(PROJECT_FILE_EXTENSION2) &&", "+          !fileName.endsWith(OLD_PROJECT_FILE_EXTENSION)) {", "+        // doesn't end in .drjava or .xml or .pjt", "+        String text = \"The file name does not end with a DrJava project file \"+", "+          \"extension (\"+PROJECT_FILE_EXTENSION+\" or \"+PROJECT_FILE_EXTENSION2+\" or \"+OLD_PROJECT_FILE_EXTENSION+\"):\\n\"+", "+          file.getName()+\"\\n\"+", "+          \"Do you want to append \"+PROJECT_FILE_EXTENSION+\" at the end?\";", "+        ", "+        Object[] options = {\"Append \"+PROJECT_FILE_EXTENSION, \"Don't Change File Name\"};  ", "+        int rc = 0;", "+        if (!Utilities.TEST_MODE) {", "+          rc = JOptionPane.showOptionDialog(MainFrame.this, text, \"Append Extension?\", JOptionPane.YES_NO_OPTION,", "+                                            JOptionPane.QUESTION_MESSAGE, null, options, options[0]);", "+        }", "+        if (rc==0) {", "+          int lastDot = fileName.lastIndexOf('.');", "+          if (lastDot == -1) {", "+            file = new File(fileName + PROJECT_FILE_EXTENSION);", "+          }", "+          else {", "+            file = new File(fileName.substring(0,lastDot) + PROJECT_FILE_EXTENSION);", "+          }", "+        }", "+      }", "+      fileName = file.getCanonicalPath();", "-          \"\\nDo you want to change the project file's extension to \\\"\"+PROJECT_FILE_EXTENSION+\"\\\"?\";", "+          \"\\nDo you want to change the project file's extension to \"+PROJECT_FILE_EXTENSION+\"?\";", "-        Object[] options = {\"Change to \\\"\"+PROJECT_FILE_EXTENSION+\"\\\"\", \"Keep \\\"\" + ", "+        Object[] options = {\"Change to \"+PROJECT_FILE_EXTENSION+\"\", \"Keep \\\"\" + "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "af975d258466e94aee390e0af5e84740", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "e7660fffdb51451a3d4a61981945f6529addb874", "commitAfterChange": "ceeb43b0cd71a090481b6c99329a86882de7136d", "methodNumberBeforeChange": 378, "methodNumberAfterChange": 380, "signatureBeforeChange": "      void _saveProjectHelper(File file)", "signatureAfterChange": "      void _saveProjectHelper(File file)", "diff": ["-      if (file.getName().indexOf(\".\") == -1) file = new File (file.getAbsolutePath() + \".pjt\");", "+      if (file.getName().indexOf(\".\") == -1) file = new File (file.getAbsolutePath() + PROJECT_FILE_EXTENSION);", "+      if (fileName.endsWith(OLD_PROJECT_FILE_EXTENSION)) {", "+        String text = \"The project will be saved in XML format.\" + ", "+          \"\\nDo you want to change the project file's extension to \\\"\"+PROJECT_FILE_EXTENSION+\"\\\"?\";", "+        ", "+        Object[] options = {\"Change to \\\"\"+PROJECT_FILE_EXTENSION+\"\\\"\", \"Keep \\\"\"+fileName.substring(fileName.lastIndexOf('.'))+\"\\\"\"};  ", "+        int rc = 1;", "+        if (!Utilities.TEST_MODE) {", "+          rc = JOptionPane.showOptionDialog(MainFrame.this, text, \"Change Extension?\", JOptionPane.YES_NO_OPTION,", "+                                                JOptionPane.QUESTION_MESSAGE, null, options, options[0]);", "+        }", "+        if (rc == 0) {", "+          fileName = fileName.substring(0,fileName.length()-OLD_PROJECT_FILE_EXTENSION.length()) + PROJECT_FILE_EXTENSION;", "+          file = new File(fileName);", "+          if (! file.exists() || _verifyOverwrite()) { ", "+            _model.setProjectFile(file);", "+            _currentProjFile = file;", "+          }", "+        }", "+      }"]}], "num": 1265}