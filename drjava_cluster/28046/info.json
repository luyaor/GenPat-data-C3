{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f1f8e64569cb1047e93926a727a11e39", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "45ecf8d83e11eac53693cc4cfb554600", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/DefinitionsDocument.java", "commitBeforeChange": "ddaa83f5d7e463d396f773edc05bd85484692b8a", "commitAfterChange": "c0411b7a6f6c403c7ffb73b1d0c38cb49fd33824", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 34, "signatureBeforeChange": "   public void commentLines(int selStart, int selEnd)", "signatureAfterChange": "   public int commentLines(int selStart, int selEnd)", "diff": ["-  public void commentLines(int selStart, int selEnd) {", "+  public int commentLines(int selStart, int selEnd) {", "-      //int key = _undoManager.startCompoundEdit();  //Uncommented in regards to the FrenchKeyBoardFix", "-      if (selStart == selEnd) {", "-        writeLock();", "-        try {", "-          ", "-          synchronized(_reduced) {", "-            Position oldCurrentPosition = createPosition(_currentLocation);", "-            _commentLine();", "-            //int caretPos = getCaretPosition();", "-            //_doc().setCurrentLocation(caretPos);", "-          }", "-        }", "-        catch (BadLocationException e) { throw new UnexpectedException(e); }", "-        finally { writeUnlock(); }", "-      }", "-      else _commentBlock(selStart, selEnd);", "+    //int key = _undoManager.startCompoundEdit();  //Uncommented in regards to the FrenchKeyBoardFix", "+    int toReturn = selEnd;", "+    if (selStart == selEnd) {", "+      writeLock();", "+      try {", "-      _undoManager.endLastCompoundEdit();  //Changed from endCompoundEdit(key) for FrenchKeyBoardFix", "+        synchronized(_reduced) {", "+          setCurrentLocation(selStart);", "+          Position oldCurrentPosition = createPosition(_currentLocation);", "+          _commentLine();   ", "+          toReturn+=2;", "+          //int caretPos = getCaretPosition();", "+          //_doc().setCurrentLocation(caretPos);", "+        }", "+      }", "+      catch (BadLocationException e) { throw new UnexpectedException(e); }", "+      finally { writeUnlock(); }", "+    }", "+    else toReturn = _commentBlock(selStart, selEnd);   ", "+    _undoManager.endLastCompoundEdit();  //Changed from endCompoundEdit(key) for FrenchKeyBoardFix", "+    return toReturn;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "819f651d91c7913dd19ab4453cf7a3ed", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/DefinitionsDocument.java", "commitBeforeChange": "69d4590eff40914052a36cc82d8a74c43211028e", "commitAfterChange": "46bddad84804814dd0241cc4f939b2c8bb524e79", "methodNumberBeforeChange": 37, "methodNumberAfterChange": 37, "signatureBeforeChange": "   public void uncommentLines(int selStart, int selEnd)", "signatureAfterChange": "   public void uncommentLines(int selStart, int selEnd)", "diff": ["-    throwErrorHuh();", "-    try {", "-      //int key = _undoManager.startCompoundEdit(); //commented out for FrenchKeyBoardFix", "-      if (selStart == selEnd) {", "-        Position oldCurrentPosition = createPosition(_currentLocation);", "-        _uncommentLine();", "-        //int caretPos = getCaretPosition();", "-        //_doc().setCurrentLocation(caretPos);", "-        setCurrentLocation(oldCurrentPosition.getOffset());", "+    // throwErrorHuh();", "+    synchronized (_reduced) {", "+      try {", "+        //int key = _undoManager.startCompoundEdit(); //commented out for FrenchKeyBoardFix", "+        if (selStart == selEnd) {", "+          Position oldCurrentPosition = createPosition(_currentLocation);", "+          _uncommentLine();", "+          //int caretPos = getCaretPosition();", "+          //_doc().setCurrentLocation(caretPos);", "+          setCurrentLocation(oldCurrentPosition.getOffset());", "+        }", "+        else {", "+          _uncommentBlock(selStart, selEnd);", "+        }", "+        //_undoManager.endCompoundEdit(key); //Commented out for FrenchKeyBoardFix, Replaced with endLastCompoundEdit();", "+        _undoManager.endLastCompoundEdit();", "-      else {", "-        _uncommentBlock(selStart, selEnd);", "+      catch (BadLocationException e) {", "+        throw new UnexpectedException(e);", "-      //_undoManager.endCompoundEdit(key); //Commented out for FrenchKeyBoardFix, Replaced with endLastCompoundEdit();", "-      _undoManager.endLastCompoundEdit();", "-    }", "-    catch (BadLocationException e) {", "-      throw new UnexpectedException(e);"]}], "num": 28046}