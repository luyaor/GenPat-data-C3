{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4d57d0c2a23c6d3644a79dd24b10bafd", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2d88f25d288d8c5f7e576f2551003a7c", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelJUnitTest.java", "commitBeforeChange": "90f3515e98e577591a6618f1cf8f59bee5e6c509", "commitAfterChange": "1acb7e79f21833d9f8611e81be6afdbc403d9516", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 16, "signatureBeforeChange": "       public void saveAllBeforeProceeding(GlobalModelListener.SaveReason reason)", "signatureAfterChange": "   public void testUnsavedAndUnCompiledChanges() throws Exception", "diff": ["-      public void junitEnded() { junitEndCount++; }", "-      public void saveAllBeforeProceeding(GlobalModelListener.SaveReason reason) {", "-        assertEquals(\"should be JUNIT reason to save\", JUNIT_REASON, reason);", "-        assertModified(true, doc);", "-        assertSaveCount(0);", "-        assertCompileStartCount(0);", "-        assertCompileEndCount(0);", "-        ", "-        try {", "-          doc.saveFile(new FileSelector(file));", "-        }", "-        catch (IOException ioe) {", "-          fail(\"Save produced exception: \" + ioe);", "-        }", "-        ", "-        saveAllBeforeProceedingCount++;", "-      }", "+   */", "+  public void testUnsavedAndUnCompiledChanges() throws Exception {", "+    OpenDefinitionsDocument doc = setupDocument(MONKEYTEST_PASS_TEXT);", "+    final File file = new File(_tempDir, \"MonkeyTestPass.java\");", "+    doc.saveFile(new FileSelector(file));", "+    TestShouldSucceedListener listener = new TestShouldSucceedListener();", "+    _model.addListener(listener);", "+    synchronized(listener) {", "+      doc.startCompile();", "+      listener.wait();", "+    }", "+    changeDocumentText(MONKEYTEST_FAIL_TEXT, doc);", "+    synchronized(listener) {", "+      doc.startJUnit();", "+      listener.wait();", "+    }", "+    _model.removeListener(listener);", "+    ", "+    assertEquals(\"test case should have no errors reported after modifying\",", "+                 0,", "+                 doc.getJUnitErrorModel().getNumErrors());", "+    doc.saveFile(new FileSelector(file));", "+    doc.startJUnit();", "+    ", "+    assertEquals(\"test case should have no errors reported after saving\",", "+                 0,", "+                 doc.getJUnitErrorModel().getNumErrors());", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "38fa5481d38ad977390cff8d3950eeb6", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelJUnitTest.java", "commitBeforeChange": "0106f3ce6870b8b4440fc75222d89130d761ff4e", "commitAfterChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": "   public void testJUnitAllWithNoErrors() throws Exception", "signatureAfterChange": "   public void testJUnitAllWithNoErrors() throws Exception", "diff": ["-//    _log.log(\"Starting testJUnitAllWithNoErrors\");", "+    if (printMessages) System.out.println(\"-----testJUnitAllWithNoErrors-----\");", "-//    final OpenDefinitionsDocument doc = setupDocument(NON_TESTCASE_TEXT);", "-//    final File file = new File(_tempDir, \"NonTestCase.java\");", "-//    saveFile(doc, new FileSelector(file));", "-//    ", "-//    JUnitTestListener listener = new JUnitNonTestListener(true);", "-//    ", "-//    _model.addListener(listener);", "-//    ", "-//    listener.compile(doc);", "-//    listener.checkCompileOccurred();", "-//    ", "-//    _log.log(\"Compiled first doc\");", "-//    ", "-    OpenDefinitionsDocument doc = setupDocument(MONKEYTEST_PASS_TEXT);", "-    File file = new File(_tempDir, \"MonkeyTestPass.java\");", "-    saveFile(doc, new FileSelector(file));", "-    JUnitTestListener listener = new JUnitNonTestListener(true);", "+    OpenDefinitionsDocument doc = setupDocument(NON_TESTCASE_TEXT);", "+    JUnitNonTestListener listener = new JUnitNonTestListener(true);", "+    File file = new File(_tempDir, \"NonTestCase.java\");", "+    doc.saveFile(new FileSelector(file));", "+    doc.startCompile();", "+    doc = setupDocument(MONKEYTEST_PASS_TEXT);", "+    file = new File(_tempDir, \"MonkeyTestPass.java\");", "+    doc.saveFile(new FileSelector(file));", "+    doc.startCompile();", "-    listener.compile(doc);", "-    listener.checkCompileOccurred();", "+    listener = new JUnitNonTestListener(true);", "-    saveFile(doc, new FileSelector(file));", "-    ", "-    listener = new JUnitNonTestListener(true);", "+    doc.saveFile(new FileSelector(file));", "+    doc.startCompile();", "-    ", "-    listener.compile(doc);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e4bead20e19120c3e0b604d9d61b01e3", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelJUnitTest.java", "commitBeforeChange": "90f3515e98e577591a6618f1cf8f59bee5e6c509", "commitAfterChange": "1acb7e79f21833d9f8611e81be6afdbc403d9516", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 8, "signatureBeforeChange": "   public void testDoNotRunJUnitWhenCompileErrorsOccur() throws Exception", "signatureAfterChange": "   public void testNoClassFile() throws Exception", "diff": ["-   */", "-  public void testDoNotRunJUnitWhenCompileErrorsOccur() throws Exception {", "-    final OpenDefinitionsDocument doc = setupDocument(MONKEYTEST_COMPILEERROR_TEXT);", "-    final File file = new File(_tempDir, \"MonkeyTestCompileError.java\");", "-    doc.saveFile(new FileSelector(file));", "-    ", "-    CompileShouldFailListener listener = new CompileShouldFailListener() {", "-      public void compileErrorDuringJUnit() { compileErrorDuringJUnitCount++; }", "-    };", "-    ", "-    _model.addListener(listener);", "-    listener.assertCompileErrorDuringJUnitCount(0);", "-    doc.startJUnit();", "-    listener.checkCompileOccurred();", "-    assertCompileErrorsPresent(\"JUnit\", true);", "-    listener.assertCompileErrorDuringJUnitCount(1);", "-    listener.assertJUnitStartCount(0);", "-    listener.assertJUnitEndCount(0);", "-  }", "+   */", "+  public void testNoClassFile() throws Exception {", "+    final OpenDefinitionsDocument doc = setupDocument(MONKEYTEST_PASS_TEXT);", "+    final File file = new File(_tempDir, \"MonkeyTestPass.java\");", "+    doc.saveFile(new FileSelector(file));", "+    ", "+    TestShouldSucceedListener listener = new TestShouldSucceedListener() {", "+      public void nonTestCase() {", "+        nonTestCaseCount++;", "+      }", "+    };", "+    _model.addListener(listener);", "+    synchronized(listener) {", "+      doc.startJUnit();", "+      listener.wait();", "+    }", "+    listener.assertNonTestCaseCount(1);", "+    listener.assertJUnitStartCount(1);", "+    listener.assertJUnitEndCount(1);", "+                 ", "+  }"]}], "num": 5498}