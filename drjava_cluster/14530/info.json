{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4c7cf2cbd084efb5237e50a38e5ef7c8", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "251d964bca9fec3cb72ed56866823327", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/DrJavaSurveyPopup.java", "commitBeforeChange": "d73d2cacf79884db0dae830f87bb3795eb5cd6ef", "commitAfterChange": "b8bd7d0442cc5ba7e76504cb9896cbfabd4d129a", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "      protected void yesAction()", "signatureAfterChange": "      protected void yesAction()", "diff": ["-        DrJava.getConfig().setSetting(OptionConstants.LAST_DRJAVA_SURVEY, new Date().getTime());", "-        DrJava.getConfig().setSetting(OptionConstants.LAST_DRJAVA_SURVEY_RESULT, result);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6ac9bd9d7884fef66c6d9642c31f1bce", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "6207c0d4b83ee23d6d4624c513f270e47c43cc83", "commitAfterChange": "f4c8eb851d98f4da2479f32fb767dac4b3a40e1c", "methodNumberBeforeChange": 164, "methodNumberAfterChange": 155, "signatureBeforeChange": "   public void resetCompleteWordDialogPosition()", "signatureAfterChange": "      public void resetCompleteWordDialogPosition()", "diff": ["-  /** Reset the position of the \"Complete Word\" dialog. */", "-  public void resetCompleteWordDialogPosition() {", "-    initCompleteWordDialog();", "-    _completeWordDialog.setFrameState(\"default\");", "-    if (DrJava.getConfig().getSetting(DIALOG_COMPLETE_WORD_STORE_POSITION).booleanValue()) {", "-      DrJava.getConfig().setSetting(DIALOG_COMPLETE_WORD_STATE, \"default\");", "-    }", "-  }", "+  ", "+  public void resetCompleteWordDialogPosition() {", "+    // TODO: restore ability to restore position and size of \"Complete Word under Cursor\" dialog", "+//    initCompleteWordDialog();", "+//    _completeWordDialog.setFrameState(\"default\");", "+//    if (DrJava.getConfig().getSetting(DIALOG_COMPLETE_WORD_STORE_POSITION).booleanValue()", "+//      DrJava.getConfig().setSetting(DIALOG_COMPLETE_WORD_STATE, \"default\");", "+//    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b2c63de22cb1e47c1b1c968cdfd33ea5", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/DrJavaSurveyPopup.java", "commitBeforeChange": "51e8f4cbce06d140e9a09dd38237b848b4f27d8a", "commitAfterChange": "d350dd729092f66f8ad737ae377c54d2ad394fbf", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": "    protected void yesAction()", "signatureAfterChange": "    protected void yesAction()", "diff": ["-    noAction();", "-", "-    final String DRJAVA_SURVEY_PAGE = \"http://www.drjava.org/submit-usage.php?\";", "-    StringBuilder sb = new StringBuilder();", "-    sb.append(DRJAVA_SURVEY_PAGE);", "+    try {", "+      final String DRJAVA_SURVEY_PAGE = \"http://www.drjava.org/submit-usage.php?\";", "+      StringBuilder sb = new StringBuilder();", "+      sb.append(DRJAVA_SURVEY_PAGE);", "-    boolean first = true;", "-    for(String k: DRJAVA_SURVEY_KEYS) {", "-      if (first) { first = false; } else { sb.append('&'); }", "-      sb.append(k);", "-      sb.append('=');", "-      sb.append(System.getProperty(k));", "-    }", "-    LOG.log(sb.toString());", "-    String result = sb.toString().replaceAll(\" \",\"%20\");", "-    LOG.log(result);", "-    ", "-    // check how many days have passed since the last survey", "-    int days = DrJava.getConfig().getSetting(OptionConstants.DRJAVA_SURVEY_DAYS);", "-    java.util.Date nextCheck = ", "-      new java.util.Date(DrJava.getConfig().getSetting(OptionConstants.LAST_DRJAVA_SURVEY)", "-                           + days * 24L * 60 * 60 * 1000); // x days after last check; 24L ensures long accumulation", "-    if (!(new java.util.Date().after(nextCheck)) &&", "-        (DrJava.getConfig().getSetting(OptionConstants.LAST_DRJAVA_SURVEY_RESULT).equals(result))) {", "-      // not enough days have passed, and the configuration has not changed, quietly terminate", "-      return;", "-    }", "-", "-    BufferedReader br = null;", "-    try {", "-      URL url = new URL(result);", "-      InputStream urls = url.openStream();", "-      InputStreamReader is = new InputStreamReader(urls);", "-      br = new BufferedReader(is);", "-      String line;", "-      sb.setLength(0);", "-      while((line = br.readLine()) != null) { sb.append(line); sb.append(System.getProperty(\"line.separator\")); }", "+      boolean first = true;", "+      for(String k: DRJAVA_SURVEY_KEYS) {", "+        if (first) { first = false; } else { sb.append('&'); }", "+        sb.append(k);", "+        sb.append('=');", "+        sb.append(System.getProperty(k));", "+      }", "-      DrJava.getConfig().setSetting(OptionConstants.LAST_DRJAVA_SURVEY, new Date().getTime());", "-      DrJava.getConfig().setSetting(OptionConstants.LAST_DRJAVA_SURVEY_RESULT, result);", "-    }", "-    catch(IOException e) {", "-      // could not open URL using Java, try web browser", "-      LOG.log(\"Could not open URL using Java\", e);", "+      String result = sb.toString().replaceAll(\" \",\"%20\");", "+      LOG.log(result);", "+      ", "+      // check how many days have passed since the last survey", "+      int days = DrJava.getConfig().getSetting(OptionConstants.DRJAVA_SURVEY_DAYS);", "+      java.util.Date nextCheck = ", "+        new java.util.Date(DrJava.getConfig().getSetting(OptionConstants.LAST_DRJAVA_SURVEY)", "+                             + days * 24L * 60 * 60 * 1000); // x days after last check; 24L ensures long accumulation", "+      if (!(new java.util.Date().after(nextCheck)) &&", "+          (DrJava.getConfig().getSetting(OptionConstants.LAST_DRJAVA_SURVEY_RESULT).equals(result))) {", "+        // not enough days have passed, and the configuration has not changed, quietly terminate", "+        return;", "+      }", "+      ", "+      BufferedReader br = null;", "-        PlatformFactory.ONLY.openURL(new URL(result));", "+        URL url = new URL(result);", "+        InputStream urls = url.openStream();", "+        InputStreamReader is = new InputStreamReader(urls);", "+        br = new BufferedReader(is);", "+        String line;", "+        sb.setLength(0);", "+        while((line = br.readLine()) != null) { sb.append(line); sb.append(System.getProperty(\"line.separator\")); }", "+        LOG.log(sb.toString());", "-      catch(IOException e2) {", "-        // could not open using Java or web browser, ignore", "-        LOG.log(\"Could not open URL using web browser\", e2);", "+      catch(IOException e) {", "+        // could not open URL using Java, try web browser", "+        LOG.log(\"Could not open URL using Java\", e);", "+        try {", "+          PlatformFactory.ONLY.openURL(new URL(result));", "+          DrJava.getConfig().setSetting(OptionConstants.LAST_DRJAVA_SURVEY_RESULT, result);", "+        }", "+        catch(IOException e2) {", "+          // could not open using Java or web browser, ignore", "+          LOG.log(\"Could not open URL using web browser\", e2);", "+        }", "+      }", "+      finally { // close open input stream", "+        try { if (br!=null) br.close(); }", "+        catch(IOException e) { /* ignore */ }", "-    finally { // close open input stream", "-      try { if (br!=null) br.close(); }", "-      catch(IOException e) { /* ignore */ }", "+    finally {", "+      noAction();"]}], "num": 14530}