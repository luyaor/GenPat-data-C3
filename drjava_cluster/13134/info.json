{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "191861150467fcc830c6a54fdce2b4b9", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9df9d368557ca89cbdce7f9862144cb8", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/DefaultGlobalModel.java", "commitBeforeChange": "314c962d7f6ed2c6b00f5edc6e764b582b016016", "commitAfterChange": "3b2b8c4279d3d3c19a0254256362d4d46aeeddaf", "methodNumberBeforeChange": 76, "methodNumberAfterChange": 76, "signatureBeforeChange": "   public void saveProject(String filename) throws IOException", "signatureAfterChange": "   public void saveProject(String filename, Hashtable<OpenDefinitionsDocument,DocumentInfoGetter> info)      throws IOException", "diff": ["-  public void saveProject(String filename) throws IOException {", "+  public void saveProject(String filename, Hashtable<OpenDefinitionsDocument,DocumentInfoGetter> info) ", "+    throws IOException {", "+    Vector<File> srcFileVector = new Vector<File>();", "-        builder.addSourceFile(doc.getFile());", "+        DocumentInfoGetter g = info.get(doc); ", "+        builder.addSourceFile(g);", "+        srcFileVector.add(g.getFile());", "-          ", "+", "+    // TODO: add all the auxiliary files to the builder.  The aux files should be in the info map too", "+    ", "-      builder.setBuildDir(f);", "+      builder.setBuildDirectory(f);", "-    File mainClass = getJarMainClass();", "+    File mainClass = getMainClass();", "-      builder.setJarMainClass(mainClass);", "+      builder.setMainClass(mainClass);", "-    //Tried to use .toArray and a cast but always seemed to throw a class cast exception", "-    Vector<File> srcFileVector = builder.getSourceFiles();", "-    File [] srcFiles = new File[srcFileVector.size()];", "-    for(int i = 0; i<srcFileVector.size(); i++)", "-      srcFiles[i] = srcFileVector.elementAt(i);", "-    ", "+    File[] srcFiles = srcFileVector.toArray(new File[0]);", "-    FileWriter fw = new FileWriter(filename);", "-    fw.write(builder.makeProjectFile());", "-    fw.close();", "+    builder.write();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a137531aad1f9cec61d9f66e49547c4a", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/DefaultSingleDisplayModel.java", "commitBeforeChange": "ce392e05d418567d3a904ab1014f959de3b94789", "commitAfterChange": "015a587e3c75bdcf4fec55c8e43c23b1966c68b5", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": "   public boolean closeAllFiles()", "signatureAfterChange": "   public boolean closeAllFiles()", "diff": ["-    //Bug when the first document, in list view, is selected:", "-    //When \"close all\" documents is selected, each document in turn is set active", "-    //Workaround: begin to close the active document, then close all other documents, then remove the ", "-    //active doc from the navigator pane", "-    final OpenDefinitionsDocument toClose = getActiveDocument();", "-    boolean canClose = toClose.canAbandonFile();", "-    if(canClose) {", "-      INavigatorItem idoc = _documentsRepos.removeKey(toClose);      ", "-      boolean success = super.closeAllFiles();", "-      if (idoc != null) {", "-        getDocumentNavigator().removeDocument(idoc);", "-        _notifier.fileClosed(toClose);", "-        toClose.close();", "+    ", "+    List<OpenDefinitionsDocument> docs = getDefinitionsDocuments();", "+    OpenDefinitionsDocument active = getActiveDocument();", "+    boolean keepClosing = true;", "+    for(OpenDefinitionsDocument d: docs){", "+      if(d != active && keepClosing){", "+        keepClosing = closeFile(d);", "-      _isClosingAllDocs = false;", "-      ", "-      _ensureNotEmpty();", "-      setActiveFirstDocument();", "-      return success;", "+    }", "+    if(keepClosing){", "+      closeFile(active);", "-    return false; ", "+    _ensureNotEmpty();", "+    setActiveFirstDocument();", "+    return keepClosing;"]}], "num": 13134}