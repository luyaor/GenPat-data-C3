{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "383be684d892ef1f4558950b80cbca63", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2b1fcde9e31bb5bc2fa4a4f0acd6b2ae", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/InteractionsPaneTest.java", "commitBeforeChange": "85d3a69d147c6c1ce63751f75aec1113945356f7", "commitAfterChange": "0a93533cf1b555344278f97d8d989cd2f113c958", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 15, "signatureBeforeChange": "    public void testSystemIn()", "signatureAfterChange": "      public void testSystemIn()", "diff": ["+  ", "-    synchronized (_controller._inputEnteredAction) {", "-      new Thread(\"Testing System.in\") {", "-        public void run() {", "-          synchronized (_controller._inputEnteredAction) {", "-            _controller._inputEnteredAction.notify();", "-            synchronized (lock) {", "-              buf.append(_controller._inputListener.getConsoleInput());", "-            }", "-          }", "+    ", "+    new Thread(\"Testing System.in\") {", "+      public void run() {", "+        synchronized (lock) {", "+          buf.append(_controller._inputListener.getConsoleInput());", "-      }.start();", "-      try {", "-        _controller._inputEnteredAction.wait();", "-      catch (InterruptedException ie) {", "-      }", "-    }", "-    try {", "-      Thread.sleep(2000);", "-    }", "-    catch (InterruptedException ie) {", "-    }", "-    _controller._insertNewlineAction.actionPerformed(null);", "-    _controller._inputEnteredAction.actionPerformed(null);", "+    }.start();", "+    ", "+    try { _controller._popupConsole.waitForConsoleReady(); }", "+    catch (InterruptedException ie) { }", "+    ", "+    _controller._popupConsole.insertConsoleText(\"test-text\");", "+    _controller._popupConsole.interruptConsole();", "-      assertEquals(\"Should have returned the correct text.\", \"\\n\\n\", buf.toString());", "+      assertEquals(\"Should have returned the correct text.\", \"test-text\\n\", buf.toString());"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5acf72b1f2a8c5f8c5d3efc01a4ac94b", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/InteractionsPaneTest.java", "commitBeforeChange": "d441fefd8eab1aff683e8a16a46c50a8f6994932", "commitAfterChange": "55ffd5d461fa009444744f2527631191c6f9decc", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": "      public void testSystemIn()", "signatureAfterChange": "      public void testSystemIn()", "diff": ["-//    System.err.println(\"_controller = \" + _controller);", "+    ", "+    final CompletionMonitor completionMonitor = new CompletionMonitor();", "+    ", "+    _controller.addConsoleStateListener(new InteractionsController.ConsoleStateListener() {", "+      public void consoleInputStarted(InteractionsController c) {", "+        completionMonitor.set();", "+      }     ", "+      public void consoleInputCompleted(String text, InteractionsController c) {", "+        // do not assert the text here since it won't be called from the testing thread.", "+        // It is called on the following thread that calls getConsoleInput()", "+      }", "+    });", "-//        System.err.println(\"System.in thread running\");", "-        synchronized(bufLock) { ", "-          String s = _controller._popupConsole.getConsoleInput();", "-//          System.err.println(\"s = \" + s);", "-          buf.append(s); ", "+        synchronized(bufLock) {", "+          String s = _controller.getInputListener().getConsoleInput();", "+          buf.append(s);", "-//    System.err.println(\"Waiting For ConsoleReady\");", "+    // Wait for console input to begin", "+    completionMonitor.waitOne();", "+        ", "+    _controller.insertConsoleText(\"test-text\");", "+    _controller.interruptConsoleInput();", "-    try { _controller._popupConsole.waitForConsoleReady(); }", "-    catch (InterruptedException ie) { }", "-    ", "-    assertTrue(\"Console should be ready\", _controller._popupConsole.isConsoleReady());", "-    ", "-    _controller._popupConsole.insertConsoleText(\"test-text\");", "-    _controller._popupConsole.interruptConsole();", "+    // Make sure the buffer 'buf' is updated"]}], "num": 17638}