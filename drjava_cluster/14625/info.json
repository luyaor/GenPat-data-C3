{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3f983dcfa75c9dcc3905bbedaaeecf40", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3697ab8466246ca435ed150008fce0b0", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelIOTest.java", "commitBeforeChange": "f82cbb172a00c2d57ed2feb202b1bece43cc7ef2", "commitAfterChange": "72303a17e4a44248ba3fe5d5f9c3d69081ba78b5", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 27, "signatureBeforeChange": "   public void testForceFileOpen() throws BadLocationException, IOException, OperationCanceledException,     AlreadyOpenException", "signatureAfterChange": "   public void testForceFileOpen() throws BadLocationException, IOException, OperationCanceledException,     AlreadyOpenException", "diff": ["-    TestListener listener = new TestIOListener();", "+    final TestListener listener = new TestIOListener();", "-    // Open file 1", "-    OpenDefinitionsDocument doc = _model.openFile(new FileSelector(tempFile1));", "-    listener.assertOpenCount(1);", "-    listener.assertCloseCount(1);  // closed Untitled document", "-    assertModified(false, doc);", "-    assertContents(FOO_TEXT, doc);", "-    ", "-    // Get file 1", "-    OpenDefinitionsDocument doc1 = _model.getDocumentForFile(tempFile1);", "-    listener.assertOpenCount(1);", "-    listener.assertCloseCount(1);   // closed Untitled document", "-    assertEquals(\"opened document\", doc, doc1);", "-    assertContents(FOO_TEXT, doc1);", "-    ", "-    // Get file 2, forcing it to be opened", "-    OpenDefinitionsDocument doc2 = _model.getDocumentForFile(tempFile2);", "-    listener.assertOpenCount(2);", "-    listener.assertCloseCount(1);  // closed Untitled document", "-    assertContents(BAR_TEXT, doc2);", "+    Utilities.invokeAndWait(new Runnable() {", "+      public void run() {", "+        try {    ", "+          // Open file 1", "+          OpenDefinitionsDocument doc = _model.openFile(new FileSelector(tempFile1));", "+          listener.assertOpenCount(1);", "+          listener.assertCloseCount(1);  // closed Untitled document", "+          assertModified(false, doc);", "+          assertContents(FOO_TEXT, doc);", "+          ", "+          // Get file 1", "+          OpenDefinitionsDocument doc1 = _model.getDocumentForFile(tempFile1);", "+          listener.assertOpenCount(1);", "+          listener.assertCloseCount(1);   // closed Untitled document", "+          assertEquals(\"opened document\", doc, doc1);", "+          assertContents(FOO_TEXT, doc1);", "+          ", "+          // Get file 2, forcing it to be opened", "+          OpenDefinitionsDocument doc2 = _model.getDocumentForFile(tempFile2);", "+          listener.assertOpenCount(2);", "+          listener.assertCloseCount(1);  // closed Untitled document", "+          assertContents(BAR_TEXT, doc2);", "+        }", "+        catch (Exception e) {", "+          // should never happen", "+          fail(\"Exception thrown in testForceFileOpen. Traceback: \\n\" + e);", "+        }", "+      }", "+    });"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a7068c1144b358d29050f54394b8ca21", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/SingleDisplayModelTest.java", "commitBeforeChange": "f82cbb172a00c2d57ed2feb202b1bece43cc7ef2", "commitAfterChange": "72303a17e4a44248ba3fe5d5f9c3d69081ba78b5", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 21, "signatureBeforeChange": "   public void testCompleteFilename() throws BadLocationException, IOException, OperationCanceledException,      AlreadyOpenException", "signatureAfterChange": "   public void testCompleteFilename() throws BadLocationException, IOException, OperationCanceledException,      AlreadyOpenException", "diff": ["-    OpenDefinitionsDocument doc = _model.getActiveDocument();", "-    assertEquals(\"untitled display filename\", \"(Untitled)\", doc.getCompletePath());", "-", "-    // Ends in \".java\"", "-    File file = File.createTempFile(\"DrJava-filename-test\", \".java\", _tempDir).getCanonicalFile();", "-    file.deleteOnExit();", "-    String name = file.getAbsolutePath();", "-    doc = _model.openFile(new FileSelector(file));", "-            ", "-    assertEquals(\".java display filename\", name, doc.getCompletePath());", "-", "-    // Doesn't contain \".java\"", "-    file = File.createTempFile(\"DrJava-filename-test\", \".txt\", _tempDir).getCanonicalFile();", "-    file.deleteOnExit();", "-    name = file.getAbsolutePath();", "-    doc = _model.openFile(new FileSelector(file));", "-    assertEquals(\".txt display filename\", name, doc.getCompletePath());", "-", "-    // Modified File", "-    file = File.createTempFile(\"DrJava-filename-test\", \".java\", _tempDir).getCanonicalFile();", "-    file.deleteOnExit();", "-    name = file.getAbsolutePath();", "-    doc = _model.openFile(new FileSelector(file));", "-    changeDocumentText(\"foo\", doc);", "-    assertEquals(\".java.txt display filename\", name + \" *\", doc.getCompletePath());", "+    Utilities.invokeAndWait(new Runnable() {", "+      public void run() {", "+        try {", "+          OpenDefinitionsDocument doc = _model.getActiveDocument();", "+          assertEquals(\"untitled display filename\", \"(Untitled)\", doc.getCompletePath());", "+          ", "+          // Ends in \".java\"", "+          File file1 = File.createTempFile(\"DrJava-filename-test\", \".java\", _tempDir).getCanonicalFile();", "+          file1.deleteOnExit();", "+          String name = file1.getAbsolutePath();", "+          doc = _model.openFile(new FileSelector(file1));", "+          ", "+          assertEquals(\".java display filename\", name, doc.getCompletePath());", "+          ", "+          // Doesn't contain \".java\"", "+          File file2 = File.createTempFile(\"DrJava-filename-test\", \".txt\", _tempDir).getCanonicalFile();", "+          file2.deleteOnExit();", "+          name = file2.getAbsolutePath();", "+          ", "+          doc = _model.openFile(new FileSelector(file2));", "+          assertEquals(\".txt display filename\", name, doc.getCompletePath());", "+          ", "+          // Modified File", "+          File file3 = File.createTempFile(\"DrJava-filename-test\", \".java\", _tempDir).getCanonicalFile();", "+          file3.deleteOnExit();", "+          name = file3.getAbsolutePath();", "+          doc = _model.openFile(new FileSelector(file3));", "+          changeDocumentText(\"foo\", doc);", "+          assertEquals(\".java.txt display filename\", name + \" *\", doc.getCompletePath());", "+        }", "+        catch (Exception e) {", "+          // should never happen", "+          fail(\"testCompleteFilename threw exception.  Traceback: \\n\" + e);", "+        }", "+      }", "+    });"]}], "num": 14625}