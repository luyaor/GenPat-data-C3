{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ebbb26157345162a9daf916500c6ea80", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4f51b4725513c53fc5ce31837d7c884f", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "commitAfterChange": "74a15c017d574b2ee2a0cdeaaedeea00825a0c5e", "methodNumberBeforeChange": 51, "methodNumberAfterChange": 51, "signatureBeforeChange": "   public int getIntelligentBeginLinePos(int currPos) throws BadLocationException", "signatureAfterChange": "   public int getIntelligentBeginLinePos(int currPos) throws BadLocationException", "diff": ["-    acquireReadLock();", "-    try {", "-      firstChar = _getLineStartPos(currPos);", "-      prefix = getText(firstChar, currPos-firstChar);", "-    }", "-    finally { releaseReadLock(); }", "+//    acquireReadLock();", "+//    try {", "+    firstChar = _getLineStartPos(currPos);", "+    prefix = getText(firstChar, currPos-firstChar);", "+//    }", "+//    finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5394612379d7df60a8b5cef99bb65873", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "b8bd7d0442cc5ba7e76504cb9896cbfabd4d129a", "commitAfterChange": "0e0a6cd0b304183c5602e4fe1c0f1a766f131ce0", "methodNumberBeforeChange": 51, "methodNumberAfterChange": 51, "signatureBeforeChange": "   public int getIntelligentBeginLinePos(int currPos) throws BadLocationException", "signatureAfterChange": "   public int getIntelligentBeginLinePos(int currPos) throws BadLocationException", "diff": ["-    acquireReadLock();", "-    try {", "-      firstChar = _getLineStartPos(currPos);", "-      prefix = getText(firstChar, currPos-firstChar);", "-    }", "-    finally { releaseReadLock(); }", "+//    acquireReadLock();", "+//    try {", "+    firstChar = _getLineStartPos(currPos);", "+    prefix = getText(firstChar, currPos-firstChar);", "+//    }", "+//    finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d2c308c9b1091f96b368c94534bf1bbb", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "92fd06b34796984853343dde64251cfdd2a0ce25", "commitAfterChange": "ad91ad9028e35ded2c6aef6b30e8459151ecae7c", "methodNumberBeforeChange": 33, "methodNumberAfterChange": 33, "signatureBeforeChange": "   public int findPrevEnclosingBrace(int pos, char opening, char closing) throws BadLocationException", "signatureAfterChange": "   public int findPrevEnclosingBrace(int pos, char opening, char closing) throws BadLocationException", "diff": ["-    if ((pos >= getLength()) || (pos == DOCSTART)) { return ERROR_INDEX; }", "+    if (pos >= getLength() || pos == DOCSTART) { return ERROR_INDEX; }", "-    acquireReadLock();", "-    try {", "-      String text = getText(DOCSTART, pos);", "+    String text = getText(DOCSTART, pos);", "+    ", "+    synchronized(_reduced) {", "+      final int origLocation = _currentLocation;", "+      // Move reduced model to location pos", "+      _reduced.move(pos - origLocation);  // reduced model points to pos == reducedPos", "-      synchronized(_reduced) {", "-        final int origLocation = _currentLocation;", "-        // Move reduced model to location pos", "-        _reduced.move(pos - origLocation);  // reduced model points to pos == reducedPos", "+      // Walk backwards from specificed position", "+      for (i = pos-1; i >= DOCSTART; i--) {", "+        /* Invariant: reduced model points to reducedPos, text[i+1:pos] contains no valid delims, ", "+         * DOCSTART <= i < reducedPos <= pos */", "-        // Walk backwards from specificed position", "-        for (i = pos-1; i >= DOCSTART; i--) {", "-          /* Invariant: reduced model points to reducedPos, text[i+1:pos] contains no valid delims, ", "-           * DOCSTART <= i < reducedPos <= pos */", "+        if (match(text.charAt(i),delims)) {", "+          // Move reduced model to walker's location", "+          _reduced.move(i - reducedPos);  // reduced model points to i", "+          reducedPos = i;                 // reduced model points to reducedPos", "-          if (match(text.charAt(i),delims)) {", "-            // Move reduced model to walker's location", "-            _reduced.move(i - reducedPos);  // reduced model points to i", "-            reducedPos = i;                 // reduced model points to reducedPos", "-            ", "-            // Check if matching char should be ignored because it is within a comment, ", "-            // quotes, or ignored paren phrase", "-            ReducedModelState state = _reduced.getStateAtCurrent();", "-            if (!state.equals(ReducedModelState.FREE) || _isStartOfComment(text, i)", "-                  || ((i > 0) && _isStartOfComment(text, i - 1)))", "-              continue;  // ignore matching char ", "+          // Check if matching char should be ignored because it is within a comment, ", "+          // quotes, or ignored paren phrase", "+          ReducedModelState state = _reduced.getStateAtCurrent();", "+          if (! state.equals(ReducedModelState.FREE) || _isStartOfComment(text, i) || ", "+              (i > 0 && _isStartOfComment(text, i-1)))", "+            continue;  // ignore matching char ", "+          else {", "+            // found valid matching char", "+            if (text.charAt(i) == closing) ++braceBalance;", "-              // found valid matching char", "-              if (text.charAt(i)==closing) ++braceBalance;", "-              else {", "-                if (braceBalance==0) break; // found our opening brace", "-                --braceBalance;", "-              }", "+              if (braceBalance == 0) break; // found our opening brace", "+              --braceBalance;", "-        ", "-        /* Invariant: same as for loop except that DOCSTART-1 <= i <= reducedPos <= pos */", "-        ", "-        _reduced.move(origLocation - reducedPos);    // Restore the state of the reduced model;", "-      }  // end synchronized", "+      }", "-      if (i == DOCSTART-1) reducedPos = ERROR_INDEX; // No matching char was found", "-      _storeInCache(key, reducedPos);", "-    }", "-    finally { releaseReadLock(); }", "+      /* Invariant: same as for loop except that DOCSTART-1 <= i <= reducedPos <= pos */", "+      ", "+      _reduced.move(origLocation - reducedPos);    // Restore the state of the reduced model;", "+    }  // end synchronized", "+    ", "+    if (i == DOCSTART-1) reducedPos = ERROR_INDEX; // No matching char was found", "+    _storeInCache(key, reducedPos, pos);"]}], "num": 16052}