{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "964f0f2a037c46ec14b76176792595fd", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "98959b96b9f58f6b2bd083f96afa7028", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/DefaultGlobalModel.java", "commitBeforeChange": "e64e0f2febfc163cfb04eb35ce1134673166ab50", "commitAfterChange": "71b4e72a1b4feef5a2621bd09e829e0108d8d893", "methodNumberBeforeChange": 311, "methodNumberAfterChange": 314, "signatureBeforeChange": "   private OpenDefinitionsDocument _getOpenDocument(File file)", "signatureAfterChange": "   private OpenDefinitionsDocument _getOpenDocument(File file)", "diff": ["-    OpenDefinitionsDocument doc = null;", "-    Iterator<OpenDefinitionsDocument> odds = _documentsRepos.valuesIterator();", "-    while(odds.hasNext() && doc == null)", "-    {", "-      OpenDefinitionsDocument thisDoc = odds.next();", "-      try {", "-        File thisFile = null;", "+    synchronized (_documentsRepos) { ", "+      for (OpenDefinitionsDocument doc: _documentsRepos.values()) {", "-          thisFile = thisDoc.getFile();", "-        }", "-        catch (FileMovedException fme) {", "-          // Ok, file is invalid, but compare anyway", "-          thisFile = fme.getFile();", "-        }", "-        finally {", "-          // Always do the comparison", "-          if (thisFile != null) {", "-            try {", "-              // Compare canonical paths if possible", "-              if (thisFile.getCanonicalFile().equals(file.getCanonicalFile())) {", "-                doc = thisDoc;", "+          File thisFile = null;", "+          try { thisFile = doc.getFile(); }", "+          catch (FileMovedException fme) {", "+            // Ok, file is invalid, but compare anyway", "+            thisFile = fme.getFile();", "+          }", "+          finally {", "+            // Always do the comparison", "+            if (thisFile != null) {", "+              try {", "+                // Compare canonical paths if possible", "+                if (thisFile.getCanonicalFile().equals(file.getCanonicalFile())) return doc;", "-            }", "-            catch (IOException ioe) {", "-              // Can be thrown from getCanonicalFile.", "-              //  If so, compare the files themselves", "-              if (thisFile.equals(file)) {", "-                doc = thisDoc;", "+              catch (IOException ioe) {", "+                // Can be thrown from getCanonicalFile.", "+                //  If so, compare the files themselves", "+                if (thisFile.equals(file)) return doc;", "-      }", "-      catch (IllegalStateException ise) {", "-        // No file in thisDoc", "+        catch (IllegalStateException ise) { /* No file in doc; fail silently */ }", "-", "-    return doc;", "+    return null;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9f57d00dbce92048a7472ee33172ebc8", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/DefaultGlobalModel.java", "commitBeforeChange": "e64e0f2febfc163cfb04eb35ce1134673166ab50", "commitAfterChange": "71b4e72a1b4feef5a2621bd09e829e0108d8d893", "methodNumberBeforeChange": 155, "methodNumberAfterChange": 155, "signatureBeforeChange": "   public boolean hasModifiedDocuments()", "signatureAfterChange": "   public boolean hasModifiedDocuments()", "diff": ["-    boolean modified = false;", "-    Iterator<OpenDefinitionsDocument> odds = _documentsRepos.valuesIterator();", "-    while(odds.hasNext())", "-    { ", "-      OpenDefinitionsDocument doc = odds.next();", "-      if (doc.isModifiedSinceSave()) {", "-        modified = true;", "-        break;", "+    synchronized (_documentsRepos) {", "+      for (OpenDefinitionsDocument odd : _documentsRepos.values()) {", "+        if (odd.isModifiedSinceSave()) return true;  ", "+      return false;", "-    return modified;"]}], "num": 20888}