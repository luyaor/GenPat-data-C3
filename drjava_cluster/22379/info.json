{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "111de25863c9d3adff508e64149cd0c5", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5e55f60d5442b5c7a57d247d0c7404d5", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractGlobalModel.java", "commitBeforeChange": "99105223925683ee669479026ce3b62dfa0eda84", "commitAfterChange": "94ede5fc3e289a571a76fcd6a91c26510fe57b12", "methodNumberBeforeChange": 369, "methodNumberAfterChange": 372, "signatureBeforeChange": "   public String fixPathForNavigator(String path) throws IOException", "signatureAfterChange": "   public String fixPathForNavigator(String path) throws IOException", "diff": ["-   * File.separator. */", "+   * File.separator. TODO: convert this method to take a File argument. */", "-    path = path.substring(0, path.lastIndexOf(File.separator));", "-    String _topLevelPath;", "-    if (getProjectFile() != null) {", "-      _topLevelPath = getProjectFile().getCanonicalPath();", "-      _topLevelPath = _topLevelPath.substring(0, _topLevelPath.lastIndexOf(File.separator));;", "-    }", "-    else _topLevelPath = \"\";", "+    String parent = path.substring(0, path.lastIndexOf(File.separator));", "+    String topLevelPath;", "+    String rootPath = getProjectRoot().getCanonicalPath();", "-    if (!path.equals(_topLevelPath) && !path.startsWith(_topLevelPath + File.separator))", "-      /** it's in external files, so don't give it a path */", "+    if (! parent.equals(rootPath) && ! parent.startsWith(rootPath + File.separator))", "+      /** it's an external file, so don't give it a path */", "-    else {", "-      path = path.substring(_topLevelPath.length());", "-      return path;", "-    }", "+    else ", "+      return parent.substring(rootPath.length());"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a8f04c86a3df59e6021635e3557f7dcc", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/DefaultGlobalModel.java", "commitBeforeChange": "fca5fcebd9a0a23f563d800e635b0c2ebad1969e", "commitAfterChange": "04d5f67f3ab0801dcf0753d1c84455182368f783", "methodNumberBeforeChange": 275, "methodNumberAfterChange": 276, "signatureBeforeChange": "   private OpenDefinitionsDocument _openFile(File file)     throws IOException, AlreadyOpenException", "signatureAfterChange": "   private OpenDefinitionsDocument _openFile(File file)     throws IOException, AlreadyOpenException", "diff": ["-      path = path.substring(0, path.lastIndexOf(File.separator));", "-      String _topLevelPath;", "-      if(getProjectFile() != null){", "-        _topLevelPath = getProjectFile().getCanonicalPath();", "-        _topLevelPath = _topLevelPath.substring(0, _topLevelPath.lastIndexOf(File.separator));;", "-      }else{", "-        _topLevelPath = \"\";", "-      }", "-      if (!path.equals(_topLevelPath) && !path.startsWith(_topLevelPath + File.separator) ){", "-        /** it's in external files, so don't give it a path */", "-        _documentNavigator.addDocument(idoc, \"\");", "-      }else{", "-        path = path.substring(_topLevelPath.length());", "-        _documentNavigator.addDocument(idoc, path);", "-      }", "+      _documentNavigator.addDocument(idoc, fixPathForNavigator(path));"]}], "num": 22379}