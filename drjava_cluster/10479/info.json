{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bea83ef76fa2e4f587cd0b47d88769a7", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "510bc7b929227bbf7933a1ed534fd28d", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/DefinitionsDocument.java", "commitBeforeChange": "5d8a3bdb2b4d5525535575f357c7961c2851e09a", "commitAfterChange": "2d393792d3779835588c185ebb45db67c3e34dc4", "methodNumberBeforeChange": 49, "methodNumberAfterChange": 49, "signatureBeforeChange": "   public Position createPosition(int offs) throws BadLocationException", "signatureAfterChange": "   public Position createPosition(final int offset) throws BadLocationException", "diff": ["-  public Position createPosition(int offs) throws BadLocationException {", "-    WrappedPosition wp = new WrappedPosition(createUnwrappedPosition(offs));", "+  public Position createPosition(final int offset) throws BadLocationException {", "+    /* The following attempt to defer document loading did not work because offset became stale.  Postions must be", "+     * created eagerly. */", "+//    WrappedPosition wp = new WrappedPosition(new LazyPosition(new Suspension<Position>() {", "+//      public Position eval() {", "+//        try { return createUnwrappedPosition(offset); }", "+//        catch(BadLocationException e) { throw new UnexpectedException(e); }", "+//      }", "+//    }));", "+    WrappedPosition wp = new WrappedPosition(createUnwrappedPosition(offset));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bc07c7b687f1d515c5457d7f41bf2504", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/DefinitionsDocument.java", "commitBeforeChange": "6d55d86705248616cac5b324a7c528485ceb6104", "commitAfterChange": "d9483f6c228cd09f3431ad6b50a3d96bdaf83832", "methodNumberBeforeChange": 54, "methodNumberAfterChange": 54, "signatureBeforeChange": "   public synchronized Position createPosition(int offs) throws BadLocationException", "signatureAfterChange": "   public Position createWrappedPosition(int offs) throws BadLocationException", "diff": ["-  public synchronized Position createPosition(int offs) throws BadLocationException {", "-    WrappedPosition wp = new WrappedPosition(super.createPosition(offs));", "-    if (_wrappedPosList==null) { _wrappedPosList = new LinkedList<WeakReference<WrappedPosition>>(); }", "-    _wrappedPosList.add(new WeakReference<WrappedPosition>(wp));", "+  public Position createWrappedPosition(int offs) throws BadLocationException {", "+    WrappedPosition wp = new WrappedPosition(createPosition(offs));", "+    synchronized(_wrappedPosListLock) {", "+      if (_wrappedPosList == null) _wrappedPosList = new LinkedList<WeakReference<WrappedPosition>>(); ", "+      _wrappedPosList.add(new WeakReference<WrappedPosition>(wp));", "+    }"]}], "num": 10479}