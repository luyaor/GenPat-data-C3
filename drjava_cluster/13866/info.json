{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "05eca38900de2144a0dca817cbe4ae3c", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "21e84b3bbbe647bdda4c20580f9167ff", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrameTest.java", "commitBeforeChange": "63cffca72f6a1e6647332e3c5d09c544e2cf35f3", "commitAfterChange": "03e8c58726828f3ddf7d6eb7f633023068dad9fe", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": "   public void testDancingUIFileClosed() throws IOException", "signatureAfterChange": "   public void testDancingUIFileClosed() throws IOException", "diff": ["-", "-     //_frame.setVisible(true);", "-     _frame.pack();", "-     ComponentAdapter listener = new ComponentAdapter() {", "+     ", "+     final ComponentAdapter listener = new ComponentAdapter() {", "-     _frame.addComponentListenerToOpenDocumentsList(listener);", "-     SingleDisplayModelFileClosedListener closeListener = new SingleDisplayModelFileClosedListener();", "-", "-     _frame.open(new FileOpenSelector() {", "+     final SingleDisplayModelFileClosedListener closeListener = new SingleDisplayModelFileClosedListener();", "+     ", "+     Utilities.invokeLater(new Runnable() { public void run() {", "+//       _frame.setVisible(true);", "+       _frame.pack();", "+       _frame.addComponentListenerToOpenDocumentsList(listener);", "+       ", "+       _frame.open(new FileOpenSelector() {", "-", "-     _frame.getModel().addListener(closeListener);", "-     _closeDone = false;", "-     ", "-    ", "-     Utilities.invokeLater(new Runnable() {", "-       public void run() { _frame.getCloseButton().doClick(); }", "-     });", "+       ", "+       _frame.getModel().addListener(closeListener);", "+       _closeDone = false;", "+       ", "+       _frame.getCloseButton().doClick();", "+     }});"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "83cef06c972a91c1351559d0d6186208", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrameTest.java", "commitBeforeChange": "3c9da7b6f33927502f9cee032fa48adae4a189de", "commitAfterChange": "5b8db3ab6ffa6e60a3e348c2f56419eeafa67e87", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 16, "signatureBeforeChange": "   public void testDancingUIFileClosed() throws IOException", "signatureAfterChange": "   public void testDancingUIFileClosed() throws IOException", "diff": ["-     SingleDisplayModelFileClosedListener closeListener =", "-       new SingleDisplayModelFileClosedListener();", "+     SingleDisplayModelFileClosedListener closeListener = new SingleDisplayModelFileClosedListener();", "+     _closeDone = false;", "+     ", "+    ", "+     Utilities.invokeLater(new Runnable() {", "+       public void run() { _frame.getCloseButton().doClick(); }", "+     });", "-     synchronized(closeListener) {", "-       Thread thread = new Thread(new Runnable() {", "-         public void run() {", "-           _frame.getCloseButton().doClick();", "-         }", "-       });", "-       SwingUtilities.invokeLater(thread);", "-", "-       try{", "-         closeListener.wait();", "-       }", "-       catch(InterruptedException exception) {", "-         fail(exception.toString());", "-       }", "+//     _log.log(\"Waiting for file closing\");", "+     ", "+     synchronized (_closeLock) {", "+       try { while (! _closeDone) _closeLock.wait(); }", "+       catch(InterruptedException exception) { fail(exception.toString()); }", "-     if( !FileOps.deleteDirectory(_tempDir) ) {", "+     if (! FileOps.deleteDirectory(_tempDir)) {", "+//     _log.log(\"testDancingUIClosed completed\");"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a7955de31903f4ddcf0ed859f2b9a98d", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrameTest.java", "commitBeforeChange": "3c9da7b6f33927502f9cee032fa48adae4a189de", "commitAfterChange": "5b8db3ab6ffa6e60a3e348c2f56419eeafa67e87", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 12, "signatureBeforeChange": "   public void testDancingUIFileOpened() throws IOException", "signatureAfterChange": "   public void testDancingUIFileOpened() throws IOException", "diff": ["+     ", "+     ", "-     SingleDisplayModelCompileListener compileListener =", "-       new SingleDisplayModelCompileListener();", "+     ", "+     _compileDone = false;", "+     SingleDisplayModelCompileListener compileListener = new SingleDisplayModelCompileListener();", "-     synchronized(compileListener) {", "-       SwingUtilities.invokeLater(new Runnable() {", "-         public void run() {", "-           _frame.getCompileAllButton().doClick();", "-         }", "-       });", "+     Utilities.invokeLater(new Runnable() {", "+       public void run() { _frame.getCompileAllButton().doClick();}", "+     });", "-       try{", "-         compileListener.wait();", "-       }", "-       catch(InterruptedException exception) {", "-         fail(exception.toString());", "-       }", "+//     _log.log(\"Waiting for compile\");", "+     synchronized(_compileLock) {", "+       try { while (! _compileDone) _compileLock.wait(); }", "+       catch(InterruptedException exception) { fail(exception.toString()); }", "-     if( !FileOps.deleteDirectory(_tempDir) ) {", "-       System.err.println(\"Couldn't fully delete directory \" + _tempDir.getAbsolutePath() +", "-                          \"\\nDo it by hand.\\n\");", "-     }", "+     if (! FileOps.deleteDirectory(_tempDir))", "+       System.err.println(\"Couldn't fully delete directory \" + _tempDir.getAbsolutePath() + \"\\nDo it by hand.\\n\");", "+   ", "+//     _log.log(\"testDancingUIFileOpened completed\");"]}], "num": 13866}