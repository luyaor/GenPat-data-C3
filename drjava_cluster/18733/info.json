{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "20af95e9751ec70d7791ed91fa9b0ad7", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b7688c4b5c46cd9314b4b8f8dc6194c4", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelJUnitTest.java", "commitBeforeChange": "771a0aee635c62bc6d0a2000fe605dc1113ef2b9", "commitAfterChange": "d1e56ac5c281c4b03c498f59138895f0f26350fa", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 18, "signatureBeforeChange": "   public void testJUnitAllWithNoValidTests() throws Exception", "signatureAfterChange": "   public void testJUnitAllWithNoValidTests() throws Exception", "diff": ["-   */", "-  public void testJUnitAllWithNoValidTests() throws Exception {", "-    JUnitNonTestListener listener = new JUnitNonTestListener(true);", "-    _model.addListener(listener);", "-    synchronized (listener) {", "-      _model.getJUnitModel().junitAll();", "-      listener.wait();", "-    }", "-    listener.assertNonTestCaseCount(1);", "-    listener.assertJUnitSuiteStartedCount(0);", "-    listener.assertJUnitTestStartedCount(0);", "-    listener.assertJUnitTestEndedCount(0);", "-    _model.removeListener(listener);", "-", "-    OpenDefinitionsDocument doc = setupDocument(NON_TESTCASE_TEXT);", "-    listener = new JUnitNonTestListener(true);", "-    File file = new File(_tempDir, \"NonTestCase.java\");", "-    doc.saveFile(new FileSelector(file));", "-    doc.startCompile();", "-    doc = setupDocument(MONKEYTEST_PASS_TEXT);", "-    file = new File(_tempDir, \"MonkeyTestPass.java\");", "-    doc.saveFile(new FileSelector(file));", "-    _model.addListener(listener);", "-    synchronized (listener) {", "-      _model.getJUnitModel().junitAll();", "-      listener.wait();", "-    }", "-    listener.assertNonTestCaseCount(1);", "-    listener.assertJUnitSuiteStartedCount(0);", "-    listener.assertJUnitTestStartedCount(0);", "-    listener.assertJUnitTestEndedCount(0);", "-    _model.removeListener(listener);", "-  }", "+  /** Verifies that we get a nonTestCase event */", "+  public void testJUnitAllWithNoValidTests() throws Exception {", "+    ", "+    JUnitNonTestListener listener = new JUnitNonTestListener(true);", "+    _model.addListener(listener);", "+    ", "+    _runJUnit();", "+    ", "+    listener.assertNonTestCaseCount(1);", "+    listener.assertJUnitSuiteStartedCount(0);", "+    listener.assertJUnitTestStartedCount(0);", "+    listener.assertJUnitTestEndedCount(0);", "+    _model.removeListener(listener);", "+", "+    OpenDefinitionsDocument doc = setupDocument(NON_TESTCASE_TEXT);", "+    listener = new JUnitNonTestListener(true);", "+    File file = new File(_tempDir, \"NonTestCase.java\");", "+    doc.saveFile(new FileSelector(file));", "+    doc.startCompile();", "+    doc = setupDocument(MONKEYTEST_PASS_TEXT);", "+    file = new File(_tempDir, \"MonkeyTestPass.java\");", "+    doc.saveFile(new FileSelector(file));", "+    _model.addListener(listener);", "+    ", "+    _runJUnit();", "+ ", "+    listener.assertNonTestCaseCount(1);", "+    listener.assertJUnitSuiteStartedCount(0);", "+    listener.assertJUnitTestStartedCount(0);", "+    listener.assertJUnitTestEndedCount(0);", "+    _model.removeListener(listener);", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bbb97959868fb0a8be44d47c9e5337d0", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelJUnitTest.java", "commitBeforeChange": "1c6afe551331288ca825b92ecb3fda34bf325ee0", "commitAfterChange": "946c9827fd9c7515742a2a4508e6a7ac84a9f5a8", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 23, "signatureBeforeChange": "   public void testCorrectFilesAfterIncorrectChanges_NOJOIN() throws Exception", "signatureAfterChange": "   public void testCorrectFilesAfterIncorrectChanges_NOJOIN() throws Exception", "diff": ["-    OpenDefinitionsDocument doc = setupDocument(NON_TESTCASE_TEXT);", "-    JUnitNonTestListener listener = new JUnitNonTestListener(true);", "-    File file = new File(_tempDir, \"NonTestCase.java\");", "-    saveFile(doc, new FileSelector(file));", "-    _model.addListener(listener);", "+//    OpenDefinitionsDocument doc0 = setupDocument(NON_TESTCASE_TEXT);", "+//    JUnitNonTestListener listener0 = new JUnitNonTestListener(true);", "+//    File file = new File(_tempDir, \"NonTestCase.java\");", "+//    saveFile(doc0, new FileSelector(file));", "+//    _model.addListener(listener0);", "+//    ", "+//    listener0.compile(doc0);", "+//    listener0.checkCompileOccurred();", "+//    _model.removeListener(listener0);", "+//    // What is the preceding code segment supposed to test; it has already been done!", "-    listener.compile(doc);", "-    listener.checkCompileOccurred();", "-    _model.removeListener(listener);", "-    // What is the preceding code segment supposed to test; it has already been done!", "+    final OpenDefinitionsDocument doc1 = setupDocument(MULTI_CLASSES_IN_FILE_TEXT);", "+    final File file = new File(_tempDir, \"DJTest.java\");", "+    saveFile(doc1, new FileSelector(file));", "+    if (printMessages) System.err.println(\"In testCorrectFilesAfterIncorrectChanges_NOJOIN(), DJTest.java = \\n\" + doc1.getText());", "-    doc = setupDocument(MULTI_CLASSES_IN_FILE_TEXT);", "-    file = new File(_tempDir, \"Test.java\");", "-    saveFile(doc, new FileSelector(file));", "-    ", "-    listener = new JUnitNonTestListener(true);", "-    _model.addListener(listener);", "-    listener.compile(doc);", "-    ", "-    listener.runJUnit(_model.getJUnitModel());", "-    ", "-    listener.assertNonTestCaseCount(0);", "-    listener.assertJUnitSuiteStartedCount(1);", "-    listener.assertJUnitTestStartedCount(1);", "-    listener.assertJUnitTestEndedCount(1);", "-    _model.removeListener(listener);", "-    ", "-    doc.remove(87,4);", "+    final JUnitNonTestListener listener1 = new JUnitNonTestListener(true);", "+    _model.addListener(listener1);", "+    listener1.compile(doc1);", "+    listener1.checkCompileOccurred();", "+    assertCompileErrorsPresent(false);", "+", "+    listener1.runJUnit(_model.getJUnitModel());", "+    listener1.assertJUnitSuiteStartedCount(1);", "+    listener1.assertJUnitTestStartedCount(1);", "+    listener1.assertJUnitTestEndedCount(1);", "+    listener1.assertNonTestCaseCount(0);", "+    _model.removeListener(listener1);", "+    doc1.remove(87,4);", "-    ", "-    ", "-//    Utilities.show(\"calling _runJunit in testNoClassFile\");", "-    ", "-    listener2.runJUnit(doc);", "+    listener2.runJUnit(doc1);", "-//    Utilities.showDebug(\"Junit run completed\");", "-    if (printMessages) System.out.println(\"after test\");", "+    if (printMessages) System.err.println(\"after test\");"]}], "num": 18733}