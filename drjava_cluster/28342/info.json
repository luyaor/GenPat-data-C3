{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "fb9125f8d92a2758b7706864e2803aba", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0fcc14e18315ce0c89e94db7be738a65", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/InteractionsModel.java", "commitBeforeChange": "e753017eccbd872714e58c93831cb488b5045d2a", "commitAfterChange": "abaea23707eba81455db9185a249740d89273b85", "methodNumberBeforeChange": 38, "methodNumberAfterChange": 41, "signatureBeforeChange": "   public void _interactionIsOver()", "signatureAfterChange": "   public void _interactionIsOver()", "diff": ["-    int len = 0;", "-    _document.acquireWriteLock();", "-    try {", "-      _document.addToHistory(_toAddToHistory);", "-      _document.setInProgress(false);", "-      _document.insertPrompt();", "-      len = _document.getPromptLength();", "-    }", "-    finally { _document.releaseWriteLock(); }", "-    advanceCaret(len);         // runs in event thread", "-    _notifyInteractionEnded();", "+    Utilities.invokeLater(new Runnable() {", "+      public void run() {", "+        _document.acquireWriteLock();", "+        try {", "+          _document.addToHistory(_toAddToHistory);", "+          _document.setInProgress(false);", "+          _document.insertPrompt();", "+          int len = _document.getPromptLength();", "+//          advanceCaret(len); ", "+        }", "+        finally { _document.releaseWriteLock(); }", "+        // runs in event thread", "+        _notifyInteractionEnded();", "+      }", "+    });", "+    scrollToCaret();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "28203847110c0a8567a2fd57013c7917", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/RMIInteractionsModel.java", "commitBeforeChange": "e753017eccbd872714e58c93831cb488b5045d2a", "commitAfterChange": "abaea23707eba81455db9185a249740d89273b85", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": "   private void _updateDocument(String prompt, boolean inProgress, boolean updatePrompt)", "signatureAfterChange": "   private void _updateDocument(final String prompt, final boolean inProgress, boolean updatePrompt)", "diff": ["-  private void _updateDocument(String prompt, boolean inProgress, boolean updatePrompt) {", "+  private void _updateDocument(final String prompt, final boolean inProgress, boolean updatePrompt) {", "-      int len = 0;", "-      _document.acquireWriteLock();", "-      try {", "-        _document.setPrompt(prompt);", "-        _document.insertNewline(_document.getLength());", "-        _document.insertPrompt();", "-        len = _document.getPromptLength();  // updates the interactions pane!", "-      }", "-      finally { _document.releaseWriteLock(); }", "-      advanceCaret(len);", "-    }", "-    _document.setInProgress(inProgress);", "+      Utilities.invokeLater(new Runnable() {", "+        public void run() {", "+          _document.acquireWriteLock();", "+          try {", "+            _document.setPrompt(prompt);", "+            _document.insertNewline(_document.getLength());", "+            _document.insertPrompt();", "+            int len = _document.getPromptLength();  ", "+//            advanceCaret(len);", "+            _document.setInProgress(inProgress);", "+          }", "+          finally { _document.releaseWriteLock(); }", "+        }", "+      });", "+      scrollToCaret();", "+    }   "]}], "num": 28342}