{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "655e65756d176cca04f4252a5d2ba8ad", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "571c1abae3e04c4178671fb1736f5e2d", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "platform/src-jdk16/edu/rice/cs/drjava/model/compiler/Javac160Compiler.java", "commitBeforeChange": "0fe874dd6d2f82ba868df35578fd530c5227b9f2", "commitAfterChange": "12b972c6351f6122675c003ccbc59ef481c89cda", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "    public Javac160Compiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath)", "signatureAfterChange": "      public Javac160Compiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath)", "diff": ["+    if (_filterExe) {", "+      // if we need to filter out exe files from the classpath, we also need to", "+      // extract junit.jar and create a temporary file", "+      try {", "+\t// edu.rice.cs.util.Log LOG = new edu.rice.cs.util.Log(\"jdk160.txt\",true);", "+        // LOG.log(\"Filtering exe files from classpath.\");", "+        InputStream is = Javac160Compiler.class.getResourceAsStream(\"/junit.jar\");", "+\tif (is!=null) {", "+\t  // LOG.log(\"\\tjunit.jar found\");", "+\t  _tempJUnit = edu.rice.cs.plt.io.IOUtil.createAndMarkTempFile(PREFIX,SUFFIX);", "+\t  FileOutputStream fos = new FileOutputStream(_tempJUnit);", "+\t  int size = edu.rice.cs.plt.io.IOUtil.copyInputStream(is,fos);", "+\t  // LOG.log(\"\\t\"+size+\" bytes written to \"+_tempJUnit.getAbsolutePath());", "+\t}", "+\telse {", "+\t  // LOG.log(\"\\tjunit.jar not found\");", "+\t  if (_tempJUnit!=null) {", "+\t    _tempJUnit.delete();", "+\t    _tempJUnit = null;", "+\t    }", "+\t  }", "+      }", "+      catch(IOException ioe) {", "+\tif (_tempJUnit!=null) {", "+\t    _tempJUnit.delete();", "+\t    _tempJUnit = null;", "+\t}", "+      }", "+      // sometimes this file may be left behind, so create a shutdown hook", "+      // that deletes temporary files matching our pattern", "+      Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {", "+        public void run() {", "+\t  try {", "+\t    File temp = edu.rice.cs.plt.io.IOUtil.createAndMarkTempFile(PREFIX,SUFFIX);;", "+  \t    File[] toDelete = temp.getParentFile().listFiles(new FilenameFilter() {", "+\t      public boolean accept(File dir, String name) {", "+\t        if ((!name.startsWith(PREFIX)) || (!name.endsWith(SUFFIX))) return false;", "+\t        String rest = name.substring(PREFIX.length(), name.length()-SUFFIX.length());", "+\t        try {", "+\t          Integer i = new Integer(rest);", "+\t\t  // we could create an integer from the rest, this is one of our temporary files", "+\t\t  return true;", "+\t        }", "+\t        catch(NumberFormatException e) { /* couldn't convert, ignore this file */ }", "+\t        return false;", "+\t      }", "+\t    });", "+\t    for(File f: toDelete) {", "+\t      f.delete();", "+\t    }", "+\t  }", "+\t  catch(IOException ioe) { /* could not delete temporary files, ignore */ }", "+\t}", "+      }));", "+    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc85759f2d726afa695c20b6be5f5cd2", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "platform/src-jdk16/edu/rice/cs/drjava/model/compiler/Javac160Compiler.java", "commitBeforeChange": "7f24fc05ac677df06d9826a05db0243e50dd0b59", "commitAfterChange": "51ac7cbc7782d911930f183c9cf811f53aba30d2", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "      public Javac160Compiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath)", "signatureAfterChange": "      public Javac160Compiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath)", "diff": ["-", "+  ", "-    _filterExe = version.compareTo(JavaVersion.parseFullVersion(\"1.6.0_04\")) >= 0;", "-    if (_filterExe) {", "-      // if we need to filter out exe files from the classpath, we also need to", "-      // extract junit.jar and create a temporary file", "-      try {", "-\t// edu.rice.cs.util.Log LOG = new edu.rice.cs.util.Log(\"jdk160.txt\",true);", "-        // LOG.log(\"Filtering exe files from classpath.\");", "-        InputStream is = Javac160Compiler.class.getResourceAsStream(\"/junit.jar\");", "-\tif (is!=null) {", "-\t  // LOG.log(\"\\tjunit.jar found\");", "-\t  _tempJUnit = edu.rice.cs.plt.io.IOUtil.createAndMarkTempFile(PREFIX,SUFFIX);", "-\t  FileOutputStream fos = new FileOutputStream(_tempJUnit);", "-\t  int size = edu.rice.cs.plt.io.IOUtil.copyInputStream(is,fos);", "-\t  // LOG.log(\"\\t\"+size+\" bytes written to \"+_tempJUnit.getAbsolutePath());", "-\t}", "-\telse {", "-\t  // LOG.log(\"\\tjunit.jar not found\");", "-\t  if (_tempJUnit!=null) {", "-\t    _tempJUnit.delete();", "-\t    _tempJUnit = null;", "-\t    }", "-\t  }", "-      }", "-      catch(IOException ioe) {", "-\tif (_tempJUnit!=null) {", "-\t    _tempJUnit.delete();", "-\t    _tempJUnit = null;", "-\t}", "-      }", "-      // sometimes this file may be left behind, so create a shutdown hook", "-      // that deletes temporary files matching our pattern", "-      Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {", "-        public void run() {", "-\t  try {", "-\t    File temp = edu.rice.cs.plt.io.IOUtil.createAndMarkTempFile(PREFIX,SUFFIX);;", "-  \t    File[] toDelete = temp.getParentFile().listFiles(new FilenameFilter() {", "-\t      public boolean accept(File dir, String name) {", "-\t        if ((!name.startsWith(PREFIX)) || (!name.endsWith(SUFFIX))) return false;", "-\t        String rest = name.substring(PREFIX.length(), name.length()-SUFFIX.length());", "-\t        try {", "-\t          Integer i = new Integer(rest);", "-\t\t  // we could create an integer from the rest, this is one of our temporary files", "-\t\t  return true;", "-\t        }", "-\t        catch(NumberFormatException e) { /* couldn't convert, ignore this file */ }", "-\t        return false;", "-\t      }", "-\t    });", "-\t    for(File f: toDelete) {", "-\t      f.delete();", "-\t    }", "-\t  }", "-\t  catch(IOException ioe) { /* could not delete temporary files, ignore */ }", "-\t}", "-      }));", "-    }"]}], "num": 8730}