{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "df3a38320c94bff5c4c7cbd7ba8cdcbd", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4b1f326b0977c9997b6465d271b15ed5", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "deb4bbe3644e2d17508378353337903e5f2c956b", "commitAfterChange": "f9f9b40d76f2ccbda12717eda0af359f2105ef7b", "methodNumberBeforeChange": 526, "methodNumberAfterChange": 526, "signatureBeforeChange": "   private File getChosenFile(JFileChooser fc, int choice) throws OperationCanceledException", "signatureAfterChange": "   private File getChosenFile(JFileChooser fc, int choice, File previous) throws OperationCanceledException", "diff": ["-  private File getChosenFile(JFileChooser fc, int choice) throws OperationCanceledException {", "+  private File getChosenFile(JFileChooser fc, int choice, File previous) throws OperationCanceledException {", "-            if (chosen.getName().indexOf(\".\") == -1)", "-              return new File(chosen.getAbsolutePath() +", "-                              OptionConstants.LANGUAGE_LEVEL_EXTENSIONS[DrJava.getConfig().getSetting(LANGUAGE_LEVEL)]);", "+            if (chosen.getName().indexOf(\".\") == -1) {", "+              // no file extension", "+              String previousName = (previous!=null)?previous.getName():\"\";", "+              if (!DrJavaFileUtils.isSourceFile(previousName)) {", "+                // previous file name doesn't have a file extension either", "+                return new File(chosen.getAbsolutePath() + OptionConstants.", "+                                  LANGUAGE_LEVEL_EXTENSIONS[DrJava.getConfig().getSetting(LANGUAGE_LEVEL)]);", "+              }", "+              else {", "+                // use previous file's extension", "+                int previousLastDotPos = previousName.lastIndexOf(\".\");", "+                String previousExt = previousName.substring(previousLastDotPos);", "+                File newFile = new File(chosen.getAbsolutePath() + previousExt);", "+                return newFile;", "+              }", "+            }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8ac4f8be467cac46d75b3f0c93079eb0", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/indent/QuestionPrevLineStartsWith.java", "commitBeforeChange": "42669dc5656697beebfecb16842ba181e2bab301", "commitAfterChange": "ab72ce86901addf5fe2a66f48b9dc4c5f7db818b", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 1, "signatureBeforeChange": "   boolean applyRule(DefinitionsDocument doc)", "signatureAfterChange": "   boolean applyRule(DefinitionsDocument doc)", "diff": ["-    throw new RuntimeException(\"Not yet implemented.\");", "-    ", "-    /** FIXME: don't look in comments if _searchComments == false", "-    int start = startOfPrevLine(doc, pos);", "-    int end = endOfLine(doc, start);", "-    String text = doc.getText(start, end);", "-    int prefixPos = text.indexOf(_prefix);", "-    return (prefixPos == 0);", "-    */", "+    try {", "+      // Find start of line", "+      int here = doc.getCurrentLocation();", "+      int startLine = doc.getLineStartPos(here);", "+      ", "+      if (startLine > DefinitionsDocument.DOCSTART) {", "+        // Find start of previous line", "+        int startPrevLine = doc.getLineStartPos(startLine - 1);", "+        int firstChar = doc.getLineFirstCharPos(startPrevLine);", "+        ", "+        // Compare prefix", "+        String actualPrefix = doc.getText(firstChar, _prefix.length());", "+        return _prefix.equals(actualPrefix);", "+      }", "+    }", "+    catch (BadLocationException e) {", "+      // Shouldn't happen", "+      throw new UnexpectedException(e);", "+    }", "+    // On first line", "+    return false;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9ae7c726e62070d8334a42106ab5f30a", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/newjvm/InterpreterJVM.java", "commitBeforeChange": "e28d42989a089b15d3a01e7dd19b426bc7021c04", "commitAfterChange": "261ca8732921a2a5c58b2777d5419ddfe2c261df", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "   public synchronized void interpret(final String s, final InterpreterData interpreter)", "signatureAfterChange": "   public synchronized void interpret(final String input, final InterpreterData interpreter)", "diff": ["-  public synchronized void interpret(final String s, final InterpreterData interpreter) {", "-    Thread thread = new Thread(\"interpret thread: \" + s) {", "+  public synchronized void interpret(final String input, final InterpreterData interpreter) {", "+    Thread thread = new Thread(\"interpret thread: \" + input) {", "+        String s = input;", "-            // Processor disabled until bug 750605 fixed", "-            //String s1 = _interactionsProcessor.preProcess(s);", "+            String s1 = _interactionsProcessor.preProcess(s);", "-            //String s2 = _interactionsProcessor.postProcess(s1, result);", "+            String s2 = _interactionsProcessor.postProcess(s1, result);", "-//           catch (ParseException pe) {", "-//             // A ParseException indicates a syntax error in the input window", "-//             _mainJVM.interpretResult( new SyntaxErrorResult( pe, s ) );", "-//           }", "-//           catch (TokenMgrError tme) {", "-//             // A TokenMgrError indicates some lexical difficulty with input.", "-//             _mainJVM.interpretResult( new SyntaxErrorResult( tme, s ) );", "-//           }", "+          catch (ParseException pe) {", "+            // A ParseException indicates a syntax error in the input window", "+            _mainJVM.interpretResult( new SyntaxErrorResult( pe, s ) );", "+          }", "+          catch (TokenMgrError tme) {", "+            // A TokenMgrError indicates some lexical difficulty with input.", "+            _mainJVM.interpretResult( new SyntaxErrorResult( tme, s ) );", "+          }"]}], "num": 20482}