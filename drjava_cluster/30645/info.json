{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e14eda065283ac856294149be1fbaf39", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "44c03baea1a4c7d436175579a2165ffa", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/DebugPanel.java", "commitBeforeChange": "54d0a17e7a37f15a89960f683e082d8fac346424", "commitAfterChange": "5c2ac9e8438d392f2dbd245a906f9c4b21c33aac", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "   public void updateData()", "signatureAfterChange": "   public void updateData()", "diff": ["-      _watches = _debugger.getWatches();", "-      // Get threads and stack (thread suspended); the debugger will pass empty", "-      // vectors if there are no threads or stack frames", "-      _threads = _debugger.getCurrentThreadData();", "-      _stackFrames = _debugger.getCurrentStackFrameData();", "+      try {", "+        if (_debugger.isCurrentThreadSuspended()) {", "+          _watches = _debugger.getWatches();", "+          _stackFrames = _debugger.getCurrentStackFrameData();", "+        }", "+        else {", "+          _watches = new Vector<DebugWatchData>();", "+          _stackFrames = new Vector<DebugStackData>();", "+        }", "+        _threads = _debugger.getCurrentThreadData();", "+      }", "+      catch (DebugException de) {", "+        // Thrown if", "+        _frame._showDebugError(de);", "+      }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc029f9b26781dc8c17dd7ec81c12cad", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/DebugPanel.java", "commitBeforeChange": "9252a1853f289706bd8613c5b3a7e1dae6638ae1", "commitAfterChange": "eaf9387d90b9ce749cafaa91a98fe5e7c77f98e0", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "      public void updateData()", "signatureAfterChange": "   public void updateData(boolean updateStack)", "diff": ["-  public void updateData() {", "-    _watchpoints = _debugger.getWatchpoints();", "-    _threads = _debugger.getThreads();", "-    _frames = _debugger.getFrames();", "+   */", "+  public void updateData(boolean updateStack) {", "+    //DrJava.consoleOut().println(\"updating data...\");", "+    ", "+    if (_debugger.isReady()) {", "+      _watches = _debugger.getWatches();", "+      if (updateStack) {", "+        // Get threads and stack (thread suspended)", "+        _threads = _debugger.getCurrentThreads();", "+        _stackFrames = _debugger.getCurrentStackFrames();", "+      }", "+      else {", "+        // Empty tables (thread resumed)", "+        _threads = new Vector<ThreadReference>();", "+        _stackFrames = new Vector<StackFrame>();", "+      }", "+    }", "+    else {", "+      // Clean up if debugger dies", "+      _watches = new Vector<DebugManager.WatchData>();", "+      _threads = new Vector<ThreadReference>();", "+      _stackFrames = new Vector<StackFrame>();", "+      // also clear breakpoint tree?", "+    }", "+", "+    //DrJava.consoleOut().println(\"firing events...\");", "+    ", "+    //DrJava.consoleOut().println(\"done firing events...\");"]}], "num": 30645}