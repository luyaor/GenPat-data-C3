{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f32909b0386bd1fccfb483a19f9fc9fe", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "36219e1358d243e6480b3882068dafe6", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "e02b291d62bdaa0ea7b37dd3f2ab84515aaa6d58", "commitAfterChange": "8d09927a54fdf6b15f8ba5f6b7e80366b0cf24be", "methodNumberBeforeChange": 239, "methodNumberAfterChange": 239, "signatureBeforeChange": "      public void setUpDrJavaProperties()", "signatureAfterChange": "      public void setUpDrJavaProperties()", "diff": ["+    final String DEF_DIR = _model.getInteractionsModel().getWorkingDirectory().toString();", "-        _value = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(_model.getActiveDocument().getRawFile().toString());", "+        try {", "+          File f = FileOps.makeRelativeTo(_model.getActiveDocument().getRawFile(),", "+                                          new File(_attributes.get(\"dir\")));", "+          _value = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(f.toString());", "+        }", "+        catch(IOException e) { _value = \"Error.\"; }", "+        catch(SecurityException e) { _value = \"Error.\"; }", "+      }", "+      public void resetAttributes() {", "+        _attributes.clear();", "+        _attributes.put(\"dir\", DEF_DIR);", "+      }", "+    });", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.working.dir\") {", "+      public void update() {", "+        try {", "+          File f;", "+          if (_attributes.get(\"dir\").equals(\"/\")) {", "+            f = _model.getInteractionsModel().getWorkingDirectory().getAbsoluteFile();", "+            _value = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(f.toString());", "+          }", "+          else {", "+            f = FileOps.makeRelativeTo(_model.getInteractionsModel().getWorkingDirectory(),", "+                                       new File(_attributes.get(\"dir\")));", "+            _value = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(f.toString());", "+          }", "+        }", "+        catch(IOException e) { _value = \"Error.\"; }", "+        catch(SecurityException e) { _value = \"Error.\"; }", "+      }    ", "+      public void resetAttributes() {", "+        _attributes.clear();", "+        _attributes.put(\"dir\", \"/\");", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.all.files\", File.pathSeparator) {", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.all.files\", File.pathSeparator, DEF_DIR) {", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.project.files\", File.pathSeparator) {", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.project.files\", File.pathSeparator, DEF_DIR) {", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.included.files\", File.pathSeparator) {", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.included.files\", File.pathSeparator, DEF_DIR) {", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.external.files\", File.pathSeparator) {", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.external.files\", File.pathSeparator, DEF_DIR) {", "-    ", "-    // Files with spaces", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.all.files.space\", \" \") {", "-      protected List<OpenDefinitionsDocument> getList() { return _model.getOpenDefinitionsDocuments(); }", "-    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.all.files\"));", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.project.files.space\", \" \") {", "-      protected List<OpenDefinitionsDocument> getList() { return _model.getProjectDocuments(); }", "-    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.all.files\"));", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.included.files.space\", \" \") {", "-      protected List<OpenDefinitionsDocument> getList() { return _model.getAuxiliaryDocuments(); }", "-    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.all.files\"));", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.external.files.space\", \" \") {", "-      protected List<OpenDefinitionsDocument> getList() { return _model.getNonProjectDocuments(); }", "-    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.all.files\"));    ", "-        _value = String.valueOf(System.currentTimeMillis());", "+        long millis = System.currentTimeMillis();", "+        String f = _attributes.get(\"fmt\").toLowerCase();", "+        if (f.equals(\"full\")) {", "+          _value = java.text.DateFormat.getDateInstance(java.text.DateFormat.FULL).format(new java.util.Date(millis));", "+        }", "+        else if (f.equals(\"long\")) {", "+          _value = java.text.DateFormat.getDateInstance(java.text.DateFormat.LONG).format(new java.util.Date(millis));", "+        }", "+        else if (f.equals(\"medium\")) {", "+          _value = java.text.DateFormat.getDateInstance(java.text.DateFormat.MEDIUM).format(new java.util.Date(millis));", "+        }", "+        else if (f.equals(\"short\")) {", "+          _value = java.text.DateFormat.getDateInstance(java.text.DateFormat.SHORT).format(new java.util.Date(millis));", "+        }", "+        else {", "+          _value = String.valueOf(millis);", "+        }", "+      }", "+      public void resetAttributes() {", "+        _attributes.clear();", "+        _attributes.put(\"fmt\", \"millis\");"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c9813a7835103a73ec61521e071ac0c7", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "5aa76b13dff40570c1cd7aec5ad8f4bfd4acc66f", "commitAfterChange": "b5f59af8481ed1aa24e82d114a52e3948d4e83f5", "methodNumberBeforeChange": 239, "methodNumberAfterChange": 239, "signatureBeforeChange": "      public void setUpDrJavaProperties()", "signatureAfterChange": "      public void setUpDrJavaProperties()", "diff": ["-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.all.files\") {", "-      public void update() {", "-        List<OpenDefinitionsDocument> l = _model.getOpenDefinitionsDocuments();", "-        StringBuilder sb = new StringBuilder();", "-        for(OpenDefinitionsDocument odd: l) {", "-          sb.append(File.pathSeparator);", "-          String f = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(odd.getRawFile().toString());", "-          sb.append(f);", "-        }", "-        _value = sb.toString().substring(File.pathSeparator.length());", "-      }", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.all.files\", File.pathSeparator) {", "+      protected List<OpenDefinitionsDocument> getList() { return _model.getOpenDefinitionsDocuments(); }", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.project.files\") {", "-      public void update() {", "-        List<OpenDefinitionsDocument> l = _model.getProjectDocuments();", "-        StringBuilder sb = new StringBuilder();", "-        for(OpenDefinitionsDocument odd: l) {", "-          sb.append(File.pathSeparator);", "-          String f = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(odd.getRawFile().toString());", "-          sb.append(f);", "-        }", "-        _value = sb.toString().substring(File.pathSeparator.length());", "-      }", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.project.files\", File.pathSeparator) {", "+      protected List<OpenDefinitionsDocument> getList() { return _model.getProjectDocuments(); }", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.included.files\") {", "-      public void update() {", "-        List<OpenDefinitionsDocument> l = _model.getAuxiliaryDocuments();", "-        StringBuilder sb = new StringBuilder();", "-        for(OpenDefinitionsDocument odd: l) {", "-          sb.append(File.pathSeparator);", "-          String f = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(odd.getRawFile().toString());", "-          sb.append(f);", "-        }", "-        _value = sb.toString().substring(File.pathSeparator.length());", "-      }", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.included.files\", File.pathSeparator) {", "+      protected List<OpenDefinitionsDocument> getList() { return _model.getAuxiliaryDocuments(); }", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.external.files\") {", "-      public void update() {", "-        List<OpenDefinitionsDocument> l = _model.getNonProjectDocuments();", "-        StringBuilder sb = new StringBuilder();", "-        for(OpenDefinitionsDocument odd: l) {", "-          sb.append(File.pathSeparator);", "-          String f = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(odd.getRawFile().toString());", "-          sb.append(f);", "-        }", "-        _value = sb.toString().substring(File.pathSeparator.length());", "-      }", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.external.files\", File.pathSeparator) {", "+      protected List<OpenDefinitionsDocument> getList() { return _model.getNonProjectDocuments(); }", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.all.files.space\") {", "-      public void update() {", "-        List<OpenDefinitionsDocument> l = _model.getOpenDefinitionsDocuments();", "-        StringBuilder sb = new StringBuilder();", "-        for(OpenDefinitionsDocument odd: l) {", "-          sb.append(' ');", "-          String f = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(odd.getRawFile().toString());", "-          sb.append(f);", "-        }", "-        _value = sb.toString().substring(1);", "-      }", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.all.files.space\", \" \") {", "+      protected List<OpenDefinitionsDocument> getList() { return _model.getOpenDefinitionsDocuments(); }", "-    ", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.project.files.space\") {", "-      public void update() {", "-        List<OpenDefinitionsDocument> l = _model.getProjectDocuments();", "-        StringBuilder sb = new StringBuilder();", "-        for(OpenDefinitionsDocument odd: l) {", "-          sb.append(' ');", "-          String f = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(odd.getRawFile().toString());", "-          sb.append(f);", "-        }", "-        _value = sb.toString().substring(1);", "-      }", "-    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.project.files\"));", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.included.files.space\") {", "-      public void update() {", "-        List<OpenDefinitionsDocument> l = _model.getAuxiliaryDocuments();", "-        StringBuilder sb = new StringBuilder();", "-        for(OpenDefinitionsDocument odd: l) {", "-          sb.append(' ');", "-          String f = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(odd.getRawFile().toString());", "-          sb.append(f);", "-        }", "-        _value = sb.toString().substring(1);", "-      }", "-    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.included.files\"));", "-    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerProperty(\"drjava.external.files.space\") {", "-      public void update() {", "-        List<OpenDefinitionsDocument> l = _model.getNonProjectDocuments();", "-        StringBuilder sb = new StringBuilder();", "-        for(OpenDefinitionsDocument odd: l) {", "-          sb.append(' ');", "-          String f = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(odd.getRawFile().toString());", "-          sb.append(f);", "-        }", "-        _value = sb.toString().substring(1);", "-      }", "-    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.external.files\"));", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.project.files.space\", \" \") {", "+      protected List<OpenDefinitionsDocument> getList() { return _model.getProjectDocuments(); }", "+    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.all.files\"));", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.included.files.space\", \" \") {", "+      protected List<OpenDefinitionsDocument> getList() { return _model.getAuxiliaryDocuments(); }", "+    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.all.files\"));", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new EagerFileListProperty(\"drjava.external.files.space\", \" \") {", "+      protected List<OpenDefinitionsDocument> getList() { return _model.getNonProjectDocuments(); }", "+    }).listenToInvalidatesOf(PropertyMaps.ONLY.getProperty(\"DrJava\", \"drjava.all.files\"));    "]}], "num": 14541}