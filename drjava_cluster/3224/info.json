{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "766baa7463884c4af509fce3d65a3cbc", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9bb828a560d0d1cb0cc09e44c2b1d33e", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "javalanglevels/src/edu/rice/cs/javalanglevels/JExprParserTest.java", "commitBeforeChange": "4cc63aff8a22c85ad1d78de9f4e0b9395e7d4e72", "commitAfterChange": "e330f3abbead97d3e3ac8751976bab81936096c2", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "\r   public void testParseSucceeds() throws IOException, ParseException", "signatureAfterChange": "   public void testParseSucceeds() throws IOException, ParseException", "diff": ["-   */\r", "-  public void testParseSucceeds() throws IOException, ParseException {\r", "-    File directory = new File(\"testFiles\");\r", "-\r", "-    File[] testFiles = directory.listFiles(new FileFilter() {\r", "-      public boolean accept(File pathName) {\r", "-        return pathName.getAbsolutePath().endsWith(\".test\");\r", "-      }\r", "-    });\r", "-\r", "-    for(int i = 0; i < testFiles.length; i++) {\r", "-      File currFile = testFiles[i];\r", "-      SourceFile sf = null;\r", "-      try {\r", "-        sf = new JExprParser(currFile).SourceFile();\r", "-      }\r", "-      catch (ParseException pe) {\r", "-        throw pe;\r", "-      }\r", "-\r", "-      String path2 = currFile.getAbsolutePath();\r", "-      int indexOfLastDot2 = path2.lastIndexOf('.');\r", "-      String newPath2 = path2.substring(0, indexOfLastDot2) + \".actual\";\r", "-      FileWriter fw = new FileWriter(newPath2);\r", "-      fw.write(sf.toString());\r", "-      fw.close();\r", "-      \r", "-      // Get the corresponding expected String value for the toString of the SourceFile.\r", "-      String path = currFile.getAbsolutePath();\r", "-      int indexOfLastDot = path.lastIndexOf('.');\r", "-      String newPath = path.substring(0, indexOfLastDot) + \".expected\";\r", "-      File f = new File(newPath);\r", "-      String text = readFileAsString(f);\r", "-      assertEquals(\"The resulting SourceFile generated from \" + currFile + \" is not correct.\", text, sf.toString());\r", "-    }\r", "-  }\r", "+   */", "+  public void testParseSucceeds() throws IOException, ParseException {", "+    File directory = new File(\"testFiles\");", "+", "+    File[] testFiles = directory.listFiles(new FileFilter() {", "+      public boolean accept(File pathName) {", "+        return pathName.getAbsolutePath().endsWith(\".test\");", "+      }", "+    });", "+", "+    for(int i = 0; i < testFiles.length; i++) {", "+      File currFile = testFiles[i];", "+      SourceFile sf = null;", "+      try {", "+        sf = new JExprParser(currFile).SourceFile();", "+      }", "+      catch (ParseException pe) {", "+        throw pe;", "+      }", "+", "+      String path2 = currFile.getAbsolutePath();", "+      int indexOfLastDot2 = path2.lastIndexOf('.');", "+      String newPath2 = path2.substring(0, indexOfLastDot2) + \".actual\";", "+      FileWriter fw = new FileWriter(newPath2);", "+      fw.write(sf.toString());", "+      fw.close();", "+      ", "+      // Get the corresponding expected String value for the toString of the SourceFile.", "+      String path = currFile.getAbsolutePath();", "+      int indexOfLastDot = path.lastIndexOf('.');", "+      String newPath = path.substring(0, indexOfLastDot) + \".expected\";", "+      File f = new File(newPath);", "+      String text = IOUtil.toString(f);", "+      assertEquals(\"The resulting SourceFile generated from \" + currFile + \" is not correct.\", text, sf.toString());", "+    }", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e1f074f9bfbbf779b4b3b672132fffea", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "javalanglevels/src/edu/rice/cs/javalanglevels/IntermediateLevelTest.java", "commitBeforeChange": "4cc63aff8a22c85ad1d78de9f4e0b9395e7d4e72", "commitAfterChange": "e330f3abbead97d3e3ac8751976bab81936096c2", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "\r   public void testShouldBeErrors()", "signatureAfterChange": "   public void testShouldBeErrors()", "diff": ["-  /** Ensure that files that are incorrect do actually throw errors.*/\r", "-  public void testShouldBeErrors() {\r", "-    directory = new File(directory.getAbsolutePath() + System.getProperty(\"file.separator\") + \"shouldBreak\");\r", "-    \r", "-    File[] testFiles = directory.listFiles(new FileFilter() {\r", "-      public boolean accept(File pathName) {\r", "-        return pathName.getAbsolutePath().endsWith(\".dj1\");\r", "-      }});\r", "-      \r", "-    LanguageLevelConverter llc;\r", "-    Pair<LinkedList<JExprParseException>, LinkedList<Pair<String, JExpressionIF>>> result;\r", "-    for (int i = 0; i<testFiles.length; i++) {\r", "-      llc = new LanguageLevelConverter(JavaVersion.JAVA_5);\r", "-      result = llc.convert(new File[] {testFiles[i]});\r", "-      assertTrue(\"should be parse exceptions or visitor exceptions in file \" + testFiles[i].getName(), !result.getFirst().isEmpty() || !result.getSecond().isEmpty());\r", "-    }\r", "-    \r", "-    /* Take care of the \"references\" directory */\r", "-    llc = new LanguageLevelConverter(JavaVersion.JAVA_5);\r", "-    File f = new File(new File(directory, \"references\"), \"ReferencingClass.dj1\");\r", "-    result = llc.convert(new File[] { f });\r", "-    assertTrue(\"should be parse exceptions or visitor exceptions in file \" + f.getName(), !result.getFirst().isEmpty() || !result.getSecond().isEmpty());\r", "-  }\r", "+  /** Ensure that files that are incorrect do actually throw errors.*/", "+  public void testShouldBeErrors() {", "+    directory = new File(directory.getAbsolutePath() + System.getProperty(\"file.separator\") + \"shouldBreak\");", "+    ", "+    File[] testFiles = directory.listFiles(new FileFilter() {", "+      public boolean accept(File pathName) {", "+        return pathName.getAbsolutePath().endsWith(\".dj1\");", "+      }});", "+      ", "+    LanguageLevelConverter llc;", "+    Pair<LinkedList<JExprParseException>, LinkedList<Pair<String, JExpressionIF>>> result;", "+    for (int i = 0; i<testFiles.length; i++) {", "+      llc = new LanguageLevelConverter();", "+      result = llc.convert(new File[] {testFiles[i]}, new Options(JavaVersion.JAVA_5, IterUtil.<File>empty()));", "+      assertTrue(\"should be parse exceptions or visitor exceptions in file \" + testFiles[i].getName(), !result.getFirst().isEmpty() || !result.getSecond().isEmpty());", "+    }", "+    ", "+    /* Take care of the \"references\" directory */", "+    llc = new LanguageLevelConverter();", "+    File f = new File(new File(directory, \"references\"), \"ReferencingClass.dj1\");", "+    result = llc.convert(new File[] { f }, new Options(JavaVersion.JAVA_5, IterUtil.<File>empty()));", "+    assertTrue(\"should be parse exceptions or visitor exceptions in file \" + f.getName(), !result.getFirst().isEmpty() || !result.getSecond().isEmpty());", "+  }"]}], "num": 3224}