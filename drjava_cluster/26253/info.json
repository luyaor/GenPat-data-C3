{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9046300da9ec88844c990d9edd9bf843", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2f3175efd18dbb7b614e86b058076aa2", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/GlobalModelJUnitTest.java", "commitBeforeChange": "fe10ec3049d7833e404492f382e59e4a2bb44b0e", "commitAfterChange": "ac147bfd47d7e558bfd3f0afa39ad091a35b6f6f", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 17, "signatureBeforeChange": "   public void testUnsavedAndUnCompiledChanges() throws Exception", "signatureAfterChange": "   public void testUnsavedAndUnCompiledChanges() throws Exception", "diff": ["-    if (printMessages) System.out.println(\"----testUnsavedAndUnCompiledChanges-----\");", "+    if (printMessages) System.out.println(\"-----testUnsavedAndUnCompiledChanges-----\");", "-    JUnitTestListener listener = new JUnitTestListener(true);", "+    ", "+    List<OpenDefinitionsDocument> docs = _model.getOpenDefinitionsDocuments();", "+    ", "+    OpenDefinitionsDocument untitled = docs.get(0);", "+    ", "+    System.out.println(\"Untitled file is named: \" + untitled.getName());", "+    ", "+    _model.closeFileOnQuitHelper(untitled);", "+    ", "+    // set up test listener for compile command; automatically checks that compilation is performed", "+    JUnitTestListener listener = new JUnitCompileBeforeTestListener();", "-    if (printMessages) System.out.println(\"before compile\");", "+    ", "-    if (printMessages) System.out.println(\"after compile\");", "-    changeDocumentText(MONKEYTEST_FAIL_TEXT, doc);", "-    if (printMessages) System.out.println(\"after document change\");", "+    ", "+//    System.err.println(\"Ordinary compile completed\");", "+    ", "+    listener.resetCompileCounts();", "+    ", "+    changeDocumentText(MONKEYTEST_PASS_ALT_TEXT, doc);", "+//    System.err.println(\"document changed; modifiedSinceSave = \" + doc.isModifiedSinceSave());", "+    ", "+//    System.err.println(\"JUnit completed\");", "+    ", "+    /* Unsaved document forces both saveBeforeCompile and compileBeforeTest */", "+    ", "+    listener.assertSaveBeforeCompileCount(1);", "+    listener.assertCompileBeforeJUnitCount(1);", "+    listener.assertNonTestCaseCount(0);", "+    listener.assertJUnitStartCount(1);", "+    listener.assertJUnitEndCount(1);", "+    listener.assertJUnitSuiteStartedCount(1);", "+    listener.assertJUnitTestStartedCount(1);", "+    listener.assertJUnitTestEndedCount(1);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ba67281bc9d7e0dcfaef1ad07ab5cb74", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "85ed1aa237c32b1787aaceb2ddec6d2f0e4c80e0", "commitAfterChange": "e2dcf9bc2cf7370066c5a6486905b66439f74f74", "methodNumberBeforeChange": 129, "methodNumberAfterChange": 129, "signatureBeforeChange": "   private void _openProjectHelper(File projectFile)", "signatureAfterChange": "   private void _openProjectHelper(File projectFile)", "diff": ["+    System.err.println(\"opening\");", "+", "-    _closeAll();", "-    _resetNavigatorPane();", "+    /**", "+     * now the model", "+     */", "+    List<OpenDefinitionsDocument> nonProjDocs = _model.getNonProjectDocuments();", "+    List<OpenDefinitionsDocument> projDocs = _model.getProjectDocuments();", "+    ", "+    ", "+    /**", "+     * close all project files", "+     */", "+    for(OpenDefinitionsDocument d: projDocs){", "+      System.err.println(\"closing \" + d);", "+      _model.closeFile(d);", "+      System.err.println(\"closed\");", "+    }", "+      ", "+    /**", "+     * keep all nonproject files open", "+     */", "+    IDocumentNavigator nav = _model.getDocumentNavigator();", "+//    nav.clear();", "+", "+//    for(OpenDefinitionsDocument d: nonProjDocs){", "+//      System.err.println(\"adding\" + d);", "+//      try{", "+//        /* transfer docs with files to new navigator */", "+//        nav.addDocument(_model.getIDocGivenODD(d), d.getFile().getParentFile().getAbsolutePath());", "+//      }catch(IllegalStateException e){", "+//        /* transfer untitled docs to new navigator */", "+//        nav.addDocument(_model.getIDocGivenODD(d));", "+//      }catch(FileMovedException e){", "+//        /* if the file has moved or been deleted,", "+//         * then add it to external files, since it's", "+//         * \"no longer in the project directory\"", "+//         */", "+//        nav.addDocument(_model.getIDocGivenODD(d));", "+//      }", "+//    }", "+    ", "+    System.err.println(\"done adding\");", "+    ", "+    System.err.println(\"about to set close project action\");", "+    ", "+", "+    System.err.println(\"done opening\");", "+    ", "+    _resetNavigatorPane();"]}], "num": 26253}