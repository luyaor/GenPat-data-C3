{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "25031f17051bdc7f20475d19c6fc25d3", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "84a1dfdef1dd8556a77591cb4b0dbda6", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/AbstractConsoleController.java", "commitBeforeChange": "8468328336764977b1a392d354ad9fa8332d6cf0", "commitAfterChange": "b5065bdb57d50a5108c714db64f9cb4417931362", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 15, "signatureBeforeChange": "          private int getNewCaretPos(DocumentEvent e, ConsoleDocument doc)", "signatureAfterChange": "          private int getNewCaretPos(ConsoleDocument doc, int promptPos, int insertPos, int insertLen)", "diff": ["-    private int getNewCaretPos(DocumentEvent e, ConsoleDocument doc) {", "+    private int getNewCaretPos(ConsoleDocument doc, int promptPos, int insertPos, int insertLen) {", "+", "-      if (! doc.hasPrompt()) return docLen;", "- ", "-      final int promptPos = doc.getPromptPos();", "-      if (promptPos == docLen) return docLen;", "+      if (! doc.hasPrompt() || promptPos == docLen) return docLen;", "-      final int insertPos = e.getOffset();", "-      final int insertLen = e.getLength();", "-      // Advance caret by insertion length (works both for echoed keyboard input and for writes to System.out", "+      // Advance caret by insertion length because it is sitting at or beyond the prompt"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d3243254e8ec5f0e1a8633b88dd21946", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/AbstractConsoleController.java", "commitBeforeChange": "451a8ef10dd808c32bb1dec2a41dbfe38542794f", "commitAfterChange": "fd372db787cedeccdc43d382b7e2999ff5184943", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": "     private int getNewCaretPos(DocumentEvent e, ConsoleDocument doc)", "signatureAfterChange": "     private int getNewCaretPos(DocumentEvent e, ConsoleDocument doc)", "diff": ["-      // Figure out where the prompt was before the insertion", "-      final int prevPromptPos = (insertPos <= promptPos) ? promptPos - insertLen : promptPos;", "-      // If caret was at previous prompt (or before), move it to the new prompPos.", "+      // Figure out where the prompt was before the insertion; printed output precedes the prompt", "+      final int prevPromptPos = (insertPos < promptPos) ? promptPos - insertLen : promptPos;", "+      // If caret was at previous prompt (or before), move it to the new prompPos.  ", "-       * relative position to the prompt. */", "+       * relative position to the prompt. (On keyboard input, prevPromptPos == promptPos, making this a no-op. */"]}], "num": 25266}