{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3458c08d15626e5faaefc79deab30b5e", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6eceaf4cd4fc7ee4a1895eeee82aa1be", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "fcaea018ddf37a9ab6028c8711b6c2d8ff9d638b", "commitAfterChange": "58d3703a31a86d869d5704beb1265e4c3b20ccb8", "methodNumberBeforeChange": 545, "methodNumberAfterChange": 545, "signatureBeforeChange": "          public void interactionEnded()", "signatureAfterChange": "          public void interactionEnded()", "diff": ["-      edu.rice.cs.plt.tuple.Pair<String,String> lastError = im.getLastError();", "+      String lastError = im.getLastError();", "-        if (lastError!=null) {", "+        if (lastError != null) {", "-          String exceptionClass = lastError.first();", "-          String message = lastError.second();", "-          edu.rice.cs.plt.tuple.Pair<String,String> secondToLastError = im.getSecondToLastError();", "-          if ((secondToLastError==null) || // either there was no 2nd to last error", "-              (!secondToLastError.first().equals(exceptionClass)) || // or it is different", "-              (!secondToLastError.second().equals(message))) {", "+          // check that this error is different than the last one (second to last may be null):", "+          if (!lastError.equals(im.getSecondToLastError())) {", "-            if (\"koala.dynamicjava.interpreter.error.ExecutionError\".equals(exceptionClass) &&", "-                message != null &&", "-                message.startsWith(\"Undefined class '\") &&", "-                message.endsWith(\"'\")) {", "+            if (lastError.startsWith(\"Undefined class '\") && lastError.endsWith(\"'\")) {", "-              String undefinedClassName = message.substring(message.indexOf('\\'')+1,message.lastIndexOf('\\''));", "-              _showAutoImportDialog(undefinedClassName);          ", "+              String undefinedClassName = lastError.substring(lastError.indexOf('\\'')+1,", "+                                                              lastError.lastIndexOf('\\''));", "+              _showAutoImportDialog(undefinedClassName);", "-      } else {", "+      }", "+      else {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b5ba022617a094e32a718cbc96a61774", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "6a170ab14316cceed86d0cd5eef7d1a5e1482088", "commitAfterChange": "8de007bf6be2b43ee2e0404f529aa96c640a30ed", "methodNumberBeforeChange": 545, "methodNumberAfterChange": 545, "signatureBeforeChange": "          public void interactionEnded()", "signatureAfterChange": "          public void interactionEnded()", "diff": ["+      InteractionsModel im = _model.getInteractionsModel();", "+      edu.rice.cs.plt.tuple.Pair<String,String> lastError = im.getLastError();", "+      if (DrJava.getConfig().getSetting(edu.rice.cs.drjava.config.OptionConstants.DIALOG_AUTOIMPORT_ENABLED)) {", "+        if (lastError!=null) {", "+          // the interaction ended and there was an error", "+          String exceptionClass = lastError.first();", "+          String message = lastError.second();", "+          edu.rice.cs.plt.tuple.Pair<String,String> secondToLastError = im.getSecondToLastError();", "+          if ((secondToLastError==null) || // either there was no 2nd to last error", "+              (!secondToLastError.first().equals(exceptionClass)) || // or it is different", "+              (!secondToLastError.second().equals(message))) {", "+            // this aborts the auto-importing if the same class comes up twice in a row", "+            if (\"koala.dynamicjava.interpreter.error.ExecutionError\".equals(exceptionClass) &&", "+                message != null &&", "+                message.startsWith(\"Undefined class '\") &&", "+                message.endsWith(\"'\")) {", "+              // it was an \"undefined class\" exception", "+              // show auto-import dialog", "+              String undefinedClassName = message.substring(message.indexOf('\\'')+1,message.lastIndexOf('\\''));", "+              _showAutoImportDialog(undefinedClassName);          ", "+            }", "+          }", "+        }", "+      } else {", "+        // reset the last errors, so the dialog works again if it is re-enabled", "+        im.resetLastErrors();", "+      }", "+"]}], "num": 10564}