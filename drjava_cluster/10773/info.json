{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ba9ae4e4c12875f76a3f5dc610471d81", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "034a7ae51ce66628bec82e96649356a8", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/util/StreamRedirectThread.java", "commitBeforeChange": "b68b258fee7c24e8a8c68fc2e7d3d99ccd585753", "commitAfterChange": "ec06880aa408b928b2f252538b208a76154d8334", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 4, "signatureBeforeChange": "     public void run()", "signatureAfterChange": "     public void run()", "diff": ["-            while ((count = in.read(cbuf, 0, BUFFER_SIZE)) >= 0) {", "-                out.write(cbuf, 0, count);", "-                out.flush();", "+            while ((!stop) && ((count = in.read(cbuf, 0, BUFFER_SIZE)) >= 0)) {", "+                try {", "+                    out.write(cbuf, 0, count);", "+                    out.flush();", "+                }", "+                catch (IOException exc) {", "+                    GeneralProcessCreator.LOG.log(\"StreamRedirectThread \"+getName()+\" had IOException while writing: \"+exc);", "+                    throw new StreamRedirectException(\"An error occurred during stream redirection, while piping data into a process.\",", "+                                                      exc);", "+                }", "+            GeneralProcessCreator.LOG.log(\"StreamRedirectThread \"+getName()+\" finished copying\");", "+            if (close) {", "+              out.close();", "+              in.close();", "+            }", "-          // ignore", "+          GeneralProcessCreator.LOG.log(\"StreamRedirectThread \"+getName()+\" had IOException: \"+exc);", "+          throw new StreamRedirectException(\"An error occurred during stream redirection, while piping data out of a process.\",", "+                                            exc);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "886ecc5e81b1bff51f889a11d43f6c03", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/ExternalProcessPanel.java", "commitBeforeChange": "7fd25882874ad9a06ac74fda13ef9cc77e52813e", "commitAfterChange": "028b13db63615f9cda7227ddd738bbfc3e1c04ec", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": "   protected void readText(final boolean finish)", "signatureAfterChange": "   protected void readText(final boolean finish)", "diff": ["-        if (_is==null) { _sb.append(\"\\nInput stream suddenly became null.\"); }", "-        if (_erris==null) { _sb.append(\"\\nError input stream suddenly became null.\"); }", "+        if ((_p!=null) && (_is==null)) {", "+          try {", "+            // try to get exitValue() to see if process has terminated; exit value is not otherwise important", "+            int ignored = _p.exitValue();", "+            // if no exception is thrown, then the process has finished, and the stream may be null", "+          }", "+          catch(IllegalThreadStateException e) {", "+            // process has NOT finished yet, but the stream is null; this is a problem", "+            _sb.append(\"\\nInput stream suddenly became null.\");", "+          }", "+        }", "+        if ((_p!=null) && (_erris==null)) { ", "+          try {", "+            // try to get exitValue() to see if process has terminated; exit value is not otherwise important", "+            int ignored = _p.exitValue();", "+            // if no exception is thrown, then the process has finished, and the stream may be null", "+          }", "+          catch(IllegalThreadStateException e) {", "+            // process has NOT finished yet, but the stream is null; this is a problem", "+            _sb.append(\"\\nError input stream suddenly became null.\");", "+          }", "+        }"]}], "num": 10773}