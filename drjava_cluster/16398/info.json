{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "468c56d4b7c967f4b39b5cdb7cf916a7", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "04c1ad8931895f1780f882a1d05c5900", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "b8bd7d0442cc5ba7e76504cb9896cbfabd4d129a", "commitAfterChange": "0e0a6cd0b304183c5602e4fe1c0f1a766f131ce0", "methodNumberBeforeChange": 29, "methodNumberAfterChange": 29, "signatureBeforeChange": "   public int balanceForward()", "signatureAfterChange": "   public int balanceForward()", "diff": ["-    acquireReadLock();", "-    try { synchronized(_reduced) { return _balanceForward(); } }", "-    finally { releaseReadLock(); }  ", "+//    acquireReadLock();", "+//    try { ", "+//    synchronized(_reduced) { ", "+      return _balanceForward(); ", "+//    } ", "+//    }", "+//    finally { releaseReadLock(); }  "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "057140285ee2039b2958d550dde8335e", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "92fd06b34796984853343dde64251cfdd2a0ce25", "commitAfterChange": "ad91ad9028e35ded2c6aef6b30e8459151ecae7c", "methodNumberBeforeChange": 81, "methodNumberAfterChange": 82, "signatureBeforeChange": "          public void run()", "signatureAfterChange": "     public void run()", "diff": ["+    /** Removes chars from reduced model; cache has already been selectively cleared. */", "-      acquireReadLock();", "-      try {", "-        synchronized(_reduced) { ", "-          _setCurrentLocation(_offset);", "-          _reduced.delete(_length);    ", "-          _styleChanged();", "-        }", "-      }", "-      finally { releaseReadLock(); } ", "+//      acquireReadLock();  // unnecessary! exclusive readLock should already be held!", "+//      try {", "+//        synchronized(_reduced) {  // unnecessary?  no other thread should hold a readLock", "+      _setCurrentLocation(_offset);", "+      _reduced.delete(_length);    ", "+      _styleChanged();", "+//        }", "+//      }", "+//      finally { releaseReadLock(); } "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "113ce8a120cf3bcfd250eb7471aaa4ad", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/InteractionsDJDocument.java", "commitBeforeChange": "b8bd7d0442cc5ba7e76504cb9896cbfabd4d129a", "commitAfterChange": "0e0a6cd0b304183c5602e4fe1c0f1a766f131ce0", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": "   public boolean _inBlockComment()", "signatureAfterChange": "   public boolean _inBlockComment()", "diff": ["-    acquireReadLock();", "-    try {", "-      synchronized(_reduced) {", "+//    acquireReadLock();", "+//    try {", "+//      synchronized(_reduced) {", "-      }", "-    }", "-    finally { releaseReadLock(); }", "+//      }", "+//    }", "+//    finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "14ab85bb74dd98781e4ed84579412684", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "b8bd7d0442cc5ba7e76504cb9896cbfabd4d129a", "commitAfterChange": "0e0a6cd0b304183c5602e4fe1c0f1a766f131ce0", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": "   public void move(int dist)", "signatureAfterChange": "   public void move(int dist)", "diff": ["-    acquireReadLock();", "-    try { synchronized(_reduced) { _move(dist); }}", "-    finally { releaseReadLock(); } ", "+//    acquireReadLock();", "+//    try { ", "+//    synchronized(_reduced) { ", "+      _move(dist); ", "+//    }", "+//    }", "+//    finally { releaseReadLock(); } "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "21945275211f7845c5dacca0541eecb2", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "b8bd7d0442cc5ba7e76504cb9896cbfabd4d129a", "commitAfterChange": "0e0a6cd0b304183c5602e4fe1c0f1a766f131ce0", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 23, "signatureBeforeChange": "   public void setCurrentLocation(int loc)", "signatureAfterChange": "   public void setCurrentLocation(int loc)", "diff": ["-    acquireReadLock();", "-    try { synchronized(_reduced) {_setCurrentLocation(loc); } }", "-    finally { releaseReadLock(); }", "+//    acquireReadLock();", "+//    try { ", "+//    synchronized(_reduced) {", "+      _setCurrentLocation(loc); ", "+//    } ", "+//    }", "+//    finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "47be988dfb90d85cadf33a85b2e4482c", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "commitAfterChange": "74a15c017d574b2ee2a0cdeaaedeea00825a0c5e", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 23, "signatureBeforeChange": "   public void setCurrentLocation(int loc)", "signatureAfterChange": "   public void setCurrentLocation(int loc)", "diff": ["-  public void setCurrentLocation(int loc)  { ", "-    acquireReadLock();", "-    try { synchronized(_reduced) {_setCurrentLocation(loc); } }", "-    finally { releaseReadLock(); }", "-  }  ", "+  public void setCurrentLocation(int loc)  { _setCurrentLocation(loc); }  "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4b60f104ca8870ee03da2b6d83fb59ac", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/InteractionsDJDocument.java", "commitBeforeChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "commitAfterChange": "74a15c017d574b2ee2a0cdeaaedeea00825a0c5e", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": "   public boolean _inBlockComment()", "signatureAfterChange": "   public boolean _inBlockComment()", "diff": ["-    acquireReadLock();", "-    try {", "-      synchronized(_reduced) {", "+//    acquireReadLock();", "+//    try {", "+//      synchronized(_reduced) {", "-      }", "-    }", "-    finally { releaseReadLock(); }", "+//      }", "+//    }", "+//    finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "77f24d3abb679f9032d29a7944792778", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "92fd06b34796984853343dde64251cfdd2a0ce25", "commitAfterChange": "ad91ad9028e35ded2c6aef6b30e8459151ecae7c", "methodNumberBeforeChange": 79, "methodNumberAfterChange": 80, "signatureBeforeChange": "          public void run()", "signatureAfterChange": "     public void run()", "diff": ["+    /** Inserts chars in reduced model and move location to end of insert; cache has already been selectively cleared. */", "-      // adjust location to the start of the text to input", "-      acquireReadLock();", "-      try {", "-        synchronized(_reduced) {", "-          _reduced.move(_offset - _currentLocation);  ", "-          int len = _text.length();", "-          // loop over string, inserting characters into reduced model", "-          for (int i = 0; i < len; i++) {", "-            char curChar = _text.charAt(i);", "-            _addCharToReducedModel(curChar);", "-          }", "-          _currentLocation = _offset + len;  // current location is at end of inserted string", "-          _styleChanged();", "-        }", "+      ", "+//      acquireReadLock();  // Unnecessary! exclusive readLock should already be held!", "+//      try {", "+//        synchronized(_reduced) {  // Unnecessary?  no other thread should hold a readLock", "+      _reduced.move(_offset - _currentLocation);  ", "+      int len = _text.length();", "+      // loop over string, inserting characters into reduced model", "+      for (int i = 0; i < len; i++) {", "+        char curChar = _text.charAt(i);", "+        _addCharToReducedModel(curChar);", "-      finally { releaseReadLock(); }", "+      _currentLocation = _offset + len;  // current location is at end of inserted string", "+      _styleChanged();", "+//        }", "+//      }", "+//      finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8eb801796f8a316ac8d220f9cca5bf73", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "commitAfterChange": "74a15c017d574b2ee2a0cdeaaedeea00825a0c5e", "methodNumberBeforeChange": 29, "methodNumberAfterChange": 29, "signatureBeforeChange": "   public int balanceForward()", "signatureAfterChange": "   public int balanceForward()", "diff": ["-    acquireReadLock();", "-    try { synchronized(_reduced) { return _balanceForward(); } }", "-    finally { releaseReadLock(); }  ", "+//    acquireReadLock();", "+//    try { ", "+//    synchronized(_reduced) { ", "+      return _balanceForward(); ", "+//    } ", "+//    }", "+//    finally { releaseReadLock(); }  "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8fe77457988a05ede6b1596e3bd5418d", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "commitAfterChange": "74a15c017d574b2ee2a0cdeaaedeea00825a0c5e", "methodNumberBeforeChange": 27, "methodNumberAfterChange": 27, "signatureBeforeChange": "   public int balanceBackward()", "signatureAfterChange": "   public int balanceBackward()", "diff": ["-  public int balanceBackward() {", "-    acquireReadLock();", "-    try { synchronized(_reduced) { return _balanceBackward(); } }", "-    finally { releaseReadLock(); }  ", "-  }", "+  public int balanceBackward() { return _balanceBackward(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9d374936dfa02c0806fa4e490b406946", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "6c31f49b491d4a01bd2ddbae62b5ee4f76d52129", "commitAfterChange": "b17c3d3d0edf27a5d35f38839287840198b5808d", "methodNumberBeforeChange": 32, "methodNumberAfterChange": 32, "signatureBeforeChange": "      public ReducedModelState getStateAtCurrent()", "signatureAfterChange": "   public ReducedModelState getStateAtCurrent()", "diff": ["-  public ReducedModelState getStateAtCurrent() {", "-    acquireReadLock();", "-    try { synchronized(_reduced) { return _reduced.getStateAtCurrent(); } }", "-    finally { releaseReadLock(); } ", "-  }", "+  /** Assumes that read lock and reduced lock are already held. */", "+  public ReducedModelState getStateAtCurrent() { return _reduced.getStateAtCurrent(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "aa0b8d1916d44ddc39ee72749250608d", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "6c31f49b491d4a01bd2ddbae62b5ee4f76d52129", "commitAfterChange": "b17c3d3d0edf27a5d35f38839287840198b5808d", "methodNumberBeforeChange": 31, "methodNumberAfterChange": 31, "signatureBeforeChange": "      public ReducedModelState stateAtRelLocation(int dist)", "signatureAfterChange": "   public ReducedModelState stateAtRelLocation(int dist)", "diff": ["-  public ReducedModelState stateAtRelLocation(int dist) {", "-    acquireReadLock();", "-    try { synchronized(_reduced) { return _reduced.moveWalkerGetState(dist); } }", "-    finally { releaseReadLock(); }  ", "-  }", "+  /** Assumes that read lock and reduced lock are already held. */", "+  public ReducedModelState stateAtRelLocation(int dist) { return _reduced.moveWalkerGetState(dist); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d26e6ffc74ec55bf3b9763c924cb9897", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "6c31f49b491d4a01bd2ddbae62b5ee4f76d52129", "commitAfterChange": "b17c3d3d0edf27a5d35f38839287840198b5808d", "methodNumberBeforeChange": 33, "methodNumberAfterChange": 33, "signatureBeforeChange": "      public void resetReducedModelLocation()", "signatureAfterChange": "   public void resetReducedModelLocation()", "diff": ["-  public void resetReducedModelLocation() {", "-    acquireReadLock();", "-    try { synchronized(_reduced) { _reduced.resetLocation(); } }", "-    finally { releaseReadLock(); } ", "-  }", "+  /** Assumes that read lock and reduced lock are already held. */", "+  public void resetReducedModelLocation() { _reduced.resetLocation(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d5995422f1078e2a28be41cb7569609d", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "b8bd7d0442cc5ba7e76504cb9896cbfabd4d129a", "commitAfterChange": "0e0a6cd0b304183c5602e4fe1c0f1a766f131ce0", "methodNumberBeforeChange": 27, "methodNumberAfterChange": 27, "signatureBeforeChange": "   public int balanceBackward()", "signatureAfterChange": "   public int balanceBackward()", "diff": ["-    acquireReadLock();", "-    try { synchronized(_reduced) { return _balanceBackward(); } }", "-    finally { releaseReadLock(); }  ", "+//    acquireReadLock();", "+//    try { ", "+//    synchronized(_reduced) { ", "+      return _balanceBackward(); ", "+//    } ", "+//    }", "+//    finally { releaseReadLock(); }  "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc7ca6630d4458ae68bc418338ed1ec2", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "commitAfterChange": "74a15c017d574b2ee2a0cdeaaedeea00825a0c5e", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": "   public void move(int dist)", "signatureAfterChange": "   public void move(int dist)", "diff": ["-  public void move(int dist) {", "-    acquireReadLock();", "-    try { synchronized(_reduced) { _move(dist); }}", "-    finally { releaseReadLock(); } ", "-  }", "+  public void move(int dist) { _move(dist);  }"]}], "num": 16398}