{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a4f2a126abcd8ee01847df1ff78f1297", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ad0ff6c9710e48274477655ac2262047", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractGlobalModel.java", "commitBeforeChange": "f1daacb1f9c546b2b765d3fc6cc41bd412931a0f", "commitAfterChange": "591ec87995880046281596623701cb5a561fc66e", "methodNumberBeforeChange": 345, "methodNumberAfterChange": 345, "signatureBeforeChange": "     private File _locateClassFile()", "signatureAfterChange": "     private File _locateClassFile()", "diff": ["+      // TODO: define in terms of GlobalModel.getClassPath()", "+      ", "-      String cp = System.getProperty(\"java.class.path\");", "-      String pathSeparator = System.getProperty(\"path.separator\");", "-      Vector<File> cpVector = new Vector<File>();", "-      int i = 0;", "-      while (i < cp.length()) {", "-        int nextSeparator = cp.indexOf(pathSeparator, i);", "-        if (nextSeparator == -1) {", "-          cpVector.add(new File(cp.substring(i, cp.length())));", "-          break;", "-        }", "-        cpVector.add(new File(cp.substring(i, nextSeparator)));", "-        i = nextSeparator + 1;", "-      }", "-      classFile = findFileInPaths(fileName, cpVector);", "+      classFile = findFileInPaths(fileName, RUNTIME_CLASS_PATH);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b8f1f3a5725f0cc1bec07feb6db40d6c", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/util/classloader/ToolsJarClassLoader.java", "commitBeforeChange": "d0895d1ac641d5855832b6d42c1c1052f9c47c9f", "commitAfterChange": "866de9caf49de77a8432a870fb62f361a127a0f1", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "   public static File[] getToolsJarFiles()", "signatureAfterChange": "   public static File[] getToolsJarFiles()", "diff": ["-    File home = new File(System.getProperty(\"java.home\"));", "+    String javaHome = System.getProperty(\"java.home\");", "+    File home = new File(javaHome);", "+    ", "+    Vector<File> files = new Vector<File>();", "+    files.addElement(new File(libDir, \"tools.jar\"));", "+    files.addElement(new File(libDir2, \"tools.jar\"));", "+    ", "+    if (javaHome.indexOf(\"Program Files\") != -1) {", "+      // Windows: JavaHome is JRE; guess where SDK is", "+      files.addElement(new File(getWindowsToolsJar(javaHome)));", "+    }", "-    return new File[] {", "-      new File(libDir, \"tools.jar\"),", "-      new File(libDir2, \"tools.jar\")", "-    };", "+    File[] fileArray = new File[files.size()];", "+    files.copyInto(fileArray);", "+    return fileArray;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ba63fcb8f15d51aea1115f40d3340e6c", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/util/classloader/ToolsJarClassLoader.java", "commitBeforeChange": "d74188241db90ffeca61708e1d5c82b1650e2c97", "commitAfterChange": "fb8a34355f8b261362a479b30a61f7a961c8b301", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "   public static File[] getToolsJarFiles()", "signatureAfterChange": "   public static File[] getToolsJarFiles()", "diff": ["-    File home = new File(javaHome);", "-    File libDir = new File(home, \"lib\");", "-    File libDir2 = new File(home.getParentFile(), \"lib\");", "-    ", "+    File home = new File(javaHome);    ", "-    files.addElement(new File(libDir, \"tools.jar\"));", "-    files.addElement(new File(libDir2, \"tools.jar\"));", "+    ", "+    // Check $JAVA_HOME/lib/tools.jar", "+    File libDir = new File(home, \"lib\");", "+    File jar = new File(libDir, \"tools.jar\");", "+    if (jar.exists()) {", "+      files.addElement(jar);", "+    }", "+    ", "+    // Check $JAVA_HOME/../lib/tools.jar", "+    File libDir2 = new File(home.getParentFile(), \"lib\");", "+    File jar2 = new File(libDir2, \"tools.jar\");", "+    if (jar2.exists()) {", "+      files.addElement(jar2);", "+    }", "-      files.addElement(new File(getWindowsToolsJar(javaHome)));", "+      File jar3 = new File(getWindowsToolsJar(javaHome));", "+      if (jar3.exists()) {", "+        files.addElement(jar3);", "+      }"]}], "num": 17411}