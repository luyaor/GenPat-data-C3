{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "fc56d85850b5f11c5daf35e0102eec31", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f7e961bc1ff0c9be4be7d83a6db4d5ba", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/DefinitionsPaneTest.java", "commitBeforeChange": "6e00bd0fe78b22f9b84f30182d050c16081947ef", "commitAfterChange": "d6801eea8d321f3e0015cdd20a1cba75837384cb", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 25, "signatureBeforeChange": "      public void testGranularUndo() throws BadLocationException", "signatureAfterChange": "      public void testGranularUndo() throws BadLocationException", "diff": ["-    DefinitionsPane definitions = _frame.getCurrentDefPane();", "-    OpenDefinitionsDocument doc = definitions.getOpenDefDocument();", "+    final DefinitionsPane definitions = _frame.getCurrentDefPane();", "+    final OpenDefinitionsDocument doc = definitions.getOpenDefDocument();", "-    assertEquals(\"Should start out empty.\", \"\",", "-                 doc.getText());", "+    assertEquals(\"Should start out empty.\", \"\",  doc.getText());", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_PRESSED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_A, KeyEvent.CHAR_UNDEFINED));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_TYPED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_UNDEFINED, 'a'));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_RELEASED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_A, KeyEvent.CHAR_UNDEFINED));", "-    definitions.setCaretPosition(doc.getLength());", "+    Utilities.invokeAndWait(new Runnable() {", "+      public void run() {", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_PRESSED, (new Date()).getTime(), 0,", "+                                                 KeyEvent.VK_A, KeyEvent.CHAR_UNDEFINED));", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_TYPED, (new Date()).getTime(), 0,", "+                                                 KeyEvent.VK_UNDEFINED, 'a'));", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_RELEASED, (new Date()).getTime(), 0,", "+                                                 KeyEvent.VK_A, KeyEvent.CHAR_UNDEFINED));", "+        definitions.setCaretPosition(doc.getLength());", "+        ", "+        // Type '!'", "+        definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                 KeyEvent.KEY_PRESSED,", "+                                                 (new Date()).getTime(),", "+                                                 0,", "+                                                 KeyEvent.VK_EXCLAMATION_MARK, KeyEvent.CHAR_UNDEFINED));", "+        definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                 KeyEvent.KEY_TYPED,", "+                                                 (new Date()).getTime(),", "+                                                 0,", "+                                                 KeyEvent.VK_UNDEFINED, '!'));", "+        definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                 KeyEvent.KEY_RELEASED,", "+                                                 (new Date()).getTime(),", "+                                                 0,", "+                                                 KeyEvent.VK_EXCLAMATION_MARK, KeyEvent.CHAR_UNDEFINED));", "+        definitions.setCaretPosition(doc.getLength());", "+        ", "+        // Type 'B'", "+        definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                 KeyEvent.KEY_PRESSED,", "+                                                 (new Date()).getTime(),", "+                                                 InputEvent.SHIFT_MASK,", "+                                                 KeyEvent.VK_B, KeyEvent.CHAR_UNDEFINED));", "+        definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                 KeyEvent.KEY_TYPED,", "+                                                 (new Date()).getTime(),", "+                                                 0,", "+                                                 KeyEvent.VK_UNDEFINED, 'B'));", "+        definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                 KeyEvent.KEY_RELEASED,", "+                                                 (new Date()).getTime(),", "+                                                 InputEvent.SHIFT_MASK,", "+                                                 KeyEvent.VK_B, KeyEvent.CHAR_UNDEFINED));", "+        definitions.setCaretPosition(doc.getLength());", "+        ", "+        // Type '9'", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_PRESSED, (new Date()).getTime(), 0,", "+                                                 KeyEvent.VK_9, KeyEvent.CHAR_UNDEFINED));", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_TYPED, (new Date()).getTime(), 0,", "+                                                 KeyEvent.VK_UNDEFINED, '9'));", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_RELEASED, (new Date()).getTime(), 0,", "+                                                 KeyEvent.VK_9, KeyEvent.CHAR_UNDEFINED));", "+        definitions.setCaretPosition(doc.getLength());", "+      } ", "+    });", "-    // Type '!'", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_PRESSED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_EXCLAMATION_MARK, KeyEvent.CHAR_UNDEFINED));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_TYPED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_UNDEFINED, '!'));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_RELEASED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_EXCLAMATION_MARK, KeyEvent.CHAR_UNDEFINED));", "-    definitions.setCaretPosition(doc.getLength());", "-    ", "-    // Type 'B'", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_PRESSED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.SHIFT_MASK,", "-                                             KeyEvent.VK_B, KeyEvent.CHAR_UNDEFINED));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_TYPED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_UNDEFINED, 'B'));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_RELEASED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.SHIFT_MASK,", "-                                             KeyEvent.VK_B, KeyEvent.CHAR_UNDEFINED));", "-    definitions.setCaretPosition(doc.getLength());", "-    ", "-    // Type '9'", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_PRESSED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_9, KeyEvent.CHAR_UNDEFINED));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_TYPED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_UNDEFINED, '9'));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_RELEASED,", "-                                             (new Date()).getTime(),", "-                                             0,", "-                                             KeyEvent.VK_9, KeyEvent.CHAR_UNDEFINED));", "-    definitions.setCaretPosition(doc.getLength());", "-    assertEquals(\"The text should have been inserted\", \"a!B9\",", "-                 doc.getText());", "+    assertEquals(\"The text should have been inserted\", \"a!B9\",  doc.getText());", "-    final KeyEvent e = new KeyEvent(definitions,", "-                                    KeyEvent.KEY_PRESSED,", "-                                    0,", "-                                    ks.getModifiers(),", "-                                    ks.getKeyCode(),", "+    final KeyEvent e = new KeyEvent(definitions, KeyEvent.KEY_PRESSED, 0, ks.getModifiers(), ks.getKeyCode(),", "-    definitions.processKeyEvent(e);", "-    //                              ks.getKeyChar());", "-    // Performs the action a", "-    //    SwingUtilities.notifyAction(a, ks, e, e.getSource(), e.getModifiers());", "-    //    doc.getUndoManager().undo();", "-    assertEquals(\"Should have undone correctly.\", \"\",", "-                 doc.getText());", "+    ", "+    Utilities.invokeAndWait(new Runnable() { public void run() { definitions.processKeyEvent(e); } });", "+  ", "+    assertEquals(\"Should have undone correctly.\", \"\", doc.getText());", "-    // Type 'Alt-B'", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_PRESSED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.ALT_MASK,", "-                                             KeyEvent.VK_Q, KeyEvent.CHAR_UNDEFINED));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_TYPED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.ALT_MASK,", "-                                             KeyEvent.VK_UNDEFINED, 'Q'));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_RELEASED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.ALT_MASK,", "-                                             KeyEvent.VK_Q, KeyEvent.CHAR_UNDEFINED));", "+    // What does the following code test?  There are no assertions!  -- Corky 5/9/06", "-    /*", "-     * If the bug is not fixed in DefinitionsPane.processKeyEvent, this test", "-     * will not fail because the exception is thrown in another thread.", "-     * However, the stack trace will get printed onto the console.  I don't", "-     * know how to fix this problem in case someone unfixes the bug.", "-     */", "-    SwingUtilities.notifyAction(a, ks, e, e.getSource(), e.getModifiers());", "+    // Type 'Alt-B'", "+     Utilities.invokeAndWait(new Runnable() {", "+       public void run() {", "+         definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                  KeyEvent.KEY_PRESSED,", "+                                                  (new Date()).getTime(),", "+                                                  InputEvent.ALT_MASK,", "+                                                  KeyEvent.VK_Q, KeyEvent.CHAR_UNDEFINED));", "+         definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                  KeyEvent.KEY_TYPED,", "+                                                  (new Date()).getTime(),", "+                                                  InputEvent.ALT_MASK,", "+                                                  KeyEvent.VK_UNDEFINED, 'Q'));", "+         definitions.processKeyEvent(new KeyEvent(definitions,", "+                                                  KeyEvent.KEY_RELEASED,", "+                                                  (new Date()).getTime(),", "+                                                  InputEvent.ALT_MASK,", "+                                                  KeyEvent.VK_Q, KeyEvent.CHAR_UNDEFINED));", "+         ", "+         /*", "+          * If the bug is not fixed in DefinitionsPane.processKeyEvent, this test", "+          * will not fail because the exception is thrown in another thread.", "+          * However, the stack trace will get printed onto the console.  I don't", "+          * know how to fix this problem in case someone unfixes the bug.", "+          */", "+         SwingUtilities.notifyAction(a, ks, e, e.getSource(), e.getModifiers());", "+       }", "+     });", "+     ", "+     _log.log(\"testGranularUndo completed\");"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fca11cff7162029843bbea499e21098e", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/DefinitionsPaneTest.java", "commitBeforeChange": "6e00bd0fe78b22f9b84f30182d050c16081947ef", "commitAfterChange": "d6801eea8d321f3e0015cdd20a1cba75837384cb", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 4, "signatureBeforeChange": "   public void testShiftBackspace() throws BadLocationException", "signatureAfterChange": "   public void testShiftBackspace() throws BadLocationException", "diff": ["-    DefinitionsPane definitions = _frame.getCurrentDefPane();", "-    OpenDefinitionsDocument doc = definitions.getOpenDefDocument();", "+//    _log.log(\"Starting testShiftBackSpace\");", "+    final DefinitionsPane definitions = _frame.getCurrentDefPane();", "+    final OpenDefinitionsDocument doc = definitions.getOpenDefDocument();", "-    doc.insertString(0, \"test\", null);", "-    definitions.setCaretPosition(4);", "-    int shiftBackspaceCode =", "-      OptionConstants.KEY_DELETE_PREVIOUS.getDefault().getKeyCode();", "-    // The following is the sequence of key events for shift+backspace", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_PRESSED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.SHIFT_MASK,", "-                                             shiftBackspaceCode,", "-                                             KeyEvent.CHAR_UNDEFINED));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_RELEASED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.SHIFT_MASK,", "-                                             shiftBackspaceCode,", "-                                             KeyEvent.CHAR_UNDEFINED));", "+    Utilities.invokeAndWait(new Runnable() { ", "+      public void run() { ", "+        doc.append(\"test\", null);", "+        definitions.setCaretPosition(4);", "+    ", "+        int shiftBackspaceCode = OptionConstants.KEY_DELETE_PREVIOUS.getDefault().getKeyCode();", "+        ", "+        // The following is the sequence of key events for shift+backspace", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_PRESSED, (new Date()).getTime(),", "+                                                 InputEvent.SHIFT_MASK, shiftBackspaceCode, KeyEvent.CHAR_UNDEFINED));", "+        _log.log(\"first key event processed\");", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_RELEASED, (new Date()).getTime(),", "+                                                 InputEvent.SHIFT_MASK, shiftBackspaceCode, KeyEvent.CHAR_UNDEFINED));", "+        _log.log(\"second key event processed\");", "+      }", "+    });", "+    _log.log(\"Halfway through testShiftBackspace\");", "-    int shiftDeleteCode =", "-      OptionConstants.KEY_DELETE_NEXT.getDefault().getKeyCode();", "-    definitions.setCaretPosition(1);", "-    // The following is the sequence of key events for shift+delete", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_PRESSED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.SHIFT_MASK,", "-                                             shiftDeleteCode,", "-                                             KeyEvent.CHAR_UNDEFINED));", "-    definitions.processKeyEvent(new KeyEvent(definitions,", "-                                             KeyEvent.KEY_RELEASED,", "-                                             (new Date()).getTime(),", "-                                             InputEvent.SHIFT_MASK,", "-                                             shiftDeleteCode,", "-                                             KeyEvent.CHAR_UNDEFINED));", "+    Utilities.invokeAndWait(new Runnable() { ", "+      public void run() { ", "+        int shiftDeleteCode =", "+          OptionConstants.KEY_DELETE_NEXT.getDefault().getKeyCode();", "+        definitions.setCaretPosition(1);", "+        // The following is the sequence of key events for shift+delete", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_PRESSED, (new Date()).getTime(), InputEvent.SHIFT_MASK,", "+                                                 shiftDeleteCode, KeyEvent.CHAR_UNDEFINED));", "+        definitions.processKeyEvent(new KeyEvent(definitions, KeyEvent.KEY_RELEASED, (new Date()).getTime(), InputEvent.SHIFT_MASK,", "+                                                 shiftDeleteCode, KeyEvent.CHAR_UNDEFINED));", "+      }", "+    });", "+    ", "+    _log.log(\"testShiftBackSpace completed\");"]}], "num": 13579}