{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "dfec26c7d0f3ca2d044ddcef5122a3a1", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8792bb5d5e138df5c2e533325fb8c829", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "a8db062e8dfd667df6324c059f7a6725afc99a1b", "commitAfterChange": "35da9b77b7d75aca3d6277e27e3ba3dc86f3eaa9", "methodNumberBeforeChange": 39, "methodNumberAfterChange": 39, "signatureBeforeChange": "   public void indentLines(int selStart, int selEnd, int reason, ProgressMonitor pm)     throws OperationCanceledException", "signatureAfterChange": "   public void indentLines(int selStart, int selEnd, int reason, ProgressMonitor pm)     throws OperationCanceledException", "diff": ["-    // throwErrorHuh();", "-    //long start = System.currentTimeMillis();", "+ ", "+    // Begins a compound edit.", "+    // int key = startCompoundEdit(); // commented out in connection with the FrenchKeyBoard Fix", "+    ", "+    writeLock();", "-      // Begins a compound edit.", "-     // int key = startCompoundEdit(); // commented out in connection with the FrenchKeyBoard Fix", "-      ", "-      if (selStart == selEnd) {", "-        Position oldCurrentPosition = createPosition(_currentLocation);", "-        // Indent, updating current location if necessary.", "-        if (_indentLine(reason)) {", "-          //int caretPos = getCaretPosition();", "-          //_doc().setCurrentLocation(caretPos);", "-          setCurrentLocation(oldCurrentPosition.getOffset());", "-          int space = getWhiteSpace();", "-          move(space);", "-          //setCaretPosition(caretPos + space);", "+      synchronized (_reduced) {", "+        if (selStart == selEnd) {  // single line to indent", "+          Position oldCurrentPosition = createPosition(_currentLocation);", "+          // Indent, updating current location if necessary.", "+          if (_indentLine(reason)) {", "+            setCurrentLocation(oldCurrentPosition.getOffset());", "+            int space = getWhiteSpace();", "+            move(space);", "+          }", "+        else _indentBlock(selStart, selEnd, reason, pm);", "-      else _indentBlock(selStart, selEnd, reason, pm);", "-      // Ends the compound edit.", "-      //endCompoundEdit(key);   //Changed to endLastCompoundEdit in connection with the FrenchKeyBoard Fix", "-      endLastCompoundEdit();", "-    catch (BadLocationException e) { throw new UnexpectedException(e); }", "+    catch (Throwable t) { throw new UnexpectedException(t); }", "+    finally { writeUnlock(); } ", "-    //long end = System.currentTimeMillis();", "-    //DrJava.consoleOut().println(\"Elapsed Time (sec): \" + ((end-start)/1000));", "-    //DrJava.consoleOut().println(\"   Cache size: \" + _helperCache.size());", "-    //DrJava.consoleOut().println(\"   Cache History size: \" + _helperCacheHistory.size());", "-    ", "-    //DrJava.consoleOut().println(\"   Longest: \" + maxHelpDelay + \"ms from \" + maxKey);", "-    //maxHelpDelay = 0;  maxKey = \"none\";", "-    ", "+    // Ends the compound edit.", "+    //endCompoundEdit(key);   //Changed to endLastCompoundEdit in connection with the FrenchKeyBoard Fix", "+    endLastCompoundEdit();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8a562e3860f6334f628c4b91d751e663", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/DefinitionsDocument.java", "commitBeforeChange": "4128354c8729a4a5df76a578d72103228145ae8d", "commitAfterChange": "aa287bbb1c9881659edc121fbb5e7531149b5808", "methodNumberBeforeChange": 76, "methodNumberAfterChange": 53, "signatureBeforeChange": "   public void indentLines(int selStart, int selEnd,                           int reason, ProgressMonitor pm)       throws OperationCanceledException", "signatureAfterChange": "      protected int startCompoundEdit()", "diff": ["-   */", "-  public void indentLines(int selStart, int selEnd,", "-                          int reason, ProgressMonitor pm)", "-      throws OperationCanceledException {", "-    throwErrorHuh();", "-    //long start = System.currentTimeMillis();", "-    try {", "-      // Begins a compound edit.", "-      int key = _undoManager.startCompoundEdit();", "-", "-      if (selStart == selEnd) {", "-        Position oldCurrentPosition = createPosition(_currentLocation);", "-        // Indent, updating current location if necessary.", "-        if (_indentLine(reason)) {", "-          //int caretPos = getCaretPosition();", "-          //_doc().setCurrentLocation(caretPos);", "-          setCurrentLocation(oldCurrentPosition.getOffset());", "-          int space = getWhiteSpace();", "-          move(space);", "-          //setCaretPosition(caretPos + space);", "-        }", "-      }", "-      else {", "-        _indentBlock(selStart, selEnd, reason, pm);", "-      }", "-      // Ends the compound edit.", "-      _undoManager.endCompoundEdit(key);", "-    }", "-    catch (BadLocationException e) {", "-      throw new UnexpectedException(e);", "-    }", "-", "-    //long end = System.currentTimeMillis();", "-    //DrJava.consoleOut().println(\"Elapsed Time (sec): \" + ((end-start)/1000));", "-    //DrJava.consoleOut().println(\"   Cache size: \" + _helperCache.size());", "-    //DrJava.consoleOut().println(\"   Cache History size: \" + _helperCacheHistory.size());", "-", "-    //DrJava.consoleOut().println(\"   Longest: \" + maxHelpDelay + \"ms from \" + maxKey);", "-    //maxHelpDelay = 0;  maxKey = \"none\";", "-", "-  }", "+  protected int startCompoundEdit() {", "+    return _undoManager.startCompoundEdit();", "+  }"]}], "num": 22463}