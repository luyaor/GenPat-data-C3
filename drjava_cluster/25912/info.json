{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "745cdd4706677b2be33cc4adaf9f7d23", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1f6701e7ab88b38c1294ff8482ac70a6", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/JUnitPanel.java", "commitBeforeChange": "1313de8815d48e0a1c60eb5bee6900b6b7af3993", "commitAfterChange": "802c4acbf71daa5d149dbcd67d1f360241574951", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 18, "signatureBeforeChange": "     public void testStarted(String name)", "signatureAfterChange": "     public synchronized void testStarted(String name)", "diff": ["-    public void testStarted(String name) {", "-//      Document doc = getDocument();", "-//      try {", "-//        doc.insertString(doc.getLength(),", "-//                         \"  \" + name,", "-//                         NORMAL_ATTRIBUTES);", "-//      }", "-//      catch (BadLocationException ble) {", "-//        // Inserting at end, shouldn't happen", "-//        throw new UnexpectedException(ble);", "-//      }", "+    public synchronized void testStarted(String name) {", "+      String testName = _getTestFromName(name);", "+      String className = _getClassFromName(name);", "+      String fullName = className + \".\" + testName;", "+      if (fullName.equals(JUNIT_WARNING)) {", "+        return;", "+      }", "+      Document doc = getDocument();", "+      int index = doc.getLength();", "+      ", "+      try {", "+        // Insert the classname if it has changed", "+        if (!className.equals(_runningTestName)) {", "+          _runningTestName = className;", "+          doc.insertString(index, \"  \" + className + \"\\n\", NORMAL_ATTRIBUTES);", "+          index = doc.getLength();", "+        }", "+        ", "+        // Insert the test name, remembering its position", "+        doc.insertString(index, \"    \", NORMAL_ATTRIBUTES);", "+        index = doc.getLength();", "+        doc.insertString(index, testName + \"\\n\", NORMAL_ATTRIBUTES);", "+        Position pos = doc.createPosition(index);", "+        _runningTestNamePositions.put(fullName, pos);", "+        setCaretPosition(index);", "+      }", "+      catch (BadLocationException ble) {", "+        // Inserting at end, shouldn't happen", "+        throw new UnexpectedException(ble);", "+      }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f1811a4947333e1f0234169c5284cea3", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/JUnitPanel.java", "commitBeforeChange": "1313de8815d48e0a1c60eb5bee6900b6b7af3993", "commitAfterChange": "802c4acbf71daa5d149dbcd67d1f360241574951", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 19, "signatureBeforeChange": "     public void testEnded(String name, boolean wasSuccessful, boolean causedError)", "signatureAfterChange": "     public synchronized void testEnded(String name, boolean wasSuccessful, boolean causedError)", "diff": ["-    public void testEnded(String name, boolean wasSuccessful, boolean causedError) {", "-//      Document doc = getDocument();", "-//      String status = \"ok\";", "-//      if (!wasSuccessful) {", "-//        status = (causedError) ? \"error\" : \"failed\";", "-//      }", "-//      try {", "-//        doc.insertString(doc.getLength(),", "-//                         \"  [\" + status + \"]\\n\",", "-//                         NORMAL_ATTRIBUTES);", "-//      }", "-//      catch (BadLocationException ble) {", "-//        // Inserting at end, shouldn't happen", "-//        throw new UnexpectedException(ble);", "-//      }", "+    public synchronized void testEnded(String name, boolean wasSuccessful, boolean causedError) {", "+      String testName = _getTestFromName(name);", "+      String fullName = _getClassFromName(name) + \".\" + testName;", "+      if (fullName.equals(JUNIT_WARNING)) {", "+        return;", "+      }", "+      Document doc = getDocument();", "+      Position namePos = _runningTestNamePositions.get(fullName);", "+      AttributeSet set;", "+      if (!wasSuccessful || causedError) {", "+        set = TEST_FAIL_ATTRIBUTES;", "+      }", "+      else {", "+        set = TEST_PASS_ATTRIBUTES;", "+      }", "+      if (namePos != null) {", "+        int index = namePos.getOffset();", "+        int length = testName.length();", "+        if (doc instanceof StyledDocument) {", "+          ((StyledDocument)doc).setCharacterAttributes(index, length, set, false);", "+        }", "+      }"]}], "num": 25912}