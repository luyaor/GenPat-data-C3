{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "677c37ee4af99bfa2f4b138323197542", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "14cbfe3ae4eeeb5dc56b0f33b511fec1", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/config/VectorAbsRelFileOptionComponent.java", "commitBeforeChange": "b59ea5c5062a947f96790df7fe854009e693434a", "commitAfterChange": "51e686ba41ead06ef0f1c4bec2b00eaf247dbe80", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 15, "signatureBeforeChange": "\r   public void chooseFile()", "signatureAfterChange": "   public void chooseFile()", "diff": ["-  /** Shows a file chooser for adding a file to the element. */\r", "-  public void chooseFile() {\r", "-    File selection = (File) _list.getSelectedValue();\r", "-    if (selection != null) {\r", "-      File parent = selection.getParentFile();\r", "-      if (parent != null) {\r", "-        _jfc.setCurrentDirectory(parent);\r", "-      }\r", "-    }\r", "-    else {\r", "-      if (_baseDir!=null) { _jfc.setCurrentDirectory(_baseDir); }\r", "-    }\r", "-\r", "-    _jfc.setFileFilter(_fileFilter);\r", "-\r", "-    File[] c = null;\r", "-    int returnValue = _jfc.showDialog(_parent, null);\r", "-    if (returnValue == JFileChooser.APPROVE_OPTION) {\r", "-      c = _jfc.getSelectedFiles();\r", "-    }\r", "-    if (c != null) {\r", "-      for(int i = 0; i < c.length; i++) {\r", "-        _listModel.addElement(new AbsRelFile(c[i]));\r", "-      }\r", "-    }\r", "-  }\r", "+  /** Shows a file chooser for adding a file to the element. */", "+  public void chooseFile() {", "+    int[] rows = _table.getSelectedRows();", "+    File selection = (rows.length==1)?_data.get(rows[0]):null;", "+    if (selection != null) {", "+      File parent = selection.getParentFile();", "+      if (parent != null) {", "+        _jfc.setCurrentDirectory(parent);", "+      }", "+    }", "+    else {", "+      if (_baseDir!=null) { _jfc.setCurrentDirectory(_baseDir); }", "+    }", "+", "+    _jfc.setFileFilter(_fileFilter);", "+", "+    File[] c = null;", "+    int returnValue = _jfc.showDialog(_parent, null);", "+    if (returnValue == JFileChooser.APPROVE_OPTION) {", "+      c = _jfc.getSelectedFiles();", "+    }", "+    if (c != null) {", "+      _table.getSelectionModel().clearSelection();", "+      for(int i = 0; i < c.length; i++) {", "+        _addValue(new AbsRelFile(c[i]));", "+      }", "+    }", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9e0d5d21b633f1434139d5620295cfc7", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/config/VectorOptionComponent.java", "commitBeforeChange": "af1d1f7c09d0639a913d397da4b034d6533c94dd", "commitAfterChange": "b69aef73e5b8d21dd4d2a656e29a8bb8886fe618", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "   public void chooseFile()", "signatureAfterChange": "   public void chooseFile()", "diff": ["-    File workDir = DrJava.getConfig().getSetting(WORKING_DIRECTORY);", "-        ", "-    if (workDir == FileOption.NULL_FILE) {", "-      workDir = new File( System.getProperty(\"user.dir\"));", "+    File selection = (File) _list.getSelectedValue();", "+    if (selection != null) {", "+      File parent = selection.getParentFile();", "+      if (parent != null) {", "+        _jfc.setCurrentDirectory(parent);", "+      }", "-    if (workDir.isFile() && workDir.getParent() != null) {", "-      workDir = workDir.getParentFile();", "+", "+    _jfc.setFileFilter(_fileFilter);", "+", "+    File[] c = null;", "+    int returnValue = _jfc.showDialog(_parent, null);", "+    if (returnValue == JFileChooser.APPROVE_OPTION) {", "+      c = _jfc.getSelectedFiles();", "-    JFileChooser jfc = new JFileChooser(workDir);", "-    jfc.setDialogTitle(\"Select\");", "-    jfc.setApproveButtonText(\"Select\");", "-    jfc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);", "-    jfc.setFileFilter(_fileFilter);", "-    File c = null;", "-    int returnValue = jfc.showDialog(_parent,", "-                                     null);", "-    if (returnValue == JFileChooser.APPROVE_OPTION) ", "-      c = jfc.getSelectedFile();", "-      _listModel.addElement(c);", "+      for(int i = 0; i < c.length; i++) {", "+        _listModel.addElement(c[i]);", "+      }", "-    "]}], "num": 14799}