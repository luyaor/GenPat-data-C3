{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "66ee3ca1b5adb0b7bcf37ee40d8401d1", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "28f62570e24af66a09eb8e231f4b018d", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "634bad3816e5a89c71c174f08f33c3f80727cfeb", "commitAfterChange": "d1ffac675273323f7a1b9777462d16896d09a1af", "methodNumberBeforeChange": 374, "methodNumberAfterChange": 376, "signatureBeforeChange": "          public void fileSaved(OpenDefinitionsDocument doc)", "signatureAfterChange": "          public void fileSaved(final OpenDefinitionsDocument doc)", "diff": ["-    public void fileSaved(OpenDefinitionsDocument doc) {", "+    public void fileSaved(final OpenDefinitionsDocument doc) {", "-      doc.documentSaved();  // used to update the document cache", "-      _saveAction.setEnabled(false);", "-      _revertAction.setEnabled(true);", "-      updateFileTitle();", "-      _currentDefPane.requestFocusInWindow();", "-      try {", "-        File f = doc.getFile();", "-        if (! _model.isProjectFile(f)) _recentFileManager.updateOpenFiles(f);", "-      }", "-      catch (IllegalStateException ise) { throw new UnexpectedException(ise); }", "-      // Impossible because saved => has a file", "-      ", "-      catch (FileMovedException fme) {", "-        File f = fme.getFile();", "-        // Recover, show it in the list anyway", "-        if (! _model.isProjectFile(f)) _recentFileManager.updateOpenFiles(f);", "-      }", "-      // Check class file sync status, in case file was renamed", "-      if (inDebugMode()) _updateDebugStatus();", "+      Utilities.invokeLater(new Runnable() {", "+        public void run() {", "+          doc.documentSaved();  // used to update the document cache", "+          _saveAction.setEnabled(false);", "+          _revertAction.setEnabled(true);", "+          updateFileTitle();", "+          _currentDefPane.requestFocusInWindow();", "+          try {", "+            File f = doc.getFile();", "+            if (! _model.isProjectFile(f)) _recentFileManager.updateOpenFiles(f);", "+          }", "+          catch (IllegalStateException ise) { throw new UnexpectedException(ise); }", "+          // Impossible because saved => has a file", "+          ", "+          catch (FileMovedException fme) {", "+            File f = fme.getFile();", "+            // Recover, show it in the list anyway", "+            if (! _model.isProjectFile(f)) _recentFileManager.updateOpenFiles(f);", "+          }", "+          // Check class file sync status, in case file was renamed", "+          if (inDebugMode()) _updateDebugStatus();", "+        }", "+      });"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b518ba04b1011a4d27e4c9a0e0f73c56", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "ea54d5918e0742266441f70659af74f35bca898d", "commitAfterChange": "e6ef9e23d624990cf9fd00ec857466a046415b6a", "methodNumberBeforeChange": 239, "methodNumberAfterChange": 239, "signatureBeforeChange": "   public void open(FileOpenSelector openSelector)", "signatureAfterChange": "   public void open(FileOpenSelector openSelector)", "diff": ["-      OpenDefinitionsDocument openDoc = aoe.getOpenDocument();", "-      String fileName;", "-      try { fileName = openDoc.getFile().getName(); }", "-      catch (IllegalStateException ise) {", "-        // Can't happen: this open document must have a file", "-        throw new UnexpectedException(ise);", "-      }", "-      catch (FileMovedException fme) {", "-        // File was deleted, but use the same name anyway", "-        fileName = fme.getFile().getName();", "-      }", "-      ", "-      // Always switch to doc", "-      _model.setActiveDocument(openDoc);", "-      ", "-      // Prompt to revert if modified", "-      if (openDoc.isModifiedSinceSave()) {", "-        String title = \"Revert to Saved?\";", "-        String message = fileName + \" is already open and modified.\\n\" +", "-          \"Would you like to revert to the version on disk?\\n\";", "-        int choice = JOptionPane.showConfirmDialog(this, message, title, JOptionPane.YES_NO_OPTION);", "-        if (choice == JOptionPane.YES_OPTION) _revert();", "-      }", "-      try {", "-        File f = openDoc.getFile();", "-        if (! _model.inProject(f)) _recentFileManager.updateOpenFiles(f);", "-      }", "-      catch (IllegalStateException ise) {", "-        // Impossible: saved => has a file", "-        throw new UnexpectedException(ise);", "-      }", "-      catch (FileMovedException fme) {", "-        File f = fme.getFile();", "-        // Recover, show it in the list anyway", "-        if (! _model.inProject(f))", "-          _recentFileManager.updateOpenFiles(f);", "+      OpenDefinitionsDocument[] openDocs = aoe.getOpenDocuments();", "+      for(OpenDefinitionsDocument openDoc : openDocs) {", "+        String fileName;", "+        try { fileName = openDoc.getFile().getName(); }", "+        catch (IllegalStateException ise) {", "+          // Can't happen: this open document must have a file", "+          throw new UnexpectedException(ise);", "+        }", "+        catch (FileMovedException fme) {", "+          // File was deleted, but use the same name anyway", "+          fileName = fme.getFile().getName();", "+        }", "+        ", "+        try {", "+          File f = openDoc.getFile();", "+          if (! _model.inProject(f)) _recentFileManager.updateOpenFiles(f);", "+        }", "+        catch (IllegalStateException ise) {", "+          // Impossible: saved => has a file", "+          throw new UnexpectedException(ise);", "+        }", "+        catch (FileMovedException fme) {", "+          File f = fme.getFile();", "+          // Recover, show it in the list anyway", "+          if (! _model.inProject(f))", "+            _recentFileManager.updateOpenFiles(f);", "+        }"]}], "num": 24512}