{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2198f1433ee3859157aa62c0264f92ec", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5cee7b3e17f88e8af073459006f4bbd9", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "f01da19eef180264e50ee938eb35e69c8d092f3e", "commitAfterChange": "fbaecba32a4936f7aab208313b312f73181698a7", "methodNumberBeforeChange": 189, "methodNumberAfterChange": 189, "signatureBeforeChange": "   private void _close()", "signatureAfterChange": "   private void _close()", "diff": ["-    _model.closeFile(_model.getActiveDocument());", "+    ", "+    try{", "+      if(_model.getActiveDocument().isAuxiliaryFile() || ", "+         _model.getActiveDocument().isProjectFile()){", "+        String text = \"Closing this file will permanently remove it from the current project.\" + ", "+          \"\\nAre you sure that you want to close this file?\";", "+        ", "+        int rc = JOptionPane.showConfirmDialog(MainFrame.this,", "+                                             text,", "+                                             \"Close \" + ", "+                                               _model.getActiveDocument().getFile().getName() + ", "+                                               \"?\",", "+                                             JOptionPane.YES_NO_OPTION);", "+        if(rc != JOptionPane.YES_OPTION)", "+          return;", "+      }", "+      ", "+      //Either this is an external file or user actually wants to close it", "+      _model.closeFile(_model.getActiveDocument());", "+        ", "+    }", "+    catch(FileMovedException e){", "+      //Not sure what exactly should be done.", "+      //For now, let's just say the error is unexpected.", "+      throw new UnexpectedException(e);", "+    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "de8993b7c8c6fa665eef437cd3824ce1", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "b555b0cfcc7bbb9f082899ce815305f8a985343e", "commitAfterChange": "aafaf7b848d738e58eee48a6cbc4b800c8027685", "methodNumberBeforeChange": 219, "methodNumberAfterChange": 219, "signatureBeforeChange": "   private void _close()", "signatureAfterChange": "   private void _close()", "diff": ["-      String filename = null;", "+      String fileName = null;", "-        if (doc.isUntitled()) filename = \"File\";", "-        else filename = _model.getActiveDocument().getFile().getName();", "+        if (doc.isUntitled()) fileName = \"File\";", "+        else fileName = _model.getActiveDocument().getFile().getName();", "-      catch(FileMovedException e) { filename = e.getFile().getName(); }", "+      catch(FileMovedException e) { fileName = e.getFile().getName(); }", "-      int rc = JOptionPane.showOptionDialog(MainFrame.this,", "-                                            text,", "-                                            \"Close \" + filename + \"?\",", "-                                            JOptionPane.YES_NO_OPTION,", "-                                            JOptionPane.QUESTION_MESSAGE,", "-                                            null,", "-                                            options,", "-                                            options[1]);", "+      int rc = ", "+        JOptionPane.showOptionDialog(MainFrame.this, text,\"Close \" + fileName + \"?\", JOptionPane.YES_NO_OPTION,", "+                                     JOptionPane.QUESTION_MESSAGE, null, options, options[1]);"]}], "num": 22166}