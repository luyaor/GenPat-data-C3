{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "653df4006d23e4c007a188075f77b75d", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "35f6d90523d32930abb543ff78be3704", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "dynamicjava/src/koala/dynamicjava/interpreter/AbstractTypeChecker.java", "commitBeforeChange": "93cff9492f5f66f78081d1bfed6f05eaa775f999", "commitAfterChange": "fb4768f0a5915f88272f3d532585a4203c452f84", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "   public Class<?> visit(SwitchStatement node)", "signatureAfterChange": "   public Class<?> visit(SwitchStatement node)", "diff": ["-    // Visits the components of this node", "-    Expression exp = node.getSelector();", "-    Class<?> c = exp.acceptVisitor(this);", "-    if (c != char.class      && c != byte.class && c != short.class && c != int.class  && ", "-        c != Character.class && c != Byte.class && c != Short.class && c != Integer.class) {", "-      node.setProperty(NodeProperties.ERROR_STRINGS,", "-                       new String[] { c.getName() });", "-      throw new ExecutionError(\"selector.type\", node);", "-    }", "-    // unbox it if needed", "-    if (c == Character.class || c == Byte.class || c == Short.class || c == Integer.class) {", "-      node.setSelector(_unbox(exp, c));", "-    }", "-    ", "-    // Check the type of the case labels", "-    Iterator<SwitchBlock> it = node.getBindings().iterator();", "-    while (it.hasNext()) {", "-      SwitchBlock sb = it.next();", "-      sb.acceptVisitor(this);", "-      exp = sb.getExpression();", "-      if (exp != null) {", "-        Class<?> lc = NodeProperties.getType(exp);", "-        if (lc != char.class &&  lc != byte.class &&", "-            lc != short.class && lc != int.class) {", "-          node.setProperty(NodeProperties.ERROR_STRINGS,", "-                           new String[] { lc.getName() });", "-          throw new ExecutionError(\"switch.label.type\", node);", "-        }", "-        if (c != lc) {", "-          Number n = null;", "-          if (exp.hasProperty(NodeProperties.VALUE)) {", "-            Object cst = exp.getProperty(NodeProperties.VALUE);", "-            if (lc == char.class) {", "-              n = new Integer(((Character)cst).charValue());", "-            } else {", "-              n = (Number)cst;", "-            }", "+    try {", "+      // Visits the components of this node", "+      Expression exp = node.getSelector();", "+      Class<?> c = exp.acceptVisitor(this);", "+      if (c != char.class      && c != byte.class && c != short.class && c != int.class  && ", "+          c != Character.class && c != Byte.class && c != Short.class && c != Integer.class &&", "+          (TigerUtilities.isTigerEnabled() && (c.getSuperclass() != Class.forName(\"java.lang.Enum\")))) {", "+        //!TigerUtilities.isEnum(c) ) {", "+        node.setProperty(NodeProperties.ERROR_STRINGS,", "+                         new String[] { c.getName() });", "+        throw new ExecutionError(\"selector.type\", node);", "+      }", "+      // unbox it if needed", "+      if (c == Character.class || c == Byte.class || c == Short.class || c == Integer.class) {", "+        node.setSelector(_unbox(exp, c));", "+      }", "+      ", "+      // Check the type of the case labels", "+      Iterator<SwitchBlock> it = node.getBindings().iterator();", "+      while (it.hasNext()) {", "+        SwitchBlock sb = it.next();", "+        sb.acceptVisitor(this);", "+        exp = sb.getExpression();", "+        if (exp != null) {", "+          Class<?> lc = NodeProperties.getType(exp);", "+          if (lc != char.class &&  lc != byte.class &&", "+              lc != short.class && lc != int.class &&", "+              (TigerUtilities.isTigerEnabled() && (lc.getSuperclass() != Class.forName(\"java.lang.Enum\")))) {", "+            //!TigerUtilities.isEnum(lc)) {", "+            node.setProperty(NodeProperties.ERROR_STRINGS,", "+                             new String[] { lc.getName() });", "+            throw new ExecutionError(\"switch.label.type\", node);", "-          if (c == byte.class) {", "+          if (c != lc) {", "+            Number n = null;", "-              if (n.byteValue() != n.intValue()) {", "-                node.setProperty(NodeProperties.ERROR_STRINGS,", "-                                 new String[] { c.getName() });", "-                throw new ExecutionError", "-                  (\"switch.label.type\", node);", "+              Object cst = exp.getProperty(NodeProperties.VALUE);", "+              if (lc == char.class) {", "+                n = new Integer(((Character)cst).charValue());", "+              } else {", "+                n = (Number)cst;", "-            } else {", "-              throw new ExecutionError(\"switch.label.type\", node);", "-          } else if (c == short.class || c == char.class) {", "-            if (exp.hasProperty(NodeProperties.VALUE)) {", "-              if (n.shortValue() != n.intValue()) {", "+            if (c == byte.class) {", "+              if (exp.hasProperty(NodeProperties.VALUE)) {", "+                if (n.byteValue() != n.intValue()) {", "+                  node.setProperty(NodeProperties.ERROR_STRINGS,", "+                                   new String[] { c.getName() });", "+                  throw new ExecutionError", "+                    (\"switch.label.type\", node);", "+                }", "+              } else {", "+                throw new ExecutionError(\"switch.label.type\", node);", "+              }", "+            } else if (c == short.class || c == char.class) {", "+              if (exp.hasProperty(NodeProperties.VALUE)) {", "+                if (n.shortValue() != n.intValue()) {", "+                  node.setProperty(NodeProperties.ERROR_STRINGS,", "+                                   new String[] { c.getName() });", "+                  throw new ExecutionError", "+                    (\"switch.label.type\", node);", "+                }", "+              } else if (lc == int.class) {", "-                throw new ExecutionError", "-                  (\"switch.label.type\", node);", "+                throw new ExecutionError(\"switch.label.type\", node);", "-            } else if (lc == int.class) {", "-              node.setProperty(NodeProperties.ERROR_STRINGS,", "-                               new String[] { c.getName() });", "-              throw new ExecutionError(\"switch.label.type\", node);", "+    } ", "+    // this try/catch block should in fact not be there, but to use", "+    // TigerUtilities.isEnum(c) instead if the value of the ENUM flag", "+    // was known (see 2 commented lines above)", "+    catch(ClassNotFoundException e){", "+      throw new ExecutionError(\"Tiger is enabled, but cannot find class java.lang.Enum! Please contact the DynamicJava/DrJava team (javaplt@cs.rice.edu).\");"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6a1a09bc6c00cf7e8f27ad049763c72b", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "dynamicjava/src/koala/dynamicjava/interpreter/AbstractTypeChecker.java", "commitBeforeChange": "66067a3f1d3a007b2ddad388dba56bb3c6f9df80", "commitAfterChange": "81d6db8320cf4667127c44e5b1de134b58b6f3dc", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "   public Class<?> visit(SwitchStatement node)", "signatureAfterChange": "   public Class<?> visit(SwitchStatement node)", "diff": ["-    try {", "-      // Visits the components of this node", "-      Expression exp = node.getSelector();", "-      Class<?> c = exp.acceptVisitor(this);", "-      if (c != char.class      && c != byte.class && c != short.class && c != int.class  && ", "-          c != Character.class && c != Byte.class && c != Short.class && c != Integer.class &&", "-          (TigerUtilities.isTigerEnabled() && (c.getSuperclass() != Class.forName(\"java.lang.Enum\")))) {", "-        //!TigerUtilities.isEnum(c) ) {", "-        node.setProperty(NodeProperties.ERROR_STRINGS,", "-                         new String[] { c.getName() });", "-        throw new ExecutionError(\"selector.type\", node);", "-      }", "-      // unbox it if needed", "-      if (c == Character.class || c == Byte.class || c == Short.class || c == Integer.class) {", "-        node.setSelector(_unbox(exp, c));", "-      }", "-      ", "-      // Check the type of the case labels", "-      Iterator<SwitchBlock> it = node.getBindings().iterator();", "-      while (it.hasNext()) {", "-        SwitchBlock sb = it.next();", "-        sb.acceptVisitor(this);", "-        exp = sb.getExpression();", "-        if (exp != null) {", "-          Class<?> lc = NodeProperties.getType(exp);", "-          if (lc != char.class &&  lc != byte.class &&", "-              lc != short.class && lc != int.class &&", "-              (TigerUtilities.isTigerEnabled() && (lc.getSuperclass() != Class.forName(\"java.lang.Enum\")))) {", "-            //!TigerUtilities.isEnum(lc)) {", "-            node.setProperty(NodeProperties.ERROR_STRINGS,", "-                             new String[] { lc.getName() });", "-            throw new ExecutionError(\"switch.label.type\", node);", "-          }", "-          if (c != lc) {", "-            Number n = null;", "-            if (exp.hasProperty(NodeProperties.VALUE)) {", "-              Object cst = exp.getProperty(NodeProperties.VALUE);", "-              if (lc == char.class) {", "-                n = new Integer(((Character)cst).charValue());", "-              } else {", "-                n = (Number)cst;", "-              }", "+    // Visits the components of this node", "+    Expression exp = node.getSelector();", "+    Class<?> c = exp.acceptVisitor(this);", "+    if (c != char.class      && c != byte.class && c != short.class && c != int.class  && ", "+        c != Character.class && c != Byte.class && c != Short.class && c != Integer.class &&", "+        // (TigerUtilities.isTigerEnabled() && (c.getSuperclass() != Class.forName(\"java.lang.Enum\")))) {", "+        !TigerUtilities.isEnum(c) ) {", "+      node.setProperty(NodeProperties.ERROR_STRINGS,", "+                       new String[] { c.getName() });", "+      throw new ExecutionError(\"selector.type\", node);", "+    }", "+    // unbox it if needed", "+    if (c == Character.class || c == Byte.class || c == Short.class || c == Integer.class) {", "+      node.setSelector(_unbox(exp, c));", "+    }", "+    ", "+    // Check the type of the case labels", "+    Iterator<SwitchBlock> it = node.getBindings().iterator();", "+    while (it.hasNext()) {", "+      SwitchBlock sb = it.next();", "+      sb.acceptVisitor(this);", "+      exp = sb.getExpression();", "+      if (exp != null) {", "+        Class<?> lc = NodeProperties.getType(exp);", "+        if (lc != char.class &&  lc != byte.class &&", "+            lc != short.class && lc != int.class &&", "+            //  (TigerUtilities.isTigerEnabled() && (lc.getSuperclass() != Class.forName(\"java.lang.Enum\")))) {", "+            !TigerUtilities.isEnum(lc)) {", "+          node.setProperty(NodeProperties.ERROR_STRINGS,", "+                           new String[] { lc.getName() });", "+          throw new ExecutionError(\"switch.label.type\", node);", "+        }", "+        if (c != lc) {", "+          Number n = null;", "+          if (exp.hasProperty(NodeProperties.VALUE)) {", "+            Object cst = exp.getProperty(NodeProperties.VALUE);", "+            if (lc == char.class) {", "+              n = new Integer(((Character)cst).charValue());", "+            } else {", "+              n = (Number)cst;", "-            if (c == byte.class) {", "-              if (exp.hasProperty(NodeProperties.VALUE)) {", "-                if (n.byteValue() != n.intValue()) {", "-                  node.setProperty(NodeProperties.ERROR_STRINGS,", "-                                   new String[] { c.getName() });", "-                  throw new ExecutionError", "-                    (\"switch.label.type\", node);", "-                }", "-              } else {", "-                throw new ExecutionError(\"switch.label.type\", node);", "-              }", "-            } else if (c == short.class || c == char.class) {", "-              if (exp.hasProperty(NodeProperties.VALUE)) {", "-                if (n.shortValue() != n.intValue()) {", "-                  node.setProperty(NodeProperties.ERROR_STRINGS,", "-                                   new String[] { c.getName() });", "-                  throw new ExecutionError", "-                    (\"switch.label.type\", node);", "-                }", "-              } else if (lc == int.class) {", "+          }", "+          if (c == byte.class) {", "+            if (exp.hasProperty(NodeProperties.VALUE)) {", "+              if (n.byteValue() != n.intValue()) {", "-                throw new ExecutionError(\"switch.label.type\", node);", "+                throw new ExecutionError", "+                  (\"switch.label.type\", node);", "+            } else {", "+              throw new ExecutionError(\"switch.label.type\", node);", "+            }", "+          } else if (c == short.class || c == char.class) {", "+            if (exp.hasProperty(NodeProperties.VALUE)) {", "+              if (n.shortValue() != n.intValue()) {", "+                node.setProperty(NodeProperties.ERROR_STRINGS,", "+                                 new String[] { c.getName() });", "+                throw new ExecutionError", "+                  (\"switch.label.type\", node);", "+              }", "+            } else if (lc == int.class) {", "+              node.setProperty(NodeProperties.ERROR_STRINGS,", "+                               new String[] { c.getName() });", "+              throw new ExecutionError(\"switch.label.type\", node);", "-    } ", "-    // this try/catch block should in fact not be there, but to use", "-    // TigerUtilities.isEnum(c) instead if the value of the ENUM flag", "-    // was known (see 2 commented lines above)", "-    catch(ClassNotFoundException e){", "-      throw new ExecutionError(\"Tiger is enabled, but cannot find class java.lang.Enum! Please contact the DynamicJava/DrJava team (javaplt@cs.rice.edu).\");", "+    "]}], "num": 3550}