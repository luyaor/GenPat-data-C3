{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "36e15b350936c42260fe5b79d7b90751", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2219c22b4a61c051d47fe9eadb3191ee", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/DefaultInteractionsModel.java", "commitBeforeChange": "0106f3ce6870b8b4440fc75222d89130d761ff4e", "commitAfterChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "   protected void _interpreterResetFailed(final Throwable t)", "signatureAfterChange": "   protected void _interpreterResetFailed(Throwable t)", "diff": ["-  protected void _interpreterResetFailed(final Throwable t) {", "-    Utilities.invokeLater(new Runnable() { ", "-      public void run() {", "-        _document.insertBeforeLastPrompt(\"Reset Failed! See the console tab for details.\" + StringOps.NEWLINE,", "-                                         InteractionsDocument.ERROR_STYLE);", "-         // Print the exception to the console", "-        _model.systemErrPrint(StringOps.getStackTrace(t));  // redundantly moves code to event thread", "-      }", "-    });", "-   ", "+  protected void _interpreterResetFailed(Throwable t) {", "+    _document.insertBeforeLastPrompt(\"Reset Failed! See the console tab for details.\" + _newLine,", "+                                     InteractionsDocument.ERROR_STYLE);", "+    // Print the exception to the console", "+    _model.systemErrPrint(StringOps.getStackTrace(t));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "89388b0ef4979d7fb0a49263c37e7513", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/DefaultGlobalModel.java", "commitBeforeChange": "688e157c7573e27d29048be4b5c2986e80d14e52", "commitAfterChange": "b8ed4d4bbe5cb36f7fb86bf02c301a4f948a603e", "methodNumberBeforeChange": 47, "methodNumberAfterChange": 47, "signatureBeforeChange": "     public void runMain() throws ClassNameNotFoundException, IOException", "signatureAfterChange": "     public void runMain() throws ClassNameNotFoundException, IOException", "diff": ["+        private boolean alreadyRun = false;", "+          // prevent listener from running twice", "+          if (alreadyRun) return; else alreadyRun = true;", "-          SwingUtilities.invokeLater(new Runnable() {", "-            public void run() { ", "-              /* Remove _runMain listener AFTER this interpreterReady listener completes and DROPS it acquireReadLock on", "-               * _interactionsModel._notifier. */", "-              _interactionsModel.removeListener(_runMain);", "-            }", "-          });", "+          // This used to be called using invokeLater, so that the listener would be removed", "+          // after the read lock of the notifier had been released, but that was not always", "+          // safe; the removal could still happen before the read lock was released", "+          // Now removeListener has been rewritten and can be called even when the lock is", "+          // held. In that case, the removal will be done as soon as possible.", "+          _interactionsModel.removeListener(_runMain);"]}], "num": 10017}