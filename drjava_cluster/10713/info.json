{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2293f541a047a849ee168465bbcdc37f", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "29fab20c9ca7f7fe34605b3e11e839a4", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "dynamicjava/src/edu/rice/cs/dynamicjava/symbol/ExtendedTypeSystem.java", "commitBeforeChange": "f835199d645f480bb352cc51cff6dc5ae32e7dc4", "commitAfterChange": "f25bc20d2dd4058b4cf2bf5f693569e62fb40d6b", "methodNumberBeforeChange": 103, "methodNumberAfterChange": 98, "signatureBeforeChange": "          public String toString()", "signatureAfterChange": "               public String toString()", "diff": ["-        result.append(\"{ \");", "-        boolean first = true;", "-        ", "-        for (Map.Entry<VariableType, Type> entry : _lowerBounds.entrySet()) {", "-          if (!first) { result.append(\", \"); }", "-          first = false;", "-          result.append(entry.getKey() + \" :> \" + userRepresentation(entry.getValue()));", "+        boolean firstScenario = true;", "+        for (ConstraintScenario s : scenarios()) {", "+          if (!firstScenario) { result.append(\" | \"); }", "+          firstScenario = false;", "+          result.append(\"{ \");", "+          boolean firstVar = true;", "+          for (VariableType var : s.boundVariables()) {", "+            if (firstVar) { result.append(\", \"); }", "+            firstVar = false;", "+            result.append(userRepresentation(s.lowerBound(var)));", "+            result.append(\" <: \");", "+            result.append(var.symbol().name());", "+            result.append(\" <: \");", "+            result.append(userRepresentation(s.upperBound(var)));", "+          }", "+          result.append(\" }\");", "-        for (Map.Entry<VariableType, Type> entry : _upperBounds.entrySet()) {", "-          if (!first) { result.append(\", \"); }", "-          first = false;", "-          result.append(entry.getKey() + \" <: \" + userRepresentation(entry.getValue()));", "-        }", "-        result.append(\" }\");"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4614078fc66bd454287cb37ecfcdcb98", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/JarJDKToolsLibrary.java", "commitBeforeChange": "e9b6b2fb912f9bb858bd9b4e8c93160bab9b774c", "commitAfterChange": "9d83c5e72c3c3a4b777224dfc83ca830e4a2d380", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "      public static FullVersion guessVersion(File f, JDKDescriptor desc)", "signatureAfterChange": "      public static FullVersion guessVersion(File f, JDKDescriptor desc)", "diff": ["-    if (result == null || result.majorVersion().equals(JavaVersion.UNRECOGNIZED)) {", "+    System.out.println(f+\" After walking directories: \"+result);", "+    if (result == null || result.majorVersion().equals(JavaVersion.UNRECOGNIZED) ||", "+        result.majorVersion().equals(JavaVersion.FUTURE)) {", "+      System.out.println(f+\" null or UNRECOGNIZED or FUTURE\");", "+        ", "+        System.out.println(f+\" After manifest: \"+result);", "+        ", "+        // still unknown or future", "+        if (result == null || result.majorVersion().equals(JavaVersion.UNRECOGNIZED) ||", "+            result.majorVersion().equals(JavaVersion.FUTURE)) {", "+          System.out.println(f+\" null or UNRECOGNIZED or FUTURE\");", "+          // look for the first class file", "+          Enumeration<JarEntry> jes = jf.entries();", "+          while(jes.hasMoreElements()) {", "+            JarEntry je = jes.nextElement();", "+            if (je.getName().endsWith(\".class\")) {", "+              result = JavaVersion.parseClassVersion(jf.getInputStream(je)).fullVersion();", "+              break;", "+            }", "+          }", "+        }", "+      ", "+      System.out.println(f+\" After all: \"+result);", "+      ", "+        System.out.println(f+\" null or UNRECOGNIZED or FUTURE\");", "-        parsedVersion = result.versionString();", "+      ", "+      parsedVersion = result.versionString();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a777b466781101a0d5dbba371556ef45", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "dynamicjava/src/edu/rice/cs/dynamicjava/symbol/ExtendedTypeSystem.java", "commitBeforeChange": "f835199d645f480bb352cc51cff6dc5ae32e7dc4", "commitAfterChange": "f25bc20d2dd4058b4cf2bf5f693569e62fb40d6b", "methodNumberBeforeChange": 99, "methodNumberAfterChange": 106, "signatureBeforeChange": "          public ConstraintSet and(ConstraintSet s)", "signatureAfterChange": "          public Option<ConstraintScenario> and(ConstraintScenario that)", "diff": ["-    ", "-    public ConstraintSet and(ConstraintSet s) {", "-      if (!s.isSatisfiable()) { return s; }", "-      else if (s.isEmpty()) { return this; }", "-      else {", "-        ConstraintSet result = new ConstraintSet(this);", "-        for (Map.Entry<VariableType, Type> entry : s._lowerBounds.entrySet()) {", "-          result = result.andLowerBound(entry.getKey(), entry.getValue());", "-        }", "-        for (Map.Entry<VariableType, Type> entry : s._upperBounds.entrySet()) {", "-          result = result.andUpperBound(entry.getKey(), entry.getValue());", "-        }", "-        return result;", "-      }", "-    }", "+    ", "+    public Option<ConstraintScenario> and(ConstraintScenario that) {", "+      ConstraintScenario result = new ConstraintScenario();", "+      for (VariableType var : union(_lowerBounds.keySet(), that._lowerBounds.keySet())) {", "+        result._lowerBounds.put(var, JOIN_NORM.value(IterUtil.make(lowerBound(var), that.lowerBound(var))));", "+      }", "+      for (VariableType var : union(_upperBounds.keySet(), that._upperBounds.keySet())) {", "+        result._upperBounds.put(var, MEET_NORM.value(IterUtil.make(upperBound(var), that.upperBound(var))));", "+      }", "+      return result.isWellFormed() ? Option.some(result) : Option.<ConstraintScenario>none(); ", "+    }"]}], "num": 10713}