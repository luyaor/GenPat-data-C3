{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "d8772c1116971d9be896ba220ba529f6", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ba30a4d8e46d141f94f6f6729ee3adf5", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractGlobalModel.java", "commitBeforeChange": "7abad9d4d237e1759bd098868c3fc80eb6e4365f", "commitAfterChange": "dcd05db97717868f3a1bba07cb5b1b9106d93c65", "methodNumberBeforeChange": 261, "methodNumberAfterChange": 262, "signatureBeforeChange": "   public void addToBrowserHistory()", "signatureAfterChange": "   public void addToBrowserHistory(boolean before)", "diff": ["+    * @param before true if the location should be inserted before the current region */", "+  public void addToBrowserHistory(boolean before) {", "+//    edu.rice.cs.drjava.ui.MainFrame.MFLOG.log(\"addToBrowserHistory()\");", "+    _notifier.updateCurrentLocationInDoc();", "+//    edu.rice.cs.drjava.ui.MainFrame.MFLOG.log(\"addToBrowserHistory: after updateCurrentLocationInDoc\");", "-      int pos = doc.getCurrentLocation();", "-//      System.err.println(\"addToBrowserHistory() called for lineNum \" + doc.getLineOfOffset(pos) + \" in \" + doc);", "-      BrowserDocumentRegion current = _browserHistoryManager.getCurrentRegion();", "-      if (current != null) {", "-        OpenDefinitionsDocument currentDoc = current.getDocument();", "-        if (doc == currentDoc) {", "-          int lineNum = doc.getLineOfOffset(pos);", "-          int currentLineNum = currentDoc.getLineOfOffset(current.getStartOffset());", "-//          System.err.println(\"lineNum = \" + lineNum + \" currentLineNum = \" + currentLineNum);", "-          if (Math.abs(lineNum - currentLineNum) <= DIFF_THRESHOLD) return;", "-        }", "-      }", "+      int pos = doc.getCaretPosition();", "-    ", "-//        Utilities.show(\"Adding (\" + doc + \", \" + startPos + \", \" + endPos + \") to browser history\");", "-    _browserHistoryManager.addBrowserRegion(new BrowserDocumentRegion(doc, startPos, endPos), _notifier);", "+//    edu.rice.cs.drjava.ui.MainFrame.MFLOG.log(\"addToBrowserHistory: startPos = \"+startPos.getOffset());", "+    BrowserDocumentRegion r = new BrowserDocumentRegion(doc, startPos, endPos);", "+    if (before) {", "+      _browserHistoryManager.addBrowserRegionBefore(r, _notifier);", "+    }", "+    else {", "+      _browserHistoryManager.addBrowserRegion(r, _notifier);", "+    }", "+//    edu.rice.cs.drjava.ui.MainFrame.MFLOG.log(\"addToBrowserHistory: \"+_browserHistoryManager);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cb2d84a7b992ce9eda9c5cef3cc9e3aa", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/LineEnumRule.java", "commitBeforeChange": "ad6842e7f3f5b3d0f8c5827298c4ec26a70a9f28", "commitAfterChange": "3b8045fd172adb1b641557166ba819c94a41813a", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "   public void paintComponent(Graphics g)", "signatureAfterChange": "   public void paintComponent(Graphics g)", "diff": ["-    final OpenDefinitionsDocument odd = _pane.getOpenDefDocument();", "-    final int endOffset = odd.getEndPosition().getOffset()-1;", "-    int lastLine = odd.getNumberOfLines();", "-", "-    if (odd.getLineStartPos(endOffset)!=odd.getLineEndPos(endOffset)) { ++lastLine; }", "+//    final OpenDefinitionsDocument odd = _pane.getOpenDefDocument();", "+//    final int endOffset = odd.getEndPosition().getOffset()-1;", "+//    int lastLine = odd.getDefaultRootElement().getElementIndex(endOffset);", "+//    ", "+//    if (odd.getLineStartPos(endOffset)!=odd.getLineEndPos(endOffset)) { ++lastLine; }", "-      final int lineNo = i/_increment +1;", "-      if (lineNo>lastLine) break;", "-      String text = Integer.toString(lineNo);", "+//      final int lineNo = i/_increment +1;", "+//      if (lineNo>lastLine) break;", "+//      String text = Integer.toString(lineNo);", "+      String text = Integer.toString(i/_increment +1);"]}], "num": 15574}