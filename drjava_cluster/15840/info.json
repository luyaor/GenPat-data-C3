{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "13870d7239a8ecd302cadda524f18652", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3504ea2cd6710a917ba3f94cd75e888e", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/History.java", "commitBeforeChange": "828da1589ecf80d1be67fffa7a1ab51335a3ab2f", "commitAfterChange": "faaa7b3cbc2c17378fdf27d2e0d53e3491783d3d", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 13, "signatureBeforeChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException", "signatureAfterChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException", "diff": ["-\tif (c.getName().indexOf('.') == -1)", "-\t    c = new File(c.getAbsolutePath() + \".\" +", "-\t\t\t InteractionsHistoryFilter.HIST_EXTENSION);", "-        FileOutputStream fos = new FileOutputStream(c);", "-        OutputStreamWriter osw = new OutputStreamWriter(fos);", "-        BufferedWriter bw = new BufferedWriter(osw);", "-\tif (editedVersion == null)", "-\t    editedVersion = getHistoryAsStringWithSemicolons();", "- \tbw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "-        bw.close();", "+      if (c.getName().indexOf('.') == -1) {", "+        c = new File(c.getAbsolutePath() + \".\" +", "+                     InteractionsHistoryFilter.HIST_EXTENSION);", "+      }", "+      FileOutputStream fos = new FileOutputStream(c);", "+      OutputStreamWriter osw = new OutputStreamWriter(fos);", "+      BufferedWriter bw = new BufferedWriter(osw);", "+      if (editedVersion == null) {", "+        editedVersion = getHistoryAsStringWithSemicolons();", "+      }", "+      bw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "+      bw.close();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9d2d387c3a5fe4231d441da19e3abb82", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/History.java", "commitBeforeChange": "772d55948f939a494c28e52313a1162cba5534b8", "commitAfterChange": "444cb9c318707ca2f9a6eaa5854ba2be0fcd383e", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException", "signatureAfterChange": "   public void writeToFile(FileSaveSelector selector) throws IOException", "diff": ["+   */", "+  public void writeToFile(FileSaveSelector selector) throws IOException {", "+    writeToFile(selector, getHistoryAsStringWithSemicolons());", "+  }", "-  public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException {", "-      if (c.getName().indexOf('.') == -1) {", "-        c = new File(c.getAbsolutePath() + \".\" +", "-                     InteractionsHistoryFilter.HIST_EXTENSION);", "-      FileOutputStream fos = new FileOutputStream(c);", "-      OutputStreamWriter osw = new OutputStreamWriter(fos);", "-      BufferedWriter bw = new BufferedWriter(osw);", "-      if (editedVersion == null) {", "-        editedVersion = getHistoryAsStringWithSemicolons();", "-      }", "-      bw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "-      bw.close();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9e1bb6b23b60bd40a86248b5f377cc5f", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/History.java", "commitBeforeChange": "c7350c43cf88b83fadf7abd46778d953858e61df", "commitAfterChange": "0b53b816728d7888dd8424a695754000657f778a", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion)      throws IOException", "signatureAfterChange": "   public void writeToFile(FileSaveSelector selector, final String editedVersion)      throws IOException", "diff": ["-  public void writeToFile(FileSaveSelector selector, String editedVersion) ", "+  public void writeToFile(FileSaveSelector selector, final String editedVersion) ", "-        FileOutputStream fos = new FileOutputStream(c);", "-        OutputStreamWriter osw = new OutputStreamWriter(fos);", "-        BufferedWriter bw = new BufferedWriter(osw);", "-        bw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "-        bw.close();", "+\tFileOps.DefaultFileSaver saver =", "+\t  new FileOps.DefaultFileSaver(c) {", "+\t    public void saveTo(File file) throws IOException {", "+\t", "+\t      FileOutputStream fos = new FileOutputStream(file);", "+\t      OutputStreamWriter osw = new OutputStreamWriter(fos);", "+\t      BufferedWriter bw = new BufferedWriter(osw);", "+\t      bw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0,", "+\t\t       HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "+\t      bw.close();", "+\t    }", "+\t  };", "+\tFileOps.saveFile(saver);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c88bce20e08de30d3e3f4b335b0bd165", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/History.java", "commitBeforeChange": "772d55948f939a494c28e52313a1162cba5534b8", "commitAfterChange": "444cb9c318707ca2f9a6eaa5854ba2be0fcd383e", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 14, "signatureBeforeChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException", "signatureAfterChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion)      throws IOException", "diff": ["-  public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException {", "+  public void writeToFile(FileSaveSelector selector, String editedVersion) ", "+    throws IOException", "+  {", "+    ", "+    // Make sure we ask before overwriting", "-      if (c.getName().indexOf('.') == -1) {", "-        c = new File(c.getAbsolutePath() + \".\" +", "-                     InteractionsHistoryFilter.HIST_EXTENSION);", "+      if (!c.exists() || selector.verifyOverwrite()) {", "+        if (c.getName().indexOf('.') == -1) {", "+          c = new File(c.getAbsolutePath() + \".\" +", "+                       InteractionsHistoryFilter.HIST_EXTENSION);", "+        }", "+        FileOutputStream fos = new FileOutputStream(c);", "+        OutputStreamWriter osw = new OutputStreamWriter(fos);", "+        BufferedWriter bw = new BufferedWriter(osw);", "+        bw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "+        bw.close();", "-      FileOutputStream fos = new FileOutputStream(c);", "-      OutputStreamWriter osw = new OutputStreamWriter(fos);", "-      BufferedWriter bw = new BufferedWriter(osw);", "-      if (editedVersion == null) {", "-        editedVersion = getHistoryAsStringWithSemicolons();", "-      }", "-      bw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "-      bw.close();"]}], "num": 15840}