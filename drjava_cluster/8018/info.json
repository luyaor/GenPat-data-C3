{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bff83b58dc8db631b593f9f1ab88078f", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "88019967b37aad8155b2a7931fb8c816", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractGlobalModel.java", "commitBeforeChange": "5fcb38a9e5144c9ef6a799230bac118e680b79fd", "commitAfterChange": "1d939764a7a48ee57c8c9b9e857d49b241cabd3e", "methodNumberBeforeChange": 252, "methodNumberAfterChange": 251, "signatureBeforeChange": "   public void addToBrowserHistory()", "signatureAfterChange": "   public void addToBrowserHistory()", "diff": ["-    assert doc != null;", "+    assert doc != null && EventQueue.isDispatchThread();", "-//    Utilities.invokeLater(new Runnable() { ", "-//      public void run() {   ", "-        Position startPos = null;  // required by javac", "-        Position endPos = null;    // required by javac", "-        File file = FileOps.NULL_FILE;  // required by javac", "-        try {", "-          int pos = doc.getCurrentLocation();", "-          startPos = doc.createPosition(pos);", "-          endPos = doc.createPosition(doc._getLineEndPos(pos));", "-//          file = doc.getFile();", "-        }", "-//        catch (FileMovedException fme) { /* ignore */ }", "-        catch (BadLocationException ble) { throw new UnexpectedException(ble); }", "-        ", "+    Position startPos = null;  // required by javac", "+    Position endPos = null;    // required by javac", "+    File file = FileOps.NULL_FILE;  // required by javac", "+    try {", "+      int pos = doc.getCurrentLocation();", "+      startPos = doc.createPosition(pos);", "+      endPos = doc.createPosition(doc._getLineEndPos(pos));", "+    }", "+    ", "+    catch (BadLocationException ble) { throw new UnexpectedException(ble); }", "+    ", "-        _browserHistoryManager.addBrowserRegion(new BrowserDocumentRegion(doc, startPos, endPos), _notifier);", "-//      }", "-//    });", "+    _browserHistoryManager.addBrowserRegion(new BrowserDocumentRegion(doc, startPos, endPos), _notifier);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c049ef1238af715f9bc7ae42afc9abfa", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractGlobalModel.java", "commitBeforeChange": "d57a4715eeda5394b496008be220f6252b47b950", "commitAfterChange": "ac02f569f5916c295bec9f11458dcf6db5964244", "methodNumberBeforeChange": 259, "methodNumberAfterChange": 258, "signatureBeforeChange": "   public void addToBrowserHistory()", "signatureAfterChange": "   public void addToBrowserHistory()", "diff": ["-    assert EventQueue.isDispatchThread();", "-    if (! EventQueue.isDispatchThread()) return;", "-    int startPos = 0;  // required by javac", "-    int endPos = 0;    // required by javac", "-    File file = FileOps.NULL_FILE;  // required by javac", "-    ", "-    if (doc != null) {  // how can doc == null?", "-      try {", "-        startPos = doc.createUnwrappedPosition(doc.getCaretPosition()).getOffset();", "-        endPos = doc.createUnwrappedPosition(doc.getLineEndPos(doc.getCaretPosition())).getOffset();", "-        file = doc.getFile();", "+//    if (doc != null) {  // how can doc == null?", "+    Utilities.invokeLater(new Runnable() { ", "+      public void run() {   ", "+        Position startPos = null;  // required by javac", "+        Position endPos = null;    // required by javac", "+        File file = FileOps.NULL_FILE;  // required by javac", "+        try {", "+          startPos = doc.createPosition(doc.getCaretPosition());", "+          endPos = doc.createPosition(doc.getLineEndPos(doc.getCaretPosition()));", "+          file = doc.getFile();", "+        }", "+        catch (FileMovedException fme) { /* ignore */ }", "+        catch (BadLocationException ble) { throw new UnexpectedException(ble); }", "+        ", "+//        Utilities.show(\"Adding (\" + doc + \", \" + startPos + \", \" + endPos + \") to browser history\");", "+        _browserHistoryManager.addBrowserRegion(new BrowserDocumentRegion(doc, startPos, endPos));", "-      catch (FileMovedException fme) { /* ignore */ }", "-      catch (BadLocationException ble) { throw new UnexpectedException(ble); }", "-      ", "-      getBrowserHistoryManager().addRegion(new SimpleDocumentRegion(doc, file, startPos, endPos));", "-    }", "+    });"]}], "num": 8018}