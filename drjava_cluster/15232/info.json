{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0ac6ba2849dd9f3d875e9b07d0abc08e", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "292dbc395661347e1e861ef08f4c1402", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractGlobalModel.java", "commitBeforeChange": "266bd2219f84e9bec4a44f24a53a30c35232367d", "commitAfterChange": "bb4d7e0a55199fcd13df83c6ac97c00a0592644f", "methodNumberBeforeChange": 43, "methodNumberAfterChange": 43, "signatureBeforeChange": "   public File getMasterWorkingDirectory()", "signatureAfterChange": "   public File getMasterWorkingDirectory()", "diff": ["-    return new File(System.getProperty(\"user.home\"));", "+    File file;", "+    try {", "+      // restore the path from the configuration", "+      file = DrJava.getConfig().getSetting(LAST_DIRECTORY);", "+      ", "+      // if it's the NULL_FILE, use \"user.home\"", "+      if (file==FileOption.NULL_FILE) {", "+        file = new File(System.getProperty(\"user.home\"));", "+      }", "+    }", "+    catch (RuntimeException e) {", "+      // something went wrong, clear the setting and use \"user.home\"", "+      DrJava.getConfig().setSetting(LAST_DIRECTORY, FileOption.NULL_FILE);", "+      file = new File(System.getProperty(\"user.home\"));", "+    }", "+    while (!file.exists()) {", "+      // if the saved path doesn't exist anymore, try the parent", "+      file = file.getParentFile();", "+    }", "+    if (file==null) {", "+      // somehow we ended up with null, use \"user.home\"", "+      file = new File(System.getProperty(\"user.home\"));", "+    }", "+    // if it's not a directory, try the parent", "+    if (!file.isDirectory()) {", "+      if (file.getParent() != null) file = file.getParentFile();", "+    }", "+", "+    // this should be an existing directory now", "+    if (file.exists() && file.isDirectory()) {", "+\t// update the setting and return it", "+        DrJava.getConfig().setSetting(LAST_DIRECTORY, file);", "+        return file;", "+    }", "+", "+    // ye who enter here, abandon all hope...", "+    // the saved path didn't work, and neither did \"user.home\"", "+    throw new UnexpectedException(new IOException(\"File's parent file is null\"));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8890057c62ba9ddb2a3c68073b4bab22", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractGlobalModel.java", "commitBeforeChange": "805c373a0ec3b1117a99ab61e1255aea61e2bd63", "commitAfterChange": "4117398987de5205499e8524a48aeb3a8a6b43ad", "methodNumberBeforeChange": 43, "methodNumberAfterChange": 43, "signatureBeforeChange": "   public File getMasterWorkingDirectory()", "signatureAfterChange": "   public File getMasterWorkingDirectory()", "diff": ["-      file = DrJava.getConfig().getSetting(LAST_DIRECTORY);", "-      ", "-      // if it's the NULL_FILE, use \"user.home\"", "-      if (file==FileOption.NULL_FILE) {", "-        file = new File(System.getProperty(\"user.home\"));", "-      }", "+      file = FileOps.getValidDirectory(DrJava.getConfig().getSetting(LAST_DIRECTORY));", "-      file = new File(System.getProperty(\"user.home\"));", "+      file = FileOps.getValidDirectory(DrJava.getConfig().getSetting(LAST_DIRECTORY));", "-    while (!file.exists()) {", "-      // if the saved path doesn't exist anymore, try the parent", "-      file = file.getParentFile();", "-    }", "-    if (file==null) {", "-      // somehow we ended up with null, use \"user.home\"", "-      file = new File(System.getProperty(\"user.home\"));", "-    }", "-    // if it's not a directory, try the parent", "-    if (!file.isDirectory()) {", "-      if (file.getParent() != null) file = file.getParentFile();", "-    }", "-", "-    // this should be an existing directory now", "-    if (file.exists() && file.isDirectory()) {", "-\t// update the setting and return it", "-        DrJava.getConfig().setSetting(LAST_DIRECTORY, file);", "-        return file;", "-    }", "-", "-    // ye who enter here, abandon all hope...", "-    // the saved path didn't work, and neither did \"user.home\"", "-    throw new UnexpectedException(new IOException(\"File's parent file is null\"));", "+    // update the setting and return it", "+    DrJava.getConfig().setSetting(LAST_DIRECTORY, file);", "+    return file;"]}], "num": 15232}