{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a83873d3ce9c77f4fa1891df678130bc", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "356dbbf4e7a1776ab55d29fdc3ea2730", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/util/classloader/ToolsJarClassLoader.java", "commitBeforeChange": "b751c38fc70d22454ab93b852de5dd5f6f16d1ba", "commitAfterChange": "25137aee8580e8df5512ad30c8f4503bd397d8af", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": "   public static File[] getToolsJarFiles(File toolsJar)", "signatureAfterChange": "   public static File[] getToolsJarFiles(File toolsJar)", "diff": ["-    String winPrograms = System.getenv(\"ProgramFiles\");", "-    if (winPrograms != null) {", "-      javaHomeParents.add(FileOps.getCanonicalFile(new File(winPrograms, \"Java\")));", "-      javaHomeParents.add(FileOps.getCanonicalFile(new File(winPrograms)));", "-    }", "-    else {  // in case the environment variables aren't set up properly", "-      javaHomeParents.add(FileOps.getCanonicalFile(new File(\"/C:/Program Files/Java/\")));", "-      javaHomeParents.add(FileOps.getCanonicalFile(new File(\"/C:/Program Files/\")));", "+    final String jv = System.getProperty(\"java.version\");", "+    if (!jv.startsWith(\"1.3\") && !jv.startsWith(\"1.4\")) {", "+      // in Java 1.3 and 1.4, getenv is deprecated and throws an exception,", "+      // so we cannot use it", "+      String winPrograms = System.getenv(\"ProgramFiles\");", "+      if (winPrograms != null) {", "+        javaHomeParents.add(FileOps.getCanonicalFile(new File(winPrograms, \"Java\")));", "+        javaHomeParents.add(FileOps.getCanonicalFile(new File(winPrograms)));", "+      }", "+      else {  // in case the environment variables aren't set up properly", "+        javaHomeParents.add(FileOps.getCanonicalFile(new File(\"/C:/Program Files/Java/\")));", "+        javaHomeParents.add(FileOps.getCanonicalFile(new File(\"/C:/Program Files/\")));", "+      }", "+      ", "+      String winSystem = System.getenv(\"SystemDrive\");", "+      if (winSystem != null) {", "+        javaHomeParents.add(FileOps.getCanonicalFile(new File(winSystem, \"Java\")));", "+        javaHomeParents.add(FileOps.getCanonicalFile(new File(winSystem)));", "+      }", "+      else { // in case the environment variables aren't set up properly", "+        javaHomeParents.add(FileOps.getCanonicalFile(new File(\"/C:/Java/\")));", "+        javaHomeParents.add(FileOps.getCanonicalFile(new File(\"/C:/\")));", "+      }", "-    String winSystem = System.getenv(\"SystemDrive\");", "-    if (winSystem != null) {", "-      javaHomeParents.add(FileOps.getCanonicalFile(new File(winSystem, \"Java\")));", "-      javaHomeParents.add(FileOps.getCanonicalFile(new File(winSystem)));", "-    }", "-    else { // in case the environment variables aren't set up properly", "-      javaHomeParents.add(FileOps.getCanonicalFile(new File(\"/C:/Java/\")));", "-      javaHomeParents.add(FileOps.getCanonicalFile(new File(\"/C:/\")));", "-    }", "-    "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7d5bcca62260f7cd46a1e9bf0c6e5bc0", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/compiler/JavacGJCompiler.java", "commitBeforeChange": "97f966af08ae6bec968f68d8b2fce6c5531a12b8", "commitAfterChange": "d4f8b5e1e15fc2c34ba6969d4ef7bdb04cc8916b", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 13, "signatureBeforeChange": "      protected Hashtable<String, String> createOptionsHashtable(File[] sourceRoots)", "signatureAfterChange": "      protected Hashtable<String, String> createOptionsHashtable(File[] sourceRoots)", "diff": ["-    // Allow assertions in 1.4  (config option)", "-    //options.put(\"-source\", \"1.4\");", "+    // Allow assertions in 1.4 if configured and in Java >= 1.4", "+    String version = System.getProperty(\"java.version\");", "+    if ((_allowAssertions) && (version != null) &&", "+        (\"1.4.0\".compareTo(version) <= 0)) {", "+      options.put(\"-source\", \"1.4\");", "+    }"]}], "num": 30704}