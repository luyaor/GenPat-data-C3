{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e216c4067aaba1d707ef6afc7991300b", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7ba8ae574a6a335117767e5385253513", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "dynamicjava/src/koala/dynamicjava/interpreter/EvaluationVisitor.java", "commitBeforeChange": "1db9953cef7434ec41dd008a314f29ee92873127", "commitAfterChange": "a13543680d64f9a7022fe7d3fbe6d9f298a83778", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": "   public Object visit(ObjectMethodCall node)", "signatureAfterChange": "   public Object visit(ObjectMethodCall node)", "diff": ["-      Method   m    = (Method)node.getProperty(NodeProperties.METHOD);", "+      Method m    = (Method)node.getProperty(NodeProperties.METHOD);", "-        Iterator<Expression> it = larg.iterator();", "-        int      i  = 0;", "+        ListIterator<Expression> it = larg.listIterator();", "+        int i  = 0;", "-          if(!TigerUtilities.isVarArgs(m)){", "-            Object p  = it.next().acceptVisitor(this);", "-            args[i] = performCast(typs[i], p);", "-            i++;", "-          } else { ", "-            /* Pass an array with all the remaining arguments of 'it' */", "-            args[typs.length-1] = buildArrayOfRemainingArgs(typs, larg.size(), it );", "+          Object last = null;", "+          if (it.hasNext()) {", "+            last = it.next().acceptVisitor(this);", "+          }", "+          ", "+          if(!TigerUtilities.isVarArgs(m)) {", "+            args[i] = last;", "+          }", "+//          else if (last == null) {", "+//            Class<?> compType = typs[i].getComponentType();", "+//            args[i] = Array.newInstance(compType, 0);", "+//          }", "+          else if (last != null && typs[i].isAssignableFrom(last.getClass())){", "+            args[i] = last;", "+          }", "+          else { // Either more/less args given than expected or is of the component type", "+            it.previous(); // back up since we pulled the expression out a few lines above", "+            args[i] = buildArrayOfRemainingArgs(typs, larg.size(), it);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7ddb41795db168c1f08884db29ac0148", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "dynamicjava/src/koala/dynamicjava/interpreter/EvaluationVisitor.java", "commitBeforeChange": "4d3fa64499badc01be2d089cba1394a47c2f30de", "commitAfterChange": "ed48d6b9cb86b6e63d0852d1106c5aba17823c84", "methodNumberBeforeChange": 24, "methodNumberAfterChange": 24, "signatureBeforeChange": "   public Object visit(StaticMethodCall node)", "signatureAfterChange": "   public Object visit(StaticMethodCall node)", "diff": ["-      Iterator<Expression> it = larg.iterator();", "+      ListIterator<Expression> it = larg.listIterator();", "-        if(!TigerUtilities.isVarArgs(m)){", "-          args[i] = it.next().acceptVisitor(this);", "-          i++;", "+        Object last = it.next().acceptVisitor(this);", "+        if(!TigerUtilities.isVarArgs(m) || ", "+           (last != null && typs[i].isAssignableFrom(last.getClass()))){", "+          args[i] = last;", "+          it.previous(); // back up since we pulled the expression out a few lines above"]}], "num": 11913}