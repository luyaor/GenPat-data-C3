{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9f34c50c3dc5831812768b73fbe05c12", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8349a66cca65e808b84febfe8bf8e705", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/newjvm/InterpreterJVM.java", "commitBeforeChange": "1333ad40debe120f6d8fd5fb5ff36c57ce6b1ccf", "commitAfterChange": "3907c0e8430f2d380a191d1ad8364cbfdd1d1b28", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "    public InterpretResult interpret(final String s)", "signatureAfterChange": "   public void interpret(final String s)", "diff": ["-  public InterpretResult interpret(final String s) {", "-    try {", "-      _dialog(\"to interp: \" + s);", "-      Object result = _interpreter.interpret(s);", "-      _dialog(\"interp ret: \" + result);", "-", "-      if (result == JavaInterpreter.NO_RESULT) {", "-        return new VoidResult();", "+  //public InterpretResult interpret(final String s) {", "+  public void interpret(final String s) {", "+    Thread thread = new Thread(\"interpret thread: \" + s) {", "+      public void run() {", "+        try {", "+          try {", "+            _dialog(\"to interp: \" + s);", "+            Object result = _interpreter.interpret(s);", "+            _dialog(\"interp ret: \" + result);", "+            ", "+            if (result == JavaInterpreter.NO_RESULT) {", "+              //return new VoidResult();", "+              _mainJVM.interpretResult(new VoidResult());", "+            }", "+            else {", "+              // we use String.valueOf because it deals with result = null!", "+              _dialog(\"about to tell main result was \" + result);", "+              //return new ValueResult(String.valueOf(result));", "+              _mainJVM.interpretResult(new ValueResult(String.valueOf(result)));", "+            }", "+          }", "+          catch (ExceptionReturnedException e) {", "+            Throwable t = e.getContainedException();", "+            ", "+            //_dialog(\"before call to threwException\");", "+            //return new ExceptionResult(t.getClass().getName(),", "+            //                           t.getMessage(),", "+            //                           getStackTrace(t));", "+            _mainJVM.interpretResult(new ExceptionResult(t.getClass().getName(),", "+                                                         t.getMessage(),", "+                                                         getStackTrace(t)));", "+          }", "+          catch (Throwable t) {", "+            // A user's toString method might throw anything, so we need to be careful", "+            //_dialog(\"thrown by toString: \" + t);", "+            //return new ExceptionResult(t.getClass().getName(),", "+            //                           t.getMessage(),", "+            //                           getStackTrace(t));", "+            _mainJVM.interpretResult(new ExceptionResult(t.getClass().getName(),", "+                                                         t.getMessage(),", "+                                                         getStackTrace(t)));", "+          }", "+        }", "+        catch (RemoteException re) {", "+          // Can't communicate with MainJVM?  Nothing to do...", "+          _log.log(re.toString());", "+        }", "-      else {", "-        // we use String.valueOf because it deals with result = null!", "-        _dialog(\"about to tell main result was \" + result);", "-        return new ValueResult(String.valueOf(result));", "-      }", "-    }", "-    catch (ExceptionReturnedException e) {", "-      Throwable t = e.getContainedException();", "+    };", "-      //_dialog(\"before call to threwException\");", "-      return new ExceptionResult(t.getClass().getName(),", "-                                 t.getMessage(),", "-                                 getStackTrace(t));", "-    }", "-    catch (Throwable t) {", "-      // A user's toString method might throw anything, so we need to be careful", "-      //_dialog(\"thrown by toString: \" + t);", "-      return new ExceptionResult(t.getClass().getName(),", "-                                 t.getMessage(),", "-                                 getStackTrace(t));", "-    }", "+    thread.setDaemon(true);", "+    thread.start();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c0234ab357d66981a2ca946ea777d8eb", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/newjvm/MainJVM.java", "commitBeforeChange": "e33f4d6f84850cd296a0da931db2c5376721147d", "commitAfterChange": "c7bde15c7f9b451331f476bd5459c183a6ad8b94", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 3, "signatureBeforeChange": "    public void interpret(String s)", "signatureAfterChange": "    public void interpret(final String s)", "diff": ["-  public void interpret(String s) {", "+  public void interpret(final String s) {", "+    // silently fail if diabled. see killInterpreter docs for details.", "+    if (! _enabled) return;", "+", "+    /*", "-      //System.err.println(\"interpret to \" + _interpreterJVM + \": \" + s);", "-      _interpreterJVM.interpret(s);", "+      //_log.log(\"main.interp: \" + s);", "+      _interpreterJVM().interpret(s);", "+    */", "+    ", "+    Thread thread = new Thread(\"interpret thread: \" + s) {", "+      public void run() {", "+        try {", "+          //System.err.println(\"interpret to \" + _interpreterJVM() + \": \" + s);", "+          InterpretResult result = _interpreterJVM().interpret(s);", "+          _log.log(\"main.interp: \" + s + \" --> \" + result);", "+          result.apply(getResultHandler());", "+        }", "+        catch (java.rmi.UnmarshalException ume) {", "+          // Could not receive result from interpret; system probably exited.", "+          // We will silently fail and let the interpreter restart.", "+          _log.log(\"main.interp: UnmarshalException, so interpreter is dead:\\n\"", "+                     + ume);", "+        }", "+        catch (RemoteException re) {", "+          _threwException(re);", "+        }", "+      }", "+    };", "+", "+    thread.setDaemon(true);", "+    thread.start();"]}], "num": 6062}