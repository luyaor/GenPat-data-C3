{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4bf022b1703c695d3f015ac340823c70", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3fc2ab7f6c4d6a4eac39c1b18a3c8851", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/DrJava.java", "commitBeforeChange": "4cdb9838755e53512e5d72bc594953caa513c0c0", "commitAfterChange": "46bed49fcf3d9c586e517d4177d242598f271a4d", "methodNumberBeforeChange": 24, "methodNumberAfterChange": 24, "signatureBeforeChange": "   public static boolean promptForToolsJar(boolean needCompiler,                                           boolean needDebugger)", "signatureAfterChange": "   public static boolean promptForToolsJar(boolean needCompiler,                                           boolean needDebugger)", "diff": ["-    final String[] text = {", "-      \"DrJava cannot find the Java SDK's 'tools.jar' file. \",", "-      \"This file is necessary to compile files and use the \",", "-      \"debugger.  It is generally located in the 'lib' \",", "-      \"subdirectory of your Java installation directory. \",", "-      \"Would you like to specify its location? \",", "-      \"(If you say 'No', DrJava might be unable to compile \",", "-      \"or debug programs.)\"", "-    };", "+    final String[] text;", "+    if (needDebugger && !needCompiler) {", "+      text = new String[]{", "+        \"DrJava cannot get the necessary information from the\",", "+        \"current Java SDK's 'tools.jar' file to start the\",", "+        \"debugger. Would you like to specify the 'tools.jar'\",", "+        \"file for the version of java you are using to run\",", "+        \"DrJava at this time?\",", "+        \"(If you say 'No', DrJava might be unable to debug\",", "+        \"programs and the debug menu will not appear.)\"", "+      };", "+    }", "+    else {", "+      text = new String[]{", "+        \"DrJava cannot find the Java SDK's 'tools.jar' file. \",", "+        \"This file is necessary to compile files and use the \",", "+        \"debugger.  It is generally located in the 'lib' \",", "+        \"subdirectory of your Java installation directory. \",", "+        \"Would you like to specify its location? \",", "+        \"(If you say 'No', DrJava might be unable to compile \",", "+        \"or debug programs.)\"", "+      };", "+    }", "-      while ((needCompiler || needDebugger) && _userWantsToPickAgain());", "+      while ((needCompiler || needDebugger) && ", "+             _userWantsToPickAgain(needDebugger && !needCompiler));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "956e759e9af311ff3a220cf4ae243039", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/DrJava.java", "commitBeforeChange": "4cdb9838755e53512e5d72bc594953caa513c0c0", "commitAfterChange": "46bed49fcf3d9c586e517d4177d242598f271a4d", "methodNumberBeforeChange": 27, "methodNumberAfterChange": 27, "signatureBeforeChange": "   private static boolean _userWantsToPickAgain()", "signatureAfterChange": "   private static boolean _userWantsToPickAgain(boolean justDebugger)", "diff": ["-  private static boolean _userWantsToPickAgain() {", "-    final String[] text = {", "-      \"The file you chose did not appear to be a valid 'tools.jar'. \",", "-      \"(Your choice might be an incompatible version of the file.) \",", "-      \"Would you like to pick again?  The 'tools.jar' file is \",", "-      \"generally located in the 'lib' subdirectory under your \",", "-      \"JDK installation directory.\",", "-      \"(If you say 'No', DrJava might be unable to compile or \",", "-      \"debug programs.)\"", "-    };", "+  private static boolean _userWantsToPickAgain(boolean justDebugger) {", "+    final String[] text;", "+    ", "+    if (justDebugger) {", "+      text = new String[]{", "+        \"DrJava was still unable to load the debugger from the\",", "+        \"'tools.jar' file you located. Would you like to pick again?\",", "+        \"The 'tools.jar' file is generally located in the 'lib'\",", "+        \"subdirectory under your JDK installation directory.\",", "+        \"(If you say 'No', DrJava might be unable to debug programs,\",", "+        \"in which case the 'Debugger' menu will not be displayed.)\"", "+      };", "+    }", "+    else {", "+      text = new String[] {", "+        \"The file you chose did not appear to be the correct 'tools.jar'. \",", "+        \"(Your choice might be an incompatible version of the file.) \",", "+        \"Would you like to pick again?  The 'tools.jar' file is \",", "+        \"generally located in the 'lib' subdirectory under your \",", "+        \"JDK installation directory.\",", "+        \"(If you say 'No', DrJava might be unable to compile or \",", "+        \"debug programs.)\"", "+      };", "+    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bca20a37b8c246235018614e43ca82c6", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/DrJava.java", "commitBeforeChange": "911c1a53bf4aef4a4a832b596c832b02de549487", "commitAfterChange": "4266b7743d96e858590841fd53f5714028f120de", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": "   public static void promptForToolsJar(boolean needCompiler, boolean needDebugger)", "signatureAfterChange": "   public static void promptForToolsJar(boolean needCompiler, boolean needDebugger)", "diff": ["-    final String[] text  = new String[] {", "-      \"DrJava cannot find a 'tools.jar' file for the version of Java \",", "-        \"that is being used to run DrJava.  Would you like to specify the \",", "-        \"location of the requisite 'tools.jar' file?   If you say 'No', \",", "-        \"DrJava might be unable to compile or debug Java programs.)\"", "-    };", "+    File selectedFile = getConfig().getSetting(JAVAC_LOCATION);", "+    String selectedVersion = _getToolsJarVersion(selectedFile);", "+    ", "+    final String[] text;", "+    if (selectedVersion==null) {", "+      text = new String[] {", "+        \"DrJava cannot find a 'tools.jar' file for the version of Java \",", "+        \"that is being used to run DrJava (Java version \"+System.getProperty(\"java.version\")+\").\",", "+        \"Would you like to specify the location of the requisite 'tools.jar' file?\",", "+        \"If you say 'No', DrJava might be unable to compile or debug Java programs.\"", "+      };", "+    }", "+    else {", "+      text = new String[] {", "+        \"DrJava cannot find a 'tools.jar' file for the version of Java \",", "+        \"that is being used to run DrJava (Java version \"+System.getProperty(\"java.version\")+\").\",", "+        \"The file you have selected appears to be for version \"+selectedVersion+\".\",", "+        \"Would you like to specify the ocation of the requisite 'tools.jar' file?\",", "+        \"If you say 'No', DrJava might be unable to compile or debug Java programs.)\"", "+      };", "+    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c2f94e05f76b62cce0fa0f83372513c0", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/DrJava.java", "commitBeforeChange": "911c1a53bf4aef4a4a832b596c832b02de549487", "commitAfterChange": "4266b7743d96e858590841fd53f5714028f120de", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 20, "signatureBeforeChange": "   private static boolean _userWantsToPickAgain()", "signatureAfterChange": "   private static boolean _userWantsToPickAgain()", "diff": ["-    final String[] text = new String[] {", "-        \"The file you chose did not appear to be the correct 'tools.jar'. \",", "-        \"(Your choice might be an incompatible version of the file.) \",", "+    File selectedFile = getConfig().getSetting(JAVAC_LOCATION);", "+    String selectedVersion = _getToolsJarVersion(selectedFile);", "+    ", "+    final String[] text;", "+    if (selectedVersion==null) {", "+      text = new String[] {", "+        \"The file you chose did not appear to be the correct 'tools.jar'\",", "+        \"that is compatible with the version of Java that is used to\",", "+        \"run DrJava (Java version \"+System.getProperty(\"java.version\")+\").\",", "+        \"Your choice might be an incompatible version of the file.\",", "+    }", "+    else {", "+      text = new String[] {", "+        \"The file you chose did not appear to be the correct 'tools.jar'\",", "+        \"that is compatible with the version of Java that is used to\",", "+        \"run DrJava (Java version \"+System.getProperty(\"java.version\")+\").\",", "+        \"The file you have selected appears to be for\",", "+        \"Java version \"+selectedVersion+\".\",", "+        \"Your choice might be an incompatible version of the file.\",", "+        \"Would you like to pick again?  The 'tools.jar' file is \",", "+        \"generally located in the 'lib' subdirectory under your \",", "+        \"JDK installation directory.\",", "+        \"If you say 'No', DrJava might be unable to compile or \",", "+        \"debug programs.\"", "+      };", "+    }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fbdf3280c7c6d72ab78e26025ba657e8", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/DrJava.java", "commitBeforeChange": "1a20ac05e52f9ee0a88d470513f2a7fe1aa1939e", "commitAfterChange": "d0895d1ac641d5855832b6d42c1c1052f9c47c9f", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 20, "signatureBeforeChange": "      private static boolean _userWantsToPickAgain()", "signatureAfterChange": "   private static boolean _userWantsToPickAgain()", "diff": ["-  private static boolean _userWantsToPickAgain() {", "-      \"The file you chose did not appear to contain the compiler. \",", "-      \"Would you like to pick again? The compiler is generally \",", "-      \"located in 'tools.jar', in the 'lib' subdirectory under \",", "-      \"your JDK installation directory.\",", "-      \"(If you say 'No', DrJava will be unable to compile programs.)\"", "-                                               \"Compiler not found\",", "+   */", "+  private static boolean _userWantsToPickAgain() {", "+    final String[] text = {", "+      \"The file you chose did not appear to be a valid 'tools.jar'. \",", "+      \"Would you like to pick again? The 'tools.jar' file is \",", "+      \"generally located in the 'lib' subdirectory under your \",", "+      \"JDK installation directory.\",", "+      \"(If you say 'No', DrJava might be unable to compile or \",", "+      \"debug programs.)\"", "+    };", "+    ", "+    int result = JOptionPane.showConfirmDialog(null,", "+                                               text,", "+                                               \"Locate 'tools.jar'?\","]}], "num": 25898}