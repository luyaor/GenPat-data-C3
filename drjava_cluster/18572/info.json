{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "14e1ef5ea916f643f4fd8031e5f2b820", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5bc277a5823cef789f75d03a2c3004bc", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "efcb480f108037d7c0b99dc2961b03df4f014419", "commitAfterChange": "7f24fc05ac677df06d9826a05db0243e50dd0b59", "methodNumberBeforeChange": 552, "methodNumberAfterChange": 552, "signatureBeforeChange": "     public void caretUpdate(final CaretEvent ce)", "signatureAfterChange": "     public void caretUpdate(final CaretEvent ce)", "diff": ["-    // The following method only runs in the event thread because it is called from DefinitionsPane", "+    // The following method does not necessarity run in the event thread.  Yuck!", "-//      DefinitionsDocument doc = _model.getActiveDocument().getDocument();", "-      int offset = ce.getDot();", "-      try { ", "-        if (offset == _offset + 1 && _currentDefDoc.getText(_offset, 1).charAt(0) != '\\n') {", "-          _col += 1;", "-          _offset += 1;", "+      ", "+      Utilities.invokeLater(new Runnable() { ", "+        public void run() {", "+", "+          int offset = ce.getDot();", "+          try { ", "+            if (offset == _offset + 1 && _currentDefDoc.getText(_offset, 1).charAt(0) != '\\n') {", "+              _col += 1;", "+              _offset += 1;", "+            }", "+            else {", "+              Element root = _currentDefDoc.getDefaultRootElement();", "+              int line = root.getElementIndex(offset); ", "+              _line = line + 1;     // line numbers are 1-based", "+              _col = offset - root.getElement(line).getStartOffset();", "+            }", "+          }", "+          catch(BadLocationException e) { /* do nothing; should never happen */ }", "+          finally { ", "+            _offset = offset;", "+            updateLocation(_line, _col);", "+          }", "-        else {", "-          Element root = _currentDefDoc.getDefaultRootElement();", "-          int line = root.getElementIndex(offset); ", "-          _line = line + 1;     // line numbers are 1-based", "-          _col = offset - root.getElement(line).getStartOffset();", "-        }", "-      }", "-      catch(BadLocationException e) { /* do nothing; should never happen */ }", "-      finally { ", "-        _offset = offset;", "-        updateLocation(_line, _col);", "-      }", "+      });"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "89f9422c743be9b3ac6736506546c060", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "d350dd729092f66f8ad737ae377c54d2ad394fbf", "commitAfterChange": "e40155b18bade831c571f9b33dc6334fca6b1698", "methodNumberBeforeChange": 520, "methodNumberAfterChange": 520, "signatureBeforeChange": "     public void caretUpdate(final CaretEvent ce)", "signatureAfterChange": "     public void caretUpdate(final CaretEvent ce)", "diff": ["-       ", "+      ", "-        synchronized(doc.getReduced()) {", "-          _currentDefPane.matchUpdate(offset);  // updates _currentLocation", "-          if (offset == _offset + 1 && offset < doc.getLength() && doc.getText(_offset, 1).charAt(0) != '\\n') {", "-            _col += 1;", "-            updateLocation(_line, _col); ", "-          }", "-          else {", "-            Element root = doc.getDefaultRootElement();", "-            int line = root.getElementIndex(offset); ", "-            _line = line + 1;     // line numbers are 1-based", "-            _col = offset - root.getElement(line).getStartOffset();", "-            _offset = offset;", "-            updateLocation(_line, _col);", "-          }", "-          ", "-        }  // end synchronized", "+        if (offset == _offset + 1 && offset < doc.getLength() && doc.getText(_offset, 1).charAt(0) != '\\n') {", "+          _col += 1;", "+        }", "+        else {", "+          Element root = doc.getDefaultRootElement();", "+          int line = root.getElementIndex(offset); ", "+          _line = line + 1;     // line numbers are 1-based", "+          _col = offset - root.getElement(line).getStartOffset();", "+        }", "-      finally { doc.releaseReadLock(); }", "+      finally { ", "+        doc.releaseReadLock();", "+        _offset = offset;", "+        updateLocation(_line, _col);", "+      }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a162080c1db5ca37e1129ec8cce6dc35", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "28db8fb2942dc00cad50f5244fe215d573867721", "commitAfterChange": "fb852ee67c669f40a587804216508a1dfbe1be4b", "methodNumberBeforeChange": 495, "methodNumberAfterChange": 495, "signatureBeforeChange": "     public void caretUpdate(final CaretEvent ce)", "signatureAfterChange": "     public void caretUpdate(final CaretEvent ce)", "diff": ["-      OpenDefinitionsDocument doc = _model.getActiveDocument();", "+      DefinitionsDocument doc = _model.getActiveDocument().getDocument();", "-      try {", "-        if (offset == _offset + 1 && doc.getText(_offset, 1).charAt(0) != '\\n') {", "-          _col += 1;", "-          updateLocation(_line, _col); ", "-          return;", "-        }", "+       ", "+      doc.acquireReadLock();", "+      try { ", "+        synchronized(doc.getReduced()) {", "+          _currentDefPane.matchUpdate(offset);  // updates _currentLocation", "+          if (offset == _offset + 1 && offset < doc.getLength() && doc.getText(_offset, 1).charAt(0) != '\\n') {", "+            _col += 1;", "+            updateLocation(_line, _col); ", "+          }", "+          else {", "+            Element root = doc.getDefaultRootElement();", "+            int line = root.getElementIndex(offset); ", "+            _line = line + 1;     // line numbers are 1-based", "+            _col = offset - root.getElement(line).getStartOffset();", "+            _offset = offset;", "+            updateLocation(_line, _col);", "+          }", "+          ", "+        }  // end synchronized", "-      catch(BadLocationException e) { /* fall through */ }", "-      ", "-      Element root = doc.getDefaultRootElement();", "-      int line = root.getElementIndex(offset); ", "-      _line = line + 1;     // line numbers are 1-based", "-      _col = offset - root.getElement(line).getStartOffset();", "-      updateLocation(_line, _col);  ", "+      catch(BadLocationException e) { /* do nothing */ }", "+      finally { doc.releaseReadLock(); }"]}], "num": 18572}