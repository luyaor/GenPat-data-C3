{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "623487e3dca54b800146306facf94b5c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b24460bca064106018333e48d5898492", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/RegionsTreePanel.java", "commitBeforeChange": "b9f87cd074abdafacdb2719b29e0803fd0f81cf0", "commitAfterChange": "04d7824a20eb03ad17793ba3198be21442313bdc", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "\r   public boolean requestFocusInWindow()", "signatureAfterChange": "   public boolean requestFocusInWindow()", "diff": ["-   */\r", "-  public boolean requestFocusInWindow() {\r", "-    // Only change GUI from event-dispatching thread\r", "-    Runnable doCommand = new Runnable() {\r", "-      public void run() {\r", "-        // Update all tree nodes\r", "-        Enumeration documents = _regionRootNode.children();\r", "-        boolean found = false;\r", "-        while ((!found) && (documents.hasMoreElements())) {\r", "-          DefaultMutableTreeNode doc = (DefaultMutableTreeNode)documents.nextElement();          \r", "-          // Find the correct start offset node for this region\r", "-          Enumeration existingRegions = doc.children();\r", "-          while (existingRegions.hasMoreElements()) {\r", "-            DefaultMutableTreeNode existing = (DefaultMutableTreeNode)existingRegions.nextElement();\r", "-            _regTreeModel.nodeChanged(existing);\r", "-          }\r", "-          _regTreeModel.nodeChanged(doc);\r", "-        }\r", "-        updateButtons();\r", "-      }\r", "-    };\r", "-    Utilities.invokeLater(doCommand);\r", "-    return super.requestFocusInWindow();\r", "-  }\r", "+    * efficient. */", "+  public boolean requestFocusInWindow() {", "+    assert EventQueue.isDispatchThread();", "+    long newTime = System.currentTimeMillis();", "+    if (newTime - _lastFocusTime > UPDATE_THRESHOLD) {", "+      _lastFocusTime = newTime;", "+      // Update all tree nodes", "+      Enumeration docNodes = _rootNode.children();", "+      while (docNodes.hasMoreElements()) {", "+        DefaultMutableTreeNode docNode = (DefaultMutableTreeNode)docNodes.nextElement();          ", "+        // Find the correct start offset node for this region", "+        Enumeration regionNodes = docNode.children();", "+        while (regionNodes.hasMoreElements()) {", "+          DefaultMutableTreeNode regionNode = (DefaultMutableTreeNode) regionNodes.nextElement();", "+          _regTreeModel.nodeChanged(regionNode);", "+        }", "+        _regTreeModel.nodeChanged(docNode);", "+      }", "+    }", "+    updateButtons();", "+    return super.requestFocusInWindow();", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fff2a34c7a161f21fdb1c705f25d398b", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/RegionsTreePanel.java", "commitBeforeChange": "b1c7871d21e78d9b00bec5144dc21cdc37950342", "commitAfterChange": "a33beea01f3d2263a618fa7843cb52ddfdaa4ccf", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "   public boolean requestFocusInWindow()", "signatureAfterChange": "\r   public boolean requestFocusInWindow()", "diff": ["-    * efficient. */", "-  public boolean requestFocusInWindow() {", "-    assert EventQueue.isDispatchThread();", "-    long newTime = System.currentTimeMillis();", "-    if (newTime - _lastFocusTime > UPDATE_THRESHOLD) {", "-      _lastFocusTime = newTime;", "-      // Update all tree nodes", "-      Enumeration docNodes = _rootNode.children();", "-      while (docNodes.hasMoreElements()) {", "-        DefaultMutableTreeNode docNode = (DefaultMutableTreeNode)docNodes.nextElement();          ", "-        // Find the correct start offset node for this region", "-        Enumeration regionNodes = docNode.children();", "-        while (regionNodes.hasMoreElements()) {", "-          DefaultMutableTreeNode regionNode = (DefaultMutableTreeNode) regionNodes.nextElement();", "-          _regTreeModel.nodeChanged(regionNode);", "-        }", "-        _regTreeModel.nodeChanged(docNode);", "-      }", "-    }", "-    updateButtons();", "-    return super.requestFocusInWindow();", "-  }", "+    * efficient. */\r", "+  public boolean requestFocusInWindow() {\r", "+    assert EventQueue.isDispatchThread();\r", "+    long newTime = System.currentTimeMillis();\r", "+    if (newTime - _lastFocusTime > UPDATE_THRESHOLD && _frame._changedSinceTabUpdate) {\r", "+      _lastFocusTime = newTime;\r", "+      _frame._changedSinceTabUpdate = false;\r", "+      // Update all tree nodes\r", "+      Enumeration docNodes = _rootNode.children();\r", "+      while (docNodes.hasMoreElements()) {\r", "+        DefaultMutableTreeNode docNode = (DefaultMutableTreeNode) docNodes.nextElement();          \r", "+        // Find the correct start offset node for this region\r", "+        Enumeration regionNodes = docNode.children();\r", "+        while (regionNodes.hasMoreElements()) {\r", "+          DefaultMutableTreeNode regionNode = (DefaultMutableTreeNode) regionNodes.nextElement();\r", "+          _regTreeModel.nodeChanged(regionNode);\r", "+        }\r", "+        _regTreeModel.nodeChanged(docNode);  // file name may have changed\r", "+      }\r", "+    }\r", "+    updateButtons();\r", "+    return super.requestFocusInWindow();\r", "+  }\r"]}], "num": 26292}