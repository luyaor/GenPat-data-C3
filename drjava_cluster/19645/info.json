{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "b56abb24322a02ec0c1e9bdbbeac0fea", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "346fc92416028a22978f8cf60db5763b", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/newjvm/InterpreterJVM.java", "commitBeforeChange": "cd56f7a2a82093e6e34728c0b5dc6babe9356e0a", "commitAfterChange": "6f37af6087e88b55d504fabdb6eee22be7ba1948", "methodNumberBeforeChange": 24, "methodNumberAfterChange": 24, "signatureBeforeChange": "   public static String getStackTrace(Throwable t)", "signatureAfterChange": "   public static String getStackTrace(Throwable t)", "diff": ["-    // OK, now we crop off everything after the first \"koala.dynamicjava.\" or", "-    //  \"edu.rice.cs.drjava.\", if there is one.", "+    // OK, now we crop off everything after the first \"koala.dynamicjava.\" or \"edu.rice.cs.drjava.\", if there is one.", "-      if (item.startsWith(\"at edu.rice.cs.drjava.\") ||", "-          item.startsWith(\"at koala.dynamicjava.\"))", "-      {", "+      if (item.startsWith(\"at edu.rice.cs.drjava.\") || item.startsWith(\"at koala.dynamicjava.\")) {", "-      while (traceItems.size() > index) {", "-        traceItems.removeLast();", "-      }", "+      while (traceItems.size() > index) traceItems.removeLast();", "-    // Last check: See if there are no items left. If there are none,", "-    // put one in to say it happened at top-level.", "-    if (traceItems.isEmpty()) {", "-      traceItems.add(EMPTY_TRACE_TEXT);", "-    }", "-    ", "+    // Last check: See if there are no items left. If there are none, put one in to say it happened at top-level.", "+    if (traceItems.isEmpty()) traceItems.add(EMPTY_TRACE_TEXT);", "-      if (first) {", "-        first = false;", "-      }", "-      else {", "-        buf.append(newLine);", "-      }", "-      ", "+      if (first) first = false; else buf.append(newLine);", "+"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "429ccaebdca8f4b04ed3a9266ec79d53", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/newjvm/InterpreterJVM.java", "commitBeforeChange": "e33f4d6f84850cd296a0da931db2c5376721147d", "commitAfterChange": "c7bde15c7f9b451331f476bd5459c183a6ad8b94", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 7, "signatureBeforeChange": "   protected static String getStackTrace(Throwable t)", "signatureAfterChange": "   protected static String getStackTrace(Throwable t)", "diff": ["-    // OK, now we search back to front looking for the first thing that's not", "-    // prefixed by edu.rice.cs.drjava or koala.dynamicjava.", "-    // We remove the extraneous items.", "-    while (! traceItems.isEmpty()) {", "-      String last = (String) traceItems.getLast();", "-      last = last.trim();", "-", "-      if (last.startsWith(\"at edu.rice.cs.drjava.\") ||", "-          last.startsWith(\"at koala.dynamicjava.\"))", "+    // OK, now we crop off everything after the first \"koala.dynamicjava.\" or", "+    //  \"edu.rice.cs.drjava.\", if there is one.", "+    ", "+    //  First, find the index of an occurrence.", "+    int index = -1;", "+    for (int i=0; i < traceItems.size(); i++) {", "+      String item = (String) traceItems.get(i);", "+      item = item.trim();", "+      if (item.startsWith(\"at edu.rice.cs.drjava.\") ||", "+          item.startsWith(\"at koala.dynamicjava.\"))", "-        traceItems.removeLast();", "-      }", "-      else {", "+        index = i;", "-", "-    // Now, check if the last item here is a java.lang.reflect. If so,", "-    // get rid of it.", "-    if (! traceItems.isEmpty()) {", "-      String last = (String) traceItems.getLast();", "-      last = last.trim();", "-", "-      if (last.startsWith(\"at java.lang.reflect.\")) {", "+    ", "+    // Now crop off the rest", "+    if (index > -1) {", "+      while (traceItems.size() > index) {", "-      }", "-    }", "-", "-    // sigh. on jdk 1.4 above the java.lang.reflect there", "-    // are some sun.reflect entries. get rid of em", "-    while (! traceItems.isEmpty()) {", "-      String last = (String) traceItems.getLast();", "-      last = last.trim();", "-", "-      if (last.startsWith(\"at sun.reflect.\"))", "-      {", "-        traceItems.removeLast();", "-      }", "-      else {", "-        break;", "+    "]}], "num": 19645}