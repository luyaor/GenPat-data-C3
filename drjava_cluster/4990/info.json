{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "85e6db5d99f2cf413dc47d4717c86de5", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5427919bec8c9b98275372c382dd3524", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/CommandLineTest.java", "commitBeforeChange": "28ed37193d3d1605a7ea343a3a2a748ce08a7b25", "commitAfterChange": "deccdad7d1e1e890f5a05d651027f51330f6ca59", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "   public CommandLineTest(String name)", "signatureAfterChange": "   public CommandLineTest(String name)", "diff": ["-  public CommandLineTest(String name) {", "-    super(name);", "+  public CommandLineTest(String name) { super(name); }", "-    /* Creating a MainFrame() is costly.  Peforming this operation here achieves more overlap with file I/O than ", "-     * doing it in setUp() */", "-    Utilities.invokeAndWait(new Runnable() { ", "-      public void run() { ", "-        DrJava._initConfig();", "-        _mf = new MainFrame(); ", "-      } ", "-    });", "-  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a98a5784d60c7defc7c11a66eb1b0972", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/config/ConfigFrame.java", "commitBeforeChange": "d8743e3580123e01ed3e3df696be4659a04c6fac", "commitAfterChange": "7a9a1a584dbea988e52c91909a30a2d54f580df1", "methodNumberBeforeChange": 51, "methodNumberAfterChange": 53, "signatureBeforeChange": "   private void _setupJUnitPanel(ConfigPanel panel)", "signatureAfterChange": "   private void _setupJUnitPanel(ConfigPanel panel)", "diff": ["-        if (edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidJUnitFile(file) ||", "-            edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidConcJUnitFile(file)) {", "+        if (edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidJUnitFile(file) ||", "+            edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidConcJUnitFile(file)) {", "-          if (edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidJUnitFile(newFile) ||", "-              edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidConcJUnitFile(newFile) ||", "+          if (edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidJUnitFile(newFile) ||", "+              edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidConcJUnitFile(newFile) ||", "-        if (edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidRTConcJUnitFile(file)) {", "+        if (edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidRTConcJUnitFile(file)) {", "-          if (edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidRTConcJUnitFile(newFile) ||", "+          if (edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidRTConcJUnitFile(newFile) ||", "-          setEnabled(edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidConcJUnitFile(f));", "+          setEnabled(edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidConcJUnitFile(f));", "-        if ((rtFile == null) || (FileOps.NULL_FILE.equals(rtFile))) {", "-          // no entry, suggest a place", "-          File drJavaFile = FileOps.getDrJavaApplicationFile();", "-          File parent = drJavaFile.getParentFile();", "-          if (parent == null) {", "-            parent = new File(System.getProperty(\"user.dir\"));", "+        edu.rice.cs.drjava.model.junit.ConcJUnitUtils.", "+          showGenerateRTConcJUnitJarFileDialog(ConfigFrame.this,", "+                                               rtFile,", "+                                               junitLoc.getComponent().getFileFromField(),", "+                                               new Runnable1<File>() {", "+          public void run(File targetFile) {", "+            rtConcJUnitLoc.getComponent().setFileField(targetFile);", "-          rtFile = new File(parent, \"rt.concjunit.jar\"); ", "-        }", "-        JFileChooser saveChooser = new JFileChooser() {", "-          public void setCurrentDirectory(File dir) {", "-            //next two lines are order dependent!", "-            super.setCurrentDirectory(dir);", "-            setDialogTitle(\"Save:  \" + getCurrentDirectory());", "-          }", "-        };", "-        saveChooser.setPreferredSize(new Dimension(650, 410));", "-        saveChooser.setSelectedFile(rtFile);", "-        saveChooser.setFileFilter(new javax.swing.filechooser.FileFilter() {", "-          public boolean accept(File f) {", "-            return f.isDirectory() || ", "-              f.getPath().endsWith(\".jar\");", "-          }", "-          public String getDescription() { ", "-            return \"Java Archive Files (*.jar)\";", "-          }", "-        });", "-        saveChooser.setMultiSelectionEnabled(false);", "-        int rc = saveChooser.showSaveDialog(ConfigFrame.this);", "-        if (rc == JFileChooser.APPROVE_OPTION) {", "-          final File targetFile = saveChooser.getSelectedFile();", "-          int n = JOptionPane.YES_OPTION;", "-          if (targetFile.exists()) {", "-            Object[] options = {\"Yes\",\"No\"};", "-            n = JOptionPane.showOptionDialog(ConfigFrame.this,", "-                                             \"This file already exists.  Do you wish to overwrite the file?\",", "-                                             \"Confirm Overwrite\",", "-                                             JOptionPane.YES_NO_OPTION,", "-                                             JOptionPane.QUESTION_MESSAGE,", "-                                             null,", "-                                             options,", "-                                             options[1]);", "-          }", "-          if (n == JOptionPane.YES_OPTION) {", "-            ConfigFrame.this.setEnabled(false);", "-            final ProcessingDialog processingDialog =", "-              new ProcessingDialog(ConfigFrame.this, \"Creating ConcJUnit Runtime\", \"Processing, please wait.\");", "-            final JProgressBar pb = processingDialog.getProgressBar();", "-            processingDialog.setVisible(true);", "-            try {", "-              final File tmpDir = FileOps.createTempDirectory(\"DrJavaGenerateRTConcJUnitJar\");", "-              ", "-              SwingWorker worker = new SwingWorker() {", "-                volatile Boolean _success = null;", "-                Thread _processIncrementer = new Thread(new Runnable() {", "-                  public void run() {", "-                    File tmpFile = new File(tmpDir, \"rt.concjunit.jar\");", "-                    boolean indeterminate = true;", "-                    try {", "-                      while (_success == null) {", "-                        Thread.sleep(1000);", "-                        if (tmpFile.exists()) {", "-                          if (indeterminate) {", "-                            pb.setIndeterminate(false);", "-                            indeterminate = false;", "-                          }", "-                          pb.setValue((int)(100.0/(30*1024*1024)*tmpFile.length()));", "-                        }", "-                      }", "-                    }", "-                    catch(InterruptedException ie) {", "-                      pb.setIndeterminate(true);", "-                    }", "-                  }", "-                });", "-                public Object construct() {", "-                  _processIncrementer.start();", "-                  _success = edu.rice.cs.drjava.model.junit.DefaultJUnitModel.", "-                    generateRTConcJUnitJarFile(targetFile, junitLoc.getComponent().getFileFromField(), tmpDir);", "-                  return null;", "-                }", "-                ", "-                public void finished() {", "-                  pb.setValue(100);", "-                  processingDialog.setVisible(false);", "-                  processingDialog.dispose();", "-                  ConfigFrame.this.setEnabled(true);", "-                  if ((_success != null) && (_success)) {", "-                    rtConcJUnitLoc.getComponent().setFileField(targetFile);", "-                    JOptionPane.showMessageDialog(ConfigFrame.this,", "-                                                  \"Successfully generated ConcJUnit Runtime File:\\n\"+targetFile,", "-                                                  \"Generation Successful\",", "-                                                  JOptionPane.INFORMATION_MESSAGE);", "-                  }", "-                  else {", "-                    JOptionPane.showMessageDialog(ConfigFrame.this,", "-                                                  \"Could not generate ConcJUnit Runtime File:\\n\"+targetFile,", "-                                                  \"Could Not Generate\",", "-                                                  JOptionPane.ERROR_MESSAGE);", "-                  }", "-                  edu.rice.cs.plt.io.IOUtil.deleteRecursively(tmpDir);", "-                }", "-              };", "-              worker.start();", "-            }", "-            catch(IOException ioe) {", "-              JOptionPane.showMessageDialog(ConfigFrame.this,", "-                                            \"Could not generate ConcJUnit Runtime file:\\n\"+targetFile,", "-                                            \"Could Not Generate\",", "-                                            JOptionPane.ERROR_MESSAGE);", "-            }", "-          }", "-        }", "+        },", "+                                               new Runnable() { public void run() { } });", "-          setEnabled(edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidConcJUnitFile(f));", "+          setEnabled(edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidConcJUnitFile(f));", "-          if (edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidConcJUnitFile(f)) {", "+          if (edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidConcJUnitFile(f)) {", "-                edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidRTConcJUnitFile(rtf)) {", "+                edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidRTConcJUnitFile(rtf)) {", "-          else if (edu.rice.cs.drjava.model.junit.DefaultJUnitModel.isValidJUnitFile(f)) {", "+          else if (edu.rice.cs.drjava.model.junit.ConcJUnitUtils.isValidJUnitFile(f)) {"]}], "num": 4990}