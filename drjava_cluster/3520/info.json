{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "5a61cbf16d93aa90fc72ea92557fcf75", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3cc67c4bf70496722dc862782b7781ad", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/DefinitionsDocument.java", "commitBeforeChange": "4128354c8729a4a5df76a578d72103228145ae8d", "commitAfterChange": "aa287bbb1c9881659edc121fbb5e7531149b5808", "methodNumberBeforeChange": 24, "methodNumberAfterChange": 54, "signatureBeforeChange": "   protected void _storeInCache(String key, Object result)", "signatureAfterChange": "      protected void endCompoundEdit(int key)", "diff": ["-   */", "-  protected void _storeInCache(String key, Object result) {", "-    throwErrorHuh();", "-    _cacheInUse = true;", "-", "-    // Prevent going over max size", "-    if (_helperCache.size() >= MAX_CACHE_SIZE) {", "-      if (_helperCacheHistory.size() > 0) {", "-        _helperCache.remove( _helperCacheHistory.get(0) );", "-        _helperCacheHistory.remove(0);", "-      }", "-      else {", "-        // Shouldn't happen", "-        throw new RuntimeException(\"Cache larger than cache history!\");", "-      }", "-    }", "-    Object prev = _helperCache.put(key, result);", "-    // Add to history if the insert increased the size of the table", "-    if (prev == null) {", "-      _helperCacheHistory.add(key);", "-    }", "-", "-    /*", "-    long end = System.currentTimeMillis();", "-    Long start = (Long)_helperCache.get(key+\"|time\");", "-    if (start != null) {", "-      _helperCache.remove(key+\"|time\");", "-      long delay = end - start.longValue();", "-      if (delay > maxHelpDelay) {", "-        maxHelpDelay = delay;", "-        maxKey = key;", "-        //DrJava.consoleOut().println(\"   Longest: \" + maxHelpDelay + \"ms from \" + maxKey +", "-        //                            \", line \" + getCurrentLine());", "-      }", "-    }", "-    else {", "-      DrJava.consoleOut().println(\"  CACHE MISS: \" + key);", "-    }", "-    */", "-  }", "+  ", "+  protected void endCompoundEdit(int key) {", "+    _undoManager.endCompoundEdit(key);", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "72b495e426233d7c9afa00a266ed5436", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "92fd06b34796984853343dde64251cfdd2a0ce25", "commitAfterChange": "ad91ad9028e35ded2c6aef6b30e8459151ecae7c", "methodNumberBeforeChange": 41, "methodNumberAfterChange": 41, "signatureBeforeChange": "   protected void _storeInCache(String key, Object result)", "signatureAfterChange": "   protected void _storeInCache(String query, Object answer, int offset)", "diff": ["-   */", "-  protected void _storeInCache(String key, Object result) {", "-    synchronized(_helperCache) {", "-      _cacheInUse = true;", "-      ", "-      // Prevent going over max size", "-      if (_helperCache.size() >= MAX_CACHE_SIZE) {", "-        if (_helperCacheHistory.size() > 0) {", "-          _helperCache.remove( _helperCacheHistory.get(0) );", "-          _helperCacheHistory.remove(0);", "-        }", "-        else { // Should not happen", "-          throw new RuntimeException(\"Cache larger than cache history!\");", "-        }", "-      }", "-      Object prev = _helperCache.put(key, result);", "-      // Add to history if the insert increased the size of the table", "-      if (prev == null) _helperCacheHistory.add(key);", "+    */", "+  protected void _storeInCache(String query, Object answer, int offset) {", "+    synchronized(_reduced) {", "+      _queryCache.put(query, answer);", "+      _addToOffsetsToQueries(query, offset);"]}], "num": 3520}