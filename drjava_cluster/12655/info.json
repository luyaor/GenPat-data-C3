{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "fa51b306b5e75363161c40e56cfeed74", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3d50939ce2a10809e7685d3551ddebd6", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "platform/src-eclipse/edu/rice/cs/drjava/model/compiler/EclipseCompiler.java", "commitBeforeChange": "c1c33f1060f9022135b7f75a813b69c4045f6b46", "commitAfterChange": "0de85ca2b785d7ad489463f9a174133a91014910", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "  \r   \r   public EclipseCompiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath)", "signatureAfterChange": "     public EclipseCompiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath)", "diff": ["-  \r", "-  public EclipseCompiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath) {\r", "-    super(version, location, defaultBootClassPath);\r", "-    _filterExe = version.compareTo(JavaVersion.parseFullVersion(\"1.6.0_04\")) >= 0;\r", "-    if (_filterExe) {\r", "-      // if we need to filter out exe files from the classpath, we also need to\r", "-      // extract junit.jar and create a temporary file\r", "-      try {\r", "-        // edu.rice.cs.util.Log LOG = new edu.rice.cs.util.Log(\"jdk160.txt\",true);\r", "-        // LOG.log(\"Filtering exe files from classpath.\");\r", "-        InputStream is = Javac160Compiler.class.getResourceAsStream(\"/junit.jar\");\r", "-        if (is!=null) {\r", "-          // LOG.log(\"\\tjunit.jar found\");\r", "-          _tempJUnit = edu.rice.cs.plt.io.IOUtil.createAndMarkTempFile(PREFIX,SUFFIX);\r", "-          FileOutputStream fos = new FileOutputStream(_tempJUnit);\r", "-          int size = edu.rice.cs.plt.io.IOUtil.copyInputStream(is,fos);\r", "-          // LOG.log(\"\\t\"+size+\" bytes written to \"+_tempJUnit.getAbsolutePath());\r", "-        }\r", "-        else {\r", "-          // LOG.log(\"\\tjunit.jar not found\");\r", "-          if (_tempJUnit!=null) {\r", "-            _tempJUnit.delete();\r", "-            _tempJUnit = null;\r", "-          }\r", "-        }\r", "-      }\r", "-      catch(IOException ioe) {\r", "-        if (_tempJUnit!=null) {\r", "-          _tempJUnit.delete();\r", "-          _tempJUnit = null;\r", "-        }\r", "-      }\r", "-      // sometimes this file may be left behind, so create a shutdown hook\r", "-      // that deletes temporary files matching our pattern\r", "-      Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {\r", "-        public void run() {\r", "-          try {\r", "-            File temp = File.createTempFile(PREFIX, SUFFIX);\r", "-            IOUtil.attemptDelete(temp);\r", "-            File[] toDelete = temp.getParentFile().listFiles(new FilenameFilter() {\r", "-              public boolean accept(File dir, String name) {\r", "-                if ((!name.startsWith(PREFIX)) || (!name.endsWith(SUFFIX))) return false;\r", "-                String rest = name.substring(PREFIX.length(), name.length()-SUFFIX.length());\r", "-                try {\r", "-                  Integer i = new Integer(rest);\r", "-                  // we could create an integer from the rest, this is one of our temporary files\r", "-                  return true;\r", "-                }\r", "-                catch(NumberFormatException e) { /* couldn't convert, ignore this file */ }\r", "-                return false;\r", "-              }\r", "-            });\r", "-            for(File f: toDelete) {\r", "-              f.delete();\r", "-            }\r", "-          }\r", "-          catch(IOException ioe) { /* could not delete temporary files, ignore */ }\r", "-        }\r", "-      })); \r", "-    }\r", "-  }\r", "+public class EclipseCompiler extends Javac160FilteringCompiler {", "+    public EclipseCompiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath) {", "+    super(version, location, defaultBootClassPath);", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dc85759f2d726afa695c20b6be5f5cd2", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "platform/src-jdk16/edu/rice/cs/drjava/model/compiler/Javac160Compiler.java", "commitBeforeChange": "7f24fc05ac677df06d9826a05db0243e50dd0b59", "commitAfterChange": "51ac7cbc7782d911930f183c9cf811f53aba30d2", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "      public Javac160Compiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath)", "signatureAfterChange": "      public Javac160Compiler(JavaVersion.FullVersion version, String location, List<? extends File> defaultBootClassPath)", "diff": ["-", "+  ", "-    _filterExe = version.compareTo(JavaVersion.parseFullVersion(\"1.6.0_04\")) >= 0;", "-    if (_filterExe) {", "-      // if we need to filter out exe files from the classpath, we also need to", "-      // extract junit.jar and create a temporary file", "-      try {", "-\t// edu.rice.cs.util.Log LOG = new edu.rice.cs.util.Log(\"jdk160.txt\",true);", "-        // LOG.log(\"Filtering exe files from classpath.\");", "-        InputStream is = Javac160Compiler.class.getResourceAsStream(\"/junit.jar\");", "-\tif (is!=null) {", "-\t  // LOG.log(\"\\tjunit.jar found\");", "-\t  _tempJUnit = edu.rice.cs.plt.io.IOUtil.createAndMarkTempFile(PREFIX,SUFFIX);", "-\t  FileOutputStream fos = new FileOutputStream(_tempJUnit);", "-\t  int size = edu.rice.cs.plt.io.IOUtil.copyInputStream(is,fos);", "-\t  // LOG.log(\"\\t\"+size+\" bytes written to \"+_tempJUnit.getAbsolutePath());", "-\t}", "-\telse {", "-\t  // LOG.log(\"\\tjunit.jar not found\");", "-\t  if (_tempJUnit!=null) {", "-\t    _tempJUnit.delete();", "-\t    _tempJUnit = null;", "-\t    }", "-\t  }", "-      }", "-      catch(IOException ioe) {", "-\tif (_tempJUnit!=null) {", "-\t    _tempJUnit.delete();", "-\t    _tempJUnit = null;", "-\t}", "-      }", "-      // sometimes this file may be left behind, so create a shutdown hook", "-      // that deletes temporary files matching our pattern", "-      Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {", "-        public void run() {", "-\t  try {", "-\t    File temp = edu.rice.cs.plt.io.IOUtil.createAndMarkTempFile(PREFIX,SUFFIX);;", "-  \t    File[] toDelete = temp.getParentFile().listFiles(new FilenameFilter() {", "-\t      public boolean accept(File dir, String name) {", "-\t        if ((!name.startsWith(PREFIX)) || (!name.endsWith(SUFFIX))) return false;", "-\t        String rest = name.substring(PREFIX.length(), name.length()-SUFFIX.length());", "-\t        try {", "-\t          Integer i = new Integer(rest);", "-\t\t  // we could create an integer from the rest, this is one of our temporary files", "-\t\t  return true;", "-\t        }", "-\t        catch(NumberFormatException e) { /* couldn't convert, ignore this file */ }", "-\t        return false;", "-\t      }", "-\t    });", "-\t    for(File f: toDelete) {", "-\t      f.delete();", "-\t    }", "-\t  }", "-\t  catch(IOException ioe) { /* could not delete temporary files, ignore */ }", "-\t}", "-      }));", "-    }"]}], "num": 12655}