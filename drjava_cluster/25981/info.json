{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0dd6a6b7962875f11ccedef443594f20", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8f643370cfd13a3303656b4ad6c4ffce", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/config/FileProperty.java", "commitBeforeChange": "1a21d93c6026fc975d9f1a1bda2fbd55942a0154", "commitAfterChange": "7cbabe0b7b5f77b58eac69afdca15c16ef2f6a9b", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "\r   public void update(PropertyMaps pm)", "signatureAfterChange": "   public void update(PropertyMaps pm)", "diff": ["-    * @param pm PropertyMaps used for substitution */\r", "-  public void update(PropertyMaps pm) {\r", "-    try {\r", "-      File f;\r", "-      if (_getFile == null || (f = _getFile.apply(null)) == null) {\r", "-        _value = \"\";\r", "-        return;\r", "-      }\r", "-      if (_attributes.get(\"rel\").equals(\"/\")) {\r", "-        f = f.getAbsoluteFile();\r", "-        try { f = f.getCanonicalFile(); }\r", "-        catch(IOException ioe) { }\r", "-        _value = edu.rice.cs.util.StringOps.escapeFileName(f.toString());\r", "-      }\r", "-      else {\r", "-        File rf = new File(StringOps.unescapeFileName(StringOps.replaceVariables(_attributes.get(\"rel\"), \r", "-                                                                                        pm,\r", "-                                                                                        PropertyMaps.GET_CURRENT)));\r", "-        String s = FileOps.stringMakeRelativeTo(f,rf);                                     \r", "-        _value = edu.rice.cs.util.StringOps.escapeFileName(s);\r", "-      }\r", "-    }\r", "-    catch(IOException e) { _value = \"(Error...)\"; }\r", "-    catch(SecurityException e) { _value = \"(Error...)\"; }\r", "-  }    \r", "+    * @param pm PropertyMaps used for substitution */", "+  public void update(PropertyMaps pm) {", "+    try {", "+      File f;", "+      if (_getFile == null || (f = _getFile.value()) == null) {", "+        _value = \"\";", "+        return;", "+      }", "+      if (_attributes.get(\"rel\").equals(\"/\")) {", "+        f = f.getAbsoluteFile();", "+        try { f = f.getCanonicalFile(); }", "+        catch(IOException ioe) { }", "+        _value = edu.rice.cs.util.StringOps.escapeFileName(f.toString());", "+      }", "+      else {", "+        File rf = new File(StringOps.unescapeFileName(StringOps.replaceVariables(_attributes.get(\"rel\"), ", "+                                                                                        pm,", "+                                                                                        PropertyMaps.GET_CURRENT)));", "+        String s = FileOps.stringMakeRelativeTo(f,rf);                                     ", "+        _value = edu.rice.cs.util.StringOps.escapeFileName(s);", "+      }", "+    }", "+    catch(IOException e) { _value = \"(Error...)\"; }", "+    catch(SecurityException e) { _value = \"(Error...)\"; }", "+  }    "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b03bb76ed6859f29c93beb8d1374e30b", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "51d1f2e57f80c21afa7918fd2fa925d58d67589d", "commitAfterChange": "814cfebe8a374d445ce9c3fa02698b2d647448f9", "methodNumberBeforeChange": 263, "methodNumberAfterChange": 263, "signatureBeforeChange": "      public void setUpDrJavaProperties()", "signatureAfterChange": "      public void setUpDrJavaProperties()", "diff": ["+    ", "+    PropertyMaps.ONLY.setProperty(\"DrJava\", new DrJavaProperty(\"tmpfile\") {", "+      java.util.Random _r = new java.util.Random();", "+      public String toString() {", "+        invalidate();", "+        update();", "+        return _value;", "+      }", "+      public void update() {", "+        try {", "+          File f;", "+          if (_attributes.get(\"name\").equals(\"\")) {", "+            File dir = new File(System.getProperty(\"java.io.tmpdir\"));", "+            if (!_attributes.get(\"dir\").equals(\"\")) {", "+              dir = new File(_attributes.get(\"dir\"));", "+            }", "+            f = new File(dir, \"DrJava-Execute-\"+System.currentTimeMillis()+\"-\"+(_r.nextInt() & 0xffff)+\".tmp\");", "+            if (!_attributes.get(\"dir\").equals(\"\")) {", "+              f = new File(new File(_attributes.get(\"dir\")),f.getName());", "+            }", "+          }", "+          else {", "+            File dir = new File(System.getProperty(\"java.io.tmpdir\"));", "+            if (!_attributes.get(\"dir\").equals(\"\")) {", "+              dir = new File(_attributes.get(\"dir\"));", "+            }", "+            f = new File(dir, _attributes.get(\"name\"));", "+          }", "+          try {", "+            f = f.getCanonicalFile();", "+          }", "+          catch(IOException ioe) { }", "+          f.deleteOnExit();", "+          _value = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(f.toString());", "+        }", "+        catch(SecurityException e) { _value = \"Error.\"; }", "+      }", "+      public String getCurrent() {", "+        invalidate();", "+        final String s = super.getCurrent();", "+        File f = new File(edu.rice.cs.util.StringOps.unescapeSpacesWith1bHex(_value));", "+        final String keep = _attributes.get(\"keep\");", "+        if (!(keep.equals(\"true\") || keep.equals(\"yes\") || keep.equals(\"1\"))) {", "+          f.deleteOnExit();", "+        }", "+        String text = edu.rice.cs.util.StringOps.escapeSpacesWith1bHex(_attributes.get(\"content\"));", "+        try {", "+          FileWriter fw = new FileWriter(f);", "+          fw.write(text, 0, text.length());", "+          fw.close();", "+        }", "+        catch(IOException ioe) { /*ignore*/ }", "+        return s;", "+      }", "+      public void resetAttributes() {", "+        _attributes.clear();", "+        _attributes.put(\"dir\", \"\");", "+        _attributes.put(\"name\", \"\");", "+        _attributes.put(\"keep\", \"\");", "+        _attributes.put(\"content\", \"\");", "+      }", "+    });"]}], "num": 25981}