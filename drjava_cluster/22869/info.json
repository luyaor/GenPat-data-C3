{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f1c2c7ee333916c8765d61cb6cc667e5", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ab92c1cc34b32a2a62d77f881d734161", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/History.java", "commitBeforeChange": "f50373a63f9f9d9922c2e62974843c1ad9a43aac", "commitAfterChange": "e23022134509d45381ef930935988636cfbc7d79", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 12, "signatureBeforeChange": "   public void writeToFile(FileSaveSelector selector) throws IOException", "signatureAfterChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException", "diff": ["-  public void writeToFile(FileSaveSelector selector) throws IOException {", "+  public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException {", "+    ", "-      return;", "-      // don't need to do anything", "+      return; // don't need to do anything", "-      if (c.getName().indexOf('.') == -1)", "-        c = new File(c.getAbsolutePath() + \".hist\");", "-      try {", "+\tif (c.getName().indexOf('.') == -1)", "+\t    c = new File(c.getAbsolutePath() + \".\" +", "+\t\t\t InteractionsHistoryFilter.HIST_EXTENSION);", "-        String currString;", "-        for (int i = 0; i < size(); i++) {", "-          currString = _vector.elementAt(i);", "-          currString.trim();", "-          bw.write(currString, 0, currString.length());", "-          bw.newLine();", "-        }", "+\tif (editedVersion == null)", "+\t    editedVersion = getHistoryAsStringWithSemicolons();", "+ \tbw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "-      }", "-      catch (IOException ioe) {/*JOptionPane.showMessageDialog(null,", "-                                  \"An IOException has occured\" + \"\\n\" + ioe,", "-                                  \"IOException\",", "-                                  JOptionPane.ERROR_MESSAGE);}*/", "-        throw new IOException(\"An error occured writing the history to a file\");", "-      }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c88bce20e08de30d3e3f4b335b0bd165", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/History.java", "commitBeforeChange": "772d55948f939a494c28e52313a1162cba5534b8", "commitAfterChange": "444cb9c318707ca2f9a6eaa5854ba2be0fcd383e", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 14, "signatureBeforeChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException", "signatureAfterChange": "   public void writeToFile(FileSaveSelector selector, String editedVersion)      throws IOException", "diff": ["-  public void writeToFile(FileSaveSelector selector, String editedVersion) throws IOException {", "+  public void writeToFile(FileSaveSelector selector, String editedVersion) ", "+    throws IOException", "+  {", "+    ", "+    // Make sure we ask before overwriting", "-      if (c.getName().indexOf('.') == -1) {", "-        c = new File(c.getAbsolutePath() + \".\" +", "-                     InteractionsHistoryFilter.HIST_EXTENSION);", "+      if (!c.exists() || selector.verifyOverwrite()) {", "+        if (c.getName().indexOf('.') == -1) {", "+          c = new File(c.getAbsolutePath() + \".\" +", "+                       InteractionsHistoryFilter.HIST_EXTENSION);", "+        }", "+        FileOutputStream fos = new FileOutputStream(c);", "+        OutputStreamWriter osw = new OutputStreamWriter(fos);", "+        BufferedWriter bw = new BufferedWriter(osw);", "+        bw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "+        bw.close();", "-      FileOutputStream fos = new FileOutputStream(c);", "-      OutputStreamWriter osw = new OutputStreamWriter(fos);", "-      BufferedWriter bw = new BufferedWriter(osw);", "-      if (editedVersion == null) {", "-        editedVersion = getHistoryAsStringWithSemicolons();", "-      }", "-      bw.write(HISTORY_FORMAT_VERSION_2 + editedVersion, 0, HISTORY_FORMAT_VERSION_2.length() + editedVersion.length());", "-      bw.close();"]}], "num": 22869}