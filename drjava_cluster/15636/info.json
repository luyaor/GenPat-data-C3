{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "064d5bc7f2dfb7b359d63d52e2f08508", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "55c8279c1631dde8e2dc0a41238ae246", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/util/docnavigation/JTreeSortNavigator.java", "commitBeforeChange": "55fb98a726c0190aa8a7fbeee084f55def19ac79", "commitAfterChange": "771a0aee635c62bc6d0a2000fe605dc1113ef2b9", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "   public synchronized void addDocument(INavigatorItem doc)", "signatureAfterChange": "   public void addDocument(INavigatorItem doc)", "diff": ["-  public synchronized void addDocument(INavigatorItem doc) {", "+  public void addDocument(INavigatorItem doc) {", "-    for (GroupNode r: _roots) {", "-      if (r.getFilter().accept(doc)) {", "-        _root = r;", "-        break;", "-      }", "-    }", "-    if (_root == null) return;", "-    ", "-    LeafNode node = new LeafNode(doc);", "-    //_root.add(node);", "-    insertNodeSortedInto(node, _root);", "-    this.expandPath(new TreePath(_root.getPath()));", "-    _doc2node.put(doc, node);", "-    _hasNonProjFilesOpen = true;", "-    //    this.setActiveDoc(doc);", "-  }", "+      for (GroupNode r: _roots) {", "+      ", "+      LeafNode node = new LeafNode(doc);", "+      //_root.add(node);", "+      insertNodeSortedInto(node, _root);", "+      this.expandPath(new TreePath(_root.getPath()));", "+      _doc2node.put(doc, node);", "+      _hasNonProjFilesOpen = true;", "+      //    this.setActiveDoc(doc);", "+    }", "+  }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ad95d83c495dd25881bb77f01ad6ac9e", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/util/docnavigation/JTreeSortNavigator.java", "commitBeforeChange": "787d67eb3d919fcaaf2b1a9e1122344cb4eabfb5", "commitAfterChange": "dffeb55b275906c40458f2a767d0f62b0845e9e5", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 8, "signatureBeforeChange": "   public synchronized void addDocument(INavigatorItem doc, String path) throws IllegalArgumentException", "signatureAfterChange": "   public void addDocument(INavigatorItem doc, String path) throws IllegalArgumentException", "diff": ["-  public synchronized void addDocument(INavigatorItem doc, String path) throws IllegalArgumentException {", "+  public void addDocument(INavigatorItem doc, String path) throws IllegalArgumentException {", "-    for (GroupNode r: _roots){", "-      if (r.getFilter().accept(doc)) {", "-        _root = r;", "-        break;", "-      }", "-    }", "-    ", "-    if (_root == null) return;", "-    ", "-    StringTokenizer tok = new StringTokenizer(path, File.separator);", "-    //ArrayList<String> elements = new ArrayList<String>();", "-    String pathSoFar=\"\";", "-    InnerNode lastNode = _root;", "-    while (tok.hasMoreTokens()) {", "-      String element = tok.nextToken();", "-      pathSoFar += (element + \"/\");", "-      InnerNode thisNode;", "-      //System.out.println(\"pathsofar = \" + pathSoFar);", "-      // if the node is not in the hashmap yet", "-      if (!_path2node.containsKey(pathSoFar)) {", "-        // make a new node", "-        ", "-        /* this inserts a folder node */", "-        thisNode = new FileNode(new File(pathSoFar));", "-        insertFolderSortedInto(thisNode, lastNode);", "-        this.expandPath(new TreePath(lastNode.getPath()));", "-        // associate the path so far with that node", "-        _path2node.put(pathSoFar, thisNode);", "-      }", "-      else {", "-        // System.out.println(\"path2node contains pathSoFar\");", "-        thisNode = _path2node.getValue(pathSoFar);", "+    synchronized(_model) {", "+      ", "+      for (GroupNode r: _roots){", "+        if (r.getFilter().accept(doc)) {", "+          _root = r;", "+          break;", "+        }", "-      lastNode = thisNode;", "-       ", "-      //elements.add(element);", "+      if (_root == null) return;", "+      ", "+      StringTokenizer tok = new StringTokenizer(path, File.separator);", "+      //ArrayList<String> elements = new ArrayList<String>();", "+      String pathSoFar=\"\";", "+      InnerNode lastNode = _root;", "+      while (tok.hasMoreTokens()) {", "+        String element = tok.nextToken();", "+        pathSoFar += (element + \"/\");", "+        InnerNode thisNode;", "+        //System.out.println(\"pathsofar = \" + pathSoFar);", "+        // if the node is not in the hashmap yet", "+        if (!_path2node.containsKey(pathSoFar)) {", "+          // make a new node", "+          ", "+          /* this inserts a folder node */", "+          thisNode = new FileNode(new File(pathSoFar));", "+          insertFolderSortedInto(thisNode, lastNode);", "+          this.expandPath(new TreePath(lastNode.getPath()));", "+          // associate the path so far with that node", "+          _path2node.put(pathSoFar, thisNode);", "+        }", "+        else {", "+          // System.out.println(\"path2node contains pathSoFar\");", "+          thisNode = _path2node.getValue(pathSoFar);", "+        }", "+        ", "+        lastNode = thisNode;", "+        ", "+        //elements.add(element);", "+      }", "+      ", "+      /* lastNode is the node of the folder to add into */", "+      ", "+      LeafNode child = new LeafNode(doc);", "+      _doc2node.put(doc, child);", "+      insertNodeSortedInto(child, lastNode);", "+      //    _model.insertNodeInto(child, lastNode, lastNode.getChildCount());", "+      this.expandPath(new TreePath(lastNode.getPath()));", "+      child.setUserObject(doc);", "-    ", "-    /* lastNode is the node of the folder to add into */", "-    ", "-    LeafNode child = new LeafNode(doc);", "-    _doc2node.put(doc, child);", "-    insertNodeSortedInto(child, lastNode);", "-    //    _model.insertNodeInto(child, lastNode, lastNode.getChildCount());", "-    this.expandPath(new TreePath(lastNode.getPath()));", "-    child.setUserObject(doc);"]}], "num": 15636}