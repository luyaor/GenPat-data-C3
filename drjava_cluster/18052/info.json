{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0b98f444e9aba11cb194136d240a06c6", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5bc277a5823cef789f75d03a2c3004bc", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "efcb480f108037d7c0b99dc2961b03df4f014419", "commitAfterChange": "7f24fc05ac677df06d9826a05db0243e50dd0b59", "methodNumberBeforeChange": 552, "methodNumberAfterChange": 552, "signatureBeforeChange": "     public void caretUpdate(final CaretEvent ce)", "signatureAfterChange": "     public void caretUpdate(final CaretEvent ce)", "diff": ["-    // The following method only runs in the event thread because it is called from DefinitionsPane", "+    // The following method does not necessarity run in the event thread.  Yuck!", "-//      DefinitionsDocument doc = _model.getActiveDocument().getDocument();", "-      int offset = ce.getDot();", "-      try { ", "-        if (offset == _offset + 1 && _currentDefDoc.getText(_offset, 1).charAt(0) != '\\n') {", "-          _col += 1;", "-          _offset += 1;", "+      ", "+      Utilities.invokeLater(new Runnable() { ", "+        public void run() {", "+", "+          int offset = ce.getDot();", "+          try { ", "+            if (offset == _offset + 1 && _currentDefDoc.getText(_offset, 1).charAt(0) != '\\n') {", "+              _col += 1;", "+              _offset += 1;", "+            }", "+            else {", "+              Element root = _currentDefDoc.getDefaultRootElement();", "+              int line = root.getElementIndex(offset); ", "+              _line = line + 1;     // line numbers are 1-based", "+              _col = offset - root.getElement(line).getStartOffset();", "+            }", "+          }", "+          catch(BadLocationException e) { /* do nothing; should never happen */ }", "+          finally { ", "+            _offset = offset;", "+            updateLocation(_line, _col);", "+          }", "-        else {", "-          Element root = _currentDefDoc.getDefaultRootElement();", "-          int line = root.getElementIndex(offset); ", "-          _line = line + 1;     // line numbers are 1-based", "-          _col = offset - root.getElement(line).getStartOffset();", "-        }", "-      }", "-      catch(BadLocationException e) { /* do nothing; should never happen */ }", "-      finally { ", "-        _offset = offset;", "-        updateLocation(_line, _col);", "-      }", "+      });"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "82215416673b517ede0fa80b2bda34a9", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/ui/MainFrame.java", "commitBeforeChange": "7228cea597c372946661a7e1f1db20fd24b9dee1", "commitAfterChange": "8bb2649bd077e2bf6ccaf611ff49da8ad083e7b7", "methodNumberBeforeChange": 411, "methodNumberAfterChange": 412, "signatureBeforeChange": "     public void caretUpdate(final CaretEvent ce)", "signatureAfterChange": "     public void caretUpdate(final CaretEvent ce)", "diff": ["-      String text = doc.getText();", "-      if (offset == _offset + 1 && text.charAt(_offset) != '\\n') {", "-        _col += 1;", "+      try {", "+        if (offset == _offset + 1 && doc.getText(_offset, 1).charAt(0) != '\\n') {", "+          _col += 1;", "+          updateLocation(_line, _col); ", "+          return;", "+        }", "-      else {", "-        Element root = doc.getDefaultRootElement();", "-        int line = root.getElementIndex(offset); ", "-        _line = line + 1;     // line numbers are 1-based", "-        _col = offset - root.getElement(line).getStartOffset();", "-      }", "+      catch(BadLocationException e) { /* fall through */ }", "+        ", "+      Element root = doc.getDefaultRootElement();", "+      int line = root.getElementIndex(offset); ", "+      _line = line + 1;     // line numbers are 1-based", "+      _col = offset - root.getElement(line).getStartOffset();"]}], "num": 18052}