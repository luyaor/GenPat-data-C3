{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "faffa84773048f3a0592f3076823befa", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "40042233c70dcc50321cf52ce87e3dae", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/InteractionsDJDocument.java", "commitBeforeChange": "0106f3ce6870b8b4440fc75222d89130d761ff4e", "commitAfterChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 14, "signatureBeforeChange": "   public boolean _inBlockComment()", "signatureAfterChange": "   public boolean _inBlockComment()", "diff": ["-//    acquireReadLock();", "-//    try {", "-//      synchronized(_reduced) {", "+    acquireReadLock();", "+    try {", "+      synchronized(_reduced) {", "-//      }", "-//    }", "-//    finally { releaseReadLock(); }", "+      }", "+    }", "+    finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5fe68ce26a7da950c1872b6ce47bcf42", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/definitions/DefinitionsDocument.java", "commitBeforeChange": "7cfeeaf9345ca550653b259e08abe84024ba9934", "commitAfterChange": "193d12982052662ec0e78a136e3a67b8a2ade2e4", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": "   public int getCurrentLine()", "signatureAfterChange": "   public int getCurrentLine()", "diff": ["-    // throwErrorHuh();", "-    int here = _currentLocation;", "-    if (_cachedLocation > getLength()) {", "-      // we can't know the last line number after a delete; starting over.", "-      _cachedLocation = 0;", "-      _cachedLineNum = 1;", "-    }", "-    if (_cachedNextLineLoc > getLength()) _cachedNextLineLoc = -1;", "-    // let's see if we get off easy", "-    if ( ! (_cachedPrevLineLoc < here && here < _cachedNextLineLoc )) {", "-", "-      // this if improves performance when moving from the end of the document to the beginnning.", "-      // in essence, it calculates the line number from scratch", "-      if (_cachedLocation - here > here) {", "-        _cachedLocation = 0;", "-        _cachedLineNum = 1;", "+    acquireReadLock();", "+    try {", "+      synchronized(_reduced) {", "+        int here = _currentLocation;", "+        if (_cachedLocation > getLength()) {", "+          // we can't know the last line number after a delete; starting over.", "+          _cachedLocation = 0;", "+          _cachedLineNum = 1;", "+        }", "+        if (_cachedNextLineLoc > getLength()) _cachedNextLineLoc = -1;", "+        // let's see if we get off easy", "+        if ( ! (_cachedPrevLineLoc < here && here < _cachedNextLineLoc )) {", "+          ", "+          // this if improves performance when moving from the end of the document to the beginnning.", "+          // in essence, it calculates the line number from scratch", "+          if (_cachedLocation - here > here) {", "+            _cachedLocation = 0;", "+            _cachedLineNum = 1;", "+          }", "+          int lineOffset = _getRelativeLine();", "+          _cachedLineNum = _cachedLineNum + lineOffset;", "+          ", "+        }", "+        _cachedLocation = here;", "+        _cachedPrevLineLoc = getLineStartPos(here);", "+        _cachedNextLineLoc = getLineEndPos(here);", "+        return _cachedLineNum;", "-      int lineOffset = _getRelativeLine();", "-      _cachedLineNum = _cachedLineNum + lineOffset;", "-", "-    _cachedLocation = here;", "-    _cachedPrevLineLoc = getLineStartPos(here);", "-    _cachedNextLineLoc = getLineEndPos(here);", "-    return _cachedLineNum;", "+    finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "76419bd545a3e100bd8733445687523a", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "0106f3ce6870b8b4440fc75222d89130d761ff4e", "commitAfterChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 23, "signatureBeforeChange": "   public void setCurrentLocation(int loc)", "signatureAfterChange": "   public void setCurrentLocation(int loc)", "diff": ["-//    acquireReadLock();", "-//    try { ", "-//    synchronized(_reduced) {", "-      _setCurrentLocation(loc); ", "-//    } ", "-//    }", "-//    finally { releaseReadLock(); }", "+    acquireReadLock();", "+    try { synchronized(_reduced) {_setCurrentLocation(loc); } }", "+    finally { releaseReadLock(); }"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8e72f0564ccb40a8fb9afa1b9978529c", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "0106f3ce6870b8b4440fc75222d89130d761ff4e", "commitAfterChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 25, "signatureBeforeChange": "   public void move(int dist)", "signatureAfterChange": "   public void move(int dist)", "diff": ["-//    acquireReadLock();", "-//    try { ", "-//    synchronized(_reduced) { ", "-      _move(dist); ", "-//    }", "-//    }", "-//    finally { releaseReadLock(); } ", "+    acquireReadLock();", "+    try { synchronized(_reduced) { _move(dist); }}", "+    finally { releaseReadLock(); } "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b343aa65e0421297696620ef6cd0ebe5", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "0106f3ce6870b8b4440fc75222d89130d761ff4e", "commitAfterChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "methodNumberBeforeChange": 29, "methodNumberAfterChange": 29, "signatureBeforeChange": "   public int balanceForward()", "signatureAfterChange": "   public int balanceForward()", "diff": ["-//    acquireReadLock();", "-//    try { ", "-//    synchronized(_reduced) { ", "-      return _balanceForward(); ", "-//    } ", "-//    }", "-//    finally { releaseReadLock(); }  ", "+    acquireReadLock();", "+    try { synchronized(_reduced) { return _balanceForward(); } }", "+    finally { releaseReadLock(); }  "]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cff14961e1fb83a27231c9bb2d3d31ed", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractDJDocument.java", "commitBeforeChange": "0106f3ce6870b8b4440fc75222d89130d761ff4e", "commitAfterChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "methodNumberBeforeChange": 27, "methodNumberAfterChange": 27, "signatureBeforeChange": "   public int balanceBackward()", "signatureAfterChange": "   public int balanceBackward()", "diff": ["-//    acquireReadLock();", "-//    try { ", "-//    synchronized(_reduced) { ", "-      return _balanceBackward(); ", "-//    } ", "-//    }", "-//    finally { releaseReadLock(); }  ", "+    acquireReadLock();", "+    try { synchronized(_reduced) { return _balanceBackward(); } }", "+    finally { releaseReadLock(); }  "]}], "num": 1699}