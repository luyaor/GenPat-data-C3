{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "7424290f257dd74be071b405e1960fc2", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "07793d0cb716f837ad88ec3feee85c8c", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/InteractionsModelTest.java", "commitBeforeChange": "7363b79c6228b3bbffbaa22283c3045a27a3cedc", "commitAfterChange": "74a15c017d574b2ee2a0cdeaaedeea00825a0c5e", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 32, "signatureBeforeChange": "   public void testInteractionsHistoryStoredCorrectly() throws EditDocumentException", "signatureAfterChange": "   public void testInteractionsHistoryStoredCorrectly() throws EditDocumentException", "diff": ["-    String code = \"public class A {\\n\";", "+    final String code = \"public class A {\\n\";", "-    InteractionsDocument doc = _model.getDocument();", "+    final InteractionsDocument doc = _model.getDocument();", "-    doc.insertText(doc.getLength(), code, InteractionsDocument.DEFAULT_STYLE);", "+    Utilities.invokeAndWait(new Runnable() { ", "+      public void run() { ", "+        doc.insertText(doc.getLength(), code, InteractionsDocument.DEFAULT_STYLE);", "+        _model.interpretCurrentInteraction();", "+      }", "+    });", "-    _model.interpretCurrentInteraction();", "-    Utilities.clearEventQueue();", "-    code = \"}\\n\";", "+    final String code1 = \"}\\n\";", "-    doc.insertText(doc.getLength(), code, InteractionsDocument.DEFAULT_STYLE);", "-    Utilities.clearEventQueue();", "-    ", "-    synchronized(_lock) {", "-      _model.interpretCurrentInteraction();", "-      _model.replReturnedVoid();", "-    }", "+    Utilities.invokeAndWait(new Runnable() { ", "+      public void run() { ", "+        doc.insertText(doc.getLength(), code1, InteractionsDocument.DEFAULT_STYLE);", "+        _model.interpretCurrentInteraction();", "+        _model.replReturnedVoid();", "+      }", "+    });", "-    synchronized(_lock) {", "-      assertEquals(\"Current interaction should not be there - should have interpreted\", \"\", doc.getCurrentInteraction());", "-      assertEquals(\"History should contain one interaction\", 1, h.size());", "-    }", "+    assertEquals(\"Current interaction should not be there - should have interpreted\", \"\", doc.getCurrentInteraction());", "+    assertEquals(\"History should contain one interaction\", 1, h.size());"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "109e05d788eaabef805d6a9e3a962be1", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/repl/InteractionsModelTest.java", "commitBeforeChange": "b8bd7d0442cc5ba7e76504cb9896cbfabd4d129a", "commitAfterChange": "0e0a6cd0b304183c5602e4fe1c0f1a766f131ce0", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 32, "signatureBeforeChange": "   public void testInteractionsHistoryStoredCorrectly() throws EditDocumentException", "signatureAfterChange": "   public void testInteractionsHistoryStoredCorrectly() throws EditDocumentException", "diff": ["-    String code = \"public class A {\\n\";", "+    final String code = \"public class A {\\n\";", "-    InteractionsDocument doc = _model.getDocument();", "+    final InteractionsDocument doc = _model.getDocument();", "-    doc.insertText(doc.getLength(), code, InteractionsDocument.DEFAULT_STYLE);", "+    Utilities.invokeAndWait(new Runnable() { ", "+      public void run() { ", "+        doc.insertText(doc.getLength(), code, InteractionsDocument.DEFAULT_STYLE);", "+        _model.interpretCurrentInteraction();", "+      }", "+    });", "-    _model.interpretCurrentInteraction();", "-    Utilities.clearEventQueue();", "-    code = \"}\\n\";", "+    final String code1 = \"}\\n\";", "-    doc.insertText(doc.getLength(), code, InteractionsDocument.DEFAULT_STYLE);", "-    Utilities.clearEventQueue();", "-    ", "-    synchronized(_lock) {", "-      _model.interpretCurrentInteraction();", "-      _model.replReturnedVoid();", "-    }", "+    Utilities.invokeAndWait(new Runnable() { ", "+      public void run() { ", "+        doc.insertText(doc.getLength(), code1, InteractionsDocument.DEFAULT_STYLE);", "+        _model.interpretCurrentInteraction();", "+        _model.replReturnedVoid();", "+      }", "+    });", "-    synchronized(_lock) {", "-      assertEquals(\"Current interaction should not be there - should have interpreted\", \"\", doc.getCurrentInteraction());", "-      assertEquals(\"History should contain one interaction\", 1, h.size());", "-    }", "+    assertEquals(\"Current interaction should not be there - should have interpreted\", \"\", doc.getCurrentInteraction());", "+    assertEquals(\"History should contain one interaction\", 1, h.size());"]}], "num": 18267}