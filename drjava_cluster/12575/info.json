{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "f2e9a1cc4922ef230c520a054fd1c623", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "74a8d487e1bcaeebe3b662076c93fccf", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/DefaultGlobalModel.java", "commitBeforeChange": "d95e05b94bb85b9fefc27bcb5d21a4779fe83bf0", "commitAfterChange": "1b9869851f567b7b6474eabaac96584b4771f5f3", "methodNumberBeforeChange": 234, "methodNumberAfterChange": 238, "signatureBeforeChange": "     File _getSourceRoot(String packageName)       throws InvalidPackageException", "signatureAfterChange": "     File _getSourceRoot(String packageName) throws InvalidPackageException", "diff": ["-    File _getSourceRoot(String packageName)", "-      throws InvalidPackageException", "-    {", "+    File _getSourceRoot(String packageName) throws InvalidPackageException {", "-      try {", "-        sourceFile = getFile();", "-      }", "+      try { sourceFile = getFile();  }", "-        throw new InvalidPackageException(-1, \"Can not get source root for \" +", "-                                          \"unsaved file. Please save.\");", "+        throw new InvalidPackageException(-1, \"Can not get source root for unsaved file. Please save.\");", "-        throw new InvalidPackageException(-1, \"File has been moved or deleted \" +", "-                                          \"from its previous location. Please save.\");", "+        throw new ", "+          InvalidPackageException(-1, \"File has been moved or deleted from its previous location. Please save.\");", "-      if (packageName.equals(\"\")) {", "-        return sourceFile.getParentFile();", "-      }", "+      if (packageName.equals(\"\")) { return sourceFile.getParentFile(); }", "-      Stack<String> packageStack = new Stack<String>();", "+      ArrayList<String> packageStack = new ArrayList<String>();", "-        packageStack.push(packageName.substring(curPartBegins, dotIndex));", "+        packageStack.add(packageName.substring(curPartBegins, dotIndex));", "-      packageStack.push(packageName.substring(curPartBegins));", "+      packageStack.add(packageName.substring(curPartBegins));", "-        while (!packageStack.empty()) {", "-          String part = packageStack.pop();", "+        while (!packageStack.isEmpty()) {", "+          String part = pop(packageStack);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "face165e5107216463a9f396b214060b", "repository": "http://git.code.sf.net/p/drjava/git_repo", "fileName": "drjava/src/edu/rice/cs/drjava/model/AbstractGlobalModel.java", "commitBeforeChange": "e97d669e5368c283be3ec2a94ca1c792daab5138", "commitAfterChange": "d75bb4144501a8419376e0dc8dbe054c7511983f", "methodNumberBeforeChange": 306, "methodNumberAfterChange": 305, "signatureBeforeChange": "     public File getSourceRoot() throws InvalidPackageException", "signatureAfterChange": "     public File getSourceRoot() throws InvalidPackageException", "diff": ["-    public File getSourceRoot() throws InvalidPackageException { return _getSourceRoot(_packageName); }", "+    public File getSourceRoot() throws InvalidPackageException { ", "+      if (isUntitled())", "+        throw new InvalidPackageException(-1, \"Can not get source root for unsaved file. Please save.\");", "+      ", "+      try {", "+        String[] packages = _packageName.split(\"\\\\.\");", "+        if (packages.length == 1 && packages[0].equals(\"\")) {", "+          packages = new String[0]; // split should do this, but it doesn't", "+        }", "+        File dir = getFile().getParentFile();", "+        for (String p : IterUtil.reverse(IterUtil.asIterable(packages))) {", "+          if (dir == null || !dir.getName().equals(p)) {", "+            String m = \"File is in the wrong directory or is declared part of the wrong package.  \" +", "+            \"Directory name \" + ((dir == null) ? \"(root)\" : \"'\" + dir.getName() + \"'\") +", "+            \" does not match package name '\" + p + \"'.\";", "+            throw new InvalidPackageException(-1, m);", "+          }", "+          dir = dir.getParentFile();", "+        }", "+        if (dir == null) {", "+          // should not happen in typical cases -- requires the first package name to match the root's name,", "+          // which is usually not a valid identifier (like \"\" or \"C:\")", "+          throw new InvalidPackageException(-1, \"File is in a directory tree with a null root\");", "+        }", "+        return dir;", "+      }", "+      catch (FileMovedException fme) {", "+        throw new", "+          InvalidPackageException(-1, \"File has been moved or deleted from its previous location. Please save.\");", "+      }", "+    }"]}], "num": 12575}