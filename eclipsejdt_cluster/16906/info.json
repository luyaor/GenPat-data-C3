{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9bd513d9944fb2141c8d3053bd81f6ac", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2362fb9b4343d292023b67c2abfac96c", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/Scope.java", "commitBeforeChange": "fccc3c9fd12b95c908b1566d2444bf312ceefff2", "commitAfterChange": "65db522775790e696e2711bd035a45d8d1048338", "methodNumberBeforeChange": 37, "methodNumberAfterChange": 37, "signatureBeforeChange": " \tfinal Binding getTypeOrPackage(char[] name, int mask)", "signatureAfterChange": " \tfinal Binding getTypeOrPackage(char[] name, int mask)", "diff": ["+", "-\t\t\t\t// copy the list, since single type imports are removed if they cannot be resolved", "-\t\t\t\tfor (int i = 0, length = imports.length; i < length; i++) {", "-\t\t\t\t\tImportBinding typeImport = imports[i];", "-\t\t\t\t\tif (!typeImport.onDemand) {", "-\t\t\t\t\t\tif (CharOperation.equals(typeImport.compoundName[typeImport.compoundName.length - 1], name)) {", "-\t\t\t\t\t\t\tif (unitScope.resolveSingleTypeImport(typeImport) != null) {", "-\t\t\t\t\t\t\t\tImportReference importReference = typeImport.reference;", "-\t\t\t\t\t\t\t\tif (importReference != null) importReference.used = true;", "-\t\t\t\t\t\t\t\treturn typeImport.resolvedImport; // already know its visible", "+\t\t\t\tHashtableOfObject typeImports = unitScope.resolvedSingeTypeImports;", "+\t\t\t\tif (typeImports != null) {", "+\t\t\t\t\tImportBinding typeImport = (ImportBinding) typeImports.get(name);", "+\t\t\t\t\tif (typeImport != null) {", "+\t\t\t\t\t\tImportReference importReference = typeImport.reference;", "+\t\t\t\t\t\tif (importReference != null) importReference.used = true;", "+\t\t\t\t\t\treturn typeImport.resolvedImport; // already know its visible", "+\t\t\t\t\t}", "+\t\t\t\t} else {", "+\t\t\t\t\t// walk all the imports since resolvedSingeTypeImports is not yet initialized", "+\t\t\t\t\tfor (int i = 0, length = imports.length; i < length; i++) {", "+\t\t\t\t\t\tImportBinding typeImport = imports[i];", "+\t\t\t\t\t\tif (!typeImport.onDemand) {", "+\t\t\t\t\t\t\tif (CharOperation.equals(typeImport.compoundName[typeImport.compoundName.length - 1], name)) {", "+\t\t\t\t\t\t\t\tif (unitScope.resolveSingleTypeImport(typeImport) != null) {", "+\t\t\t\t\t\t\t\t\tImportReference importReference = typeImport.reference;", "+\t\t\t\t\t\t\t\t\tif (importReference != null) importReference.used = true;", "+\t\t\t\t\t\t\t\t\treturn typeImport.resolvedImport; // already know its visible", "+\t\t\t\t\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5c1ada7b953b595e782d2e597a846fb5", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/CompilationUnitScope.java", "commitBeforeChange": "c65347571547f67c860a6ef249183861500993de", "commitAfterChange": "c37ad47cfe3a592e86ce37a47b02bf6402d7f1de", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 34, "signatureBeforeChange": " private int checkAndRecordImportBinding( \t\tBinding importBinding,  \t\tHashtableOfType typesBySimpleNames,  \t\tImportReference importReference, \t\tchar[][] compoundName)", "signatureAfterChange": " private int checkAndRecordImportBinding( \t\tBinding importBinding,  \t\tHashtableOfType typesBySimpleNames,  \t\tImportReference importReference, \t\tchar[][] compoundName)", "diff": ["+\tfinal char[] name = compoundName[compoundName.length - 1];", "-\t\tReferenceBinding existingType = typesBySimpleNames.get(compoundName[compoundName.length - 1]);", "+\t\tReferenceBinding existingType = typesBySimpleNames.get(name);", "+\t\t\tif (importReference.isStatic() && importBinding instanceof ReferenceBinding && compilerOptions().sourceLevel >= ClassFileConstants.JDK1_8) {", "+\t\t\t\t// 7.5.3 says nothing about collision of single static imports and JDK8 tolerates them, though use is flagged.", "+\t\t\t\tfor (int j = 0; j < this.importPtr; j++) {", "+\t\t\t\t\tImportBinding resolved = this.tempImports[j];", "+\t\t\t\t\tif (resolved.isStatic() && resolved.resolvedImport instanceof ReferenceBinding && importBinding != resolved.resolvedImport) {", "+\t\t\t\t\t\tif (CharOperation.equals(name, resolved.compoundName[resolved.compoundName.length - 1])) {", "+\t\t\t\t\t\t\tReferenceBinding type = (ReferenceBinding) resolved.resolvedImport;", "+\t\t\t\t\t\t\tresolved.resolvedImport = new ProblemReferenceBinding(new char[][] { name }, type, ProblemReasons.Ambiguous);", "+\t\t\t\t\t\t\treturn -1;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t}", "-\t\ttypesBySimpleNames.put(compoundName[compoundName.length - 1], referenceBinding);", "+\t\ttypesBySimpleNames.put(name, referenceBinding);", "-\t\t\t\tif (CharOperation.equals(compoundName[compoundName.length - 1], resolved.compoundName[resolved.compoundName.length - 1])) {", "-\t\t\t\t\tproblemReporter().duplicateImport(importReference);", "-\t\t\t\t\treturn -1;", "+\t\t\t\tif (CharOperation.equals(name, resolved.compoundName[resolved.compoundName.length - 1])) {", "+\t\t\t\t\tif (compilerOptions().sourceLevel >= ClassFileConstants.JDK1_8) {", "+\t\t\t\t\t\t// 7.5.3 says nothing about collision of single static imports and JDK8 tolerates them, though use is flagged.", "+\t\t\t\t\t\tFieldBinding field = (FieldBinding) resolved.resolvedImport;", "+\t\t\t\t\t\tresolved.resolvedImport = new ProblemFieldBinding(field, field.declaringClass, name, ProblemReasons.Ambiguous);", "+\t\t\t\t\t\treturn -1;", "+\t\t\t\t\t} else {", "+\t\t\t\t\t\tproblemReporter().duplicateImport(importReference);", "+\t\t\t\t\t\treturn -1;", "+\t\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "62b0d20e71c874cd52afa330b79abdcf", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/Scope.java", "commitBeforeChange": "276d690deab11e5ff278dd7a12340b7922d913fc", "commitAfterChange": "1ed5028f52cac9ac32a1eba090840061fb91b107", "methodNumberBeforeChange": 54, "methodNumberAfterChange": 54, "signatureBeforeChange": " \tfinal Binding getTypeOrPackage(char[] name, int mask)", "signatureAfterChange": " \tfinal Binding getTypeOrPackage(char[] name, int mask)", "diff": ["-\t\t\t\t\ttypeOrPackageCache.put(name, binding = ((ImportBinding) binding).resolvedImport); // already know its visible", "+\t\t\t\t\tif (binding instanceof ImportConflictBinding)", "+\t\t\t\t\t\ttypeOrPackageCache.put(name, binding = ((ImportConflictBinding) binding).conflictingTypeBinding); // already know its visible", "+\t\t\t\t\telse", "+\t\t\t\t\t\ttypeOrPackageCache.put(name, binding = ((ImportBinding) binding).resolvedImport); // already know its visible", "-\t\t\t\tfor (int i = 0, length = imports.length; i < length; i++) {", "-\t\t\t\t\tImportBinding typeImport = imports[i];", "-\t\t\t\t\tif (!typeImport.onDemand) {", "-\t\t\t\t\t\tif (CharOperation.equals(typeImport.compoundName[typeImport.compoundName.length - 1], name)) {", "-\t\t\t\t\t\t\tBinding resolvedImport = unitScope.resolveSingleImport(typeImport);", "-\t\t\t\t\t\t\tif (resolvedImport != null && resolvedImport instanceof TypeBinding) {", "-\t\t\t\t\t\t\t\tImportReference importReference = typeImport.reference;", "+\t\t\t\tnextImport : for (int i = 0, length = imports.length; i < length; i++) {", "+\t\t\t\t\tImportBinding importBinding = imports[i];", "+\t\t\t\t\tif (!importBinding.onDemand) {", "+\t\t\t\t\t\tif (CharOperation.equals(importBinding.compoundName[importBinding.compoundName.length - 1], name)) {", "+\t\t\t\t\t\t\tBinding resolvedImport = unitScope.resolveSingleImport(importBinding);", "+\t\t\t\t\t\t\tif (resolvedImport == null) continue nextImport;", "+\t\t\t\t\t\t\tif (resolvedImport instanceof MethodBinding) {", "+\t\t\t\t\t\t\t\tresolvedImport = (ReferenceBinding) getType(importBinding.compoundName, importBinding.compoundName.length);", "+\t\t\t\t\t\t\t\tif (!resolvedImport.isValidBinding()) continue nextImport;", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\tif (resolvedImport instanceof TypeBinding) {", "+\t\t\t\t\t\t\t\tImportReference importReference = importBinding.reference;"]}], "num": 16906}