{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "8172e6cc93dd285a6d6f5a6bdecae59c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "526e3528695e523ac33173b152db12f3", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "31be6e8d42cb659b279825ea1e93bdb14b71a1ce", "commitAfterChange": "48a83ca359ad11f8f0301fb98cbae7dc06d04e4c", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 12, "signatureBeforeChange": "\r \tpublic void complete(ICompilationUnit sourceUnit, int completionPosition)", "signatureAfterChange": "\r \t\r \tpublic void complete(IType type, char[] snippet, int position, char[][] localVariableTypeNames, char[][] localVariableNames, int[] localVariableModifiers, boolean isStatic)", "diff": ["+\t\r", "+\tpublic void complete(IType type, char[] snippet, int position, char[][] localVariableTypeNames, char[][] localVariableNames, int[] localVariableModifiers, boolean isStatic){\t\r", "+\t\tTypeConverter converter = new TypeConverter();\r", "+\t\t\r", "+\t\tIType topLevelType = type;\r", "+\t\twhile(topLevelType.getDeclaringType() != null) {\r", "+\t\t\ttopLevelType = topLevelType.getDeclaringType();\r", "+\t\t}\r", "+\t\t\r", "+\t\tCompilationResult compilationResult = new CompilationResult((topLevelType.getElementName() + \".java\").toCharArray(), 1, 1);\r", "+\t\r", "+\t\tCompilationUnitDeclaration compilationUnit = new CompilationUnitDeclaration(problemReporter, compilationResult, 0);\r", "+\t\t\r", "+\t\tTypeDeclaration typeDeclaration = converter.buildCompilationUnit(type, compilationUnit, compilationResult, problemReporter);\r", "+\t\t\r", "+\t\tif(compilationUnit != null) {\t\r", "+\t\t\t// build AST from snippet\r", "+\t\t\tAbstractMethodDeclaration fakeMethod = parseSnippetMethod(snippet, position, localVariableTypeNames, localVariableNames, localVariableModifiers, isStatic);\r", "+\t\t\t\r", "+\t\t\t// merge AST\r", "+\t\t\tAbstractMethodDeclaration[] oldMethods = typeDeclaration.methods;\r", "+\t\t\tAbstractMethodDeclaration[] newMethods = new AbstractMethodDeclaration[oldMethods.length + 1];\r", "+\t\t\tSystem.arraycopy(oldMethods, 0, newMethods, 0, oldMethods.length);\r", "+\t\t\tnewMethods[oldMethods.length] = fakeMethod;\r", "+\t\t\ttypeDeclaration.methods = newMethods;\r", "+\t\r", "+\t\t\tif(DEBUG) {\r", "+\t\t\t\tSystem.out.println(\"SNIPPET COMPLETION AST :\");\r", "+\t\t\t\tSystem.out.println(compilationUnit.toString());\r", "+\t\t\t}\r", "+\t\t\t\r", "+\t\t\tif (compilationUnit.types != null) {\r", "+\t\t\t\ttry {\r", "+\t\t\t\t\tlookupEnvironment.buildTypeBindings(compilationUnit);\r", "+\t\t\t\r", "+\t\t\t\t\tif ((unitScope = compilationUnit.scope) != null) {\r", "+\t\t\t\t\t\tlookupEnvironment.completeTypeBindings(compilationUnit, true);\r", "+\t\t\t\t\t\tcompilationUnit.scope.faultInTypes();\r", "+\t\t\t\t\t\tcompilationUnit.resolve();\r", "+\t\t\t\t\t}\r", "+\t\t\t\t} catch (CompletionNodeFound e) {\r", "+\t\t\t\t\t//\t\t\t\t\tcompletionNodeFound = true;\r", "+\t\t\t\t\tif (e.astNode != null) {\r", "+\t\t\t\t\t\t// if null then we found a problem in the completion node\r", "+\t\t\t\t\t\tcomplete(e.astNode, e.qualifiedBinding, e.scope);\r", "+\t\t\t\t\t}\r", "+\t\t\t\t}\r", "+\t\t\t}\r", "+\t\t}\r", "+\t}\r", "-\tpublic void complete(ICompilationUnit sourceUnit, int completionPosition) {\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "666fbcac7cdce9a62a7c09af532cbf5d", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "57f58e2a83bf12a567b63842cf84a5fc12572160", "commitAfterChange": "9674e3cb2b45f11c40bb76a8bdb3c8663d35e93e", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 12, "signatureBeforeChange": "\r \t\r \tpublic void complete(IType type, char[] snippet, int position, char[][] localVariableTypeNames, char[][] localVariableNames, int[] localVariableModifiers, boolean isStatic)", "signatureAfterChange": "\r \t\r \tpublic void complete(IType type, char[] snippet, int position, char[][] localVariableTypeNames, char[][] localVariableNames, int[] localVariableModifiers, boolean isStatic)", "diff": ["-\t\t\r", "-\t\tTypeDeclaration typeDeclaration = converter.buildTypeDeclaration(type, compilationUnit, compilationResult, problemReporter);\r", "-\t\t\r", "-\t\tif(compilationUnit != null) {\t\r", "-\t\t\t// build AST from snippet\r", "-\t\t\tInitializer fakeInitializer = parseSnippeInitializer(snippet, position, localVariableTypeNames, localVariableNames, localVariableModifiers, isStatic);\r", "-\t\t\t\r", "-\t\t\t// merge AST\r", "-\t\t\tFieldDeclaration[] oldFields = typeDeclaration.fields;\r", "-\t\t\tFieldDeclaration[] newFields = new FieldDeclaration[oldFields.length + 1];\r", "-\t\t\tSystem.arraycopy(oldFields, 0, newFields, 0, oldFields.length);\r", "-\t\t\tnewFields[oldFields.length] = fakeInitializer;\r", "-\t\t\ttypeDeclaration.fields = newFields;\r", "-\t\t\tif(DEBUG) {\r", "-\t\t\t\tSystem.out.println(\"SNIPPET COMPLETION AST :\");\r", "-\t\t\t\tSystem.out.println(compilationUnit.toString());\r", "-\t\t\t}\r", "-\t\t\t\r", "-\t\t\tif (compilationUnit.types != null) {\r", "-\t\t\t\ttry {\r", "-\t\t\t\t\tlookupEnvironment.buildTypeBindings(compilationUnit);\r", "-\t\t\t\r", "-\t\t\t\t\tif ((unitScope = compilationUnit.scope) != null) {\r", "-\t\t\t\t\t\tlookupEnvironment.completeTypeBindings(compilationUnit, true);\r", "-\t\t\t\t\t\tcompilationUnit.scope.faultInTypes();\r", "-\t\t\t\t\t\tcompilationUnit.resolve();\r", "-\t\t\t\t\t}\r", "-\t\t\t\t} catch (CompletionNodeFound e) {\r", "-\t\t\t\t\t//\t\t\t\t\tcompletionNodeFound = true;\r", "-\t\t\t\t\tif (e.astNode != null) {\r", "-\t\t\t\t\t\t// if null then we found a problem in the completion node\r", "-\t\t\t\t\t\tcomplete(e.astNode, e.qualifiedBinding, e.scope);\r", "+\t\ttry {\r", "+\t\t\tTypeDeclaration typeDeclaration = converter.buildTypeDeclaration(type, compilationUnit, compilationResult, problemReporter);\r", "+\t\t\r", "+\t\t\tif(typeDeclaration != null) {\t\r", "+\t\t\t\t// build AST from snippet\r", "+\t\t\t\tInitializer fakeInitializer = parseSnippeInitializer(snippet, position, localVariableTypeNames, localVariableNames, localVariableModifiers, isStatic);\r", "+\t\t\t\t\r", "+\t\t\t\t// merge AST\r", "+\t\t\t\tFieldDeclaration[] oldFields = typeDeclaration.fields;\r", "+\t\t\t\tFieldDeclaration[] newFields = new FieldDeclaration[oldFields.length + 1];\r", "+\t\t\t\tSystem.arraycopy(oldFields, 0, newFields, 0, oldFields.length);\r", "+\t\t\t\tnewFields[oldFields.length] = fakeInitializer;\r", "+\t\t\t\ttypeDeclaration.fields = newFields;\r", "+\t\t\r", "+\t\t\t\tif(DEBUG) {\r", "+\t\t\t\t\tSystem.out.println(\"SNIPPET COMPLETION AST :\");\r", "+\t\t\t\t\tSystem.out.println(compilationUnit.toString());\r", "+\t\t\t\t}\r", "+\t\t\t\t\r", "+\t\t\t\tif (compilationUnit.types != null) {\r", "+\t\t\t\t\ttry {\r", "+\t\t\t\t\t\tlookupEnvironment.buildTypeBindings(compilationUnit);\r", "+\t\t\t\t\r", "+\t\t\t\t\t\tif ((unitScope = compilationUnit.scope) != null) {\r", "+\t\t\t\t\t\t\tlookupEnvironment.completeTypeBindings(compilationUnit, true);\r", "+\t\t\t\t\t\t\tcompilationUnit.scope.faultInTypes();\r", "+\t\t\t\t\t\t\tcompilationUnit.resolve();\r", "+\t\t\t\t\t\t}\r", "+\t\t\t\t\t} catch (CompletionNodeFound e) {\r", "+\t\t\t\t\t\t//\t\t\t\t\tcompletionNodeFound = true;\r", "+\t\t\t\t\t\tif (e.astNode != null) {\r", "+\t\t\t\t\t\t\t// if null then we found a problem in the completion node\r", "+\t\t\t\t\t\t\tcomplete(e.astNode, e.qualifiedBinding, e.scope);\r", "+\t\t\t\t\t\t}\r", "+\t\t} catch(JavaModelException e) {\r", "+\t\t\t// Do nothing\r"]}], "num": 3519}