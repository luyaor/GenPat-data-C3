{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6a673d3ed4ea35d49d0d7962d4e5d418", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3695ecb284ac8bd01e21007e9758789c", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/SourceMapper.java", "commitBeforeChange": "7ff0d09aa487a0631f946435eaa975868c23d1f5", "commitAfterChange": "39e213fa6f67cec1c2c3ab80a64ac8dcf4d5cf90", "methodNumberBeforeChange": 35, "methodNumberAfterChange": 35, "signatureBeforeChange": " \tprotected IType getType(String typeName)", "signatureAfterChange": " \tprotected IType getType(String typeName)", "diff": ["-\t\tif (this.binaryType.getElementName().equals(typeName))", "+\t\tif (typeName.length() == 0) {", "+\t\t\tIJavaElement classFile = this.binaryType.getParent();", "+\t\t\tString classFileName = classFile.getElementName();", "+\t\t\tStringBuffer newClassFileName = new StringBuffer();", "+\t\t\tint lastDollar = classFileName.lastIndexOf('$');", "+\t\t\tfor (int i = 0; i <= lastDollar; i++)", "+\t\t\t\tnewClassFileName.append(classFileName.charAt(i));", "+\t\t\tnewClassFileName.append(Integer.toString(this.anonymousCounter));", "+\t\t\tnewClassFileName.append(SuffixConstants.SUFFIX_class);", "+\t\t\tPackageFragment pkg = (PackageFragment) classFile.getParent();", "+\t\t\treturn new BinaryType(new ClassFile(pkg, newClassFileName.toString()), typeName);", "+\t\t} else if (this.binaryType.getElementName().equals(typeName))"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8e2e4a058058567ed5ebce445edb3e12", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/builder/IncrementalImageBuilder.java", "commitBeforeChange": "1146476ca138da09c36a16ea64250a150f60b014", "commitAfterChange": "e3d3c02cc33fd5166184422215f4903c5a405e0f", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "  protected void finishedWith(String sourceLocation, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException", "signatureAfterChange": "  protected void finishedWith(String sourceLocator, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException", "diff": ["-protected void finishedWith(String sourceLocation, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException {", "-\tchar[][] previousTypeNames = newState.getDefinedTypeNamesFor(sourceLocation);", "+protected void finishedWith(String sourceLocator, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException {", "+\tchar[][] previousTypeNames = newState.getDefinedTypeNamesFor(sourceLocator);", "-\tnext : for (int i = 0, x = previousTypeNames.length; i < x; i++) {", "+\tnext : for (int i = 0, l = previousTypeNames.length; i < l; i++) {", "-\t\tfor (int j = 0, y = definedTypeNames.size(); j < y; j++)", "+\t\tfor (int j = 0, m = definedTypeNames.size(); j < m; j++)", "-\t\tif (packagePath == null)", "-\t\t\tpackagePath = new Path(extractTypeNameFrom(sourceLocation)).removeLastSegments(1);", "+\t\tSourceFile sourceFile = (SourceFile) result.getCompilationUnit();", "+\t\tif (packagePath == null) {", "+\t\t\tint count = sourceFile.sourceLocation.sourceFolder.getFullPath().segmentCount();", "+\t\t\tpackagePath = sourceFile.resource.getFullPath().removeFirstSegments(count).removeLastSegments(1);", "+\t\t}", "-\t\t\tthis.secondaryTypesToRemove = new ArrayList();", "-\t\tsecondaryTypesToRemove.add(packagePath.append(new String(previous)));", "+\t\t\tthis.secondaryTypesToRemove = new SimpleLookupTable();", "+\t\tArrayList types = (ArrayList) secondaryTypesToRemove.get(sourceFile.sourceLocation.binaryFolder);", "+\t\tif (types == null)", "+\t\t\ttypes = new ArrayList(definedTypeNames.size());", "+\t\ttypes.add(packagePath.append(new String(previous)));", "+\t\tsecondaryTypesToRemove.put(sourceFile.sourceLocation.binaryFolder, types);", "-\tsuper.finishedWith(sourceLocation, result, mainTypeName, definedTypeNames, duplicateTypeNames);", "+\tsuper.finishedWith(sourceLocator, result, mainTypeName, definedTypeNames, duplicateTypeNames);"]}], "num": 5068}