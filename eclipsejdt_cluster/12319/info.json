{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "52a2e6de4b4d9bda5f80583310d7cf3d", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9ea9c7e081935880b401b8ef581c196a", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/Compiler.java", "commitBeforeChange": "a069ec3e155df34e1c3faf73c5e321c7b4b692f7", "commitAfterChange": "6dea5cf1ef2d860c99ae96c566fbaac1cc8d1d31", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": " \tpublic void compile(ICompilationUnit[] sourceUnits)", "signatureAfterChange": " \tpublic void compile(ICompilationUnit[] sourceUnits)", "diff": ["-\t\t\tbeginToCompile(sourceUnits);", "+\t\t\tif (this.annotationProcessorManager == null) {", "+\t\t\t\tbeginToCompile(sourceUnits);", "+\t\t\t} else {", "+\t\t\t\tICompilationUnit[] originalUnits = (ICompilationUnit[]) sourceUnits.clone(); // remember source units in case a source type collision occurs", "+\t\t\t\ttry {", "+\t\t\t\t\tbeginToCompile(sourceUnits);", "-\t\t\tif (this.annotationProcessorManager != null) {", "-\t\t\t\tprocessAnnotations();", "-\t\t\t\tif (!this.options.generateClassFiles) {", "-\t\t\t\t\t// -proc:only was set on the command line", "+\t\t\t\t\tprocessAnnotations();", "+\t\t\t\t\tif (!this.options.generateClassFiles) {", "+\t\t\t\t\t\t// -proc:only was set on the command line", "+\t\t\t\t\t\treturn;", "+\t\t\t\t\t}", "+\t\t\t\t} catch (SourceTypeCollisionException e) {", "+\t\t\t\t\treset();", "+\t\t\t\t\t// a generated type was referenced before it was created", "+\t\t\t\t\t// the compiler either created a MissingType or found a BinaryType for it", "+\t\t\t\t\t// so add the processor's generated files & start over,", "+\t\t\t\t\t// but remember to only pass the generated files to the annotation processor", "+\t\t\t\t\tint originalLength = originalUnits.length;", "+\t\t\t\t\tint newProcessedLength = e.newAnnotationProcessorUnits.length;", "+\t\t\t\t\tICompilationUnit[] combinedUnits = new ICompilationUnit[originalLength + newProcessedLength];", "+\t\t\t\t\tSystem.arraycopy(originalUnits, 0, combinedUnits, 0, originalLength);", "+\t\t\t\t\tSystem.arraycopy(e.newAnnotationProcessorUnits, 0, combinedUnits, originalLength, newProcessedLength);", "+\t\t\t\t\tthis.annotationProcessorStartIndex  = originalLength;", "+\t\t\t\t\tcompile(combinedUnits);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a051a068794a83a09121027238eeadc7", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/APTDispatchRunnable.java", "commitBeforeChange": "c0f8220101d45cc95e0339b31adfd53c34571071", "commitAfterChange": "f6e3b2cfdf325803724d69b4361d14343e55308a", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": " \t \tprivate void build()", "signatureAfterChange": " \t \tprivate void build()", "diff": ["-\t\t\t", "-\t\t\t// Construct build environment, this invokes the build inside a callback", "-\t\t\t// in order to keep open the DOM AST pipeline", "-\t\t\tBuildEnv.newBuildEnv( ", "-\t\t\t\t\t_filesWithAnnotation, ", "-\t\t\t\t\t_filesWithoutAnnotation, ", "-\t\t\t\t\t_aptProject.getJavaProject(),", "-\t\t\t\t\tbuildCallback);", "+\t\t\tboolean split = false;", "+\t\t\tif (SPLIT_FILES && !hasBatchFactory()) { // don't split the files if batch processors are present", "+\t\t\t\tsplit = _filesWithAnnotation.length > MAX_FILES_PER_ITERATION ? true : false;", "+\t\t\t}", "+\t\t\tif (!split) {", "+\t\t\t\t// Construct build environment, this invokes the build inside a callback", "+\t\t\t\t// in order to keep open the DOM AST pipeline", "+\t\t\t\tBuildEnv.newBuildEnv(", "+\t\t\t\t\t\t_filesWithAnnotation,", "+\t\t\t\t\t\t_filesWithoutAnnotation,", "+\t\t\t\t\t\t_aptProject.getJavaProject(),", "+\t\t\t\t\t\tbuildCallback);", "+\t\t\t} else {", "+\t\t\t\tfor (int index = 0; index < _filesWithAnnotation.length;) {", "+\t\t\t\t\tint numberToProcess = (index + MAX_FILES_PER_ITERATION) > _filesWithAnnotation.length ? _filesWithAnnotation.length - index : MAX_FILES_PER_ITERATION;", "+\t\t\t\t\tBuildContext[] filesToProcess = new BuildContext[numberToProcess];\t\t\t ", "+\t\t\t\t\tSystem.arraycopy(_filesWithAnnotation, index, filesToProcess, 0, numberToProcess);", "+\t\t\t\t\t// Construct build environment, this invokes the build inside a callback", "+\t\t\t\t\t// in order to keep open the DOM AST pipeline", "+\t\t\t\t\tBuildEnv.newBuildEnv( ", "+\t\t\t\t\t\t\tfilesToProcess, ", "+\t\t\t\t\t\t\t_filesWithoutAnnotation, ", "+\t\t\t\t\t\t\t_aptProject.getJavaProject(),", "+\t\t\t\t\t\t\tbuildCallback);", "+\t\t\t\t\t index += numberToProcess;", "+\t\t\t\t}", "+\t\t\t}"]}], "num": 12319}