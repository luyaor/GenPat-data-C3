{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c6804f86dcb65d04d66e57f4b9022310", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3ca94757902a20c76ba98c25bdc05d58", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/parser/Scanner.java", "commitBeforeChange": "c2e4e37266e7de5de53d856cd21d7160dee54d73", "commitAfterChange": "3afb78bfe1369061320a52bdb0707dc9413b95a5", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": " public void checkTaskTag(int commentStart, int commentEnd)", "signatureAfterChange": " public void checkTaskTag(int commentStart, int commentEnd)", "diff": ["+\tint foundTaskIndex = this.foundTaskCount;", "-\t\t\tbreak;", "-\t\t}", "-\t\tif (nextPos < 0) continue nextChar;", "-\t\t// extract message", "-\t\tchar c = this.source[nextPos];", "-\t\tint start = i; ", "-\t\tint msgStart = nextPos;", "-\t\tint end = -1;", "-\t\tfor (int j = nextPos; j < commentEnd; j++){", "-\t\t\tif ((c = this.source[j]) == '\\n' || c == '\\r'){", "-\t\t\t\tend = j - 1;", "-\t\t\t\ti = j+1;", "-\t\t\t\tbreak;", "+\t\t\tif (this.foundTaskTags == null){", "+\t\t\t\tthis.foundTaskTags = new char[5][];", "+\t\t\t\tthis.foundTaskMessages = new char[5][];", "+\t\t\t\tthis.foundTaskPriorities = new char[5][];", "+\t\t\t\tthis.foundTaskPositions = new int[5][];", "+\t\t\t} else if (this.foundTaskCount == this.foundTaskTags.length) {", "+\t\t\t\tSystem.arraycopy(this.foundTaskTags, 0, this.foundTaskTags = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "+\t\t\t\tSystem.arraycopy(this.foundTaskMessages, 0, this.foundTaskMessages = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "+\t\t\t\tSystem.arraycopy(this.foundTaskPriorities, 0, this.foundTaskPriorities = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "+\t\t\t\tSystem.arraycopy(this.foundTaskPositions, 0, this.foundTaskPositions = new int[this.foundTaskCount*2][], 0, this.foundTaskCount);", "+\t\t\tthis.foundTaskTags[this.foundTaskCount] = tag;", "+\t\t\tthis.foundTaskPriorities[this.foundTaskCount] = priority;", "+\t\t\tthis.foundTaskPositions[this.foundTaskCount] = new int[]{ i, -1 };", "+\t\t\tthis.foundTaskCount++;", "+\t\t\t", "+\t\t\ti = nextPos;", "-\t\tif (end < 0){", "-\t\t\tfor (int j = commentEnd-1; j >= nextPos; j--){", "+\t}", "+\t", "+\tfor (int i = foundTaskIndex; i < this.foundTaskCount; i++) {", "+\t\t// retrieve message start and end positions", "+\t\tint msgStart = this.foundTaskPositions[i][0] + this.foundTaskTags[i].length;", "+\t\tint end;", "+\t\tchar c;", "+\t\tif (i + 1 < this.foundTaskCount) {", "+\t\t\tend = this.foundTaskPositions[i + 1][0] - 1;", "+\t\t\tfor (int j = end; j >= msgStart; j--){", "-\t\t\tif (end < 0) end =commentEnd-1;", "+\t\t} else {", "+\t\t\tend = -1;", "+\t\t\tfor (int j = msgStart; j < commentEnd; j++){", "+\t\t\t\tif ((c = this.source[j]) == '\\n' || c == '\\r'){", "+\t\t\t\t\tend = j - 1;", "+\t\t\t\t\tbreak;", "+\t\t\t\t}", "+\t\t\t}", "+\t\t\tif (end < 0){", "+\t\t\t\tfor (int j = commentEnd-1; j >= msgStart; j--){", "+\t\t\t\t\tif ((c = this.source[j]) == '*') {", "+\t\t\t\t\t\tend = j-1;", "+\t\t\t\t\t\tbreak;", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t\tif (end < 0) end = commentEnd-1;", "+\t\t\t}", "+", "-\t\t// trim message", "-\t\twhile (CharOperation.isWhitespace(source[msgStart]) && msgStart <= end) msgStart++;", "+\t\t// trim the message", "+\t\twhile (CharOperation.isWhitespace(source[msgStart]) && msgStart <= end) msgStart++;", "+", "+\t\t// update the end position of the task", "+\t\tthis.foundTaskPositions[i][1] = end;", "-\t\tchar[] message = new char[end-msgStart+1];", "-\t\tSystem.arraycopy(source, msgStart, message, 0, end-msgStart+1);", "-\t\t\t\t", "-\t\tif (this.foundTaskTags == null){", "-\t\t\tthis.foundTaskTags = new char[5][];", "-\t\t\tthis.foundTaskMessages = new char[5][];", "-\t\t\tthis.foundTaskPriorities = new char[5][];", "-\t\t\tthis.foundTaskPositions = new int[5][];", "-\t\t} else if (this.foundTaskCount == this.foundTaskTags.length) {", "-\t\t\tSystem.arraycopy(this.foundTaskTags, 0, this.foundTaskTags = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "-\t\t\tSystem.arraycopy(this.foundTaskMessages, 0, this.foundTaskMessages = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "-\t\t\tSystem.arraycopy(this.foundTaskPriorities, 0, this.foundTaskPriorities = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "-\t\t\tSystem.arraycopy(this.foundTaskPositions, 0, this.foundTaskPositions = new int[this.foundTaskCount*2][], 0, this.foundTaskCount);", "-\t\t}", "-\t\tthis.foundTaskTags[this.foundTaskCount] = tag;", "-\t\tthis.foundTaskMessages[this.foundTaskCount] = message;", "-\t\tthis.foundTaskPriorities[this.foundTaskCount] = priority;", "-\t\tthis.foundTaskPositions[this.foundTaskCount] = new int[]{ start, end };", "-\t\tthis.foundTaskCount++;", "+\t\t// get the message source", "+\t\tfinal int messageLength = end-msgStart+1;", "+\t\tchar[] message = new char[messageLength];", "+", "+\t\tSystem.arraycopy(source, msgStart, message, 0, messageLength);", "+\t\tthis.foundTaskMessages[i] = message;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ed94687ef0627d4da5e983f3df9a6c89", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/parser/Scanner.java", "commitBeforeChange": "9156e33be70429042b1d72217c4197f996fdfb3a", "commitAfterChange": "0bbc1f10f38c090526549c38a7d30ff164b71a76", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " public void checkTaskTag(int commentStart, int commentEnd)", "signatureAfterChange": " public void checkTaskTag(int commentStart, int commentEnd)", "diff": ["-\tif (this.taskCount > 0 && this.taskPositions[this.taskCount-1][0] >= commentStart) {", "+\tif (this.foundTaskCount > 0 && this.foundTaskPositions[this.foundTaskCount-1][0] >= commentStart) {", "+\t\tchar[] tag = null;", "+\t\tchar[] priority = null;", "-\t\t\tchar[] tag = this.taskTags[itag];", "+\t\t\ttag = this.taskTags[itag];", "+\t\t\tpriority = ", "+\t\t\t\tthis.taskPriorities != null && itag < this.taskPriorities.length ?", "+\t\t\t\tthis.taskPriorities[itag] :", "+\t\t\t\tnull;", "-\t\tint msgStart = i; // to exlude tag use:   int msgStart = nextPos;", "+\t\tint msgStart = nextPos;", "-\t\twhile (source[msgStart] == ' ' && msgStart <= end) msgStart++;", "-\t\twhile (source[end] == ' ' && start <= end) end--;", "+\t\twhile (CharOperation.isWhitespace(source[msgStart]) && msgStart <= end) msgStart++;", "+\t\twhile (CharOperation.isWhitespace(source[end]) && msgStart <= end) end--;", "-\t\tif (this.taskMessages == null){", "-\t\t\tthis.taskMessages = new char[5][];", "-\t\t\tthis.taskPositions = new int[5][];", "-\t\t} else if (this.taskCount == this.taskMessages.length) {", "-\t\t\tSystem.arraycopy(this.taskMessages, 0, this.taskMessages = new char[this.taskCount*2][], 0, this.taskCount);", "-\t\t\tSystem.arraycopy(this.taskPositions, 0, this.taskPositions = new int[this.taskCount*2][], 0, this.taskCount);", "+\t\tif (this.foundTaskTags == null){", "+\t\t\tthis.foundTaskTags = new char[5][];", "+\t\t\tthis.foundTaskMessages = new char[5][];", "+\t\t\tthis.foundTaskPriorities = new char[5][];", "+\t\t\tthis.foundTaskPositions = new int[5][];", "+\t\t} else if (this.foundTaskCount == this.foundTaskTags.length) {", "+\t\t\tSystem.arraycopy(this.foundTaskTags, 0, this.foundTaskTags = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "+\t\t\tSystem.arraycopy(this.foundTaskMessages, 0, this.foundTaskMessages = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "+\t\t\tSystem.arraycopy(this.foundTaskPriorities, 0, this.foundTaskPriorities = new char[this.foundTaskCount*2][], 0, this.foundTaskCount);", "+\t\t\tSystem.arraycopy(this.foundTaskPositions, 0, this.foundTaskPositions = new int[this.foundTaskCount*2][], 0, this.foundTaskCount);", "-\t\tthis.taskMessages[this.taskCount] = message;", "-\t\tthis.taskPositions[this.taskCount] = new int[]{ start, end };", "-\t\tthis.taskCount++;", "+\t\tthis.foundTaskTags[this.foundTaskCount] = tag;", "+\t\tthis.foundTaskMessages[this.foundTaskCount] = message;", "+\t\tthis.foundTaskPriorities[this.foundTaskCount] = priority;", "+\t\tthis.foundTaskPositions[this.foundTaskCount] = new int[]{ start, end };", "+\t\tthis.foundTaskCount++;"]}], "num": 45892}