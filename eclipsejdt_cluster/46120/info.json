{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "56516f37c80378f1a70be38b2b2f85ec", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7e85b931116447fcd4a7bc655c45aa36", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "5e23ed7edfe961d34bd26ee29fb9ade957409733", "commitAfterChange": "28dd1050b46fae522d51f1c10cb06a79601770f3", "methodNumberBeforeChange": 29, "methodNumberAfterChange": 29, "signatureBeforeChange": " \tprivate void findFields( \t\tchar[] fieldName, \t\tFieldBinding[] fields, \t\tScope scope, \t\tObjectVector fieldsFound, \t\tObjectVector localsFound, \t\tboolean onlyStaticFields, \t\tReferenceBinding receiverType, \t\tInvocationSite invocationSite, \t\tScope invocationScope, \t\tboolean implicitCall, \t\tboolean canBePrefixed)", "signatureAfterChange": " \tprivate void findFields( \t\tchar[] fieldName, \t\tFieldBinding[] fields, \t\tScope scope, \t\tObjectVector fieldsFound, \t\tObjectVector localsFound, \t\tboolean onlyStaticFields, \t\tReferenceBinding receiverType, \t\tInvocationSite invocationSite, \t\tScope invocationScope, \t\tboolean implicitCall, \t\tboolean canBePrefixed)", "diff": ["-\t\tint fieldLength = fieldName.length;", "-\t\t\tif (fieldLength > field.name.length) continue next;", "-", "-\t\t\tif (!CharOperation.prefixEquals(fieldName, field.name, false /* ignore case */))\tcontinue next;", "+\t\t\tif (fieldName != null) {", "+\t\t\t\tif (fieldName.length > field.name.length) continue next;", "+\t\t\t\tif (!CharOperation.prefixEquals(fieldName, field.name, false /* ignore case */))\tcontinue next;", "+\t\t\t}", "+\t\t\t// Special case for javadoc completion", "+\t\t\tif (this.assistNodeInJavadoc > 0) {", "+\t\t\t\tif (invocationSite instanceof CompletionOnJavadocFieldReference) {", "+\t\t\t\t\tCompletionOnJavadocFieldReference fieldRef = (CompletionOnJavadocFieldReference) invocationSite;", "+\t\t\t\t\tif (fieldRef.receiver.isThis()) {", "+\t\t\t\t\t\tif (fieldRef.completeInText()) {", "+\t\t\t\t\t\t\tcompletion = CharOperation.concat(new char[] { '#' }, field.name);", "+\t\t\t\t\t\t}", "+\t\t\t\t\t} else if (fieldRef.completeInText()) {", "+\t\t\t\t\t\tif (fieldRef.receiver instanceof JavadocSingleTypeReference) {", "+\t\t\t\t\t\t\tJavadocSingleTypeReference typeRef = (JavadocSingleTypeReference) fieldRef.receiver;", "+\t\t\t\t\t\t\tcompletion = CharOperation.concat(typeRef.token, field.name, '#');", "+\t\t\t\t\t\t} else if (fieldRef.receiver instanceof JavadocQualifiedTypeReference) {", "+\t\t\t\t\t\t\tJavadocQualifiedTypeReference typeRef = (JavadocQualifiedTypeReference) fieldRef.receiver;", "+\t\t\t\t\t\t\tcompletion = CharOperation.concat(CharOperation.concatWith(typeRef.tokens, '.'), field.name, '#');", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t}", "+", "-\t\t\trelevance += computeRelevanceForCaseMatching(fieldName, field.name);", "+\t\t\tif (fieldName != null) relevance += computeRelevanceForCaseMatching(fieldName, field.name);", "-\t\t\tif(!this.requestor.isIgnored(CompletionProposal.FIELD_REF)) {", "+\t\t\t// Standard proposal", "+\t\t\tif (!this.requestor.isIgnored(CompletionProposal.FIELD_REF) && (this.assistNodeInJavadoc & CompletionOnJavadoc.ONLY_INLINE_TAG) == 0) {", "+\t\t\t\t}", "+\t\t\t}", "+", "+\t\t\t// Javadoc completions", "+\t\t\tif ((this.assistNodeInJavadoc & CompletionOnJavadoc.TEXT) != 0 && !this.requestor.isIgnored(CompletionProposal.JAVADOC_FIELD_REF)) {", "+\t\t\t\tchar[] javadocCompletion = inlineTagCompletion(completion, JavadocTagConstants.TAG_LINK);", "+\t\t\t\tCompletionProposal proposal = this.createProposal(CompletionProposal.JAVADOC_FIELD_REF, this.actualCompletionPosition);", "+\t\t\t\tproposal.setDeclarationSignature(getSignature(field.declaringClass));", "+\t\t\t\tproposal.setSignature(getSignature(field.type));", "+\t\t\t\tproposal.setDeclarationPackageName(field.declaringClass.qualifiedPackageName());", "+\t\t\t\tproposal.setDeclarationTypeName(field.declaringClass.qualifiedSourceName());", "+\t\t\t\tproposal.setPackageName(field.type.qualifiedPackageName());", "+\t\t\t\tproposal.setTypeName(field.type.qualifiedSourceName()); ", "+\t\t\t\tproposal.setName(field.name);", "+\t\t\t\tproposal.setCompletion(javadocCompletion);", "+\t\t\t\tproposal.setFlags(field.modifiers);", "+\t\t\t\tint start = (this.assistNodeInJavadoc & CompletionOnJavadoc.REPLACE_TAG) != 0 ? this.javadocTagPosition : this.startPosition;", "+\t\t\t\tproposal.setReplaceRange(start - this.offset, this.endPosition - this.offset);", "+\t\t\t\tproposal.setRelevance(relevance+R_INLINE_TAG);", "+\t\t\t\tthis.requestor.accept(proposal);", "+\t\t\t\tif(DEBUG) {", "+\t\t\t\t\tthis.printDebug(proposal);", "+\t\t\t\t}", "+\t\t\t\t// Javadoc value completion for static fields", "+\t\t\t\tif (field.isStatic() && !this.requestor.isIgnored(CompletionProposal.JAVADOC_VALUE_REF)) {", "+\t\t\t\t\tjavadocCompletion = inlineTagCompletion(completion, JavadocTagConstants.TAG_VALUE);", "+\t\t\t\t\tCompletionProposal valueProposal = this.createProposal(CompletionProposal.JAVADOC_VALUE_REF, this.actualCompletionPosition);", "+\t\t\t\t\tvalueProposal.setDeclarationSignature(getSignature(field.declaringClass));", "+\t\t\t\t\tvalueProposal.setSignature(getSignature(field.type));", "+\t\t\t\t\tvalueProposal.setDeclarationPackageName(field.declaringClass.qualifiedPackageName());", "+\t\t\t\t\tvalueProposal.setDeclarationTypeName(field.declaringClass.qualifiedSourceName());", "+\t\t\t\t\tvalueProposal.setPackageName(field.type.qualifiedPackageName());", "+\t\t\t\t\tvalueProposal.setTypeName(field.type.qualifiedSourceName()); ", "+\t\t\t\t\tvalueProposal.setName(field.name);", "+\t\t\t\t\tvalueProposal.setCompletion(javadocCompletion);", "+\t\t\t\t\tvalueProposal.setFlags(field.modifiers);", "+\t\t\t\t\tvalueProposal.setReplaceRange(start - this.offset, this.endPosition - this.offset);", "+\t\t\t\t\tvalueProposal.setRelevance(relevance+R_VALUE_TAG);", "+\t\t\t\t\tthis.requestor.accept(valueProposal);", "+\t\t\t\t\tif(DEBUG) {", "+\t\t\t\t\t\tthis.printDebug(valueProposal);", "+\t\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8d7abb1abd6a306c7df03d2d580efb53", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "5e23ed7edfe961d34bd26ee29fb9ade957409733", "commitAfterChange": "28dd1050b46fae522d51f1c10cb06a79601770f3", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 28, "signatureBeforeChange": " \tprivate void findConstructors( \t\tReferenceBinding currentType, \t\tTypeBinding[] argTypes, \t\tScope scope, \t\tInvocationSite invocationSite, \t\tboolean forAnonymousType)", "signatureAfterChange": " \tprivate void findConstructors( \t\tReferenceBinding currentType, \t\tTypeBinding[] argTypes, \t\tScope scope, \t\tInvocationSite invocationSite, \t\tboolean forAnonymousType)", "diff": ["-\t\t\t\t\t\tif (argTypes[a] != null) // can be null if it could not be resolved properly", "+\t\t\t\t\t\tif (argTypes[a] != null && argTypes[a].isValidBinding()) // can be null if it could not be resolved properly", "+", "+\t\t\t\t\t\t// Special case for completion in javadoc", "+\t\t\t\t\t\tif (this.assistNodeInJavadoc > 0) {", "+\t\t\t\t\t\t\tExpression receiver = null;", "+\t\t\t\t\t\t\tchar[] selector = null;", "+\t\t\t\t\t\t\tif (invocationSite instanceof CompletionOnJavadocAllocationExpression) {", "+\t\t\t\t\t\t\t\tCompletionOnJavadocAllocationExpression alloc = (CompletionOnJavadocAllocationExpression) invocationSite;", "+\t\t\t\t\t\t\t\treceiver = alloc.type;", "+\t\t\t\t\t\t\t} else if (invocationSite instanceof CompletionOnJavadocFieldReference) {", "+\t\t\t\t\t\t\t\tCompletionOnJavadocFieldReference fieldRef = (CompletionOnJavadocFieldReference) invocationSite;", "+\t\t\t\t\t\t\t\treceiver = fieldRef.receiver;", "+//\t\t\t\t\t\t\t\t if (fieldRef.completeTypeWithDefaultContructor()) relevance--;", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\tStringBuffer javadocCompletion = new StringBuffer();", "+\t\t\t\t\t\t\tif (receiver.isThis()) {", "+\t\t\t\t\t\t\t\tselector = (((JavadocImplicitTypeReference)receiver).token);", "+\t\t\t\t\t\t\t\tif ((this.assistNodeInJavadoc & CompletionOnJavadoc.TEXT) != 0) {", "+\t\t\t\t\t\t\t\t\tjavadocCompletion.append('#');", "+//\t\t\t\t\t\t\t\t\tjavadocCompletion.append(((JavadocImplicitTypeReference)receiver).token);", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t} else if (receiver instanceof JavadocSingleTypeReference) {", "+\t\t\t\t\t\t\t\tJavadocSingleTypeReference typeRef = (JavadocSingleTypeReference) receiver;", "+\t\t\t\t\t\t\t\tselector = typeRef.token;", "+\t\t\t\t\t\t\t\tif ((this.assistNodeInJavadoc & CompletionOnJavadoc.TEXT) != 0) {", "+\t\t\t\t\t\t\t\t\tjavadocCompletion.append(typeRef.token);", "+\t\t\t\t\t\t\t\t\tjavadocCompletion.append('#');", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t} else if (receiver instanceof JavadocQualifiedTypeReference) {", "+\t\t\t\t\t\t\t\tJavadocQualifiedTypeReference typeRef = (JavadocQualifiedTypeReference) receiver;", "+\t\t\t\t\t\t\t\tselector = typeRef.tokens[typeRef.tokens.length-1];", "+\t\t\t\t\t\t\t\tif ((this.assistNodeInJavadoc & CompletionOnJavadoc.TEXT) != 0) {", "+\t\t\t\t\t\t\t\t\tjavadocCompletion.append(CharOperation.concatWith(typeRef.tokens, '.'));", "+\t\t\t\t\t\t\t\t\tjavadocCompletion.append('#');", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t// Append parameters types", "+\t\t\t\t\t\t\tjavadocCompletion.append(selector);", "+\t\t\t\t\t\t\tjavadocCompletion.append('(');", "+\t\t\t\t\t\t\tif (constructor.parameters != null) {", "+\t\t\t\t\t\t\t\tfor (int p=0, ln=constructor.parameters.length; p<ln; p++) {", "+\t\t\t\t\t\t\t\t\tif (p>0) javadocCompletion.append(\", \"); //$NON-NLS-1$", "+\t\t\t\t\t\t\t\t\tTypeBinding argTypeBinding = constructor.parameters[p];", "+\t\t\t\t\t\t\t\t\tcreateType(argTypeBinding.erasure(), javadocCompletion);", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\tjavadocCompletion.append(')');", "+\t\t\t\t\t\t\tcompletion = javadocCompletion.toString().toCharArray();", "+\t\t\t\t\t\t} ", "+\t\t\t\t\t\t// Create standard proposal", "-\t\t\t\t\t\tif(!this.requestor.isIgnored(CompletionProposal.METHOD_REF)) {", "+\t\t\t\t\t\tif(!this.requestor.isIgnored(CompletionProposal.METHOD_REF) && (this.assistNodeInJavadoc & CompletionOnJavadoc.ONLY_INLINE_TAG) == 0) {", "-\t\t\t\t\t\t\tproposal.setReplaceRange(this.endPosition - this.offset, this.endPosition - this.offset);", "+\t\t\t\t\t\t\tint start = (this.assistNodeInJavadoc > 0) ? this.startPosition : this.endPosition;", "+\t\t\t\t\t\t\tproposal.setReplaceRange(start - this.offset, this.endPosition - this.offset);", "+\t\t\t\t\t\t\tif(parameterNames != null) proposal.setParameterNames(parameterNames);", "+\t\t\t\t\t\t\tthis.requestor.accept(proposal);", "+\t\t\t\t\t\t\tif(DEBUG) {", "+\t\t\t\t\t\t\t\tthis.printDebug(proposal);", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tif ((this.assistNodeInJavadoc & CompletionOnJavadoc.TEXT) != 0 && !this.requestor.isIgnored(CompletionProposal.JAVADOC_METHOD_REF)) {", "+\t\t\t\t\t\t\tchar[] javadocCompletion = inlineTagCompletion(completion, JavadocTagConstants.TAG_LINK);", "+\t\t\t\t\t\t\tCompletionProposal proposal = this.createProposal(CompletionProposal.JAVADOC_METHOD_REF, this.actualCompletionPosition);", "+\t\t\t\t\t\t\tproposal.setDeclarationSignature(getSignature(currentType));", "+\t\t\t\t\t\t\tproposal.setSignature(getSignature(constructor));", "+\t\t\t\t\t\t\tMethodBinding original = constructor.original();", "+\t\t\t\t\t\t\tif(original != constructor) {", "+\t\t\t\t\t\t\t\tproposal.setOriginalSignature(getSignature(original));", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\tproposal.setDeclarationPackageName(currentType.qualifiedPackageName());", "+\t\t\t\t\t\t\tproposal.setDeclarationTypeName(currentType.qualifiedSourceName());", "+\t\t\t\t\t\t\tproposal.setParameterPackageNames(parameterPackageNames);", "+\t\t\t\t\t\t\tproposal.setParameterTypeNames(parameterTypeNames);", "+\t\t\t\t\t\t\t//proposal.setPackageName(null);", "+\t\t\t\t\t\t\t//proposal.setTypeName(null);", "+\t\t\t\t\t\t\tproposal.setName(currentType.sourceName());", "+\t\t\t\t\t\t\tproposal.setIsContructor(true);", "+\t\t\t\t\t\t\tproposal.setCompletion(javadocCompletion);", "+\t\t\t\t\t\t\tproposal.setFlags(constructor.modifiers);", "+\t\t\t\t\t\t\tint start = (this.assistNodeInJavadoc > 0) ? this.startPosition : this.endPosition;", "+\t\t\t\t\t\t\tif ((this.assistNodeInJavadoc & CompletionOnJavadoc.REPLACE_TAG) != 0) start = this.javadocTagPosition;", "+\t\t\t\t\t\t\tproposal.setReplaceRange(start - this.offset, this.endPosition - this.offset);", "+\t\t\t\t\t\t\tproposal.setRelevance(relevance+R_INLINE_TAG);"]}], "num": 46120}