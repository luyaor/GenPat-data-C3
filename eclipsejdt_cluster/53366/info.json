{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "03edd2e8c73edb7daa5730b3c22b5b70", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "00b73e982d2bbc1e336560634bb52abc", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/codegen/ConstantPool.java", "commitBeforeChange": "45e574c9370a9e1fe1175a8641ff2dc7a4b4a6e7", "commitAfterChange": "c17970bb54810597f5d28802d36bfac65d844634", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 12, "signatureBeforeChange": " private int literalIndexForField(char[] name, char[] signature)", "signatureAfterChange": " public int literalIndexForNameAndType(char[] name, char[] signature)", "diff": ["-private int literalIndexForField(char[] name, char[] signature) {", "-\tint index = getFromNameAndTypeCache(name, signature);", "-\tif (index == -1) {", "+public int literalIndexForNameAndType(char[] name, char[] signature) {", "+\tint index;", "+\tif ((index = putInNameAndTypeCacheIfAbsent(name, signature, currentIndex)) < 0) {", "-\t\tint nameIndex = literalIndex(name);", "-\t\tint typeIndex = literalIndex(signature);", "-\t\tindex = putInNameAndTypeCache(name, signature, currentIndex++);", "-\t\tif (index > 0xFFFF){", "+\t\tcurrentIndex++;", "+\t\tif ((index = -index) > 0xFFFF){", "-\t\twriteU2(nameIndex);", "-\t\twriteU2(typeIndex);", "-\t}", "-\treturn index;", "-}", "+\t\tint nameIndexOffset = this.currentOffset;", "+\t\tif (currentOffset + 4 >= poolContent.length) {", "+\t\t\tresizePoolContents(4);", "+\t\tcurrentOffset+=4;", "+\t\t", "+\t\tfinal int nameIndex = literalIndex(name);", "+\t\tfinal int typeIndex = literalIndex(signature);", "+\t\tpoolContent[nameIndexOffset++] = (byte) (nameIndex >> 8);", "+\t\tpoolContent[nameIndexOffset++] = (byte) nameIndex;", "+\t\tpoolContent[nameIndexOffset++] = (byte) (typeIndex >> 8);", "+\t\tpoolContent[nameIndexOffset] = (byte) typeIndex;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0e34f08fa9af874cff2df4a77f869970", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/codegen/ConstantPool.java", "commitBeforeChange": "45e574c9370a9e1fe1175a8641ff2dc7a4b4a6e7", "commitAfterChange": "c17970bb54810597f5d28802d36bfac65d844634", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 13, "signatureBeforeChange": " public int literalIndex(FieldBinding aFieldBinding)", "signatureAfterChange": " public int literalIndexForField(char[] declaringClass, char[] name, char[] signature)", "diff": ["- */", "-public int literalIndex(FieldBinding aFieldBinding) {", "-\tint index;", "-\tfinal char[] name = aFieldBinding.name;", "-\tfinal char[] signature = aFieldBinding.type.signature();", "-\tfinal char[] declaringClassConstantPoolName = aFieldBinding.declaringClass.constantPoolName();", "-\tif ((index = getFromCache(declaringClassConstantPoolName, name, signature)) < 0) {", "-\t\t// The entry doesn't exit yet", "-\t\tint classIndex = literalIndexForType(declaringClassConstantPoolName);", "-\t\tint nameAndTypeIndex = literalIndexForFields(literalIndex(name), literalIndex(signature), name, signature);", "-\t\tindex = putInCache(declaringClassConstantPoolName, name, signature, currentIndex++);", "-\t\tif (index > 0xFFFF){", "-\t\t\tthis.classFile.referenceBinding.scope.problemReporter().noMoreAvailableSpaceInConstantPool(this.classFile.referenceBinding.scope.referenceType());", "-\t\twriteU1(FieldRefTag);", "-\t\twriteU2(classIndex);", "-\t\twriteU2(nameAndTypeIndex);", "-\t}", "-\treturn index;", "-}", "+\tint index;", "+\tif ((index = putInCacheIfAbsent(declaringClass, name, signature, this.currentIndex)) < 0) {", "+\t\tthis.currentIndex++;", "+\t\t// doesn't exist yet", "+\t\tif ((index = -index) > 0xFFFF){", "+\t\tint classIndexOffset = this.currentOffset;", "+\t\tif (currentOffset + 4 >= poolContent.length) {", "+\t\t\tresizePoolContents(4);", "+\t\tcurrentOffset+=4;", "+\t\t", "+\t\tfinal int classIndex = literalIndexForType(declaringClass);", "+\t\tfinal int nameAndTypeIndex = literalIndexForNameAndType(name, signature);", "+", "+\t\tpoolContent[classIndexOffset++] = (byte) (classIndex >> 8);", "+\t\tpoolContent[classIndexOffset++] = (byte) classIndex;", "+\t\tpoolContent[classIndexOffset++] = (byte) (nameAndTypeIndex >> 8);", "+\t\tpoolContent[classIndexOffset] = (byte) nameAndTypeIndex;\t\t"]}], "num": 53366}