{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c1ece75314325052e0b554d84d3192f8", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4b4d8586add03f2b8562c52e4ce7c08d", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/APTDispatch.java", "commitBeforeChange": "835454076c7c84a3d008630e11d7802ddd16d580", "commitAfterChange": "dfc6a6fda29de48e066662fb088bf2e300f9b1e1", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": "  \tpublic static APTResult runAPTDuringBuild( \t\t\tfinal List<AnnotationProcessorFactory> factories, IFile file, \t\t\tIJavaProject javaProj)", "signatureAfterChange": "\t \tpublic static APTResult runAPTDuringBuild( \t\t\tfinal List<AnnotationProcessorFactory> factories, final IFile file, \t\t\tfinal IJavaProject javaProj)", "diff": ["-", "+{\t", "-\t\t\tfinal List<AnnotationProcessorFactory> factories, IFile file,", "-\t\t\tIJavaProject javaProj) {", "-\t\t", "-\t\t//", "-\t\t//  bail-out early if there aren't factories, or if there aren't any annotation instances", "-\t\t// ", "-\t\tif ( factories == null || factories.size() == 0  || ! AptUtil.hasAnnotationInstance( file ) )", "-\t\t{", "-\t\t\tif ( DEBUG ) trace( \"runAPTDuringBuild: leaving early because there are no factories or annotation instances\");", "-\t\t\tSet<IFile> deletedFiles = cleanupAllGeneratedFilesForParent( file );", "-\t\t\tif ( deletedFiles.size() == 0 )", "-\t\t\t\treturn EMPTY_APT_RESULT;", "-\t\t\telse", "-\t\t\t\treturn new APTResult( (Set<IFile>)Collections.emptySet(), deletedFiles, (Set<String>)Collections.emptySet() );", "-\t\t}", "-\t\t\t\t\t", "-\t\tProcessorEnvImpl processorEnv = ProcessorEnvImpl", "-\t\t\t\t.newProcessorEnvironmentForBuild( file, javaProj);", "-\t\tAPTResult result = runAPT(factories, processorEnv);", "-\t\treturn result;", "+\t\t\tfinal List<AnnotationProcessorFactory> factories, final IFile file,", "+\t\t\tfinal IJavaProject javaProj) ", "+\t{", "+\t\treturn runAPT( factories, javaProj, file, null );"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "76e087ed3b6624a8c12edddc61cd62de", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/APTDispatchRunnable.java", "commitBeforeChange": "6cb413dbd992ad73f847d7b4e14e78f1406fa2fc", "commitAfterChange": "8659b871eae5c2008485cfb120ce2c8f8ecbfe04", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 21, "signatureBeforeChange": " \tprivate void cleanupNoLongerGeneratedFiles( \t\t\tBuildContext parent, \t\t\tSet<IFile> lastGeneratedFiles,  \t\t\tSet<IFile> newGeneratedFiles, \t\t\tGeneratedFileManager gfm,\t\t \t\t\tBuildEnv processorEnv, \t\t\tCollection<IFile> deleted)", "signatureAfterChange": " \tprivate void cleanupNoLongerGeneratedFiles( \t\t\tIFile parentFile, \t\t\tSet<IFile> newGeneratedFiles, \t\t\tGeneratedFileManager gfm,\t\t \t\t\tBuildEnv processorEnv, \t\t\tCollection<IFile> deleted)", "diff": ["-\t//       Do not call unless caller is sure this is during build phase.", "+\t */", "-\t\t\tBuildContext parent,", "-\t\t\tSet<IFile> lastGeneratedFiles, ", "+\t\t\tIFile parentFile,", "-\t{\t", "-\t\tfinal int numLastGeneratedFiles = lastGeneratedFiles.size();", "-\t\t// make a copy into an array to avoid concurrent modification exceptions", "-\t\tIFile[] files = lastGeneratedFiles.toArray( new IFile[ numLastGeneratedFiles ] );", "-\t\t", "-\t\tfor ( IFile f : files )", "-\t\t{", "-\t\t\tif ( ! newGeneratedFiles.contains( f ) )", "-\t\t\t{", "-\t\t\t\tfinal IFile parentFile = parent.getFile();", "-\t\t\t\tif ( AptPlugin.DEBUG ) ", "-\t\t\t\t\ttrace( \"runAPT:  File \" + f + \" is no longer a generated file for \" + parentFile,  //$NON-NLS-1$ //$NON-NLS-2$", "-\t\t\t\t\t\t\tprocessorEnv );", "-\t\t\t\ttry", "-\t\t\t\t{", "-\t\t\t\t\tif ( gfm.deleteGeneratedFile( f, parentFile, null ) )", "-\t\t\t\t\t\tdeleted.add( f );", "-\t\t\t\t}", "-\t\t\t\tcatch ( CoreException ce )", "-\t\t\t\t{", "-\t\t\t\t\tAptPlugin.log(ce, \"Could not clean up generated files\"); //$NON-NLS-1$", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "+\t{", "+\t\tgfm.deleteObsoleteFilesAfterBuild(parentFile, newGeneratedFiles);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e41933c0e87c0e2668c9d5ffc9ed81d2", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/APTDispatch.java", "commitBeforeChange": "835454076c7c84a3d008630e11d7802ddd16d580", "commitAfterChange": "dfc6a6fda29de48e066662fb088bf2e300f9b1e1", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " \tpublic static APTResult runAPTDuringReconcile( \t\t\tfinal List<AnnotationProcessorFactory> factories, \t\t\tICompilationUnit compilationUnit, IJavaProject javaProj)", "signatureAfterChange": " \tpublic static APTResult runAPTDuringReconcile( \t\t\tfinal List<AnnotationProcessorFactory> factories, \t\t\tICompilationUnit compilationUnit, IJavaProject javaProj)", "diff": ["-\t\t\tICompilationUnit compilationUnit, IJavaProject javaProj) {\t\t", "+\t\t\tICompilationUnit compilationUnit, IJavaProject javaProj) ", "+\t{", "+\t\treturn runAPT( factories, javaProj, null, compilationUnit );", "+\t}", "-\t\t//", "-\t\t//  bail-out early if there aren't factories or if there arent any annotation instances", "-\t\t// ", "-\t\tif ( factories == null || factories.size() == 0 || ! AptUtil.hasAnnotationInstance( compilationUnit ))", "-\t\t\tif ( DEBUG ) trace( \"runAPTDuringReconcile: leaving early because there are no factories or annotation instances\");", "-\t\t\tcleanupAllGeneratedFilesForParent( (IFile)compilationUnit.getResource() );", "-\t\t\treturn EMPTY_APT_RESULT;", "-", "-\t\tProcessorEnvImpl processorEnv = ProcessorEnvImpl", "-\t\t\t\t.newProcessorEnvironmentForReconcile(compilationUnit, javaProj);", "-\t\treturn runAPT(factories, processorEnv);", "-\t}"]}], "num": 62989}