{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "beda9335d75bf8dd43e77858d893fa17", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "95b84af7308eb6fdeba56168dd116ce0", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/JavaProject.java", "commitBeforeChange": "a9418855905ec3893c6b4d120dab4313f397185e", "commitAfterChange": "57b4d27e30475beb9493c429d9900b65333bbe6c", "methodNumberBeforeChange": 107, "methodNumberAfterChange": 107, "signatureBeforeChange": " \tpublic void setOptions(Map newOptions)", "signatureAfterChange": " \tpublic void setOptions(Map newOptions)", "diff": ["-\t\tPreferences preferences;", "-\t\tsetPreferences(preferences = new Preferences()); // always reset (26255)", "+\t\tPreferences preferences = getPreferences();", "+\t\t\t", "+\t\t// reset to default all options not in new map", "+\t\t// @see https://bugs.eclipse.org/bugs/show_bug.cgi?id=26255", "+\t\t// @see https://bugs.eclipse.org/bugs/show_bug.cgi?id=49691", "+\t\tString[] pNames = preferences.propertyNames();", "+\t\tint ln = pNames.length;", "+\t\tfor (int i=0; i<ln; i++) {", "+\t\t\tString key = pNames[i];", "+\t\t\tif (newOptions == null || !newOptions.containsKey(key)) {", "+\t\t\t\tpreferences.setToDefault(key); // set default => remove from preferences table", "+\t\t\t}", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bc06fe99244f80eb063698a7580ec408", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/env/EncodedFileOutputStream.java", "commitBeforeChange": "6a6a9c5ecab638cf968cf598ab3f2aad56cf0138", "commitAfterChange": "06158a1e7307576c7e89eca6088d58a19d2fd064", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " \t \t@Override \tpublic void close() throws IOException", "signatureAfterChange": " \t \t@Override \tpublic void close() throws IOException", "diff": ["+\t\t\t", "+\t\t\t// Need to check for source control on the resources encoding file", "+\t\t\t// https://bugs.eclipse.org/bugs/show_bug.cgi?id=190268", "+\t\t\tIWorkspace ws = ResourcesPlugin.getWorkspace();", "+\t\t\t", "+\t\t\t// Yuck -- we need to hardcode the location of the prefs file for file encoding", "+\t\t\tIFile resourceFile = _file.getProject().getFile(\".settings/org.eclipse.core.resources.prefs\"); //$NON-NLS-1$", "+\t\t\tIStatus result = ws.validateEdit(new IFile[]{resourceFile}, IWorkspace.VALIDATE_PROMPT);", "+\t\t\tif (result.getSeverity() == IStatus.CANCEL) {", "+\t\t\t\t// User cancelled the checkout. Don't try to edit the encoding for the file", "+\t\t\t\treturn;", "+\t\t\t}"]}], "num": 71054}