{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0eb1db7f238467ca8f3b806f6830be33", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "735d8bfca07ecdcb9c980ea5cc36e37c", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CreateElementInCUOperation.java", "commitBeforeChange": "90d481edc9060cc498a8f085b08186108312e37b", "commitAfterChange": "f3a3c06f6e68ab7680c250209b9759ac3d56fec6", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 8, "signatureBeforeChange": " \tprotected void generateNewCompilationUnitDOM(ICompilationUnit cu) throws JavaModelException", "signatureAfterChange": " \tprotected void generateNewCompilationUnitAST(ICompilationUnit cu) throws JavaModelException", "diff": ["-    // TODO - JDOM - remove once model ported off of JDOM", "-\tprotected void generateNewCompilationUnitDOM(ICompilationUnit cu) throws JavaModelException {", "-\t\tIBuffer buffer = cu.getBuffer();", "-\t\tif (buffer == null) return;", "-\t\tchar[] prevSource = buffer.getCharacters();", "-\t\tif (prevSource == null) return;", "-\t\t// create a JDOM for the compilation unit", "-\t\tfCUDOM = (new DOMFactory()).createCompilationUnit(prevSource, cu.getElementName());", "-\t\tIDOMNode child = generateElementDOM();", "+\t */", "+\tprotected void generateNewCompilationUnitAST(ICompilationUnit cu) throws JavaModelException {", "+\t\tthis.cuAST = parse(cu);", "+\t\t", "+\t\tAST ast = this.cuAST.getAST();", "+\t\tASTRewrite rewriter = ASTRewrite.create(ast);", "+\t\tIDocument document = getDocument(cu);", "+\t\tASTNode child = generateElementAST(rewriter, document, cu);", "-\t\t\tinsertDOMNode(fCUDOM, child);", "+\t\t\tASTNode parent = ((JavaElement) getParentElement()).findNode(this.cuAST);", "+\t\t\tif (parent == null)", "+\t\t\t\tparent = this.cuAST;", "+\t\t\tinsertASTNode(rewriter, parent, child);", "+\t\t\tapply(rewriter, document);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "93c770e0ab9b4bbf211b80485a3ce886", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/DeleteElementsOperation.java", "commitBeforeChange": "758f55a5a64497d7398f91effe575e974d834411", "commitAfterChange": "a920298c522cfd65cad97a6c929cd34516c3baed", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 3, "signatureBeforeChange": "\r protected void processElement(IJavaElement element) throws JavaModelException", "signatureAfterChange": "\r protected void processElement(IJavaElement element) throws JavaModelException", "diff": ["-\tIDOMCompilationUnit cuDOM = fFactory.createCompilationUnit(cu.getBuffer().getCharacters(), cu.getElementName());\r", "+\tIBuffer buffer = cu.getBuffer();\r", "-\tfor (int i = 0; i < cuElements.length; i++) {\r", "+\tfor (int i = 0, length = cuElements.length; i < length; i++) {\r", "-\t\t\tIDOMNode node = ((JavaElement) e).findNode(cuDOM);\r", "+\t\t\tIDOMCompilationUnit cuDOM = fFactory.createCompilationUnit(buffer.getCharacters(), cu.getElementName());\r", "+\t\t\tDOMNode node = (DOMNode)((JavaElement) e).findNode(cuDOM);\r", "-\t\t\tnode.remove();\r", "+\t\t\tint startPosition = node.getStartPosition();\r", "+\t\t\tbuffer.replace(startPosition, node.getEndPosition() - startPosition + 1, NO_CHAR);\r", "-\t\tcommitChanges(cuDOM, cu);\r", "-\t\tif (!cu.isWorkingCopy()) { // if unit is working copy, then commit will have already fired the delta\r", "+\t\tcu.save(getSubProgressMonitor(1), fForce);\r", "+\t\tif (!cu.isWorkingCopy()) { // if unit is working copy, then save will have already fired the delta\r", "+\t\t\tthis.hasModifiedResource = true;\r"]}], "num": 23451}