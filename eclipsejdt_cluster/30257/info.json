{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "698f856d1d42840e85c989b4e6fa667a", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "54339ef753168597bf3a7bab4b68a7b6", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/JavaCore.java", "commitBeforeChange": "f51d6f5a0e9a386694d73d0c3aec5b18e2ce1002", "commitAfterChange": "4ec516fd83ba9f8d854c904c0afabe8bb5fc0412", "methodNumberBeforeChange": 51, "methodNumberAfterChange": 51, "signatureBeforeChange": " \tpublic static void setClasspathContainer(IPath containerPath, final IJavaProject[] affectedProjects, IClasspathContainer[] respectiveContainers, IProgressMonitor monitor) throws JavaModelException", "signatureAfterChange": " \tpublic static void setClasspathContainer(IPath containerPath, final IJavaProject[] affectedProjects, IClasspathContainer[] respectiveContainers, IProgressMonitor monitor) throws JavaModelException", "diff": ["-\t", "+\t\t//TODO: need support for avoiding reentering calls (through getResolvedClasspath", "+", "-\t", "+\t\t\t", "-\t\t\tMap perProjectContainers = (Map)JavaModelManager.Containers.get(affectedProject);", "-\t\t\tif (perProjectContainers == null){", "-\t\t\t\tperProjectContainers = new HashMap();", "-\t\t\t\tJavaModelManager.Containers.put(affectedProject, perProjectContainers);", "-\t\t\t} else {", "-\t\t\t\tIClasspathContainer oldContainer = (IClasspathContainer) perProjectContainers.get(containerPath);", "-\t\t\t\tif (oldContainer != null && oldContainer.equals(respectiveContainers[i])){", "-\t\t\t\t\taffectedProjects[i] = null; // filter out this project - container did not change", "-\t\t\t\t\tcontinue;", "+\t\t\tIClasspathContainer oldContainer = JavaModelManager.containerGet(affectedProject, containerPath);", "+\t\t\tif (oldContainer == JavaModelManager.ContainerInitializationInProgress) {", "+\t\t\t\tMap previousContainerValues = (Map)JavaModelManager.PreviousSessionContainers.get(affectedProject);", "+\t\t\t\tif (previousContainerValues != null){", "+\t\t\t\t\tIClasspathContainer previousContainer = (IClasspathContainer)previousContainerValues.get(containerPath);", "+\t\t\t\t\tif (previousContainer != null) {", "+\t\t\t\t\t\tif (JavaModelManager.CP_RESOLVE_VERBOSE){", "+\t\t\t\t\t\t\tSystem.out.println(\"CPContainer INIT - reentering access to project container: [\"+affectedProject.getElementName()+\"] \" + containerPath + \" during its initialization, will see previous value: \"+ previousContainer); //$NON-NLS-1$ //$NON-NLS-2$", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tJavaModelManager.containerPut(affectedProject, containerPath, previousContainer); ", "+\t\t\t\t\t}", "+\t\t\t\t\toldContainer = previousContainer;", "+\t\t\tif (oldContainer != null && oldContainer.equals(respectiveContainers[i])){// TODO: could improve to only compare entries", "+\t\t\t\taffectedProjects[i] = null; // filter out this project - container did not change", "+\t\t\t\tcontinue;", "+\t\t\t}", "-\t\t\t\tremaining++;", "+\t\t\t\tremaining++; ", "-\t\t\tperProjectContainers.put(containerPath, newContainer);", "+\t\t\tJavaModelManager.containerPut(affectedProject, containerPath, newContainer);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6c3337afd1fbb87cbc15d89c22a44f48", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/JavaCore.java", "commitBeforeChange": "0490e8b1eeb14a2cc033060047b6bcfdf849f8a0", "commitAfterChange": "68c4f604f354a3213e3cb188ddbd758a47497f3f", "methodNumberBeforeChange": 55, "methodNumberAfterChange": 55, "signatureBeforeChange": " \tpublic static void setClasspathContainer(final IPath containerPath, IJavaProject[] affectedProjects, IClasspathContainer[] respectiveContainers, IProgressMonitor monitor) throws JavaModelException", "signatureAfterChange": " \tpublic static void setClasspathContainer(final IPath containerPath, IJavaProject[] affectedProjects, IClasspathContainer[] respectiveContainers, IProgressMonitor monitor) throws JavaModelException", "diff": ["-\t\t\tif (newContainer == null) newContainer = JavaModelManager.ContainerInitializationInProgress; // 30920 - prevent infinite loop", "+\t\t\tif (newContainer == null) newContainer = JavaModelManager.CONTAINER_INITIALIZATION_IN_PROGRESS; // 30920 - prevent infinite loop", "-\t\t\t\tJavaModelManager.containerPut(affectedProject, containerPath, newContainer);", "+\t\t\t\tJavaModelManager.getJavaModelManager().containerPut(affectedProject, containerPath, newContainer);", "-\t\t\tIClasspathContainer oldContainer = JavaModelManager.containerGet(affectedProject, containerPath);", "-\t\t\tif (oldContainer == JavaModelManager.ContainerInitializationInProgress) {", "-\t\t\t\tMap previousContainerValues = (Map)JavaModelManager.PreviousSessionContainers.get(affectedProject);", "+\t\t\tIClasspathContainer oldContainer = JavaModelManager.getJavaModelManager().containerGet(affectedProject, containerPath);", "+\t\t\tif (oldContainer == JavaModelManager.CONTAINER_INITIALIZATION_IN_PROGRESS) {", "+\t\t\t\tMap previousContainerValues = (Map)JavaModelManager.getJavaModelManager().previousSessionContainers.get(affectedProject);", "-\t\t\t\t\t\tJavaModelManager.containerPut(affectedProject, containerPath, previousContainer); ", "+\t\t\t\t\t\tJavaModelManager.getJavaModelManager().containerPut(affectedProject, containerPath, previousContainer); ", "-\t\t\tJavaModelManager.containerPut(affectedProject, containerPath, newContainer);", "+\t\t\tJavaModelManager.getJavaModelManager().containerPut(affectedProject, containerPath, newContainer);", "-\t\t\t\t\tJavaModelManager.containerPut(affectedProjects[i], containerPath, null); // reset init in progress marker", "+\t\t\t\t\tJavaModelManager.getJavaModelManager().containerPut(affectedProjects[i], containerPath, null); // reset init in progress marker"]}], "num": 30257}