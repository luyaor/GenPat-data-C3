{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ead01f2aa90b1960b49383c631423522", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "32c4de98f9d78474f1beebb77539726b", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core.tests.model/src/org/eclipse/jdt/core/tests/dom/ASTConverterTestAST3_2.java", "commitBeforeChange": "d5bb78582d4992003bc3f1aa67226d9e44bea956", "commitAfterChange": "08113b25540cfe36a65c669bfa7d7d71cc964096", "methodNumberBeforeChange": 323, "methodNumberAfterChange": 323, "signatureBeforeChange": " \tpublic void test0676() throws JavaModelException", "signatureAfterChange": " \tpublic void test0676() throws JavaModelException", "diff": ["-\t\tICompilationUnit workingCopy = null;", "-\t\ttry {", "-\t\t\tString contents =", "-\t\t\t\t\"package p;\\n\" +", "-\t\t\t\t\"public class X {\\n\" + ", "-\t\t\t\t\"\tB foo() {\\n\" + ", "-\t\t\t\t\"\t}\\n\" + ", "-\t\t\t\t\"}\";", "-\t\t\tworkingCopy = getWorkingCopy(\"/Converter/src/p/X.java\", true/*resolve*/);", "-\t\t\tworkingCopy.getBuffer().setContents(contents);", "-\t\t\tASTNode node = runConversion(AST.JLS3, workingCopy, true, true, true);", "-\t\t\tassertEquals(\"Not a compilation unit\", ASTNode.COMPILATION_UNIT, node.getNodeType());", "-\t\t\tCompilationUnit unit = (CompilationUnit) node;", "-\t\t\tassertTrue(\"no binding recovery\", unit.getAST().hasBindingsRecovery());", "-\t\t\tassertTrue(\"no statement recovery\", unit.getAST().hasStatementsRecovery());", "-\t\t\tassertTrue(\"no binding resolution\", unit.getAST().hasResolvedBindings());", "-\t\t\tString expectedError = \"B cannot be resolved to a type\";", "-\t\t\tassertProblemsSize(unit, 1, expectedError);", "-\t\t\tassertTrue(\"No binding recovery\", unit.getAST().hasBindingsRecovery());", "-\t\t\tnode = getASTNode(unit, 0, 0);", "-\t\t\tassertEquals(\"Not a method declaration\", ASTNode.METHOD_DECLARATION, node.getNodeType());", "-\t\t\tMethodDeclaration methodDeclaration = (MethodDeclaration) node;", "-\t\t\tType type = methodDeclaration.getReturnType2();", "-\t\t\tassertNotNull(\"No type\", type);", "-\t\t\tITypeBinding typeBinding = type.resolveBinding();", "-\t\t\tassertNotNull(\"No type binding\", typeBinding);", "-\t\t\tassertTrue(\"Not a recovered binding\", typeBinding.isRecovered());", "-\t\t\tIJavaElement javaElement = typeBinding.getJavaElement();", "-\t\t\tassertNotNull(\"No java element\", javaElement);", "-\t\t\tassertTrue(\"Javalement exists\", !javaElement.exists());", "-\t\t\tIPackageBinding packageBinding = typeBinding.getPackage();", "-\t\t\tassertNotNull(\"No package\", packageBinding);", "-\t\t\tassertEquals(\"Not the package p\", \"p\", packageBinding.getName());", "-\t\t\tITypeBinding arrayBinding = typeBinding.createArrayType(2);", "-\t\t\tassertNotNull(\"No array binding\", arrayBinding);", "-\t\t\tassertEquals(\"Wrong dimensions\", 2, arrayBinding.getDimensions());", "-\t\t\tITypeBinding elementType = arrayBinding.getElementType();", "-\t\t\tassertNotNull(\"No element type\", elementType);", "-\t\t\tassertNotNull(\"No key\", typeBinding.getKey());", "-\t\t\tassertTrue(\"Not equals\", elementType.isEqualTo(typeBinding));", "-\t\t\t", "-\t\t\tnode = getASTNode(unit, 0);", "-\t\t\tassertEquals(\"Not a type declaration\", ASTNode.TYPE_DECLARATION, node.getNodeType());", "-\t\t\tTypeDeclaration typeDeclaration = (TypeDeclaration) node;", "-\t\t\tITypeBinding typeBinding2 = typeDeclaration.resolveBinding();", "-\t\t\tITypeBinding javaLangObject = typeBinding2.getSuperclass();", "-\t\t\tassertEquals(\"Not java.lang.Object\", \"java.lang.Object\", javaLangObject.getQualifiedName());", "-\t\t\tassertTrue(\"Not isCastCompatible\", typeBinding.isCastCompatible(javaLangObject));", "-\t\t\tassertTrue(\"Not isCastCompatible\", typeBinding.isCastCompatible(elementType));", "+\t\tICompilationUnit sourceUnit = getCompilationUnit(\"Converter\" , \"src\", \"test0676\", \"X.java\"); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$ //$NON-NLS-4$", "+\t\tASTNode node = runConversion(AST.JLS3, sourceUnit, true, true, true);", "+\t\tassertEquals(\"Not a compilation unit\", ASTNode.COMPILATION_UNIT, node.getNodeType());", "+\t\tCompilationUnit unit = (CompilationUnit) node;", "+\t\tassertTrue(\"no binding recovery\", unit.getAST().hasBindingsRecovery());", "+\t\tassertTrue(\"no statement recovery\", unit.getAST().hasStatementsRecovery());", "+\t\tassertTrue(\"no binding resolution\", unit.getAST().hasResolvedBindings());", "+\t\tString expectedError = \"B cannot be resolved to a type\";", "+\t\tassertProblemsSize(unit, 1, expectedError);", "+\t\tassertTrue(\"No binding recovery\", unit.getAST().hasBindingsRecovery());", "+\t\tnode = getASTNode(unit, 0, 0);", "+\t\tassertEquals(\"Not a method declaration\", ASTNode.METHOD_DECLARATION, node.getNodeType());", "+\t\tMethodDeclaration methodDeclaration = (MethodDeclaration) node;", "+\t\tType type = methodDeclaration.getReturnType2();", "+\t\tassertNotNull(\"No type\", type);", "+\t\tITypeBinding typeBinding = type.resolveBinding();", "+\t\tassertNotNull(\"No type binding\", typeBinding);", "+\t\tassertTrue(\"Not a recovered binding\", typeBinding.isRecovered());", "+\t\tIJavaElement javaElement = typeBinding.getJavaElement();", "+\t\tassertNotNull(\"No java element\", javaElement);", "+\t\tassertTrue(\"Java element exists\", !javaElement.exists());", "+\t\tIPackageBinding packageBinding = typeBinding.getPackage();", "+\t\tassertNotNull(\"No package\", packageBinding);", "+\t\tassertNotNull(\"No java element for package\", packageBinding.getJavaElement());", "+\t\tassertEquals(\"Not the package test0676\", \"test0676\", packageBinding.getName());", "+\t\tITypeBinding arrayBinding = typeBinding.createArrayType(2);", "+\t\tassertNotNull(\"No array binding\", arrayBinding);", "+\t\tassertEquals(\"Wrong dimensions\", 2, arrayBinding.getDimensions());", "+\t\tITypeBinding elementType = arrayBinding.getElementType();", "+\t\tassertNotNull(\"No element type\", elementType);", "+\t\tassertNotNull(\"No key\", typeBinding.getKey());", "+\t\tassertTrue(\"Not equals\", elementType.isEqualTo(typeBinding));", "+\t\t", "+\t\tnode = getASTNode(unit, 0);", "+\t\tassertEquals(\"Not a type declaration\", ASTNode.TYPE_DECLARATION, node.getNodeType());", "+\t\tTypeDeclaration typeDeclaration = (TypeDeclaration) node;", "+\t\tITypeBinding typeBinding2 = typeDeclaration.resolveBinding();", "+\t\tITypeBinding javaLangObject = typeBinding2.getSuperclass();", "+\t\tassertEquals(\"Not java.lang.Object\", \"java.lang.Object\", javaLangObject.getQualifiedName());", "+\t\tassertTrue(\"Not isCastCompatible\", typeBinding.isCastCompatible(javaLangObject));", "+\t\tassertTrue(\"Not isCastCompatible\", typeBinding.isCastCompatible(elementType));", "-\t\t\tassertTrue(\"Not isSubTypeCompatible\", typeBinding.isSubTypeCompatible(javaLangObject));", "-\t\t\tassertTrue(\"Not isSubTypeCompatible\", typeBinding.isSubTypeCompatible(elementType));", "+\t\tassertTrue(\"Not isSubTypeCompatible\", typeBinding.isSubTypeCompatible(javaLangObject));", "+\t\tassertTrue(\"Not isSubTypeCompatible\", typeBinding.isSubTypeCompatible(elementType));", "-\t\t\tassertTrue(\"Not isAssignmentCompatible\", typeBinding.isAssignmentCompatible(javaLangObject));", "-\t\t\tassertTrue(\"Not isAssignmentCompatible\", typeBinding.isAssignmentCompatible(elementType));", "-\t\t} finally {", "-\t\t\tif (workingCopy != null)", "-\t\t\t\tworkingCopy.discardWorkingCopy();", "-\t\t}", "+\t\tassertTrue(\"Not isAssignmentCompatible\", typeBinding.isAssignmentCompatible(javaLangObject));", "+\t\tassertTrue(\"Not isAssignmentCompatible\", typeBinding.isAssignmentCompatible(elementType));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "501048af9e958429d7a51641928ecf76", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core.tests.model/src/org/eclipse/jdt/core/tests/model/JavaSearchTests.java", "commitBeforeChange": "457fc77ec96140a15fc3e1c18bbf7bf53c7ea1c9", "commitAfterChange": "44074e366655e2cf89768617c1e64463f5949123", "methodNumberBeforeChange": 216, "methodNumberAfterChange": 189, "signatureBeforeChange": " \tpublic void testAutoBoxing01() throws CoreException", "signatureAfterChange": " \tpublic void testAutoBoxing01() throws CoreException", "diff": ["-\t\tICompilationUnit workingCopy = null;", "-\t\ttry {", "-\t\t\tworkingCopy = getWorkingCopy(\"/JavaSearch15/src/p/X.java\",", "-\t\t\t\t\"package p;\\n\" + ", "-\t\t\t\t\"public class Test {\\n\" + ", "-\t\t\t\t\"\tvoid foo(int x) {}\\n\" + ", "-\t\t\t\t\"\tvoid bar() {\\n\" + ", "-\t\t\t\t\"\t\tfoo(new Integer(0));\\n\" + ", "-\t\t\t\t\"\t}\\n\" + ", "-\t\t\t\t\"}\\n\"", "-\t\t\t\t);", "-\t\t\tworkingCopy.commitWorkingCopy(true, null);\t// need to commit to index file", "-\t\t\tIJavaSearchScope scope = SearchEngine.createJavaSearchScope(new ICompilationUnit[] { workingCopy });", "-\t\t\tIMethod method = workingCopy.getType(\"Test\").getMethod(\"foo\", new String[] { \"I\" });", "-\t\t\tsearch(method, REFERENCES, scope, this.resultCollector);", "-\t\t\tassertSearchResults(", "-\t\t\t\t\"src/p/X.java void p.Test.bar() [foo(new Integer(0))]\",", "-\t\t\t\tthis.resultCollector);", "-\t\t} catch (JavaModelException jme) {", "-\t\t\tjme.printStackTrace();", "-\t\t}", "-\t\tfinally {", "-\t\t\tif (workingCopy != null)", "-\t\t\t\tworkingCopy.discardWorkingCopy();", "-\t\t}", "+\t\tworkingCopies = new ICompilationUnit[1];", "+\t\tworkingCopies[0] = getWorkingCopy(\"/JavaSearch15/src/p/X.java\",", "+\t\t\t\"package p;\\n\" + ", "+\t\t\t\"public class Test {\\n\" + ", "+\t\t\t\"\tvoid foo(int x) {}\\n\" + ", "+\t\t\t\"\tvoid bar() {\\n\" + ", "+\t\t\t\"\t\tfoo(new Integer(0));\\n\" + ", "+\t\t\t\"\t}\\n\" + ", "+\t\t\t\"}\\n\"", "+\t\t\t);", "+\t\tIJavaSearchScope scope = SearchEngine.createJavaSearchScope(workingCopies);", "+\t\tIMethod method = workingCopies[0].getType(\"Test\").getMethod(\"foo\", new String[] { \"I\" });", "+\t\tsearch(method, REFERENCES, scope);", "+\t\tassertSearchResults(", "+\t\t\t\"src/p/X.java void p.Test.bar() [foo(new Integer(0))]\",", "+\t\t\tresultCollector);"]}], "num": 6731}