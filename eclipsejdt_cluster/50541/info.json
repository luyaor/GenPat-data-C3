{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2008a633e0a7a15bb6b8776757b84fec", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "38006c49f119743ec1bd3db50c96c316", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/matching/TypeReferenceLocator.java", "commitBeforeChange": "9fa4ee2d52d7a35a0c57f8c4b875f0f155754f75", "commitAfterChange": "330462fa1b1e3cc7e6b257e0a0f3470535bf4f54", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " protected void matchReportImportRef(ImportReference importRef, Binding binding, IJavaElement element, int accuracy, MatchLocator locator) throws CoreException", "signatureAfterChange": " protected void matchReportImportRef(ImportReference importRef, Binding binding, IJavaElement element, int accuracy, MatchLocator locator) throws CoreException", "diff": ["-\tif (this.pattern.isParameterized()) {", "-\t\t// do not report import ref for generic patterns...", "-\t\treturn;", "-\t}", "+\t// set match rule", "+\tint rule = SearchMatch.A_ACCURATE;", "+\tboolean patternHasParameters = false;", "+\tif (this.pattern.isParameterized()) {", "+\t\tpatternHasParameters = this.pattern.typeArguments[0] != null && this.pattern.typeArguments[0].length != 0;", "+\t}", "+\tif (patternHasParameters) { // binding has no type params, compatible erasure if pattern does", "+\t\trule = SearchMatch.A_COMPATIBLE | SearchMatch.A_ERASURE;", "+\t}", "+\t", "+\t// Try to find best selection for match", "-\t\t\tif (resolveLevelForType(typeBinding) == ACCURATE_MATCH) {", "+\t\t\tif (resolveLevelForType(typeBinding) != IMPOSSIBLE_MATCH) {", "-\t\t\t\t\tSearchMatch match = locator.newTypeReferenceMatch(element, accuracy, start, end-start+1, importRef);", "+\t\t\t\t\t// report match", "+\t\t\t\t\tSearchMatch match = locator.newTypeReferenceMatch(element, accuracy, start, end-start+1, rule, importRef);", "-\tlocator.reportAccurateTypeReference(importRef, this.pattern.simpleName, element, accuracy);", "+\tlocator.reportAccurateTypeReference(importRef, this.pattern.simpleName, element, accuracy, rule);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6a3afe649cb4e8d5a5c41c64f6972ce1", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/FieldBinding.java", "commitBeforeChange": "4abea618a97f7448bb60346688abfa260a9da222", "commitAfterChange": "a9ee87c83d7d756655063cf50477aa2c78c21e73", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": " public long getAnnotationTagBits()", "signatureAfterChange": " public long getAnnotationTagBits()", "diff": ["-\t\tif (fieldDecl != null)", "-\t\t\tASTNode.resolveAnnotations(isStatic() ? typeDecl.staticInitializerScope : typeDecl.initializerScope, fieldDecl.annotations, originalField);", "+\t\tif (fieldDecl != null) {", "+\t\t\tMethodScope initializationScope = isStatic() ? typeDecl.staticInitializerScope : typeDecl.initializerScope;", "+\t\t\tFieldBinding previousField = initializationScope.initializedField;", "+\t\t\tint previousFieldID = initializationScope.lastVisibleFieldID;\t\t\t", "+\t\t\ttry {", "+\t\t\t\tinitializationScope.initializedField = originalField;", "+\t\t\t\tinitializationScope.lastVisibleFieldID = originalField.id;", "+\t\t\t\tASTNode.resolveAnnotations(initializationScope, fieldDecl.annotations, originalField);", "+\t\t\t} finally {", "+\t\t\t\tinitializationScope.initializedField = previousField;", "+\t\t\t\tinitializationScope.lastVisibleFieldID = previousFieldID;", "+\t\t\t}", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ac9f186c3cb08e94bef3b6563b6d1263", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/dom/org/eclipse/jdt/core/dom/SimpleName.java", "commitBeforeChange": "b48948c440f4082a22e31c203db0c29a35ec4b75", "commitAfterChange": "699cc351076b7c5897a886d674772d111233f0a3", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": " \tpublic void setIdentifier(String identifier)", "signatureAfterChange": " \tpublic void setIdentifier(String identifier)", "diff": ["-\t\tchar[] source = identifier.toCharArray();", "-\t\tscanner.setSource(source);", "-\t\tfinal int length = source.length;", "-\t\tscanner.resetTo(0, length - 1);", "+\t\tlong sourceLevel = scanner.sourceLevel;", "+\t\tlong complianceLevel = scanner.complianceLevel;", "+", "-\t\t\tint tokenType = scanner.scanIdentifier();", "-\t\t\tif (tokenType != TerminalTokens.TokenNameIdentifier) {", "+\t\t\tscanner.sourceLevel = ClassFileConstants.JDK1_3;", "+\t\t\tscanner.complianceLevel = ClassFileConstants.JDK1_5;", "+\t\t\tchar[] source = identifier.toCharArray();", "+\t\t\tscanner.setSource(source);", "+\t\t\tfinal int length = source.length;", "+\t\t\tscanner.resetTo(0, length - 1);", "+\t\t\ttry {", "+\t\t\t\tint tokenType = scanner.scanIdentifier();", "+\t\t\t\tif (tokenType != TerminalTokens.TokenNameIdentifier) {", "+\t\t\t\t\tthrow new IllegalArgumentException();", "+\t\t\t\t}", "+\t\t\t\tif (scanner.currentPosition != length) {", "+\t\t\t\t\t// this is the case when there is only one identifier see 87849", "+\t\t\t\t\tthrow new IllegalArgumentException();", "+\t\t\t\t}", "+\t\t\t} catch(InvalidInputException e) {", "-\t\t\tif (scanner.currentPosition != length) {", "-\t\t\t\t// this is the case when there is only one identifier see 87849", "-\t\t\t\tthrow new IllegalArgumentException();", "-\t\t\t}", "-\t\t} catch(InvalidInputException e) {", "-\t\t\tthrow new IllegalArgumentException();", "+\t\t} finally {", "+\t\t\tthis.ast.scanner.sourceLevel = sourceLevel;", "+\t\t\tthis.ast.scanner.complianceLevel = complianceLevel;"]}], "num": 50541}