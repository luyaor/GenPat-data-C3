{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "706a21c23a3eea5a8ce0d2112dc0e808", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "00c8029f34b7aac5fd0ecaea8013808b", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/Scope.java", "commitBeforeChange": "5dcefdb7b6dc4ca118d352248744f6f6f0cfd53e", "commitAfterChange": "6568a2476b22c2b9915b48b3eb9ea4ea62f741d4", "methodNumberBeforeChange": 30, "methodNumberAfterChange": 30, "signatureBeforeChange": " \tpublic Binding getBinding(char[] name, int mask, InvocationSite invocationSite, boolean needResolve)", "signatureAfterChange": " \tpublic Binding getBinding(char[] name, int mask, InvocationSite invocationSite, boolean needResolve)", "diff": ["-", "+\t\t\t\tboolean insideTypeAnnotation = false;", "+\t\t\t\t", "+\t\t\t\t\t\t\tinsideTypeAnnotation = methodScope.insideTypeAnnotation;", "+\t\t\t\t\t\t\t", "-\t\t\t\t\t\t\tFieldBinding fieldBinding = classScope.findField(enclosingType, name, invocationSite, needResolve);", "-\t\t\t\t\t\t\t// Use next line instead if willing to enable protected access accross inner types", "-\t\t\t\t\t\t\t// FieldBinding fieldBinding = findField(enclosingType, name, invocationSite);", "-\t\t\t\t\t\t\t", "-\t\t\t\t\t\t\tif (fieldBinding != null) { // skip it if we did not find anything", "-\t\t\t\t\t\t\t\tif (fieldBinding.problemId() == Ambiguous) {", "-\t\t\t\t\t\t\t\t\tif (foundField == null || foundField.problemId() == NotVisible)", "-\t\t\t\t\t\t\t\t\t\t// supercedes any potential InheritedNameHidesEnclosingName problem", "-\t\t\t\t\t\t\t\t\t\treturn fieldBinding;", "-\t\t\t\t\t\t\t\t\t// make the user qualify the field, likely wants the first inherited field (javac generates an ambiguous error instead)", "-\t\t\t\t\t\t\t\t\treturn new ProblemFieldBinding(", "-\t\t\t\t\t\t\t\t\t\tfoundField, // closest match", "-\t\t\t\t\t\t\t\t\t\tfoundField.declaringClass,", "-\t\t\t\t\t\t\t\t\t\tname,", "-\t\t\t\t\t\t\t\t\t\tInheritedNameHidesEnclosingName);", "-\t\t\t\t\t\t\t\t}", "-", "-\t\t\t\t\t\t\t\tProblemFieldBinding insideProblem = null;", "-\t\t\t\t\t\t\t\tif (fieldBinding.isValidBinding()) {", "-\t\t\t\t\t\t\t\t\tif (!fieldBinding.isStatic()) {", "-\t\t\t\t\t\t\t\t\t\tif (insideConstructorCall) {", "-\t\t\t\t\t\t\t\t\t\t\tinsideProblem =", "-\t\t\t\t\t\t\t\t\t\t\t\tnew ProblemFieldBinding(", "-\t\t\t\t\t\t\t\t\t\t\t\t\tfieldBinding, // closest match", "-\t\t\t\t\t\t\t\t\t\t\t\t\tfieldBinding.declaringClass,", "-\t\t\t\t\t\t\t\t\t\t\t\t\tname,", "-\t\t\t\t\t\t\t\t\t\t\t\t\tNonStaticReferenceInConstructorInvocation);", "-\t\t\t\t\t\t\t\t\t\t} else if (insideStaticContext) {", "-\t\t\t\t\t\t\t\t\t\t\tinsideProblem =", "-\t\t\t\t\t\t\t\t\t\t\t\tnew ProblemFieldBinding(", "-\t\t\t\t\t\t\t\t\t\t\t\t\tfieldBinding, // closest match", "-\t\t\t\t\t\t\t\t\t\t\t\t\tfieldBinding.declaringClass,", "-\t\t\t\t\t\t\t\t\t\t\t\t\tname,", "-\t\t\t\t\t\t\t\t\t\t\t\t\tNonStaticReferenceInStaticContext);", "-\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\tif (!insideTypeAnnotation) {", "+\t\t\t\t\t\t\t\tFieldBinding fieldBinding = classScope.findField(enclosingType, name, invocationSite, needResolve);", "+\t\t\t\t\t\t\t\t// Use next line instead if willing to enable protected access accross inner types", "+\t\t\t\t\t\t\t\t// FieldBinding fieldBinding = findField(enclosingType, name, invocationSite);", "+\t\t\t\t\t\t\t\t", "+\t\t\t\t\t\t\t\tif (fieldBinding != null) { // skip it if we did not find anything", "+\t\t\t\t\t\t\t\t\tif (fieldBinding.problemId() == Ambiguous) {", "+\t\t\t\t\t\t\t\t\t\tif (foundField == null || foundField.problemId() == NotVisible)", "+\t\t\t\t\t\t\t\t\t\t\t// supercedes any potential InheritedNameHidesEnclosingName problem", "+\t\t\t\t\t\t\t\t\t\t\treturn fieldBinding;", "+\t\t\t\t\t\t\t\t\t\t// make the user qualify the field, likely wants the first inherited field (javac generates an ambiguous error instead)", "+\t\t\t\t\t\t\t\t\t\treturn new ProblemFieldBinding(", "+\t\t\t\t\t\t\t\t\t\t\tfoundField, // closest match", "+\t\t\t\t\t\t\t\t\t\t\tfoundField.declaringClass,", "+\t\t\t\t\t\t\t\t\t\t\tname,", "+\t\t\t\t\t\t\t\t\t\t\tInheritedNameHidesEnclosingName);", "-\t\t\t\t\t\t\t\t\tif (enclosingType == fieldBinding.declaringClass || environment().options.complianceLevel >= ClassFileConstants.JDK1_4) {", "-\t\t\t\t\t\t\t\t\t\t// found a valid field in the 'immediate' scope (ie. not inherited)", "-\t\t\t\t\t\t\t\t\t\t// OR in 1.4 mode (inherited shadows enclosing)", "-\t\t\t\t\t\t\t\t\t\tif (foundField == null) {", "-\t\t\t\t\t\t\t\t\t\t\tif (depth > 0){", "-\t\t\t\t\t\t\t\t\t\t\t\tinvocationSite.setDepth(depth);", "-\t\t\t\t\t\t\t\t\t\t\t\tinvocationSite.setActualReceiverType(enclosingType);", "+\t", "+\t\t\t\t\t\t\t\t\tProblemFieldBinding insideProblem = null;", "+\t\t\t\t\t\t\t\t\tif (fieldBinding.isValidBinding()) {", "+\t\t\t\t\t\t\t\t\t\tif (!fieldBinding.isStatic()) {", "+\t\t\t\t\t\t\t\t\t\t\tif (insideConstructorCall) {", "+\t\t\t\t\t\t\t\t\t\t\t\tinsideProblem =", "+\t\t\t\t\t\t\t\t\t\t\t\t\tnew ProblemFieldBinding(", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldBinding, // closest match", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldBinding.declaringClass,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tname,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tNonStaticReferenceInConstructorInvocation);", "+\t\t\t\t\t\t\t\t\t\t\t} else if (insideStaticContext) {", "+\t\t\t\t\t\t\t\t\t\t\t\tinsideProblem =", "+\t\t\t\t\t\t\t\t\t\t\t\t\tnew ProblemFieldBinding(", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldBinding, // closest match", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldBinding.declaringClass,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tname,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tNonStaticReferenceInStaticContext);", "-\t\t\t\t\t\t\t\t\t\t\t// return the fieldBinding if it is not declared in a superclass of the scope's binding (that is, inherited)", "-\t\t\t\t\t\t\t\t\t\t\treturn insideProblem == null ? fieldBinding : insideProblem;", "-\t\t\t\t\t\t\t\t\t\tif (foundField.isValidBinding())", "-\t\t\t\t\t\t\t\t\t\t\t// if a valid field was found, complain when another is found in an 'immediate' enclosing type (that is, not inherited)", "-\t\t\t\t\t\t\t\t\t\t\tif (foundField.declaringClass != fieldBinding.declaringClass)", "-\t\t\t\t\t\t\t\t\t\t\t\t// ie. have we found the same field - do not trust field identity yet", "-\t\t\t\t\t\t\t\t\t\t\t\treturn new ProblemFieldBinding(", "-\t\t\t\t\t\t\t\t\t\t\t\t\tfoundField, // closest match", "-\t\t\t\t\t\t\t\t\t\t\t\t\tfoundField.declaringClass,", "-\t\t\t\t\t\t\t\t\t\t\t\t\tname,", "-\t\t\t\t\t\t\t\t\t\t\t\t\tInheritedNameHidesEnclosingName);", "+\t\t\t\t\t\t\t\t\t\tif (enclosingType == fieldBinding.declaringClass || environment().options.complianceLevel >= ClassFileConstants.JDK1_4) {", "+\t\t\t\t\t\t\t\t\t\t\t// found a valid field in the 'immediate' scope (ie. not inherited)", "+\t\t\t\t\t\t\t\t\t\t\t// OR in 1.4 mode (inherited shadows enclosing)", "+\t\t\t\t\t\t\t\t\t\t\tif (foundField == null) {", "+\t\t\t\t\t\t\t\t\t\t\t\tif (depth > 0){", "+\t\t\t\t\t\t\t\t\t\t\t\t\tinvocationSite.setDepth(depth);", "+\t\t\t\t\t\t\t\t\t\t\t\t\tinvocationSite.setActualReceiverType(enclosingType);", "+\t\t\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\t\t\t// return the fieldBinding if it is not declared in a superclass of the scope's binding (that is, inherited)", "+\t\t\t\t\t\t\t\t\t\t\t\treturn insideProblem == null ? fieldBinding : insideProblem;", "+\t\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\t\tif (foundField.isValidBinding())", "+\t\t\t\t\t\t\t\t\t\t\t\t// if a valid field was found, complain when another is found in an 'immediate' enclosing type (that is, not inherited)", "+\t\t\t\t\t\t\t\t\t\t\t\tif (foundField.declaringClass != fieldBinding.declaringClass)", "+\t\t\t\t\t\t\t\t\t\t\t\t\t// ie. have we found the same field - do not trust field identity yet", "+\t\t\t\t\t\t\t\t\t\t\t\t\treturn new ProblemFieldBinding(", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfoundField, // closest match", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tfoundField.declaringClass,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tname,", "+\t\t\t\t\t\t\t\t\t\t\t\t\t\tInheritedNameHidesEnclosingName);", "+\t\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t}", "-", "-\t\t\t\t\t\t\t\tif (foundField == null || (foundField.problemId() == NotVisible && fieldBinding.problemId() != NotVisible)) {", "-\t\t\t\t\t\t\t\t\t// only remember the fieldBinding if its the first one found or the previous one was not visible & fieldBinding is...", "-\t\t\t\t\t\t\t\t\tfoundDepth = depth;", "-\t\t\t\t\t\t\t\t\tfoundActualReceiverType = enclosingType;", "-\t\t\t\t\t\t\t\t\tfoundInsideProblem = insideProblem;", "-\t\t\t\t\t\t\t\t\tfoundField = fieldBinding;", "+\t", "+\t\t\t\t\t\t\t\t\tif (foundField == null || (foundField.problemId() == NotVisible && fieldBinding.problemId() != NotVisible)) {", "+\t\t\t\t\t\t\t\t\t\t// only remember the fieldBinding if its the first one found or the previous one was not visible & fieldBinding is...", "+\t\t\t\t\t\t\t\t\t\tfoundDepth = depth;", "+\t\t\t\t\t\t\t\t\t\tfoundActualReceiverType = enclosingType;", "+\t\t\t\t\t\t\t\t\t\tfoundInsideProblem = insideProblem;", "+\t\t\t\t\t\t\t\t\t\tfoundField = fieldBinding;", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\tinsideTypeAnnotation = false;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3cb4391c4433e24360a251c41f3938ce", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/Scope.java", "commitBeforeChange": "5dcefdb7b6dc4ca118d352248744f6f6f0cfd53e", "commitAfterChange": "6568a2476b22c2b9915b48b3eb9ea4ea62f741d4", "methodNumberBeforeChange": 55, "methodNumberAfterChange": 55, "signatureBeforeChange": " \tfinal Binding getTypeOrPackage(char[] name, int mask)", "signatureAfterChange": " \tfinal Binding getTypeOrPackage(char[] name, int mask)", "diff": ["+\t\tboolean insideTypeAnnotation = false;", "+\t\t\t\t\t\tinsideTypeAnnotation = methodScope.insideTypeAnnotation;", "-\t\t\t\t\t\t// 6.5.5.1 - member types have precedence over top-level type in same unit", "-\t\t\t\t\t\tReferenceBinding memberType = findMemberType(name, sourceType);", "-\t\t\t\t\t\tif (memberType != null) { // skip it if we did not find anything", "-\t\t\t\t\t\t\tif (memberType.problemId() == Ambiguous) {", "-\t\t\t\t\t\t\t\tif (foundType == null || foundType.problemId() == NotVisible)", "-\t\t\t\t\t\t\t\t\t// supercedes any potential InheritedNameHidesEnclosingName problem", "-\t\t\t\t\t\t\t\t\treturn memberType;", "-\t\t\t\t\t\t\t\t// make the user qualify the type, likely wants the first inherited type", "-\t\t\t\t\t\t\t\treturn new ProblemReferenceBinding(name, InheritedNameHidesEnclosingName);", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tif (memberType.isValidBinding()) {", "-\t\t\t\t\t\t\t\tif (sourceType == memberType.enclosingType()", "-\t\t\t\t\t\t\t\t\t\t|| environment().options.complianceLevel >= ClassFileConstants.JDK1_4) {", "-\t\t\t\t\t\t\t\t\t// found a valid type in the 'immediate' scope (ie. not inherited)", "-\t\t\t\t\t\t\t\t\t// OR in 1.4 mode (inherited shadows enclosing)", "-\t\t\t\t\t\t\t\t\tif (foundType == null)", "-\t\t\t\t\t\t\t\t\t\treturn memberType; ", "-\t\t\t\t\t\t\t\t\t// if a valid type was found, complain when another is found in an 'immediate' enclosing type (ie. not inherited)", "-\t\t\t\t\t\t\t\t\tif (foundType.isValidBinding() && foundType != memberType)", "-\t\t\t\t\t\t\t\t\t\treturn new ProblemReferenceBinding(name, InheritedNameHidesEnclosingName);", "+\t\t\t\t\t\tif (!insideTypeAnnotation) {", "+\t\t\t\t\t\t\t// 6.5.5.1 - member types have precedence over top-level type in same unit", "+\t\t\t\t\t\t\tReferenceBinding memberType = findMemberType(name, sourceType);", "+\t\t\t\t\t\t\tif (memberType != null) { // skip it if we did not find anything", "+\t\t\t\t\t\t\t\tif (memberType.problemId() == Ambiguous) {", "+\t\t\t\t\t\t\t\t\tif (foundType == null || foundType.problemId() == NotVisible)", "+\t\t\t\t\t\t\t\t\t\t// supercedes any potential InheritedNameHidesEnclosingName problem", "+\t\t\t\t\t\t\t\t\t\treturn memberType;", "+\t\t\t\t\t\t\t\t\t// make the user qualify the type, likely wants the first inherited type", "+\t\t\t\t\t\t\t\t\treturn new ProblemReferenceBinding(name, InheritedNameHidesEnclosingName);", "+\t\t\t\t\t\t\t\tif (memberType.isValidBinding()) {", "+\t\t\t\t\t\t\t\t\tif (sourceType == memberType.enclosingType()", "+\t\t\t\t\t\t\t\t\t\t\t|| environment().options.complianceLevel >= ClassFileConstants.JDK1_4) {", "+\t\t\t\t\t\t\t\t\t\t// found a valid type in the 'immediate' scope (ie. not inherited)", "+\t\t\t\t\t\t\t\t\t\t// OR in 1.4 mode (inherited shadows enclosing)", "+\t\t\t\t\t\t\t\t\t\tif (foundType == null)", "+\t\t\t\t\t\t\t\t\t\t\treturn memberType; ", "+\t\t\t\t\t\t\t\t\t\t// if a valid type was found, complain when another is found in an 'immediate' enclosing type (ie. not inherited)", "+\t\t\t\t\t\t\t\t\t\tif (foundType.isValidBinding() && foundType != memberType)", "+\t\t\t\t\t\t\t\t\t\t\treturn new ProblemReferenceBinding(name, InheritedNameHidesEnclosingName);", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tif (foundType == null || (foundType.problemId() == NotVisible && memberType.problemId() != NotVisible))", "+\t\t\t\t\t\t\t\t\t// only remember the memberType if its the first one found or the previous one was not visible & memberType is...", "+\t\t\t\t\t\t\t\t\tfoundType = memberType;", "-\t\t\t\t\t\t\tif (foundType == null || (foundType.problemId() == NotVisible && memberType.problemId() != NotVisible))", "-\t\t\t\t\t\t\t\t// only remember the memberType if its the first one found or the previous one was not visible & memberType is...", "-\t\t\t\t\t\t\t\tfoundType = memberType;", "+\t\t\t\t\t\tinsideTypeAnnotation = false;"]}], "num": 12433}