{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a9f7e8dc7bf9f6b53c187e68f7bacd4e", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7784dc96e8a0c1624bc5f46d1456af30", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/matching/TypeDeclarationPattern.java", "commitBeforeChange": "cbf4d8b0c602d0860355a0bb315f58708fa257d2", "commitAfterChange": "0d8c4f28f9db6373751aa6d7cffbf4e0fcb51948", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 7, "signatureBeforeChange": " protected char[] indexEntryPrefix()", "signatureAfterChange": " protected char[] indexEntryPrefix()", "diff": ["-protected char[] indexEntryPrefix(){", "-\treturn AbstractIndexer.bestTypeDeclarationPrefix(pkg, simpleName, classOrInterface, matchMode, isCaseSensitive);", "+protected char[] indexEntryPrefix() {", "+\tchar[] packageName = this.isCaseSensitive ? pkg : null;", "+\tswitch(this.classOrInterface) {", "+\t\tcase CLASS_SUFFIX :", "+\t\t\tif (packageName == null) return CLASS_DECL;", "+\t\t\tbreak;", "+\t\tcase INTERFACE_SUFFIX :", "+\t\t\tif (packageName == null) return INTERFACE_DECL;", "+\t\t\tbreak;", "+\t\tdefault :", "+\t\t\treturn TYPE_DECL; // cannot do better given encoding", "+\t}", "+", "+\tchar[] typeName = this.isCaseSensitive ? simpleName : null;", "+\tif (typeName != null && this.matchMode == PATTERN_MATCH) {", "+\t\tint starPos = CharOperation.indexOf('*', typeName);", "+\t\tswitch(starPos) {", "+\t\t\tcase -1 :", "+\t\t\t\tbreak;", "+\t\t\tcase 0 :", "+\t\t\t\ttypeName = null;", "+\t\t\t\tbreak;", "+\t\t\tdefault : ", "+\t\t\t\ttypeName = CharOperation.subarray(typeName, 0, starPos);", "+\t\t}", "+\t}", "+", "+\tint packageLength = packageName.length;", "+\tint typeLength = typeName == null ? 0 : typeName.length;", "+\tint pos = TYPE_DECL_LENGTH;", "+\tchar[] result = new char[pos + packageLength + typeLength + 3];", "+\tSystem.arraycopy(TYPE_DECL, 0, result, 0, pos);", "+\tresult[pos++] = classOrInterface;", "+\tresult[pos++] = SEPARATOR;", "+\tSystem.arraycopy(packageName, 0, result, pos, packageLength);", "+\tpos += packageLength;", "+\tresult[pos++] = SEPARATOR;", "+\tif (typeLength > 0)", "+\t\tSystem.arraycopy(typeName, 0, result, pos, typeName.length);", "+\treturn result;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "be53a70cd6e2eeb35300bc0bc834d07a", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/matching/TypeDeclarationPattern.java", "commitBeforeChange": "7dce3ced6f2c34a63721a3fda038e2fad50139b7", "commitAfterChange": "4a258c24dea43b906f3daa4041c94e7315633dfe", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 6, "signatureBeforeChange": " protected char[] indexEntryPrefix()", "signatureAfterChange": " public char[] encodeIndexKey()", "diff": ["-protected char[] indexEntryPrefix() {", "-\tchar[] packageName = this.isCaseSensitive ? pkg : null;", "+ */", "+public char[] encodeIndexKey() {", "+\tchar[] packageName = isCaseSensitive() ? pkg : null;", "-\t\t\tif (packageName == null) return CLASS_DECL;", "+\t\t\tif (packageName == null) ", "+\t\t\t\treturn new char[] {CLASS_SUFFIX, SEPARATOR};", "-\t\t\tif (packageName == null) return INTERFACE_DECL;", "+\t\t\tif (packageName == null) ", "+\t\t\t\treturn new char[] {INTERFACE_SUFFIX, SEPARATOR};", "-\t\t\treturn TYPE_DECL; // cannot do better given encoding", "+\t\t\treturn CharOperation.NO_CHAR; // cannot do better given encoding", "-\tchar[] typeName = this.isCaseSensitive ? simpleName : null;", "-\tif (typeName != null && this.matchMode == PATTERN_MATCH) {", "+\tchar[] typeName = isCaseSensitive() ? this.simpleName : null;", "+\tif (typeName != null && matchMode() == PATTERN_MATCH) {", "-\tint typeLength = typeName == null ? 0 : typeName.length;", "-\tint pos = TYPE_DECL_LENGTH;", "-\tchar[] result = new char[pos + packageLength + typeLength + 3];", "-\tSystem.arraycopy(TYPE_DECL, 0, result, 0, pos);", "-\tresult[pos++] = classOrInterface;", "+\tint enclosingTypeNamesLength = 0;", "+\tif (this.enclosingTypeNames != null)", "+\t\tfor (int i = 0, length = this.enclosingTypeNames.length; i < length; i++)", "+\t\t\tenclosingTypeNamesLength += this.enclosingTypeNames[i].length + 1;", "+\tint pos = 0;", "+\tint typeNameLength = typeName == null ? 0 : typeName.length;", "+\tint resultLength = pos + packageLength + typeNameLength + enclosingTypeNamesLength + 4;", "+\tchar[] result = new char[resultLength];", "+\tresult[pos++] = this.classOrInterface;", "-\tSystem.arraycopy(packageName, 0, result, pos, packageLength);", "-\tpos += packageLength;", "+\tif (packageLength > 0) {", "+\t\tSystem.arraycopy(packageName, 0, result, pos, packageLength);", "+\t\tpos += packageLength;", "+\t}", "-\tif (typeLength > 0)", "-\t\tSystem.arraycopy(typeName, 0, result, pos, typeName.length);", "+\tif (typeName != null) {", "+\t\tSystem.arraycopy(typeName, 0, result, pos, typeNameLength);", "+\t\tpos += typeNameLength;", "+", "+\t\tresult[pos++] = SEPARATOR;", "+\t\tif (enclosingTypeNames != null) {", "+\t\t\tfor (int i = 0, length = this.enclosingTypeNames.length; i < length; i++) {", "+\t\t\t\tint enclosingTypeNameLength = this.enclosingTypeNames[i].length;", "+\t\t\t\tSystem.arraycopy(this.enclosingTypeNames[i], 0, result, pos, enclosingTypeNameLength);", "+\t\t\t\tpos += enclosingTypeNameLength;", "+\t\t\t\tresult[pos++] = SEPARATOR;", "+\t\t\t}", "+\t\t}", "+\t}", "+\tif (pos != resultLength) {", "+\t\tSystem.arraycopy(result, 0, result = new char[pos], 0, pos);", "+\t}"]}], "num": 10782}