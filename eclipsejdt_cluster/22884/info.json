{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ade7738af39d71190462a10620fc2038", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "50cba4c4428c045aa4b10220408b7790", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ast/ArrayInitializer.java", "commitBeforeChange": "15ee3fc74d645bc19ffaa9bb21ac1498fd92f041", "commitAfterChange": "b3410b62d0834b399622acfd1911b95249399618", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public void generateCode(BlockScope currentScope, CodeStream codeStream, boolean valueRequired)", "signatureAfterChange": " public void generateCode(BlockScope currentScope, CodeStream codeStream, boolean valueRequired)", "diff": ["-\t\t\t\t\tcase T_float :", "+\t\t\t\t\t\tif (expr.constant.longValue() != 0) {", "+\t\t\t\t\t\t\tcodeStream.dup();", "+\t\t\t\t\t\t\tcodeStream.generateInlinedValue(i);", "+\t\t\t\t\t\t\texpr.generateCode(currentScope, codeStream, true);", "+\t\t\t\t\t\t\tcodeStream.arrayAtPut(elementsTypeID, false);", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tbreak;", "+\t\t\t\t\tcase T_float :", "-\t\t\t\t\t\tif (expr.constant.doubleValue() != 0) {", "+\t\t\t\t\t\tdouble constantValue = expr.constant.doubleValue();", "+\t\t\t\t\t\tif (constantValue == -0.0 || constantValue != 0) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7e39bf2b2992025cd65a84c7f43d27b8", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ast/Statement.java", "commitBeforeChange": "80adc997ad4594d86c098c1d65d4ab0307d988e5", "commitAfterChange": "bd9f1604b7023aa96308289af9053f02dd227d2f", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " \tpublic void generateArguments(MethodBinding binding, Expression[] arguments, BlockScope currentScope, CodeStream codeStream)", "signatureAfterChange": " \tpublic void generateArguments(MethodBinding binding, Expression[] arguments, BlockScope currentScope, CodeStream codeStream)", "diff": ["+\t\t\tint elementsTypeID = varArgsType.elementsType().id;", "-\t\t\tgenerateVarargsArgument: {", "-\t\t\t\tif (argLength >= paramLength) {", "-\t\t\t\t\t// right number of arguments - could be inexact - pass argument as is", "-\t\t\t\t\tTypeBinding lastType = arguments[varArgIndex].resolvedType;", "-\t\t\t\t\tif (lastType == NullBinding", "-\t\t\t\t\t\t|| (varArgsType.dimensions() == lastType.dimensions()", "-\t\t\t\t\t\t\t&& lastType.isCompatibleWith(varArgsType))) {", "-\t\t\t\t\t\t// foo(1, new int[]{2, 3}) or foo(1, null) --> last arg is passed as-is", "-\t\t\t\t\t\targuments[varArgIndex].generateCode(currentScope, codeStream, true);", "-\t\t\t\t\t\tbreak generateVarargsArgument;", "-\t\t\t\t\t}", "-\t\t\t\t\t// right number but not directly compatible or too many arguments - wrap extra into array", "-\t\t\t\t\t// called with (argLength - lastIndex) elements : foo(1, 2) or foo(1, 2, 3, 4)", "-\t\t\t\t\t// need to gen elements into an array, then gen each remaining element into created array", "-\t\t\t\t\tcodeStream.generateInlinedValue(argLength - varArgIndex);", "-\t\t\t\t\tcodeStream.newArray(varArgsType); // create a mono-dimensional array", "-\t\t\t\t\tint elementsTypeID = varArgsType.elementsType().id;", "-\t\t\t\t\tfor (int i = varArgIndex; i < argLength; i++) {", "-\t\t\t\t\t\tcodeStream.dup();", "-\t\t\t\t\t\tcodeStream.generateInlinedValue(i - varArgIndex);", "-\t\t\t\t\t\targuments[i].generateCode(currentScope, codeStream, true);", "-\t\t\t\t\t\tcodeStream.arrayAtPut(elementsTypeID, false);", "-\t\t\t\t\t}", "-\t\t\t\t} else { // not enough arguments - pass extra empty array", "-\t\t\t\t\t// scenario: foo(1) --> foo(1, new int[0])", "-\t\t\t\t\t// generate code for an empty array of parameterType", "-\t\t\t\t\tcodeStream.generateInlinedValue(0);", "-\t\t\t\t\tcodeStream.newArray(varArgsType); // create a mono-dimensional array", "+\t\t\tif (argLength > paramLength) {", "+\t\t\t\t// right number but not directly compatible or too many arguments - wrap extra into array", "+\t\t\t\t// called with (argLength - lastIndex) elements : foo(1, 2) or foo(1, 2, 3, 4)", "+\t\t\t\t// need to gen elements into an array, then gen each remaining element into created array", "+\t\t\t\tcodeStream.generateInlinedValue(argLength - varArgIndex);", "+\t\t\t\tcodeStream.newArray(varArgsType); // create a mono-dimensional array", "+\t\t\t\tfor (int i = varArgIndex; i < argLength; i++) {", "+\t\t\t\t\tcodeStream.dup();", "+\t\t\t\t\tcodeStream.generateInlinedValue(i - varArgIndex);", "+\t\t\t\t\targuments[i].generateCode(currentScope, codeStream, true);", "+\t\t\t\t\tcodeStream.arrayAtPut(elementsTypeID, false);", "+\t\t\t} else if (argLength == paramLength) {", "+\t\t\t\t// right number of arguments - could be inexact - pass argument as is", "+\t\t\t\tTypeBinding lastType = arguments[varArgIndex].resolvedType;", "+\t\t\t\tif (lastType == NullBinding", "+\t\t\t\t\t|| (varArgsType.dimensions() == lastType.dimensions()", "+\t\t\t\t\t\t&& lastType.isCompatibleWith(varArgsType))) {", "+\t\t\t\t\t// foo(1, new int[]{2, 3}) or foo(1, null) --> last arg is passed as-is", "+\t\t\t\t\targuments[varArgIndex].generateCode(currentScope, codeStream, true);", "+\t\t\t\t} else {", "+\t\t\t\t\t// right number but not directly compatible or too many arguments - wrap extra into array", "+\t\t\t\t\t// need to gen elements into an array, then gen each remaining element into created array", "+\t\t\t\t\tcodeStream.generateInlinedValue(1);", "+\t\t\t\t\tcodeStream.newArray(varArgsType); // create a mono-dimensional array", "+\t\t\t\t\tcodeStream.dup();", "+\t\t\t\t\tcodeStream.generateInlinedValue(0);", "+\t\t\t\t\targuments[varArgIndex].generateCode(currentScope, codeStream, true);", "+\t\t\t\t\tcodeStream.arrayAtPut(elementsTypeID, false);", "+\t\t\t\t}", "+\t\t\t} else { // not enough arguments - pass extra empty array", "+\t\t\t\t// scenario: foo(1) --> foo(1, new int[0])", "+\t\t\t\t// generate code for an empty array of parameterType", "+\t\t\t\tcodeStream.generateInlinedValue(0);", "+\t\t\t\tcodeStream.newArray(varArgsType); // create a mono-dimensional array"]}], "num": 22884}