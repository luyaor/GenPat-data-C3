{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9d488a02b8652ebc95827a2fb99ad491", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7619d5e23d5d92c89526616dda746ba0", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/generatedfile/GeneratedFileManager.java", "commitBeforeChange": "bc5d9b450540dde0f4417c6b10a04ec18aa90f94", "commitAfterChange": "67c55712e5adee92eb685a3f98810e93028c1621", "methodNumberBeforeChange": 25, "methodNumberAfterChange": 23, "signatureBeforeChange": " \t \tprivate void updateMaps( String typeName, ICompilationUnit parentCompilationUnit, ICompilationUnit workingCopy )", "signatureAfterChange": " \t \tprivate void addEntryToWorkingCopyMaps( ICompilationUnit parentCompilationUnit, ICompilationUnit workingCopy )", "diff": ["-\tprivate void updateMaps( String typeName, ICompilationUnit parentCompilationUnit, ICompilationUnit workingCopy )", "+\tprivate void addEntryToWorkingCopyMaps( ICompilationUnit parentCompilationUnit, ICompilationUnit workingCopy )", "-\t\tupdateFileMaps( typeName, parentFile, generatedFile );", "+\t\taddEntryToFileMaps( parentFile, generatedFile );", "+", "+\t\tICompilationUnit cu = (ICompilationUnit)_generatedFile2WorkingCopy.get( generatedFile );", "+\t\tSet<IFile> parents = _generatedWorkingCopy2OpenParentFiles.get( workingCopy);", "-\t\t// type name -> working copy", "-\t\tICompilationUnit cu = (ICompilationUnit)_typeName2WorkingCopy.get( typeName );", "+\t\t\tif ( parents == null || parents.size() < 1 ) throw new RuntimeException( \"Unexpected size of open-parents set.  Expected size >= 0\");", "-\t\t\t_typeName2WorkingCopy.put( typeName, workingCopy );", "+\t\t{", "+\t\t\t_generatedFile2WorkingCopy.put( generatedFile, workingCopy );", "+\t\t}", "+\t\t", "+", "+\t\tif ( parents == null )", "+\t\t{", "+\t\t\tparents = new HashSet<IFile>();", "+\t\t\t_generatedWorkingCopy2OpenParentFiles.put( workingCopy, parents );", "+\t\t}", "+\t\tparents.add( parentFile );"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bc793a8c11432dfcfca49aa360e69468", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/generatedfile/GeneratedFileManager.java", "commitBeforeChange": "bc5d9b450540dde0f4417c6b10a04ec18aa90f94", "commitAfterChange": "67c55712e5adee92eb685a3f98810e93028c1621", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 13, "signatureBeforeChange": "  \tpublic synchronized boolean deleteGeneratedFile(IFile fileToDelete, IFile parentFile, IProgressMonitor progressMonitor ) \t\tthrows CoreException", "signatureAfterChange": " \tpublic synchronized boolean deleteGeneratedFile(IFile generatedFile, IFile parentFile, IProgressMonitor progressMonitor ) \t\tthrows CoreException", "diff": ["-\tpublic synchronized boolean deleteGeneratedFile(IFile fileToDelete, IFile parentFile, IProgressMonitor progressMonitor )", "+\t */", "+\tpublic synchronized boolean deleteGeneratedFile(IFile generatedFile, IFile parentFile, IProgressMonitor progressMonitor )", "-\t\treturn deleteGeneratedFile( fileToDelete, parentFile, progressMonitor, true );", "-\t}", "+\t\tremoveFromFileMaps( generatedFile, parentFile );", "+\t\tSet<IFile> parents = _generatedFile2ParentFiles.get( generatedFile );", "+\t\t// this can be empty, but it shouldn't be null here unless parentFile was never a parent of generatedFile", "+\t\tif ( parents == null ) throw new RuntimeException(\"unexpected null value for parents set for file \" + generatedFile);", "+\t\tif (parents == null || parents.size() == 0) {", "+\t\t\tgeneratedFile.delete(true, true, progressMonitor);"]}], "num": 14293}