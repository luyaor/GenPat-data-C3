{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "214614a816c7dcff70204b519db12d07", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8dc616b7f48c600452ff2f107942c7ec", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.tests/src/org/eclipse/jdt/apt/tests/TestUtil.java", "commitBeforeChange": "a6fb7155fd890e70fc93ff099a2bfa78beffa3e9", "commitAfterChange": "dade23c0ca1cb5b996dfae1d1cfc189d06d41a6f", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": " \tpublic static File createAndAddAnnotationJar( IJavaProject project ) \t\tthrows IOException, JavaModelException", "signatureAfterChange": " \tpublic static File createAndAddAnnotationJar( IJavaProject project ) \t\tthrows IOException, JavaModelException", "diff": ["-\t\t// TODO: temporary to work around jar-file locking problem:", "-\t\t//IPath projectPath = getProjectPath( project );", "-\t\t//File jarFile = new File( projectPath.toFile(), \"Classes.jar\" ); //$NON-NLS-1$", "-\t\tFile jarFile = File.createTempFile(\"org.eclipse.jdt.apt.tests.TestUtil\", \".jar\");  //$NON-NLS-1$//$NON-NLS-2$", "-\t\tString classesJarPath = jarFile.getAbsolutePath();", "+\t\tif (ANNO_JAR == null) {", "-\t\tFile binDir = getFileInPlugin( AptTestsPlugin.getDefault(), new Path(\"/bin\"));", "-\t\tif(null != binDir) {", "-\t\t", "-\t\t\t// create annotations jar at classesJarpath", "+\t\t\tIPath statePath = AptPlugin.getPlugin().getStateLocation();", "+\t\t\tIPath jarPath = statePath.append(\"org.eclipse.jdt.apt.tests.TestUtil.jar\");", "+\t\t\tANNO_JAR = new File(jarPath.toOSString());", "+\t\t\t", "+\t\t\tString classesJarPath = ANNO_JAR.getAbsolutePath();", "-\t\t", "-\t\t} else {", "-\t\t", "-\t\t\tFile aptJarFile = getFileInPlugin( AptTestsPlugin.getDefault(), new Path(\"/apt.jar\")); ", "-\t\t\tif(null != aptJarFile) {", "-\t\t\t\t", "-\t\t\t\t// move extapt.jar to classesJarPath file", "-\t\t\t\tmoveFile(aptJarFile, classesJarPath);", "-\t\t\t} else {", "-\t\t\t\t", "-\t\t\t\tthrow new FileNotFoundException(\"Could not find apt.jar file in org.eclipse.jdt.apt.tests plugin\");", "-\t\t\t}", "-\t\t\t", "+\t\t\tANNO_JAR.deleteOnExit();", "-\t\taddLibraryEntry( project, new Path(classesJarPath), null /*srcAttachmentPath*/, ", "-\t\t\t\tnull /*srcAttachmentPathRoot*/, true );", "-\t", "-\t\t// TODO: see above temporary patch for file locking problem", "-\t\tjarFile.deleteOnExit();", "-\t\treturn jarFile;", "+\t\taddLibraryEntry( project, new Path(ANNO_JAR.getAbsolutePath()), null /*srcAttachmentPath*/, ", "+\t\t\tnull /*srcAttachmentPathRoot*/, true );", "+\t\t", "+\t\treturn ANNO_JAR;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fa636c758502619820fe11bb9a959ceb", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.tests/src/org/eclipse/jdt/apt/tests/TestUtil.java", "commitBeforeChange": "78c270cb0e8bf81b3b471a8bdedbb8d9bf04e016", "commitAfterChange": "c4c0df5e4aeb7d3e8571312c597020a7d0812327", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " \tpublic static File createAndAddExternalAnnotationJar(  \t\t\tIJavaProject project  ) \t\tthrows IOException, JavaModelException", "signatureAfterChange": " \tpublic static File createAndAddExternalAnnotationJar(  \t\t\tIJavaProject project  ) \t\tthrows IOException, JavaModelException", "diff": ["+\t\t// create temporary file", "-\t\tFileFilter classFilter = new PackageFileFilter(", "-\t\t\t\tEXTANNOTATIONS_PKG, getPluginExtClassesDir());", "-\t\tFileFilter manifestFilter = new PackageFileFilter(", "-\t\t\t\t\"META-INF\", getPluginExtSrcDir()); //$NON-NLS-1$", "-\t\tMap<File, FileFilter> files = new HashMap<File, FileFilter>(2);", "-\t\tfiles.put(new File( getPluginExtClassesDir() ), classFilter);", "-\t\tfiles.put(new File( getPluginExtSrcDir() ), manifestFilter);", "-\t\tzip( classesJarPath, files );", "+\t\t", "+\t\tFile extBinDir = getFileInPlugin( AptTestsPlugin.getDefault(), new Path(\"/binext\")); ", "+\t\tif(null != extBinDir) {", "+\t\t\t", "+\t\t\t//create zip file in temp file location", "+\t\t\tFileFilter classFilter = new PackageFileFilter(", "+\t\t\t\t\tEXTANNOTATIONS_PKG, getPluginExtClassesDir());", "+\t\t\tFileFilter manifestFilter = new PackageFileFilter(", "+\t\t\t\t\t\"META-INF\", getPluginExtSrcDir()); //$NON-NLS-1$", "+\t\t\tMap<File, FileFilter> files = new HashMap<File, FileFilter>(2);", "+\t\t\tfiles.put(new File( getPluginExtClassesDir() ), classFilter);", "+\t\t\tfiles.put(new File( getPluginExtSrcDir() ), manifestFilter);", "+\t\t\tzip( classesJarPath, files );", "+\t\t\t", "+\t\t} else {", "+\t\t", "+\t\t\tFile extJarFile = getFileInPlugin( AptTestsPlugin.getDefault(), new Path(\"/aptext.jar\")); ", "+\t\t\tif(null != extJarFile) {", "+\t\t\t\t", "+\t\t\t\t// move extapt.jar to classesJarPath file", "+\t\t\t\tmoveFile(extJarFile, classesJarPath);", "+\t\t\t", "+\t\t\t} else {", "+\t\t\t\t", "+\t\t\t\tthrow new FileNotFoundException(\"Could not find aptext.jar file in org.eclipse.jdt.apt.tests plugin\");", "+\t\t\t}", "+\t\t\t", "+\t\t}", "+\t\t", "-\t\t\tnull /*srcAttachmentPathRoot*/, true );", "-\t\treturn new File(classesJarPath);", "+\t\t\t\tnull /*srcAttachmentPathRoot*/, true );", "+\t\t", "+\t\treturn jarFile;", "+\t\t"]}], "num": 12773}