{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0251c7ee62dbf5c7b2c0918654e0d62c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "153b95523a320fbc2ef7b04b156504d4", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/Buffer.java", "commitBeforeChange": "758f55a5a64497d7398f91effe575e974d834411", "commitAfterChange": "a920298c522cfd65cad97a6c929cd34516c3baed", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 19, "signatureBeforeChange": "\r public void replace(int position, int length, String text)", "signatureAfterChange": "\r public void replace(int position, int length, String text)", "diff": ["-\tif (!isReadOnly()) {\r", "-\t\tint textLength = 0;\r", "-\t\tif (text != null) {\r", "-\t\t\ttextLength = text.length();\r", "-\t\t}\r", "-\t\t\r", "-\t\tsynchronized (this.lock) {\r", "-\t\t\t// move gap\r", "-\t\t\tadjustGap(position + length, textLength - length);\r", "-\r", "-\t\t\t// overwrite\r", "-\t\t\tint min = Math.min(textLength, length);\r", "-\t\t\tfor (int i = position, j = 0; i < position + min; i++, j++)\r", "-\t\t\t\tthis.contents[i] = text.charAt(j);\r", "-\t\t\tif (length > textLength) {\r", "-\t\t\t\t// enlarge the gap\r", "-\t\t\t\tthis.gapStart -= (length - textLength);\r", "-\t\t\t} else\r", "-\t\t\t\tif (textLength > length) {\r", "-\t\t\t\t\t// shrink gap\r", "-\t\t\t\t\tthis.gapStart += (textLength - length);\r", "-\t\t\t\t\tfor (int i = length; i < textLength; i++)\r", "-\t\t\t\t\t\tthis.contents[position + i] = text.charAt(i);\r", "-\t\t\t\t}\r", "-\t\t}\r", "-\t\tthis.flags |= F_HAS_UNSAVED_CHANGES;\r", "-\t\t\r", "-\t\tnotifyChanged(new BufferChangedEvent(this, position, length, text));\r", "-\t}\r", "+\tthis.replace(position, length, text == null ? null : text.toCharArray());\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "50f87af00b27f70a8fdfeab6f4e59c52", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/Buffer.java", "commitBeforeChange": "758f55a5a64497d7398f91effe575e974d834411", "commitAfterChange": "a920298c522cfd65cad97a6c929cd34516c3baed", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 18, "signatureBeforeChange": "\r public void replace(int position, int length, char[] text)", "signatureAfterChange": "\r public void replace(int position, int length, char[] text)", "diff": ["-\t\tif (text == null) {\r", "-\t\t\ttext = new char[0];\r", "-\t\t}\r", "+\t\tint textLength = text == null ? 0 : text.length;\r", "-\t\t\tadjustGap(position + length, text.length - length);\r", "+\t\t\tmoveAndResizeGap(position + length, textLength - length);\r", "-\t\t\tint min = Math.min(text.length, length);\r", "-\t\t\tfor (int i = position, j = 0; i < position + min; i++, j++)\r", "-\t\t\t\tthis.contents[i] = text[j];\r", "-\t\t\tif (length > text.length) {\r", "+\t\t\tint min = Math.min(textLength, length);\r", "+\t\t\tif (min > 0) {\r", "+\t\t\t\tSystem.arraycopy(text, 0, this.contents, position, min);\r", "+\t\t\t}\r", "+\t\t\tif (length > textLength) {\r", "-\t\t\t\tthis.gapStart -= (length - text.length);\r", "-\t\t\t} else\r", "-\t\t\t\tif (text.length > length) {\r", "-\t\t\t\t\t// shrink gap\r", "-\t\t\t\t\tthis.gapStart += (text.length - length);\r", "-\t\t\t\t\tfor (int i = length; i < text.length; i++)\r", "-\t\t\t\t\t\tthis.contents[position + i] = text[i];\r", "-\t\t\t\t}\r", "+\t\t\t\tthis.gapStart -= length - textLength;\r", "+\t\t\t} else if (textLength > length) {\r", "+\t\t\t\t// shrink gap\r", "+\t\t\t\tthis.gapStart += textLength - length;\r", "+\t\t\t\tSystem.arraycopy(text, 0, this.contents, position, textLength);\r", "+\t\t\t}\r", "-\t\tif (text.length > 0) {\r", "+\t\tif (textLength > 0) {\r"]}], "num": 10720}