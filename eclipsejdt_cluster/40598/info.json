{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "793a85a1a1c36c732039780646fb04d1", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3c27b093f6deb89a8be1b2a2be5d847e", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/ExternalFoldersManager.java", "commitBeforeChange": "40eac8059a53961d90f717be2da5fcbf0c755e95", "commitAfterChange": "53bc343588c2b2b6eb1ea59b00d820f1868f0f5f", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": " \tprivate IProject createExternalFoldersProject(IProgressMonitor monitor) throws CoreException", "signatureAfterChange": " \tprivate IProject createExternalFoldersProject(IProgressMonitor monitor) throws CoreException", "diff": ["-\t\t\ttry {", "-\t\t\t\tproject.open(monitor);", "-\t\t\t} catch (CoreException e1) {", "-\t\t\t\tif (e1.getStatus().getCode() == IResourceStatus.FAILED_READ_METADATA) {", "-\t\t\t\t\t// workspace was moved (see https://bugs.eclipse.org/bugs/show_bug.cgi?id=241400)", "-\t\t\t\t\tproject.delete(true, monitor);", "-\t\t\t\t\tcreateExternalFoldersProject(project, monitor);", "-\t\t\t\t} else {", "-\t\t\t\t\t// .project or folder on disk have been deleted, recreate them", "-\t\t\t\t\tIPath stateLocation = DEBUG ? ResourcesPlugin.getWorkspace().getRoot().getLocation() : JavaCore.getPlugin().getStateLocation();", "-\t\t\t\t\tIPath projectPath = stateLocation.append(EXTERNAL_PROJECT_NAME);", "-\t\t\t\t\tprojectPath.toFile().mkdirs();", "-\t\t\t\t\ttry {", "-\t\t\t\t\t    FileOutputStream output = new FileOutputStream(projectPath.append(\".project\").toOSString()); //$NON-NLS-1$", "-\t\t\t\t\t    try {", "-\t\t\t\t\t        output.write((", "-\t\t\t\t\t        \t\t\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"<projectDescription>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"\t<name>\" + EXTERNAL_PROJECT_NAME + \"</name>\\n\" + //$NON-NLS-1$ //$NON-NLS-2$", "-\t\t\t\t\t        \t\t\"\t<comment></comment>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"\t<projects>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"\t</projects>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"\t<buildSpec>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"\t</buildSpec>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"\t<natures>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"\t</natures>\\n\" + //$NON-NLS-1$", "-\t\t\t\t\t        \t\t\"</projectDescription>\").getBytes()); //$NON-NLS-1$", "-\t\t\t\t\t    } finally {", "-\t\t\t\t\t        output.close();", "-\t\t\t\t\t    }", "-\t\t\t\t\t} catch (IOException e) {", "-\t\t\t\t\t\t// fallback to re-creating the project", "-\t\t\t\t\t\tproject.delete(true, monitor);", "-\t\t\t\t\t\tcreateExternalFoldersProject(project, monitor);", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t\tproject.open(monitor);", "-\t\t\t}", "+\t\t\topenExternalFoldersProject(project, monitor);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b84a78a9536fd9f419e793f3e4fb0f6e", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/ExternalFoldersManager.java", "commitBeforeChange": "9a3391f0b32f1d3b3db8e6580d342f8f2bd4bd07", "commitAfterChange": "a107a93c33b9fbfeb3c58f06a397400d87b64e14", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": " \tprivate IProject createExternalFoldersProject(IProgressMonitor monitor)", "signatureAfterChange": " \tprivate IProject createExternalFoldersProject(IProgressMonitor monitor)", "diff": ["-\t\t\t\t\tIProjectDescription desc = project.getWorkspace().newProjectDescription(project.getName());", "-\t\t\t\t\tIPath stateLocation = JavaCore.getPlugin().getStateLocation();", "-\t\t\t\t\tdesc.setLocation(stateLocation.append(EXTERNAL_PROJECT_NAME));", "-\t\t\t\t\tproject.create(DEBUG ? null : desc, DEBUG ? IResource.NONE : IResource.HIDDEN, monitor);", "+\t\t\t\t\tcreateExternalFoldersProject(project, monitor);", "-\t\t\t\t\t// .project or folder on disk have been deleted, recreate them", "-\t\t\t\t\tIPath stateLocation = DEBUG ? ResourcesPlugin.getWorkspace().getRoot().getLocation() : JavaCore.getPlugin().getStateLocation();", "-\t\t\t\t\tIPath projectPath = stateLocation.append(EXTERNAL_PROJECT_NAME);", "-\t\t\t\t\tprojectPath.toFile().mkdirs();", "-\t\t\t\t    FileOutputStream output = new FileOutputStream(projectPath.append(\".project\").toOSString()); //$NON-NLS-1$", "-\t\t\t\t    try {", "-\t\t\t\t        output.write((", "-\t\t\t\t        \t\t\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"<projectDescription>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"\t<name>\" + EXTERNAL_PROJECT_NAME + \"</name>\\n\" + //$NON-NLS-1$ //$NON-NLS-2$", "-\t\t\t\t        \t\t\"\t<comment></comment>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"\t<projects>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"\t</projects>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"\t<buildSpec>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"\t</buildSpec>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"\t<natures>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"\t</natures>\\n\" + //$NON-NLS-1$", "-\t\t\t\t        \t\t\"</projectDescription>\").getBytes()); //$NON-NLS-1$", "-\t\t\t\t    } finally {", "-\t\t\t\t        output.close();", "-\t\t\t\t    }", "-\t\t\t\t\tproject.open(null);", "+\t\t\t\t\tif (e1.getStatus().getCode() == IResourceStatus.FAILED_READ_METADATA) {", "+\t\t\t\t\t\t// workspace was moved (see https://bugs.eclipse.org/bugs/show_bug.cgi?id=241400)", "+\t\t\t\t\t\tproject.delete(true, monitor);", "+\t\t\t\t\t\tcreateExternalFoldersProject(project, monitor);", "+\t\t\t\t\t} else {", "+\t\t\t\t\t\t// .project or folder on disk have been deleted, recreate them", "+\t\t\t\t\t\tIPath stateLocation = DEBUG ? ResourcesPlugin.getWorkspace().getRoot().getLocation() : JavaCore.getPlugin().getStateLocation();", "+\t\t\t\t\t\tIPath projectPath = stateLocation.append(EXTERNAL_PROJECT_NAME);", "+\t\t\t\t\t\tprojectPath.toFile().mkdirs();", "+\t\t\t\t\t    FileOutputStream output = new FileOutputStream(projectPath.append(\".project\").toOSString()); //$NON-NLS-1$", "+\t\t\t\t\t    try {", "+\t\t\t\t\t        output.write((", "+\t\t\t\t\t        \t\t\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"<projectDescription>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"\t<name>\" + EXTERNAL_PROJECT_NAME + \"</name>\\n\" + //$NON-NLS-1$ //$NON-NLS-2$", "+\t\t\t\t\t        \t\t\"\t<comment></comment>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"\t<projects>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"\t</projects>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"\t<buildSpec>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"\t</buildSpec>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"\t<natures>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"\t</natures>\\n\" + //$NON-NLS-1$", "+\t\t\t\t\t        \t\t\"</projectDescription>\").getBytes()); //$NON-NLS-1$", "+\t\t\t\t\t    } finally {", "+\t\t\t\t\t        output.close();", "+\t\t\t\t\t    }", "+\t\t\t\t\t}", "+\t\t\t\t\tproject.open(monitor);"]}], "num": 40598}