{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "ae840aad807e051a15b5cc4291656904", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "141c6b94c3e77c8d80cfed4196c46ddb", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/HandleFactory.java", "commitBeforeChange": "b04602938404af4f8569a399fb36a5018768a262", "commitAfterChange": "6a230a9d6ae1a4a6adbf38879cb9ee685eccffe9", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "\r \tpublic Openable createOpenable(String resourcePath)", "signatureAfterChange": "\r \tpublic Openable createOpenable(String resourcePath)", "diff": ["-\t\tif ((separatorIndex =\r", "-\t\t\tresourcePath.indexOf(JarFileEntryDocument.JAR_FILE_ENTRY_SEPARATOR))\r", "-\t\t\t> -1) {\r", "+\t\tif ((separatorIndex= resourcePath.indexOf(JarFileEntryDocument.JAR_FILE_ENTRY_SEPARATOR)) > -1) {\r", "-\t\t\tString jarPath = resourcePath.substring(0, separatorIndex);\r", "+\t\t\tString jarPath= resourcePath.substring(0, separatorIndex);\r", "-\t\t\t\tthis.lastPkgFragmentRootPath = jarPath;\r", "-\t\t\t\tthis.lastPkgFragmentRoot = this.getJarPkgFragmentRoot(jarPath);\r", "-\t\t\t\tthis.packageHandles = new Hashtable(5);\r", "+\t\t\t\tthis.lastPkgFragmentRootPath= jarPath;\r", "+\t\t\t\tthis.lastPkgFragmentRoot= this.getJarPkgFragmentRoot(jarPath);\r", "+\t\t\t\tthis.packageHandles= new Hashtable(5);\r", "-\t\t\tString classFilePath = resourcePath.substring(separatorIndex + 1);\r", "-\t\t\tint lastSlash = classFilePath.lastIndexOf('/');\r", "-\t\t\tString packageName =\r", "-\t\t\t\tlastSlash > -1\r", "-\t\t\t\t\t? classFilePath.substring(0, lastSlash).replace('/', '.')\r", "-\t\t\t\t\t: IPackageFragment.DEFAULT_PACKAGE_NAME;\r", "-\t\t\tIPackageFragment pkgFragment =\r", "-\t\t\t\t(IPackageFragment) this.packageHandles.get(packageName);\r", "+\t\t\tString classFilePath= resourcePath.substring(separatorIndex + 1);\r", "+\t\t\tint lastSlash= classFilePath.lastIndexOf('/');\r", "+\t\t\tString packageName= lastSlash > -1 ? classFilePath.substring(0, lastSlash).replace('/', '.') : IPackageFragment.DEFAULT_PACKAGE_NAME;\r", "+\t\t\tIPackageFragment pkgFragment= (IPackageFragment) this.packageHandles.get(packageName);\r", "-\t\t\t\tpkgFragment = this.lastPkgFragmentRoot.getPackageFragment(packageName);\r", "+\t\t\t\tpkgFragment= this.lastPkgFragmentRoot.getPackageFragment(packageName);\r", "-\t\t\tIClassFile classFile =\r", "-\t\t\t\tpkgFragment.getClassFile(classFilePath.substring(lastSlash + 1));\r", "+\t\t\tIClassFile classFile= pkgFragment.getClassFile(classFilePath.substring(lastSlash + 1));\r", "-\t\t\tif (this.lastPkgFragmentRootPath == null\r", "-\t\t\t\t|| !(resourcePath.startsWith(this.lastPkgFragmentRootPath)\r", "+\t\t\tif (this.lastPkgFragmentRootPath == null \r", "+\t\t\t\t|| !(resourcePath.startsWith(this.lastPkgFragmentRootPath) \r", "-\t\t\t\tIPackageFragmentRoot root = this.getPkgFragmentRoot(resourcePath);\r", "+\t\t\t\tIPackageFragmentRoot root= this.getPkgFragmentRoot(resourcePath);\r", "-\t\t\t\tthis.lastPkgFragmentRoot = root;\r", "-\t\t\t\tthis.lastPkgFragmentRootPath = this.lastPkgFragmentRoot.getPath().toString();\r", "-\t\t\t\tthis.packageHandles = new Hashtable(5);\r", "+\t\t\t\tthis.lastPkgFragmentRoot= root;\r", "+\t\t\t\tthis.lastPkgFragmentRootPath= this.lastPkgFragmentRoot.getPath().toString();\r", "+\t\t\t\tthis.packageHandles= new Hashtable(5);\r", "-\t\t\tint lastSlash = resourcePath.lastIndexOf(IPath.SEPARATOR);\r", "-\t\t\tString packageName =\r", "-\t\t\t\tlastSlash > (length = this.lastPkgFragmentRootPath.length())\r", "-\t\t\t\t\t? resourcePath.substring(length + 1, lastSlash).replace(IPath.SEPARATOR, '.')\r", "-\t\t\t\t\t: IPackageFragment.DEFAULT_PACKAGE_NAME;\r", "-\t\t\tIPackageFragment pkgFragment =\r", "-\t\t\t\t(IPackageFragment) this.packageHandles.get(packageName);\r", "+\t\t\tint lastSlash= resourcePath.lastIndexOf(IPath.SEPARATOR);\r", "+\t\t\tString packageName= lastSlash > (length= this.lastPkgFragmentRootPath.length()) ? resourcePath.substring(length + 1, lastSlash).replace(IPath.SEPARATOR, '.') : IPackageFragment.DEFAULT_PACKAGE_NAME;\r", "+\t\t\tIPackageFragment pkgFragment= (IPackageFragment) this.packageHandles.get(packageName);\r", "-\t\t\t\tpkgFragment = this.lastPkgFragmentRoot.getPackageFragment(packageName);\r", "+\t\t\t\tpkgFragment= this.lastPkgFragmentRoot.getPackageFragment(packageName);\r", "-\t\t\tString simpleName = resourcePath.substring(lastSlash + 1);\r", "-\t\t\tif (simpleName.endsWith(\".java\")) {\r", "-\t\t\t\tICompilationUnit unit = pkgFragment.getCompilationUnit(simpleName);\r", "+\t\t\tString simpleName= resourcePath.substring(lastSlash + 1);\r", "+\t\t\tif (Util.isJavaFileName(simpleName)) {\r", "+\t\t\t\tICompilationUnit unit= pkgFragment.getCompilationUnit(simpleName);\r", "-\t\t\t\tIClassFile classFile = pkgFragment.getClassFile(simpleName);\r", "+\t\t\t\tIClassFile classFile= pkgFragment.getClassFile(simpleName);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fffc1ab85dbaca342766cbfd485a7e35", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/util/HandleFactory.java", "commitBeforeChange": "1e77fadf417c78089a8bce12d01b049277ef0c41", "commitAfterChange": "caf3736c8c3269393f7e0bedb9e633769506e2e8", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " \tpublic Openable createOpenable(String resourcePath, IJavaSearchScope scope)", "signatureAfterChange": " \tpublic Openable createOpenable(String resourcePath, IJavaSearchScope scope)", "diff": ["-\t\t\t\tthis.packageHandles= new HashMap(5);", "+\t\t\t\tthis.packageHandles= new HashtableOfArrayToObject(5);", "-\t\t\tint lastSlash= classFilePath.lastIndexOf('/');", "-\t\t\tString packageName= lastSlash > -1 ? classFilePath.substring(0, lastSlash).replace('/', '.') : IPackageFragment.DEFAULT_PACKAGE_NAME;", "-\t\t\tIPackageFragment pkgFragment= (IPackageFragment) this.packageHandles.get(packageName);", "-\t\t\tif (pkgFragment == null) {", "-\t\t\t\tpkgFragment= this.lastPkgFragmentRoot.getPackageFragment(packageName);", "-\t\t\t\tthis.packageHandles.put(packageName, pkgFragment);", "+\t\t\tString[] simpleNames = new Path(classFilePath).segments();", "+\t\t\tString[] pkgName;", "+\t\t\tint length = simpleNames.length-1;", "+\t\t\tif (length > 0) {", "+\t\t\t\tpkgName = new String[length];", "+\t\t\t\tSystem.arraycopy(simpleNames, 0, pkgName, 0, length);", "+\t\t\t} else {", "+\t\t\t\tpkgName = CharOperation.NO_STRINGS;", "-\t\t\tIClassFile classFile= pkgFragment.getClassFile(classFilePath.substring(lastSlash + 1));", "+\t\t\tIPackageFragment pkgFragment= (IPackageFragment) this.packageHandles.get(pkgName);", "+\t\t\tif (pkgFragment == null) {", "+\t\t\t\tpkgFragment= ((PackageFragmentRoot) this.lastPkgFragmentRoot).getPackageFragment(pkgName);", "+\t\t\t\tthis.packageHandles.put(pkgName, pkgFragment);", "+\t\t\t}", "+\t\t\tIClassFile classFile= pkgFragment.getClassFile(simpleNames[length]);", "-\t\t\tint length = -1;", "+\t\t\tint rootPathLength = -1;", "-\t\t\t\t\t&& (length = this.lastPkgFragmentRootPath.length()) > 0", "-\t\t\t\t\t&& resourcePath.charAt(length) == '/')) {", "+\t\t\t\t\t&& (rootPathLength = this.lastPkgFragmentRootPath.length()) > 0", "+\t\t\t\t\t&& resourcePath.charAt(rootPathLength) == '/')) {", "-\t\t\t\tthis.lastPkgFragmentRoot= root;", "-\t\t\t\tthis.lastPkgFragmentRootPath= this.lastPkgFragmentRoot.getPath().toString();", "-\t\t\t\tthis.packageHandles= new HashMap(5);", "+\t\t\t\tthis.lastPkgFragmentRoot = root;", "+\t\t\t\tthis.lastPkgFragmentRootPath = this.lastPkgFragmentRoot.getPath().toString();", "+\t\t\t\tthis.packageHandles = new HashtableOfArrayToObject(5);", "-\t\t\tint lastSlash= resourcePath.lastIndexOf(IPath.SEPARATOR);", "-\t\t\tString packageName= lastSlash > (length= this.lastPkgFragmentRootPath.length()) ? resourcePath.substring(length + 1, lastSlash).replace(IPath.SEPARATOR, '.') : IPackageFragment.DEFAULT_PACKAGE_NAME;", "-\t\t\tIPackageFragment pkgFragment= (IPackageFragment) this.packageHandles.get(packageName);", "-\t\t\tif (pkgFragment == null) {", "-\t\t\t\tpkgFragment= this.lastPkgFragmentRoot.getPackageFragment(packageName);", "-\t\t\t\tthis.packageHandles.put(packageName, pkgFragment);", "+\t\t\tresourcePath = resourcePath.substring(this.lastPkgFragmentRootPath.length() + 1);", "+\t\t\tString[] simpleNames = new Path(resourcePath).segments();", "+\t\t\tString[] pkgName;", "+\t\t\tint length = simpleNames.length-1;", "+\t\t\tif (length > 0) {", "+\t\t\t\tpkgName = new String[length];", "+\t\t\t\tSystem.arraycopy(simpleNames, 0, pkgName, 0, length);", "+\t\t\t} else {", "+\t\t\t\tpkgName = CharOperation.NO_STRINGS;", "-\t\t\tString simpleName= resourcePath.substring(lastSlash + 1);", "+\t\t\tIPackageFragment pkgFragment= (IPackageFragment) this.packageHandles.get(pkgName);", "+\t\t\tif (pkgFragment == null) {", "+\t\t\t\tpkgFragment= ((PackageFragmentRoot) this.lastPkgFragmentRoot).getPackageFragment(pkgName);", "+\t\t\t\tthis.packageHandles.put(pkgName, pkgFragment);", "+\t\t\t}", "+\t\t\tString simpleName= simpleNames[length];"]}], "num": 48356}