{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0d3293153d47ce61ce36c62bc12b9832", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "06501cfaa5e77708586158078d2c22b9", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/matching/SuperTypeNamesCollector.java", "commitBeforeChange": "0271031e5844c32df2646c3a81a2c00b29e7d251", "commitAfterChange": "14c82497ad7236bee9eedf2d9ff4867e4a47ff21", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 13, "signatureBeforeChange": " private CompilationUnitDeclaration buildBindings(ICompilationUnit compilationUnit) throws JavaModelException", "signatureAfterChange": " protected CompilationUnitDeclaration buildBindings(ICompilationUnit compilationUnit) throws JavaModelException", "diff": ["- */", "-private CompilationUnitDeclaration buildBindings(ICompilationUnit compilationUnit) throws JavaModelException {", "-\tfinal IFile file = (IFile)compilationUnit.getResource();", "-\t", "-\t// get main type name", "-\tfinal String fileName = file.getFullPath().lastSegment();", "-\tfinal char[] mainTypeName =", "-\t\tfileName.substring(0, fileName.length() - 5).toCharArray();", "-\t", "-\t// source unit", "-\tIBuffer buffer;", "-\tfinal char[] source = ", "-\t\tcompilationUnit.isWorkingCopy() ?", "-\t\t\t(buffer = compilationUnit.getBuffer()) == null ? null : buffer.getCharacters() :", "-\t\t\tUtil.getResourceContentsAsCharArray(file);", "-\torg.eclipse.jdt.internal.compiler.env.ICompilationUnit sourceUnit = ", "-\t\tnew org.eclipse.jdt.internal.compiler.env.ICompilationUnit() {", "-\t\t\tpublic char[] getContents() {", "-\t\t\t\treturn source;", "-\t\t\t}", "-\t\t\tpublic char[] getFileName() {", "-\t\t\t\treturn fileName.toCharArray();", "-\t\t\t}", "-\t\t\tpublic char[] getMainTypeName() {", "-\t\t\t\treturn mainTypeName;", "-\t\t\t}", "-\t\t\tpublic char[][] getPackageName() {", "-\t\t\t\treturn null;", "-\t\t\t}", "-\t\t};", "-\t", "-\t// diet parse", "-\tCompilationResult compilationResult = new CompilationResult(sourceUnit, 0, 0, 0);", "-\tCompilationUnitDeclaration unit = this.locator.parser.dietParse(sourceUnit, compilationResult);", "-\tif (unit != null) {", "-\t\tthis.locator.lookupEnvironment.buildTypeBindings(unit);", "-\t\tthis.locator.lookupEnvironment.completeTypeBindings(unit, false);", "-\t}", "-\treturn unit;", "-}", "+protected CompilationUnitDeclaration buildBindings(ICompilationUnit compilationUnit) throws JavaModelException {", "+\tfinal IFile file = (IFile) compilationUnit.getResource();", "+\tfinal String fileName = file.getFullPath().lastSegment();", "+\tfinal char[] mainTypeName = fileName.substring(0, fileName.length() - 5).toCharArray();", "+\t// source unit", "+\tIBuffer buffer = compilationUnit.getBuffer();", "+\tfinal char[] source = ", "+\t\tcompilationUnit.isWorkingCopy()", "+\t\t\t? (buffer == null ? null : buffer.getCharacters())", "+\t\t\t: Util.getResourceContentsAsCharArray(file);", "+\torg.eclipse.jdt.internal.compiler.env.ICompilationUnit sourceUnit = ", "+\t\tnew org.eclipse.jdt.internal.compiler.env.ICompilationUnit() {", "+\t\t\tpublic char[] getContents() { return source; }", "+\t\t\tpublic char[] getFileName() { return fileName.toCharArray(); }", "+\t\t\tpublic char[] getMainTypeName() { return mainTypeName; }", "+\t\t\tpublic char[][] getPackageName() { return null; }", "+\t\t};", "+", "+\tCompilationResult compilationResult = new CompilationResult(sourceUnit, 1, 1, 0);", "+\tCompilationUnitDeclaration unit = this.locator.basicParser().dietParse(sourceUnit, compilationResult);", "+\treturn unit;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "68294e7644eaeb853f38ad93d66b0132", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/matching/PotentialMatch.java", "commitBeforeChange": "0271031e5844c32df2646c3a81a2c00b29e7d251", "commitAfterChange": "14c82497ad7236bee9eedf2d9ff4867e4a47ff21", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 6, "signatureBeforeChange": " \tprivate char[] getQualifiedName()", "signatureAfterChange": " private char[] getQualifiedName()", "diff": ["-\t */", "-\tprivate char[] getQualifiedName() {", "-\t\tif (this.openable instanceof CompilationUnit) {", "-\t\t\t// get file name", "-\t\t\tString fileName = this.resource.getFullPath().lastSegment();", "-\t\t\t// get main type name", "-\t\t\tchar[] mainTypeName = fileName.substring(0, fileName.length()-5).toCharArray(); ", "-\t\t\tCompilationUnit cu = (CompilationUnit)this.openable;", "-\t\t\treturn cu.getType(new String(mainTypeName)).getFullyQualifiedName().toCharArray();", "-\t\t} else if (this.openable instanceof ClassFile) {", "-\t\t\tString fileName = getSourceFileName();", "-\t\t\tif (fileName == NO_SOURCE_FILE_NAME) {", "-\t\t\t\ttry {", "-\t\t\t\t\treturn ((ClassFile)this.openable).getType().getFullyQualifiedName('.').toCharArray();", "-\t\t\t\t} catch (JavaModelException e) {", "-\t\t\t\t\treturn null;", "-\t\t\t\t}", "-\t\t\t}", "-\t\t\tString simpleName = fileName.substring(0, fileName.length()-5); // length-\".java\".length()", "-\t\t\tString pkgName = this.openable.getParent().getElementName();", "-\t\t\tif (pkgName.length() == 0) {", "-\t\t\t\treturn simpleName.toCharArray();", "-\t\t\t} else {", "-\t\t\t\treturn (pkgName + '.' + simpleName).toCharArray();", "-\t\t\t}", "-\t\t} else {", "-\t\t\treturn null;", "-\t\t}", "-\t}", "+ */", "+private char[] getQualifiedName() {", "+\tif (this.openable instanceof CompilationUnit) {", "+\t\t// get file name", "+\t\tString fileName = this.resource.getFullPath().lastSegment();", "+\t\t// get main type name", "+\t\tchar[] mainTypeName = fileName.substring(0, fileName.length()-5).toCharArray(); ", "+\t\tCompilationUnit cu = (CompilationUnit) this.openable;", "+\t\treturn cu.getType(new String(mainTypeName)).getFullyQualifiedName().toCharArray();", "+\t} else if (this.openable instanceof ClassFile) {", "+\t\tString fileName = getSourceFileName();", "+\t\tif (fileName == NO_SOURCE_FILE_NAME) {", "+\t\t\t\treturn ((ClassFile) this.openable).getType().getFullyQualifiedName('.').toCharArray();", "+\t\t\t} catch (JavaModelException e) {", "+\t\t\t\treturn null;", "+\t\t\t}", "+\t\t}", "+\t\tString simpleName = fileName.substring(0, fileName.length()-5); // length-\".java\".length()", "+\t\tString pkgName = this.openable.getParent().getElementName();", "+\t\tif (pkgName.length() == 0)", "+\t\t\treturn simpleName.toCharArray();", "+\t\treturn (pkgName + '.' + simpleName).toCharArray();", "+\t}", "+\treturn null;", "+}"]}], "num": 64199}