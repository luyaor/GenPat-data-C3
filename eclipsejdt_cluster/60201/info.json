{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "21b3d013619af8b569c7a56f668cac38", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "43aae6ec91c96cedd5ab516ff36e5f5b", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/matching/MatchLocator.java", "commitBeforeChange": "70416b46b1375461a92d89ffa1cb077778dc6e86", "commitAfterChange": "0c53505dd9d8f221929a96f99e04ff55bfc4fc05", "methodNumberBeforeChange": 8, "methodNumberAfterChange": 7, "signatureBeforeChange": "  \tprivate ClassFileReader classFileReader(IType type)", "signatureAfterChange": " \tpublic  ClassFileReader classFileReader(IType type)", "diff": ["+\t}", "+\tpublic  ClassFileReader classFileReader(IType type) {", "+\t\tIClassFile classFile = type.getClassFile(); ", "+\t\tif (((IOpenable)classFile).isOpen()) {", "+\t\t\tJavaModelManager manager = JavaModelManager.getJavaModelManager();", "+\t\t\tsynchronized(manager){", "+\t\t\t\treturn (ClassFileReader)manager.getInfo(type);", "+\t\t\t}", "+\t\t} else {", "+\t\t\tIPackageFragment pkg = type.getPackageFragment();", "+\t\t\tIPackageFragmentRoot root = (IPackageFragmentRoot)pkg.getParent();", "+\t\t\ttry {", "+\t\t\t\tif (root.isArchive()) {", "+\t\t\t\t\tIPath zipPath = root.isExternal() ? root.getPath() : root.getResource().getLocation();", "+\t\t\t\t\tif (zipPath == null) return null; // location is null", "+\t\t\t\t\tZipFile zipFile = null;", "+\t\t\t\t\ttry {", "+\t\t\t\t\t\tif (JavaModelManager.ZIP_ACCESS_VERBOSE) {", "+\t\t\t\t\t\t\tSystem.out.println(\"(\" + Thread.currentThread() + \") [MatchLocator.classFileReader()] Creating ZipFile on \" + zipPath); //$NON-NLS-1$\t//$NON-NLS-2$", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\t// TODO: (jerome) should use JavaModelManager.getZipFile(...) instead", "+\t\t\t\t\t\tzipFile = new ZipFile(zipPath.toOSString());", "+\t\t\t\t\t\tchar[] pkgPath = pkg.getElementName().toCharArray();", "+\t\t\t\t\t\tCharOperation.replace(pkgPath, '.', '/');", "+\t\t\t\t\t\tchar[] classFileName = classFile.getElementName().toCharArray();", "+\t\t\t\t\t\tchar[] path = pkgPath.length == 0 ? classFileName : CharOperation.concat(pkgPath, classFileName, '/');", "+\t\t\t\t\t\treturn ClassFileReader.read(zipFile, new String(path));", "+\t\t\t\t\t} finally {", "+\t\t\t\t\t\tif (zipFile != null) {", "+\t\t\t\t\t\t\ttry {", "+\t\t\t\t\t\t\t\tzipFile.close();", "+\t\t\t\t\t\t\t} catch (IOException e) {", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t} else {", "+\t\t\t\t\treturn ClassFileReader.read(type.getPath().toOSString());", "+\t\t\t\t}", "+\t\t\t} catch (ClassFormatException e) {", "+\t\t\t\treturn null;", "+\t\t\t} catch (IOException e) {", "+\t\t\t\treturn null;", "+\t\t\t}", "-", "-\tprivate ClassFileReader classFileReader(IType type) {", "-\t\tIClassFile classFile = type.getClassFile(); ", "-\t\tif (((IOpenable)classFile).isOpen()) {", "-\t\t\tJavaModelManager manager = JavaModelManager.getJavaModelManager();", "-\t\t\tsynchronized(manager){", "-\t\t\t\treturn (ClassFileReader)manager.getInfo(type);", "-\t\t\t}", "-\t\t} else {", "-\t\t\tIPackageFragment pkg = type.getPackageFragment();", "-\t\t\tIPackageFragmentRoot root = (IPackageFragmentRoot)pkg.getParent();", "-\t\t\ttry {", "-\t\t\t\tif (root.isArchive()) {", "-\t\t\t\t\tIPath zipPath = root.isExternal() ? root.getPath() : root.getResource().getLocation();", "-\t\t\t\t\tif (zipPath == null) return null; // location is null", "-\t\t\t\t\tZipFile zipFile = null;", "-\t\t\t\t\ttry {", "-\t\t\t\t\t\tif (JavaModelManager.ZIP_ACCESS_VERBOSE) {", "-\t\t\t\t\t\t\tSystem.out.println(\"(\" + Thread.currentThread() + \") [MatchLocator.classFileReader()] Creating ZipFile on \" + zipPath); //$NON-NLS-1$\t//$NON-NLS-2$", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tzipFile = new ZipFile(zipPath.toOSString());", "-\t\t\t\t\t\tchar[] pkgPath = pkg.getElementName().toCharArray();", "-\t\t\t\t\t\tCharOperation.replace(pkgPath, '.', '/');", "-\t\t\t\t\t\tchar[] classFileName = classFile.getElementName().toCharArray();", "-\t\t\t\t\t\tchar[] path = pkgPath.length == 0 ? classFileName : CharOperation.concat(pkgPath, classFileName, '/');", "-\t\t\t\t\t\treturn ClassFileReader.read(zipFile, new String(path));", "-\t\t\t\t\t} finally {", "-\t\t\t\t\t\tif (zipFile != null) {", "-\t\t\t\t\t\t\ttry {", "-\t\t\t\t\t\t\t\tzipFile.close();", "-\t\t\t\t\t\t\t} catch (IOException e) {", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t}", "-\t\t\t\t\t}", "-\t\t\t\t} else {", "-\t\t\t\t\treturn ClassFileReader.read(type.getPath().toOSString());", "-\t\t\t\t}", "-\t\t\t} catch (ClassFormatException e) {", "-\t\t\t\treturn null;", "-\t\t\t} catch (IOException e) {", "-\t\t\t\treturn null;", "-\t\t\t}", "-\t\t}", "-\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "81c387f84b96bafc6868d4548c17f447", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/hierarchy/TypeHierarchy.java", "commitBeforeChange": "1159f42f3e1e1aaac22ff9f396ef841945f2fbd4", "commitAfterChange": "262511abdaf520ffe570d2f50bd42f0cc7c734ab", "methodNumberBeforeChange": 66, "methodNumberAfterChange": 66, "signatureBeforeChange": " private static byte[] readUntil(InputStream input, byte separator) throws JavaModelException, IOException", "signatureAfterChange": " protected static byte[] readUntil(InputStream input, byte separator) throws JavaModelException, IOException", "diff": ["-private static byte[] readUntil(InputStream input, byte separator) throws JavaModelException, IOException{", "+protected static byte[] readUntil(InputStream input, byte separator) throws JavaModelException, IOException{"]}], "num": 60201}