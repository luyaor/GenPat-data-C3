{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6e2a8a4ae7318f9adacd9aa8d153c255", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "17934cebd7377f964bdfa6755b03df6d", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/util/ExternalAnnotationUtil.java", "commitBeforeChange": "34f724a9738d7636a75842e2910c694725115548", "commitAfterChange": "9b49fc6edec0d13e82a14df97219e6ae294f74cc", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 8, "signatureBeforeChange": "  \tstatic void annotateMember(String typeName, IFile file, String selector, String originalSignature, String annotatedSignature, \t\t\t\t\t\t\t\t\t\tint updatePosition, MergeStrategy mergeStrategy, IProgressMonitor monitor) \t\t\tthrows CoreException, IOException, IllegalArgumentException", "signatureAfterChange": "  \tprivate static void annotateMember(String typeName, IFile file, String selector, String originalSignature, String annotatedSignature, \t\t\t\t\t\t\t\t\t\tint updatePosition, MergeStrategy mergeStrategy, IProgressMonitor monitor) \t\t\tthrows CoreException, IOException, IllegalArgumentException", "diff": ["-\tstatic void annotateMember(String typeName, IFile file, String selector, String originalSignature, String annotatedSignature,", "+\tprivate static void annotateMember(String typeName, IFile file, String selector, String originalSignature, String annotatedSignature,", "-\t\t\t// assemble full annotatedSignature:", "-\t\t\tswitch (updatePosition) {", "-\t\t\t\tcase POSITION_FULL_SIGNATURE:", "-\t\t\t\t\tbreak;", "-\t\t\t\tcase POSITION_RETURN_TYPE:", "-\t\t\t\t\tannotatedSignature = updateMethodReturnType(annotatedSignature, originalSignature, mergeStrategy);", "-\t\t\t\t\tbreak;", "-\t\t\t\tdefault:", "-\t\t\t\t\tannotatedSignature = updateParameterType(annotatedSignature, updatePosition, originalSignature, mergeStrategy);", "-\t\t\t}", "+\t\t\t// assemble full annotatedSignature (don't bother merging since no previous signature exists):", "+\t\t\tannotatedSignature = updateSignature(originalSignature, annotatedSignature, updatePosition, MergeStrategy.REPLACE_SIGNATURE);", "-\t\t\t\t\t\t\t\t\t\tif (updatePosition == POSITION_FULL_SIGNATURE) {", "-\t\t\t\t\t\t\t\t\t\t\tannotatedSignature = addAnnotationsTo(annotatedSignature, annotationLine.trim(), mergeStrategy);", "-\t\t\t\t\t\t\t\t\t\t} else if (updatePosition == POSITION_RETURN_TYPE) {", "-\t\t\t\t\t\t\t\t\t\t\tannotatedSignature = updateMethodReturnType(annotatedSignature, annotationLine.trim(), mergeStrategy);", "-\t\t\t\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\t\t\t\tannotatedSignature = updateParameterType(annotatedSignature, updatePosition, annotationLine.trim(), mergeStrategy);", "-\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\tannotatedSignature = updateSignature(annotationLine.trim(), annotatedSignature, updatePosition, mergeStrategy);", "-\t\t\t\tif (updatePosition == POSITION_FULL_SIGNATURE) {", "-\t\t\t\t\t// annotatedSignature is already complete", "-\t\t\t\t} else if (updatePosition == POSITION_RETURN_TYPE) {", "-\t\t\t\t\tannotatedSignature = updateMethodReturnType(annotatedSignature, originalSignature, mergeStrategy);", "-\t\t\t\t} else {", "-\t\t\t\t\tannotatedSignature = updateParameterType(annotatedSignature, updatePosition, originalSignature, mergeStrategy);", "-\t\t\t\t}", "+\t\t\t\tannotatedSignature = updateSignature(originalSignature, annotatedSignature, updatePosition, mergeStrategy);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cbb9c7e9810830e9b90da8747fe3a7ed", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/util/ExternalAnnotationUtil.java", "commitBeforeChange": "34f724a9738d7636a75842e2910c694725115548", "commitAfterChange": "9b49fc6edec0d13e82a14df97219e6ae294f74cc", "methodNumberBeforeChange": 11, "methodNumberAfterChange": 9, "signatureBeforeChange": "  \tprivate static String updateParameterType(String newParameterType, int paramIdx, String oldSignature, MergeStrategy mergeStrategy)", "signatureAfterChange": "  \tprivate static String updateSignature(String originalSignature, String annotatedSignature, int updatePosition, MergeStrategy mergeStrategy)", "diff": ["+", "+\tprivate static String updateSignature(String originalSignature, String annotatedSignature, int updatePosition, MergeStrategy mergeStrategy) {", "+\t\tStringBuffer buf = new StringBuffer();", "+\t\tString signatureToReplace;", "+\t\tString postfix = null;", "+\t\tswitch (updatePosition) {", "+\t\t\tcase POSITION_FULL_SIGNATURE:", "+\t\t\t\tsignatureToReplace = originalSignature;", "+\t\t\t\tbreak;", "+\t\t\tcase POSITION_RETURN_TYPE:", "+\t\t\t\tassert originalSignature.charAt(0) == '(' : \"signature must start with '('\"; //$NON-NLS-1$", "+\t\t\t\tint close = originalSignature.indexOf(')');", "+\t\t\t\tbuf.append(originalSignature, 0, close+1);", "+\t\t\t\tsignatureToReplace = originalSignature.substring(close+1);", "+\t\t\t\tbreak;", "+\t\t\tdefault: // parameter", "+\t\t\t\tSignatureWrapper wrapper = new SignatureWrapper(originalSignature.toCharArray(), true, true); // may already contain annotations", "+\t\t\t\twrapper.start = 1;", "+\t\t\t\tfor (int i = 0; i < updatePosition; i++)", "+\t\t\t\t\twrapper.start = wrapper.computeEnd() + 1;", "+\t\t\t\tint start = wrapper.start;", "+\t\t\t\tint end = wrapper.computeEnd();", "+\t\t\t\tend = wrapper.skipAngleContents(end);", "+\t\t\t\tbuf.append(originalSignature, 0, start);", "+\t\t\t\tsignatureToReplace = originalSignature.substring(start, end+1);", "+\t\t\t\tpostfix = originalSignature.substring(end+1, originalSignature.length());", "+\t\t}", "+\t\tupdateType(buf, signatureToReplace.toCharArray(), annotatedSignature.toCharArray(), mergeStrategy);", "+\t\tif (postfix != null)", "+\t\t\tbuf.append(postfix);", "+\t\treturn buf.toString();", "-", "-\tprivate static String updateParameterType(String newParameterType, int paramIdx, String oldSignature, MergeStrategy mergeStrategy) {", "-\t\tStringBuffer buf = new StringBuffer();", "-", "-\t\tSignatureWrapper wrapper = new SignatureWrapper(oldSignature.toCharArray(), true, true); // may already contain annotations", "-\t\twrapper.start = 1;", "-\t\tfor (int i = 0; i < paramIdx; i++)", "-\t\t\twrapper.start = wrapper.computeEnd() + 1;", "-\t\tint start = wrapper.start;", "-\t\tint end = wrapper.computeEnd();", "-\t\tend = wrapper.skipAngleContents(end);", "-\t\tbuf.append(oldSignature, 0, start);", "-\t\tupdateType(buf, oldSignature.substring(start, end+1).toCharArray(), newParameterType.toCharArray(), mergeStrategy);", "-\t\tbuf.append(oldSignature, end+1, oldSignature.length());", "-\t\treturn buf.toString();", "-\t}"]}], "num": 24178}