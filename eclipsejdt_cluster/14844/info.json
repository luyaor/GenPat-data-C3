{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "30bfa9c8c6c2ad1376cbcc1977d58ac3", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0a8f0c1053adfb2f871d0742a114e816", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/APTDispatchRunnable.java", "commitBeforeChange": "372799d5bd955eabbf1069fe0bbf8aba8ea8af85", "commitAfterChange": "baf433f0226e8b9036b18a28d560e5a42cb8b949", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 5, "signatureBeforeChange": " \t \tpublic void run(IProgressMonitor monitor)", "signatureAfterChange": " \t \tpublic void run(IProgressMonitor monitor)", "diff": ["-\tpublic void run(IProgressMonitor monitor) ", "-\t{", "-\t\tassert( _file == null || _compilationUnit == null ) : \"Either _file should be null or _compilationUnit should be null.\"; //$NON-NLS-1$\t", "+\t", "+\tpublic void run(IProgressMonitor monitor) ", "+\t{\t", "-\t\tif ( _factories == null || _factories.size() == 0 || ", "-\t\t\t\t( _compilationUnit != null && ! ScannerUtil.hasAnnotationInstance( _compilationUnit ) ) ||", "-\t\t\t\t( _file!= null && !  ScannerUtil.hasAnnotationInstance( _file ) ) )", "+\t\tif ( !shouldProcess() )", "+", "+\t\t\tSet<IFile> allDeletedFiles = new HashSet<IFile>();", "+\t\t\tif( !_isFullBuild ){", "+\t\t\t\tfor( int i=0, len = _originalFiles.length; i<len; i++ ){", "+\t\t\t\t\tIFile f = _originalFiles[i];", "+\t\t\t\t\tfinal Set<IFile> deletedFiles = ", "+\t\t\t\t\t\tcleanupAllGeneratedFilesForParent( f, _compilationUnit );", "+\t\t\t\t\tif( deletedFiles != null )", "+\t\t\t\t\t\tallDeletedFiles.addAll(deletedFiles);", "+\t\t\t\t}", "+\t\t\t}", "-\t\t\t", "-\t\t\tIFile f;", "-\t\t\tif ( _file != null )", "-\t\t\t\tf = _file;", "-\t\t\telse", "-\t\t\t\tf = (IFile)_compilationUnit.getResource();", "-\t\t\t", "-\t\t\tSet<IFile> deletedFiles = cleanupAllGeneratedFilesForParent( f, _compilationUnit );", "-\t\t\t", "-\t\t\tif ( deletedFiles.size() == 0 )", "+\t\t\tif ( allDeletedFiles.size() == 0 )", "-\t\t\t\t\t\t\t\t\t\t deletedFiles, ", "-\t\t\t\t\t\t\t\t\t\t Collections.<String>emptySet(),", "+\t\t\t\t\t\t\t\t\t\t allDeletedFiles, ", "+\t\t\t\t\t\t\t\t\t\t Collections.<IFile, Set<String>>emptyMap(),", "-\t\t\t\t\t.newProcessorEnvironmentForBuild( _file, _javaProject);", "+\t\t\t\t\t.newProcessorEnvironmentForBuild( _filesToProcess, _javaProject);", "+\t\t}", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "61301da32534750e9a9a5b121698312b", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/APTDispatchRunnable.java", "commitBeforeChange": "2894ba75386697d7bf484434d073fb6ffaf6cec9", "commitAfterChange": "c5ef0e6fd93c55fc5204e498f5b58ab9f95c6ab7", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": " \t \tpublic void run(IProgressMonitor monitor)", "signatureAfterChange": "\t \t \tpublic void run(IProgressMonitor monitor)", "diff": ["+\tpublic void run(IProgressMonitor monitor) ", "+\t{\t", "+\t\tbuild();", "-\tpublic void run(IProgressMonitor monitor) ", "-\t{\t", "-\t\tif ( !shouldProcess() )", "-", "-\t\t\tSet<IFile> allDeletedFiles = new HashSet<IFile>();", "-\t\t\tif( !_isFullBuild ){", "-\t\t\t\tfor( int i=0, len = _allFilesRequireProcessing.length; i<len; i++ ){", "-\t\t\t\t\tIFile f = _allFilesRequireProcessing[i];", "-\t\t\t\t\tfinal Set<IFile> deletedFiles = ", "-\t\t\t\t\t\tcleanupAllGeneratedFilesForParent( f, _compilationUnit, null );", "-\t\t\t\t\tif( deletedFiles != null )", "-\t\t\t\t\t\tallDeletedFiles.addAll(deletedFiles);", "-\t\t\t\t}", "-\t\t\t\tfor( int i=0, len=_remainingFiles.length; i<len; i++ ){", "-\t\t\t\t\tIFile f = _remainingFiles[i];", "-\t\t\t\t\tfinal Set<IFile> deletedFiles = ", "-\t\t\t\t\t\tcleanupAllGeneratedFilesForParent( f, _compilationUnit, null );", "-\t\t\t\t\tif( deletedFiles != null )", "-\t\t\t\t\t\tallDeletedFiles.addAll(deletedFiles);", "-\t\t\t\t}", "-\t\t\t}", "-\t\t\t", "-\t\t\tif ( allDeletedFiles.size() == 0 )", "-\t\t\t\t_result =  EMPTY_APT_RESULT;", "-\t\t\telse", "-\t\t\t\t_result = new APTResult( Collections.<IFile>emptySet(), ", "-\t\t\t\t\t\t\t\t\t\t allDeletedFiles,", "-\t\t\t\t\t\t\t\t\t\t Collections.<AnnotationProcessorFactory>emptySet(),", "-\t\t\t\t\t\t\t\t\t\t Collections.<IFile, Set<String>>emptyMap(),", "-\t\t\t\t\t\t\t\t\t\t Collections.<IFile, List<IProblem>>emptyMap(), ", "-\t\t\t\t\t\t\t\t\t\t false );", "-\t\t\tProcessorEnvImpl processorEnv;", "-\t\t\t", "-\t\t\tif ( _compilationUnit != null )", "-\t\t\t{", "-\t\t\t\tprocessorEnv = ProcessorEnvImpl", "-\t\t\t\t\t.newReconcileEnv(_compilationUnit, _aptProject.getJavaProject());", "-\t\t\t}", "-\t\t\telse", "-\t\t\t{", "-\t\t\t\tprocessorEnv = ProcessorEnvImpl", "-\t\t\t\t\t.newBuildEnv( _allFilesRequireProcessing, _remainingFiles, _aptProject.getJavaProject());", "-\t\t\t}\t\t\t", "-\t\t\t_result = runAPT(_factories, processorEnv);"]}], "num": 14844}