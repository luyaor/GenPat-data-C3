{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "af78d24f6f986be9004e42250899783f", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3307b41b0c6071c75f2c9bf44186de89", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/LookupEnvironment.java", "commitBeforeChange": "83b2f6a03c3dc62e9f0da4478de073882f53022b", "commitAfterChange": "3b7e9a0f1d7c1bcba3808ca366020fd264fda3dd", "methodNumberBeforeChange": 49, "methodNumberAfterChange": 49, "signatureBeforeChange": " TypeBinding getTypeFromSignature(char[] signature, int start, int end, boolean isParameterized, TypeBinding enclosingType,  \t\tchar[][][] missingTypeNames, TypeAnnotationWalker walker)", "signatureAfterChange": " TypeBinding getTypeFromSignature(char[] signature, int start, int end, boolean isParameterized, TypeBinding enclosingType,  \t\tchar[][][] missingTypeNames, TypeAnnotationWalker walker)", "diff": ["-\tlong[] annotationTagBitsOnDimensions = null;", "+\tAnnotationBinding [][] annotationsOnDimensions = null;", "-\t\tannotationTagBitsOnDimensions = getAnnotationTagBitsOnDimensions(dimension, walker);", "+\t\tfor (int i = 0; i < dimension; i++) {", "+\t\t\tAnnotationBinding [] annotations = BinaryTypeBinding.createAnnotations(walker.getAnnotationsAtCursor(), this, missingTypeNames);", "+\t\t\tif (annotations != Binding.NO_ANNOTATIONS) { ", "+\t\t\t\tif (annotationsOnDimensions == null)", "+\t\t\t\t\tannotationsOnDimensions = new AnnotationBinding[dimension][];", "+\t\t\t\t\tannotationsOnDimensions[i] = annotations;", "+\t\t\t}", "+\t\t\twalker = walker.toNextArrayDimension();", "+\t\t}", "-", "+\t", "-\t\tReferenceBinding refType = getTypeFromConstantPoolName(signature, start + 1, end, isParameterized, missingTypeNames); // skip leading 'L' or 'T'", "-\t\tint depth = refType.depth();", "-\t\twhile (depth > 0 && walker != TypeAnnotationWalker.EMPTY_ANNOTATION_WALKER) {", "-\t\t\twalker = walker.toNextNestedType();", "-\t\t\tdepth--;", "-\t\t}", "-\t\tlong tagBits = typeAnnotationsToTagBits(walker.getAnnotationsAtCursor());", "-\t\tif (tagBits != 0 && annotationTagBitsOnDimensions == null) {", "-\t\t\tbinding = createAnnotatedType(refType, tagBits);", "-\t\t} else {", "-\t\t\tif (annotationTagBitsOnDimensions != null)", "-\t\t\t\tannotationTagBitsOnDimensions[dimension] = tagBits; // insert leaf type into array", "-\t\t\tbinding = refType;", "-\t\t}", "+\t\tbinding = getTypeFromConstantPoolName(signature, start + 1, end, isParameterized, missingTypeNames); // skip leading 'L' or 'T'", "-", "-\tif (dimension == 0)", "-\t\treturn binding;", "-\tif (annotationTagBitsOnDimensions != null)", "-\t\treturn createArrayType(binding, dimension, annotationTagBitsOnDimensions);", "-\treturn createArrayType(binding, dimension);", "-}", "+\t", "+\tint depth = binding.depth();", "+\twhile (depth > 0 && walker != TypeAnnotationWalker.EMPTY_ANNOTATION_WALKER) { // we are dropping annotations on enclosing types.", "+\t\twalker = walker.toNextNestedType();", "+\t\tdepth--;", "+\tAnnotationBinding [][] annotations = new AnnotationBinding[depth + 1][];", "+\tannotations[depth] = BinaryTypeBinding.createAnnotations(walker.getAnnotationsAtCursor(), this, missingTypeNames);", "+\t", "+\tif (annotations[depth] != null && annotations[depth] != Binding.NO_ANNOTATIONS)", "+\t\tbinding = createAnnotatedType(binding, annotations);", "+\t", "+\tif (dimension != 0)", "+\t\tbinding =  this.typeSystem.getArrayType(binding, dimension, AnnotatableTypeSystem.flattenedAnnotations(annotationsOnDimensions));", "+\t", "+\treturn binding;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6bf1f8cac46edb87c92eb9ef4370e509", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/LookupEnvironment.java", "commitBeforeChange": "7ba9ff29fe6b05ec0a2f58eaa1f5d3e68bb11101", "commitAfterChange": "427a01e331e57852efc472cca3a8360bd121fda9", "methodNumberBeforeChange": 46, "methodNumberAfterChange": 47, "signatureBeforeChange": " TypeBinding getTypeFromSignature(char[] signature, int start, int end, boolean isParameterized, TypeBinding enclosingType, char[][][] missingTypeNames)", "signatureAfterChange": " TypeBinding getTypeFromSignature(char[] signature, int start, int end, boolean isParameterized, TypeBinding enclosingType,  \t\tchar[][][] missingTypeNames, TypeAnnotationWalker walker)", "diff": ["-TypeBinding getTypeFromSignature(char[] signature, int start, int end, boolean isParameterized, TypeBinding enclosingType, char[][][] missingTypeNames) {", "+TypeBinding getTypeFromSignature(char[] signature, int start, int end, boolean isParameterized, TypeBinding enclosingType, ", "+\t\tchar[][][] missingTypeNames, TypeAnnotationWalker walker)", "+{", "+\t// null annotations on dimensions?", "+\tlong[] annotationTagBitsOnDimensions = null;", "+\tif (dimension > 0 && walker != TypeAnnotationWalker.EMPTY_ANNOTATION_WALKER) {", "+\t\tTypeAnnotationWalker dimensionsWalker = null;", "+\t\tfor (int i = 0; i < dimension; i++) {", "+\t\t\tif (dimensionsWalker == null)", "+\t\t\t\tdimensionsWalker = walker; // outermost dimension == main type", "+\t\t\telse", "+\t\t\t\tdimensionsWalker = dimensionsWalker.toNextArrayDimension();", "+\t\t\tlong tagBits = typeAnnotationsToTagBits(dimensionsWalker.getAnnotationsAtCursor());", "+\t\t\tif (tagBits != 0L) {", "+\t\t\t\tif (annotationTagBitsOnDimensions == null)", "+\t\t\t\t\tannotationTagBitsOnDimensions = new long[dimension+1]; // leave room for leaf type", "+\t\t\t\tannotationTagBitsOnDimensions[i] = tagBits; ", "+\t\t\t}", "+\t\t}", "+\t}", "+", "-\t\tbinding = getTypeFromConstantPoolName(signature, start + 1, end, isParameterized, missingTypeNames); // skip leading 'L' or 'T'", "+\t\tReferenceBinding refType = getTypeFromConstantPoolName(signature, start + 1, end, isParameterized, missingTypeNames); // skip leading 'L' or 'T'", "+\t\tint depth = refType.depth();", "+\t\twhile (depth > 0 && walker != TypeAnnotationWalker.EMPTY_ANNOTATION_WALKER) {", "+\t\t\twalker = walker.toNextNestedType();", "+\t\t\tdepth--;", "+\t\t}", "+\t\tlong tagBits = typeAnnotationsToTagBits(walker.getAnnotationsAtCursor());", "+\t\tif (tagBits != 0 && annotationTagBitsOnDimensions == null) {", "+\t\t\tif (refType instanceof UnresolvedReferenceBinding) {", "+\t\t\t\t// clone so we don't interfere with future lookups:", "+\t\t\t\tbinding = new UnresolvedReferenceBinding(refType, tagBits);", "+\t\t\t} else {", "+\t\t\t\tbinding = createAnnotatedType(refType, tagBits);", "+\t\t\t}", "+\t\t} else {", "+\t\t\tif (annotationTagBitsOnDimensions != null)", "+\t\t\t\tannotationTagBitsOnDimensions[dimension] = tagBits; // insert leaf type into array", "+\t\t\tbinding = refType;", "+\t\t}", "+\tif (annotationTagBitsOnDimensions != null)", "+\t\treturn createArrayType(binding, dimension, annotationTagBitsOnDimensions);"]}], "num": 38738}