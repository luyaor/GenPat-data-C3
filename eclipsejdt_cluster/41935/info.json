{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "198936941d5ff8f94056752b4b81bedf", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0db887d2076001ff0399b3e509fcdad9", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/generatedfile/GeneratedFileManager.java", "commitBeforeChange": "4aad3541005b227c1c4489d6142b68e14885b9dc", "commitAfterChange": "c69c700b22ba98a95d56e16f7365ecaf28392cdd", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 21, "signatureBeforeChange": " \tprivate synchronized void addBuiltFileToMaps(IFile parentFile, IFile generatedFile, boolean isSource)", "signatureAfterChange": " \tprivate synchronized void addBuiltFileToMaps(Collection<IFile> parentFiles, IFile generatedFile, boolean isSource)", "diff": ["-\tprivate synchronized void addBuiltFileToMaps(IFile parentFile, IFile generatedFile, boolean isSource)", "+\tprivate synchronized void addBuiltFileToMaps(Collection<IFile> parentFiles, IFile generatedFile, boolean isSource)", "-\t\tboolean added = _buildDeps.put(parentFile, generatedFile, isSource);", "-\t\tif (AptPlugin.DEBUG_GFM_MAPS) {", "-\t\t\tif (added)", "-\t\t\t\tAptPlugin.trace(\"build file dependency added: \" + parentFile + \" -> \" + generatedFile); //$NON-NLS-1$//$NON-NLS-2$", "-\t\t\telse", "-\t\t\t\tAptPlugin.trace(\"build file dependency already exists: \" + parentFile + \" -> \" + generatedFile); //$NON-NLS-1$//$NON-NLS-2$", "+\t\t// during a batch build, parentFile will be null.", "+\t\t// Only keep track of ownership in iterative builds", "+\t\tfor (IFile parentFile : parentFiles) {", "+\t\t\tif (parentFile != null) {", "+\t\t\t\tboolean added = _buildDeps.put(parentFile, generatedFile, isSource);", "+\t\t\t\tif (AptPlugin.DEBUG_GFM_MAPS) {", "+\t\t\t\t\tif (added)", "+\t\t\t\t\t\tAptPlugin.trace(\"build file dependency added: \" + parentFile + \" -> \" + generatedFile); //$NON-NLS-1$//$NON-NLS-2$", "+\t\t\t\t\telse", "+\t\t\t\t\t\tAptPlugin.trace(\"build file dependency already exists: \" + parentFile + \" -> \" + generatedFile); //$NON-NLS-1$//$NON-NLS-2$", "+\t\t\t\t}", "+\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "30505a942a8ce84a299a8db8e66dcc8a", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/generatedfile/GeneratedFileManager.java", "commitBeforeChange": "8e2ef31cf8fd6f75aa20407e8ef5b91a95949af6", "commitAfterChange": "7b76bd109981132b10232dab12b61206fb5d8435", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 27, "signatureBeforeChange": " \tprivate synchronized Set<IFile> calculateDeletedFiles( \t\t\tIFile parentFile, Set<IFile> newlyGeneratedFiles)", "signatureAfterChange": " \tprivate synchronized Set<IFile> computeObsoleteFiles( \t\t\tIFile parentFile, Set<IFile> newlyGeneratedFiles)", "diff": ["-\t */", "-\tprivate synchronized Set<IFile> calculateDeletedFiles(", "-\t\t\tIFile parentFile, Set<IFile> newlyGeneratedFiles)", "-\t{", "-\t\tSet<IFile> deleted = new HashSet<IFile>();", "-\t\tSet<IFile> obsoleteFiles = _parentToGenFiles.getValues(parentFile);", "-\t\t// spare all the newly generated files", "-\t\tobsoleteFiles.removeAll(newlyGeneratedFiles);", "-\t\tfor (IFile generatedFile : obsoleteFiles) {", "-\t\t\t_parentToGenFiles.remove(parentFile, generatedFile);", "-\t\t\tif (AptPlugin.DEBUG_GFM_MAPS) AptPlugin.trace(", "-\t\t\t\t\t\"removed build file dependency: \" + parentFile + \" -> \" + generatedFile); //$NON-NLS-1$ //$NON-NLS-2$", "-\t\t\t// If the file is still parented by any other parent, spare it", "-\t\t\tif (!_parentToGenFiles.containsValue(generatedFile)) {", "-\t\t\t\tdeleted.add(generatedFile);", "-\t\t\t}", "-\t\t}", "-\t\tassert checkIntegrity();", "-\t\treturn deleted;", "-\t}", "+\t */", "+\tprivate synchronized Set<IFile> computeObsoleteFiles(", "+\t\t\tIFile parentFile, Set<IFile> newlyGeneratedFiles)", "+\t{", "+\t\tSet<IFile> deleted = new HashSet<IFile>();", "+\t\tSet<IFile> obsoleteFiles = _buildDeps.getValues(parentFile);", "+\t\t// spare all the newly generated files", "+\t\tobsoleteFiles.removeAll(newlyGeneratedFiles);", "+\t\tfor (IFile generatedFile : obsoleteFiles) {", "+\t\t\t_buildDeps.remove(parentFile, generatedFile);", "+\t\t\tif (AptPlugin.DEBUG_GFM_MAPS) AptPlugin.trace(", "+\t\t\t\t\t\"removed build file dependency: \" + parentFile + \" -> \" + generatedFile); //$NON-NLS-1$ //$NON-NLS-2$", "+\t\t\t// If the file is still parented by any other parent, spare it", "+\t\t\tif (!_buildDeps.containsValue(generatedFile)) {", "+\t\t\t\tdeleted.add(generatedFile);", "+\t\t\t}", "+\t\t}", "+\t\tassert checkIntegrity();", "+\t\treturn deleted;", "+\t}"]}], "num": 41935}