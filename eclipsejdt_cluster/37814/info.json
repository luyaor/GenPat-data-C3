{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a123ca52314572e812fc158a59fc20a5", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "501b53a60c073e393b0797c49e0051b5", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/codegen/ConstantPool.java", "commitBeforeChange": "2490dbbf3f6248e62011980e082db7d3a33dea52", "commitAfterChange": "6bc8155ada22ba817bf75f276d6fc8be0384eaaf", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 15, "signatureBeforeChange": " private int putInNameAndTypeCacheIfAbsent(final char[] key1, final char[] key2, int value)", "signatureAfterChange": " private int putInNameAndTypeCacheIfAbsent(final char[] key1, final char[] key2, int value)", "diff": ["+ */", "-\tCharArrayCache key1Value = (CharArrayCache) this.nameAndTypeCacheForFieldsAndMethods.get(key1);", "+\tObject key1Value = this.nameAndTypeCacheForFieldsAndMethods.get(key1);", "-\t\tCharArrayCache charArrayCache = new CharArrayCache();", "-\t\tindex = charArrayCache.putIfAbsent(key2, value);", "-\t\tthis.nameAndTypeCacheForFieldsAndMethods.put(key1, charArrayCache);", "+\t\tCachedIndexEntry cachedIndexEntry = new CachedIndexEntry(key2, value);", "+\t\tindex = -value;", "+\t\tthis.nameAndTypeCacheForFieldsAndMethods.put(key1, cachedIndexEntry);", "+\t} else if (key1Value instanceof CachedIndexEntry) {", "+\t\t// adding a second entry", "+\t\tCachedIndexEntry entry = (CachedIndexEntry) key1Value;", "+\t\tif (CharOperation.equals(key2, entry.signature)) {", "+\t\t\tindex = entry.index;", "+\t\t} else {", "+\t\t\tCharArrayCache charArrayCache = new CharArrayCache();", "+\t\t\tcharArrayCache.putIfAbsent(entry.signature, entry.index);", "+\t\t\tindex = charArrayCache.putIfAbsent(key2, value);", "+\t\t\tthis.nameAndTypeCacheForFieldsAndMethods.put(key1, charArrayCache);\t\t\t", "+\t\t}", "-\t\tindex = key1Value.putIfAbsent(key2, value);", "+\t\tCharArrayCache charArrayCache = (CharArrayCache) key1Value;", "+\t\tindex = charArrayCache.putIfAbsent(key2, value);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "86515b6e923249cab774fc9155ff7a3e", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/dom/org/eclipse/jdt/core/dom/ASTConverter.java", "commitBeforeChange": "1534c3fb9312be746c807d9f0aa370d7a2598284", "commitAfterChange": "f9b5a54e0afa9af686e707bcc0c484de0728c860", "methodNumberBeforeChange": 77, "methodNumberAfterChange": 77, "signatureBeforeChange": "  \tpublic Expression convert(org.eclipse.jdt.internal.compiler.ast.ReferenceExpression reference)", "signatureAfterChange": "  \tpublic Expression convert(org.eclipse.jdt.internal.compiler.ast.ReferenceExpression reference)", "diff": ["-\t\tif (name.getStartPosition() < start) {// check for new ", "+\t\tif (name.getStartPosition() == -1 && name.getIdentifier().equals(\"<init>\")) { // check for \"new\"  //$NON-NLS-1$", "-\t\t\tif (!name.getIdentifier().equals(\"<init>\")) { //$NON-NLS-1$", "-\t\t\t\tNullLiteral nullLiteral = new NullLiteral(this.ast);", "-\t\t\t\tnullLiteral.setFlags(nullLiteral.getFlags() | ASTNode.MALFORMED);", "-\t\t\t\tresult = nullLiteral;", "-\t\t\t} else {", "-\t\t\t\tCreationReference creationReference = new CreationReference(this.ast);", "-\t\t\t\tcreationReference.setExpression(convert(lhs));", "-\t\t\t\ttypeArguments = creationReference.typeArguments();", "-\t\t\t\tresult = creationReference;", "+\t\t\tType type = null;", "+\t\t\tif (lhs instanceof TypeReference) {", "+\t\t\t\ttype = convertType((TypeReference) lhs);", "+\t\t\t} else if (lhs instanceof NameReference) {", "+\t\t\t\tName typeName = convert((NameReference) lhs);", "+\t\t\t\tSimpleType simpleType = new SimpleType(this.ast);", "+\t\t\t\tsimpleType.setName(typeName);", "+\t\t\t\tif (this.resolveBindings) {", "+\t\t\t\t\trecordNodes(simpleType, lhs);", "+\t\t\t\t}", "+\t\t\t\tsimpleType.setSourceRange(lhs.sourceStart, lhs.sourceEnd - lhs.sourceStart + 1);", "+\t\t\t\ttype = simpleType;", "+\t\t\tCreationReference creationReference = new CreationReference(this.ast);", "+\t\t\tcreationReference.setType(type);", "+\t\t\ttypeArguments = creationReference.typeArguments();", "+\t\t\tresult = creationReference;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ece7c043cf6ea542afb3d2a450f40989", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/codegen/ConstantPool.java", "commitBeforeChange": "2490dbbf3f6248e62011980e082db7d3a33dea52", "commitAfterChange": "6bc8155ada22ba817bf75f276d6fc8be0384eaaf", "methodNumberBeforeChange": 16, "methodNumberAfterChange": 16, "signatureBeforeChange": " private int putInCacheIfAbsent(final char[] key1, final char[] key2, final char[] key3, int value)", "signatureAfterChange": " private int putInCacheIfAbsent(final char[] key1, final char[] key2, final char[] key3, int value)", "diff": ["-\t\tCharArrayCache charArrayCache = new CharArrayCache();", "-\t\tindex = charArrayCache.putIfAbsent(key3, value);", "-\t\tkey1Value.put(key2, charArrayCache);", "+\t\tCachedIndexEntry cachedIndexEntry = new CachedIndexEntry(key3, value);", "+\t\tindex = -value;", "+\t\tkey1Value.put(key2, cachedIndexEntry);", "-\t\tCharArrayCache charArrayCache = (CharArrayCache) key1Value.get(key2);", "-\t\tif (charArrayCache == null) {", "-\t\t\tcharArrayCache = new CharArrayCache();", "-\t\t\tindex = charArrayCache.putIfAbsent(key3, value);", "-\t\t\tkey1Value.put(key2, charArrayCache);", "+\t\tObject key2Value = key1Value.get(key2);", "+\t\tif (key2Value == null) {", "+\t\t\tCachedIndexEntry cachedIndexEntry = new CachedIndexEntry(key3, value);", "+\t\t\tindex = -value;", "+\t\t\tkey1Value.put(key2, cachedIndexEntry);", "+\t\t} else if (key2Value instanceof CachedIndexEntry) {", "+\t\t\t// adding a second entry", "+\t\t\tCachedIndexEntry entry = (CachedIndexEntry) key2Value;", "+\t\t\tif (CharOperation.equals(key3, entry.signature)) {", "+\t\t\t\tindex = entry.index;", "+\t\t\t} else {", "+\t\t\t\tCharArrayCache charArrayCache = new CharArrayCache();", "+\t\t\t\tcharArrayCache.putIfAbsent(entry.signature, entry.index);", "+\t\t\t\tindex = charArrayCache.putIfAbsent(key3, value);\t\t\t\t", "+\t\t\t\tkey1Value.put(key2, charArrayCache);", "+\t\t\t}", "+\t\t\tCharArrayCache charArrayCache = (CharArrayCache) key2Value;"]}], "num": 37814}