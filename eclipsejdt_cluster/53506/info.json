{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "93ee3269c81d95e6ca060ccc1ce43842", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "54339ef753168597bf3a7bab4b68a7b6", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/JavaCore.java", "commitBeforeChange": "f51d6f5a0e9a386694d73d0c3aec5b18e2ce1002", "commitAfterChange": "4ec516fd83ba9f8d854c904c0afabe8bb5fc0412", "methodNumberBeforeChange": 51, "methodNumberAfterChange": 51, "signatureBeforeChange": " \tpublic static void setClasspathContainer(IPath containerPath, final IJavaProject[] affectedProjects, IClasspathContainer[] respectiveContainers, IProgressMonitor monitor) throws JavaModelException", "signatureAfterChange": " \tpublic static void setClasspathContainer(IPath containerPath, final IJavaProject[] affectedProjects, IClasspathContainer[] respectiveContainers, IProgressMonitor monitor) throws JavaModelException", "diff": ["-\t", "+\t\t//TODO: need support for avoiding reentering calls (through getResolvedClasspath", "+", "-\t", "+\t\t\t", "-\t\t\tMap perProjectContainers = (Map)JavaModelManager.Containers.get(affectedProject);", "-\t\t\tif (perProjectContainers == null){", "-\t\t\t\tperProjectContainers = new HashMap();", "-\t\t\t\tJavaModelManager.Containers.put(affectedProject, perProjectContainers);", "-\t\t\t} else {", "-\t\t\t\tIClasspathContainer oldContainer = (IClasspathContainer) perProjectContainers.get(containerPath);", "-\t\t\t\tif (oldContainer != null && oldContainer.equals(respectiveContainers[i])){", "-\t\t\t\t\taffectedProjects[i] = null; // filter out this project - container did not change", "-\t\t\t\t\tcontinue;", "+\t\t\tIClasspathContainer oldContainer = JavaModelManager.containerGet(affectedProject, containerPath);", "+\t\t\tif (oldContainer == JavaModelManager.ContainerInitializationInProgress) {", "+\t\t\t\tMap previousContainerValues = (Map)JavaModelManager.PreviousSessionContainers.get(affectedProject);", "+\t\t\t\tif (previousContainerValues != null){", "+\t\t\t\t\tIClasspathContainer previousContainer = (IClasspathContainer)previousContainerValues.get(containerPath);", "+\t\t\t\t\tif (previousContainer != null) {", "+\t\t\t\t\t\tif (JavaModelManager.CP_RESOLVE_VERBOSE){", "+\t\t\t\t\t\t\tSystem.out.println(\"CPContainer INIT - reentering access to project container: [\"+affectedProject.getElementName()+\"] \" + containerPath + \" during its initialization, will see previous value: \"+ previousContainer); //$NON-NLS-1$ //$NON-NLS-2$", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tJavaModelManager.containerPut(affectedProject, containerPath, previousContainer); ", "+\t\t\t\t\t}", "+\t\t\t\t\toldContainer = previousContainer;", "+\t\t\tif (oldContainer != null && oldContainer.equals(respectiveContainers[i])){// TODO: could improve to only compare entries", "+\t\t\t\taffectedProjects[i] = null; // filter out this project - container did not change", "+\t\t\t\tcontinue;", "+\t\t\t}", "-\t\t\t\tremaining++;", "+\t\t\t\tremaining++; ", "-\t\t\tperProjectContainers.put(containerPath, newContainer);", "+\t\t\tJavaModelManager.containerPut(affectedProject, containerPath, newContainer);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "991021d5703df6581452daf4a4570715", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/JavaCore.java", "commitBeforeChange": "f51d6f5a0e9a386694d73d0c3aec5b18e2ce1002", "commitAfterChange": "4ec516fd83ba9f8d854c904c0afabe8bb5fc0412", "methodNumberBeforeChange": 61, "methodNumberAfterChange": 61, "signatureBeforeChange": " \tprivate static void updateVariableValues( \t\tString[] variableNames, \t\tIPath[] variablePaths, \t\tIProgressMonitor monitor) throws JavaModelException", "signatureAfterChange": " \tprivate static void updateVariableValues( \t\tString[] variableNames, \t\tIPath[] variablePaths, \t\tIProgressMonitor monitor) throws JavaModelException", "diff": ["-\t\t\tIPath oldPath = (IPath)JavaModelManager.variableGet(variableNames[i]);", "-\t\t\tif (oldPath == JavaModelManager.VariableInitializationInProgress) oldPath = null;", "+\t\t\tString variableName = variableNames[i];", "+\t\t\tIPath oldPath = (IPath)JavaModelManager.variableGet(variableName); // if reentering will provide previous session value ", "+\t\t\tif (oldPath == JavaModelManager.VariableInitializationInProgress){", "+\t\t\t\tIPath previousPath = (IPath)JavaModelManager.PreviousSessionVariables.get(variableName);", "+\t\t\t\tif (previousPath != null){", "+\t\t\t\t\tif (JavaModelManager.CP_RESOLVE_VERBOSE){", "+\t\t\t\t\t\tSystem.out.println(\"CPVariable INIT - reentering access to variable: \" + variableName+ \" during its initialization, will see previous value: \"+ previousPath); //$NON-NLS-1$ //$NON-NLS-2$", "+\t\t\t\t\t}", "+\t\t\t\t\tJavaModelManager.variablePut(variableName, previousPath); // replace value so reentering calls are seeing old value", "+\t\t\t\t}", "+\t\t\t\toldPath = previousPath;", "+\t\t\t}", "-\t\t\t\t\t\t\t\taffectedProjects.put(project, ((JavaProject)project).getResolvedClasspath(true));", "+\t\t\t\t\t\t\t\taffectedProjects.put(project, project.getResolvedClasspath(true));", "-\t\t\t\t\t\t\t\taffectedProjects.put(project, ((JavaProject)project).getResolvedClasspath(true));", "+\t\t\t\t\t\t\t\taffectedProjects.put(project, project.getResolvedClasspath(true));", "-\t\t\tIPath path = variablePaths[i];", "-\t\t\tJavaModelManager.variablePut(variableNames[i], path);", "+\t\t\tJavaModelManager.variablePut(variableNames[i], variablePaths[i]);"]}], "num": 53506}