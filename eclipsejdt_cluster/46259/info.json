{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "45f0732e6888f94c33015639c18e28d6", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "665fc23e912146517f767b33a8bd7f6f", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/dom/org/eclipse/jdt/core/dom/VariableBinding.java", "commitBeforeChange": "74edcbc531d51c7b36194b7c17544e9192cb58b1", "commitAfterChange": "b62a1c02d1cac5bc56799a98df58d39d3e512bc5", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 4, "signatureBeforeChange": " \tpublic IJavaElement getJavaElement()", "signatureAfterChange": " \tpublic IJavaElement getJavaElement()", "diff": ["-\t\tint nameStart =  localVar.getStartPosition();", "-\t\tint nameLength = localVar.getLength();", "-\t\tVariableDeclarationStatement statement = (VariableDeclarationStatement) localVar.getParent();", "-\t\tint sourceStart = statement.getStartPosition();", "-\t\tint sourceLength = statement.getLength();", "+\t\tint nameStart;", "+\t\tint nameLength;", "+\t\tint sourceStart;", "+\t\tint sourceLength;", "+\t\tif (localVar instanceof SingleVariableDeclaration) {", "+\t\t\tsourceStart = localVar.getStartPosition();", "+\t\t\tsourceLength = localVar.getLength();", "+\t\t\tSimpleName simpleName = ((SingleVariableDeclaration) localVar).getName();", "+\t\t\tnameStart = simpleName.getStartPosition();", "+\t\t\tnameLength = simpleName.getLength();", "+\t\t} else {", "+\t\t\tnameStart =  localVar.getStartPosition();", "+\t\t\tnameLength = localVar.getLength();", "+\t\t\tVariableDeclarationStatement statement = (VariableDeclarationStatement) localVar.getParent();", "+\t\t\tsourceStart = statement.getStartPosition();", "+\t\t\tsourceLength = statement.getLength();", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c1fab35f01e47b59c56f1307ce87b1d2", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/Openable.java", "commitBeforeChange": "266ddb07da0dd2618bcfbec3256d70ddf353d13c", "commitAfterChange": "0f0f6cf807937b95cd594ad18f819e710f9be563", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " protected void codeComplete(org.eclipse.jdt.internal.compiler.env.ICompilationUnit cu, org.eclipse.jdt.internal.compiler.env.ICompilationUnit unitToSkip, int position, ICompletionRequestor requestor) throws JavaModelException", "signatureAfterChange": " protected void codeComplete(org.eclipse.jdt.internal.compiler.env.ICompilationUnit cu, org.eclipse.jdt.internal.compiler.env.ICompilationUnit unitToSkip, int position, ICompletionRequestor requestor, WorkingCopyOwner owner) throws JavaModelException", "diff": ["- */", "-protected void codeComplete(org.eclipse.jdt.internal.compiler.env.ICompilationUnit cu, org.eclipse.jdt.internal.compiler.env.ICompilationUnit unitToSkip, int position, ICompletionRequestor requestor) throws JavaModelException {", "+protected void codeComplete(org.eclipse.jdt.internal.compiler.env.ICompilationUnit cu, org.eclipse.jdt.internal.compiler.env.ICompilationUnit unitToSkip, int position, ICompletionRequestor requestor, WorkingCopyOwner owner) throws JavaModelException {", "-\tSearchableEnvironment environment = (SearchableEnvironment) project.getSearchableNameEnvironment();", "-\tNameLookup nameLookup = project.getNameLookup();", "-\tenvironment.unitToSkip = unitToSkip;", "-", "-\tCompletionEngine engine = new CompletionEngine(environment, new CompletionRequestorWrapper(requestor,nameLookup), project.getOptions(true), project);", "-\tengine.complete(cu, position, 0);", "-\tenvironment.unitToSkip = null;", "-}", "+\tSearchableEnvironment environment = null;", "+\tNameLookup nameLookup = null;", "+\ttry {", "+\t\t// set unit to skip", "+\t\tenvironment = (SearchableEnvironment) project.getSearchableNameEnvironment();", "+\t\tenvironment.unitToSkip = unitToSkip;", "+\t\t// set the units to look inside", "+\t\tnameLookup = project.getNameLookup();", "+\t\tJavaModelManager manager = JavaModelManager.getJavaModelManager();", "+\t\tICompilationUnit[] workingCopies = manager.getWorkingCopies(owner, true/*add primary WCs*/);", "+\t\tnameLookup.setUnitsToLookInside(workingCopies);", "+", "+\t\t// code complete", "+\t\tCompletionEngine engine = new CompletionEngine(environment, new CompletionRequestorWrapper(requestor,nameLookup), project.getOptions(true), project);", "+\t\tengine.complete(cu, position, 0);", "+\t} finally {", "+\t\tif (environment != null) {", "+\t\t\tenvironment.unitToSkip = null;", "+\t\t}", "+\t\tif (nameLookup != null) {", "+\t\t\tnameLookup.setUnitsToLookInside(null);", "+\t\t}", "+\t}", "+}"]}], "num": 46259}