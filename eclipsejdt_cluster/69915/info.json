{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0af0c5a4cd4dde7853a2e58979df1cc1", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4f2cd6e78280690925b2e05362373975", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/indexing/IndexManager.java", "commitBeforeChange": "9d422f535f1cf1a8b8f8401815db736b124961e4", "commitAfterChange": "13ebf03f7d31f9fda8d23c3fe70da0f01fcad14a", "methodNumberBeforeChange": 21, "methodNumberAfterChange": 23, "signatureBeforeChange": " public void saveIndexes()", "signatureAfterChange": " public void saveIndexes()", "diff": ["-public void saveIndexes(){", "-", "-\tArrayList indexList = new ArrayList();", "-\tsynchronized(this){", "-\t\tfor (Iterator iter = indexes.values().iterator(); iter.hasNext();){", "-\t\t\tindexList.add(iter.next());", "+public void saveIndexes() {", "+\t// only save cached indexes... the rest were not modified", "+\tArrayList toSave = new ArrayList();", "+\tsynchronized(this) {", "+\t\tfor (Iterator iter = this.indexes.values().iterator(); iter.hasNext();) {", "+\t\t\tObject o = iter.next();", "+\t\t\tif (o instanceof IIndex)", "+\t\t\t\ttoSave.add(o);", "-\tfor (Iterator iter = indexList.iterator(); iter.hasNext();){", "-\t\tIIndex index = (IIndex)iter.next();", "-\t\tif (index == null) continue; // index got deleted since acquired", "+\tfor (int i = 0, length = toSave.size(); i < length; i++) {", "+\t\tIIndex index = (IIndex) toSave.get(i);", "-\t\t\tif (IndexManager.VERBOSE){", "-\t\t\t\tif (index.hasChanged()){ ", "-\t\t\t\t\tJobManager.verbose(\"-> merging index \" + index.getIndexFile()); //$NON-NLS-1$", "-\t\t\t\t}", "-\t\t\t}", "-\t\t\t\tindex.save();", "+\t\t\t\tsaveIndex(index);", "-\t\t\t\tif (IndexManager.VERBOSE) {", "+\t\t\t\tif (VERBOSE) {"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "61a814c8e52908a2b4983d36c29bedd7", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/indexing/IndexManager.java", "commitBeforeChange": "2f4f5e86f2e4aaf45121fdec3d6b9c586ffaf25e", "commitAfterChange": "753308c7e77198873182da037131d7e90e799c1c", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": "\r public void saveIndexes()", "signatureAfterChange": "\r public void saveIndexes()", "diff": ["+\t\tIIndex index = (IIndex)indexList.nextElement();\r", "+\t\tif (index == null) continue; // index got deleted since acquired\r", "+\t\tReadWriteMonitor monitor = getMonitorFor(index);\r", "+\t\tif (monitor == null) continue; // index got deleted since acquired\r", "-\t\t\tIIndex index = (IIndex)indexList.nextElement();\r", "-\t\t\tif (index == null) continue; // index got deleted since acquired\r", "-\t\t\tReadWriteMonitor monitor = getMonitorFor(index);\r", "-\t\t\tif (monitor == null) continue; // index got deleted since acquired\r", "-\t\t\ttry {\r", "-\t\t\t\tmonitor.enterWrite();\r", "-\t\t\t\tif (IndexManager.VERBOSE) System.out.println(\"-> merging index : \"+index.getIndexFile()); //$NON-NLS-1$\r", "-\t\t\t\tindex.save();\r", "-\t\t\t} finally {\r", "-\t\t\t\tmonitor.exitWrite();\r", "+\t\t\tmonitor.enterWrite();\r", "+\t\t\tif (IndexManager.VERBOSE){\r", "+\t\t\t\tif (index.hasChanged()){\r", "+\t\t\t\t\tSystem.out.println(\"-> merging index : \"+index.getIndexFile()); //$NON-NLS-1$\r", "+\t\t\t\t}\r", "-\t\t} catch(IOException e){\r", "-\t\t\t// Index file has been deleted\r", "+\t\t\ttry {\r", "+\t\t\t\tindex.save();\r", "+\t\t\t} catch(IOException e){\r", "+\t\t\t\tif (IndexManager.VERBOSE){\r", "+\t\t\t\t\te.printStackTrace();\r", "+\t\t\t\t}\r", "+\t\t\t\torg.eclipse.jdt.internal.core.Util.log(e);\r", "+\t\t\t}\r", "+\t\t} finally {\r", "+\t\t\tmonitor.exitWrite();\r"]}], "num": 69915}