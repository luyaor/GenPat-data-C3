{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "037fc5af1f4d113b6398cc79aa344bb8", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "88eafd98a898c94e960b336212f352c8", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "2b25437c1d081a8e45247264663df433e9d9e360", "commitAfterChange": "b6b8173d4f9c7b0fe8067e052e4660cc0c1fa5df", "methodNumberBeforeChange": 140, "methodNumberAfterChange": 140, "signatureBeforeChange": " \tprivate void findFields( \t\tchar[] fieldName, \t\tFieldBinding[] fields, \t\tScope scope, \t\tObjectVector fieldsFound, \t\tObjectVector localsFound, \t\tboolean onlyStaticFields, \t\tReferenceBinding receiverType, \t\tInvocationSite invocationSite, \t\tScope invocationScope, \t\tboolean implicitCall, \t\tboolean canBePrefixed, \t\tBinding[] missingElements, \t\tint[] missingElementsStarts, \t\tint[] missingElementsEnds, \t\tboolean missingElementsHaveProblems, \t\tchar[] castedReceiver, \t\tint receiverStart, \t\tint receiverEnd)", "signatureAfterChange": " \tprivate void findFields( \t\tchar[] fieldName, \t\tFieldBinding[] fields, \t\tScope scope, \t\tObjectVector fieldsFound, \t\tObjectVector localsFound, \t\tboolean onlyStaticFields, \t\tReferenceBinding receiverType, \t\tInvocationSite invocationSite, \t\tScope invocationScope, \t\tboolean implicitCall, \t\tboolean canBePrefixed, \t\tBinding[] missingElements, \t\tint[] missingElementsStarts, \t\tint[] missingElementsEnds, \t\tboolean missingElementsHaveProblems, \t\tchar[] castedReceiver, \t\tint receiverStart, \t\tint receiverEnd)", "diff": ["-\t\t\tif (fieldDeclaration != null && fieldDeclaration.initialization != null) {", "-\t\t\t\t// We're asking for a proposal inside this field's initialization. So record its id", "-\t\t\t\tfieldBeingCompletedId = field.id;", "-\t\t\t\tbreak;", "+\t\t\t// We maybe asking for a proposal inside this field's initialization. So record its id", "+\t\t\tASTNode astNode = this.parser.assistNode;", "+\t\t\tif (fieldDeclaration != null && fieldDeclaration.initialization != null && astNode != null) {", "+\t\t\t\tif (fieldDeclaration.initialization.sourceEnd > 0) {", "+\t\t\t\t\tif (fieldDeclaration.initialization.sourceStart <= astNode.sourceStart &&", "+\t\t\t\t\t\tastNode.sourceEnd <= fieldDeclaration.initialization.sourceEnd) {", "+\t\t\t\t\t\t// completion is inside a field initializer", "+\t\t\t\t\t\tfieldBeingCompletedId = field.id;", "+\t\t\t\t\t\tbreak;", "+\t\t\t\t\t}", "+\t\t\t\t} else { // The sourceEnd may not yet be set", "+\t\t\t\t\tCompletionNodeDetector detector = new CompletionNodeDetector(astNode, fieldDeclaration.initialization);", "+\t\t\t\t\tif (detector.containsCompletionNode()) {  // completion is inside a field initializer", "+\t\t\t\t\t\tfieldBeingCompletedId = field.id;", "+\t\t\t\t\t\tbreak;", "+\t\t\t\t\t}", "+\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f7d70e30ae3728c8d5b03c35133a5716", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/InternalExtendedCompletionContext.java", "commitBeforeChange": "13de33d27f62a8e18bfa9b4bad7cc8222b56b1f2", "commitAfterChange": "e1cd009aeadbb1638b9152a08db4bfcba963e522", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": "  \tprivate void computeVisibleElementBindings()", "signatureAfterChange": "  \tprivate void computeVisibleElementBindings()", "diff": ["-\t\t\t\t\t\t\tFieldDeclaration fieldDeclaration = fields[i];", "+\t\t\t\t\t\t\tFieldDeclaration fieldDeclaration = fields[i];\t\t\t\t\t\t\t", "-\t\t\t\t\t\t\t\t// completion is inside a field initializer", "-\t\t\t\t\t\t\t\tsearchVisibleVariablesAndMethods(scope, this.visibleLocalVariables, this.visibleFields, this.visibleMethods, notInJavadoc);", "-\t\t\t\t\t\t\t\t// remove this field from visibleFields list because completion is being asked in its", "-\t\t\t\t\t\t\t\t// intialization and so this has not yet been declared successfully.", "-\t\t\t\t\t\t\t\tif (this.visibleFields.size > 0 && this.visibleFields.contains(fieldDeclaration.binding)) {", "-\t\t\t\t\t\t\t\t\tthis.visibleFields.remove(fieldDeclaration.binding);", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tint count = 0;", "-\t\t\t\t\t\t\t\twhile (count < this.visibleFields.size) {", "-\t\t\t\t\t\t\t\t\tFieldBinding visibleField = (FieldBinding)this.visibleFields.elementAt(count);", "-\t\t\t\t\t\t\t\t\tif (visibleField.id > fieldDeclaration.binding.id) {", "-\t\t\t\t\t\t\t\t\t\tthis.visibleFields.remove(visibleField);", "-\t\t\t\t\t\t\t\t\t\tcontinue;", "-\t\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\t\tcount++;", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tbreak done;", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t/*(Incase fieldDeclaration != null is not sufficient to infer that", "-\t\t\t\t\t\t\t  proposal is being asked inside initializer of field decl, use the below if", "-\t\t\t\t\t\t\t  block instead of the above)", "-\t\t\t\t\t\t\tif (fieldDeclaration.initialization != null) {", "-\t\t\t\t\t\t\t ", "+\t\t\t\t\t\t\t\tboolean isInsideInitializer = false;", "-\t\t\t\t\t\t\t\t\t\tsearchVisibleVariablesAndMethods(scope, this.visibleLocalVariables, this.visibleFields, this.visibleMethods, notInJavadoc);", "+\t\t\t\t\t\t\t\t\t\tisInsideInitializer = true;", "-\t\t\t\t\t\t\t\t\t\tsearchVisibleVariablesAndMethods(scope, this.visibleLocalVariables, this.visibleFields, this.visibleMethods, notInJavadoc);", "+\t\t\t\t\t\t\t\t\t\t// completion is inside a field initializer", "+\t\t\t\t\t\t\t\t\t\tisInsideInitializer = true;", "-\t\t\t\t\t\t\t\t// remove this field from visibleFields list because completion is being asked in its", "-\t\t\t\t\t\t\t\t// intialization and so this has not yet been declared successfully.", "-\t\t\t\t\t\t\t\tif (this.visibleFields.size > 0 && this.visibleFields.contains(fieldDeclaration.binding)) {", "-\t\t\t\t\t\t\t\t\tthis.visibleFields.remove(fieldDeclaration.binding);", "+\t\t\t\t\t\t\t\tif (isInsideInitializer) {", "+\t\t\t\t\t\t\t\t\tsearchVisibleVariablesAndMethods(scope, this.visibleLocalVariables, this.visibleFields, this.visibleMethods, notInJavadoc);", "+\t\t\t\t\t\t\t\t\t// remove this field from visibleFields list because completion is being asked in its", "+\t\t\t\t\t\t\t\t\t// intialization and so this has not yet been declared successfully.", "+\t\t\t\t\t\t\t\t\tif (this.visibleFields.size > 0 && this.visibleFields.contains(fieldDeclaration.binding)) {", "+\t\t\t\t\t\t\t\t\t\tthis.visibleFields.remove(fieldDeclaration.binding);", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\tint count = 0;", "+\t\t\t\t\t\t\t\t\twhile (count < this.visibleFields.size) {", "+\t\t\t\t\t\t\t\t\t\tFieldBinding visibleField = (FieldBinding)this.visibleFields.elementAt(count);", "+\t\t\t\t\t\t\t\t\t\tif (visibleField.id > fieldDeclaration.binding.id) {", "+\t\t\t\t\t\t\t\t\t\t\tthis.visibleFields.remove(visibleField);", "+\t\t\t\t\t\t\t\t\t\t\tcontinue;", "+\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\tcount++;", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\tbreak done;", "-\t\t\t\t\t\t\t}*/", "+\t\t\t\t\t\t\t}"]}], "num": 4066}