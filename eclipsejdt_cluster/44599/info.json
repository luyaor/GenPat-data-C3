{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "be1989e8e7ccf7f76263a426bf3d197c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8adfd7c586a5df61a2460707c4aee4f8", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core.tests.performance/src/org/eclipse/jdt/core/tests/performance/FullSourceWorkspaceBuildTests.java", "commitBeforeChange": "f15f3a4daa4f7cbf363475bdb20d4707912f834f", "commitAfterChange": "1e2211eded7d5ae87dfcf507bb00676a5a81d8e9", "methodNumberBeforeChange": 15, "methodNumberAfterChange": 12, "signatureBeforeChange": " \tprivate long[] parseFile(String fileName, int repeat) throws InvalidInputException, IOException", "signatureAfterChange": " \tprivate long[] parseFile(String fileName, int iterations) throws InvalidInputException, IOException", "diff": ["-\tprivate long[] parseFile(String fileName, int repeat) throws InvalidInputException, IOException {", "+\tprivate long[] parseFile(String fileName, int iterations) throws InvalidInputException, IOException {", "-\t\t// warm-up", "+\t\t// Warm-up", "-\t\t// loop for time measuring", "+\t\t// Measures", "+\t\tif (DEBUG) {", "+\t\t\tstart = System.currentTimeMillis();", "+\t\t}", "-\t\tfor (int i = 0; i < REPEAT; i++) {", "-\t\t\tif (DEBUG) {", "-\t\t\t\tstart = System.currentTimeMillis();", "-\t\t\t}", "-\t\t\t// Measure time for parse", "-\t\t\tfor (int j = 0; j < repeat; j++) {", "-\t\t\t\tICompilationUnit unit = new CompilationUnit(content, file.getName(), null);", "-\t\t\t\tCompilationResult unitResult = new CompilationResult(unit, 0, 1, options.maxProblemsPerUnit);\t\t\t\t", "-\t\t\t\tCompilationUnitDeclaration unitDeclaration = parser.dietParse(unit, unitResult);", "-\t\t\t\tparser.getMethodBodies(unitDeclaration);", "-\t\t\t\tparsedCharacters += content.length;", "-\t\t\t\tparsedLines += unitResult.lineSeparatorPositions.length;", "-            }", "-", "-\t\t\t// Warn if measure time is not enough while debugging", "-\t\t\tif (DEBUG) {", "-\t\t\t\tlong time = System.currentTimeMillis() - start;", "-\t\t\t\tif (time < TIME_THRESHOLD) {", "-\t\t            System.err.print(parsedLines + \" lines/\"+ parsedCharacters + \" characters parsed\");", "-\t\t\t\t} else {", "-\t\t            System.out.print(parsedLines + \" lines/\"+ parsedCharacters + \" characters parsed\");", "-\t\t\t\t}", "-\t\t\t}", "+\t\tfor (int i = 0; i < iterations; i++) {", "+\t\t\tICompilationUnit unit = new CompilationUnit(content, file.getName(), null);", "+\t\t\tCompilationResult unitResult = new CompilationResult(unit, 0, 1, options.maxProblemsPerUnit);\t\t\t\t", "+\t\t\tCompilationUnitDeclaration unitDeclaration = parser.dietParse(unit, unitResult);", "+\t\t\tparser.getMethodBodies(unitDeclaration);", "+\t\t\tparsedCharacters += content.length;", "+\t\t\tparsedLines += unitResult.lineSeparatorPositions.length;", "+", "+\t\t// Warn if measure time is not enough while debugging", "+\t\tif (DEBUG) {", "+\t\t\tlong time = System.currentTimeMillis() - start;", "+\t\t\tif (time < TIME_THRESHOLD) {", "+\t            System.err.print(parsedLines + \" lines/\"+ parsedCharacters + \" characters parsed\");", "+\t\t\t} else {", "+\t            System.out.print(parsedLines + \" lines/\"+ parsedCharacters + \" characters parsed\");", "+\t\t\t}", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fd11882cba41f5f635d7ece4ce5af42d", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core.tests.performance/src/org/eclipse/jdt/core/tests/performance/FullSourceWorkspaceBuildTests.java", "commitBeforeChange": "5281f7a1d02f4134760334f239cbffb833f0ed1c", "commitAfterChange": "b8222e0e4564cc4472bb2fdfd410e7de68bbf0fa", "methodNumberBeforeChange": 12, "methodNumberAfterChange": 3, "signatureBeforeChange": " \tprivate long[] parseFile(String fileName, int iterations) throws InvalidInputException, IOException", "signatureAfterChange": " \tprivate long[] parseFile(String fileName, int kind, int iterations) throws InvalidInputException, IOException", "diff": ["+\tprivate long[] parseFile(String fileName, int kind, int iterations) throws InvalidInputException, IOException {", "+\t\t// Test for parser", "+\t\tFile file = new File(fileName);", "+\t\tchar[] content = Util.getFileCharContent(file, null);", "+\t\tCompilerOptions options = new CompilerOptions();", "+\t\toptions.sourceLevel = ClassFileConstants.JDK1_4;", "+\t\toptions.targetJDK = ClassFileConstants.JDK1_4;", "+\t\tProblemReporter problemReporter = ", "+\t\t\t\tnew ProblemReporter(", "+\t\t\t\t\tDefaultErrorHandlingPolicies.exitAfterAllProblems(), ", "+\t\t\t\t\toptions, ", "+\t\t\t\t\tnew DefaultProblemFactory());", "+\t\t// Create parser", "+        Parser parser = null;", "+\t\tswitch (kind) {", "+\t\tcase 1: // SourceElementParser", "+\t\t\t\tparser = new SourceElementParser(new SourceElementRequestorAdapter(), problemReporter.problemFactory, options, true, true);", "+\t\t\t\tbreak;", "+\t\t\tdefault:", "+\t\t\t\tparser = new Parser(problemReporter, true);", "+\t\t\t\tbreak;", "+", "+\t\t// Warm up", "+\t\tfor (int i = 0; i < 2; i++) {", "+\t\t\tICompilationUnit unit = new CompilationUnit(content, file.getName(), null);", "+\t\t\tCompilationResult unitResult = new CompilationResult(unit, 0, 1, options.maxProblemsPerUnit);\t\t\t\t", "+\t\t\tCompilationUnitDeclaration unitDeclaration = parser.dietParse(unit, unitResult);", "+\t\t\tparser.getMethodBodies(unitDeclaration);", "+\t\t}", "+", "+\t\t// Clean memory", "+\t\trunGc();", "+", "+\t\t// Measures", "+\t\tlong parsedLines = 0;", "+\t\tlong parsedCharacters = 0;", "+\t\tlong start = 0;", "+\t\tif (DEBUG) {", "+\t\t\tstart = System.currentTimeMillis();", "+\t\t}", "+\t\tstartMeasuring();", "+\t\tfor (int i = 0; i < iterations; i++) {", "+\t\t\tICompilationUnit unit = new CompilationUnit(content, file.getName(), null);", "+\t\t\tCompilationResult unitResult = new CompilationResult(unit, 0, 1, options.maxProblemsPerUnit);\t\t\t\t", "+\t\t\tCompilationUnitDeclaration unitDeclaration = parser.dietParse(unit, unitResult);", "+\t\t\tparser.getMethodBodies(unitDeclaration);", "+\t\t\tparsedCharacters += content.length;", "+\t\t\tparsedLines += unitResult.lineSeparatorPositions.length;", "+\t\t}", "+\t\tstopMeasuring();", "+", "+\t\t// Warn if measure time is not enough while debugging", "+\t\tif (DEBUG) {", "+\t\t\tlong time = System.currentTimeMillis() - start;", "+\t\t\tif (time < TIME_THRESHOLD) {", "+\t            System.err.println(parsedLines + \" lines/\"+ parsedCharacters + \" characters parsed\");", "+\t\t\t} else {", "+\t            System.out.println(parsedLines + \" lines/\"+ parsedCharacters + \" characters parsed\");", "+\t\t\t}", "+\t\t}", "+", "+\t\t// Return stats", "+\t\treturn new long[] { parsedCharacters, parsedLines };", "-\t */", "-\tprivate long[] parseFile(String fileName, int iterations) throws InvalidInputException, IOException {", "-", "-\t\t// Test for parser", "-\t\tFile file = new File(fileName);", "-\t\tchar[] content = Util.getFileCharContent(file, null);", "-\t\tCompilerOptions options = new CompilerOptions();", "-\t\toptions.sourceLevel = ClassFileConstants.JDK1_4;", "-\t\toptions.targetJDK = ClassFileConstants.JDK1_4;", "-\t\tProblemReporter problemReporter = ", "-\t\t\t\tnew ProblemReporter(", "-\t\t\t\t\tDefaultErrorHandlingPolicies.exitAfterAllProblems(), ", "-\t\t\t\t\toptions, ", "-\t\t\t\t\tnew DefaultProblemFactory());", "-        Parser parser = new Parser(problemReporter, true);", "-", "-\t\t// Warm-up", "-\t\tfor (int i = 0; i < 2; i++) {", "-\t\t\tICompilationUnit unit = new CompilationUnit(content, file.getName(), null);", "-\t\t\tCompilationResult unitResult = new CompilationResult(unit, 0, 1, options.maxProblemsPerUnit);\t\t\t\t", "-\t\t\tCompilationUnitDeclaration unitDeclaration = parser.dietParse(unit, unitResult);", "-\t\t\tparser.getMethodBodies(unitDeclaration);", "-\t\t}", "-", "-\t\t// Measures", "-\t\tlong parsedLines = 0;", "-\t\tlong parsedCharacters = 0;", "-\t\tlong start = 0;", "-\t\tif (DEBUG) {", "-\t\t\tstart = System.currentTimeMillis();", "-\t\t}", "-\t\tstartMeasuring();", "-\t\tfor (int i = 0; i < iterations; i++) {", "-\t\t\tICompilationUnit unit = new CompilationUnit(content, file.getName(), null);", "-\t\t\tCompilationResult unitResult = new CompilationResult(unit, 0, 1, options.maxProblemsPerUnit);\t\t\t\t", "-\t\t\tCompilationUnitDeclaration unitDeclaration = parser.dietParse(unit, unitResult);", "-\t\t\tparser.getMethodBodies(unitDeclaration);", "-\t\t\tparsedCharacters += content.length;", "-\t\t\tparsedLines += unitResult.lineSeparatorPositions.length;", "-\t\t}", "-\t\tstopMeasuring();", "-", "-\t\t// Warn if measure time is not enough while debugging", "-\t\tif (DEBUG) {", "-\t\t\tlong time = System.currentTimeMillis() - start;", "-\t\t\tif (time < TIME_THRESHOLD) {", "-\t            System.err.print(parsedLines + \" lines/\"+ parsedCharacters + \" characters parsed\");", "-\t\t\t} else {", "-\t            System.out.print(parsedLines + \" lines/\"+ parsedCharacters + \" characters parsed\");", "-\t\t\t}", "-\t\t}", "-", "-\t\t// Return stats", "-\t\treturn new long[] { parsedCharacters, parsedLines };", "-\t}"]}], "num": 44599}