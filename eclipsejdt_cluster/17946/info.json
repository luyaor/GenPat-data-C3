{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "dd0e1a7da8a16a1114c2dd441213a8c2", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5d2b8c3b1c422d4d6972843ec39df681", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "174f89aae07a92e58011875516697182fd7f3ebd", "commitAfterChange": "32d92c75e213c7276019a1d5b0a473480fced46d", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 34, "signatureBeforeChange": "\r \r \tprivate void findTypesAndPackages(char[] token, Scope scope)", "signatureAfterChange": "\r \r \tprivate void findTypesAndPackages(char[] token, Scope scope)", "diff": ["-\t\t\t\tSourceTypeBinding sourceType = types[i];\r", "+\t\t\t\tSourceTypeBinding sourceType = types[i]; \r", "-\t\t\t\tif (typeLength > sourceType.sourceName.length)\r", "-\t\t\t\t\tcontinue;\r", "+\t\t\t\tif (typeLength > sourceType.sourceName.length)\tcontinue;\r", "+\t\t\t\t\r", "+\t\t\t\tif (!CharOperation.prefixEquals(token, sourceType.sourceName, false))\tcontinue;\r", "-\t\t\t\tif (!CharOperation.prefixEquals(token, sourceType.sourceName, false\r", "-\t\t\t\t\t/* ignore case */\r", "-\t\t\t\t\t))\r", "-\t\t\t\t\tcontinue;\r", "-\r", "-\t\t\t\trequestor.acceptType(\r", "-\t\t\t\t\tsourceType.qualifiedPackageName(),\r", "-\t\t\t\t\tsourceType.sourceName(),\r", "-\t\t\t\t\tsourceType.sourceName(),\r", "-\t\t\t\t\tstartPosition - offset,\r", "-\t\t\t\t\tendPosition - offset);\r", "+\t\t\t\tif (sourceType.isClass()){\r", "+\t\t\t\t\trequestor.acceptClass(\r", "+\t\t\t\t\t\tsourceType.qualifiedPackageName(),\r", "+\t\t\t\t\t\tsourceType.sourceName(),\r", "+\t\t\t\t\t\tsourceType.sourceName(),\r", "+\t\t\t\t\t\tsourceType.modifiers,\r", "+\t\t\t\t\t\tstartPosition - offset, \r", "+\t\t\t\t\t\tendPosition - offset);\r", "+\t\t\t\t} else {\r", "+\t\t\t\t\trequestor.acceptInterface(\r", "+\t\t\t\t\t\tsourceType.qualifiedPackageName(),\r", "+\t\t\t\t\t\tsourceType.sourceName(),\r", "+\t\t\t\t\t\tsourceType.sourceName(),\r", "+\t\t\t\t\t\tsourceType.modifiers,\r", "+\t\t\t\t\t\tstartPosition - offset,\r", "+\t\t\t\t\t\tendPosition - offset);\r", "+\t\t\t\t}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9f8867bd8869e61020a7d92d85a4e7de", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "c32f4faa0e0e05b7548ab150030a448443121451", "commitAfterChange": "6a5c512cff72c8d122f75160d7a3ca9f79b312ee", "methodNumberBeforeChange": 22, "methodNumberAfterChange": 22, "signatureBeforeChange": "  \tprivate void findFieldsAndMethods( \t\tchar[] token, \t\tTypeBinding receiverType, \t\tScope scope, \t\tInvocationSite invocationSite, \t\tScope invocationScope, \t\tboolean implicitCall)", "signatureAfterChange": "  \tprivate void findFieldsAndMethods( \t\tchar[] token, \t\tTypeBinding receiverType, \t\tScope scope, \t\tInvocationSite invocationSite, \t\tScope invocationScope, \t\tboolean implicitCall)", "diff": ["-", "+\t\t", "+\t\tObjectVector methodsFound = new ObjectVector();", "+\t\t", "+\t\t\tif (token.length <= cloneMethod.length", "+\t\t\t\t&& CharOperation.prefixEquals(token, cloneMethod, false /* ignore case */", "+\t\t\t)) {", "+\t\t\t\tReferenceBinding objectRef = scope.getJavaLangObject();", "+\t\t\t\t", "+\t\t\t\tint relevance = computeBaseRelevance();", "+\t\t\t\trelevance += computeRelevanceForInterestingProposal();", "+\t\t\t\trelevance += computeRelevanceForCaseMatching(token, cloneMethod);", "+\t\t\t\trelevance += computeRelevanceForExpectingType(objectRef);", "+\t\t\t\trelevance += computeRelevanceForStatic(false, false);", "+\t\t\t\trelevance += computeRelevanceForQualification(false);", "+\t\t\t\t", "+\t\t\t\tchar[] completion;", "+\t\t\t\tif (source != null", "+\t\t\t\t\t&& source.length > endPosition", "+\t\t\t\t\t&& source[endPosition] == '(') {", "+\t\t\t\t\tcompletion = cloneMethod;", "+\t\t\t\t\t} else {", "+\t\t\t\t\tcompletion = CharOperation.concat(cloneMethod, new char[] { '(', ')' });", "+\t\t\t\t}", "+\t\t\t\tnoProposal = false;", "+\t\t\t\trequestor.acceptMethod(", "+\t\t\t\t\tCharOperation.NO_CHAR,", "+\t\t\t\t\tCharOperation.NO_CHAR,", "+\t\t\t\t\tcloneMethod,", "+\t\t\t\t\tCharOperation.NO_CHAR_CHAR,", "+\t\t\t\t\tCharOperation.NO_CHAR_CHAR,", "+\t\t\t\t\tCharOperation.NO_CHAR_CHAR,", "+\t\t\t\t\tCharOperation.concat(JAVA, LANG, '.'),", "+\t\t\t\t\tOBJECT,", "+\t\t\t\t\tcompletion,", "+\t\t\t\t\tIConstants.AccPublic,", "+\t\t\t\t\tstartPosition - offset,", "+\t\t\t\t\tendPosition - offset,", "+\t\t\t\t\trelevance);", "+\t\t\t\t\t", "+\t\t\t\tmethodsFound.add(new Object[]{objectRef.getMethods(cloneMethod)[0], objectRef});", "+\t\t\t}", "+\t\t\t", "-\t\t\tnew ObjectVector(),", "+\t\t\tmethodsFound,"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ace121144845435c406d111ca1f28a12", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "0328928ec6e943d2d976356cfda47a4325798cf6", "commitAfterChange": "f53fc12a4e16e7e99a89753f24ef3e0e0388e214", "methodNumberBeforeChange": 48, "methodNumberAfterChange": 48, "signatureBeforeChange": "  \tprivate void findTypesAndSubpackages( \t\tchar[] token, \t\tPackageBinding packageBinding)", "signatureAfterChange": "  \tprivate void findTypesAndSubpackages( \t\tchar[] token, \t\tPackageBinding packageBinding)", "diff": ["+\t\t", "+\t\tif (unitScope != null) {", "+\t\t\tint typeLength = qualifiedName.length;", "+\t\t\tSourceTypeBinding[] types = unitScope.topLevelTypes;", "+", "+\t\t\tfor (int i = 0, length = types.length; i < length; i++) {", "+\t\t\t\tSourceTypeBinding sourceType = types[i]; ", "+\t", "+\t\t\t\tchar[] qualifiedSourceTypeName = CharOperation.concatWith(sourceType.compoundName, '.');", "+\t\t\t\t", "+\t\t\t\tif (typeLength > qualifiedSourceTypeName.length)\tcontinue;", "+\t\t\t\tif (!CharOperation.prefixEquals(qualifiedName, qualifiedSourceTypeName, false))\tcontinue;", "+", "+\t\t\t\tint relevance = computeBaseRelevance();", "+\t\t\t\trelevance += computeRelevanceForInterestingProposal();", "+\t\t\t\trelevance += computeRelevanceForCaseMatching(qualifiedName, qualifiedSourceTypeName);", "+\t\t\t\trelevance += computeRelevanceForExpectingType(sourceType);", "+\t\t\t\trelevance += computeRelevanceForQualification(false);", "+", "+\t\t\t\tif (sourceType.isClass()){", "+\t\t\t\t\trelevance += computeRelevanceForClass();", "+\t\t\t\t\trelevance += computeRelevanceForException(sourceType.sourceName);", "+\t\t\t\t\trequestor.acceptClass(", "+\t\t\t\t\t\tsourceType.qualifiedPackageName(),", "+\t\t\t\t\t\tsourceType.sourceName(),", "+\t\t\t\t\t\tsourceType.sourceName(),", "+\t\t\t\t\t\tsourceType.modifiers,", "+\t\t\t\t\t\tstartPosition - offset, ", "+\t\t\t\t\t\tendPosition - offset,", "+\t\t\t\t\t\trelevance);", "+\t\t\t\t} else {", "+\t\t\t\t\trelevance += computeRelevanceForInterface();", "+\t\t\t\t\trequestor.acceptInterface(", "+\t\t\t\t\t\tsourceType.qualifiedPackageName(),", "+\t\t\t\t\t\tsourceType.sourceName(),", "+\t\t\t\t\t\tsourceType.sourceName(),", "+\t\t\t\t\t\tsourceType.modifiers,", "+\t\t\t\t\t\tstartPosition - offset,", "+\t\t\t\t\t\tendPosition - offset,", "+\t\t\t\t\t\trelevance);", "+\t\t\t\t}", "+\t\t\t}", "+\t\t}", "+\t\t"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ae8dfad4f6348268f296fa892f6febf3", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "abc14013a8fd8f8040bc625a426663caf110b8a2", "commitAfterChange": "f04bcab2628ef5d21c040097a5d26e48d3262568", "methodNumberBeforeChange": 40, "methodNumberAfterChange": 40, "signatureBeforeChange": "  \tprivate void findTypesAndPackages(char[] token, Scope scope)", "signatureAfterChange": "  \tprivate void findTypesAndPackages(char[] token, Scope scope)", "diff": ["-", "-\t\tif (token.length == 0)", "-\t\t\treturn;", "-", "-\t\tfindKeywords(token, baseTypes, scope);", "-\t\tnameEnvironment.findTypes(token, this);", "-\t\tnameEnvironment.findPackages(token, this);", "+\t\t", "+\t\tif (token.length == 0) {", "+\t\t\tif(expectedTypesPtr > -1) {", "+\t\t\t\tfor (int i = 0; i <= expectedTypesPtr; i++) {", "+\t\t\t\t\tif(expectedTypes[i] instanceof ReferenceBinding) {", "+\t\t\t\t\t\tReferenceBinding refBinding = (ReferenceBinding)expectedTypes[i];", "+\t\t\t\t\t\tif(!unitScope.isDefinedInSameUnit(refBinding)) {", "+\t\t\t\t\t\t\tint relevance = R_DEFAULT + R_CASE + R_EXPECTED_TYPE;", "+\t\t\t\t\t\t\tif(refBinding.isClass()) {", "+\t\t\t\t\t\t\t\trelevance += computeRelevanceForClass();", "+\t\t\t\t\t\t\t\trequestor.acceptClass(", "+\t\t\t\t\t\t\t\t\trefBinding.qualifiedPackageName(),", "+\t\t\t\t\t\t\t\t\trefBinding.sourceName(),", "+\t\t\t\t\t\t\t\t\trefBinding.sourceName(),", "+\t\t\t\t\t\t\t\t\trefBinding.modifiers,", "+\t\t\t\t\t\t\t\t\tstartPosition - offset, ", "+\t\t\t\t\t\t\t\t\tendPosition - offset,", "+\t\t\t\t\t\t\t\t\trelevance);", "+\t\t\t\t\t\t\t} else if (refBinding.isInterface()) {", "+\t\t\t\t\t\t\t\trelevance += computeRelevanceForInterface();", "+\t\t\t\t\t\t\t\trequestor.acceptInterface(", "+\t\t\t\t\t\t\t\t\trefBinding.qualifiedPackageName(),", "+\t\t\t\t\t\t\t\t\trefBinding.sourceName(),", "+\t\t\t\t\t\t\t\t\trefBinding.sourceName(),", "+\t\t\t\t\t\t\t\t\trefBinding.modifiers,", "+\t\t\t\t\t\t\t\t\tstartPosition - offset, ", "+\t\t\t\t\t\t\t\t\tendPosition - offset,", "+\t\t\t\t\t\t\t\t\trelevance);", "+\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t} ", "+\t\t} else {", "+\t\t\tfindKeywords(token, baseTypes, scope);", "+\t\t\tnameEnvironment.findTypes(token, this);", "+\t\t\tnameEnvironment.findPackages(token, this);", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e9b2c6c9e0ae9ca8f091044e80895bb4", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/CompletionEngine.java", "commitBeforeChange": "ccb3e5525c54dfe23c1e360c5b523dc7389a8449", "commitAfterChange": "d21bc313cdd8902b8761ed6e8db08c82a2b9b3d0", "methodNumberBeforeChange": 14, "methodNumberAfterChange": 15, "signatureBeforeChange": "\r \r \tprivate void findConstructors(\r \t\tReferenceBinding currentType,\r \t\tTypeBinding[] argTypes,\r \t\tScope scope,\r \t\tInvocationSite invocationSite)", "signatureAfterChange": "\r \r \tprivate void findConstructors(\r \t\tReferenceBinding currentType,\r \t\tTypeBinding[] argTypes,\r \t\tScope scope,\r \t\tInvocationSite invocationSite,\r \t\tboolean forAnonymousType)", "diff": ["-\t\tInvocationSite invocationSite) {\r", "+\t\tInvocationSite invocationSite,\r", "+\t\tboolean forAnonymousType) {\r", "-\r", "-\t\t\t\trequestor.acceptMethod(\r", "-\t\t\t\t\tcurrentType.qualifiedPackageName(),\r", "-\t\t\t\t\tcurrentType.qualifiedSourceName(),\r", "-\t\t\t\t\tcurrentType.sourceName(),\r", "-\t\t\t\t\tparameterPackageNames,\r", "-\t\t\t\t\tparameterTypeNames,\r", "-\t\t\t\t\tparameterNames,\r", "-\t\t\t\t\tTypeConstants.NoChar,\r", "-\t\t\t\t\tTypeConstants.NoChar,\r", "-\t\t\t\t\tcompletion,\r", "-\t\t\t\t\tconstructor.modifiers,\r", "-\t\t\t\t\tendPosition,\r", "-\t\t\t\t\tendPosition);\r", "+\t\t\t\t\t\r", "+\t\t\t\tif(forAnonymousType){\r", "+\t\t\t\t\trequestor.acceptAnonymousType(\r", "+\t\t\t\t\t\tcurrentType.qualifiedPackageName(),\r", "+\t\t\t\t\t\tcurrentType.qualifiedSourceName(),\r", "+\t\t\t\t\t\tparameterPackageNames,\r", "+\t\t\t\t\t\tparameterTypeNames,\r", "+\t\t\t\t\t\tparameterNames,\r", "+\t\t\t\t\t\tcompletion,\r", "+\t\t\t\t\t\tconstructor.modifiers,\r", "+\t\t\t\t\t\tendPosition,\r", "+\t\t\t\t\t\tendPosition);\r", "+\t\t\t\t} else {\r", "+\t\t\t\t\trequestor.acceptMethod(\r", "+\t\t\t\t\t\tcurrentType.qualifiedPackageName(),\r", "+\t\t\t\t\t\tcurrentType.qualifiedSourceName(),\r", "+\t\t\t\t\t\tcurrentType.sourceName(),\r", "+\t\t\t\t\t\tparameterPackageNames,\r", "+\t\t\t\t\t\tparameterTypeNames,\r", "+\t\t\t\t\t\tparameterNames,\r", "+\t\t\t\t\t\tTypeConstants.NoChar,\r", "+\t\t\t\t\t\tTypeConstants.NoChar,\r", "+\t\t\t\t\t\tcompletion,\r", "+\t\t\t\t\t\tconstructor.modifiers,\r", "+\t\t\t\t\t\tendPosition,\r", "+\t\t\t\t\t\tendPosition);\r", "+\t\t\t\t}\r"]}], "num": 17946}