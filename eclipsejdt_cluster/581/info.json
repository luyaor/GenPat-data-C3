{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "a4e0d3514a4b3c7fc7250f3ce8ebd763", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "020bc0d26454c85ff4a1b8499f0fb732", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/util/Util.java", "commitBeforeChange": "92f042fa40e42063d16c97bd03b03013bccafbbf", "commitAfterChange": "564f0099078b50659e30ddb5a5157ad26528c30f", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 9, "signatureBeforeChange": "\r public static char[] getInputStreamAsCharArray(InputStream stream) throws IOException", "signatureAfterChange": "\r public static char[] getInputStreamAsCharArray(InputStream stream, int length) throws IOException", "diff": ["-public static char[] getInputStreamAsCharArray(InputStream stream) throws IOException {\r", "+public static char[] getInputStreamAsCharArray(InputStream stream, int length) throws IOException {\r", "-\tchar[] contents = new char[0];\r", "-\ttry {\r", "+\tchar[] contents;\r", "+\tif (length == -1) {\r", "+\t\tcontents = new char[0];\r", "-\t\t\t\r", "+\t\t\r", "-\t\t\r", "+\t\r", "+\t} else {\r", "+\t\tcontents = new char[length];\r", "+\t\tint len = 0;\r", "+\t\tint readSize = 0;\r", "+\t\twhile ((readSize != -1) && (len != length)) {\r", "+\t\t\t// See PR 1FMS89U\r", "+\t\t\t// We record first the read size. In this case len is the actual read size.\r", "+\t\t\tlen += readSize;\r", "+\t\t\treadSize = reader.read(contents, len, length - len);\r", "+\t\t}\r", "+\t\t// See PR 1FMS89U\r", "+\t\t// Now we need to resize in case the default encoding used more than one byte for each\r", "+\t\t// character\r", "+\t\tif (len != length)\r", "+\t\t\tSystem.arraycopy(contents, 0, (contents = new char[len]), 0, len);\t\t\r", "+\t}\r", "+\r", "+\treturn contents;\r", "+}\r", "-\t\ttry {\r", "-\t\t\treader.close();\r", "-\t\t} catch (IOException e) {\r", "-\treturn contents;\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1cc040e3a46f66e8924de6c2a7e64198", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/BasicCompilationUnit.java", "commitBeforeChange": "92f042fa40e42063d16c97bd03b03013bccafbbf", "commitAfterChange": "564f0099078b50659e30ddb5a5157ad26528c30f", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "\r public char[] getContents()", "signatureAfterChange": "\r public char[] getContents()", "diff": ["-\tBufferedReader reader = null;\r", "-\t\tFile file = new File(new String(fileName));\r", "-\t\treader = new BufferedReader(new FileReader(file));\r", "-\t\tint length;\r", "-\t\tchar[] contents = new char[length = (int) file.length()];\r", "-\t\tint len = 0;\r", "-\t\tint readSize = 0;\r", "-\t\twhile ((readSize != -1) && (len != length)) {\r", "-\t\t\t// See PR 1FMS89U\r", "-\t\t\t// We record first the read size. In this case len is the actual read size.\r", "-\t\t\tlen += readSize;\r", "-\t\t\treadSize = reader.read(contents, len, length - len);\r", "-\t\t}\r", "-\t\treader.close();\r", "-\t\t// See PR 1FMS89U\r", "-\t\t// Now we need to resize in case the default encoding used more than one byte for each\r", "-\t\t// character\r", "-\t\tif (len != length)\r", "-\t\t\tSystem.arraycopy(contents, 0, (contents = new char[len]), 0, len);\t\t\r", "-\t\treturn contents;\r", "-\t} catch (FileNotFoundException e) {\r", "+\t\treturn Util.getFileCharContent(new File(new String(fileName)));\r", "-\t\tif (reader != null) {\r", "-\t\t\ttry {\r", "-\t\t\t\treader.close();\r", "-\t\t\t} catch(IOException ioe) {\r", "-\t\t\t}\r", "-\t\t}\r", "-\t};\r", "+\t}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "86b1bb664398b94a71415f3c19966ec6", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/batch/org/eclipse/jdt/internal/compiler/batch/CompilationUnit.java", "commitBeforeChange": "92f042fa40e42063d16c97bd03b03013bccafbbf", "commitAfterChange": "564f0099078b50659e30ddb5a5157ad26528c30f", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "\r public char[] getContents()", "signatureAfterChange": "\r public char[] getContents()", "diff": ["-\tBufferedReader reader = null;\r", "-\t\tFile file = new File(new String(fileName));\r", "-\t\treader = new BufferedReader(new FileReader(file));\r", "-\t\tint length;\r", "-\t\tchar[] contents = new char[length = (int) file.length()];\r", "-\t\tint len = 0;\r", "-\t\tint readSize = 0;\r", "-\t\twhile ((readSize != -1) && (len != length)) {\r", "-\t\t\t// See PR 1FMS89U\r", "-\t\t\t// We record first the read size. In this case len is the actual read size.\r", "-\t\t\tlen += readSize;\r", "-\t\t\treadSize = reader.read(contents, len, length - len);\r", "-\t\t}\r", "-\t\treader.close();\r", "-\t\t// See PR 1FMS89U\r", "-\t\t// Now we need to resize in case the default encoding used more than one byte for each\r", "-\t\t// character\r", "-\t\tif (len != length)\r", "-\t\t\tSystem.arraycopy(contents, 0, (contents = new char[len]), 0, len);\t\t\r", "-\t\treturn contents;\r", "-\t} catch (FileNotFoundException e) {\r", "+\t\treturn Util.getFileCharContent(new File(new String(fileName)));\r", "-\t\tif (reader != null) {\r", "-\t\t\ttry {\r", "-\t\t\t\treader.close();\r", "-\t\t\t} catch(IOException ioe) {\r", "-\t\t\t}\r", "-\t\t}\r", "-\t};\r", "+\t}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "91e5cfc6d37c04ed017743a2be425eb3", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/builder/impl/StateImpl.java", "commitBeforeChange": "92f042fa40e42063d16c97bd03b03013bccafbbf", "commitAfterChange": "564f0099078b50659e30ddb5a5157ad26528c30f", "methodNumberBeforeChange": 32, "methodNumberAfterChange": 32, "signatureBeforeChange": "\r \tprotected char[] getElementContentCharArray(SourceEntry entry)", "signatureAfterChange": "\r \tprotected char[] getElementContentCharArray(SourceEntry entry)", "diff": ["-\t\tBufferedReader reader = null;\r", "+\t\tInputStream stream = null;\r", "-\t\t\treader= new BufferedReader(new InputStreamReader(new ByteArrayInputStream(bytes)));\r", "-\t\t\tint length= bytes.length;\r", "-\t\t\tchar[] contents= new char[length];\r", "-\t\t\tint len= 0;\r", "-\t\t\tint readSize= 0;\r", "-\t\t\twhile ((readSize != -1) && (len != length)) {\r", "-\t\t\t\t// See PR 1FMS89U\r", "-\t\t\t\t// We record first the read size. In this case len is the actual read size.\r", "-\t\t\t\tlen += readSize;\r", "-\t\t\t\treadSize= reader.read(contents, len, length - len);\r", "-\t\t\t}\r", "-\t\t\treader.close();\r", "-\t\t\t// See PR 1FMS89U\r", "-\t\t\t// Now we need to resize in case the default encoding used more than one byte for each\r", "-\t\t\t// character\r", "-\t\t\tif (len != length)\r", "-\t\t\t\tSystem.arraycopy(contents, 0, (contents= new char[len]), 0, len);\r", "-\t\t\treturn contents;\r", "+\t\t\tstream = new ByteArrayInputStream(bytes);\r", "+\t\t\treturn org.eclipse.jdt.internal.compiler.util.Util.getInputStreamAsCharArray(stream, bytes.length);\r", "-\t\t\tif (reader != null) {\r", "+\t\t\treturn new char[0];\r", "+\t\t} finally {\r", "+\t\t\tif (stream != null) {\r", "-\t\t\t\t\treader.close();\r", "+\t\t\t\t\tstream.close();\r", "-\t\t\treturn new char[0];\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "af0b3c542db0cae6699e7ea0aaa6810a", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/util/Util.java", "commitBeforeChange": "92f042fa40e42063d16c97bd03b03013bccafbbf", "commitAfterChange": "564f0099078b50659e30ddb5a5157ad26528c30f", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 8, "signatureBeforeChange": "\r public static byte[] getInputStreamAsByteArray(InputStream stream) throws IOException", "signatureAfterChange": "\r public static byte[] getInputStreamAsByteArray(InputStream stream, int length) throws IOException", "diff": ["-public static byte[] getInputStreamAsByteArray(InputStream stream) throws IOException {\r", "-\tbyte[] contents = new byte[0];\r", "-\ttry {\r", "+public static byte[] getInputStreamAsByteArray(InputStream stream, int length) throws IOException {\r", "+\tbyte[] contents;\r", "+\tif (length == -1) {\r", "+\t\tcontents = new byte[0];\r", "-\t\t\t\r", "+\t\t\r", "-\t\t\r", "+\t\r", "-\t} finally {\r", "-\t\ttry {\r", "-\t\t\tstream.close();\r", "-\t\t} catch (IOException e) {\r", "+\t} else {\r", "+\t\tcontents = new byte[length];\r", "+\t\tint len = 0;\r", "+\t\tint readSize = 0;\r", "+\t\twhile ((readSize != -1) && (len != length)) {\r", "+\t\t\t// See PR 1FMS89U\r", "+\t\t\t// We record first the read size. In this case len is the actual read size.\r", "+\t\t\tlen += readSize;\r", "+\t\t\treadSize = stream.read(contents, len, length - len);\r", "+\r"]}], "num": 581}