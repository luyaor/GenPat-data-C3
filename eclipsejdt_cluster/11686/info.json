{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3c74cffeea134dca94786d5bb29054fc", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "06a6986f323da8f421c49b7885c4daac", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/Openable.java", "commitBeforeChange": "ed25425f5de4194a0f32ce4c1315af886ca42c42", "commitAfterChange": "821b6028ffbd0ba8edfd1a0534c32e817f4e830d", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": " public boolean exists()", "signatureAfterChange": " public boolean exists()", "diff": ["-\tJavaModelManager manager = JavaModelManager.getJavaModelManager();", "-\tif (manager.getInfo(this) != null) return true;", "-\tif (!parentExists()) return false;", "-\tPackageFragmentRoot root = getPackageFragmentRoot();", "-\tif (root != null", "-\t\t\t&& (root == this || !root.isArchive())) {", "-\t\treturn resourceExists();", "+\tif (JavaModelManager.getJavaModelManager().getInfo(this) != null) ", "+\t\treturn true;", "+\tswitch (getElementType()) {", "+\t\tcase IJavaElement.PACKAGE_FRAGMENT:", "+\t\t\tPackageFragmentRoot root = getPackageFragmentRoot();", "+\t\t\tif (root.isArchive()) {", "+\t\t\t\t// pkg in a jar -> need to open root to know if this pkg exists", "+\t\t\t\tJarPackageFragmentRootInfo rootInfo;", "+\t\t\t\ttry {", "+\t\t\t\t\trootInfo = (JarPackageFragmentRootInfo) root.getElementInfo();", "+\t\t\t\t} catch (JavaModelException e) {", "+\t\t\t\t\treturn false;", "+\t\t\t\t}", "+\t\t\t\treturn rootInfo.rawPackageInfo.containsKey(((PackageFragment) this).names);", "+\t\t\t}", "+\t\t\tbreak;", "+\t\tcase IJavaElement.CLASS_FILE:", "+\t\t\tif (getPackageFragmentRoot().isArchive()) {", "+\t\t\t\t// class file in a jar -> need to open this class file to know if it exists", "+\t\t\t\treturn super.exists();", "+\t\t\t}", "+\t\t\tbreak;", "-\treturn super.exists();", "+\treturn validateExistence(getResource()).isOK();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f5807769e93ed2436f993916ee06d4d3", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/JavaProject.java", "commitBeforeChange": "424b9c711eb8f066b325841662effb171f3ae4ef", "commitAfterChange": "4d19416746402b8fbbfd02c13772658da70a345a", "methodNumberBeforeChange": 20, "methodNumberAfterChange": 67, "signatureBeforeChange": "\r \tpublic IPackageFragment[] getAllPackageFragments() throws JavaModelException", "signatureAfterChange": "\r \tpublic void updatePackageFragmentRoots()", "diff": ["-\t */\r", "-\tpublic IPackageFragment[] getAllPackageFragments() throws JavaModelException {\r", "-\r", "-\t\tIPackageFragmentRoot[] roots = getAllPackageFragmentRoots();\r", "-\t\treturn getPackageFragmentsInRoots(roots);\r", "+\t */\r", "+\tpublic void updatePackageFragmentRoots(){\r", "+\t\t\r", "+\t\t\tif (this.isOpen()) {\r", "+\r", "+\t\t\t\ttry {\r", "+\t\t\t\t\tIPackageFragmentRoot[] oldRoots = getPackageFragmentRoots();\r", "+\t\t\t\t\tIPackageFragmentRoot[] newRoots = computePackageFragmentRoots(false);\r", "+\t\t\t\t\tcheckIdentical: {\r", "+\t\t\t\t\t\tif (oldRoots.length == newRoots.length){\r", "+\t\t\t\t\t\t\tfor (int i = 0, length = oldRoots.length; i < length; i++){\r", "+\t\t\t\t\t\t\t\tif (!oldRoots[i].equals(newRoots[i])){\r", "+\t\t\t\t\t\t\t\t\tbreak checkIdentical;\r", "+\t\t\t\t\t\t\t\t}\r", "+\t\t\t\t\t\t\t}\r", "+\t\t\t\t\t\t\treturn; // no need to update\r", "+\t\t\t\t\t\t}\t\r", "+\t\t\t\t\t}\r", "+\t\t\t\t\tJavaProjectElementInfo info = getJavaProjectElementInfo();\r", "+\t\t\t\t\tinfo.setChildren(\r", "+\t\t\t\t\t\tcomputePackageFragmentRoots(false));\t\t\r", "+\t\t\t\t\tinfo.setNameLookup(null); // discard name lookup (hold onto roots)\r", "+\t\t\t\t\tinfo.setNonJavaResources(null);\r", "+\t\t\t\t} catch(JavaModelException e){\r", "+\t\t\t\t\ttry {\r", "+\t\t\t\t\t\tclose(); // could not do better\r", "+\t\t\t\t\t} catch(JavaModelException ex){\r", "+\t\t\t\t\t}\r", "+\t\t\t\t}\r", "+\t\t\t}\r", "+\t}\r"]}], "num": 11686}