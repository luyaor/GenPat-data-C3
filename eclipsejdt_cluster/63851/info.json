{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "4c7420188196291e2a9c9f5180fe0f80", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "2cde0ffe1d13cc246c573bdf06023d81", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/SortElementsOperation.java", "commitBeforeChange": "9d28ff91378f9bfbe6756ae0331a10fbb52d3dba", "commitAfterChange": "9474d2cdea35a8b31f8fe2828fe199dbf7f1cf71", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " \tprotected void executeOperation() throws JavaModelException", "signatureAfterChange": " \tprotected void executeOperation() throws JavaModelException", "diff": ["-\t\t\t\tICompilationUnit unit = ((JavaElement) fElementsToProcess[i]).getCompilationUnit();", "-\t\t\t\tif (unit == null) {", "-\t\t\t\t\treturn;", "-\t\t\t\t}", "-\t\t\t\tIBuffer buffer = unit.getBuffer();", "+\t\t\t\tWorkingCopy copy = (WorkingCopy) fElementsToProcess[i];", "+\t\t\t\tICompilationUnit unit = (ICompilationUnit) copy.getOriginalElement();", "+\t\t\t\tIBuffer buffer = copy.getBuffer();", "-\t\t\t\tprocessElement(unit, positions == null ? null : positions[i], bufferContents);", "-\t\t\t\tif (this.hasChanged) {", "-\t\t\t\t\tunit.save(null, false);", "-\t\t\t\t\tboolean isWorkingCopy = unit.isWorkingCopy();", "-\t\t\t\t\tworked(1);", "-\t\t\t\t\t // if unit is working copy, then save will have already fired the delta", "-\t\t\t\t\tif (!isWorkingCopy", "-\t\t\t\t\t\t&& !Util.isExcluded(unit)", "-\t\t\t\t\t\t&& unit.getParent().exists()) {", "-\t\t\t\t\t\t\tJavaElementDelta delta = newJavaElementDelta();", "-\t\t\t\t\t\t\tdelta.changed(unit, IJavaElementDelta.F_CHILDREN);", "-\t\t\t\t\t\t\taddDelta(delta);", "-\t\t\t\t\t}", "+\t\t\t\tString result = processElement(unit, positions == null ? null : positions[i], bufferContents);", "+\t\t\t\tif (!CharOperation.equals(result.toCharArray(), bufferContents)) {", "+\t\t\t\t\tcopy.getBuffer().setContents(result);", "+\t\t\t\tworked(1);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "59c6c18a0bba45bdf6ecd8197ad4c2da", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/SortElementsOperation.java", "commitBeforeChange": "92a1bed0a525f065b3afa8ca4370b68c7dfc54cc", "commitAfterChange": "b6e5ae943550075226ab72b52ecddee830556320", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " \tprotected void executeOperation() throws JavaModelException", "signatureAfterChange": " \tprotected void executeOperation() throws JavaModelException", "diff": ["-\t\t\t\tJavaElementDelta delta = newJavaElementDelta();", "-\t\t\t\tunit.save(null, false);", "-\t\t\t\tboolean isWorkingCopy = unit.isWorkingCopy();", "-\t\t\t\tif (!isWorkingCopy) {", "-\t\t\t\t\tthis.setAttribute(HAS_MODIFIED_RESOURCE_ATTR, TRUE);", "+\t\t\t\tif (this.hasChanged) {", "+\t\t\t\t\tunit.save(null, false);", "+\t\t\t\t\tboolean isWorkingCopy = unit.isWorkingCopy();", "+\t\t\t\t\tworked(1);", "+\t\t\t\t\t // if unit is working copy, then save will have already fired the delta", "+\t\t\t\t\tif (!isWorkingCopy", "+\t\t\t\t\t\t&& !Util.isExcluded(unit)", "+\t\t\t\t\t\t&& unit.getParent().exists()) {", "+\t\t\t\t\t\t\tJavaElementDelta delta = newJavaElementDelta();", "+\t\t\t\t\t\t\tdelta.changed(unit, IJavaElementDelta.F_CHILDREN);", "+\t\t\t\t\t\t\taddDelta(delta);", "+\t\t\t\t\t}", "-\t\t\t\tworked(1);", "-\t\t\t\t // if unit is working copy, then save will have already fired the delta", "-\t\t\t\tif (!isWorkingCopy", "-\t\t\t\t\t&& !Util.isExcluded(unit)", "-\t\t\t\t\t&& unit.getParent().exists()) {", "-\t\t\t\t\tdelta.changed(unit, IJavaElementDelta.F_CONTENT);", "-\t\t\t\t\taddDelta(delta);", "-\t\t\t\t}\t\t\t\t"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "dbaabb996bf793717db56c8cb2b8f220", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/SortElementsOperation.java", "commitBeforeChange": "f088819455a71b45548a596058f67b6352ed6ea3", "commitAfterChange": "d8924c5474634641f5ba8e8d6797d0147577e226", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " \tprotected void executeOperation() throws JavaModelException", "signatureAfterChange": " \tprotected void executeOperation() throws JavaModelException", "diff": ["-\t\t\tfor (int i = 0, max = fElementsToProcess.length; i < max; i++) {", "-\t\t\t\tWorkingCopy copy = (WorkingCopy) fElementsToProcess[i];", "-\t\t\t\tICompilationUnit unit = (ICompilationUnit) copy.getOriginalElement();", "-\t\t\t\tIBuffer buffer = copy.getBuffer();", "-\t\t\t\tif (buffer  == null) { ", "-\t\t\t\t\treturn;", "-\t\t\t\t}", "-\t\t\t\tchar[] bufferContents = buffer.getCharacters();", "-\t\t\t\tString result = processElement(unit, positions == null ? null : positions[i], bufferContents);", "-\t\t\t\tif (!CharOperation.equals(result.toCharArray(), bufferContents)) {", "-\t\t\t\t\tcopy.getBuffer().setContents(result);", "-\t\t\t\t}", "-\t\t\t\tworked(1);", "+\t\t\tWorkingCopy copy = (WorkingCopy) fElementsToProcess[0];", "+\t\t\tICompilationUnit unit = (ICompilationUnit) copy.getOriginalElement();", "+\t\t\tIBuffer buffer = copy.getBuffer();", "+\t\t\tif (buffer  == null) { ", "+\t\t\t\treturn;", "+\t\t\tchar[] bufferContents = buffer.getCharacters();", "+\t\t\tString result = processElement(unit, positions, bufferContents);", "+\t\t\tif (!CharOperation.equals(result.toCharArray(), bufferContents)) {", "+\t\t\t\tcopy.getBuffer().setContents(result);", "+\t\t\t}", "+\t\t\tworked(1);"]}], "num": 63851}