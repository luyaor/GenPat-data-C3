{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6e87741e46bde951c89acf8ff5fcbf36", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b75689acd594421b7dc4e7433e0f86a1", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core.tests.model/src/org/eclipse/jdt/core/tests/formatter/FormatterMassiveRegressionTests.java", "commitBeforeChange": "6b6471423b89c70a33d53654f3143292c15724dc", "commitAfterChange": "dbb5484f1c0506305bb2de3acc0db3501ec7c329", "methodNumberBeforeChange": 4, "methodNumberAfterChange": 5, "signatureBeforeChange": "  public static Test suite()", "signatureAfterChange": "  protected static Test suite(File inputDir, String profile, Map directories)", "diff": ["-\tTestSuite suite = new Suite(FormatterMassiveRegressionTests.class.getName());", "+protected static Test suite(File inputDir, String profile, Map directories) {", "+", "+\tString name = \"FormatterMassiveRegressionTests on \"+inputDir.getName();", "+\tif (profile == null || profile.length() == 0) {", "+\t\tname += \" \" + profile;", "+\t}", "+\tTestSuite suite = new Suite(name);", "-\t\tStringBuffer buffer = new StringBuffer();", "-\t\tinitVersion(buffer);", "-\t\t", "+\t\tinitVersion();", "+", "-\t\tinitProfiles(buffer);", "+\t\tint profiles = initProfiles(profile);", "-\t\t// Log date of test", "-\t\tlong start = System.currentTimeMillis();", "-\t\tSimpleDateFormat format = new SimpleDateFormat();", "-\t\tDate now = new Date(start);", "-\t\tbuffer.append(\"Test date : \");", "-\t\tbuffer.append(format.format(now));", "-\t\tbuffer.append(LINE_SEPARATOR);", "-", "-\t\t// Get input dir", "-\t\tbuffer.append(\"Input dir : \");", "-\t\tbuffer.append(INPUT_DIR);", "-", "-\t\t// Output to console to show startup", "-\t\tString firstBuffer = buffer.toString();", "-\t\tSystem.out.println(firstBuffer);", "-\t\tbuffer.setLength(0);", "+\t\t// Init directories", "+\t\tinitDirectories(inputDir, profiles);", "-\t\tFile[] allFiles = ModelTestsUtil.getAllFiles(INPUT_DIR, filter);", "+\t\tFile[] allFiles = (File[]) directories.get(inputDir);", "+\t\tif (allFiles == null) {", "+\t\t\tSystem.out.print(\"Get all files from \"+inputDir+\"...\");", "+\t\t\tallFiles = ModelTestsUtil.getAllFiles(inputDir, filter);", "+\t\t\tdirectories.put(inputDir, allFiles);", "+\t\t\tSystem.out.println(\"done\");", "+\t\t}", "-\t\tbuffer.append(\"            \");", "-\t\tbuffer.append(MAX_FILES);", "-\t\tbuffer.append(\" java files found\");", "-\t\tbuffer.append(LINE_SEPARATOR);", "-\t\t// Init directories", "-\t\tinitDirectories(buffer);", "-//\t\tbuffer.append(\"Compare vs: \");", "-\t\tif (CAN_COMPARE) {", "-\t\t\tif (CLEAN) {", "-//\t\t\t\tbuffer.append(JDT_CORE_VERSION);", "-\t\t\t} else {", "-\t\t\t\tbuffer.append(\"Compare vs: \");", "-\t\t\t\tFile versionFile = new File(OUTPUT_DIR, \"version.txt\");", "-\t\t\t\tif (versionFile.exists()) {", "-\t\t\t\t\tString fileContent = Util.fileContent(versionFile.getAbsolutePath());", "-\t\t\t\t\tif (TEMP_OUTPUT != null) {", "-\t\t\t\t\t\tbuffer.append(TEMP_OUTPUT);", "-\t\t\t\t\t\tbuffer.append(\" on top of \");", "-\t\t\t\t\t}", "-\t\t\t\t\tbuffer.append(fileContent);", "-\t\t\t\t} else {", "-\t\t\t\t\tbuffer.append(\"???\");", "-\t\t\t\t}", "-\t\t\t}", "-\t\t} else {", "-\t\t\tbuffer.append(\"Compare vs: none\");", "-\t\t}", "-", "-\t\t// Write logs", "-\t\tSystem.out.println(buffer.toString());", "-\t\tif (LOG_STREAM != null) {", "-\t\t\tLOG_STREAM.println(firstBuffer);", "-\t\t\tLOG_STREAM.println(buffer.toString());", "-\t\t\tLOG_STREAM.flush();", "-\t\t}", "-\t\t", "-\t\tif (CLEAN) {", "-\t\t\tsuite.addTest(new FormatterMassiveRegressionTests());", "-//\t\t\tsuite.addTest(new FormatterMassiveRegressionTests(allFiles));", "-\t\t}", "-\t\t", "+//\t\tif (CLEAN) {", "+//\t\t\tsuite.addTest(new FormatterMassiveRegressionTests(profiles));", "+//\t\t}", "+", "-\t\t\t\tsuite.addTest(new FormatterMassiveRegressionTests(allFiles[i], i, false/*do not compare while cleaning*/));", "+\t\t\t\tsuite.addTest(new FormatterMassiveRegressionTests(inputDir, allFiles[i], i, profiles, false/*do not compare while cleaning*/));", "-\t\t\t\tsuite.addTest(new FormatterMassiveRegressionTests(allFiles[i], i, CAN_COMPARE));", "+\t\t\t\tsuite.addTest(new FormatterMassiveRegressionTests(inputDir, allFiles[i], i, profiles, CAN_COMPARE));", "-    \t// skip", "+    \te.printStackTrace();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d251f88c0148594d36040734ed6e628b", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core.tests.model/src/org/eclipse/jdt/core/tests/model/JavaProjectTests.java", "commitBeforeChange": "066f1fe71d5d139e5a681c9aeece89fa867b71b7", "commitAfterChange": "39951c3ce9f26380d44e65dd4f0a9c708c89c0d1", "methodNumberBeforeChange": 56, "methodNumberAfterChange": 56, "signatureBeforeChange": " public void testUserLibrary() throws JavaModelException", "signatureAfterChange": " public void testUserLibrary() throws JavaModelException", "diff": ["-\tStringBuffer expected = new StringBuffer();", "-\texpected.append(\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\r\\n\");", "-\texpected.append(\"<userlibrary systemlibrary=\\\"false\\\" version=\\\"1\\\">\\r\\n\");", "-\texpected.append(\"\t<archive path=\\\"/tmp/test.jar\\\">\\r\\n\");", "-\texpected.append(\"\t\t<attributes>\\r\\n\");", "-\texpected.append(\"\t\t\t<attribute value=\\\"http://www.sample-url.org/doc/\\\" name=\\\"javadoc_location\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t\t<attribute value=\\\"/tmp\\\" name=\\\"org.eclipse.jdt.launching.CLASSPATH_ATTR_LIBRARY_PATH_ENTRY\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t</attributes>\\r\\n\");", "-\texpected.append(\"\t\t<accessrules>\\r\\n\");", "-\texpected.append(\"\t\t\t<accessrule kind=\\\"nonaccessible\\\" pattern=\\\"**/forbidden/**\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t\t<accessrule kind=\\\"discouraged\\\" pattern=\\\"**/discouraged/**\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t\t<accessrule kind=\\\"accessible\\\" pattern=\\\"**/accessible/**\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t</accessrules>\\r\\n\");", "-\texpected.append(\"\t</archive>\\r\\n\");", "-\texpected.append(\"\t<archive path=\\\"/tmp/test.jar\\\">\\r\\n\");", "-\texpected.append(\"\t\t<attributes>\\r\\n\");", "-\texpected.append(\"\t\t\t<attribute value=\\\"http://www.sample-url.org/doc/\\\" name=\\\"javadoc_location\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t\t<attribute value=\\\"/tmp\\\" name=\\\"org.eclipse.jdt.launching.CLASSPATH_ATTR_LIBRARY_PATH_ENTRY\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t</attributes>\\r\\n\");", "-\texpected.append(\"\t\t<accessrules>\\r\\n\");", "-\texpected.append(\"\t\t\t<accessrule kind=\\\"nonaccessible\\\" pattern=\\\"/org/eclipse/forbidden/**\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t\t<accessrule kind=\\\"discouraged\\\" pattern=\\\"/org/eclipse/discouraged/**\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t\t<accessrule kind=\\\"accessible\\\" pattern=\\\"/org/eclipse/accessible/**\\\"/>\\r\\n\");", "-\texpected.append(\"\t\t</accessrules>\\r\\n\");", "-\texpected.append(\"\t</archive>\\r\\n\");", "-\texpected.append(\"</userlibrary>\\r\\n\");", "-\tString expectedString = org.eclipse.jdt.core.tests.util.Util.convertToIndependantLineDelimiter(expected.toString());", "-\tassertEquals(\"Invalid library contents\", expectedString, org.eclipse.jdt.core.tests.util.Util.convertToIndependantLineDelimiter(libraryPreference));", "+", "+\tassertSourceEquals(", "+\t\t\"Invalid library contents\", ", "+\t\t\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\" + ", "+\t\t\"<userlibrary systemlibrary=\\\"false\\\" version=\\\"1\\\">\\n\" + ", "+\t\t\"\t<archive path=\\\"/tmp/test.jar\\\">\\n\" + ", "+\t\t\"\t\t<attributes>\\n\" + ", "+\t\t\"\t\t\t<attribute name=\\\"javadoc_location\\\" value=\\\"http://www.sample-url.org/doc/\\\"/>\\n\" + ", "+\t\t\"\t\t\t<attribute name=\\\"org.eclipse.jdt.launching.CLASSPATH_ATTR_LIBRARY_PATH_ENTRY\\\" value=\\\"/tmp\\\"/>\\n\" + ", "+\t\t\"\t\t</attributes>\\n\" + ", "+\t\t\"\t\t<accessrules>\\n\" + ", "+\t\t\"\t\t\t<accessrule kind=\\\"nonaccessible\\\" pattern=\\\"**/forbidden/**\\\"/>\\n\" + ", "+\t\t\"\t\t\t<accessrule kind=\\\"discouraged\\\" pattern=\\\"**/discouraged/**\\\"/>\\n\" + ", "+\t\t\"\t\t\t<accessrule kind=\\\"accessible\\\" pattern=\\\"**/accessible/**\\\"/>\\n\" + ", "+\t\t\"\t\t</accessrules>\\n\" + ", "+\t\t\"\t</archive>\\n\" + ", "+\t\t\"\t<archive path=\\\"/tmp/test.jar\\\">\\n\" + ", "+\t\t\"\t\t<attributes>\\n\" + ", "+\t\t\"\t\t\t<attribute name=\\\"javadoc_location\\\" value=\\\"http://www.sample-url.org/doc/\\\"/>\\n\" + ", "+\t\t\"\t\t\t<attribute name=\\\"org.eclipse.jdt.launching.CLASSPATH_ATTR_LIBRARY_PATH_ENTRY\\\" value=\\\"/tmp\\\"/>\\n\" + ", "+\t\t\"\t\t</attributes>\\n\" + ", "+\t\t\"\t\t<accessrules>\\n\" + ", "+\t\t\"\t\t\t<accessrule kind=\\\"nonaccessible\\\" pattern=\\\"/org/eclipse/forbidden/**\\\"/>\\n\" + ", "+\t\t\"\t\t\t<accessrule kind=\\\"discouraged\\\" pattern=\\\"/org/eclipse/discouraged/**\\\"/>\\n\" + ", "+\t\t\"\t\t\t<accessrule kind=\\\"accessible\\\" pattern=\\\"/org/eclipse/accessible/**\\\"/>\\n\" + ", "+\t\t\"\t\t</accessrules>\\n\" + ", "+\t\t\"\t</archive>\\n\" + ", "+\t\t\"</userlibrary>\\n\", ", "+\t\tlibraryPreference);"]}], "num": 8235}