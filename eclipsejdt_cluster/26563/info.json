{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bc7b412038e5ee1f3a0c58a12ce216f0", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8e2e4a058058567ed5ebce445edb3e12", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/builder/IncrementalImageBuilder.java", "commitBeforeChange": "1146476ca138da09c36a16ea64250a150f60b014", "commitAfterChange": "e3d3c02cc33fd5166184422215f4903c5a405e0f", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": "  protected void finishedWith(String sourceLocation, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException", "signatureAfterChange": "  protected void finishedWith(String sourceLocator, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException", "diff": ["-protected void finishedWith(String sourceLocation, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException {", "-\tchar[][] previousTypeNames = newState.getDefinedTypeNamesFor(sourceLocation);", "+protected void finishedWith(String sourceLocator, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException {", "+\tchar[][] previousTypeNames = newState.getDefinedTypeNamesFor(sourceLocator);", "-\tnext : for (int i = 0, x = previousTypeNames.length; i < x; i++) {", "+\tnext : for (int i = 0, l = previousTypeNames.length; i < l; i++) {", "-\t\tfor (int j = 0, y = definedTypeNames.size(); j < y; j++)", "+\t\tfor (int j = 0, m = definedTypeNames.size(); j < m; j++)", "-\t\tif (packagePath == null)", "-\t\t\tpackagePath = new Path(extractTypeNameFrom(sourceLocation)).removeLastSegments(1);", "+\t\tSourceFile sourceFile = (SourceFile) result.getCompilationUnit();", "+\t\tif (packagePath == null) {", "+\t\t\tint count = sourceFile.sourceLocation.sourceFolder.getFullPath().segmentCount();", "+\t\t\tpackagePath = sourceFile.resource.getFullPath().removeFirstSegments(count).removeLastSegments(1);", "+\t\t}", "-\t\t\tthis.secondaryTypesToRemove = new ArrayList();", "-\t\tsecondaryTypesToRemove.add(packagePath.append(new String(previous)));", "+\t\t\tthis.secondaryTypesToRemove = new SimpleLookupTable();", "+\t\tArrayList types = (ArrayList) secondaryTypesToRemove.get(sourceFile.sourceLocation.binaryFolder);", "+\t\tif (types == null)", "+\t\t\ttypes = new ArrayList(definedTypeNames.size());", "+\t\ttypes.add(packagePath.append(new String(previous)));", "+\t\tsecondaryTypesToRemove.put(sourceFile.sourceLocation.binaryFolder, types);", "-\tsuper.finishedWith(sourceLocation, result, mainTypeName, definedTypeNames, duplicateTypeNames);", "+\tsuper.finishedWith(sourceLocator, result, mainTypeName, definedTypeNames, duplicateTypeNames);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fb74be691bca7ed79aeb930cdf08a9c8", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/newbuilder/IncrementalImageBuilder.java", "commitBeforeChange": "4e88e1625bb1c2659a2ee4ba931e466f5126f9f4", "commitAfterChange": "075da32620f3ceb13a370a8be8550de2baf091f1", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 9, "signatureBeforeChange": "\r \r protected void finishedWith(String location, CompilationResult result, char[][] additionalTypeNames) throws CoreException", "signatureAfterChange": "\r \r protected void finishedWith(String sourceLocation, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException", "diff": ["-protected void finishedWith(String location, CompilationResult result, char[][] additionalTypeNames) throws CoreException {\r", "-\tchar[][] previousTypeNames = (char[][]) newState.getAdditionalTypeNamesFor(location);\r", "-\tif (previousTypeNames != null) {\r", "-\t\tnext : for (int i = 0, x = previousTypeNames.length; i < x; i++) {\r", "-\t\t\tchar[] previous = previousTypeNames[i];\r", "-\t\t\tfor (int j = 0, y = additionalTypeNames.length; j < y; j++)\r", "-\t\t\t\tif (CharOperation.equals(previous, additionalTypeNames[j])) continue next;\r", "+protected void finishedWith(String sourceLocation, CompilationResult result, char[] mainTypeName, ArrayList definedTypeNames, ArrayList duplicateTypeNames) throws CoreException {\r", "+\tchar[][] previousTypeNames = (char[][]) newState.getDefinedTypeNamesFor(sourceLocation);\r", "+\tif (previousTypeNames == null)\r", "+\t\tpreviousTypeNames = new char[][] {mainTypeName};\r", "+\tIPath packagePath = null;\r", "+\tnext : for (int i = 0, x = previousTypeNames.length; i < x; i++) {\r", "+\t\tchar[] previous = previousTypeNames[i];\r", "+\t\tfor (int j = 0, y = definedTypeNames.size(); j < y; j++)\r", "+\t\t\tif (CharOperation.equals(previous, (char[]) definedTypeNames.get(j)))\r", "+\t\t\t\tcontinue next;\r", "-\t\t\tIPath path = new Path(location);\r", "-\t\t\tpath = path.removeLastSegments(1).append(new String(previous)).addFileExtension(JavaBuilder.CLASS_EXTENSION);\r", "-\t\t\tIResource resource = javaBuilder.workspaceRoot.getFileForLocation(path);\r", "-\t\t\tresource.delete(true, null);\r", "-\t\t}\r", "+\t\tif (packagePath == null)\r", "+\t\t\tpackagePath = new Path(extractTypeNameFrom(sourceLocation)).removeLastSegments(1);\r", "+\t\tremoveClassFile(packagePath.append(new String(previous)));\r", "-\tsuper.finishedWith(location, result, additionalTypeNames);\r", "+\tsuper.finishedWith(sourceLocation, result, mainTypeName, definedTypeNames, duplicateTypeNames);\r"]}], "num": 26563}