{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "23fba550dbb0d5824eacc31475b3bd70", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1305b1453de8e13f4aecbb5b8c273b21", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ClassFile.java", "commitBeforeChange": "030eb4fda54a6751c1b822374d11bd8e8163881c", "commitAfterChange": "ec1201be6eb9490fec9fdaa6f4ea5d677aacc407", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": " \tpublic void addAttributes()", "signatureAfterChange": " \tpublic void addAttributes()", "diff": ["-\t\t\t// check that there is enough space to write all the bytes for the field info corresponding", "-\t\t\t// to the @fieldBinding", "-\t\t\tif (this.contentsOffset + 8 >= this.contents.length) {", "-\t\t\t\tresizeContents(8);", "-\t\t\t}", "-\t\t\tint sourceAttributeNameIndex =", "-\t\t\t\tthis.constantPool.literalIndex(AttributeNamesConstants.SourceName);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (sourceAttributeNameIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) sourceAttributeNameIndex;", "-\t\t\t// The length of a source file attribute is 2. This is a fixed-length", "-\t\t\t// attribute", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 2;", "-\t\t\t// write the source file name", "-\t\t\tint fileNameIndex = this.constantPool.literalIndex(fullFileName.toCharArray());", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (fileNameIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) fileNameIndex;", "-\t\t\tattributesNumber++;", "+\t\t\tattributesNumber += generateSourceAttribute(fullFileName);", "-\t\t\tif (this.contentsOffset + 6 >= this.contents.length) {", "-\t\t\t\tresizeContents(6);", "-\t\t\t}", "-\t\t\tint deprecatedAttributeNameIndex =", "-\t\t\t\tthis.constantPool.literalIndex(AttributeNamesConstants.DeprecatedName);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (deprecatedAttributeNameIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) deprecatedAttributeNameIndex;", "-\t\t\t// the length of a deprecated attribute is equals to 0", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tattributesNumber++;", "+\t\t\tattributesNumber += generateDeprecatedAttribute();", "-\t\t\t// check that there is enough space to write all the bytes for the field info corresponding", "-\t\t\t// to the @fieldBinding", "-\t\t\tif (this.contentsOffset + 8 >= this.contents.length) {", "-\t\t\t\tresizeContents(8);", "-\t\t\t}", "-\t\t\tint signatureAttributeNameIndex =", "-\t\t\t\tthis.constantPool.literalIndex(AttributeNamesConstants.SignatureName);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (signatureAttributeNameIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) signatureAttributeNameIndex;", "-\t\t\t// the length of a signature attribute is equals to 2", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 2;", "-\t\t\tint signatureIndex =", "-\t\t\t\tthis.constantPool.literalIndex(genericSignature);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (signatureIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) signatureIndex;", "-\t\t\tattributesNumber++;", "+\t\t\tattributesNumber += generateSignatureAttribute(genericSignature);", "-\t\t\tif (this.contentsOffset + 10 >= this.contents.length) {", "-\t\t\t\tresizeContents(10);", "-\t\t\t}", "-\t\t\tint enclosingMethodAttributeNameIndex =", "-\t\t\t\tthis.constantPool.literalIndex(AttributeNamesConstants.EnclosingMethodName);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (enclosingMethodAttributeNameIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) enclosingMethodAttributeNameIndex;", "-\t\t\t// the length of a signature attribute is equals to 2", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 4;", "-", "-\t\t\tint enclosingTypeIndex = this.constantPool.literalIndexForType(this.referenceBinding.enclosingType().constantPoolName());", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (enclosingTypeIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) enclosingTypeIndex;", "-\t\t\tbyte methodIndexByte1 = 0;", "-\t\t\tbyte methodIndexByte2 = 0;", "-\t\t\tif (this.referenceBinding instanceof LocalTypeBinding) {", "-\t\t\t\tMethodBinding methodBinding = ((LocalTypeBinding) this.referenceBinding).enclosingMethod;", "-\t\t\t\tif (methodBinding != null) {", "-\t\t\t\t\tint enclosingMethodIndex = this.constantPool.literalIndexForNameAndType(methodBinding.selector, methodBinding.signature(this));", "-\t\t\t\t\tmethodIndexByte1 = (byte) (enclosingMethodIndex >> 8);", "-\t\t\t\t\tmethodIndexByte2 = (byte) enclosingMethodIndex;", "-\t\t\t\t}", "-\t\t\t}", "-\t\t\tthis.contents[this.contentsOffset++] = methodIndexByte1;", "-\t\t\tthis.contents[this.contentsOffset++] = methodIndexByte2;", "-\t\t\tattributesNumber++;", "+\t\t\tattributesNumber += generateEnclosingMethodAttribute();", "-\t\t\t// add an attribute for inconsistent hierarchy", "-\t\t\tif (this.contentsOffset + 6 >= this.contents.length) {", "-\t\t\t\tresizeContents(6);", "-\t\t\t}", "-\t\t\tint inconsistentHierarchyNameIndex =", "-\t\t\t\tthis.constantPool.literalIndex(AttributeNamesConstants.InconsistentHierarchy);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (inconsistentHierarchyNameIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) inconsistentHierarchyNameIndex;", "-\t\t\t// the length of an inconsistent hierarchy attribute is equals to 0", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\tattributesNumber++;", "+\t\t\tattributesNumber += generateHierarchyInconsistentAttribute();", "-\t\t\t// Generate the inner class attribute", "-\t\t\tint exSize = 8 * numberOfInnerClasses + 8;", "-\t\t\tif (exSize + this.contentsOffset >= this.contents.length) {", "-\t\t\t\tresizeContents(exSize);", "-\t\t\t}", "-\t\t\t// Now we now the size of the attribute and the number of entries", "-\t\t\t// attribute name", "-\t\t\tint attributeNameIndex =", "-\t\t\t\tthis.constantPool.literalIndex(AttributeNamesConstants.InnerClassName);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (attributeNameIndex >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) attributeNameIndex;", "-\t\t\tint value = (numberOfInnerClasses << 3) + 2;", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (value >> 24);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (value >> 16);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (value >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) value;", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) (numberOfInnerClasses >> 8);", "-\t\t\tthis.contents[this.contentsOffset++] = (byte) numberOfInnerClasses;", "-\t\t\tfor (int i = 0; i < numberOfInnerClasses; i++) {", "-\t\t\t\tReferenceBinding innerClass = innerClasses[i];", "-\t\t\t\tint accessFlags = innerClass.getAccessFlags();", "-\t\t\t\tint innerClassIndex = this.constantPool.literalIndexForType(innerClass.constantPoolName());", "-\t\t\t\t// inner class index", "-\t\t\t\tthis.contents[this.contentsOffset++] = (byte) (innerClassIndex >> 8);", "-\t\t\t\tthis.contents[this.contentsOffset++] = (byte) innerClassIndex;", "-\t\t\t\t// outer class index: anonymous and local have no outer class index", "-\t\t\t\tif (innerClass.isMemberType()) {", "-\t\t\t\t\t// member or member of local", "-\t\t\t\t\tint outerClassIndex = this.constantPool.literalIndexForType(innerClass.enclosingType().constantPoolName());", "-\t\t\t\t\tthis.contents[this.contentsOffset++] = (byte) (outerClassIndex >> 8);", "-\t\t\t\t\tthis.contents[this.contentsOffset++] = (byte) outerClassIndex;", "-\t\t\t\t} else {", "-\t\t\t\t\t// equals to 0 if the innerClass is not a member type", "-\t\t\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\t\t}", "-\t\t\t\t// name index", "-\t\t\t\tif (!innerClass.isAnonymousType()) {", "-\t\t\t\t\tint nameIndex = this.constantPool.literalIndex(innerClass.sourceName());", "-\t\t\t\t\tthis.contents[this.contentsOffset++] = (byte) (nameIndex >> 8);", "-\t\t\t\t\tthis.contents[this.contentsOffset++] = (byte) nameIndex;", "-\t\t\t\t} else {", "-\t\t\t\t\t// equals to 0 if the innerClass is an anonymous type", "-\t\t\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\t\t\tthis.contents[this.contentsOffset++] = 0;", "-\t\t\t\t}", "-\t\t\t\t// access flag", "-\t\t\t\tif (innerClass.isAnonymousType()) {", "-\t\t\t\t\taccessFlags &= ~ClassFileConstants.AccFinal;", "-\t\t\t\t} else if (innerClass.isMemberType() && innerClass.isInterface()) {", "-\t\t\t\t\taccessFlags |= ClassFileConstants.AccStatic; // implicitely static", "-\t\t\t\t}", "-\t\t\t\tthis.contents[this.contentsOffset++] = (byte) (accessFlags >> 8);", "-\t\t\t\tthis.contents[this.contentsOffset++] = (byte) accessFlags;", "-\t\t\t}", "-\t\t\tattributesNumber++;", "+\t\t\tattributesNumber += generateInnerClassAttribute(numberOfInnerClasses, innerClasses);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ddc0d6b9e311c5cba85652cd37843088", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ClassFile.java", "commitBeforeChange": "432a9d5974b55509eb3dfbf8ecd190ef7ce8af61", "commitAfterChange": "6babe48369a471c3e35e8fc01b1af25fdd70c8bf", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " \tpublic void addAttributes()", "signatureAfterChange": " \tpublic void addAttributes()", "diff": ["-\t\t// Inner class attribute", "-\t\tif (numberOfInnerClasses != 0) {", "-\t\t\t// Generate the inner class attribute", "-\t\t\tint exSize = 8 * numberOfInnerClasses + 8;", "-\t\t\tif (exSize + contentsOffset >= this.contents.length) {", "-\t\t\t\tresizeContents(exSize);", "-\t\t\t}", "-\t\t\t// Now we now the size of the attribute and the number of entries", "-\t\t\t// attribute name", "-\t\t\tint attributeNameIndex =", "-\t\t\t\tconstantPool.literalIndex(AttributeNamesConstants.InnerClassName);", "-\t\t\tcontents[contentsOffset++] = (byte) (attributeNameIndex >> 8);", "-\t\t\tcontents[contentsOffset++] = (byte) attributeNameIndex;", "-\t\t\tint value = (numberOfInnerClasses << 3) + 2;", "-\t\t\tcontents[contentsOffset++] = (byte) (value >> 24);", "-\t\t\tcontents[contentsOffset++] = (byte) (value >> 16);", "-\t\t\tcontents[contentsOffset++] = (byte) (value >> 8);", "-\t\t\tcontents[contentsOffset++] = (byte) value;", "-\t\t\tcontents[contentsOffset++] = (byte) (numberOfInnerClasses >> 8);", "-\t\t\tcontents[contentsOffset++] = (byte) numberOfInnerClasses;", "-\t\t\tfor (int i = 0; i < numberOfInnerClasses; i++) {", "-\t\t\t\tReferenceBinding innerClass = innerClassesBindings[i];", "-\t\t\t\tint accessFlags = innerClass.getAccessFlags();", "-\t\t\t\tint innerClassIndex = constantPool.literalIndexForType(innerClass.constantPoolName());", "-\t\t\t\t// inner class index", "-\t\t\t\tcontents[contentsOffset++] = (byte) (innerClassIndex >> 8);", "-\t\t\t\tcontents[contentsOffset++] = (byte) innerClassIndex;", "-\t\t\t\t// outer class index: anonymous and local have no outer class index", "-\t\t\t\tif (innerClass.isMemberType()) {", "-\t\t\t\t\t// member or member of local", "-\t\t\t\t\tint outerClassIndex = constantPool.literalIndexForType(innerClass.enclosingType().constantPoolName());", "-\t\t\t\t\tcontents[contentsOffset++] = (byte) (outerClassIndex >> 8);", "-\t\t\t\t\tcontents[contentsOffset++] = (byte) outerClassIndex;", "-\t\t\t\t} else {", "-\t\t\t\t\t// equals to 0 if the innerClass is not a member type", "-\t\t\t\t\tcontents[contentsOffset++] = 0;", "-\t\t\t\t\tcontents[contentsOffset++] = 0;", "-\t\t\t\t}", "-\t\t\t\t// name index", "-\t\t\t\tif (!innerClass.isAnonymousType()) {", "-\t\t\t\t\tint nameIndex = constantPool.literalIndex(innerClass.sourceName());", "-\t\t\t\t\tcontents[contentsOffset++] = (byte) (nameIndex >> 8);", "-\t\t\t\t\tcontents[contentsOffset++] = (byte) nameIndex;", "-\t\t\t\t} else {", "-\t\t\t\t\t// equals to 0 if the innerClass is an anonymous type", "-\t\t\t\t\tcontents[contentsOffset++] = 0;", "-\t\t\t\t\tcontents[contentsOffset++] = 0;", "-\t\t\t\t}", "-\t\t\t\t// access flag", "-\t\t\t\tif (innerClass.isAnonymousType()) {", "-\t\t\t\t\taccessFlags &= ~ClassFileConstants.AccFinal;", "-\t\t\t\t} else if (innerClass.isMemberType() && innerClass.isInterface()) {", "-\t\t\t\t\taccessFlags |= ClassFileConstants.AccStatic; // implicitely static", "-\t\t\t\t}", "-\t\t\t\tcontents[contentsOffset++] = (byte) (accessFlags >> 8);", "-\t\t\t\tcontents[contentsOffset++] = (byte) accessFlags;", "-\t\t\t}", "-\t\t\tattributeNumber++;", "-\t\t}", "-\t\t\t\t\tint enclosingMethodIndex = constantPool.literalIndexForNameAndType(methodBinding.selector, methodBinding.signature());", "+\t\t\t\t\tint enclosingMethodIndex = constantPool.literalIndexForNameAndType(methodBinding.selector, methodBinding.signature(this));", "+\t\t\tattributeNumber++;", "+\t\t}", "+\t\t// Inner class attribute", "+\t\tint numberOfInnerClasses = this.innerClassesBindings == null ? 0 : this.innerClassesBindings.size();", "+\t\tif (numberOfInnerClasses != 0) {", "+\t\t\tReferenceBinding[] innerClasses = new ReferenceBinding[numberOfInnerClasses];", "+\t\t\tthis.innerClassesBindings.toArray(innerClasses);", "+\t\t\tArrays.sort(innerClasses, new Comparator() {", "+\t\t\t\tpublic int compare(Object o1, Object o2) {", "+\t\t\t\t\tTypeBinding binding1 = (TypeBinding) o1;", "+\t\t\t\t\tTypeBinding binding2 = (TypeBinding) o2;", "+\t\t\t\t\treturn CharOperation.compareTo(binding1.constantPoolName(), binding2.constantPoolName());", "+\t\t\t\t}", "+\t\t\t});", "+\t\t\t// Generate the inner class attribute", "+\t\t\tint exSize = 8 * numberOfInnerClasses + 8;", "+\t\t\tif (exSize + contentsOffset >= this.contents.length) {", "+\t\t\t\tresizeContents(exSize);", "+\t\t\t}", "+\t\t\t// Now we now the size of the attribute and the number of entries", "+\t\t\t// attribute name", "+\t\t\tint attributeNameIndex =", "+\t\t\t\tconstantPool.literalIndex(AttributeNamesConstants.InnerClassName);", "+\t\t\tcontents[contentsOffset++] = (byte) (attributeNameIndex >> 8);", "+\t\t\tcontents[contentsOffset++] = (byte) attributeNameIndex;", "+\t\t\tint value = (numberOfInnerClasses << 3) + 2;", "+\t\t\tcontents[contentsOffset++] = (byte) (value >> 24);", "+\t\t\tcontents[contentsOffset++] = (byte) (value >> 16);", "+\t\t\tcontents[contentsOffset++] = (byte) (value >> 8);", "+\t\t\tcontents[contentsOffset++] = (byte) value;", "+\t\t\tcontents[contentsOffset++] = (byte) (numberOfInnerClasses >> 8);", "+\t\t\tcontents[contentsOffset++] = (byte) numberOfInnerClasses;", "+\t\t\tfor (int i = 0; i < numberOfInnerClasses; i++) {", "+\t\t\t\tReferenceBinding innerClass = innerClasses[i];", "+\t\t\t\tint accessFlags = innerClass.getAccessFlags();", "+\t\t\t\tint innerClassIndex = constantPool.literalIndexForType(innerClass.constantPoolName());", "+\t\t\t\t// inner class index", "+\t\t\t\tcontents[contentsOffset++] = (byte) (innerClassIndex >> 8);", "+\t\t\t\tcontents[contentsOffset++] = (byte) innerClassIndex;", "+\t\t\t\t// outer class index: anonymous and local have no outer class index", "+\t\t\t\tif (innerClass.isMemberType()) {", "+\t\t\t\t\t// member or member of local", "+\t\t\t\t\tint outerClassIndex = constantPool.literalIndexForType(innerClass.enclosingType().constantPoolName());", "+\t\t\t\t\tcontents[contentsOffset++] = (byte) (outerClassIndex >> 8);", "+\t\t\t\t\tcontents[contentsOffset++] = (byte) outerClassIndex;", "+\t\t\t\t} else {", "+\t\t\t\t\t// equals to 0 if the innerClass is not a member type", "+\t\t\t\t\tcontents[contentsOffset++] = 0;", "+\t\t\t\t\tcontents[contentsOffset++] = 0;", "+\t\t\t\t}", "+\t\t\t\t// name index", "+\t\t\t\tif (!innerClass.isAnonymousType()) {", "+\t\t\t\t\tint nameIndex = constantPool.literalIndex(innerClass.sourceName());", "+\t\t\t\t\tcontents[contentsOffset++] = (byte) (nameIndex >> 8);", "+\t\t\t\t\tcontents[contentsOffset++] = (byte) nameIndex;", "+\t\t\t\t} else {", "+\t\t\t\t\t// equals to 0 if the innerClass is an anonymous type", "+\t\t\t\t\tcontents[contentsOffset++] = 0;", "+\t\t\t\t\tcontents[contentsOffset++] = 0;", "+\t\t\t\t}", "+\t\t\t\t// access flag", "+\t\t\t\tif (innerClass.isAnonymousType()) {", "+\t\t\t\t\taccessFlags &= ~ClassFileConstants.AccFinal;", "+\t\t\t\t} else if (innerClass.isMemberType() && innerClass.isInterface()) {", "+\t\t\t\t\taccessFlags |= ClassFileConstants.AccStatic; // implicitely static", "+\t\t\t\t}", "+\t\t\t\tcontents[contentsOffset++] = (byte) (accessFlags >> 8);", "+\t\t\t\tcontents[contentsOffset++] = (byte) accessFlags;", "+\t\t\t}"]}], "num": 44641}