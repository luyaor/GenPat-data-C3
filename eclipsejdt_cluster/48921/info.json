{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "3adfda95d946d5a4b2c41706c83148b6", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "412449249b243318035d9f94f7936947", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/util/FactoryPathUtil.java", "commitBeforeChange": "5ff67d71c0cb8b9ac702a6eb36f9238b4071b76d", "commitAfterChange": "6e1daeed1b338c470552c705d4bce7d654dc9164", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 11, "signatureBeforeChange": " \tpublic static Map<FactoryContainer, Boolean> getAllPluginFactoryContainers()", "signatureAfterChange": " \tpublic static synchronized Map<FactoryContainer, Boolean> getAllPluginFactoryContainers()", "diff": ["-\t */", "-\tpublic static Map<FactoryContainer, Boolean> getAllPluginFactoryContainers()", "-\t{", "-\t\tclass PluginContents {", "-\t\t\tpublic final PluginFactoryContainer fc;", "-\t\t\tpublic final boolean b;", "-\t\t\tpublic PluginContents(PluginFactoryContainer fc, boolean b) {", "-\t\t\t\tthis.fc = fc;", "-\t\t\t\tthis.b = b;", "-\t\t\t}", "-\t\t}", "-\t\t", "-\t\t// We want the list of plugins to be uniqued and alphabetically sorted.", "-\t\tMap<String, PluginContents> plugins = ", "-\t\t\tnew TreeMap<String, PluginContents>();", "-\t", "-\t\tIExtensionPoint extensionPoint = Platform.getExtensionRegistry().getExtensionPoint(", "-\t\t\t\tAptPlugin.PLUGIN_ID, // name of plugin that exposes this extension point", "-\t\t\t\t\"annotationProcessorFactory\"); //$NON-NLS-1$ - extension id", "-", "-\t\t// Iterate over all declared extensions of this extension point.  ", "-\t\t// A single plugin may extend the extension point more than once, although it's not recommended.", "-\t\tfor (IExtension extension : extensionPoint.getExtensions())", "-\t\t{", "-\t\t\t// getNamespace() returns the plugin id", "-\t\t\tString pluginId = extension.getNamespace();", "-\t\t\t// Iterate over the children of the extension to find one named \"factories\".", "-\t\t\tfor(IConfigurationElement factories : extension.getConfigurationElements())", "-\t\t\t{", "-\t\t\t\tif (!\"factories\".equals(factories.getName())) { //$NON-NLS-1$ - name of configElement ", "-\t\t\t\t\tcontinue;", "-\t\t\t\t}", "-\t\t\t\t// Get enableDefault.  If the attribute is missing, default to true.", "-\t\t\t\tString enableDefaultStr = factories.getAttribute(\"enableDefault\"); //$NON-NLS-1$", "-\t\t\t\tboolean enableDefault = true;", "-\t\t\t\tif (\"false\".equals(enableDefaultStr)) { //$NON-NLS-1$", "-\t\t\t\t\tenableDefault = false;", "-\t\t\t\t}", "-\t\t\t\t// Iterate over the children of the \"factories\" element to find all the ones named \"factory\".", "-\t\t\t\tfor (IConfigurationElement factory : factories.getChildren()) {", "-\t\t\t\t\tif (!\"factory\".equals(factory.getName())) { //$NON-NLS-1$", "-\t\t\t\t\t\tcontinue;", "-\t\t\t\t\t}", "-\t\t\t\t\tPluginContents pc = plugins.get(pluginId);", "-\t\t\t\t\tif ( pc == null )", "-\t\t\t\t\t{", "-\t\t\t\t\t\tPluginFactoryContainer fc = new PluginFactoryContainer(pluginId);", "-\t\t\t\t\t\tpc = new PluginContents(fc, enableDefault);", "-\t\t\t\t\t\tplugins.put( pluginId, pc );", "-\t\t\t\t\t}", "-\t\t\t\t\tpc.fc.addFactoryName( factory.getAttribute(\"class\") ); //$NON-NLS-1$", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "-\t\tMap<FactoryContainer, Boolean> map = new LinkedHashMap<FactoryContainer, Boolean>();", "-\t\tfor (PluginContents pc : plugins.values()) {", "-\t\t\tmap.put(pc.fc, new Boolean(pc.b));", "-\t\t}", "-\t\treturn map;", "-\t}", "+\t */", "+\tpublic static synchronized Map<FactoryContainer, Boolean> getAllPluginFactoryContainers()", "+\t{", "+\t\tMap<FactoryContainer, Boolean> map = new LinkedHashMap<FactoryContainer, Boolean>();", "+\t\tfor (PluginFactoryContainer pfc : PLUGIN_CONTAINER_MAP.values()) {", "+\t\t\tmap.put(pfc, pfc.getEnableDefault());", "+\t\t}", "+\t\treturn map;", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "57537b0074b42beaf3a8c0b139497013", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/util/FactoryPathUtil.java", "commitBeforeChange": "b8409b2c5761cb2e6dbcdfc3bef92e6e755d2aa7", "commitAfterChange": "e968b992e38be58d07a46d70f656322d8b2edb33", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": " \tpublic static List<PluginFactoryContainer> getAllPluginFactoryContainers()", "signatureAfterChange": " \tpublic static Map<FactoryContainer, Boolean> getAllPluginFactoryContainers()", "diff": ["-\tpublic static List<PluginFactoryContainer> getAllPluginFactoryContainers()", "+\tpublic static Map<FactoryContainer, Boolean> getAllPluginFactoryContainers()", "+\t\tclass PluginContents {", "+\t\t\tpublic final PluginFactoryContainer fc;", "+\t\t\tpublic final boolean b;", "+\t\t\tpublic PluginContents(PluginFactoryContainer fc, boolean b) {", "+\t\t\t\tthis.fc = fc;", "+\t\t\t\tthis.b = b;", "+\t\t\t}", "+\t\t}", "+\t\t", "-\t\tMap<String, PluginFactoryContainer> containers = ", "-\t\t\tnew TreeMap<String, PluginFactoryContainer>();", "+\t\tMap<String, PluginContents> plugins = ", "+\t\t\tnew TreeMap<String, PluginContents>();", "-\t\tIExtensionPoint extension = Platform.getExtensionRegistry().getExtensionPoint(", "-\t\t\t\t\"org.eclipse.jdt.apt.core\",  //$NON-NLS-1$ - name of plugin that exposes this extension", "+\t\tIExtensionPoint extensionPoint = Platform.getExtensionRegistry().getExtensionPoint(", "+\t\t\t\tAptPlugin.PLUGIN_ID, // name of plugin that exposes this extension point", "-\t\tIExtension[] extensions =  extension.getExtensions();", "-\t\t// A single plugin may extend the extension point more than once.", "-\t\tfor(int i = 0; i < extensions.length; i++) ", "+\t\t// A single plugin may extend the extension point more than once, although it's not recommended.", "+\t\tfor (IExtension extension : extensionPoint.getExtensions())", "-\t\t\tIConfigurationElement [] configElements = extensions[i].getConfigurationElements();", "-\t\t\t// Iterate over all the factories in a single extension declaration.", "-\t\t\t// An extension may define more than one factory.", "-\t\t\tfor(int j = 0; j < configElements.length; j++)", "+\t\t\t// getNamespace() returns the plugin id", "+\t\t\tString pluginId = extension.getNamespace();", "+\t\t\t// Iterate over the children of the extension to find one named \"factories\".", "+\t\t\tfor(IConfigurationElement factories : extension.getConfigurationElements())", "-\t\t\t\tString elementName = configElements[j].getName();", "-\t\t\t\tif ( \"factory\".equals( elementName ) ) //$NON-NLS-1$ - name of configElement ", "-\t\t\t\t{ ", "-\t\t\t\t\tString pluginId = extensions[i].getNamespace();", "-\t\t\t\t\tPluginFactoryContainer container = containers.get(pluginId);", "-\t\t\t\t\tif ( container == null )", "-\t\t\t\t\t{", "-\t\t\t\t\t\t// getNamespace() returns the plugin id", "-\t\t\t\t\t\tcontainer = new PluginFactoryContainer(pluginId);", "-\t\t\t\t\t\tcontainers.put( pluginId, container );", "+\t\t\t\tif (!\"factories\".equals(factories.getName())) { //$NON-NLS-1$ - name of configElement ", "+\t\t\t\t\tcontinue;", "+\t\t\t\t}", "+\t\t\t\t// Get enableDefault.  If the attribute is missing, default to true.", "+\t\t\t\tString enableDefaultStr = factories.getAttribute(\"enableDefault\");", "+\t\t\t\tboolean enableDefault = true;", "+\t\t\t\tif (\"false\".equals(enableDefaultStr)) {", "+\t\t\t\t\tenableDefault = false;", "+\t\t\t\t}", "+\t\t\t\t// Iterate over the children of the \"factories\" element to find all the ones named \"factory\".", "+\t\t\t\tfor (IConfigurationElement factory : factories.getChildren()) {", "+\t\t\t\t\tif (!\"factory\".equals(factory.getName())) {", "+\t\t\t\t\t\tcontinue;", "-\t\t\t\t\tcontainer.addFactoryName( configElements[j].getAttribute(\"class\") );", "+\t\t\t\t\tPluginContents pc = plugins.get(pluginId);", "+\t\t\t\t\tif ( pc == null )", "+\t\t\t\t\t{", "+\t\t\t\t\t\tPluginFactoryContainer fc = new PluginFactoryContainer(pluginId);", "+\t\t\t\t\t\tpc = new PluginContents(fc, enableDefault);", "+\t\t\t\t\t\tplugins.put( pluginId, pc );", "+\t\t\t\t\t}", "+\t\t\t\t\tpc.fc.addFactoryName( factory.getAttribute(\"class\") );", "-\t\tList<PluginFactoryContainer> list = new ArrayList<PluginFactoryContainer>(containers.values());", "-\t\t", "-\t\treturn list;", "+\t\tMap<FactoryContainer, Boolean> map = new LinkedHashMap<FactoryContainer, Boolean>();", "+\t\tfor (PluginContents pc : plugins.values()) {", "+\t\t\tmap.put(pc.fc, new Boolean(pc.b));", "+\t\t}", "+\t\treturn map;"]}], "num": 48921}