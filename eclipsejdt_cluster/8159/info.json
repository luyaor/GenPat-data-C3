{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6b56fe4a456560e3d8722a363b551ecf", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6f7a6e28f702a9d350a9d92a0e8eec52", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/TypeBound.java", "commitBeforeChange": "ff2fe8665a4cc197831509bf8ec85eecac35f7cf", "commitAfterChange": "b035f7a4c467249c63cc869fd5f75e4bad8cf303", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " \t \tTypeBound(InferenceVariable inferenceVariable, TypeBinding typeBinding, int relation, boolean isSoft)", "signatureAfterChange": " \t \tTypeBound(InferenceVariable inferenceVariable, TypeBinding typeBinding, int relation, boolean isSoft)", "diff": ["+\t\tif (((inferenceVariable.tagBits | this.right.tagBits) & TagBits.AnnotationNullMASK) != 0) {", "+\t\t\tif ((inferenceVariable.tagBits & TagBits.AnnotationNullMASK) == (this.right.tagBits & TagBits.AnnotationNullMASK)) {", "+\t\t\t\t// strip off identical nullness on both sides:", "+\t\t\t\tthis.left = (InferenceVariable) inferenceVariable.withoutToplevelNullAnnotation();", "+\t\t\t\tthis.right = this.right.withoutToplevelNullAnnotation();", "+\t\t\t} else {", "+\t\t\t\tlong mask = 0;", "+\t\t\t\t// extract hint, e.g.: T#0 <: @NonNull Right  =>  T#0 hinted as @NonNull", "+\t\t\t\tswitch (relation) {", "+\t\t\t\t\tcase SAME: \t\tmask = TagBits.AnnotationNullMASK; break;", "+\t\t\t\t\tcase SUBTYPE: \tmask = TagBits.AnnotationNonNull; break;  // sub of @Nullable is irrelevant", "+\t\t\t\t\tcase SUPERTYPE: mask = TagBits.AnnotationNullable; break; // super of @NonNull is irrelevant", "+\t\t\t\t}", "+\t\t\t\tinferenceVariable.prototype().nullHints |= this.right.tagBits & mask;", "+\t\t\t}", "+\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c01493b6a54f7e26410bdcf609db4686", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/ParameterizedMethodBinding.java", "commitBeforeChange": "26ecbd70f644b3e526f4a51dee0b94e84d57cade", "commitAfterChange": "63af609b0c4ca15a76568f63423f1cb23d7be92e", "methodNumberBeforeChange": 0, "methodNumberAfterChange": 0, "signatureBeforeChange": " \tpublic ParameterizedMethodBinding(final ParameterizedTypeBinding parameterizedDeclaringClass, MethodBinding originalMethod)", "signatureAfterChange": " \tpublic ParameterizedMethodBinding(final ParameterizedTypeBinding parameterizedDeclaringClass, MethodBinding originalMethod)", "diff": ["+", "+\t\t\t// after substitution transfer nullness information from type annotations:", "+\t\t\tif (parameterizedDeclaringClass.environment.globalOptions.isAnnotationBasedNullAnalysisEnabled) {", "+\t\t\t\tlong returnNullBits = this.returnType.tagBits & TagBits.AnnotationNullMASK;", "+\t\t\t\tif (returnNullBits != 0L) {", "+\t\t\t\t\tthis.tagBits &= ~TagBits.AnnotationNullMASK;", "+\t\t\t\t\tthis.tagBits |= returnNullBits;", "+\t\t\t\t}", "+\t\t\t\tint parametersLen = this.parameters.length;", "+\t\t\t\tfor (int i=0; i<parametersLen; i++) {", "+\t\t\t\t\tlong paramTagBits = this.parameters[i].tagBits & TagBits.AnnotationNullMASK;", "+\t\t\t\t\tif (paramTagBits != 0) {", "+\t\t\t\t\t\tif (this.parameterNonNullness == null)", "+\t\t\t\t\t\t\tthis.parameterNonNullness = new Boolean[parametersLen];", "+\t\t\t\t\t\tthis.parameterNonNullness[i] = Boolean.valueOf(paramTagBits == TagBits.AnnotationNonNull);", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "feb9d21e72b619092b4ffe2998448bb1", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/SourceTypeBinding.java", "commitBeforeChange": "c7e61e314902d7cf48e71c1a1c0437bb40107c2e", "commitAfterChange": "8a1621e802c664e59aba36b8a87f59ae57902e37", "methodNumberBeforeChange": 46, "methodNumberAfterChange": 46, "signatureBeforeChange": " public MethodBinding resolveTypesFor(MethodBinding method)", "signatureAfterChange": " public MethodBinding resolveTypesFor(MethodBinding method)", "diff": ["+\t\tif (compilerOptions.sourceLevel >= ClassFileConstants.JDK1_8) {", "+\t\t\tlong nullTagBits = method.tagBits & TagBits.AnnotationNullMASK;", "+\t\t\tif (nullTagBits != (method.returnType.tagBits & TagBits.AnnotationNullMASK)) {", "+\t\t\t\tTypeReference returnTypeRef = ((MethodDeclaration)methodDecl).returnType;", "+\t\t\t\tif (method.returnType.isBaseType()) {", "+\t\t\t\t\tif (method.returnType.id != TypeIds.T_void)  // type annotations are *always* illegal for 'void'", "+\t\t\t\t\t\tthis.scope.problemReporter().illegalAnnotationForBaseType(returnTypeRef, methodDecl.annotations, nullTagBits);", "+\t\t\t\t} else {", "+\t\t\t\t\t// annotation was mistakenly associated to the method, create the annotated type now:", "+\t\t\t\t\tmethod.returnType = this.scope.environment().pushAnnotationIntoType(method.returnType, returnTypeRef, nullTagBits);", "+\t\t\t\t}", "+\t\t\t\tmethod.tagBits &= ~TagBits.AnnotationNullMASK;", "+\t\t\t}", "+\t\t}"]}], "num": 8159}