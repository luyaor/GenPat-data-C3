{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "28fe45fb648b4d8a966a471800ee3a15", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "185391f3c9f24ae3c6fe3ea59eaceb6e", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/dom/org/eclipse/jdt/core/dom/TypeBinding.java", "commitBeforeChange": "102c35a2a8562c276abba3a19ac61f3d18639af8", "commitAfterChange": "d020ac06f382c23053bc9e518001a91176eaef5f", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": " \tprivate JavaElement getUnresolvedJavaElement(org.eclipse.jdt.internal.compiler.lookup.TypeBinding typeBinding )", "signatureAfterChange": " \tprivate JavaElement getUnresolvedJavaElement(org.eclipse.jdt.internal.compiler.lookup.TypeBinding typeBinding )", "diff": ["-\t\t\t\tint lastSlash = CharOperation.lastIndexOf('/', fileName);", "-\t\t\t\tif (lastSlash == -1) ", "-\t\t\t\t\tlastSlash = CharOperation.lastIndexOf(File.separatorChar, fileName);", "-\t\t\t\tif (lastSlash <= jarSeparator) // if jarSeparator == -1 and there is no slash, lastSlash should be 0", "-\t\t\t\t\tlastSlash = jarSeparator+1;", "-\t\t\t\tIPackageFragment pkg = getPackageFragment(fileName, lastSlash, jarSeparator);", "+\t\t\t\tint pkgEnd = CharOperation.lastIndexOf('/', fileName); // pkgEnd is exclusive", "+\t\t\t\tif (pkgEnd == -1) ", "+\t\t\t\t\tpkgEnd = CharOperation.lastIndexOf(File.separatorChar, fileName);", "+\t\t\t\tif (jarSeparator != -1 && pkgEnd < jarSeparator) // if in a jar and no slash, it is a default package -> pkgEnd should be equal to jarSeparator", "+\t\t\t\t\tpkgEnd = jarSeparator;", "+\t\t\t\tif (pkgEnd == -1)", "+\t\t\t\t\treturn null;", "+\t\t\t\tIPackageFragment pkg = getPackageFragment(fileName, pkgEnd, jarSeparator);", "-\t\t\t\tlastSlash = CharOperation.lastIndexOf('/', constantPoolName);", "-\t\t\t\tchar[] classFileName = CharOperation.subarray(constantPoolName, lastSlash+1, constantPoolName.length);", "+\t\t\t\tpkgEnd = CharOperation.lastIndexOf('/', constantPoolName);", "+\t\t\t\tchar[] classFileName = CharOperation.subarray(constantPoolName, pkgEnd+1, constantPoolName.length);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "38dbfa5631476750056f29a329df4a64", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/dom/org/eclipse/jdt/core/dom/TypeBinding.java", "commitBeforeChange": "102c35a2a8562c276abba3a19ac61f3d18639af8", "commitAfterChange": "d020ac06f382c23053bc9e518001a91176eaef5f", "methodNumberBeforeChange": 3, "methodNumberAfterChange": 3, "signatureBeforeChange": " \tprivate IClassFile getClassFile(char[] fileName)", "signatureAfterChange": " \tprivate IClassFile getClassFile(char[] fileName)", "diff": ["-\t\tint lastSlash = CharOperation.lastIndexOf('/', fileName);", "-\t\tif (lastSlash == -1) ", "-\t\t\tlastSlash = CharOperation.lastIndexOf(File.separatorChar, fileName);", "-\t\tif (lastSlash <= jarSeparator) // if jarSeparator == -1 and there is no slash, lastSlash should be 0", "-\t\t\tlastSlash = jarSeparator+1;", "-\t\tIPackageFragment pkg = getPackageFragment(fileName, lastSlash, jarSeparator);", "+\t\tint pkgEnd = CharOperation.lastIndexOf('/', fileName); // pkgEnd is exclusive", "+\t\tif (pkgEnd == -1) ", "+\t\t\tpkgEnd = CharOperation.lastIndexOf(File.separatorChar, fileName);", "+\t\tif (jarSeparator != -1 && pkgEnd < jarSeparator) // if in a jar and no slash, it is a default package -> pkgEnd should be equal to jarSeparator", "+\t\t\tpkgEnd = jarSeparator;", "+\t\tif (pkgEnd == -1)", "+\t\t\treturn null;", "+\t\tIPackageFragment pkg = getPackageFragment(fileName, pkgEnd, jarSeparator);", "-\t\tint start = lastSlash == jarSeparator+1 ? lastSlash : lastSlash+1;", "-\t\treturn pkg.getClassFile(new String(fileName, start, fileName.length - start));", "+\t\tint start;", "+\t\treturn pkg.getClassFile(new String(fileName, start = pkgEnd + 1, fileName.length - start));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3fff6fb5d8b7b8b684ae3931a9162eb2", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/dom/org/eclipse/jdt/core/dom/TypeBinding.java", "commitBeforeChange": "38faf3efd9d7a9e66ede29f2210a34a5031698a0", "commitAfterChange": "102c35a2a8562c276abba3a19ac61f3d18639af8", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": " \tprivate JavaElement getUnresolvedJavaElement(org.eclipse.jdt.internal.compiler.lookup.TypeBinding typeBinding )", "signatureAfterChange": " \tprivate JavaElement getUnresolvedJavaElement(org.eclipse.jdt.internal.compiler.lookup.TypeBinding typeBinding )", "diff": ["-\t\tif (Util.isClassFileName(fileName)) {", "-\t\t\tClassFile classFile = (ClassFile) getClassFile(fileName);", "-\t\t\tif (classFile == null) return null;", "-\t\t\treturn (JavaElement) classFile.getType();", "-\t\t}", "+\t\t\tif (Util.isClassFileName(fileName)) {", "+\t\t\t\tint jarSeparator = CharOperation.indexOf(IDependent.JAR_FILE_ENTRY_SEPARATOR, fileName);", "+\t\t\t\tint lastSlash = CharOperation.lastIndexOf('/', fileName);", "+\t\t\t\tif (lastSlash == -1) ", "+\t\t\t\t\tlastSlash = CharOperation.lastIndexOf(File.separatorChar, fileName);", "+\t\t\t\tif (lastSlash <= jarSeparator) // if jarSeparator == -1 and there is no slash, lastSlash should be 0", "+\t\t\t\t\tlastSlash = jarSeparator+1;", "+\t\t\t\tIPackageFragment pkg = getPackageFragment(fileName, lastSlash, jarSeparator);", "+\t\t\t\tchar[] constantPoolName = referenceBinding.constantPoolName();", "+\t\t\t\tif (constantPoolName == null) {", "+\t\t\t\t\tClassFile classFile = (ClassFile) getClassFile(fileName);", "+\t\t\t\t\treturn classFile == null ? null : (JavaElement) classFile.getType();", "+\t\t\t\t}", "+\t\t\t\tlastSlash = CharOperation.lastIndexOf('/', constantPoolName);", "+\t\t\t\tchar[] classFileName = CharOperation.subarray(constantPoolName, lastSlash+1, constantPoolName.length);", "+\t\t\t\tClassFile classFile = (ClassFile) pkg.getClassFile(new String(classFileName) + SuffixConstants.SUFFIX_STRING_class);", "+\t\t\t\treturn (JavaElement) classFile.getType();", "+\t\t\t}", "+\t\t\t\tif (Util.isClassFileName(fileName)) {", "+\t\t\t\t\tClassFile classFile = (ClassFile) getClassFile(fileName);", "+\t\t\t\t\tif (classFile == null) return null;", "+\t\t\t\t\treturn (JavaElement) classFile.getType();", "+\t\t\t\t}"]}], "num": 43602}