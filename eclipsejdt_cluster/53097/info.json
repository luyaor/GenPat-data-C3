{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "0b07c38c3b6c47951707f31e412dba5f", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "735d8bfca07ecdcb9c980ea5cc36e37c", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CreateElementInCUOperation.java", "commitBeforeChange": "90d481edc9060cc498a8f085b08186108312e37b", "commitAfterChange": "f3a3c06f6e68ab7680c250209b9759ac3d56fec6", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 8, "signatureBeforeChange": " \tprotected void generateNewCompilationUnitDOM(ICompilationUnit cu) throws JavaModelException", "signatureAfterChange": " \tprotected void generateNewCompilationUnitAST(ICompilationUnit cu) throws JavaModelException", "diff": ["-    // TODO - JDOM - remove once model ported off of JDOM", "-\tprotected void generateNewCompilationUnitDOM(ICompilationUnit cu) throws JavaModelException {", "-\t\tIBuffer buffer = cu.getBuffer();", "-\t\tif (buffer == null) return;", "-\t\tchar[] prevSource = buffer.getCharacters();", "-\t\tif (prevSource == null) return;", "-\t\t// create a JDOM for the compilation unit", "-\t\tfCUDOM = (new DOMFactory()).createCompilationUnit(prevSource, cu.getElementName());", "-\t\tIDOMNode child = generateElementDOM();", "+\t */", "+\tprotected void generateNewCompilationUnitAST(ICompilationUnit cu) throws JavaModelException {", "+\t\tthis.cuAST = parse(cu);", "+\t\t", "+\t\tAST ast = this.cuAST.getAST();", "+\t\tASTRewrite rewriter = ASTRewrite.create(ast);", "+\t\tIDocument document = getDocument(cu);", "+\t\tASTNode child = generateElementAST(rewriter, document, cu);", "-\t\t\tinsertDOMNode(fCUDOM, child);", "+\t\t\tASTNode parent = ((JavaElement) getParentElement()).findNode(this.cuAST);", "+\t\t\tif (parent == null)", "+\t\t\t\tparent = this.cuAST;", "+\t\t\tinsertASTNode(rewriter, parent, child);", "+\t\t\tapply(rewriter, document);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e2f3b6f73bbe4c03228530c725ea327f", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CreateTypeMemberOperation.java", "commitBeforeChange": "90d481edc9060cc498a8f085b08186108312e37b", "commitAfterChange": "f3a3c06f6e68ab7680c250209b9759ac3d56fec6", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 4, "signatureBeforeChange": " protected void generateNewCompilationUnitDOM(ICompilationUnit cu) throws JavaModelException", "signatureAfterChange": " protected abstract SimpleName rename(ASTNode node, SimpleName newName);", "diff": ["-// TODO - JDOM - remove once model ported off of JDOM", "-protected void generateNewCompilationUnitDOM(ICompilationUnit cu) throws JavaModelException {", "-\tIBuffer buffer = cu.getBuffer();", "-\tif (buffer == null) return;", "-\tchar[] prevSource = buffer.getCharacters();", "-\tif (prevSource == null) return;", "-", "-\t// create a JDOM for the compilation unit", "-\tfCUDOM = (new DOMFactory()).createCompilationUnit(prevSource, cu.getElementName());", "-\tIDOMNode parent = ((JavaElement) getParentElement()).findNode(fCUDOM);", "-\tif (parent == null) {", "-\t\t//#findNode does not work for autogenerated CUs as the contents are empty", "-\t\tparent = fCUDOM;", "-\t}", "-\tIDOMNode child = deprecatedGenerateElementDOM();", "-\tif (child != null) {", "-\t\tinsertDOMNode(parent, child);", "-\t}", "-\tworked(1);", "-}", "+protected abstract SimpleName rename(ASTNode node, SimpleName newName);"]}], "num": 53097}