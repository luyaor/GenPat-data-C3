{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "1cf972364db14bbede2d114341c1c4e2", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e1b44d51352ed7654adf36e01c01e35c", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CompilationUnit.java", "commitBeforeChange": "c0eface7c51e3af184baaa0d320e58e29799e4b8", "commitAfterChange": "ed97a9ed7d7ba3ec97e93e9090fed591e33f5e45", "methodNumberBeforeChange": 73, "methodNumberAfterChange": 73, "signatureBeforeChange": " public IJavaElement getSharedWorkingCopy(IProgressMonitor pm, IBufferFactory factory, IProblemRequestor problemRequestor) throws JavaModelException", "signatureAfterChange": " public IJavaElement getSharedWorkingCopy(IProgressMonitor pm, IBufferFactory factory, IProblemRequestor problemRequestor) throws JavaModelException", "diff": ["-\tif (isWorkingCopy()) return this;", "-\t", "-", "+\t", "+\treturn getWorkingCopy(new BufferFactoryWrapper(factory), problemRequestor, pm);", "+}", "-\t// AND use the same buffer factory.", "-\tWorkingCopyOwner workingCopyOwner = new BufferFactoryWrapper(factory);", "-\t\tJavaModelManager.PerWorkingCopyInfo perWorkingCopyInfo = JavaModelManager.getJavaModelManager().getPerWorkingCopyInfo(workingCopy, false/*don't create*/, true /*record usage*/, null/*not used since don't create*/);", "-\trunOperation(op, pm);", "-\treturn workingCopy;", "-}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ffffa4125977ccf4d8f43bccccaa97a5", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/env/ProcessorEnvImpl.java", "commitBeforeChange": "ef0604aef9ae504bcfc77425341e6baf6891cd21", "commitAfterChange": "b16439228426b14cb0612ff6650bc46c3d9f2a61", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": "      \tprivate ProcessorEnvImpl(ICompilationUnit compilationUnit, IFile file, IJavaProject javaProj, Phase phase)", "signatureAfterChange": "          private ProcessorEnvImpl(final CompilationUnit astCompilationUnit, \t\t\tfinal ICompilationUnit compilationUnit, final char[] source, \t\t\tfinal IFile file, final IJavaProject javaProj, final Phase phase)", "diff": ["-\tprivate ProcessorEnvImpl(ICompilationUnit compilationUnit, IFile file, IJavaProject javaProj, Phase phase)", "-    {", "-\t\t// if we are in reconcile, file will be null & compilationUnit will be valid", "-\t\t// if we are in build, file will not be null & compilationUnit will be null", "-        assert ( phase == Phase.RECONCILE && compilationUnit != null && file == null ) || ( phase == Phase.BUILD && compilationUnit == null && file != null ) : \"Unexpected phase value.  Use Phase.RECONCILE instead of \" + phase; //$NON-NLS-1$", "-", "-        _phase = phase;", "-        ", "-        String unitName = null;", "-\t\tif ( compilationUnit != null )", "-\t\t{", "-\t\t\tunitName = compilationUnit.getResource().getProjectRelativePath().toString();", "-\t        _compilationUnit = compilationUnit;", "-\t\t\t_file = (IFile)compilationUnit.getResource();", "-\t\t\t_source = null;", "-\t\t}", "-\t\telse", "-\t\t{", "-\t\t\tunitName = file.getProjectRelativePath().toString();\t", "-\t\t\t_compilationUnit = null;", "-\t\t\t_file = file;", "-\t\t\tchar[] source = null;", "-\t\t\ttry", "-\t\t\t{", "-\t\t\t\tsource = getFileContents( file );", "-\t\t\t}", "-\t\t\tcatch( Exception e )", "-\t\t\t{", "-\t\t\t\tAptPlugin.log(e, \"Failure constructing processor environment\"); //$NON-NLS-1$", "-\t\t\t\t// TODO:  propagate these exceptions out of APTDispatch", "-\t\t\t}", "-\t\t\t_source = source;", "-\t\t\tassert _source != null : \"missing source\"; //$NON-NLS-1$", "-\t\t}", "-", "-\t\tassert ( _source == null && _compilationUnit != null ) || ( _source != null && _compilationUnit == null ) : \"Unexpected values for _compilationUnit and _source!\"; //$NON-NLS-1$", "-\t\tASTNode node = createDietAST( unitName, javaProj, _compilationUnit, _source );", "-\t\t_astCompilationUnit = (org.eclipse.jdt.core.dom.CompilationUnit) node;", "-", "-\t\t_javaProject = javaProj;", "-        _modelCompUnit2astCompUnit = new HashMap<ICompilationUnit, CompilationUnit>();", "-\t\t_typeBinding2ModelCompUnit = new HashMap<ITypeBinding, ICompilationUnit>();", "-\t\t_allProblems = new HashMap<IFile, List<IProblem>>(4);        ", "+    private ProcessorEnvImpl(final CompilationUnit astCompilationUnit,", "+\t\t\tfinal ICompilationUnit compilationUnit, final char[] source,", "+\t\t\tfinal IFile file, final IJavaProject javaProj, final Phase phase) {", "+\t\tsuper(astCompilationUnit, file, javaProj, phase);", "+\t\t// if we are in reconcile, file will be null & compilationUnit will be", "+\t\t// valid", "+\t\t// if we are in build, file will not be null & compilationUnit will be", "+\t\t// null", "+\t\tassert (phase == Phase.RECONCILE && compilationUnit != null && file == null) ||", "+\t\t\t\t(phase == Phase.BUILD && compilationUnit == null && file != null) : ", "+\t\t\t\t\"Unexpected phase value \" //$NON-NLS-1$", "+\t\t\t\t+ phase;", "+\t\tassert (source == null && compilationUnit != null) ||", "+\t\t\t\t(source != null && compilationUnit == null) : ", "+\t\t\t\t\"Unexpected values for _compilationUnit and _source!\"; //$NON-NLS-1$", "+\t\t_source = source;", "+\t\t_compilationUnit = compilationUnit;", "+\t\t_allProblems = new HashMap<IFile, List<IProblem>>(4);", "-\t\tinitPrimitives(_javaProject);", "-    }", "+\t}"]}], "num": 58840}