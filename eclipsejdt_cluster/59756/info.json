{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "bae2fef81cbb5b02bf1a674310ff93b3", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7d9971b2c66ef8da92b7869394b41c88", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/Scope.java", "commitBeforeChange": "83b2f6a03c3dc62e9f0da4478de073882f53022b", "commitAfterChange": "3b7e9a0f1d7c1bcba3808ca366020fd264fda3dd", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": " \tpublic static TypeBinding substitute(Substitution substitution, TypeBinding originalType)", "signatureAfterChange": " \tpublic static TypeBinding substitute(Substitution substitution, TypeBinding originalType)", "diff": ["-\t\tTypeBinding unannotatedOriginal = originalType.unannotated();", "-\t\tTypeBinding substitute = substitute0(substitution, unannotatedOriginal);", "-\t\tif (unannotatedOriginal == originalType)\t\t// no annotation => use naked substitute", "-\t\t\treturn substitute;", "-\t\telse if (substitute == unannotatedOriginal)\t\t// no substitution => re-use annotated type", "-\t\t\treturn originalType;", "-\t\telse \t\t\t\t\t\t\t\t\t\t\t// substitution and annotation: merge both", "-\t\t\treturn substitution.environment().copyAnnotations(originalType, substitute);", "-\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "95c9ebe6ae4dd924a43beb96f8d57d6b", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/Scope.java", "commitBeforeChange": "8816a21753c2d607b8868597ac43f18ef7dd2d50", "commitAfterChange": "3af20c8fa9116cf8e52dcf498c1b4eea06f21754", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " \tpublic static ReferenceBinding[] substitute(Substitution substitution, ReferenceBinding[] originalTypes)", "signatureAfterChange": " \tpublic static TypeBinding substitute(Substitution substitution, TypeBinding originalType)", "diff": ["+\t */", "+\tpublic static TypeBinding substitute(Substitution substitution, TypeBinding originalType) {", "+\t\t", "+\t\tswitch (originalType.kind()) {", "+\t\t\t", "+\t\t\tcase Binding.TYPE_PARAMETER:", "+\t\t\t\treturn substitution.substitute( (TypeVariableBinding) originalType);", "+\t\t\t\t", "+\t\t\tcase Binding.PARAMETERIZED_TYPE:", "+\t\t\t\tParameterizedTypeBinding originalParameterizedType = (ParameterizedTypeBinding) originalType;", "+\t\t\t\tReferenceBinding originalEnclosing = originalType.enclosingType();", "+\t\t\t\tReferenceBinding substitutedEnclosing = originalEnclosing;", "+\t\t\t\tif (originalEnclosing != null) {", "+\t\t\t\t\tsubstitutedEnclosing = (ReferenceBinding) substitute(substitution, originalEnclosing);", "+\t\t\t\t}", "+\t\t\t\tif (substitution.isRawSubstitution()) {", "+\t\t\t\t\treturn originalParameterizedType.environment.createRawType(originalParameterizedType.type, substitutedEnclosing);", "+\t\t\t\t}\t\t\t\t", "+\t\t\t\tTypeBinding[] originalArguments = originalParameterizedType.arguments;", "+\t\t\t\tTypeBinding[] substitutedArguments = originalArguments;", "+\t\t\t\tif (originalArguments != null) {", "+\t\t\t\t\tsubstitutedArguments = substitute(substitution, originalArguments);", "+\t\t\t\t}", "+\t\t\t\tif (substitutedArguments != originalArguments || substitutedEnclosing != originalEnclosing) {", "+\t\t\t\t\tidenticalVariables: { // if substituted with original variables, then answer the generic type itself", "+\t\t\t\t\t\tif (substitutedEnclosing != originalEnclosing) break identicalVariables;", "+\t\t\t\t\t\tTypeVariableBinding[] originalVariables = originalParameterizedType.type.typeVariables();", "+\t\t\t\t\t\tfor (int i = 0, length = originalVariables.length; i < length; i++) {", "+\t\t\t\t\t\t\tif (substitutedArguments[i] != originalVariables[i]) break identicalVariables;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\treturn originalParameterizedType.type;", "+\t\t\t\t\t}", "+\t\t\t\t\treturn originalParameterizedType.environment.createParameterizedType(", "+\t\t\t\t\t\t\toriginalParameterizedType.type, substitutedArguments, substitutedEnclosing);", "+\t\t\t\t}", "+\t\t\t\tbreak;", "+\t\t\t\t", "+\t\t\tcase Binding.ARRAY_TYPE:", "+\t\t\t\tArrayBinding originalArrayType = (ArrayBinding) originalType;", "+\t\t\t\tTypeBinding originalLeafComponentType = originalArrayType.leafComponentType;", "+\t\t\t\tTypeBinding substitute = substitute(substitution, originalLeafComponentType); // substitute could itself be array type", "+\t\t\t\tif (substitute != originalLeafComponentType) {", "+\t\t\t\t\treturn originalArrayType.environment.createArrayType(substitute.leafComponentType(), substitute.dimensions() + originalType.dimensions());", "+\t\t\t\t}", "+\t\t\t\tbreak;", "+", "+\t\t\tcase Binding.WILDCARD_TYPE:", "+\t\t        WildcardBinding wildcard = (WildcardBinding) originalType;", "+\t\t        if (wildcard.kind != Wildcard.UNBOUND) {", "+\t\t\t        TypeBinding originalBound = wildcard.bound;", "+\t\t\t        TypeBinding substitutedBound = substitute(substitution, originalBound);", "+\t\t\t        if (substitutedBound != originalBound) {", "+\t\t        \t\treturn wildcard.environment.createWildcard(wildcard.genericType, wildcard.rank, substitutedBound, wildcard.kind);", "+\t\t\t        }", "+\t\t        }", "+\t\t\t\tbreak;", "+", "+\t\t\tcase Binding.GENERIC_TYPE:", "+\t\t\t\tReferenceBinding originalGenericType = (ReferenceBinding) originalType;", "+\t\t\t\toriginalEnclosing = originalType.enclosingType();", "+\t\t\t\tsubstitutedEnclosing = originalEnclosing;", "+\t\t\t\tif (originalEnclosing != null) {", "+\t\t\t\t\tsubstitutedEnclosing = (ReferenceBinding) substitute(substitution, originalEnclosing);", "+\t\t\t\t}", "+\t\t\t\tif (substitution.isRawSubstitution()) {", "+\t\t            return substitution.environment().createRawType(originalGenericType, substitutedEnclosing);", "+\t            }", "+\t\t\t    // treat as if parameterized with its type variables", "+\t\t\t\tTypeVariableBinding[] originalVariables = originalGenericType.typeVariables();", "+\t\t\t\tint length = originalVariables.length;", "+\t\t\t\tSystem.arraycopy(originalVariables, 0, originalArguments = new TypeBinding[length], 0, length);", "+\t\t\t\tsubstitutedArguments = substitute(substitution, originalArguments);", "+\t\t\t\tif (substitutedArguments != originalArguments || substitutedEnclosing != originalEnclosing) {", "+\t\t\t\t\treturn substitution.environment().createParameterizedType(", "+\t\t\t\t\t\t\toriginalGenericType, substitutedArguments, substitutedEnclosing);", "+\t\t\t\t}", "+\t\t\t\tbreak;", "+\t\t}", "+\t\treturn originalType;", "+\t}\t", "-\t        ReferenceBinding substitutedParameter = (ReferenceBinding)substitution.substitute(originalType);"]}], "num": 59756}