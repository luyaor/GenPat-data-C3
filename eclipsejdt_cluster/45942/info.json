{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "d340d9514767746911a479f32622f480", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4e585d638a2071e491193e1f0d31572b", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CreateCompilationUnitOperation.java", "commitBeforeChange": "eba1b2d8628458befc75c296c3c46577733d25b5", "commitAfterChange": "307bd23008332fd8b3a6f2a1ed42ab1b2a056046", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "\r protected void executeOperation() throws JavaModelException", "signatureAfterChange": "\r protected void executeOperation() throws JavaModelException", "diff": ["-\tInputStream stream = new ByteArrayInputStream(BufferManager.stringToBytes(fSource));\r", "-\tcreateFile(folder, unit.getElementName(), stream, fForce);\r", "-\tworked(1);\r", "-\tfResultElements = new IJavaElement[] {unit};\r", "-\tif (unit.getParent().exists()) {\r", "-\t\tfor (int i = 0; i < fResultElements.length; i++) {\r", "-\t\t\tdelta.added(fResultElements[i]);\r", "+\tIFile compilationUnitFile = folder.getFile(new Path(fName));\r", "+\tif (compilationUnitFile.exists()) {\r", "+\t\t// update the contents of the existing unit if fForce is true\r", "+\t\tif (fForce) {\r", "+\t\t\tunit.getBuffer().setContents(fSource);\r", "+\t\t\tunit.save(new NullProgressMonitor(), false);\r", "+\t\t\tfResultElements = new IJavaElement[] {unit};\r", "+\t\t\tif (unit.getParent().exists()) {\r", "+\t\t\t\tfor (int i = 0; i < fResultElements.length; i++) {\r", "+\t\t\t\t\tdelta.changed(fResultElements[i], IJavaElementDelta.F_CONTENT);\r", "+\t\t\t\t}\r", "+\t\t\t\taddDelta(delta);\r", "+\t\t\t}\r", "+\t\t} else {\r", "+\t\t\tthrow new JavaModelException(new JavaModelStatus(IJavaModelStatusConstants.NAME_COLLISION));\r", "-\t\taddDelta(delta);\r", "-\t} // else unit is created outside classpath\r", "-\t  // non-java resource delta will be notified by delta processor\r", "+\t} else {\r", "+\t\tInputStream stream = new ByteArrayInputStream(BufferManager.stringToBytes(fSource));\r", "+\t\tcreateFile(folder, unit.getElementName(), stream, false);\r", "+\t\tfResultElements = new IJavaElement[] {unit};\r", "+\t\tif (unit.getParent().exists()) {\r", "+\t\t\tfor (int i = 0; i < fResultElements.length; i++) {\r", "+\t\t\t\tdelta.added(fResultElements[i]);\r", "+\t\t\t}\r", "+\t\t\taddDelta(delta);\r", "+\t\t}\r", "+\t} \r", "+\tworked(1);\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "755c120fca6a65e1d4b7e3dc0f9e4c09", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CreateCompilationUnitOperation.java", "commitBeforeChange": "b04602938404af4f8569a399fb36a5018768a262", "commitAfterChange": "6a230a9d6ae1a4a6adbf38879cb9ee685eccffe9", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": "\r \tprotected void executeOperation() throws JavaModelException", "signatureAfterChange": "\r protected void executeOperation() throws JavaModelException", "diff": ["+ */\r", "+protected void executeOperation() throws JavaModelException {\r", "+\tbeginTask(Util.bind(\"operation.createUnitProgress\"/*nonNLS*/), 2);\r", "+\tJavaElementDelta delta = newJavaElementDelta();\r", "+\tICompilationUnit unit = getCompilationUnit();\r", "+\tIPackageFragment pkg = (IPackageFragment) getParentElement();\r", "+\tIContainer folder = (IContainer) pkg.getUnderlyingResource();\r", "+\tInputStream stream = new ByteArrayInputStream(BufferManager.stringToBytes(fSource));\r", "+\tworked(1);\r", "+\tcreateFile(folder, unit.getElementName(), stream, fForce);\r", "+\tworked(1);\r", "+\tfResultElements = new IJavaElement[] {getCompilationUnit()};\r", "+\tfor (int i = 0; i < fResultElements.length; i++) {\r", "+\t\tdelta.added(fResultElements[i]);\r", "-\t */\r", "-\tprotected void executeOperation() throws JavaModelException {\r", "-\t\tbeginTask(\"Creating a compilation unit...\", 2);\r", "-\t\tJavaElementDelta delta = newJavaElementDelta();\r", "-\t\tICompilationUnit unit = getCompilationUnit();\r", "-\t\tIPackageFragment pkg = (IPackageFragment) getParentElement();\r", "-\t\tIContainer folder = (IContainer) pkg.getUnderlyingResource();\r", "-\t\tInputStream stream =\r", "-\t\t\tnew ByteArrayInputStream(BufferManager.stringToBytes(fSource));\r", "-\t\tworked(1);\r", "-\t\tcreateFile(folder, unit.getElementName(), stream, fForce);\r", "-\t\tworked(1);\r", "-\t\tfResultElements = new IJavaElement[] { getCompilationUnit()};\r", "-\t\tfor (int i = 0; i < fResultElements.length; i++) {\r", "-\t\t\tdelta.added(fResultElements[i]);\r", "-\t\t}\r", "-\t\taddDelta(delta);\r", "-\t\tdone();\r", "+\taddDelta(delta);\r", "+\tdone();\r", "+}\r"]}], "num": 45942}