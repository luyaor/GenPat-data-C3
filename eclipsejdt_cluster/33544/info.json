{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2dbdf33650edd9a1daecbc50049df7e8", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7dec92124ef24a9fb931fc6369f421a5", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CommitWorkingCopyOperation.java", "commitBeforeChange": "b12492ad0eb83de9816def47b0f6dea2ec7ff67f", "commitAfterChange": "0deabbafa4ad0926b565767fe8d2a589d68558ed", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " protected void executeOperation() throws JavaModelException", "signatureAfterChange": " \tprotected void executeOperation() throws JavaModelException", "diff": ["- */", "-protected void executeOperation() throws JavaModelException {", "-\ttry {", "-\t\tbeginTask(Util.bind(\"workingCopy.commit\"), 2); //$NON-NLS-1$", "-\t\tWorkingCopy copy = (WorkingCopy)getCompilationUnit();", "-\t\tICompilationUnit original = (ICompilationUnit) copy.getOriginalElement();", "-\t", "-\t\t", "-\t\t// creates the delta builder (this remembers the content of the cu)\t", "-\t\tif (!original.isOpen()) {", "-\t\t\t// force opening so that the delta builder can get the old info", "-\t\t\toriginal.open(null);", "-\t\t}", "-\t\tJavaElementDeltaBuilder deltaBuilder = new JavaElementDeltaBuilder(original);", "-\t", "-\t\t// save the cu", "-\t\tIBuffer originalBuffer = original.getBuffer();", "-\t\tif (originalBuffer == null) return;", "-\t\tchar[] originalContents = originalBuffer.getCharacters();", "-\t\tboolean hasSaved = false;", "-\t\ttry {", "-\t\t\tIBuffer copyBuffer = copy.getBuffer();", "-\t\t\tif (copyBuffer == null) return;", "-\t\t\toriginalBuffer.setContents(copyBuffer.getCharacters());", "-\t\t\toriginal.save(fMonitor, fForce);", "-\t\t\tthis.hasModifiedResource = true;", "-\t\t\thasSaved = true;", "-\t\t} finally {", "-\t\t\tif (!hasSaved){", "-\t\t\t\t// restore original buffer contents since something went wrong", "-\t\t\t\toriginalBuffer.setContents(originalContents);", "-\t\t// make sure working copy is in sync", "-\t\tcopy.updateTimeStamp((CompilationUnit)original);", "-\t\tcopy.makeConsistent(this);", "-\t\tworked(1);", "-\t", "-\t\t// build the deltas", "-\t\tdeltaBuilder.buildDeltas();", "-\t", "-\t\t// add the deltas to the list of deltas created during this operation", "-\t\tif (deltaBuilder.delta != null) {", "-\t\t\taddDelta(deltaBuilder.delta);", "+\t */", "+\tprotected void executeOperation() throws JavaModelException {", "+\t\ttry {", "+\t\t\tbeginTask(Util.bind(\"workingCopy.commit\"), 2); //$NON-NLS-1$", "+\t\t\tWorkingCopy copy = (WorkingCopy)getCompilationUnit();", "+\t\t\tICompilationUnit original = (ICompilationUnit) copy.getOriginalElement();", "+\t\t", "+\t\t\t", "+\t\t\t// creates the delta builder (this remembers the content of the cu)\t", "+\t\t\tif (!original.isOpen()) {", "+\t\t\t\t// force opening so that the delta builder can get the old info", "+\t\t\t\toriginal.open(null);", "+\t\t\t}", "+\t\t\tJavaElementDeltaBuilder deltaBuilder = new JavaElementDeltaBuilder(original);", "+\t\t", "+\t\t\t// save the cu", "+\t\t\tIBuffer originalBuffer = original.getBuffer();", "+\t\t\tif (originalBuffer == null) return;", "+\t\t\tchar[] originalContents = originalBuffer.getCharacters();", "+\t\t\tboolean hasSaved = false;", "+\t\t\ttry {", "+\t\t\t\tIBuffer copyBuffer = copy.getBuffer();", "+\t\t\t\tif (copyBuffer == null) return;", "+\t\t\t\toriginalBuffer.setContents(copyBuffer.getCharacters());", "+\t\t\t\toriginal.save(fMonitor, fForce);", "+\t\t\t\tthis.setAttribute(\"hasModifiedResource\", \"true\");", "+\t\t\t\thasSaved = true;", "+\t\t\t} finally {", "+\t\t\t\tif (!hasSaved){", "+\t\t\t\t\t// restore original buffer contents since something went wrong", "+\t\t\t\t\toriginalBuffer.setContents(originalContents);", "+\t\t\t\t}", "+\t\t\t}", "+\t\t\t// make sure working copy is in sync", "+\t\t\tcopy.updateTimeStamp((CompilationUnit)original);", "+\t\t\tcopy.makeConsistent(this);", "+\t\t\tworked(1);", "+\t\t", "+\t\t\t// build the deltas", "+\t\t\tdeltaBuilder.buildDeltas();", "+\t\t", "+\t\t\t// add the deltas to the list of deltas created during this operation", "+\t\t\tif (deltaBuilder.delta != null) {", "+\t\t\t\taddDelta(deltaBuilder.delta);", "+\t\t\t}", "+\t\t\tworked(1);", "+\t\t} finally {\t", "+\t\t\tdone();", "-\t\tworked(1);", "-\t} finally {\t", "-\t\tdone();", "-}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ee29a6ac3c0615b8231ff411556c9af3", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CommitWorkingCopyOperation.java", "commitBeforeChange": "677db12ffe2b33d9711034d339aec7b56ab85d41", "commitAfterChange": "617fadfcdd9d3f85493c65c27088f408a3cd9c9d", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": "\r protected void executeOperation() throws JavaModelException", "signatureAfterChange": "\r protected void executeOperation() throws JavaModelException", "diff": ["-\tbeginTask(Util.bind(\"workingCopy.commit\"), 2); //$NON-NLS-1$\r", "-\tWorkingCopy copy = (WorkingCopy)getCompilationUnit();\r", "-\tICompilationUnit original = (ICompilationUnit) copy.getOriginalElement();\r", "-\r", "-\t\r", "-\t// creates the delta builder (this remembers the content of the cu)\t\r", "-\tif (!original.isOpen()) {\r", "-\t\t// force opening so that the delta builder can get the old info\r", "-\t\toriginal.open(null);\r", "-\t}\r", "-\tJavaElementDeltaBuilder deltaBuilder = new JavaElementDeltaBuilder(original);\r", "-\r", "-\t// save the cu\r", "-\tchar[] originalContents = original.getBuffer().getCharacters();\r", "-\tboolean hasSaved = false;\r", "-\t\toriginal.getBuffer().setContents(copy.getBuffer().getCharacters());\r", "-\t\toriginal.save(fMonitor, fForce);\r", "-\t\tthis.hasModifiedResource = true;\r", "-\t\thasSaved = true;\r", "-\t} finally {\r", "-\t\tif (!hasSaved){\r", "-\t\t\t// restore original buffer contents since something went wrong\r", "-\t\t\toriginal.getBuffer().setContents(originalContents);\r", "-\t\t}\r", "-\t}\r", "-\t// make sure working copy is in sync\r", "-\tcopy.updateTimeStamp((CompilationUnit)original);\r", "-\tcopy.makeConsistent(this);\r", "-\tworked(1);\r", "-\r", "-\t// build the deltas\r", "-\tdeltaBuilder.buildDeltas();\r", "-\r", "-\t// add the deltas to the list of deltas created during this operation\r", "-\tif (deltaBuilder.delta != null) {\r", "-\t\taddDelta(deltaBuilder.delta);\r", "-\t}\r", "-\tworked(1);\r", "+\t\tbeginTask(Util.bind(\"workingCopy.commit\"), 2); //$NON-NLS-1$\r", "+\t\tWorkingCopy copy = (WorkingCopy)getCompilationUnit();\r", "+\t\tICompilationUnit original = (ICompilationUnit) copy.getOriginalElement();\r", "-\tdone();\r", "-//\tcheckPackageDeclaration(original);\r", "+\t\t\r", "+\t\t// creates the delta builder (this remembers the content of the cu)\t\r", "+\t\tif (!original.isOpen()) {\r", "+\t\t\t// force opening so that the delta builder can get the old info\r", "+\t\t\toriginal.open(null);\r", "+\t\t}\r", "+\t\tJavaElementDeltaBuilder deltaBuilder = new JavaElementDeltaBuilder(original);\r", "+\t\r", "+\t\t// save the cu\r", "+\t\tIBuffer originalBuffer = original.getBuffer();\r", "+\t\tif (originalBuffer == null) return;\r", "+\t\tchar[] originalContents = originalBuffer.getCharacters();\r", "+\t\tboolean hasSaved = false;\r", "+\t\ttry {\r", "+\t\t\tIBuffer copyBuffer = copy.getBuffer();\r", "+\t\t\tif (copyBuffer == null) return;\r", "+\t\t\toriginalBuffer.setContents(copyBuffer.getCharacters());\r", "+\t\t\toriginal.save(fMonitor, fForce);\r", "+\t\t\tthis.hasModifiedResource = true;\r", "+\t\t\thasSaved = true;\r", "+\t\t} finally {\r", "+\t\t\tif (!hasSaved){\r", "+\t\t\t\t// restore original buffer contents since something went wrong\r", "+\t\t\t\toriginalBuffer.setContents(originalContents);\r", "+\t\t\t}\r", "+\t\t}\r", "+\t\t// make sure working copy is in sync\r", "+\t\tcopy.updateTimeStamp((CompilationUnit)original);\r", "+\t\tcopy.makeConsistent(this);\r", "+\t\tworked(1);\r", "+\t\r", "+\t\t// build the deltas\r", "+\t\tdeltaBuilder.buildDeltas();\r", "+\t\r", "+\t\t// add the deltas to the list of deltas created during this operation\r", "+\t\tif (deltaBuilder.delta != null) {\r", "+\t\t\taddDelta(deltaBuilder.delta);\r", "+\t\t}\r", "+\t\tworked(1);\r", "+\t} finally {\t\r", "+\t\tdone();\r", "+\t}\r"]}], "num": 33544}