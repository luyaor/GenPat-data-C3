{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "e2aeb0fb2a12952669b93e50d0af18d0", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "20e597d2647ce83c6e58180b66f358ee", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CompilationUnit.java", "commitBeforeChange": "888ff915accf0f7dc08ba845bca467c94f1e290b", "commitAfterChange": "f69c200469412ca3b93e80844c6c1f4e077169ac", "methodNumberBeforeChange": 34, "methodNumberAfterChange": 59, "signatureBeforeChange": " public IJavaElement getOriginal(IJavaElement workingCopyElement)", "signatureAfterChange": " public IJavaElement getOriginal(IJavaElement workingCopyElement)", "diff": ["- */", "-public IJavaElement getOriginal(IJavaElement workingCopyElement) {", "-\treturn null;", "-}", "+ */", "+public IJavaElement getOriginal(IJavaElement workingCopyElement) {", "+\tif (!isWorkingCopy()) return null;", "+\t", "+\t//not a element contained in a compilation unit", "+\tint javaElementType = workingCopyElement.getElementType();", "+\tif (javaElementType < COMPILATION_UNIT || javaElementType == CLASS_FILE) {", "+\t\treturn null;", "+\t}", "+\tif (workingCopyElement instanceof BinaryMember) {", "+\t\treturn null;", "+\t}", "+\tIJavaElement parent = workingCopyElement.getParent();", "+\tArrayList hierarchy = new ArrayList(4);", "+\t", "+\twhile (parent.getElementType() > COMPILATION_UNIT) {", "+\t\thierarchy.add(parent);", "+\t\tparent = parent.getParent();", "+\t}", "+\tif (parent.getElementType() == COMPILATION_UNIT) {", "+\t\thierarchy.add(((ICompilationUnit)parent).getOriginalElement());", "+\t}", "+\t", "+\tICompilationUnit cu = (ICompilationUnit) getOriginalElement();", "+\tif (javaElementType == COMPILATION_UNIT) {", "+\t\tparent = workingCopyElement;", "+\t}", "+\tif (((ICompilationUnit) parent).isWorkingCopy() && !((ICompilationUnit) parent).getOriginalElement().equals(cu)) {", "+\t\treturn null;", "+\t}", "+\tswitch (javaElementType) {", "+\t\tcase PACKAGE_DECLARATION :", "+\t\t\treturn cu.getPackageDeclaration(workingCopyElement.getElementName());", "+\t\tcase IMPORT_CONTAINER :", "+\t\t\treturn cu.getImportContainer();", "+\t\tcase IMPORT_DECLARATION :", "+\t\t\treturn cu.getImport(workingCopyElement.getElementName());", "+\t\tcase TYPE :", "+\t\t\tif (hierarchy.size() == 1) {", "+\t\t\t\treturn cu.getType(workingCopyElement.getElementName());", "+\t\t\t} else {", "+\t\t\t\t//inner type", "+\t\t\t\treturn getOriginalType(hierarchy).getType(workingCopyElement.getElementName());", "+\t\t\t}", "+\t\tcase METHOD :", "+\t\t\tIType type;", "+\t\t\tif (hierarchy.size() == 2) {", "+\t\t\t\tString typeName = ((IJavaElement) hierarchy.get(0)).getElementName();", "+\t\t\t\ttype = cu.getType(typeName);", "+\t\t\t} else {", "+\t\t\t\t//inner type", "+\t\t\t\ttype = getOriginalType(hierarchy);", "+\t\t\t}", "+\t\t\treturn type.getMethod(workingCopyElement.getElementName(), ((IMethod) workingCopyElement).getParameterTypes());", "+\t\tcase FIELD :", "+\t\t\tif (hierarchy.size() == 2) {", "+\t\t\t\tString typeName = ((IJavaElement) hierarchy.get(0)).getElementName();", "+\t\t\t\ttype = cu.getType(typeName);", "+\t\t\t} else {", "+\t\t\t\t//inner type", "+\t\t\t\ttype = getOriginalType(hierarchy);", "+\t\t\t}", "+\t\t\treturn type.getField(workingCopyElement.getElementName());", "+\t\tcase INITIALIZER :", "+\t\t\tif (hierarchy.size() == 2) {", "+\t\t\t\tString typeName = ((IJavaElement) hierarchy.get(0)).getElementName();", "+\t\t\t\ttype = cu.getType(typeName);", "+\t\t\t} else {", "+\t\t\t\t//inner type", "+\t\t\t\ttype = getOriginalType(hierarchy);", "+\t\t\t}", "+\t\t\treturn type.getInitializer(((Initializer) workingCopyElement).getOccurrenceCount());", "+\t\tcase COMPILATION_UNIT :", "+\t\t\treturn cu;", "+\t\tdefault :", "+\t\t\treturn null;", "+\t}", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a93b28bb9f17c69a5da280b8e07e85d4", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/CompilationUnit.java", "commitBeforeChange": "36fb90550dd82b50b969bbbbd80f2aeb1af1f9a9", "commitAfterChange": "4ae64410da67a1fce42b5a75030952f43ef17358", "methodNumberBeforeChange": 58, "methodNumberAfterChange": 57, "signatureBeforeChange": " public IJavaElement getOriginal(IJavaElement workingCopyElement)", "signatureAfterChange": " public IJavaElement getOriginal(IJavaElement workingCopyElement)", "diff": ["+\t// backward compatibility", "-\t", "-\t//not a element contained in a compilation unit", "-\tint javaElementType = workingCopyElement.getElementType();", "-\tif (javaElementType < COMPILATION_UNIT || javaElementType == CLASS_FILE) {", "+\tCompilationUnit cu = (CompilationUnit)workingCopyElement.getAncestor(COMPILATION_UNIT);", "+\tif (cu == null || !this.owner.equals(cu.owner)) {", "-\tif (workingCopyElement instanceof BinaryMember) {", "-\t\treturn null;", "-\t}", "-\tIJavaElement parent = workingCopyElement.getParent();", "-\tArrayList hierarchy = new ArrayList(4);", "-\twhile (parent.getElementType() > COMPILATION_UNIT) {", "-\t\thierarchy.add(parent);", "-\t\tparent = parent.getParent();", "-\t}", "-\tif (parent.getElementType() == COMPILATION_UNIT) {", "-\t\thierarchy.add(((ICompilationUnit)parent).getOriginalElement());", "-\t}", "-\t", "-\tICompilationUnit cu = (ICompilationUnit) getOriginalElement();", "-\tif (javaElementType == COMPILATION_UNIT) {", "-\t\tparent = workingCopyElement;", "-\t}", "-\tif (((ICompilationUnit) parent).isWorkingCopy() && !((ICompilationUnit) parent).getOriginalElement().equals(cu)) {", "-\t\treturn null;", "-\t}", "-\tswitch (javaElementType) {", "-\t\tcase PACKAGE_DECLARATION :", "-\t\t\treturn cu.getPackageDeclaration(workingCopyElement.getElementName());", "-\t\tcase IMPORT_CONTAINER :", "-\t\t\treturn cu.getImportContainer();", "-\t\tcase IMPORT_DECLARATION :", "-\t\t\treturn cu.getImport(workingCopyElement.getElementName());", "-\t\tcase TYPE :", "-\t\t\tif (hierarchy.size() == 1) {", "-\t\t\t\treturn cu.getType(workingCopyElement.getElementName());", "-\t\t\t} else {", "-\t\t\t\t//inner type", "-\t\t\t\treturn getOriginalType(hierarchy).getType(workingCopyElement.getElementName());", "-\t\t\t}", "-\t\tcase METHOD :", "-\t\t\tIType type;", "-\t\t\tif (hierarchy.size() == 2) {", "-\t\t\t\tString typeName = ((IJavaElement) hierarchy.get(0)).getElementName();", "-\t\t\t\ttype = cu.getType(typeName);", "-\t\t\t} else {", "-\t\t\t\t//inner type", "-\t\t\t\ttype = getOriginalType(hierarchy);", "-\t\t\t}", "-\t\t\treturn type.getMethod(workingCopyElement.getElementName(), ((IMethod) workingCopyElement).getParameterTypes());", "-\t\tcase FIELD :", "-\t\t\tif (hierarchy.size() == 2) {", "-\t\t\t\tString typeName = ((IJavaElement) hierarchy.get(0)).getElementName();", "-\t\t\t\ttype = cu.getType(typeName);", "-\t\t\t} else {", "-\t\t\t\t//inner type", "-\t\t\t\ttype = getOriginalType(hierarchy);", "-\t\t\t}", "-\t\t\treturn type.getField(workingCopyElement.getElementName());", "-\t\tcase INITIALIZER :", "-\t\t\tif (hierarchy.size() == 2) {", "-\t\t\t\tString typeName = ((IJavaElement) hierarchy.get(0)).getElementName();", "-\t\t\t\ttype = cu.getType(typeName);", "-\t\t\t} else {", "-\t\t\t\t//inner type", "-\t\t\t\ttype = getOriginalType(hierarchy);", "-\t\t\t}", "-\t\t\treturn type.getInitializer(((Initializer) workingCopyElement).getOccurrenceCount());", "-\t\tcase COMPILATION_UNIT :", "-\t\t\treturn cu;", "-\t\tdefault :", "-\t\t\treturn null;", "-\t}", "+\treturn workingCopyElement.getPrimaryElement();"]}], "num": 2914}