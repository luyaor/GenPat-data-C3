{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "177f0b5b68702b4d8a3124a280d52a17", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "c79814d7a437d6ed9c9a97b00c35dde7", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core.tests.compiler/src/org/eclipse/jdt/core/tests/compiler/regression/BatchCompilerTest.java", "commitBeforeChange": "79a792fd2ce5bf4b6db39e3bfe8729f652ff2091", "commitAfterChange": "61910f9ffdfc607d31120af5ce39e6bf8d69bab0", "methodNumberBeforeChange": 65, "methodNumberAfterChange": 65, "signatureBeforeChange": " public void test018a()", "signatureAfterChange": " public void test018a()", "diff": ["-\t\t\tsourceFileWriter.write(", "-\t\t\t\t\"/** */\\n\" +", "-\t\t\t\t\"public class X {\\n\" +", "-\t\t\t\t\"\tOK1 ok1;\\n\" +", "-\t\t\t\t\"}\");", "-\t\t\tsourceFileWriter.close();", "+\t\t\ttry {", "+\t\t\t\tsourceFileWriter.write(", "+\t\t\t\t\t\"/** */\\n\" +", "+\t\t\t\t\t\"public class X {\\n\" +", "+\t\t\t\t\t\"\tOK1 ok1;\\n\" +", "+\t\t\t\t\t\"}\");", "+\t\t\t} finally {", "+\t\t\t\tsourceFileWriter.close();", "+\t\t\t}", "-\t\t\tsourceFileWriter.write(", "-\t\t\t\t\"/** */\\n\" +", "-\t\t\t\t\"public class OK1 {\\n\" +", "-\t\t\t\t\"\t// empty\\n\" +", "-\t\t\t\t\"}\");", "-\t\t\tsourceFileWriter.close();", "+\t\t\ttry {", "+\t\t\t\tsourceFileWriter.write(", "+\t\t\t\t\t\"/** */\\n\" +", "+\t\t\t\t\t\"public class OK1 {\\n\" +", "+\t\t\t\t\t\"\t// empty\\n\" +", "+\t\t\t\t\t\"}\");", "+\t\t\t} finally {", "+\t\t\t\tsourceFileWriter.close();", "+\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "d7cbf2c3fe784018fe75f757107abc91", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/processing/JobManager.java", "commitBeforeChange": "8bea847412c36874664a80a329bfe627deff5fa9", "commitAfterChange": "c4145c80a504c8681f4571ff2bd214b778e87107", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 9, "signatureBeforeChange": " \tpublic boolean performConcurrentJob(IJob searchJob, int waitingPolicy, IProgressMonitor progress)", "signatureAfterChange": " \tpublic boolean performConcurrentJob(IJob searchJob, int waitingPolicy, IProgressMonitor progress)", "diff": ["-\t\tint concurrentJobWork = 100;", "-\t\tif (progress != null)", "-\t\t\tprogress.beginTask(\"\", concurrentJobWork); //$NON-NLS-1$", "-\t\tif (awaitingJobsCount() > 0) {", "-\t\t\tswitch (waitingPolicy) {", "-", "-\t\t\t\tcase IJob.ForceImmediate :", "-\t\t\t\t\tif (VERBOSE)", "-\t\t\t\t\t\tUtil.verbose(\"-> NOT READY - forcing immediate - \" + searchJob);//$NON-NLS-1$", "-\t\t\t\t\ttry {", "-\t\t\t\t\t\tdisable(); // pause indexing", "-\t\t\t\t\t\tstatus = searchJob.execute(progress == null ? null : new SubProgressMonitor(progress, concurrentJobWork));", "-\t\t\t\t\t} finally {", "-\t\t\t\t\t\tenable();", "-\t\t\t\t\t}", "-\t\t\t\t\tif (VERBOSE)", "-\t\t\t\t\t\tUtil.verbose(\"FINISHED  concurrent job - \" + searchJob); //$NON-NLS-1$", "-\t\t\t\t\treturn status;", "-", "-\t\t\t\tcase IJob.CancelIfNotReady :", "-\t\t\t\t\tif (VERBOSE)", "-\t\t\t\t\t\tUtil.verbose(\"-> NOT READY - cancelling - \" + searchJob); //$NON-NLS-1$", "-\t\t\t\t\tif (VERBOSE)", "-\t\t\t\t\t\tUtil.verbose(\"CANCELED concurrent job - \" + searchJob); //$NON-NLS-1$", "-\t\t\t\t\tthrow new OperationCanceledException();", "-", "-\t\t\t\tcase IJob.WaitUntilReady :", "-\t\t\t\t\tint awaitingWork;", "-\t\t\t\t\tIJob previousJob = null;", "-\t\t\t\t\tIJob currentJob;", "-\t\t\t\t\tIProgressMonitor subProgress = null;", "-\t\t\t\t\tint totalWork = this.awaitingJobsCount();", "-\t\t\t\t\tif (progress != null && totalWork > 0) {", "-\t\t\t\t\t\tsubProgress = new SubProgressMonitor(progress, concurrentJobWork / 2);", "-\t\t\t\t\t\tsubProgress.beginTask(\"\", totalWork); //$NON-NLS-1$", "-\t\t\t\t\t\tconcurrentJobWork = concurrentJobWork / 2;", "-\t\t\t\t\t}", "-\t\t\t\t\t// use local variable to avoid potential NPE (see bug 20435 NPE when searching java method", "-\t\t\t\t\t// and bug 42760 NullPointerException in JobManager when searching)", "-\t\t\t\t\tThread t = this.processingThread;", "-\t\t\t\t\tint originalPriority = t == null ? -1 : t.getPriority();", "-\t\t\t\t\ttry {", "-\t\t\t\t\t\tif (t != null)", "-\t\t\t\t\t\t\tt.setPriority(Thread.currentThread().getPriority());", "-\t\t\t\t\t\tsynchronized(this) {", "-\t\t\t\t\t\t\tthis.awaitingClients++;", "+\t\ttry {", "+\t\t\tint concurrentJobWork = 100;", "+\t\t\tif (progress != null)", "+\t\t\t\tprogress.beginTask(\"\", concurrentJobWork); //$NON-NLS-1$", "+\t\t\tif (awaitingJobsCount() > 0) {", "+\t\t\t\tswitch (waitingPolicy) {", "+\t", "+\t\t\t\t\tcase IJob.ForceImmediate :", "+\t\t\t\t\t\tif (VERBOSE)", "+\t\t\t\t\t\t\tUtil.verbose(\"-> NOT READY - forcing immediate - \" + searchJob);//$NON-NLS-1$", "+\t\t\t\t\t\ttry {", "+\t\t\t\t\t\t\tdisable(); // pause indexing", "+\t\t\t\t\t\t\tstatus = searchJob.execute(progress == null ? null : new SubProgressMonitor(progress, concurrentJobWork));", "+\t\t\t\t\t\t} finally {", "+\t\t\t\t\t\t\tenable();", "-\t\t\t\t\t\twhile ((awaitingWork = awaitingJobsCount()) > 0) {", "-\t\t\t\t\t\t\tif (subProgress != null && subProgress.isCanceled())", "-\t\t\t\t\t\t\t\tthrow new OperationCanceledException();", "-\t\t\t\t\t\t\tcurrentJob = currentJob();", "-\t\t\t\t\t\t\t// currentJob can be null when jobs have been added to the queue but job manager is not enabled", "-\t\t\t\t\t\t\tif (currentJob != null && currentJob != previousJob) {", "-\t\t\t\t\t\t\t\tif (VERBOSE)", "-\t\t\t\t\t\t\t\t\tUtil.verbose(\"-> NOT READY - waiting until ready - \" + searchJob);//$NON-NLS-1$", "-\t\t\t\t\t\t\t\tif (subProgress != null) {", "-\t\t\t\t\t\t\t\t\tsubProgress.subTask(", "-\t\t\t\t\t\t\t\t\t\tMessages.bind(Messages.manager_filesToIndex, Integer.toString(awaitingWork))); ", "-\t\t\t\t\t\t\t\t\tsubProgress.worked(1);", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t\tpreviousJob = currentJob;", "+\t\t\t\t\t\tif (VERBOSE)", "+\t\t\t\t\t\t\tUtil.verbose(\"FINISHED  concurrent job - \" + searchJob); //$NON-NLS-1$", "+\t\t\t\t\t\treturn status;", "+\t", "+\t\t\t\t\tcase IJob.CancelIfNotReady :", "+\t\t\t\t\t\tif (VERBOSE)", "+\t\t\t\t\t\t\tUtil.verbose(\"-> NOT READY - cancelling - \" + searchJob); //$NON-NLS-1$", "+\t\t\t\t\t\tif (VERBOSE)", "+\t\t\t\t\t\t\tUtil.verbose(\"CANCELED concurrent job - \" + searchJob); //$NON-NLS-1$", "+\t\t\t\t\t\tthrow new OperationCanceledException();", "+\t", "+\t\t\t\t\tcase IJob.WaitUntilReady :", "+\t\t\t\t\t\tint awaitingWork;", "+\t\t\t\t\t\tIJob previousJob = null;", "+\t\t\t\t\t\tIJob currentJob;", "+\t\t\t\t\t\tIProgressMonitor subProgress = null;", "+\t\t\t\t\t\ttry {", "+\t\t\t\t\t\t\tint totalWork = this.awaitingJobsCount();", "+\t\t\t\t\t\t\tif (progress != null && totalWork > 0) {", "+\t\t\t\t\t\t\t\tsubProgress = new SubProgressMonitor(progress, concurrentJobWork / 2);", "+\t\t\t\t\t\t\t\tsubProgress.beginTask(\"\", totalWork); //$NON-NLS-1$", "+\t\t\t\t\t\t\t\tconcurrentJobWork = concurrentJobWork / 2;", "+\t\t\t\t\t\t\t// use local variable to avoid potential NPE (see bug 20435 NPE when searching java method", "+\t\t\t\t\t\t\t// and bug 42760 NullPointerException in JobManager when searching)", "+\t\t\t\t\t\t\tThread t = this.processingThread;", "+\t\t\t\t\t\t\tint originalPriority = t == null ? -1 : t.getPriority();", "-\t\t\t\t\t\t\t\tif (VERBOSE)", "-\t\t\t\t\t\t\t\t\tUtil.verbose(\"-> GOING TO SLEEP - \" + searchJob);//$NON-NLS-1$", "-\t\t\t\t\t\t\t\tThread.sleep(50);", "-\t\t\t\t\t\t\t} catch (InterruptedException e) {", "-\t\t\t\t\t\t\t\t// ignore", "+\t\t\t\t\t\t\t\tif (t != null)", "+\t\t\t\t\t\t\t\t\tt.setPriority(Thread.currentThread().getPriority());", "+\t\t\t\t\t\t\t\tsynchronized(this) {", "+\t\t\t\t\t\t\t\t\tthis.awaitingClients++;", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\twhile ((awaitingWork = awaitingJobsCount()) > 0) {", "+\t\t\t\t\t\t\t\t\tif (subProgress != null && subProgress.isCanceled())", "+\t\t\t\t\t\t\t\t\t\tthrow new OperationCanceledException();", "+\t\t\t\t\t\t\t\t\tcurrentJob = currentJob();", "+\t\t\t\t\t\t\t\t\t// currentJob can be null when jobs have been added to the queue but job manager is not enabled", "+\t\t\t\t\t\t\t\t\tif (currentJob != null && currentJob != previousJob) {", "+\t\t\t\t\t\t\t\t\t\tif (VERBOSE)", "+\t\t\t\t\t\t\t\t\t\t\tUtil.verbose(\"-> NOT READY - waiting until ready - \" + searchJob);//$NON-NLS-1$", "+\t\t\t\t\t\t\t\t\t\tif (subProgress != null) {", "+\t\t\t\t\t\t\t\t\t\t\tsubProgress.subTask(", "+\t\t\t\t\t\t\t\t\t\t\t\tMessages.bind(Messages.manager_filesToIndex, Integer.toString(awaitingWork))); ", "+\t\t\t\t\t\t\t\t\t\t\tsubProgress.worked(1);", "+\t\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\t\tpreviousJob = currentJob;", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t\ttry {", "+\t\t\t\t\t\t\t\t\t\tif (VERBOSE)", "+\t\t\t\t\t\t\t\t\t\t\tUtil.verbose(\"-> GOING TO SLEEP - \" + searchJob);//$NON-NLS-1$", "+\t\t\t\t\t\t\t\t\t\tThread.sleep(50);", "+\t\t\t\t\t\t\t\t\t} catch (InterruptedException e) {", "+\t\t\t\t\t\t\t\t\t\t// ignore", "+\t\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t} finally {", "+\t\t\t\t\t\t\t\tsynchronized(this) {", "+\t\t\t\t\t\t\t\t\tthis.awaitingClients--;", "+\t\t\t\t\t\t\t\t}", "+\t\t\t\t\t\t\t\tif (t != null && originalPriority > -1 && t.isAlive())", "+\t\t\t\t\t\t\t\t\tt.setPriority(originalPriority);", "+\t\t\t\t\t\t} finally {", "+\t\t\t\t\t\t\tif (subProgress != null)", "+\t\t\t\t\t\t\t\tsubProgress.done();", "-\t\t\t\t\t} finally {", "-\t\t\t\t\t\tsynchronized(this) {", "-\t\t\t\t\t\t\tthis.awaitingClients--;", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tif (t != null && originalPriority > -1 && t.isAlive())", "-\t\t\t\t\t\t\tt.setPriority(originalPriority);", "-\t\t\t\t\t}", "-\t\t\t\t\tif (subProgress != null)", "-\t\t\t\t\t\tsubProgress.done();", "+\t\t\t\t}", "+\t\t\tstatus = searchJob.execute(progress == null ? null : new SubProgressMonitor(progress, concurrentJobWork));", "+\t\t} finally {", "+\t\t\tif (progress != null)", "+\t\t\t\tprogress.done();", "+\t\t\tif (VERBOSE)", "+\t\t\t\tUtil.verbose(\"FINISHED  concurrent job - \" + searchJob); //$NON-NLS-1$", "-\t\tstatus = searchJob.execute(progress == null ? null : new SubProgressMonitor(progress, concurrentJobWork));", "-\t\tif (progress != null)", "-\t\t\tprogress.done();", "-\t\tif (VERBOSE)", "-\t\t\tUtil.verbose(\"FINISHED  concurrent job - \" + searchJob); //$NON-NLS-1$"]}], "num": 63918}