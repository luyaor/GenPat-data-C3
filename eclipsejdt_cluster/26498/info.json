{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "03b508c56cd0c50e8e604c5dcefb29dc", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0d1bf75ec038953167dcdae22c68b732", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/APTDispatchRunnable.java", "commitBeforeChange": "6cb413dbd992ad73f847d7b4e14e78f1406fa2fc", "commitAfterChange": "8659b871eae5c2008485cfb120ce2c8f8ecbfe04", "methodNumberBeforeChange": 19, "methodNumberAfterChange": 20, "signatureBeforeChange": " \t \tprivate void cleanupAllGeneratedFilesFrom(BuildContext[] cpResults)", "signatureAfterChange": " \t \tprivate void cleanupAllGeneratedFilesFrom(BuildContext[] cpResults)", "diff": ["+\t\tif (cpResults == null) {", "+\t\t\treturn;", "+\t\t}", "-\t\tif( cpResults != null ){", "-\t\t\tGeneratedFileManager gfm = _aptProject.getGeneratedFileManager();", "-\t\t\tfor( BuildContext cpResult : cpResults){\t\t\t", "-\t\t\t\tSet<IFile> lastGeneratedFiles = gfm.getGeneratedFilesForParent( cpResult.getFile() );", "-\t\t\t\tcleanupNoLongerGeneratedFiles( ", "-\t\t\t\t\t\tcpResult, ", "-\t\t\t\t\t\tlastGeneratedFiles, ", "-\t\t\t\t\t\tCollections.<IFile>emptySet(), ", "-\t\t\t\t\t\tgfm,", "-\t\t\t\t\t\tnull, ", "-\t\t\t\t\t\tdeleted);", "-\t\t\t\t", "-\t\t\t\tif( deleted.size() > 0 ){", "-\t\t\t\t\tfinal IFile[] deletedFilesArray = new IFile[deleted.size()];", "-\t\t\t\t\tcpResult.recordDeletedGeneratedFiles(deleted.toArray(deletedFilesArray));", "-\t\t\t\t}", "+\t\tGeneratedFileManager gfm = _aptProject.getGeneratedFileManager();", "+\t\tfor( BuildContext cpResult : cpResults){", "+\t\t\tfinal IFile parentFile = cpResult.getFile();", "+\t\t\tcleanupNoLongerGeneratedFiles( ", "+\t\t\t\t\tparentFile, ", "+\t\t\t\t\tCollections.<IFile>emptySet(), ", "+\t\t\t\t\tgfm,", "+\t\t\t\t\tnull, ", "+\t\t\t\t\tdeleted);", "+\t\t\t", "+\t\t\tif( deleted.size() > 0 ){", "+\t\t\t\tfinal IFile[] deletedFilesArray = new IFile[deleted.size()];", "+\t\t\t\tcpResult.recordDeletedGeneratedFiles(deleted.toArray(deletedFilesArray));"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9a8d1bad6af9b553f15a39446771c28f", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/APTDispatchRunnable.java", "commitBeforeChange": "bfcd45867d04fefcde8c411b2c4f613fed962f2b", "commitAfterChange": "8360857ac96415dcd60ac94fbc284e7801424ade", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": " \t \tprivate Set<IFile> cleanupAllGeneratedFilesFrom( \t\t\tICompilationParticipantResult[] cpResults, \t\t\tSet<IFile> deletedFiles)", "signatureAfterChange": " \t \tprivate void cleanupAllGeneratedFilesFrom(ICompilationParticipantResult[] cpResults)", "diff": ["-\tprivate Set<IFile> cleanupAllGeneratedFilesFrom(", "-\t\t\tICompilationParticipantResult[] cpResults,", "-\t\t\tSet<IFile> deletedFiles){", "-\t\tif( deletedFiles == null )", "-\t\t\tdeletedFiles = new HashSet<IFile>();", "+\tprivate void cleanupAllGeneratedFilesFrom(ICompilationParticipantResult[] cpResults){", "+\t\tfinal List<IFile> deleted = new ArrayList<IFile>();", "-\t\t\tfor( ICompilationParticipantResult cpResult : cpResults){", "-\t\t\t\tIFile f = cpResult.getFile();", "-\t\t\t\tcleanupAllGeneratedFilesForParent( f, null, deletedFiles );", "+\t\t\tGeneratedFileManager gfm = _aptProject.getGeneratedFileManager();", "+\t\t\tfor( ICompilationParticipantResult cpResult : cpResults){\t\t\t", "+\t\t\t\tSet<IFile> lastGeneratedFiles = gfm.getGeneratedFilesForParent( cpResult.getFile() );", "+\t\t\t\tcleanupNoLongerGeneratedFiles( ", "+\t\t\t\t\t\tcpResult, ", "+\t\t\t\t\t\tlastGeneratedFiles, ", "+\t\t\t\t\t\tCollections.<IFile>emptySet(), ", "+\t\t\t\t\t\tgfm,", "+\t\t\t\t\t\tnull, ", "+\t\t\t\t\t\tdeleted);", "+\t\t\t\t", "+\t\t\t\tif( deleted.size() > 0 ){", "+\t\t\t\t\tfinal IFile[] deletedFilesArray = new IFile[deleted.size()];", "+\t\t\t\t\tcpResult.recordDeletedGeneratedFiles(deleted.toArray(deletedFilesArray));", "+\t\t\t\t}", "-\t\treturn deletedFiles;", "-\t}", "+\t}\t"]}], "num": 26498}