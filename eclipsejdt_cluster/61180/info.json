{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "cc1e6a6305ced24eaf8fa51daae3532f", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "4ed17a256618cb8c9dd37cb8c179d267", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/JavaModelManager.java", "commitBeforeChange": "0ee327f784f1f4e34e68a84648fe26304fce751c", "commitAfterChange": "5b5d83d3544b223e577e7fddd59f42874f12eb50", "methodNumberBeforeChange": 144, "methodNumberAfterChange": 144, "signatureBeforeChange": " \t \tprivate void saveVariablesAndContainers() throws CoreException", "signatureAfterChange": " \t \tprivate void saveVariablesAndContainers() throws CoreException", "diff": ["-\t\t\t", "-\t\t\t// variables", "-\t\t\tout.writeInt(this.variables.size());", "-\t\t\tIterator variableNames = this.variables.keySet().iterator();", "-\t\t\twhile (variableNames.hasNext()) {", "-\t\t\t\tString variableName = (String) variableNames.next();", "-\t\t\t\tout.writeUTF(variableName);", "-\t\t\t\tIPath path = (IPath) this.variables.get(variableName);", "-\t\t\t\tout.writeUTF(path == null ? CP_ENTRY_IGNORE : path.toPortableString());", "-\t\t\t}", "-\t\t\t", "-\t\t\t// containers", "-\t\t\tIJavaProject[] projects = getJavaModel().getJavaProjects();", "-\t\t\tint length = projects.length;", "-\t\t\tout.writeInt(length);", "-\t\t\tfor (int i = 0; i < length; i++) {", "-\t\t\t    IJavaProject project = projects[i];", "-\t\t\t\t// clone while iterating (see https://bugs.eclipse.org/bugs/show_bug.cgi?id=59638)", "-\t\t\t\tMap projectContainers = containerClone(project);", "-\t\t\t\tout.writeUTF(project.getElementName());", "-\t\t\t\tif (projectContainers == null) {", "-\t\t\t\t\tout.writeInt(0);", "-\t\t\t\t\tcontinue;", "-\t\t\t\t}", "-\t\t\t\tHashMap containersToSave = new HashMap();", "-\t\t\t\tfor (Iterator iterator = projectContainers.keySet().iterator(); iterator.hasNext();) {", "-\t\t\t\t    IPath containerPath = (IPath) iterator.next();", "-\t\t\t\t    IClasspathContainer container = (IClasspathContainer) projectContainers.get(containerPath);", "-\t\t\t\t\tString containerString = null;", "-\t\t\t\t\ttry {", "-\t\t\t\t\t\tif (container == null) {", "-\t\t\t\t\t\t\t// container has not been initialized yet, use previous session value", "-\t\t\t\t\t\t\t// (see https://bugs.eclipse.org/bugs/show_bug.cgi?id=73969)", "-\t\t\t\t\t\t\tcontainer = getPreviousSessionContainer(containerPath, project);", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tif (container != null) {", "-\t\t\t\t\t\t\tIClasspathEntry[] entries = container.getClasspathEntries();", "-\t\t\t\t\t\t\tcontainerString = ((JavaProject)project).encodeClasspath(", "-\t\t\t\t\t\t\t\t\tentries, ", "-\t\t\t\t\t\t\t\t\tnull, ", "-\t\t\t\t\t\t\t\t\tfalse,", "-\t\t\t\t\t\t\t\t\tnull/*not interested in unknown elements*/);", "-\t\t\t\t\t\t}", "-\t\t\t\t\t} catch(JavaModelException e){", "-\t\t\t\t\t\t// could not encode entry: will not persist", "-\t\t\t\t\t\tUtil.log(e, \"Could not persist container \" + containerPath + \" for project \" + project.getElementName()); //$NON-NLS-1$ //$NON-NLS-2$", "-\t\t\t\t\t}", "-\t\t\t\t\tif (containerString != null)", "-\t\t\t\t\t\tcontainersToSave.put(containerPath, containerString);", "-\t\t\t\t}", "-\t\t\t\tout.writeInt(containersToSave.size());", "-\t\t\t\tIterator iterator = containersToSave.keySet().iterator();", "-\t\t\t\twhile (iterator.hasNext()) {", "-\t\t\t\t\tIPath containerPath = (IPath) iterator.next();", "-\t\t\t\t\tout.writeUTF(containerPath.toPortableString());", "-\t\t\t\t\tString containerString = (String) containersToSave.get(containerPath);", "-\t\t\t\t\tout.writeInt(containerString.length());", "-\t\t\t\t\tout.writeBytes(containerString);", "-\t\t\t\t}", "-\t\t\t}", "+    \t\t\t", "+    \t\t\t// variables", "+    \t\t\tout.writeInt(this.variables.size());", "+    \t\t\tIterator iterator = this.variables.entrySet().iterator();", "+    \t\t\twhile (iterator.hasNext()) {", "+    \t\t\t\tMap.Entry entry = (Map.Entry) iterator.next();", "+    \t\t\t\tString variableName = (String) entry.getKey();", "+    \t\t\t\tout.writeUTF(variableName);", "+    \t\t\t\tIPath path = (IPath) entry.getValue();", "+    \t\t\t\tout.writeUTF(path == null ? CP_ENTRY_IGNORE : path.toPortableString());", "+    \t\t\t}", "+    \t\t\t", "+    \t\t\t// containers", "+    \t\t\tIJavaProject[] projects = getJavaModel().getJavaProjects();", "+    \t\t\tint length = projects.length;", "+    \t\t\tout.writeInt(length);", "+    \t\t\tfor (int i = 0; i < length; i++) {", "+    \t\t\t    IJavaProject project = projects[i];", "+    \t\t\t\t// clone while iterating (see https://bugs.eclipse.org/bugs/show_bug.cgi?id=59638)", "+    \t\t\t\tMap projectContainers = containerClone(project);", "+    \t\t\t\tout.writeUTF(project.getElementName());", "+    \t\t\t\tif (projectContainers == null) {", "+    \t\t\t\t\tout.writeInt(0);", "+    \t\t\t\t\tcontinue;", "+    \t\t\t\t}", "+    \t\t\t\tHashMap containersToSave = new HashMap();", "+    \t\t\t\tfor (iterator = projectContainers.entrySet().iterator(); iterator.hasNext();) {", "+    \t\t\t\t\tMap.Entry entry = (Map.Entry) iterator.next();", "+    \t\t\t\t    IPath containerPath = (IPath) entry.getKey();", "+    \t\t\t\t    IClasspathContainer container = (IClasspathContainer) entry.getValue();", "+    \t\t\t\t\tString containerString = null;", "+    \t\t\t\t\ttry {", "+    \t\t\t\t\t\tif (container == null) {", "+    \t\t\t\t\t\t\t// container has not been initialized yet, use previous session value", "+    \t\t\t\t\t\t\t// (see https://bugs.eclipse.org/bugs/show_bug.cgi?id=73969)", "+    \t\t\t\t\t\t\tcontainer = getPreviousSessionContainer(containerPath, project);", "+    \t\t\t\t\t\t}", "+    \t\t\t\t\t\tif (container != null) {", "+    \t\t\t\t\t\t\tIClasspathEntry[] entries = container.getClasspathEntries();", "+    \t\t\t\t\t\t\tcontainerString = ((JavaProject)project).encodeClasspath(", "+    \t\t\t\t\t\t\t\t\tentries, ", "+    \t\t\t\t\t\t\t\t\tnull, ", "+    \t\t\t\t\t\t\t\t\tfalse,", "+    \t\t\t\t\t\t\t\t\tnull/*not interested in unknown elements*/);", "+    \t\t\t\t\t\t}", "+    \t\t\t\t\t} catch(JavaModelException e){", "+    \t\t\t\t\t\t// could not encode entry: will not persist", "+    \t\t\t\t\t\tUtil.log(e, \"Could not persist container \" + containerPath + \" for project \" + project.getElementName()); //$NON-NLS-1$ //$NON-NLS-2$", "+    \t\t\t\t\t}", "+    \t\t\t\t\tif (containerString != null)", "+    \t\t\t\t\t\tcontainersToSave.put(containerPath, containerString);", "+    \t\t\t\t}", "+    \t\t\t\tout.writeInt(containersToSave.size());", "+    \t\t\t\titerator = containersToSave.entrySet().iterator();", "+    \t\t\t\twhile (iterator.hasNext()) {", "+    \t\t\t\t\tMap.Entry entry = (Map.Entry) iterator.next();", "+    \t\t\t\t\tIPath containerPath = (IPath) entry.getKey();", "+    \t\t\t\t\tout.writeUTF(containerPath.toPortableString());", "+    \t\t\t\t\tString containerString = (String) entry.getValue();", "+    \t\t\t\t\tout.writeInt(containerString.length());", "+    \t\t\t\t\tout.writeBytes(containerString);", "+    \t\t\t\t}", "+    \t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "99c903c228a1e5c245557f8d646ba4d7", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/JavaModelManager.java", "commitBeforeChange": "0ee327f784f1f4e34e68a84648fe26304fce751c", "commitAfterChange": "5b5d83d3544b223e577e7fddd59f42874f12eb50", "methodNumberBeforeChange": 166, "methodNumberAfterChange": 166, "signatureBeforeChange": " \tprivate Map secondaryTypesSearching(IJavaProject project, boolean waitForIndexes, IProgressMonitor monitor, final PerProjectInfo projectInfo) throws JavaModelException", "signatureAfterChange": " \tprivate Map secondaryTypesSearching(IJavaProject project, boolean waitForIndexes, IProgressMonitor monitor, final PerProjectInfo projectInfo) throws JavaModelException", "diff": ["-\t\tIterator packages = secondaryTypes.keySet().iterator();", "+\t\tIterator packages = secondaryTypes.values().iterator();", "-\t\t\tString packName = (String) packages.next();", "-\t\t\tHashMap types = (HashMap) secondaryTypes.get(packName);", "-\t\t\tIterator names = types.keySet().iterator();", "+\t\t\tHashMap types = (HashMap) packages.next();", "+\t\t\tIterator names = types.entrySet().iterator();", "-\t\t\t\tString typeName = (String) names.next();", "-\t\t\t\tString path = (String) types.get(typeName);", "+\t\t\t\tMap.Entry entry = (Map.Entry) names.next();", "+\t\t\t\tString typeName = (String) entry.getKey();", "+\t\t\t\tString path = (String) entry.getValue();", "-\t\t\t\tIterator keys = secondaryTypes.keySet().iterator();", "-\t\t\t\twhile (keys.hasNext()) {", "-\t\t\t\t\tString qualifiedName = (String) keys.next();", "-\t\t\t\t\tUtil.verbose(\"\t\t- \"+qualifiedName+'-'+secondaryTypes.get(qualifiedName) ); //$NON-NLS-1$", "+\t\t\t\tIterator entries = secondaryTypes.entrySet().iterator();", "+\t\t\t\twhile (entries.hasNext()) {", "+\t\t\t\t\tMap.Entry entry = (Map.Entry) entries.next();", "+\t\t\t\t\tString qualifiedName = (String) entry.getKey();", "+\t\t\t\t\tUtil.verbose(\"\t\t- \"+qualifiedName+'-'+ entry.getValue()); //$NON-NLS-1$"]}], "num": 61180}