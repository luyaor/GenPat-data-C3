{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "faef05ed71b4c0aaec629801c3df644f", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "8f4274e50e8238312dbc8fde9efdebc8", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ClassFile.java", "commitBeforeChange": "39e0b3c44033d41fbb2f81071d1364bb178092c7", "commitAfterChange": "b4de16a0dc7d3ad9d6dd3c598e29125b9c3084c3", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 26, "signatureBeforeChange": " \tpublic void completeCodeAttributeForSyntheticAccessMethod( \t\tSyntheticAccessMethodBinding binding, \t\tint codeAttributeOffset, \t\tint[] startLineIndexes)", "signatureAfterChange": " \tpublic void completeCodeAttributeForSyntheticAccessMethod( \t\tSyntheticAccessMethodBinding binding, \t\tint codeAttributeOffset, \t\tint[] startLineIndexes)", "diff": ["-\t\t\tfor (int i = 0; i < codeStream.allLocalsCounter; i++) {", "+", "+\t\t\t// used to remember the local variable with a generic type", "+\t\t\tint genericLocalVariablesCounter = 0;", "+\t\t\tLocalVariableBinding[] genericLocalVariables = null;", "+\t\t\tint numberOfGenericEntries = 0;", "+\t\t\t", "+\t\t\tfor (int i = 0, max = codeStream.allLocalsCounter; i < max; i++) {", "+\t\t\t\tfinal TypeBinding localVariableTypeBinding = localVariable.type;", "+\t\t\t\tboolean isParameterizedType = localVariableTypeBinding.isParameterizedType() || localVariableTypeBinding.isTypeVariable();", "+\t\t\t\tif (localVariable.initializationCount != 0 && isParameterizedType) {", "+\t\t\t\t\tif (genericLocalVariables == null) {", "+\t\t\t\t\t\t// we cannot have more than max locals", "+\t\t\t\t\t\tgenericLocalVariables = new LocalVariableBinding[max];", "+\t\t\t\t\t}", "+\t\t\t\t\tgenericLocalVariables[genericLocalVariablesCounter++] = localVariable;", "+\t\t\t\t}", "+\t\t\t\t\t\tif (isParameterizedType) {", "+\t\t\t\t\t\t\tnumberOfGenericEntries++;", "+\t\t\t\t\t\t}", "-\t\t\t\t\t\tdescriptorIndex = constantPool.literalIndex(localVariable.type.signature());", "+\t\t\t\t\t\tdescriptorIndex = constantPool.literalIndex(localVariableTypeBinding.signature());", "+", "+\t\t\tif (genericLocalVariablesCounter != 0) {", "+\t\t\t\t// add the local variable type table attribute", "+\t\t\t\tint maxOfEntries = 8 + numberOfGenericEntries * 10;", "+\t\t\t\t// reserve enough space", "+\t\t\t\tif (localContentsOffset + maxOfEntries >= this.contents.length) {", "+\t\t\t\t\tresizeContents(maxOfEntries);", "+\t\t\t\t}", "+\t\t\t\tint localVariableTypeNameIndex =", "+\t\t\t\t\tconstantPool.literalIndex(AttributeNamesConstants.LocalVariableTypeTableName);", "+\t\t\t\tcontents[localContentsOffset++] = (byte) (localVariableTypeNameIndex >> 8);", "+\t\t\t\tcontents[localContentsOffset++] = (byte) localVariableTypeNameIndex;", "+\t\t\t\tvalue = numberOfGenericEntries * 10 + 2;", "+\t\t\t\tcontents[localContentsOffset++] = (byte) (value >> 24);", "+\t\t\t\tcontents[localContentsOffset++] = (byte) (value >> 16);", "+\t\t\t\tcontents[localContentsOffset++] = (byte) (value >> 8);", "+\t\t\t\tcontents[localContentsOffset++] = (byte) value;", "+\t\t\t\tcontents[localContentsOffset++] = (byte) (numberOfGenericEntries >> 8);", "+\t\t\t\tcontents[localContentsOffset++] = (byte) numberOfGenericEntries;", "+", "+\t\t\t\tfor (int i = 0; i < genericLocalVariablesCounter; i++) {", "+\t\t\t\t\tLocalVariableBinding localVariable = genericLocalVariables[i];", "+\t\t\t\t\tfor (int j = 0; j < localVariable.initializationCount; j++) {", "+\t\t\t\t\t\tint startPC = localVariable.initializationPCs[j << 1];", "+\t\t\t\t\t\tint endPC = localVariable.initializationPCs[(j << 1) + 1];", "+\t\t\t\t\t\tif (startPC != endPC) { // only entries for non zero length", "+\t\t\t\t\t\t\t// now we can safely add the local entry", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) (startPC >> 8);", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) startPC;", "+\t\t\t\t\t\t\tint length = endPC - startPC;", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) (length >> 8);", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) length;", "+\t\t\t\t\t\t\tnameIndex = constantPool.literalIndex(localVariable.name);", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) (nameIndex >> 8);", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) nameIndex;", "+\t\t\t\t\t\t\tdescriptorIndex = constantPool.literalIndex(localVariable.type.genericTypeSignature());", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) (descriptorIndex >> 8);", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) descriptorIndex;", "+\t\t\t\t\t\t\tint resolvedPosition = localVariable.resolvedPosition;", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) (resolvedPosition >> 8);", "+\t\t\t\t\t\t\tcontents[localContentsOffset++] = (byte) resolvedPosition;", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t\tattributeNumber++;", "+\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ff9075ed5d07f8a5f5733edafbc12135", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/codeassist/org/eclipse/jdt/internal/codeassist/complete/CompletionParser.java", "commitBeforeChange": "69b02d68015b1f30ee38d1576a843274517957c7", "commitAfterChange": "c7a9edf536467451ba659d7e03ac6c483c5c0cfe", "methodNumberBeforeChange": 59, "methodNumberAfterChange": 68, "signatureBeforeChange": " public NameReference createSingleAssistNameReference(char[] name, long position)", "signatureAfterChange": " public NameReference createSingleAssistNameReference(char[] name, long position)", "diff": ["-\treturn new CompletionOnSingleNameReference(name, position);", "+\tint kind = topKnownElementKind(COMPLETION_OR_ASSIST_PARSER);", "+\tif(!isInsideMethod()) {", "+\t\treturn new CompletionOnSingleNameReference(name, position);", "+\t} else {", "+\t\tboolean canBeExplicitConstructorCall = false;", "+\t\tif(kind == K_BLOCK_DELIMITER", "+\t\t\t&& previousKind == K_BLOCK_DELIMITER", "+\t\t\t&& previousInfo == DO) {", "+\t\t\treturn new CompletionOnKeyword3(name, position, Keywords.WHILE);", "+\t\t} else if(kind == K_BLOCK_DELIMITER", "+\t\t\t&& previousKind == K_BLOCK_DELIMITER", "+\t\t\t&& previousInfo == TRY) {", "+\t\t\treturn new CompletionOnKeyword3(name, position, new char[][]{Keywords.CATCH, Keywords.FINALLY});", "+\t\t} else {", "+\t\t\tchar[][] keywords = new char[Keywords.COUNT][];", "+\t\t\tint count = 0;", "+\t\t\t", "+\t\t\tif((lastModifiers & AccStatic) == 0) {", "+\t\t\t\tkeywords[count++]= Keywords.SUPER;", "+\t\t\t\tkeywords[count++]= Keywords.THIS;", "+\t\t\t}", "+\t\t\tkeywords[count++]= Keywords.NEW;", "+\t\t\t", "+\t\t\tif(kind == K_BLOCK_DELIMITER) {", "+\t\t\t\tif(canBeExplicitConstructor == YES) {", "+\t\t\t\t\tcanBeExplicitConstructorCall = true;", "+\t\t\t\t}", "+\t\t\t\t", "+\t\t\t\tkeywords[count++]= Keywords.ASSERT;", "+\t\t\t\tkeywords[count++]= Keywords.DO;", "+\t\t\t\tkeywords[count++]= Keywords.FOR;", "+\t\t\t\tkeywords[count++]= Keywords.IF;", "+\t\t\t\tkeywords[count++]= Keywords.RETURN;", "+\t\t\t\tkeywords[count++]= Keywords.SWITCH;", "+\t\t\t\tkeywords[count++]= Keywords.SYNCHRONIZED;", "+\t\t\t\tkeywords[count++]= Keywords.THROW;", "+\t\t\t\tkeywords[count++]= Keywords.TRY;", "+\t\t\t\tkeywords[count++]= Keywords.WHILE;", "+\t\t\t\t", "+\t\t\t\tkeywords[count++]= Keywords.FINAL;", "+\t\t\t\tkeywords[count++]= Keywords.CLASS;", "+\t\t\t\t", "+\t\t\t\tif(previousKind == K_BLOCK_DELIMITER) {", "+\t\t\t\t\tswitch (previousInfo) {", "+\t\t\t\t\t\tcase IF :", "+\t\t\t\t\t\t\tkeywords[count++]= Keywords.ELSE;", "+\t\t\t\t\t\t\tbreak;", "+\t\t\t\t\t\tcase CATCH :", "+\t\t\t\t\t\t\tkeywords[count++]= Keywords.CATCH;", "+\t\t\t\t\t\t\tkeywords[count++]= Keywords.FINALLY;", "+\t\t\t\t\t\t\tbreak;", "+\t\t\t\t\t}", "+\t\t\t\t}", "+\t\t\t\tif(isInsideLoop()) {", "+\t\t\t\t\tkeywords[count++]= Keywords.CONTINUE;", "+\t\t\t\t}", "+\t\t\t\tif(isInsideBreakable()) {", "+\t\t\t\t\tkeywords[count++]= Keywords.BREAK;", "+\t\t\t\t}", "+\t\t\t\tif(topKnownElementInfo(COMPLETION_OR_ASSIST_PARSER) == SWITCH) {", "+\t\t\t\t\tkeywords[count++]= Keywords.CASE;", "+\t\t\t\t\tkeywords[count++]= Keywords.DEFAULT;", "+\t\t\t\t}", "+\t\t\t} else {", "+\t\t\t\tkeywords[count++]= Keywords.TRUE;", "+\t\t\t\tkeywords[count++]= Keywords.FALSE;", "+\t\t\t\tkeywords[count++]= Keywords.NULL;", "+\t\t\t", "+\t\t\t\tif(kind == K_SWITCH_LABEL) {", "+\t\t\t\t\tif(topKnownElementInfo(COMPLETION_OR_ASSIST_PARSER) != DEFAULT) {", "+\t\t\t\t\t\tkeywords[count++]= Keywords.DEFAULT;", "+\t\t\t\t\t}", "+\t\t\t\t\tkeywords[count++]= Keywords.BREAK;", "+\t\t\t\t\tkeywords[count++]= Keywords.CASE;", "+\t\t\t\t}", "+\t\t\t}", "+\t\t\tSystem.arraycopy(keywords, 0 , keywords = new char[count][], 0, count);", "+\t\t\t", "+\t\t\treturn new CompletionOnSingleNameReference(name, position, keywords, canBeExplicitConstructorCall);", "+\t\t}", "+\t}"]}], "num": 28101}