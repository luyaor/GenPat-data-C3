{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "5ceda3290dcb985f23de829efa3dd112", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "07fdb491e4fbee398775b9ab3ec8be20", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/newbuilder/ReferenceCollection.java", "commitBeforeChange": "39745a85705361f7e5b8ca890f80a07d85799adc", "commitAfterChange": "9ce2d699e0d21b200d57773c8cb35525d3ffa98d", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 5, "signatureBeforeChange": "\r \r static char[][][] internQualifiedNames(char[][][] qualifiedNames, boolean removeWellKnown)", "signatureAfterChange": "\r \r static char[][][] internQualifiedNames(char[][][] qualifiedNames)", "diff": ["-static char[][][] internQualifiedNames(char[][][] qualifiedNames, boolean removeWellKnown) {\r", "+static char[][][] internQualifiedNames(char[][][] qualifiedNames) {\r", "-\tArrayList keepers = new ArrayList(length);\r", "+\tchar[][][] keepers = new char[length][][];\r", "+\tint index = 0;\r", "+\t\tint qLength = qualifiedName.length;\r", "-\t\t\tif (CharOperation.equals(qualifiedName, internedName)) {\r", "-\t\t\t\tkeepers.add(internedName);\r", "+\t\t\tif (qLength == internedName.length && CharOperation.equals(qualifiedName, internedName)) {\r", "+\t\t\t\tkeepers[index++] = internedName;\r", "-\t\t\tif (CharOperation.equals(qualifiedName, WellKnownQualifiedNames[j])) {\r", "-\t\t\t\tif (!removeWellKnown)\r", "-\t\t\t\t\tkeepers.add(WellKnownQualifiedNames[j]);\r", "+\t\t\tchar[][] wellKnownName = WellKnownQualifiedNames[j];\r", "+\t\t\tif (qLength > wellKnownName.length)\r", "+\t\t\t\tbreak; // all other well known names are shorter\r", "+\t\t\tif (qLength == wellKnownName.length && CharOperation.equals(qualifiedName, wellKnownName))\r", "-\t\t\t}\r", "-\t\tkeepers.add(qualifiedName);\r", "+\t\tkeepers[index++] = qualifiedName;\r", "-\tchar[][][] result = new char[keepers.size()][][];\r", "-\tkeepers.toArray(result);\r", "-\treturn result;\r", "+\tif (length > index) {\r", "+\t\tif (length == 0) return EmptyQualifiedNames;\r", "+\t\tSystem.arraycopy(keepers, 0, keepers = new char[index][][], 0, index);\r", "+\t}\r", "+\treturn keepers;\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "311d775acc5b26f322fcf03e9a04c996", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ClassFile.java", "commitBeforeChange": "4cd7b0042adaa5239f354bb5b89cc98c811b7e1c", "commitAfterChange": "e6a94071ba1347cd79bc7467e3bac32c94398042", "methodNumberBeforeChange": 45, "methodNumberAfterChange": 45, "signatureBeforeChange": "  \tprivate void generateMissingTypesAttribute()", "signatureAfterChange": "  \tprivate void generateMissingTypesAttribute()", "diff": ["-\t\tint numberOfMissingTypes = this.missingTypes.size();", "-\t\tTypeBinding[] missingTypesArray;", "-\t\tthis.missingTypes.toArray(missingTypesArray = new TypeBinding[numberOfMissingTypes]);", "-\t\tArrays.sort(missingTypesArray, new Comparator() {", "-\t\t\tpublic int compare(Object o1, Object o2) {", "-\t\t\t\tTypeBinding binding1 = (TypeBinding) o1;", "-\t\t\t\tTypeBinding binding2 = (TypeBinding) o2;", "-\t\t\t\treturn CharOperation.compareTo(binding1.constantPoolName(), binding2.constantPoolName());", "-\t\t\t}", "-\t\t});", "+\t\tint initialSize = this.missingTypes.size();", "+\t\tint[] missingTypesIndexes = new int[initialSize];", "+\t\tint numberOfMissingTypes = 0;", "+\t\tnext : for (int i = 0; i < initialSize; i++) {", "+\t\t\tint missingTypeIndex = this.constantPool.literalIndexForType((TypeBinding) this.missingTypes.get(i));", "+\t\t\tfor (int j = 0; j < numberOfMissingTypes; j++)", "+\t\t\t\tif (missingTypesIndexes[j] == missingTypeIndex)", "+\t\t\t\t\tcontinue next;", "+\t\t\tmissingTypesIndexes[numberOfMissingTypes++] = missingTypeIndex;", "+\t\t}", "+\t\tif (numberOfMissingTypes > 1)", "+\t\t\tArrays.sort(missingTypesIndexes);", "-\t\t\tint missingTypeIndex = this.constantPool.literalIndexForType(missingTypesArray[i]);", "+\t\t\tint missingTypeIndex = missingTypesIndexes[i];"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "b6cd13f68232c591135db3d86ef4b6de", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/newbuilder/ReferenceCollection.java", "commitBeforeChange": "39745a85705361f7e5b8ca890f80a07d85799adc", "commitAfterChange": "9ce2d699e0d21b200d57773c8cb35525d3ffa98d", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "\r \r static char[][] internSimpleNames(char[][] simpleNames, boolean removeWellKnown)", "signatureAfterChange": "\r \r static char[][] internSimpleNames(char[][] simpleNames, boolean removeWellKnown)", "diff": ["-\tArrayList keepers = new ArrayList(length);\r", "+\tchar[][] keepers = new char[length][];\r", "+\tint index = 0;\r", "+\t\tint sLength = name.length;\r", "-\t\t\tif (CharOperation.equals(name, internedName)) {\r", "-\t\t\t\tkeepers.add(internedName);\r", "+\t\t\tif (sLength == internedName.length && CharOperation.equals(name, internedName)) {\r", "+\t\t\t\tkeepers[index++] = internedName;\r", "-\t\t\tif (CharOperation.equals(name, WellKnownSimpleNames[j])) {\r", "+\t\t\tchar[] wellKnownName = WellKnownSimpleNames[j];\r", "+\t\t\tif (sLength > wellKnownName.length)\r", "+\t\t\t\tbreak; // all other well known names are shorter\r", "+\t\t\tif (sLength == wellKnownName.length && CharOperation.equals(name, wellKnownName)) {\r", "-\t\t\t\t\tkeepers.add(WellKnownSimpleNames[j]);\r", "+\t\t\t\t\tkeepers[index++] = WellKnownSimpleNames[j];\r", "-\t\tkeepers.add(name);\r", "+\t\tkeepers[index++] = name;\r", "-\tchar[][] result = new char[keepers.size()][];\r", "-\tkeepers.toArray(result);\r", "-\treturn result;\r", "+\tif (length > index) {\r", "+\t\tif (index == 0) return EmptySimpleNames;\r", "+\t\tSystem.arraycopy(keepers, 0, keepers = new char[index][], 0, index);\r", "+\t}\r", "+\treturn keepers;\r"]}], "num": 46363}