{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "637c70a1f73fac316796da60a2a5940f", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "73c995681f7ade49e98ffa69e716d18c", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/JavaCore.java", "commitBeforeChange": "9afa57a2d41016e7991d3b27a145ea22577cef30", "commitAfterChange": "ddfc08455c51ec3ca9ceb0eaefe5f366b10475a4", "methodNumberBeforeChange": 17, "methodNumberAfterChange": 17, "signatureBeforeChange": " \tpublic static IPath getClasspathVariable(final String variableName)", "signatureAfterChange": " \tpublic static IPath getClasspathVariable(final String variableName)", "diff": ["-\t\tIPath variablePath = (IPath) JavaModelManager.variableGet(variableName);", "+\t\tIPath variablePath = JavaModelManager.variableGet(variableName);", "-\t\tif (variablePath == null){", "-\t\t\tfinal ClasspathVariableInitializer initializer = getClasspathVariableInitializer(variableName);", "-\t\t\tif (initializer != null){", "-\t\t\t\tJavaModelManager.variablePut(variableName, JavaModelManager.VariableInitializationInProgress); // avoid initialization cycles", "-\t\t\t\t// wrap initializer call with Safe runnable in case initializer would be causing some grief", "-\t\t\t\tPlatform.run(new ISafeRunnable() {", "-\t\t\t\t\tpublic void handleException(Throwable exception) {", "-\t\t\t\t\t\tUtil.log(exception, \"Exception occurred in classpath variable initializer: \"+initializer); //$NON-NLS-1$", "-\t\t\t\t\t}", "-\t\t\t\t\tpublic void run() throws Exception {", "-\t\t\t\t\t\tinitializer.initialize(variableName);", "-\t\t\t\t\t}", "-\t\t\t\t});", "-\t\t\t\tvariablePath = (IPath) JavaModelManager.variableGet(variableName); // retry", "-\t\t\t\tif (variablePath == JavaModelManager.VariableInitializationInProgress) return null; // break cycle", "+\t\tif (variablePath != null && variablePath != JavaModelManager.VariablePreviouslyPersisted) {", "+\t\t\treturn variablePath;", "+\t\t}", "+\t\t// even if persisted value exists, initializer is given priority, only if no initializer is found the persisted value is reused", "+\t\tfinal ClasspathVariableInitializer initializer = getClasspathVariableInitializer(variableName);", "+\t\tif (initializer != null){", "+\t\t\tJavaModelManager.variablePut(variableName, JavaModelManager.VariableInitializationInProgress); // avoid initialization cycles", "+\t\t\t// wrap initializer call with Safe runnable in case initializer would be causing some grief", "+\t\t\tPlatform.run(new ISafeRunnable() {", "+\t\t\t\tpublic void handleException(Throwable exception) {", "+\t\t\t\t\tUtil.log(exception, \"Exception occurred in classpath variable initializer: \"+initializer); //$NON-NLS-1$", "+\t\t\t\t}", "+\t\t\t\tpublic void run() throws Exception {", "+\t\t\t\t\tinitializer.initialize(variableName);", "+\t\t\t\t}", "+\t\t\t});", "+\t\t\tvariablePath = (IPath) JavaModelManager.variableGet(variableName); // retry", "+\t\t\tif (variablePath == JavaModelManager.VariableInitializationInProgress) return null; // break cycle", "+\t\t\tif (JavaModelManager.CP_RESOLVE_VERBOSE){", "+\t\t\t\tSystem.out.println(\"CPVariable INIT - after initialization: \" + variableName + \" --> \" + variablePath); //$NON-NLS-2$//$NON-NLS-1$", "+\t\t\t}", "+\t\t} else {", "+\t\t\tif (variablePath == JavaModelManager.VariablePreviouslyPersisted){", "+\t\t\t\tIPath persistedPath = (IPath)JavaModelManager.PreviouslyPersistedVariables.get(variableName);", "+\t\t\t\tJavaModelManager.variablePut(variableName, persistedPath);", "-\t\t\t\t\tSystem.out.println(\"CPVariable INIT - after initialization: \" + variableName + \" --> \" + variablePath); //$NON-NLS-2$//$NON-NLS-1$", "+\t\t\t\t\tSystem.out.println(\"CPVariable INIT - reusing cached value: \" + variableName + \" --> \" + persistedPath); //$NON-NLS-2$//$NON-NLS-1$"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "bd73425ac9ce4dd25dd44938018ff049", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/JavaCore.java", "commitBeforeChange": "f51d6f5a0e9a386694d73d0c3aec5b18e2ce1002", "commitAfterChange": "4ec516fd83ba9f8d854c904c0afabe8bb5fc0412", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": " \tpublic static IPath getClasspathVariable(final String variableName)", "signatureAfterChange": " \tpublic static IPath getClasspathVariable(final String variableName)", "diff": ["-", "+\t", "+", "-\t\tfinal ClasspathVariableInitializer initializer = getClasspathVariableInitializer(variableName);", "+\t\tfinal ClasspathVariableInitializer initializer = JavaCore.getClasspathVariableInitializer(variableName);", "-\t\t\tJavaModelManager.variablePut(variableName, JavaModelManager.VariableInitializationInProgress); // avoid initialization cycles", "-\t\t\t// wrap initializer call with Safe runnable in case initializer would be causing some grief", "-\t\t\tPlatform.run(new ISafeRunnable() {", "-\t\t\t\tpublic void handleException(Throwable exception) {", "-\t\t\t\t\tUtil.log(exception, \"Exception occurred in classpath variable initializer: \"+initializer); //$NON-NLS-1$", "-\t\t\t\t}", "-\t\t\t\tpublic void run() throws Exception {", "-\t\t\t\t\tinitializer.initialize(variableName);", "-\t\t\t\t}", "-\t\t\t});", "-\t\t\tvariablePath = (IPath) JavaModelManager.variableGet(variableName); // retry", "-\t\t\tif (variablePath == JavaModelManager.VariableInitializationInProgress) {", "-\t\t\t\t// variable was not initialized by initializer, remove it", "-\t\t\t\tJavaModelManager.variablePut(variableName, null);", "-\t\t\t\treturn null; // break cycle", "-\t\t\t}", "-\t\t\t\tSystem.out.println(\"CPVariable INIT - after initialization: \" + variableName + \" --> \" + variablePath); //$NON-NLS-2$//$NON-NLS-1$", "+\t\t\t\tSystem.out.println(\"CPVariable INIT - triggering initialization of: \" + variableName+ \" using initializer: \"+ initializer); //$NON-NLS-1$ //$NON-NLS-2$", "+\t\t\t\tnew Exception(\"FAKE exception for dumping current CPVariable (\"+variableName+ \")INIT invocation stack trace\").printStackTrace(); //$NON-NLS-1$//$NON-NLS-2$", "+\t\t\t}", "+\t\t\tJavaModelManager.variablePut(variableName, JavaModelManager.VariableInitializationInProgress); // avoid initialization cycles", "+\t\t\tboolean ok = false;", "+\t\t\ttry {", "+\t\t\t\t// wrap initializer call with Safe runnable in case initializer would be causing some grief", "+\t\t\t\tPlatform.run(new ISafeRunnable() {", "+\t\t\t\t\tpublic void handleException(Throwable exception) {", "+\t\t\t\t\t\tUtil.log(exception, \"Exception occurred in classpath variable initializer: \"+initializer+\" while initializing variable: \"+variableName); //$NON-NLS-1$ //$NON-NLS-2$", "+\t\t\t\t\t}", "+\t\t\t\t\tpublic void run() throws Exception {", "+\t\t\t\t\t\tinitializer.initialize(variableName);", "+\t\t\t\t\t}", "+\t\t\t\t});", "+\t\t\t\tvariablePath = (IPath) JavaModelManager.variableGet(variableName); // initializer should have performed side-effect", "+\t\t\t\tif (variablePath == JavaModelManager.VariableInitializationInProgress) return null; // break cycle (initializer did not init or reentering call)", "+\t\t\t\tif (JavaModelManager.CP_RESOLVE_VERBOSE){", "+\t\t\t\t\tSystem.out.println(\"CPVariable INIT - after initialization: \" + variableName + \" --> \" + variablePath); //$NON-NLS-2$//$NON-NLS-1$", "+\t\t\t\t}", "+\t\t\t\tok = true;", "+\t\t\t} finally {", "+\t\t\t\tif (!ok) JavaModelManager.variablePut(variableName, null); // flush cache", "+\t\t\t}", "+\t\t} else {", "+\t\t\tif (JavaModelManager.CP_RESOLVE_VERBOSE){", "+\t\t\t\tSystem.out.println(\"CPVariable INIT - no initializer found for: \" + variableName); //$NON-NLS-1$"]}], "num": 43803}