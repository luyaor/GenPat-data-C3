{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "2ac469c54e20275aa1136ea2fa14137c", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "0d879cdd97dc9a746944a2c186656282", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/generatedfile/GeneratedFileManager.java", "commitBeforeChange": "07500b3aefa58aecd5e846627b7c70382793f29f", "commitAfterChange": "641c18a6fa8d154329ae2bcdac1ab25ff8b18f71", "methodNumberBeforeChange": 23, "methodNumberAfterChange": 21, "signatureBeforeChange": " \tpublic boolean ensureGeneratedSourceFolder( IProgressMonitor progressMonitor )", "signatureAfterChange": " \tpublic boolean ensureGeneratedSourceFolder()", "diff": ["-\tpublic boolean ensureGeneratedSourceFolder( IProgressMonitor progressMonitor ){", "+\tpublic boolean ensureGeneratedSourceFolder(){", "-\t\t\t\telse {", "-\t\t\t\t\tif (_javaProject.isOnClasspath(_generatedSourceFolder))", "+\t\t\t\telse {\t\t\t\t\t", "+\t\t\t\t\ttry{", "+\t\t\t\t\t\t_generatedSourceFolder.refreshLocal( IResource.DEPTH_INFINITE, null );", "+\t\t\t\t\t}", "+\t\t\t\t\tcatch(CoreException ce){", "+\t\t\t\t\t\tAptPlugin.log(ce, \"Failure during refreshLocal on \" + srcFolderPath); //$NON-NLS-1$", "+", "+\t\t\t\t\t}", "+\t\t\t\t\t", "+\t\t\t\t\t// if the folder doesn't exists, there is no point examining the classpath", "+\t\t\t\t\tboolean isConsistent = false;", "+\t\t\t\t\tif (_generatedSourceFolder.exists()) {", "+\t\t\t\t\t\ttry {", "+\t\t\t\t\t\t\tIJavaProject jp = _aptProject.getJavaProject();", "+\t\t\t\t\t\t\tIClasspathEntry[] cp = jp.getRawClasspath();", "+\t\t\t\t\t\t\tIPath path = _generatedSourceFolder.getFullPath();", "+\t\t\t\t\t\t\tisConsistent = isProjectClassPathUpToDate(jp, cp, path, null);", "+\t\t\t\t\t\t}", "+\t\t\t\t\t\tcatch (JavaModelException jme) {", "+\t\t\t\t\t\t\tAptPlugin.log(jme, \"Failure examining the classpath\"); //$NON-NLS-1$", "+\t\t\t\t\t\t}", "+\t\t\t\t\t}", "+\t\t\t\t\t", "+\t\t\t\t\tif(isConsistent)", "-\t\t\t\tremoveFromProjectClasspath(_javaProject, curSrcFolder, progressMonitor );", "+\t\t\t\tremoveFromProjectClasspath(_aptProject.getJavaProject(), curSrcFolder, null );", "-\t\t ", "-\t\t\tsrcFolder.refreshLocal( IResource.DEPTH_INFINITE, progressMonitor );", "+\t\t\tsrcFolder.refreshLocal( IResource.DEPTH_INFINITE, null );", "-\t\t\tupdateProjectClasspath( _javaProject, srcFolder, progressMonitor );", "+\t\t\tupdateProjectClasspath( _aptProject.getJavaProject(), srcFolder, null );", "+\t\t\treturn false;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "be9eeda20f5c7bfd603b8daa0275e75e", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/generatedfile/GeneratedSourceFolderManager.java", "commitBeforeChange": "b4f6df5ae08d61af8762ee59e5c247a670be227d", "commitAfterChange": "7007043cae1b12e48764a4ad7f71075181f1dd30", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": " \tprivate void removeFolder()", "signatureAfterChange": " \tprivate void removeFolder()", "diff": ["-\t\tIFolder srcFolder = null;", "+\t\tfinal IFolder srcFolder;", "-\t\ttry {\t", "-\t\t\tClasspathUtil.removeFromProjectClasspath( _aptProject.getJavaProject(), srcFolder, null );\t\t", "+\t\ttry {", "+\t\t\tif (srcFolder.isDerived()) {", "+\t\t\t\tClasspathUtil.removeFromProjectClasspath( _aptProject.getJavaProject(), srcFolder, null );", "+\t\t\t}", "-\t\tFileSystemUtil.deleteFolder(srcFolder);", "+\t\tfinal IWorkspaceRunnable runnable = new IWorkspaceRunnable(){", "+\t        public void run(IProgressMonitor monitor)", "+\t        {\t\t", "+            \ttry {", "+            \t\tFileSystemUtil.deleteDerivedResources(srcFolder);", "+            \t} catch(CoreException e) {", "+            \t\tAptPlugin.log(e, \"failed to delete old generated source folder \" + srcFolder.getName() ); //$NON-NLS-1$", "+            \t} catch(OperationCanceledException cancel) {", "+            \t\tAptPlugin.log(cancel, \"deletion of generated source folder got cancelled\"); //$NON-NLS-1$", "+            \t}", "+\t        }", "+\t    };", "+\t    IWorkspace ws = ResourcesPlugin.getWorkspace();", "+\t    try{", "+\t    \tws.run(runnable, ws.getRoot(), IWorkspace.AVOID_UPDATE, null);", "+\t    }catch(CoreException e){", "+\t\t\tAptPlugin.log(e, \"Runnable for deleting old generated source folder \" + srcFolder.getName() + \" failed.\"); //$NON-NLS-1$ //$NON-NLS-2$", "+\t\t}"]}], "num": 20530}