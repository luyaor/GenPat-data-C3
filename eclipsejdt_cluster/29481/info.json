{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "7129bfb4b214dfe388ed76bb7e553800", "detectedBy": ["AST_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "81aca92c6fe964b97fba64e1f37d1b72", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/dom/org/eclipse/jdt/core/dom/StringLiteral.java", "commitBeforeChange": "61c4f34a99fac56b19ac1994f5a7274231102e0c", "commitAfterChange": "51338ea2c291fc027c3057bd509f9115f23d8914", "methodNumberBeforeChange": 7, "methodNumberAfterChange": 7, "signatureBeforeChange": "  \tpublic String getLiteralValue()", "signatureAfterChange": "  \tpublic String getLiteralValue()", "diff": ["-\t\tStringBuffer b = new StringBuffer(len - 2);", "-\t\tfor (int i = 1; i< len - 1; i++) {", "-\t\t\tchar c = s.charAt(i);", "-\t\t\tif (c == '\\\"') {", "-\t\t\t\tthrow new IllegalArgumentException();", "+\t\t", "+\t\tScanner scanner = getAST().scanner;", "+\t\tchar[] source = s.toCharArray();", "+\t\tscanner.setSource(source);", "+\t\tscanner.resetTo(0, source.length);", "+\t\ttry {", "+\t\t\tint tokenType = scanner.getNextToken();", "+\t\t\tswitch(tokenType) {", "+\t\t\t\tcase Scanner.TokenNameStringLiteral:", "+\t\t\t\t\treturn new String(scanner.getCurrentTokenSourceString());", "+\t\t\t\tdefault:", "+\t\t\t\t\tthrow new IllegalArgumentException();", "-\t\t\tif (c == '\\\\') {", "-\t\t\t\t// legal: b, t, n, f, r, \", ', \\, 0, 1, 2, 3, 4, 5, 6, or 7", "-\t\t\t\tchar nextChar;", "-\t\t\t\tif ((i + 1) < len - 1) {", "-\t\t\t\t\tnextChar = s.charAt(i + 1);", "-\t\t\t\t\ti++;", "-\t\t\t\t\tswitch(nextChar) {", "-\t\t\t\t\t\tcase 'b' :", "-\t\t\t\t\t\t\tb.append('\\b');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase 't' :", "-\t\t\t\t\t\t\tb.append('\\t');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase 'n' :", "-\t\t\t\t\t\t\tb.append('\\n');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase 'f' :", "-\t\t\t\t\t\t\tb.append('\\f');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase 'r' :", "-\t\t\t\t\t\t\tb.append('\\r');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '\\\"':", "-\t\t\t\t\t\t\tb.append('\\\"');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '\\'':", "-\t\t\t\t\t\t\tb.append('\\'');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '\\\\':", "-\t\t\t\t\t\t\tb.append('\\\\');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '0' :", "-\t\t\t\t\t\t\tb.append('\\0');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '1' :", "-\t\t\t\t\t\t\tb.append('\\1');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '2' :", "-\t\t\t\t\t\t\tb.append('\\2');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '3' :", "-\t\t\t\t\t\t\tb.append('\\3');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '4' :", "-\t\t\t\t\t\t\tb.append('\\4');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '5' :", "-\t\t\t\t\t\t\tb.append('\\5');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '6' :", "-\t\t\t\t\t\t\tb.append('\\6');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase '7' :", "-\t\t\t\t\t\t\tb.append('\\7');", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tcase 'u' :", "-\t\t\t\t\t\t\t//handle the case of unicode.", "-\t\t\t\t\t\t\tint currentPosition = i + 1;", "-\t\t\t\t\t\t\tint c1 = 0, c2 = 0, c3 = 0, c4 = 0;", "-\t\t\t\t\t\t\tif ((c1 = Character.getNumericValue(s.charAt(currentPosition++))) > 15", "-\t\t\t\t\t\t\t\t|| c1 < 0", "-\t\t\t\t\t\t\t\t|| (c2 = Character.getNumericValue(s.charAt(currentPosition++))) > 15", "-\t\t\t\t\t\t\t\t|| c2 < 0", "-\t\t\t\t\t\t\t\t|| (c3 = Character.getNumericValue(s.charAt(currentPosition++))) > 15", "-\t\t\t\t\t\t\t\t|| c3 < 0", "-\t\t\t\t\t\t\t\t|| (c4 = Character.getNumericValue(s.charAt(currentPosition++))) > 15", "-\t\t\t\t\t\t\t\t|| c4 < 0){", "-\t\t\t\t\t\t\t\tthrow new IllegalArgumentException(\"Invalid string literal\"); //$NON-NLS-1$", "-\t\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t\tb.append((char) (((c1 * 16 + c2) * 16 + c3) * 16 + c4));", "-\t\t\t\t\t\t\t\ti = currentPosition - 1;", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tbreak;", "-\t\t\t\t\t\tdefault:", "-\t\t\t\t\t\t\tthrow new IllegalArgumentException(\"Invalid string literal\");//$NON-NLS-1$", "-\t\t\t\t\t}", "-\t\t\t\t} else {", "-\t\t\t\t\tthrow new IllegalArgumentException(\"Invalid string literal\");//$NON-NLS-1$", "-\t\t\t\t}", "-\t\t\t} else {", "-\t\t\t\tb.append(c);", "-\t\t\t}", "+\t\t} catch(InvalidInputException e) {", "+\t\t\tthrow new IllegalArgumentException();", "-\t\treturn b.toString();\t\t\t"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "9a6f0ced36248616cc6a79d89eb2aba5", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/core/Signature.java", "commitBeforeChange": "c59be425cf25326239f4ea61082e801292bcf9ab", "commitAfterChange": "d6fb9802bac486c7e71b20d321f123bc000bd933", "methodNumberBeforeChange": 5, "methodNumberAfterChange": 8, "signatureBeforeChange": "\r public static String createTypeSignature(String typeName, boolean isResolved)", "signatureAfterChange": "\r public static String createTypeSignature(String typeName, boolean isResolved)", "diff": ["+\treturn createTypeSignature(typeName.toCharArray(), isResolved);\r", "+}\r", "-\t\tScanner scanner = new Scanner();\r", "-\t\tscanner.setSource(typeName.toCharArray());\r", "-\t\tint token = scanner.getNextToken();\r", "-\t\tStringBuffer sig = new StringBuffer();\r", "-\t\tint arrayCount = 0;\r", "-\t\tboolean primitive = true;\r", "-\t\tswitch (token) {\r", "-\t\t\tcase ITerminalSymbols.TokenNameIdentifier :\r", "-\t\t\t\tsig.append(scanner.getCurrentIdentifierSource());\r", "-\t\t\t\tprimitive = false;\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNameboolean :\r", "-\t\t\t\tsig.append(Signature.SIG_BOOLEAN);\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNamebyte :\r", "-\t\t\t\tsig.append(Signature.SIG_BYTE);\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNamechar :\r", "-\t\t\t\tsig.append(Signature.SIG_CHAR);\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNamedouble :\r", "-\t\t\t\tsig.append(Signature.SIG_DOUBLE);\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNamefloat :\r", "-\t\t\t\tsig.append(Signature.SIG_FLOAT);\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNameint :\r", "-\t\t\t\tsig.append(Signature.SIG_INT);\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNamelong :\r", "-\t\t\t\tsig.append(Signature.SIG_LONG);\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNameshort :\r", "-\t\t\t\tsig.append(Signature.SIG_SHORT);\r", "-\t\t\t\tbreak;\r", "-\t\t\tcase ITerminalSymbols.TokenNamevoid :\r", "-\t\t\t\tsig.append(Signature.SIG_VOID);\r", "-\t\t\t\tbreak;\r", "-\t\t\tdefault :\r", "-\t\t\t\tthrow new IllegalArgumentException();\r", "-\t\ttoken = scanner.getNextToken();\r", "-\t\twhile (!primitive && token == ITerminalSymbols.TokenNameDOT) {\r", "-\t\t\tsig.append(scanner.getCurrentIdentifierSource());\r", "-\t\t\ttoken = scanner.getNextToken();\r", "-\t\t\tif (token == ITerminalSymbols.TokenNameIdentifier) {\r", "-\t\t\t\tsig.append(scanner.getCurrentIdentifierSource());\r", "-\t\t\t\ttoken = scanner.getNextToken();\r", "-\t\t\t} else {\r", "-\t\t\t\tthrow new IllegalArgumentException();\r", "-\t\t\t}\r", "-\t\t}\r", "-\t\twhile (token == ITerminalSymbols.TokenNameLBRACKET) {\r", "-\t\t\ttoken = scanner.getNextToken();\r", "-\t\t\tif (token != ITerminalSymbols.TokenNameRBRACKET)\r", "-\t\t\t\tthrow new IllegalArgumentException();\r", "-\t\t\tarrayCount++;\r", "-\t\t\ttoken = scanner.getNextToken();\r", "-\t\t}\r", "-\t\tif (token != ITerminalSymbols.TokenNameEOF)\r", "-\t\t\tthrow new IllegalArgumentException();\r", "-\t\tif (!primitive) {\r", "-\t\t\tsig.insert(0, isResolved ? C_RESOLVED : C_UNRESOLVED);\r", "-\t\t}\r", "-\t\tif (arrayCount == 0) {\r", "-\t\t\tif (primitive)\r", "-\t\t\t\treturn sig.toString();\r", "-\t\t} else {\r", "-\t\t\tchar[] brackets = new char[arrayCount];\r", "-\t\t\twhile (arrayCount-- != 0) {\r", "-\t\t\t\tbrackets[arrayCount] = C_ARRAY;\r", "-\t\t\t}\r", "-\t\t\tsig.insert(0, brackets);\r", "-\t\t}\r", "-\t\tif (!primitive) {\r", "-\t\t\tsig.append(C_NAME_END);\r", "-\t\t}\r", "-\t\treturn sig.toString();\r", "-\t} catch (InvalidInputException e) {\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "e291535315a25e17fbda57d8f503195b", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.tests/src/org/eclipse/jdt/apt/tests/annotations/valueconversion/ValueConversionProcessor.java", "commitBeforeChange": "a6fb7155fd890e70fc93ff099a2bfa78beffa3e9", "commitAfterChange": "dade23c0ca1cb5b996dfae1d1cfc189d06d41a6f", "methodNumberBeforeChange": 1, "methodNumberAfterChange": 1, "signatureBeforeChange": " \t \t@SuppressWarnings(\"nls\") \tpublic void process()", "signatureAfterChange": " \t \t@SuppressWarnings(\"nls\") \tpublic void process()", "diff": ["-\t{", "-\t\ttry{", "-\t\t\tfinal TypeDeclaration test = _env.getTypeDeclaration(\"sample.Test\");", "-\t\t\tif( test == null )", "-\t\t\t\tTestCase.assertNotNull(\"failed to locate type 'sample.Test'\", test);", "-\t\t\t", "-\t\t\tfinal Collection<AnnotationMirror> annotations = test.getAnnotationMirrors();", "-\t\t\tfinal int numAnnotations = annotations == null ? 0 : annotations.size();", "-\t\t\tTestCase.assertEquals(\"annotation number mismatch\", 1, numAnnotations);", "-\t\t\t", "-\t\t\tfinal AnnotationMirror annotation = annotations.iterator().next();", "-\t\t\tfinal AnnotationType annotationType = annotation.getAnnotationType();", "-\t\t\t", "-\t\t\tTestCase.assertEquals(", "-\t\t\t\t\t\"annotation type mismatch\", ", "-\t\t\t\t\t\"sample.Test.Annotation\", ", "-\t\t\t\t\tannotationType.getDeclaration().getQualifiedName());", "-\t\t\t", "-\t\t\tfinal Map<AnnotationTypeElementDeclaration, AnnotationValue> elementValues =", "-\t\t\t\tannotation.getElementValues();", "-\t\t\t", "-\t\t\tfor( Map.Entry<AnnotationTypeElementDeclaration, AnnotationValue> entry : ", "-\t\t\t\t elementValues.entrySet() ){", "-\t\t\t\t", "-\t\t\t\tAnnotationTypeElementDeclaration elementDecl = entry.getKey();", "-\t\t\t\tfinal String name = elementDecl.getSimpleName();", "-\t\t\t\tfinal AnnotationValue value = entry.getValue();", "-\t\t\t\t", "-\t\t\t\tif( name.length() == 1 )", "-\t\t\t\t{", "-\t\t\t\t\tfinal Class expectedType;", "-\t\t\t\t\tswitch(name.charAt(0))", "-\t\t\t\t\t{", "-\t\t\t\t\tcase 'b':", "-\t\t\t\t\t\texpectedType = Byte.class;", "-\t\t\t\t\t\tbreak;\t\t\t\t\t", "-\t\t\t\t\tcase 'c':", "-\t\t\t\t\t\texpectedType = Character.class;", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\tcase 's':", "-\t\t\t\t\t\texpectedType = Short.class;", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\tcase 'i':", "-\t\t\t\t\t\texpectedType = Integer.class;", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\tcase 'l':", "-\t\t\t\t\t\texpectedType = Long.class;", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\tcase 'f':", "-\t\t\t\t\t\texpectedType = Float.class;", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\tcase 'd':", "-\t\t\t\t\t\texpectedType = Double.class;", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\tdefault:", "-\t\t\t\t\t\tTestCase.assertNotNull(\"unexpected member \" + name, null);", "-\t\t\t\t\t\tthrow new IllegalStateException(); // won't get here.", "-\t\t\t\t\t}", "-\t\t\t\t\tassertValueTypeMatch(name, value.getValue(), expectedType);", "-\t\t\t\t}\t", "-\t\t\t\telse{", "-\t\t\t\t\t@SuppressWarnings(\"unused\")", "-\t\t\t\t\tfinal Class expectedElementType;", "-\t\t\t\t\tif( \"chars\".equals(name) )", "-\t\t\t\t\t\texpectedElementType = Character.class;", "-\t\t\t\t\telse if( \"bytes\".equals(name) )", "-\t\t\t\t\t\texpectedElementType = Byte.class;", "-\t\t\t\t\telse if( \"shorts\".equals(name) )", "-\t\t\t\t\t\texpectedElementType = Short.class;", "-\t\t\t\t\telse if( \"ints\".equals(name) )", "-\t\t\t\t\t\texpectedElementType = Integer.class;", "-\t\t\t\t\telse if( \"longs\".equals(name) )", "-\t\t\t\t\t\texpectedElementType = Long.class;", "-\t\t\t\t\telse if( \"floats\".equals(name) )", "-\t\t\t\t\t\texpectedElementType = Float.class;", "-\t\t\t\t\telse if( \"doubles\".equals(name) )", "-\t\t\t\t\t\texpectedElementType = Double.class;", "-\t\t\t\t\telse{", "-\t\t\t\t\t\tTestCase.assertNotNull(\"unexpected member \" + name, null);", "-\t\t\t\t\t\tthrow new IllegalStateException(); // won't get here.", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t}", "-\t\t}", "-\t\tcatch( ComparisonFailure failure ){\t\t\t", "-\t\t\tif (!ProcessorTestStatus.hasErrors()) {", "-\t\t\t\tProcessorTestStatus.failWithoutException(failure.toString());", "-\t\t\t}", "-\t\t\tthrow failure;", "-\t\t}", "-\t\tcatch( junit.framework.AssertionFailedError error ){", "-\t\t\tif (!ProcessorTestStatus.hasErrors()) {", "-\t\t\t\tProcessorTestStatus.failWithoutException(error.toString());", "-\t\t\t}", "-\t\t\tthrow error;", "-\t\t}", "-\t}", "+\t\tfinal TypeDeclaration test = _env.getTypeDeclaration(\"sample.Test\");", "+\t\tif( test == null )", "+\t\t\tTestCase.assertNotNull(\"failed to locate type 'sample.Test'\", test);", "+\t\ttestCompilerAPIPath(test);", "+\t\ttestReflectionPath(test);", "+\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "faa490664d62ab35ad8aa3500ea443e9", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ast/ArrayInitializer.java", "commitBeforeChange": "f0cc0529135fe43e5b6252dca937651f0a04d49c", "commitAfterChange": "79c1182746ff2f44f9956aeaf2f61882a4911acb", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " \tpublic void generateCode(BlockScope currentScope, CodeStream codeStream, boolean valueRequired)", "signatureAfterChange": "  \tpublic void generateCode(BlockScope currentScope, CodeStream codeStream, boolean valueRequired)", "diff": ["+\tpublic void generateCode(BlockScope currentScope, CodeStream codeStream, boolean valueRequired) {", "+\t\tgenerateCode(null, null, currentScope, codeStream, valueRequired);", "+\t}", "-\tpublic void generateCode(BlockScope currentScope, CodeStream codeStream, boolean valueRequired) {", "-\t\tcodeStream.newArray(null, this.binding);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "fb45cda8e219408ecbab3d17b99c5e38", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core.tests.compiler/src/org/eclipse/jdt/core/tests/util/Util.java", "commitBeforeChange": "6defd2b79520062f5150164ded77c2d030acc168", "commitAfterChange": "d351702f3561d64a024c15ffbed0faad48ce2838", "methodNumberBeforeChange": 13, "methodNumberAfterChange": 13, "signatureBeforeChange": " public static String displayString(String inputString, int indent)", "signatureAfterChange": " public static String displayString(String inputString, int indent)", "diff": ["+\treturn displayString(inputString, indent, false);", "+}"]}], "num": 29481}