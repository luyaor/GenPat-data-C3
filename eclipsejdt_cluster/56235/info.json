{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "9eb9211fcb04055a79454648f15fb093", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "16fb6cb58627b81a135f24dff147c4dc", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/SubTypeSearchJob.java", "commitBeforeChange": "9ccc53063dda8b7e1afdde95ae36a8417c582abc", "commitAfterChange": "7143e72571bb2e6a2e74f6791210a97b375b5ab6", "methodNumberBeforeChange": 2, "methodNumberAfterChange": 2, "signatureBeforeChange": " public boolean search(Index index, IProgressMonitor progressMonitor)", "signatureAfterChange": " public boolean search(Index index, IProgressMonitor progressMonitor)", "diff": ["- */", "-", "-\tif (progressMonitor != null && progressMonitor.isCanceled()) throw new OperationCanceledException();", "-", "-\tif (index == null) return COMPLETE;\t\t", "-\tIndexManager indexManager = JavaModelManager.getJavaModelManager().getIndexManager();", "-\tReadWriteMonitor monitor = indexManager.getMonitorFor(index);", "-\tif (monitor == null) return COMPLETE; // index got deleted since acquired", "+\tif (index == null) return COMPLETE;", "-\t\tmonitor.enterRead(); // ask permission to read", "-", "-\t\t/* if index has changed, commit these before querying */", "-\t\tif (index.hasChanged()){", "-\t\t\ttry {", "-\t\t\t\tmonitor.exitRead(); // free read lock", "-\t\t\t\tmonitor.enterWrite(); // ask permission to write", "-\t\t\t\tindexManager.saveIndex(index);", "-\t\t\t} catch(IOException e){", "-\t\t\t\treturn FAILED;", "-\t\t\t} finally {", "-\t\t\t\tmonitor.exitWriteEnterRead(); // finished writing and reacquire read permission", "-\t\t\t}", "+\t\tif (!indexes.includes(index)) {", "+\t\t\tindexes.add(index);", "+\t\t\tindex.startQuery();", "-\t\tlong start = System.currentTimeMillis();", "-", "-\t\tIndexInput input;", "-\t\tif ((input = (IndexInput) inputs.get(index)) == null){", "-\t\t\tinput = new BlocksIndexInput(index.getIndexFile());", "-\t\t\tinput.open();", "-\t\t\tinputs.put(index, input);", "-\t\t\t//System.out.println(\"Acquiring INPUT for \"+index);", "-\t\t}", "-\t\tpattern.findIndexMatches(input, requestor, this.participant, this.scope, progressMonitor);", "-\t\texecutionTime += System.currentTimeMillis() - start;", "-\t\treturn COMPLETE;", "-\t} catch(IOException e){", "+\t} catch (IOException e) {", "-\t} finally {", "-\t\tmonitor.exitRead(); // finished reading", "+\treturn super.search(index, progressMonitor);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "41adcd106b0fde7ca8ff116b2be9dccb", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/search/org/eclipse/jdt/internal/core/search/PatternSearchJob.java", "commitBeforeChange": "9ccc53063dda8b7e1afdde95ae36a8417c582abc", "commitAfterChange": "7143e72571bb2e6a2e74f6791210a97b375b5ab6", "methodNumberBeforeChange": 6, "methodNumberAfterChange": 6, "signatureBeforeChange": "\t  \tpublic boolean search(Index index, IProgressMonitor progressMonitor)", "signatureAfterChange": "\t public boolean search(Index index, IProgressMonitor progressMonitor)", "diff": ["-", "-\tpublic boolean search(Index index, IProgressMonitor progressMonitor) {", "-", "-\t\tif (progressMonitor != null && progressMonitor.isCanceled())", "-\t\t\tthrow new OperationCanceledException();", "-", "-//\t\t\tSystem.out.println(\"SANITY CHECK: search job using obsolete index: [\"+index+ \"] instead of: [\"+inMemIndex+\"]\");", "-\t\tif (index == null)", "-\t\t\treturn COMPLETE;", "-\t\tIndexManager indexManager = JavaModelManager.getJavaModelManager().getIndexManager();", "-\t\tReadWriteMonitor monitor = indexManager.getMonitorFor(index);", "-\t\tif (monitor == null)", "-\t\t\treturn COMPLETE; // index got deleted since acquired", "-\t\ttry {", "-\t\t\tmonitor.enterRead(); // ask permission to read", "-", "-\t\t\t/* if index has changed, commit these before querying */", "-\t\t\tif (index.hasChanged()) {", "-\t\t\t\ttry {", "-\t\t\t\t\tmonitor.exitRead(); // free read lock", "-\t\t\t\t\tmonitor.enterWrite(); // ask permission to write", "-\t\t\t\t\tindexManager.saveIndex(index);", "-\t\t\t\t} catch (IOException e) {", "-\t\t\t\t\treturn FAILED;", "-\t\t\t\t} finally {", "-\t\t\t\t\tmonitor.exitWriteEnterRead(); // finished writing and reacquire read permission", "-\t\t\t\t}", "-\t\t\t}", "-\t\t\tlong start = System.currentTimeMillis();", "-\t\t\tpattern.findIndexMatches(", "-\t\t\t\tindex,", "-\t\t\t\trequestor,", "-\t\t\t\tthis.participant,", "-\t\t\t\tthis.scope,", "-\t\t\t\tprogressMonitor);", "-\t\t\texecutionTime += System.currentTimeMillis() - start;", "-\t\t\treturn COMPLETE;", "-\t\t} catch (IOException e) {", "-\t\t\treturn FAILED;", "-\t\t} finally {", "-\t\t\tmonitor.exitRead(); // finished reading", "-\t\t}", "+}\t", "+public boolean search(Index index, IProgressMonitor progressMonitor) {", "+\tif (index == null) return COMPLETE;", "+\tif (progressMonitor != null && progressMonitor.isCanceled()) throw new OperationCanceledException();", "+", "+\tReadWriteMonitor monitor = index.monitor;", "+\tif (monitor == null) return COMPLETE; // index got deleted since acquired", "+\ttry {", "+\t\tmonitor.enterRead(); // ask permission to read", "+\t\tlong start = System.currentTimeMillis();", "+\t\tpattern.findIndexMatches(index, requestor, this.participant, this.scope, progressMonitor);", "+\t\texecutionTime += System.currentTimeMillis() - start;", "+\t\treturn COMPLETE;", "+\t} catch (IOException e) {", "+\t\tif (e instanceof java.io.EOFException)", "+\t\t\te.printStackTrace();", "+\t\treturn FAILED;", "+\t} finally {", "+\t\tmonitor.exitRead(); // finished reading"]}], "num": 56235}