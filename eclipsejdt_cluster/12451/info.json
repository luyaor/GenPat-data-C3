{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "cbd570bbe2fca54b651f1313dec5850a", "detectedBy": ["AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "02e977662a4d2c348001fab248af7ccf", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/generatedfile/GeneratedFileManager.java", "commitBeforeChange": "6cb413dbd992ad73f847d7b4e14e78f1406fa2fc", "commitAfterChange": "8659b871eae5c2008485cfb120ce2c8f8ecbfe04", "methodNumberBeforeChange": 28, "methodNumberAfterChange": 19, "signatureBeforeChange": " \tpublic synchronized void writeState()", "signatureAfterChange": " \tpublic void writeState()", "diff": ["+\t */", "+\tpublic void writeState()", "+\t{", "+\t\t_parentToGenFiles.writeState();", "+\t}", "-\tpublic synchronized void writeState() {", "-\t\tif (!_mapsDirty) {", "-\t\t\treturn;", "-\t\tFile file = getSerializationFile(_jProject.getProject());", "-\t\tif (file == null) {", "-\t\t\t// Cannot write state, as project has been deleted", "-\t\t\treturn;", "-\t\t}", "-\t\tfile.delete();", "-\t\tDataOutputStream out = null;", "-\t\ttry {", "-\t\t\tout = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(file)));", "-\t\t\t", "-\t\t\tout.writeInt(SERIALIZATION_VERSION);", "-\t\t\t", "-\t\t\tout.writeInt(_parentFile2GeneratedFiles.size());", "-\t\t\t", "-\t\t\tfor (Map.Entry<IFile,Set<IFile>> entry : _parentFile2GeneratedFiles.entrySet()) {", "-\t\t\t\t", "-\t\t\t\tIFile parent = entry.getKey();", "-\t\t\t\tout.writeUTF(convertIFileToPath(parent));", "-\t\t\t\t", "-\t\t\t\tSet<IFile> children = entry.getValue();", "-\t\t\t\t", "-\t\t\t\tout.writeInt(children.size());", "-\t\t\t\t", "-\t\t\t\tfor (IFile child : children) {", "-\t\t\t\t\tout.writeUTF(convertIFileToPath(child));", "-\t\t\t_mapsDirty = false;", "-\t\t}", "-\t\tcatch (IOException ioe) {", "-\t\t\t// We can safely continue without having written our dependencies.", "-\t\t\tAptPlugin.log(ioe, \"Could not serialize APT dependencies\"); //$NON-NLS-1$", "-\t\t}", "-\t\tfinally {", "-\t\t\tif (out != null) {", "-\t\t\t\ttry {", "-\t\t\t\t\tout.flush();", "-\t\t\t\t\tout.close();", "-\t\t\t\t}", "-\t\t\t\tcatch (IOException ioe) {", "-\t\t\t\t\tAptPlugin.log(ioe, \"Failed to write the APT dependency state to disk\"); //$NON-NLS-1$", "-\t\t\t\t}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "a2a06e8b9cbb9520482e1800b221c5fb", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.apt.core/src/org/eclipse/jdt/apt/core/internal/generatedfile/GeneratedFileManager.java", "commitBeforeChange": "bc5d9b450540dde0f4417c6b10a04ec18aa90f94", "commitAfterChange": "67c55712e5adee92eb685a3f98810e93028c1621", "methodNumberBeforeChange": 26, "methodNumberAfterChange": 28, "signatureBeforeChange": " \t \tprivate void updateFileMaps( String typeName, IFile parentFile, IFile generatedFile )", "signatureAfterChange": " \t \tprivate void clearAllMaps()", "diff": ["-\tprivate void updateFileMaps( String typeName, IFile parentFile, IFile generatedFile )", "-\t\t// type name -> set of parent files", "-\t\tSet<IFile> s = _typeName2Parents.get( typeName );", "-\t\tif ( s == null )", "-\t\t{", "-\t\t\ts = new HashSet();", "-\t\t\t_typeName2Parents.put( typeName, s );", "-\t\t}", "-\t\ts.add( parentFile );", "-\t\t", "-\t\t// parent IFile -> set of generated type name", "-\t\tSet<String> stringSet = _parent2TypeNames.get( parentFile );", "-\t\tif ( stringSet == null )", "-\t\t{", "-\t\t\tstringSet = new HashSet<String>();", "-\t\t\t_parent2TypeNames.put( parentFile, stringSet );", "-\t\t}", "-\t\tstringSet.add( typeName );", "-\t\t", "-\t\tSet<IFile> fileSet = _parent2DerivedFiles.get( parentFile );", "-\t\t \t_parent2DerivedFiles.put( parentFile, fileSet );", "-\t\tfileSet = _derivedFile2Parents.get( generatedFile );", "-\t\t\t_derivedFile2Parents.put( generatedFile, fileSet );", "+\t", "+\tprivate void clearAllMaps() ", "+\t{", "+\t\tclearWorkingCopyMaps();", "+\t\t", "+\t\t// now clear file maps", "+\t\t_parentFile2GeneratedFiles.clear();", "+\t\t_generatedFile2ParentFiles.clear();", "+\t}"]}], "num": 12451}