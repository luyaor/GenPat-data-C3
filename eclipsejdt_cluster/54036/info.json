{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "466f6d04819525acfea4fb0680ec40e2", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1659a4c0a8a01de1797adb5cd8ebd953", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/parser/Parser.java", "commitBeforeChange": "673b7eda95cd26449992e862f0c63f2c612903a0", "commitAfterChange": "b04602938404af4f8569a399fb36a5018768a262", "methodNumberBeforeChange": 105, "methodNumberAfterChange": 105, "signatureBeforeChange": "\r \r \tprotected void consumeLocalVariableDeclaration()", "signatureAfterChange": "\r protected void consumeLocalVariableDeclaration()", "diff": ["-\r", "-\tprotected void consumeLocalVariableDeclaration() {\r", "-\t\t// LocalVariableDeclaration ::= Modifiers Type VariableDeclarators ';'\r", "-\r", "-\t\t/*\r", "-\t\tastStack : \r", "-\t\texpressionStack: Expression Expression ...... Expression\r", "-\t\tidentifierStack : type  identifier identifier ...... identifier\r", "-\t\tintStack : typeDim      dim        dim               dim\r", "-\t\t ==>\r", "-\t\tastStack : FieldDeclaration FieldDeclaration ...... FieldDeclaration\r", "-\t\texpressionStack :\r", "-\t\tidentifierStack : \r", "-\t\tintStack : \r", "-\t\t  \r", "-\t\t*/\r", "-\t\tint variableDeclaratorsCounter = astLengthStack[astLengthPtr];\r", "-\t\t// retrieve modifiers\r", "-\t\t// The modifiers has been set and it is still at the right value\r", "-\t\t// declaration starts from the modifierSourceStart\r", "-\t\tfor (int i = variableDeclaratorsCounter - 1; i >= 0; i--) {\r", "-\t\t\tLocalDeclaration localDeclaration = (LocalDeclaration) astStack[astPtr - i];\r", "-\t\t\tlocalDeclaration.declarationSourceEnd = endStatementPosition;\r", "-\t\t\t// semi-colon included\r", "-\t\t}\r", "-\t\t// update the astStack, astPtr and astLengthStack\r", "-\t\tint startIndex = astPtr - variablesCounter[nestedType] + 1;\r", "-\t\tSystem.arraycopy(\r", "-\t\t\tastStack,\r", "-\t\t\tstartIndex,\r", "-\t\t\tastStack,\r", "-\t\t\tstartIndex - 1,\r", "-\t\t\tvariableDeclaratorsCounter);\r", "-\t\tastPtr--; // remove the type reference\r", "-\t\tastLengthStack[--astLengthPtr] = variableDeclaratorsCounter;\r", "-\t\tvariablesCounter[nestedType] = 0;\r", "-\t}\r", "+}\r", "+protected void consumeLocalVariableDeclaration() {\r", "+\t// LocalVariableDeclaration ::= Modifiers Type VariableDeclarators ';'\r", "+\r", "+\t/*\r", "+\tastStack : \r", "+\texpressionStack: Expression Expression ...... Expression\r", "+\tidentifierStack : type  identifier identifier ...... identifier\r", "+\tintStack : typeDim      dim        dim               dim\r", "+\t ==>\r", "+\tastStack : FieldDeclaration FieldDeclaration ...... FieldDeclaration\r", "+\texpressionStack :\r", "+\tidentifierStack : \r", "+\tintStack : \r", "+\t  \r", "+\t*/\r", "+\tint variableDeclaratorsCounter = astLengthStack[astLengthPtr];\r", "+\r", "+\t// update the astStack, astPtr and astLengthStack\r", "+\tint startIndex = astPtr - variablesCounter[nestedType] + 1;\r", "+\tSystem.arraycopy(\r", "+\t\tastStack, \r", "+\t\tstartIndex, \r", "+\t\tastStack, \r", "+\t\tstartIndex - 1, \r", "+\t\tvariableDeclaratorsCounter); \r", "+\tastPtr--; // remove the type reference\r", "+\tastLengthStack[--astLengthPtr] = variableDeclaratorsCounter;\r", "+\tvariablesCounter[nestedType] = 0;\r", "+}\r"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "44fe6e94ff6b18b730369a5ad078be43", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/parser/Parser.java", "commitBeforeChange": "df84bc0b0e74080458b4e3f35c6e77ec6fed2587", "commitAfterChange": "2bb013de372e754bf58118fac6dab82d5a5c9625", "methodNumberBeforeChange": 210, "methodNumberAfterChange": 210, "signatureBeforeChange": " protected void consumeLocalVariableDeclarationStatement()", "signatureAfterChange": " protected void consumeLocalVariableDeclarationStatement()", "diff": ["+\t", "+\tint variableDeclaratorsCounter = this.astLengthStack[this.astLengthPtr];", "+\tif (variableDeclaratorsCounter == 1) {", "+\t\tLocalDeclaration localDeclaration = (LocalDeclaration) this.astStack[this.astPtr];", "+\t\tif (localDeclaration.isRecoveredFromLoneIdentifier()) {", "+\t\t\t// https://bugs.eclipse.org/bugs/show_bug.cgi?id=430336, [1.8][compiler] Bad syntax error recovery: Lonely identifier should be variable name, not type", "+\t\t\t// Mutate foo $missing; into foo = $missing$; ", "+\t\t\tExpression left;", "+\t\t\tif (localDeclaration.type instanceof QualifiedTypeReference) {", "+\t\t\t\tQualifiedTypeReference qtr = (QualifiedTypeReference) localDeclaration.type;", "+\t\t\t\tleft = new QualifiedNameReference(qtr.tokens, qtr.sourcePositions, 0, 0);", "+\t\t\t} else {", "+\t\t\t\tleft = new SingleNameReference(localDeclaration.type.getLastToken(), 0L);", "+\t\t\t}", "+\t\t\tleft.sourceStart = localDeclaration.type.sourceStart;", "+\t\t\tleft.sourceEnd = localDeclaration.type.sourceEnd;", "+\t\t\t", "+\t\t\tExpression right = new SingleNameReference(localDeclaration.name, 0L);", "+\t\t\tright.sourceStart = localDeclaration.sourceStart;", "+\t\t\tright.sourceEnd = localDeclaration.sourceEnd;", "+\t\t\t", "+\t\t\tAssignment assignment = new Assignment(left, right, 0);", "+\t\t\tint end = this.endStatementPosition;", "+\t\t\tassignment.sourceEnd = (end == localDeclaration.sourceEnd) ? ++end : end; ", "+\t\t\tassignment.statementEnd = end;", "+\t\t\tthis.astStack[this.astPtr] = assignment;", "+\t\t\t", "+\t\t\t// also massage recovery scanner data.", "+\t\t\tif (this.recoveryScanner != null) {", "+\t\t\t\tRecoveryScannerData data = this.recoveryScanner.getData();", "+\t\t\t\tint position = data.insertedTokensPtr;", "+\t\t\t\twhile (position > 0) {", "+\t\t\t\t\tif (data.insertedTokensPosition[position] != data.insertedTokensPosition[position - 1])", "+\t\t\t\t\t\tbreak;", "+\t\t\t\t\tposition--;", "+\t\t\t\t}", "+\t\t\t\tthis.recoveryScanner.insertTokenAhead(TerminalTokens.TokenNameEQUAL, position);", "+\t\t\t}", "+\t\t\t", "+\t\t\tif (this.currentElement != null) {", "+\t\t\t\tthis.lastCheckPoint = assignment.sourceEnd + 1;", "+\t\t\t\tthis.currentElement = this.currentElement.add(assignment, 0);", "+\t\t\t}", "+\t\t\treturn;", "+\t\t}", "+\t}", "-\tint variableDeclaratorsCounter = this.astLengthStack[this.astLengthPtr];"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "6f3aa5b874754e2471a3b95e87451749", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/parser/Parser.java", "commitBeforeChange": "1c4e30980d3a14b65dc5cd77977149f85c37b02a", "commitAfterChange": "72d09911302484497c2776b017dc226fd10250ec", "methodNumberBeforeChange": 98, "methodNumberAfterChange": 98, "signatureBeforeChange": " protected void consumeFieldDeclaration()", "signatureAfterChange": " protected void consumeFieldDeclaration()", "diff": ["-\tint variableDeclaratorsCounter = astLengthStack[astLengthPtr];", "+\tint variableDeclaratorsCounter = this.astLengthStack[this.astLengthPtr];", "-\t\tFieldDeclaration fieldDeclaration = (FieldDeclaration) astStack[astPtr - i];", "-\t\tfieldDeclaration.declarationSourceEnd = endStatementPosition; ", "-\t\tfieldDeclaration.declarationEnd = endStatementPosition;\t// semi-colon included", "+\t\tFieldDeclaration fieldDeclaration = (FieldDeclaration) this.astStack[this.astPtr - i];", "+\t\tfieldDeclaration.declarationSourceEnd = this.endStatementPosition; ", "+\t\tfieldDeclaration.declarationEnd = this.endStatementPosition;\t// semi-colon included", "-\tint endPos = flushCommentsDefinedPriorTo(endStatementPosition);", "-\tif (endPos != endStatementPosition) {", "+\tint endPos = flushCommentsDefinedPriorTo(this.endStatementPosition);", "+\tif (endPos != this.endStatementPosition) {", "-\t\t\tFieldDeclaration fieldDeclaration = (FieldDeclaration) astStack[astPtr - i];", "+\t\t\tFieldDeclaration fieldDeclaration = (FieldDeclaration) this.astStack[this.astPtr - i];", "-\tint startIndex = astPtr - variablesCounter[nestedType] + 1;", "+\tint startIndex = this.astPtr - this.variablesCounter[this.nestedType] + 1;", "-\t\tastStack, ", "+\t\tthis.astStack, ", "-\t\tastStack, ", "+\t\tthis.astStack, ", "-\tastPtr--; // remove the type reference", "-\tastLengthStack[--astLengthPtr] = variableDeclaratorsCounter;", "+\tthis.astPtr--; // remove the type reference", "+\tthis.astLengthStack[--this.astLengthPtr] = variableDeclaratorsCounter;", "-\tif (currentElement != null) {", "-\t\tlastCheckPoint = endPos + 1;", "-\t\tif (currentElement.parent != null && currentElement instanceof RecoveredField){", "-\t\t\tif (!(currentElement instanceof RecoveredInitializer)) {", "-\t\t\t\tcurrentElement = currentElement.parent;", "+\tif (this.currentElement != null) {", "+\t\tthis.lastCheckPoint = endPos + 1;", "+\t\tif (this.currentElement.parent != null && this.currentElement instanceof RecoveredField){", "+\t\t\tif (!(this.currentElement instanceof RecoveredInitializer)) {", "+\t\t\t\tthis.currentElement = this.currentElement.parent;", "-\t\trestartRecovery = true;", "+\t\tthis.restartRecovery = true;", "-\tvariablesCounter[nestedType] = 0;", "+\tthis.variablesCounter[this.nestedType] = 0;"]}], "num": 54036}