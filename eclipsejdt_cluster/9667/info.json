{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "423ee0abbda9f418ff90b02a2270543c", "detectedBy": ["DIFF_HIERARCHICAL", "DIFF_DBSCAN", "AST_HIERARCHICAL", "AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "7d99073c7e1c73e94b51f67bbcf34fd1", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/JavaModelManager.java", "commitBeforeChange": "da8753945f9324ceda2d1052b9998ea992c54912", "commitAfterChange": "678850fe27109f883daa0f4585d44c71bef496d8", "methodNumberBeforeChange": 76, "methodNumberAfterChange": 80, "signatureBeforeChange": " \tpublic void flushZipFiles()", "signatureAfterChange": " \tpublic void flushZipFiles(Object owner)", "diff": ["-\tpublic void flushZipFiles() {", "-\t\tThread currentThread = Thread.currentThread();", "-\t\tHashMap map = (HashMap)this.zipFiles.get();", "-\t\tif (map == null) return;", "-\t\tthis.zipFiles.set(null);", "-\t\tIterator iterator = map.values().iterator();", "-\t\twhile (iterator.hasNext()) {", "-\t\t\ttry {", "-\t\t\t\tZipFile zipFile = (ZipFile)iterator.next();", "-\t\t\t\tif (JavaModelManager.ZIP_ACCESS_VERBOSE) {", "-\t\t\t\t\tSystem.out.println(\"(\" + currentThread + \") [JavaModelManager.flushZipFiles()] Closing ZipFile on \" +zipFile.getName()); //$NON-NLS-1$//$NON-NLS-2$", "-\t\t\t\t}", "-\t\t\t\tzipFile.close();", "-\t\t\t} catch (IOException e) {", "-\t\t\t\t// problem occured closing zip file: cannot do much more", "-\t\t\t}", "+\tpublic void flushZipFiles(Object owner) {", "+\t\tZipCache zipCache = (ZipCache)this.zipFiles.get();", "+\t\tif (zipCache == null) {", "+\t\t\treturn;", "+\t\t}", "+\t\t// the owner will be responsible for flushing the cache", "+\t\t// we want to check object identity to make sure this is the owner that created the cache", "+\t\tif (zipCache.owner == owner) {", "+\t\t\tthis.zipFiles.set(null);", "+\t\t\tzipCache.flush();"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "ce057eaf476e496eda6fccf0f65edbd0", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/model/org/eclipse/jdt/internal/core/JavaModelManager.java", "commitBeforeChange": "34524ca2a2726d3f2d12d7ec232f0ab3f3d44b88", "commitAfterChange": "bd9b7470ed45d9a74b5c4178e4b5a244ec7162c6", "methodNumberBeforeChange": 76, "methodNumberAfterChange": 80, "signatureBeforeChange": " \tpublic void flushZipFiles()", "signatureAfterChange": " \tpublic void flushZipFiles(Object owner)", "diff": ["-\tpublic void flushZipFiles() {", "-\t\tThread currentThread = Thread.currentThread();", "-\t\tHashMap map = (HashMap)this.zipFiles.get();", "-\t\tif (map == null) return;", "-\t\tthis.zipFiles.set(null);", "-\t\tIterator iterator = map.values().iterator();", "-\t\twhile (iterator.hasNext()) {", "-\t\t\ttry {", "-\t\t\t\tZipFile zipFile = (ZipFile)iterator.next();", "-\t\t\t\tif (JavaModelManager.ZIP_ACCESS_VERBOSE) {", "-\t\t\t\t\tSystem.out.println(\"(\" + currentThread + \") [JavaModelManager.flushZipFiles()] Closing ZipFile on \" +zipFile.getName()); //$NON-NLS-1$//$NON-NLS-2$", "-\t\t\t\t}", "-\t\t\t\tzipFile.close();", "-\t\t\t} catch (IOException e) {", "-\t\t\t\t// problem occured closing zip file: cannot do much more", "-\t\t\t}", "+\tpublic void flushZipFiles(Object owner) {", "+\t\tZipCache zipCache = (ZipCache)this.zipFiles.get();", "+\t\tif (zipCache == null) {", "+\t\t\treturn;", "+\t\t}", "+\t\t// the owner will be responsible for flushing the cache", "+\t\t// we want to check object identity to make sure this is the owner that created the cache", "+\t\tif (zipCache.owner == owner) {", "+\t\t\tthis.zipFiles.set(null);", "+\t\t\tzipCache.flush();"]}], "num": 9667}