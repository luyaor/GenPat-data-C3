{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "da4f3ed871b9d700ca03acf966206efe", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "36335d2f0b2e8bca672f049eb0ff0c9f", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ast/BinaryExpression.java", "commitBeforeChange": "3e74f4ef73845fee74b0867380da94913c5a23bb", "commitAfterChange": "9b26565edd8f00a28f01564be0384c99bbdfa335", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": " \t\t \tpublic TypeBinding resolveType(BlockScope scope)", "signatureAfterChange": " \t\t \tpublic TypeBinding resolveType(BlockScope scope)", "diff": ["-\t\tif (left instanceof CastExpression) left.bits |= IgnoreNeedForCastCheckMASK; // will check later on", "+\t\tboolean argsContainCast = false;", "+\t\tif (left instanceof CastExpression) {", "+\t\t\tleft.bits |= IgnoreNeedForCastCheckMASK; // will check later on", "+\t\t\targsContainCast = true;", "+\t\t}", "-\t\tif (right instanceof CastExpression) right.bits |= IgnoreNeedForCastCheckMASK; // will check later on", "+\t\tif (right instanceof CastExpression) {", "+\t\t\tright.bits |= IgnoreNeedForCastCheckMASK; // will check later on", "+\t\t\targsContainCast = true;", "+\t\t}", "-\t\tint leftId = leftType.id;", "-\t\tint rightId = rightType.id;", "-\t\tif (leftId > 15", "-\t\t\t|| rightId > 15) { // must convert String + Object || Object + String", "-\t\t\tif (leftId == T_String) {", "-\t\t\t\trightId = T_Object;", "-\t\t\t} else if (rightId == T_String) {", "-\t\t\t\tleftId = T_Object;", "+\t\tint leftTypeId = leftType.id;", "+\t\tint rightTypeId = rightType.id;", "+\t\tif (leftTypeId > 15", "+\t\t\t|| rightTypeId > 15) { // must convert String + Object || Object + String", "+\t\t\tif (leftTypeId == T_String) {", "+\t\t\t\trightTypeId = T_Object;", "+\t\t\t} else if (rightTypeId == T_String) {", "+\t\t\t\tleftTypeId = T_Object;", "-\t\t\tif (leftId == T_String", "+\t\t\tif (leftTypeId == T_String", "-\t\t\t\t\t} else if (rightId == T_String", "+\t\t\t\t\t} else if (rightTypeId == T_String", "-\t\tint result = ResolveTypeTables[operator][(leftId << 4) + rightId];", "-\t\tleft.implicitConversion = result >>> 12;", "-\t\tright.implicitConversion = (result >>> 4) & 0x000FF;", "+\t\tint operatorSignature = ResolveTypeTables[operator][(leftTypeId << 4) + rightTypeId];", "+\t\tleft.implicitConversion = operatorSignature >>> 12;", "+\t\tright.implicitConversion = (operatorSignature >>> 4) & 0x000FF;", "-\t\tbits |= result & 0xF;", "-\t\tswitch (result & 0xF) { // record the current ReturnTypeID", "+\t\tbits |= operatorSignature & 0xF;", "+\t\tswitch (operatorSignature & 0xF) { // record the current ReturnTypeID", "-\t\tboolean unnecessaryLeftCast = (left.bits & UnnecessaryCastMask) != 0;", "-\t\tboolean unnecessaryRightCast = (right.bits & UnnecessaryCastMask) != 0;", "-\t\tif (unnecessaryLeftCast || unnecessaryRightCast) {", "-\t\t\tint alternateLeftId = unnecessaryLeftCast ? ((CastExpression)left).expression.resolvedType.id : leftId;", "-\t\t\tint alternateRightId = unnecessaryRightCast ? ((CastExpression)right).expression.resolvedType.id : rightId;", "-\t\t\tint alternateResult = ResolveTypeTables[operator][(alternateLeftId << 4) + alternateRightId];", "-\t\t\t// (cast)  left   Op (cast)  right --> result", "-\t\t\t//  1111   0000       1111   0000     1111", "-\t\t\t//  <<16   <<12       <<8    <<4       <<0", "-\t\t\tfinal int CompareMASK = (0xF<<16) + (0xF<<8) + 0xF; // mask hiding compile-time types", "-\t\t\tif ((result & CompareMASK) == (alternateResult & CompareMASK)) { // same promotions and result", "-\t\t\t\tif (unnecessaryLeftCast) scope.problemReporter().unnecessaryCast((CastExpression)left); ", "-\t\t\t\tif (unnecessaryRightCast) scope.problemReporter().unnecessaryCast((CastExpression)right);", "-\t\t\t}", "+\t\tif (argsContainCast) {", "+\t\t\tCastExpression.checkNeedForArgumentCasts(scope, operator, operatorSignature, left, leftTypeId, right, rightTypeId);", "-\t\tcomputeConstant(scope, leftId, rightId);", "+\t\tcomputeConstant(scope, leftTypeId, rightTypeId);"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "3db518e587bb0e12edbaa3823fd8eb9d", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/ast/BinaryExpression.java", "commitBeforeChange": "00b719c0d7c4b5271c818d210d84b349bc0324e3", "commitAfterChange": "f90ca993824b1d0e38aec24edba147ca4e8ec0d1", "methodNumberBeforeChange": 18, "methodNumberAfterChange": 18, "signatureBeforeChange": " \t\t \tpublic TypeBinding resolveType(BlockScope scope)", "signatureAfterChange": " \t\t \tpublic TypeBinding resolveType(BlockScope scope)", "diff": ["+\t\tif (left instanceof CastExpression) left.bits |= IgnoreNeedForCastCheckMASK; // will check later on", "+\t\tTypeBinding leftType = left.resolveType(scope);", "+", "+\t\tif (right instanceof CastExpression) right.bits |= IgnoreNeedForCastCheckMASK; // will check later on", "+\t\tTypeBinding rightType = right.resolveType(scope);", "+", "-\t\tTypeBinding leftTb = left.resolveType(scope);", "-\t\tTypeBinding rightTb = right.resolveType(scope);", "-\t\tif (leftTb == null || rightTb == null) {", "+\t\tif (leftType == null || rightType == null) {", "-\t\tint leftId = leftTb.id;", "-\t\tint rightId = rightTb.id;", "+\t\tint leftId = leftType.id;", "+\t\tint rightId = rightType.id;", "-\t\t\t\tscope.problemReporter().invalidOperator(this, leftTb, rightTb);", "+\t\t\t\tscope.problemReporter().invalidOperator(this, leftType, rightType);", "-\t\t\t\t&& rightTb.isArrayType()", "-\t\t\t\t&& ((ArrayBinding) rightTb).elementsType(scope) == CharBinding)", "-\t\t\t\tscope.problemReporter().signalNoImplicitStringConversionForCharArrayExpression(", "-\t\t\t\t\tright);", "-\t\t\telse if (", "-\t\t\t\trightId == T_String", "-\t\t\t\t\t&& leftTb.isArrayType()", "-\t\t\t\t\t&& ((ArrayBinding) leftTb).elementsType(scope) == CharBinding)", "-\t\t\t\tscope.problemReporter().signalNoImplicitStringConversionForCharArrayExpression(", "-\t\t\t\t\tleft);", "+\t\t\t\t\t&& rightType.isArrayType()", "+\t\t\t\t\t&& ((ArrayBinding) rightType).elementsType(scope) == CharBinding) {", "+\t\t\t\tscope.problemReporter().signalNoImplicitStringConversionForCharArrayExpression(right);", "+\t\t\t\t\t} else if (rightId == T_String", "+\t\t\t\t\t\t\t&& leftType.isArrayType()", "+\t\t\t\t\t\t\t&& ((ArrayBinding) leftType).elementsType(scope) == CharBinding) {", "+\t\t\t\tscope.problemReporter().signalNoImplicitStringConversionForCharArrayExpression(left);", "+\t\t\t}", "-\t\t// (cast)  left   Op (cast)  rigth --> result", "+\t\t// (cast)  left   Op (cast)  right --> result", "-\t\tint result =", "-\t\t\tResolveTypeTables[(bits & OperatorMASK) >> OperatorSHIFT][(leftId << 4)", "-\t\t\t\t+ rightId];", "+\t\tint operator = (bits & OperatorMASK) >> OperatorSHIFT;", "+\t\tint result = ResolveTypeTables[operator][(leftId << 4) + rightId];", "-\t\t\t\tscope.problemReporter().invalidOperator(this, leftTb, rightTb);", "+\t\t\t\tscope.problemReporter().invalidOperator(this, leftType, rightType);", "+\t\t// check need for operand cast", "+\t\tboolean unnecessaryLeftCast = (left.bits & UnnecessaryCastMask) != 0;", "+\t\tboolean unnecessaryRightCast = (right.bits & UnnecessaryCastMask) != 0;", "+\t\tif (unnecessaryLeftCast || unnecessaryRightCast) {", "+\t\t\tint alternateLeftId = unnecessaryLeftCast ? ((CastExpression)left).expression.resolvedType.id : leftId;", "+\t\t\tint alternateRightId = unnecessaryRightCast ? ((CastExpression)right).expression.resolvedType.id : rightId;", "+\t\t\tint alternateResult = ResolveTypeTables[operator][(alternateLeftId << 4) + alternateRightId];", "+\t\t\t// (cast)  left   Op (cast)  right --> result", "+\t\t\t//  1111   0000       1111   0000     1111", "+\t\t\t//  <<16   <<12       <<8    <<4       <<0", "+\t\t\tfinal int CompareMASK = (0xF<<16) + (0xF<<8) + 0xF; // mask hiding compile-time types", "+\t\t\tif ((result & CompareMASK) == (alternateResult & CompareMASK)) { // same promotions and result", "+\t\t\t\tif (unnecessaryLeftCast) scope.problemReporter().unnecessaryCast((CastExpression)left); ", "+\t\t\t\tif (unnecessaryRightCast) scope.problemReporter().unnecessaryCast((CastExpression)right);", "+\t\t\t}", "+\t\t}"]}], "num": 4588}