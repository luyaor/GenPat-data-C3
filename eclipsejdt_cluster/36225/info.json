{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "6c8681489ef6345efe955a3324c97594", "detectedBy": ["DIFF_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "01a2f12f7694a5f0cba32ac45da0c5ac", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/ParameterizedTypeBinding.java", "commitBeforeChange": "8816a21753c2d607b8868597ac43f18ef7dd2d50", "commitAfterChange": "3af20c8fa9116cf8e52dcf498c1b4eea06f21754", "methodNumberBeforeChange": 33, "methodNumberAfterChange": 35, "signatureBeforeChange": " \tpublic TypeBinding substitute(TypeBinding originalType)", "signatureAfterChange": " \tpublic TypeBinding substitute(TypeVariableBinding originalVariable)", "diff": ["-\tpublic TypeBinding substitute(TypeBinding originalType) {", "+\tpublic TypeBinding substitute(TypeVariableBinding originalVariable) {", "-\t\tswitch (originalType.kind()) {", "-\t\t\t", "-\t\t\tcase Binding.TYPE_PARAMETER:", "-\t\t\t\tTypeVariableBinding originalVariable = (TypeVariableBinding) originalType;", "-\t\t\t\tParameterizedTypeBinding currentType = this;", "-\t\t\t\twhile (true) {", "-\t\t\t\t\tif (currentType.arguments != null) {", "-\t\t\t\t\t\tTypeVariableBinding[] typeVariables = currentType.type.typeVariables();", "-\t\t\t\t\t\tint length = typeVariables.length;", "-\t\t\t\t\t\t// check this variable can be substituted given parameterized type", "-\t\t\t\t\t\tif (originalVariable.rank < length && typeVariables[originalVariable.rank] == originalVariable) {", "-\t\t\t\t\t\t\treturn currentType.arguments[originalVariable.rank];", "-\t\t\t\t\t\t}", "-\t\t\t\t\t}", "-\t\t\t\t\t// recurse on enclosing type, as it may hold more substitutions to perform", "-\t\t\t\t\tReferenceBinding enclosing = currentType.enclosingType();", "-\t\t\t\t\tif (!(enclosing instanceof ParameterizedTypeBinding))", "-\t\t\t\t\t\tbreak;", "-\t\t\t\t\tcurrentType = (ParameterizedTypeBinding) enclosing;", "-\t\t\t\t}", "+\t\tParameterizedTypeBinding currentType = this;", "+\t\twhile (true) {", "+\t\t\tTypeVariableBinding[] typeVariables = currentType.type.typeVariables();", "+\t\t\tint length = typeVariables.length;", "+\t\t\t// check this variable can be substituted given parameterized type", "+\t\t\tif (originalVariable.rank < length && typeVariables[originalVariable.rank] == originalVariable) {", "+\t\t\t    // lazy init, since cannot do so during binding creation if during supertype connection", "+\t\t\t    if (currentType.arguments == null)  currentType.initializeArguments(); // only for raw types", "+\t\t\t    if (currentType.arguments != null)", "+\t\t           return currentType.arguments[originalVariable.rank];", "+\t\t\t}", "+\t\t\t// recurse on enclosing type, as it may hold more substitutions to perform", "+\t\t\tif (currentType.isStatic()) break;", "+\t\t\tReferenceBinding enclosing = currentType.enclosingType();", "+\t\t\tif (!(enclosing instanceof ParameterizedTypeBinding))", "-\t\t\t\t", "-\t\t\tcase Binding.PARAMETERIZED_TYPE:", "-\t\t\t\tParameterizedTypeBinding originalParameterizedType = (ParameterizedTypeBinding) originalType;", "-\t\t\t\tReferenceBinding originalEnclosing = originalType.enclosingType();", "-\t\t\t\tReferenceBinding substitutedEnclosing = originalEnclosing;", "-\t\t\t\tif (originalEnclosing != null) {", "-\t\t\t\t\tsubstitutedEnclosing = (ReferenceBinding) this.substitute(originalEnclosing);", "-\t\t\t\t}", "-\t\t\t\tTypeBinding[] originalArguments = originalParameterizedType.arguments;", "-\t\t\t\tTypeBinding[] substitutedArguments = originalArguments;", "-\t\t\t\tif (originalArguments != null) {", "-\t\t\t\t\tsubstitutedArguments = Scope.substitute(this, originalArguments);", "-\t\t\t\t}", "-\t\t\t\tif (substitutedArguments != originalArguments || substitutedEnclosing != originalEnclosing) {", "-\t\t\t\t\tidenticalVariables: { // if substituted with original variables, then answer the generic type itself", "-\t\t\t\t\t\tif (substitutedEnclosing != originalEnclosing) break identicalVariables;", "-\t\t\t\t\t\tTypeVariableBinding[] originalVariables = originalParameterizedType.type.typeVariables();", "-\t\t\t\t\t\tfor (int i = 0, length = originalVariables.length; i < length; i++) {", "-\t\t\t\t\t\t\tif (substitutedArguments[i] != originalVariables[i]) break identicalVariables;", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\treturn originalParameterizedType.type;", "-\t\t\t\t\t}", "-\t\t\t\t\treturn this.environment.createParameterizedType(", "-\t\t\t\t\t\t\toriginalParameterizedType.type, substitutedArguments, substitutedEnclosing);", "-\t\t\t\t}", "-\t\t\t\tbreak;", "-\t\t\t\t", "-\t\t\tcase Binding.ARRAY_TYPE:", "-\t\t\t\tTypeBinding originalLeafComponentType = originalType.leafComponentType();", "-\t\t\t\tTypeBinding substitute = substitute(originalLeafComponentType); // substitute could itself be array type", "-\t\t\t\tif (substitute != originalLeafComponentType) {", "-\t\t\t\t\treturn this.environment.createArrayType(substitute.leafComponentType(), substitute.dimensions() + originalType.dimensions());", "-\t\t\t\t}", "-\t\t\t\tbreak;", "-", "-\t\t\tcase Binding.WILDCARD_TYPE:", "-\t\t        WildcardBinding wildcard = (WildcardBinding) originalType;", "-\t\t        if (wildcard.kind != Wildcard.UNBOUND) {", "-\t\t\t        TypeBinding originalBound = wildcard.bound;", "-\t\t\t        TypeBinding substitutedBound = substitute(originalBound);", "-\t\t\t        if (substitutedBound != originalBound) {", "-\t\t        \t\treturn this.environment.createWildcard(wildcard.genericType, wildcard.rank, substitutedBound, wildcard.kind);", "-\t\t\t        }", "-\t\t        }", "-\t\t\t\tbreak;", "-", "-\t\t\tcase Binding.GENERIC_TYPE:", "-\t\t\t    // treat as if parameterized with its type variables", "-\t\t\t\tReferenceBinding originalGenericType = (ReferenceBinding) originalType;", "-\t\t\t\toriginalEnclosing = originalType.enclosingType();", "-\t\t\t\tsubstitutedEnclosing = originalEnclosing;", "-\t\t\t\tif (originalEnclosing != null) {", "-\t\t\t\t\tsubstitutedEnclosing = (ReferenceBinding) this.substitute(originalEnclosing);", "-\t\t\t\t}", "-\t\t\t\tTypeVariableBinding[] originalVariables = originalGenericType.typeVariables();", "-\t\t\t\tint length = originalVariables.length;", "-\t\t\t\tSystem.arraycopy(originalVariables, 0, originalArguments = new TypeBinding[length], 0, length);", "-\t\t\t\tsubstitutedArguments = Scope.substitute(this, originalArguments);", "-\t\t\t\tif (substitutedArguments != originalArguments || substitutedEnclosing != originalEnclosing) {", "-\t\t\t\t\treturn this.environment.createParameterizedType(", "-\t\t\t\t\t\t\toriginalGenericType, substitutedArguments, substitutedEnclosing);", "-\t\t\t\t}", "-\t\t\t\tbreak;", "+\t\t\tcurrentType = (ParameterizedTypeBinding) enclosing;", "-\t\treturn originalType;", "+\t\treturn originalVariable;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "20dfda46d38b4ea9f16c06c3a570e888", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/lookup/RawTypeBinding.java", "commitBeforeChange": "da518c52dcbfe044bb9f162f86d0c3f3de2bc467", "commitAfterChange": "1bc1a66dee8786645fc203b9ded688e657fbf446", "methodNumberBeforeChange": 9, "methodNumberAfterChange": 10, "signatureBeforeChange": " \tpublic TypeBinding substitute(TypeBinding originalType)", "signatureAfterChange": " \tpublic TypeBinding substitute(TypeBinding originalType)", "diff": ["-\t    if (originalType.isTypeVariable()) {", "-\t        TypeVariableBinding originalVariable = (TypeVariableBinding) originalType;", "-\t\t    ParameterizedTypeBinding currentType = this;", "-\t        while (true) {", "-\t\t        TypeVariableBinding[] typeVariables = currentType.type.typeVariables();", "-\t\t        int length = typeVariables.length;", "-\t\t        // check this variable can be substituted given parameterized type", "-\t\t        if (originalVariable.rank < length && typeVariables[originalVariable.rank] == originalVariable) {", "-\t\t\t\t    // lazy init, since cannot do so during binding creation if during supertype connection", "-\t\t\t\t    if (currentType.arguments == null)  currentType.initializeArguments();", "-\t\t\t\t    if (currentType.arguments != null)", "-\t\t\t           return currentType.arguments[originalVariable.rank];", "+\t\tswitch (originalType.bindingType()) {", "+\t\t\t", "+\t\t\tcase Binding.TYPE_PARAMETER:", "+\t\t        TypeVariableBinding originalVariable = (TypeVariableBinding) originalType;", "+\t\t\t    ParameterizedTypeBinding currentType = this;", "+\t\t        while (true) {", "+\t\t\t        TypeVariableBinding[] typeVariables = currentType.type.typeVariables();", "+\t\t\t        int length = typeVariables.length;", "+\t\t\t        // check this variable can be substituted given parameterized type", "+\t\t\t        if (originalVariable.rank < length && typeVariables[originalVariable.rank] == originalVariable) {", "+\t\t\t\t\t    // lazy init, since cannot do so during binding creation if during supertype connection", "+\t\t\t\t\t    if (currentType.arguments == null)  currentType.initializeArguments();", "+\t\t\t\t\t    if (currentType.arguments != null)", "+\t\t\t\t           return currentType.arguments[originalVariable.rank];", "+\t\t\t        }", "+\t\t\t\t    // recurse on enclosing type, as it may hold more substitutions to perform", "+\t\t\t\t    ReferenceBinding enclosing = currentType.enclosingType();", "+\t\t\t\t    if (!(enclosing instanceof ParameterizedTypeBinding))", "+\t\t\t\t        break;", "+\t\t\t\t    currentType = (ParameterizedTypeBinding) enclosing;", "-\t\t\t    // recurse on enclosing type, as it may hold more substitutions to perform", "-\t\t\t    ReferenceBinding enclosing = currentType.enclosingType();", "-\t\t\t    if (!(enclosing instanceof ParameterizedTypeBinding))", "-\t\t\t        break;", "-\t\t\t    currentType = (ParameterizedTypeBinding) enclosing;", "-\t        }", "-\t    } else if (originalType.isParameterizedType()) {", "-\t        ParameterizedTypeBinding originalParameterizedType = (ParameterizedTypeBinding) originalType;", "-\t\t\treturn this.environment.createRawType(originalParameterizedType.type, originalParameterizedType.enclosingType());", "-\t    } else  if (originalType.isGenericType()) {", "-            return this.environment.createRawType((ReferenceBinding)originalType, null);", "-\t    } else if (originalType.isArrayType()) {", "-\t\t\tTypeBinding originalLeafComponentType = originalType.leafComponentType();", "-\t\t\tTypeBinding substitute = substitute(originalLeafComponentType); // substitute could itself be array type", "-\t\t\tif (substitute != originalLeafComponentType) {", "-\t\t\t\treturn this.environment.createArrayType(substitute.leafComponentType(), substitute.dimensions() + originalType.dimensions());", "-\t\t\t}", "+\t\t        break;", "+\t\t        ", "+\t\t\tcase Binding.PARAMETERIZED_TYPE:", "+\t\t        ParameterizedTypeBinding originalParameterizedType = (ParameterizedTypeBinding) originalType;", "+\t\t\t\treturn this.environment.createRawType(originalParameterizedType.type, originalParameterizedType.enclosingType());", "+\t\t\t\t", "+\t\t\tcase Binding.GENERIC_TYPE:", "+\t            return this.environment.createRawType((ReferenceBinding)originalType, null);", "+\t            ", "+\t\t\tcase Binding.ARRAY_TYPE:", "+\t\t\t\tTypeBinding originalLeafComponentType = originalType.leafComponentType();", "+\t\t\t\tTypeBinding substitute = substitute(originalLeafComponentType); // substitute could itself be array type", "+\t\t\t\tif (substitute != originalLeafComponentType) {", "+\t\t\t\t\treturn this.environment.createArrayType(substitute.leafComponentType(), substitute.dimensions() + originalType.dimensions());", "+\t\t\t\t}", "+\t\t\t\tbreak;"]}], "num": 36225}