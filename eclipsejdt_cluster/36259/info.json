{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "c05dc126dfe63669b1f9478e25347f85", "detectedBy": ["AST_DBSCAN"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "5e5446fa9b17b12821418ab65a165449", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/compiler/org/eclipse/jdt/internal/compiler/parser/Scanner.java", "commitBeforeChange": "418d08685e8bc0508d05dda65dd277f56261854f", "commitAfterChange": "2d42c7f71ce65658f51f1f08922e1c6e3b9d54f4", "methodNumberBeforeChange": 39, "methodNumberAfterChange": 74, "signatureBeforeChange": " private final boolean atReferenceExpression()", "signatureAfterChange": " private final boolean atReferenceExpression()", "diff": ["-}", "-private final boolean atReferenceExpression() {", "-", "-\t/* The cursor is at a '<' that figures just past the non terminal symbol `Name' and the parser is parsing a primary expression.", "-\t   Look ahead and answer true if we are at a method or constructor reference expression and false otherwise.", "-", "-\t   ReferenceExpression ::= Name OnlyTypeArgumentsForReferenceExpression Dimsopt '::' NonWildTypeArgumentsopt IdentifierOrNew", "-\t   ReferenceExpression ::= Name OnlyTypeArgumentsForReferenceExpression '.' ClassOrInterfaceType Dimsopt '::' NonWildTypeArgumentsopt IdentifierOrNew", "-\t   ", "-\t    Note: At this point, we don't handle annotations on dimensions, I think it is illegal, but needs to be verified.", "-\t*/ ", "-\t", "-\tint savedCurrentPosition = this.currentPosition;", "-\tint savedStartPosition = this.startPosition;", "-\tchar savedCurrentCharacter = this.currentCharacter;", "-\tchar[] savedWithoutUnicodeBuffer = null;", "-\tint savedWithoutUnicodePtr = this.withoutUnicodePtr;", "-\tif (savedWithoutUnicodePtr != 0) {", "-\t\tint length = this.withoutUnicodeBuffer.length;", "-\t\tSystem.arraycopy(this.withoutUnicodeBuffer, 0, savedWithoutUnicodeBuffer = new char [length], 0, length);", "-\t}", "-", "-\tboolean atReferenceExpression = false;", "-\tboolean whiteSpace;", "-\t", "-\tboolean justPastIdentifier = true, justPastDot = false, justPastTypeArguments = false;", "-\tchar c = '<';", "-\t", "-\ttry {", "-\t\tdone:", "-\t\t\twhile (true) {", "-\t\t\t\tNextToken: switch (c) {", "-\t\t\t\t\tcase '[' :", "-\t\t\t\t\tcase ']' :", "-\t\t\t\t\t\tbreak NextToken; // good enough for now.", "-\t\t\t\t\tcase '<' :", "-\t\t\t\t\t\tif (justPastIdentifier) {", "-\t\t\t\t\t\t\tjumpOver('<' , '>', blackListedTokens);", "-\t\t\t\t\t\t\tif (this.currentCharacter != '>')", "-\t\t\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t\t\t\tjustPastIdentifier = false;", "-\t\t\t\t\t\t\tjustPastTypeArguments = true;", "-\t\t\t\t\t\t\tjustPastDot = false;", "-\t\t\t\t\t\t\tbreak NextToken;", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t\tcase '.' :", "-\t\t\t\t\t\tif (justPastIdentifier || justPastTypeArguments) {", "-\t\t\t\t\t\t\tjustPastIdentifier = false;", "-\t\t\t\t\t\t\tjustPastTypeArguments = false;", "-\t\t\t\t\t\t\tjustPastDot = true;", "-\t\t\t\t\t\t\tbreak NextToken;", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t\tcase ':' :", "-\t\t\t\t\t\tif (justPastIdentifier || justPastTypeArguments) {", "-\t\t\t\t\t\t\tif (getNextChar(':')) {", "-\t\t\t\t\t\t\t\tatReferenceExpression = true;", "-\t\t\t\t\t\t\t\tbreak done;", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t\tdefault:", "-\t\t\t\t\t\tif (!justPastDot) {", "-\t\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tif (c < ScannerHelper.MAX_OBVIOUS) {", "-\t\t\t\t\t\t\tif ((ScannerHelper.OBVIOUS_IDENT_CHAR_NATURES[c] & ScannerHelper.C_IDENT_START) != 0) {", "-\t\t\t\t\t\t\t\tscanIdentifierOrKeyword();", "-\t\t\t\t\t\t\t\tjustPastDot = false;", "-\t\t\t\t\t\t\t\tjustPastIdentifier = true;", "-\t\t\t\t\t\t\t\tjustPastTypeArguments = false;", "-\t\t\t\t\t\t\t\tbreak NextToken;", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tboolean isJavaIdStart;", "-\t\t\t\t\t\tif (c >= HIGH_SURROGATE_MIN_VALUE && c <= HIGH_SURROGATE_MAX_VALUE) {", "-\t\t\t\t\t\t\t// Unicode 4 detection", "-\t\t\t\t\t\t\tchar low = (char) getNextChar();", "-\t\t\t\t\t\t\tif (low < LOW_SURROGATE_MIN_VALUE || low > LOW_SURROGATE_MAX_VALUE) {", "-\t\t\t\t\t\t\t\t// illegal low surrogate", "-\t\t\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\tisJavaIdStart = ScannerHelper.isJavaIdentifierStart(this.complianceLevel, c, low);", "-\t\t\t\t\t\t} else if (c >= LOW_SURROGATE_MIN_VALUE && c <= LOW_SURROGATE_MAX_VALUE) {", "-\t\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t\t\t} else {", "-\t\t\t\t\t\t\t// optimized case already checked", "-\t\t\t\t\t\t\tisJavaIdStart = ScannerHelper.isJavaIdentifierStart(this.complianceLevel, c);", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tif (isJavaIdStart) {", "-\t\t\t\t\t\t\tscanIdentifierOrKeyword();", "-\t\t\t\t\t\t\tjustPastDot = false;", "-\t\t\t\t\t\t\tjustPastIdentifier = true;", "-\t\t\t\t\t\t\tjustPastTypeArguments = false;", "-\t\t\t\t\t\t\tbreak NextToken;", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tthrow new InvalidInputException();", "-\t\t\t\t}", "-\t\t\t\tdo { // skip past white space", "-\t\t\t\t\tthis.startPosition = this.currentPosition;", "-\t\t\t\t\tif (((this.currentCharacter = this.source[this.currentPosition++]) == '\\\\')", "-\t\t\t\t\t\t\t&& (this.source[this.currentPosition] == 'u')) {", "-\t\t\t\t\t\twhiteSpace = jumpOverUnicodeWhiteSpace();", "-\t\t\t\t\t} else {", "-\t\t\t\t\t\twhiteSpace = CharOperation.isWhitespace(this.currentCharacter);", "-\t\t\t\t\t}", "-\t\t\t\t} while (whiteSpace);", "-\t\t\t\tc = this.currentCharacter;  //next non-white character, loop back to decide what to do.", "-\t\t\t}\t", "-\t} catch (Exception e) {", "-\t\t// ignore", "-\t} finally {", "-\t\t// Restore status quo ante and return suitable value.", "-\t\tthis.currentPosition = savedCurrentPosition;", "-\t\tthis.startPosition = savedStartPosition;", "-\t\tthis.currentCharacter = savedCurrentCharacter;", "-\t\tthis.withoutUnicodePtr = savedWithoutUnicodePtr;", "-\t\tif (savedWithoutUnicodePtr != 0) {", "-\t\t\tSystem.arraycopy(savedWithoutUnicodeBuffer, 0, this.withoutUnicodeBuffer, 0, savedWithoutUnicodeBuffer.length);", "-\t\t}", "-\t}", "-\treturn atReferenceExpression;", "-}", "+}", "+private final boolean atReferenceExpression() { // Did the '<' we saw just now herald a reference expression ?", "+\treturn getVanguardParser().parse(TokenNameCOLON_COLON);", "+}"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "cb9a46a52c3ebc7d4bac571c644abe17", "repository": "http://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git", "fileName": "org.eclipse.jdt.core/formatter/org/eclipse/jdt/internal/formatter/CodeFormatterVisitor.java", "commitBeforeChange": "f4680a34e1f2039b2a192d0a537b3157d981aa26", "commitAfterChange": "41f0eedac440a5a7408e664ba09866184ebddd55", "methodNumberBeforeChange": 47, "methodNumberAfterChange": 48, "signatureBeforeChange": " \tpublic boolean visit(ArrayInitializer arrayInitializer, BlockScope scope)", "signatureAfterChange": " \tpublic boolean visit(ArrayInitializer arrayInitializer, BlockScope scope)", "diff": ["-\t", "-\t\tfinal int numberOfParens = (arrayInitializer.bits & ASTNode.ParenthesizedMASK) >> ASTNode.ParenthesizedSHIFT;", "-\t\tif (numberOfParens > 0) {", "-\t\t\tmanageOpeningParenthesizedExpression(arrayInitializer, numberOfParens);", "-\t\t}", "-\t\tthis.scribe.printNextToken(TerminalTokens.TokenNameLBRACE, this.preferences.insert_space_before_opening_brace_in_array_initializer);", "-\t\t", "-\t\tfinal Expression[] expressions = arrayInitializer.expressions;", "-\t\tif (expressions != null) {", "-\t\t\tint expressionsLength = expressions.length;", "-\t\t\tif (expressionsLength > 1) {", "-\t\t\t\tAlignment arrayInitializerAlignment =this.scribe.createAlignment(", "-\t\t\t\t\t\t\"array_initializer\",//$NON-NLS-1$", "-\t\t\t\t\t\tthis.preferences.array_initializer_expressions_alignment,", "-\t\t\t\t\t\tAlignment.R_OUTERMOST,", "-\t\t\t\t\t\texpressionsLength,", "-\t\t\t\t\t\tthis.scribe.scanner.currentPosition,", "-\t\t\t\t\t\ttrue);", "-\t\t\t\tthis.scribe.enterAlignment(arrayInitializerAlignment);", "-\t\t\t\tboolean ok = false;", "-\t\t\t\tdo {", "-\t\t\t\t\ttry {", "-\t\t\t\t\t\tthis.scribe.alignFragment(arrayInitializerAlignment, 0);", "-\t\t\t\t\t\tif (this.preferences.insert_space_before_first_initializer) {", "-\t\t\t\t\t\t\tthis.scribe.space();", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\texpressions[0].traverse(this, scope);", "-\t\t\t\t\t\tfor (int i = 1; i < expressionsLength; i++) {", "-\t\t\t\t\t\t\tthis.scribe.printNextToken(TerminalTokens.TokenNameCOMMA, this.preferences.insert_space_before_comma_in_array_initializer);", "-\t\t\t\t\t\t\tthis.scribe.alignFragment(arrayInitializerAlignment, i);", "-\t\t\t\t\t\t\tif (this.preferences.insert_space_after_comma_in_array_initializer) {", "-\t\t\t\t\t\t\t\tthis.scribe.space();", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\texpressions[i].traverse(this, scope);", "-\t\t\t\t\t\t\tif (i == expressionsLength - 1) {", "-\t\t\t\t\t\t\t\tif (isComma()) {", "-\t\t\t\t\t\t\t\t\tthis.scribe.printNextToken(TerminalTokens.TokenNameCOMMA, this.preferences.insert_space_before_comma_in_array_initializer);", "-\t\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\tok = true;", "-\t\t\t\t\t} catch (AlignmentException e) {", "-\t\t\t\t\t\tthis.scribe.redoAlignment(e);", "-\t\t\t\t\t}", "-\t\t\t\t} while (!ok);", "-\t\t\t\tthis.scribe.exitAlignment(arrayInitializerAlignment, true);", "-\t\t\t} else {", "-\t\t\t\t// we don't need to use an alignment", "-\t\t\t\tif (this.preferences.insert_space_before_first_initializer) {", "-\t\t\t\t\tthis.scribe.space();", "-\t\t\t\t}", "-\t\t\t\texpressions[0].traverse(this, scope);", "-\t\t\t\tif (expressionsLength == 1) {", "-\t\t\t\t\tif (isComma()) {", "-\t\t\t\t\t\tthis.scribe.printNextToken(TerminalTokens.TokenNameCOMMA, this.preferences.insert_space_before_comma_in_array_initializer);", "-\t\t\t\t\t}", "-\t\t\t\t} else {", "-\t\t\t\t\tfor (int i = 1; i < expressionsLength; i++) {", "-\t\t\t\t\t\tthis.scribe.printNextToken(TerminalTokens.TokenNameCOMMA, this.preferences.insert_space_before_comma_in_array_initializer);", "-\t\t\t\t\t\tif (this.preferences.insert_space_after_comma_in_array_initializer) {", "-\t\t\t\t\t\t\tthis.scribe.space();", "-\t\t\t\t\t\t}", "-\t\t\t\t\t\texpressions[i].traverse(this, scope);", "-\t\t\t\t\t\tif (i == expressionsLength - 1) {", "-\t\t\t\t\t\t\tif (isComma()) {", "-\t\t\t\t\t\t\t\tthis.scribe.printNextToken(TerminalTokens.TokenNameCOMMA, this.preferences.insert_space_before_comma_in_array_initializer);", "-\t\t\t\t\t\t\t}", "-\t\t\t\t\t\t}", "-\t\t\t\t\t}", "-\t\t\t\t}", "-\t\t\t}", "-\t\t\tif (this.preferences.insert_new_line_before_closing_brace_in_array_initializer) {", "-\t\t\t\tthis.scribe.printNewLine();", "-\t\t\t}", "-\t\t\tthis.scribe.printNextToken(TerminalTokens.TokenNameRBRACE, this.preferences.insert_space_before_closing_brace_in_array_initializer, true); ", "-\t\t} else {", "-\t\t\tif (this.preferences.insert_new_line_before_closing_brace_in_array_initializer) {", "-\t\t\t\tthis.scribe.printNewLine();", "-\t\t\t}", "-\t\t\tthis.scribe.printNextToken(TerminalTokens.TokenNameRBRACE, this.preferences.insert_space_between_empty_array_initializer, true);", "-\t\t}", "-\t", "-\t\tif (numberOfParens > 0) {", "-\t\t\tmanageClosingParenthesizedExpression(arrayInitializer, numberOfParens);", "-\t\t}", "+\t\tformatArrayInitializer(arrayInitializer, scope, this.preferences.insert_space_before_opening_brace_in_array_initializer || this.preferences.insert_space_after_assignment_operators);"]}], "num": 36259}