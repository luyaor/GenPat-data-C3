{"@class": "de.fau.cs.inf2.cthree.data.Cluster", "id": "95d7dba155bee8aecba639091a1e01e0", "detectedBy": ["DIFF_HIERARCHICAL"], "members": [{"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "1899b573046c5b02f1ca50fff4d745c8", "repository": "https://github.com/jgrapht/jgrapht", "fileName": "jgrapht-core/src/main/java/org/jgrapht/graph/AbstractGraph.java", "commitBeforeChange": "8413c0621739087aaa2597f10b6a867735224f2d", "commitAfterChange": "39b789d7e41c82b46b5b0099b4e021514410c6a5", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": "     public boolean equals(Object object)", "signatureAfterChange": "     public boolean equals(Object object)", "diff": ["-        if (object == null) return false;", "-        if (!(object instanceof Graph)) return false;", "-        if (getClass() != object.getClass()) return false;", "+        if (object == null || getClass() != object.getClass()) return false;", "+        Set<E> otherEdges = new LinkedHashSet<E>(g.edgeSet());", "+            // first of all we should check that the same vertices are connected in other graph (VK);", "+            V source = getEdgeSource(e);", "+            V target = getEdgeTarget(e);", "+", "+            if (!g.containsEdge(source, target)) return false;", "+", "-                if (!g.containsEdge(getEdgeSource(e), getEdgeTarget(e))) return false;", "-                E edge = g.getEdge(getEdgeSource(e), getEdgeTarget(e)); ", "-                if (Math.abs(getEdgeWeight(e) - g.getEdgeWeight(edge)) > 10e-7) return false;", "-            } else {", "-                if (!g.containsEdge(e)) return false;", "-                if (Math.abs(getEdgeWeight(e) - g.getEdgeWeight(e)) > 10e-7) return false;", "-            }", "+                // we also should check if there is any overridden equals() method in hierarchy", "+                // so, users can write their own edge classes as subclasses of DefaultEdge", "+                // with custom implementation of equals() method (VK);", "+                try {", "+                    Method equals = e.getClass().getMethod(\"equals\", new Class<?>[] { Object.class });", "+                    boolean edgeFound = false;", "+                    for (E ee: g.getAllEdges(source, target)) {", "+                        if (!otherEdges.contains(ee)) continue;", "+                        if (equals.getDeclaringClass() != Object.class) {", "+                            if (e.equals(ee)) {", "+                                if (e instanceof DefaultWeightedEdge) {", "+                                    if (Math.abs(getEdgeWeight(e) - g.getEdgeWeight(ee)) > 10e-7) return false;", "+                                }", "+                                otherEdges.remove(ee);", "+                                edgeFound = true;", "+                                break;", "+                            }", "+                        } else {", "+                            if (e instanceof DefaultWeightedEdge) {", "+                                if (Math.abs(getEdgeWeight(e) - g.getEdgeWeight(ee)) < 10e-7) {", "+                                    otherEdges.remove(ee);", "+                                    edgeFound = true;", "+                                    break;", "+                                }", "+                            } else {", "+                                otherEdges.remove(ee);", "+                                edgeFound = true;", "+                                break;", "+                            }", "+                        }", "+                    }", "+                    if (!edgeFound) return false;", "+                } catch (NoSuchMethodException ignored) {", "+                    // should never happens, we always have equals() method (VK);", "+                }", "+            } else if (!otherEdges.remove(e)) return false;", "-        for (E e: g.edgeSet()) {", "-            if (e instanceof IntrusiveEdge) {", "-                if (!containsEdge(g.getEdgeSource(e), g.getEdgeTarget(e))) return false;", "-                E edge = getEdge(g.getEdgeSource(e), g.getEdgeTarget(e)); ", "-                if (Math.abs(g.getEdgeWeight(e) - getEdgeWeight(edge)) > 10e-7) return false;", "-            } else {", "-                if (!containsEdge(e)) return false;", "-                if (Math.abs(getEdgeWeight(e) - g.getEdgeWeight(e)) > 10e-7) return false;", "-            }", "-        }", "+        // finally, if edges set of the other graph is empty - graphs are equal (VK);", "+        if (!otherEdges.isEmpty()) return false;", "-       return true;", "+        return true;"]}, {"@class": "de.fau.cs.inf2.cthree.data.CodeChange", "id": "f5d679a9bb48a4bf3214b8150098e1ed", "repository": "https://github.com/jgrapht/jgrapht", "fileName": "jgrapht-core/src/main/java/org/jgrapht/graph/AbstractGraph.java", "commitBeforeChange": "2cb98d0c1094fff00a22763c10d4fd59f71eaae5", "commitAfterChange": "4efd29b14c87e09927591be73abc578e10bee63c", "methodNumberBeforeChange": 10, "methodNumberAfterChange": 10, "signatureBeforeChange": "     public boolean equals(Object object)", "signatureAfterChange": "     public boolean equals(Object obj)", "diff": ["-    public boolean equals(Object object)", "+    public boolean equals(Object obj)", "-        if (this == object) return true;", "-        if (object == null || getClass() != object.getClass()) return false;", "+        if (this == obj) {", "+            return true;", "+        }", "+        if (obj == null || getClass() != obj.getClass()) {", "+            return false;", "+        }", "-        Graph<V, E> g = TypeUtil.uncheckedCast(object, typeDecl);", "+        Graph<V, E> g = TypeUtil.uncheckedCast(obj, typeDecl);", "-        if (!vertexSet().equals(g.vertexSet())) return false;", "+        if (!vertexSet().equals(g.vertexSet())) {", "+            return false;", "+        }", "+        if (edgeSet().size() != g.edgeSet().size()) {", "+            return false;", "+        }", "-        Set<E> otherEdges = new LinkedHashSet<E>(g.edgeSet());", "-            // first of all we should check that the same vertices are connected in other graph (VK);", "-            if (!g.containsEdge(source, target)) return false;", "-", "-            if (e instanceof IntrusiveEdge) {", "-                // we also should check if there is any overridden equals() method in hierarchy", "-                // so, users can write their own edge classes as subclasses of DefaultEdge", "-                // with custom implementation of equals() method (VK);", "-                try {", "-                    Method equals = e.getClass().getMethod(\"equals\", new Class<?>[] { Object.class });", "-                    boolean edgeFound = false;", "-                    for (E ee: g.getAllEdges(source, target)) {", "-                        if (!otherEdges.contains(ee)) continue;", "-                        if (equals.getDeclaringClass() != Object.class) {", "-                            if (e.equals(ee)) {", "-                                if (e instanceof DefaultWeightedEdge) {", "-                                    if (Math.abs(getEdgeWeight(e) - g.getEdgeWeight(ee)) > 10e-7) return false;", "-                                }", "-                                otherEdges.remove(ee);", "-                                edgeFound = true;", "-                                break;", "-                            }", "-                        } else {", "-                            if (e instanceof DefaultWeightedEdge) {", "-                                if (Math.abs(getEdgeWeight(e) - g.getEdgeWeight(ee)) < 10e-7) {", "-                                    otherEdges.remove(ee);", "-                                    edgeFound = true;", "-                                    break;", "-                                }", "-                            } else {", "-                                otherEdges.remove(ee);", "-                                edgeFound = true;", "-                                break;", "-                            }", "-                        }", "+            boolean found = false;", "+            for (E ee: g.getAllEdges(source, target)) {", "+                if (e == ee || e.equals(ee)) {", "+                    if (e != ee && Math.abs(getEdgeWeight(e) ", "+                        - g.getEdgeWeight(ee)) > 10e-7)", "+                    {", "+                        return false;", "-                    if (!edgeFound) return false;", "-                } catch (NoSuchMethodException ignored) {", "-                    // should never happens, we always have equals() method (VK);", "+                    found = true;", "+                    break;", "-            } else if (!otherEdges.remove(e)) return false;", "-        }", "+            }", "-        // finally, if edges set of the other graph is empty - graphs are equal (VK);", "-        if (!otherEdges.isEmpty()) return false;", "+            if (!found) {", "+                return false;", "+            }", "+        }"]}]}